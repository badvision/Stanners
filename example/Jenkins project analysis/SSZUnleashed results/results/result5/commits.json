{"beeb7a07ef0159f402cf72083cce1d8353b9b1c5":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/rssBar.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/rssBar.jelly":[{"add":["28","      <a href=\"rssAll\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> RSS ${%for all}<\/a>","31","      <a href=\"rssFailed\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> RSS ${%for failures}<\/a>","34","      <a href=\"rssLatest\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> RSS ${%for just latest builds}<\/a>","37","<\/j:jelly>"],"delete":["28","      <a href=\"rssAll\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> ${%for all}<\/a>","31","      <a href=\"rssFailed\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> ${%for failures}<\/a>","34","      <a href=\"rssLatest\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> ${%for just latest builds}<\/a>","37","<\/j:jelly>"]}],"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/index.jelly":[{"add":["90","        <a href=\"${it.baseUrl}\/rssAll\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> RSS ${%for all}<\/a>","92","        <a href=\"${it.baseUrl}\/rssFailed\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> RSS ${%for failures}<\/a>"],"delete":["90","        <a href=\"${it.baseUrl}\/rssAll\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> ${%for all}<\/a>","92","        <a href=\"${it.baseUrl}\/rssFailed\"><img src=\"${imagesURL}\/atom.gif\" border=\"0\" alt=\"Feed\"\/> ${%for failures}<\/a>"]}]}},"2f7520c3d455ec8f24632f7307363fc6b383dc87":{"changes":{"core\/src\/main\/java\/jenkins\/model\/PeepholePermalink.java":"MODIFY","test\/src\/test\/groovy\/jenkins\/model\/PeepholePermalinkTest.groovy":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/PeepholePermalink.java":[{"add":["136","            String target = String.valueOf(n);","137","            if (b != null && !new File(job.getBuildDir(), target).exists()) {","138","                \/\/ (re)create the build Number->Id symlink","139","                Util.createSymlink(job.getBuildDir(),b.getId(),target,TaskListener.NULL);","140","            }"],"delete":[]}],"test\/src\/test\/groovy\/jenkins\/model\/PeepholePermalinkTest.groovy":[{"add":["74","","75","    void testRebuildBuildNumberPermalinks() {","76","        def p = createFreeStyleProject()","77","        def b = assertBuildStatusSuccess(p.scheduleBuild2(0))","78","        File f = new File(p.getBuildDir(), \"1\")","79","        \/\/ assertTrue(Util.isSymlink(f))","80","        f.delete()","81","        PeepholePermalink link = p.getPermalinks().find({l -> l instanceof PeepholePermalink})","82","        println(link)","83","        link.updateCache(p, b)","84","        assertTrue(\"build symlink hasn't been restored\", f.exists())","85","    }"],"delete":[]}],"changelog.html":[{"add":["142","  <li class=bug>","143","    (re)create build number->id symlink if missing when updating permalink.","144","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19034\">issue 19034<\/a>)"],"delete":[]}]}},"e2cebef67b20bea9b7f3653f649481a99f049f48":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":[{"add":["142","        if (onlyIfSuccessful && build.getResult() != null && build.getResult().isWorseThan(Result.UNSTABLE)) {"],"delete":["142","        if (build.getResult().isWorseThan(Result.UNSTABLE) && onlyIfSuccessful) {"]}]}},"2bc3690b4fb33e7ecc589a654586e833d99fd021":{"changes":{"core\/src\/main\/resources\/lib\/layout\/task.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/layout\/task.jelly":[{"add":["209","              <a href=\"${href}\" class=\"task-link\" onclick=\"${attrs.onclick ?: (post ? 'return postRequest_' + id + '(this)' : null)}\" title=\"${title}\">"],"delete":["209","              <a href=\"${href}\" class=\"task-link\" onclick=\"${attrs.onclick ?: (post ? 'return postRequest_' + id + '(this)' : null)}\">"]}]}},"7e4d343b4c0b5aff63a1b5c2955a6f130c4a441a":{"changes":{"core\/src\/main\/java\/hudson\/views\/LastSuccessColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Descriptor.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/WeatherColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/LastStableColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/ListViewColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/BuildButtonColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/LastDurationColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/JobColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/StatusColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/LastFailureColumn.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/views\/LastSuccessColumn.java":[{"add":[],"delete":["27","import net.sf.json.JSONObject;","28","","29","import org.kohsuke.stapler.StaplerRequest;","42","        public ListViewColumn newInstance(StaplerRequest req, JSONObject formData) throws FormException {","43","            \/\/ This will be called with req == null also the Descriptor's doc tells you not. so the default impl fails","44","            return new LastSuccessColumn();","45","        }","46","","47","        @Override"]}],"core\/src\/main\/java\/hudson\/model\/Descriptor.java":[{"add":["30","import hudson.views.ListViewColumn;","329","     * <p>","330","     * For some types of {@link Describable}, such as {@link ListViewColumn}, this method","331","     * can be invoked with null request object for historical reason. Such design is considered","332","     * broken, but due to the compatibility reasons we cannot fix it. Because of this, the","333","     * default implementation gracefully handles null request, but the contract of the method","334","     * still is \"request is always non-null.\" Extension points that need to define the \"default instance\"","335","     * semantics should define a descriptor subtype and add the no-arg newInstance method.","336","     *","338","     *      Always non-null (see note above.) This object includes represents the entire submission.","342","     *      Always non-null.","357","                if (req==null) {","358","                    \/\/ yes, req is supposed to be always non-null, but see the note above","359","                    return clazz.newInstance();","360","                }","361","","367","        } catch (InstantiationException e) {","368","            throw new Error(e);","369","        } catch (IllegalAccessException e) {","370","            throw new Error(e);"],"delete":["329","     *      Always non-null. This object includes represents the entire submisison."]}],"core\/src\/main\/java\/hudson\/views\/WeatherColumn.java":[{"add":[],"delete":["28","import net.sf.json.JSONObject;","29","","30","import org.kohsuke.stapler.StaplerRequest;","43","        public ListViewColumn newInstance(StaplerRequest req, JSONObject formData) throws FormException {","44","            \/\/ This will be calles with req == null also the Descriptor's doc tells you not. so the default impl fails","45","            return new WeatherColumn();","46","        }","47","","48","        @Override"]}],"core\/src\/main\/java\/hudson\/views\/LastStableColumn.java":[{"add":[],"delete":["27","import net.sf.json.JSONObject;","28","","29","import org.kohsuke.stapler.StaplerRequest;","46","","47","        @Override","48","        public ListViewColumn newInstance(StaplerRequest req, JSONObject formData) throws FormException {","49","            return new LastStableColumn();","50","        }","51",""]}],"core\/src\/main\/java\/hudson\/views\/ListViewColumn.java":[{"add":["26","import hudson.Extension;","27","import hudson.ExtensionPoint;","30","import hudson.model.Hudson;","31","import hudson.model.Item;","32","import hudson.model.ListView;","44"," *","49"," * <p>","50"," * There also must be a default constructor, which is invoked to create a list view column in","51"," * the default configuration.","52"," *"],"delete":["25","import hudson.ExtensionPoint;","26","import hudson.ExtensionList;","27","import hudson.Extension;","29","import hudson.tasks.Publisher;","30","import hudson.tasks.UserNameResolver;","32","import hudson.model.ListView;","33","import hudson.model.Item;","34","import hudson.model.Hudson;"]}],"core\/src\/main\/java\/hudson\/views\/BuildButtonColumn.java":[{"add":[],"delete":["25","import net.sf.json.JSONObject;","26","","27","import org.kohsuke.stapler.StaplerRequest;","28","","31","import hudson.model.Descriptor.FormException;","44","        public ListViewColumn newInstance(StaplerRequest req, JSONObject formData) throws FormException {","45","            \/\/ This will be called with req == null also the Descriptor's doc tells you not. so the default impl fails","46","            return new BuildButtonColumn();","47","        }","48","","49","        @Override"]}],"core\/src\/main\/java\/hudson\/views\/LastDurationColumn.java":[{"add":[],"delete":["27","import net.sf.json.JSONObject;","28","","29","import org.kohsuke.stapler.StaplerRequest;","42","        public ListViewColumn newInstance(StaplerRequest req, JSONObject formData) throws FormException {","43","            \/\/ This will be called with req == null also the Descriptor's doc tells you not. so the default impl fails","44","            return new LastDurationColumn();","45","        }","46","","47","        @Override"]}],"core\/src\/main\/java\/hudson\/views\/JobColumn.java":[{"add":[],"delete":["27","import net.sf.json.JSONObject;","28","","29","import org.kohsuke.stapler.StaplerRequest;","42","        public ListViewColumn newInstance(StaplerRequest req, JSONObject formData) throws FormException {","43","            \/\/ This will be calles with req == null also the Descriptor's doc tells you not. so the default impl fails","44","            return new JobColumn();","45","        }","46","","47","        @Override"]}],"core\/src\/main\/java\/hudson\/views\/StatusColumn.java":[{"add":[],"delete":["25","import net.sf.json.JSONObject;","26","","27","import org.kohsuke.stapler.StaplerRequest;","28","","43","        public ListViewColumn newInstance(StaplerRequest req, JSONObject formData) throws FormException {","44","            \/\/ This will be called with req == null also the Descriptor's doc tells you not. so the default impl fails","45","            return new StatusColumn();","46","        }","47","","48","        @Override"]}],"core\/src\/main\/java\/hudson\/views\/LastFailureColumn.java":[{"add":[],"delete":["27","import net.sf.json.JSONObject;","28","","29","import org.kohsuke.stapler.StaplerRequest;","42","        public ListViewColumn newInstance(StaplerRequest req, JSONObject formData) throws FormException {","43","            \/\/ This will be called with req == null also the Descriptor's doc tells you not. so the default impl fails","44","            return new LastFailureColumn();","45","        }","46","","47","        @Override"]}]}},"f2508b36ed38c548debad02d12205b72f5840c59":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":[{"add":["51","        <f:slave-mode name=\"master.mode\" node=\"${it.node}\"\/>"],"delete":["51","        <f:slave-mode name=\"master.mode\" node=\"${it}\" \/>"]}],"changelog.html":[{"add":["60","  <li class=bug>","61","    Master node mode not correctly displayed in <code>\/computer\/(master)\/configure<\/code>.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17263\">issue 17263<\/a>)"],"delete":[]}]}},"f0dde2457e3e10a98efa6187073d164220789ba6":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/RedeployPublisher.java":"MODIFY","test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":"MODIFY","maven-plugin\/pom.xml":"MODIFY","test\/src\/test\/java\/hudson\/maven\/MavenBuildTest.java":"MODIFY","test\/src\/test\/java\/hudson\/maven\/Maven3BuildTest.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/RedeployPublisher.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman, Seiji Sogabe, Olivier Lamy"],"delete":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman, Seiji Sogabe"]}],"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Erik Ramfelt, ","4"," * Yahoo! Inc., Tom Huybrechts, Olivier Lamy"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Erik Ramfelt, Yahoo! Inc., Tom Huybrechts"]}],"maven-plugin\/pom.xml":[{"add":["41","    <mavenInterceptorsVersion>1.1<\/mavenInterceptorsVersion>"],"delete":["41","    <mavenInterceptorsVersion>1.0<\/mavenInterceptorsVersion>"]}],"test\/src\/test\/java\/hudson\/maven\/MavenBuildTest.java":[{"add":["133","    @Bug(8573)","134","    public void testBuildTimeStampProperty() throws Exception {","135","        MavenInstallation mavenInstallation = configureDefaultMaven();","136","        MavenModuleSet m = createMavenProject();","137","        m.setMaven( mavenInstallation.getName() );","138","        m.getReporters().add(new TestReporter());","139","        m.setScm(new ExtractResourceSCM(getClass().getResource(\"JENKINS-8573.zip\")));","140","        m.setGoals( \"process-resources\" );","141","        buildAndAssertSuccess(m);","142","        String content = m.getLastBuild().getWorkspace().child( \"target\/classes\/test.txt\" ).readToString();","143","        assertFalse( content.contains( \"${maven.build.timestamp}\") );","144","        assertFalse( content.contains( \"${maven.build.timestamp}\") );","145","","146","        System.out.println( \"content \" + content );","147","    }    ","148","    "],"delete":["7","import hudson.scm.SubversionSCM;","9","import hudson.util.NullStream;","13","import java.io.PrintWriter;","19","import org.tmatesoft.svn.core.SVNException;"]}],"test\/src\/test\/java\/hudson\/maven\/Maven3BuildTest.java":[{"add":["2","\/*","3"," * Licensed to the Apache Software Foundation (ASF) under one","4"," * or more contributor license agreements.  See the NOTICE file","5"," * distributed with this work for additional information","6"," * regarding copyright ownership.  The ASF licenses this file","7"," * to you under the Apache License, Version 2.0 (the","8"," * \"License\"); you may not use this file except in compliance","9"," * with the License.  You may obtain a copy of the License at","10"," *","11"," *  http:\/\/www.apache.org\/licenses\/LICENSE-2.0","12"," *","13"," * Unless required by applicable law or agreed to in writing,","14"," * software distributed under the License is distributed on an","15"," * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY","16"," * KIND, either express or implied.  See the License for the","17"," * specific language governing permissions and limitations","18"," * under the License.","19"," *\/","20","","167","    @Bug(8573)","168","    public void testBuildTimeStampProperty() throws Exception {","169","        MavenInstallation mavenInstallation = configureMaven3();","170","        MavenModuleSet m = createMavenProject();","171","        m.setMaven( mavenInstallation.getName() );","172","        m.getReporters().add(new TestReporter());","173","        m.setScm(new ExtractResourceSCM(getClass().getResource(\"JENKINS-8573.zip\")));","174","        m.setGoals( \"process-resources\" );","175","        buildAndAssertSuccess(m);","176","        String content = m.getLastBuild().getWorkspace().child( \"target\/classes\/test.txt\" ).readToString();","177","        assertFalse( content.contains( \"${maven.build.timestamp}\") );","178","        assertFalse( content.contains( \"${maven.build.timestamp}\") );","179","    }","180","    "],"delete":[]}]}},"cb6e568815976a2309bff9ebf3e4f7e0a070e769":{"changes":{"core\/src\/main\/java\/hudson\/model\/listeners\/SCMListener.java":"MODIFY","core\/src\/test\/java\/hudson\/model\/listeners\/SCMListenerTest.java":"ADD","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/listeners\/SCMListener.java":[{"add":["118","        if (Util.isOverridden(SCMListener.class, getClass(), \"onChangeLogParsed\", Run.class, SCM.class, TaskListener.class, ChangeLogSet.class)) {","119","            onChangeLogParsed((Run) build, build.getProject().getScm(), listener, changelog);","120","        }"],"delete":["118","        onChangeLogParsed((Run) build, build.getProject().getScm(), listener, changelog);"]}],"core\/src\/test\/java\/hudson\/model\/listeners\/SCMListenerTest.java":[{"add":[],"delete":[]}],"changelog.html":[{"add":["61","    <code>StackOverflowError<\/code> for some old <code>SCMListener<\/code>s.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-23522\">issue 23522<\/a>)","63","  <li class=bug>"],"delete":[]}]}},"fa00cd25296af0b1958be8d55a787a585b18e3e0":{"changes":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":[{"add":["25","import com.gargoylesoftware.htmlunit.BrowserVersion;","26","import com.gargoylesoftware.htmlunit.DefaultCredentialsProvider;","27","import com.gargoylesoftware.htmlunit.ProxyConfig;","36","import hudson.ProxyConfiguration;","51","import org.apache.commons.httpclient.auth.CredentialsProvider;","351","        \/\/ honor jenkins proxy settings in WebClient","352","        Jenkins h = Jenkins.getInstance();","353","        ProxyConfiguration jpc = h!=null ? h.proxy : null;","354","        if(jpc != null) {","355","            ProxyConfig pc = new ProxyConfig();","356","            pc.setProxyHost(jpc.name);","357","            pc.setProxyPort(jpc.port);","358","            wc.setProxyConfig(pc);","359","            if(jpc.getUserName() != null) {","360","                DefaultCredentialsProvider cp = new DefaultCredentialsProvider();","361","                cp.addCredentials(jpc.getUserName(), jpc.getPassword(), jpc.name, jpc.port, null);","362","                wc.setCredentialsProvider(cp);","363","            }","364","        }","365","        "],"delete":[]}],"changelog.html":[{"add":["58","    JDK auto-installation does not respect proxy settings","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10634\">issue 10634<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"faa939f778169d5a23b5ab6c0b2d863570105611":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["110","    <remoting.version>3.33<\/remoting.version>"],"delete":["110","    <remoting.version>3.34<\/remoting.version>"]}]}},"cb8cdda131d83ebecc3c357db714de9789c3b7cb":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","test\/src\/test\/java\/jenkins\/model\/PeepholePermalinkTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/PermalinkProjectAction.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["986","        return (RunT)Permalink.LAST_COMPLETED_BUILD.resolve(this);"],"delete":["986","        RunT r = getLastBuild();","987","        while (r != null && r.isBuilding())","988","            r = r.getPreviousBuild();","989","        return r;"]}],"test\/src\/test\/java\/jenkins\/model\/PeepholePermalinkTest.java":[{"add":["7","import java.util.logging.Level;","13","import org.jvnet.hudson.test.Issue;","15","import org.jvnet.hudson.test.LoggerRule;","21","    @Rule","22","    public LoggerRule logging = new LoggerRule().record(PeepholePermalink.class, Level.FINE);","27","    @Issue(\"JENKINS-56809\")","35","        String lcb = \"lastCompletedBuild\";","38","        \/* TODO fix utility to also accept case that the permalink is not mentioned at all:","39","        assertStorage(lfb, p, null);","40","        *\/","41","        assertStorage(lcb, p, b1);","49","        assertStorage(lcb, p, b2);","57","        assertStorage(lcb, p, b3);","58","","59","        assertEquals(b3, p.getLastSuccessfulBuild());","60","        assertEquals(b2, p.getLastFailedBuild());","61","        assertEquals(b3, p.getLastCompletedBuild());","67","        assertStorage(lcb, p, b2);","72","        assertStorage(lcb, p, b2);","77","        assertStorage(lcb, p, null);"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/PermalinkProjectAction.java":[{"add":["181","        public static final Permalink LAST_COMPLETED_BUILD = new PeepholePermalink() {","190","            @Override","191","            public boolean apply(Run<?, ?> run) {","192","                return !run.isBuilding();"],"delete":["181","        public static final Permalink LAST_COMPLETED_BUILD = new Permalink() {","190","            public Run<?,?> resolve(Job<?,?> job) {","191","                return job.getLastCompletedBuild();"]}]}},"128344dda3a3396e252e9e00272093f233c0b9c9":{"changes":{"core\/src\/main\/java\/hudson\/model\/queue\/WorkUnit.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/queue\/QueueTaskFilter.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/queue\/SubTask.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ResourceController.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/queue\/WorkUnit.java":[{"add":["29","import javax.annotation.CheckForNull;","66","    public @CheckForNull Executor getExecutor() {","70","    public void setExecutor(@CheckForNull Executor e) {"],"delete":["65","    public Executor getExecutor() {","69","    public void setExecutor(Executor e) {"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["1187","    public @CheckForNull R createExecutable() throws IOException {"],"delete":["1187","    public R createExecutable() throws IOException {"]}],"core\/src\/main\/java\/hudson\/model\/queue\/QueueTaskFilter.java":[{"add":["35","import javax.annotation.CheckForNull;","82","    public @CheckForNull Executable createExecutable() throws IOException {"],"delete":["81","    public Executable createExecutable() throws IOException {"]}],"core\/src\/main\/java\/hudson\/model\/queue\/SubTask.java":[{"add":["25","import hudson.model.AbstractProject;","35","import javax.annotation.CheckForNull;","74","     * @return {@link Executable} to be launched or null if the executable cannot be","75","     * created (e.g. {@link AbstractProject} is disabled)","76","     * @exception IOException {@link Executable} cannot be created","78","    @CheckForNull Executable createExecutable() throws IOException;"],"delete":["73","    Executable createExecutable() throws IOException;"]}],"core\/src\/main\/java\/hudson\/model\/ResourceController.java":[{"add":["32","import javax.annotation.Nonnull;","76","    public void execute(@Nonnull Runnable task, ResourceActivity activity ) throws InterruptedException {"],"delete":["75","    public void execute( Runnable task, ResourceActivity activity ) throws InterruptedException {"]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["1881","        public @CheckForNull Executable getExecutable() {"],"delete":["1881","        public Executable getExecutable() {"]}],"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["222","                \/\/ this code handles the behavior of null Executables returned","223","                \/\/ by tasks. In such case Jenkins starts the workUnit in order ","224","                \/\/ to report results to console outputs. ","225","                if (executable == null) {","226","                    throw new Error(\"The null Executable has been created for \"+workUnit+\". The task cannot be executed\");","227","                }","228","                "],"delete":[]}]}},"75bcef469e1d917d576be52aeb3d9e51d552cf19":{"changes":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_da.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_fr.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_da.properties":[{"add":["25","NewVersionAvailable=En ny version af Jenkins ({0}) er tilg\\u00e6ngelig til <a href=\"{1}\">hentning<\/a> \\","26","  (<a href=\"http:\/\/jenkins-ci.org\/changelog.html\">changelog<\/a>)."],"delete":["25","NewVersionAvailable=En ny version af Jenkins ({0}) er tilg\\u00e6ngelig til <a href=\"{1}\">hentning<\/a>"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_fr.properties":[{"add":["22","NewVersionAvailable=Une nouvelle version de Jenkins ({0}) est <a href=\"{1}\">disponible<\/a> \\","23","  (<a href=\"http:\/\/jenkins-ci.org\/changelog.html\">changelog<\/a>).","26","UpgradeComplete=Mise \\u00E0 jour vers Jenkins {0} est termin\\u00E9e, en attente de <a href=\"{1}\/safeRestart\">red\\u00E9marrage<\/a>."],"delete":["22","# TODO:OBSOLETED","23","NewVersionAvailable=Une nouvelle version de Jenkins ({0}) est <a href=\"{1}\">disponible<\/a>."]}]}},"bea7fbda4c5e4853db4092728263dfb93a9a6082":{"changes":{"core\/src\/main\/java\/hudson\/Main.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Main.java":[{"add":["112","        try {","113","            FileOutputStream os = new FileOutputStream(tmpFile);","115","            Writer w = new OutputStreamWriter(os,\"UTF-8\");","116","            w.write(\"<?xml version='1.0' encoding='UTF-8'?>\");","117","            w.write(\"<run><log encoding='hexBinary' content-encoding='\"+Charset.defaultCharset().name()+\"'>\");","118","            w.flush();","120","            \/\/ run the command","121","            long start = System.currentTimeMillis();","123","            List<String> cmd = new ArrayList<String>();","124","            for( int i=1; i<args.length; i++ )","125","                cmd.add(args[i]);","126","            Proc proc = new Proc.LocalProc(cmd.toArray(new String[0]),(String[])null,System.in,","127","                new DualOutputStream(System.out,new EncodingStream(os)));","129","            int ret = proc.join();","131","            w.write(\"<\/log><result>\"+ret+\"<\/result><duration>\"+(System.currentTimeMillis()-start)+\"<\/duration><\/run>\");","132","            w.close();","134","            String location = home+\"job\/\"+projectNameEnc+\"\/postBuildResult\";","135","            while(true) {","136","                try {","137","                    \/\/ start a remote connection","138","                    HttpURLConnection con = (HttpURLConnection) new URL(location).openConnection();","139","                    if (auth != null) con.setRequestProperty(\"Authorization\", auth);","140","                    con.setDoOutput(true);","141","                    \/\/ this tells HttpURLConnection not to buffer the whole thing","142","                    con.setFixedLengthStreamingMode((int)tmpFile.length());","143","                    con.connect();","144","                    \/\/ send the data","145","                    FileInputStream in = new FileInputStream(tmpFile);","146","                    Util.copyStream(in,con.getOutputStream());","147","                    in.close();","149","                    if(con.getResponseCode()!=200) {","150","                        Util.copyStream(con.getErrorStream(),System.err);","151","                    }","152","","153","                    return ret;","154","                } catch (HttpRetryException e) {","155","                    if(e.getLocation()!=null) {","156","                        \/\/ retry with the new location","157","                        location = e.getLocation();","158","                        continue;","159","                    }","160","                    \/\/ otherwise failed for reasons beyond us.","161","                    throw e;","164","        } finally {","165","            tmpFile.delete();"],"delete":["112","        tmpFile.deleteOnExit();","113","        FileOutputStream os = new FileOutputStream(tmpFile);","115","        Writer w = new OutputStreamWriter(os,\"UTF-8\");","116","        w.write(\"<?xml version='1.0' encoding='UTF-8'?>\");","117","        w.write(\"<run><log encoding='hexBinary' content-encoding='\"+Charset.defaultCharset().name()+\"'>\");","118","        w.flush();","120","        \/\/ run the command","121","        long start = System.currentTimeMillis();","123","        List<String> cmd = new ArrayList<String>();","124","        for( int i=1; i<args.length; i++ )","125","            cmd.add(args[i]);","126","        Proc proc = new Proc.LocalProc(cmd.toArray(new String[0]),(String[])null,System.in,","127","            new DualOutputStream(System.out,new EncodingStream(os)));","129","        int ret = proc.join();","131","        w.write(\"<\/log><result>\"+ret+\"<\/result><duration>\"+(System.currentTimeMillis()-start)+\"<\/duration><\/run>\");","132","        w.close();","134","        String location = home+\"job\/\"+projectNameEnc+\"\/postBuildResult\";","135","        while(true) {","136","            try {","137","                \/\/ start a remote connection","138","                HttpURLConnection con = (HttpURLConnection) new URL(location).openConnection();","139","                if (auth != null) con.setRequestProperty(\"Authorization\", auth);","140","                con.setDoOutput(true);","141","                \/\/ this tells HttpURLConnection not to buffer the whole thing","142","                con.setFixedLengthStreamingMode((int)tmpFile.length());","143","                con.connect();","144","                \/\/ send the data","145","                FileInputStream in = new FileInputStream(tmpFile);","146","                Util.copyStream(in,con.getOutputStream());","147","                in.close();","149","                if(con.getResponseCode()!=200) {","150","                    Util.copyStream(con.getErrorStream(),System.err);","152","","153","                return ret;","154","            } catch (HttpRetryException e) {","155","                if(e.getLocation()!=null) {","156","                    \/\/ retry with the new location","157","                    location = e.getLocation();","158","                    continue;","159","                }","160","                \/\/ otherwise failed for reasons beyond us.","161","                throw e;"]}]}},"0f89ef4162f5c9e0da687f51b1eae61aa512c4f9":{"changes":{"core\/src\/main\/java\/hudson\/model\/Fingerprint.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Fingerprint.java":[{"add":["696","                        if (tokens.length == 2) {","697","                            rs.ranges.add(new Range(Integer.parseInt(tokens[0]), Integer.parseInt(tokens[1]) + 1));","698","                        } else {","699","                            if (!skipError) {","700","                                throw new IllegalArgumentException(","701","                                        String.format(\"Unable to parse %s, expected string with a range M-N\", list));","702","                            }","703","                            \/\/ ignore malformed text like \"1-10-50\"","704","                        }","711","                        throw new IllegalArgumentException(","712","                                String.format(\"Unable to parse %s, expected number\", list));"],"delete":["696","                        rs.ranges.add(new Range(Integer.parseInt(tokens[0]),Integer.parseInt(tokens[1])+1));","703","                        throw new IllegalArgumentException(\"Unable to parse \"+list);","705",""]}]}},"598568a21fd196a08f9f7eae0a2483b5c2cb5dc4":{"changes":{"core\/src\/main\/resources\/lib\/form\/descriptorRadioList.jelly":"MODIFY","test\/src\/test\/java\/hudson\/ExtensionListTest.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/DescriptorList.java":"MODIFY","core\/src\/main\/java\/hudson\/DescriptorExtensionList.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/descriptorRadioList.jelly":[{"add":["50","\t  <j:forEach var=\"d\" items=\"${descriptors}\" varStatus=\"loop\">","51","      <f:radioBlock name=\"${varName}\" help=\"${d.helpFile}\" value=\"${loop.index}\""],"delete":["50","\t  <j:forEach var=\"d\" items=\"${descriptors}\">","51","      <f:radioBlock name=\"${varName}\" help=\"${d.helpFile}\" value=\"${d.id}\""]}],"test\/src\/test\/java\/hudson\/ExtensionListTest.java":[{"add":["8","import jenkins.model.Jenkins;","9","import hudson.model.Descriptor;","10","import hudson.model.Describable;","11","import hudson.util.DescriptorList;","13","","15","import java.util.Collection;"],"delete":["9","import java.util.Collection;","10","import java.util.HashMap;","12","import java.util.Map;","20","import hudson.model.Describable;","21","import hudson.model.Descriptor;","22","import hudson.util.DescriptorList;","23","import jenkins.model.Jenkins;","24","import net.sf.json.JSONObject;","25","","179","    @Test","180","    public void newInstanceFromRadioList() throws Exception {","181","        \/\/ test for DescriptorList","182","        Map<String, String> CONFIGMAP = new HashMap<>();","183","        CONFIGMAP.put(\"value\", Tai.class.getName());","184","        JSONObject CONFIG = JSONObject.fromObject(CONFIGMAP);","185","","186","        DescriptorList<Fish> LIST = new DescriptorList<Fish>(Fish.class);","187","        Fish FISH = LIST.newInstanceFromRadioList(CONFIG);","188","        assertTrue(FISH instanceof Tai);","189","","190","        \/\/ test for DescriptorExtensionList","191","        Map<String, String> configMap = new HashMap<>();","192","        configMap.put(\"value\", Saba.class.getName());","193","        JSONObject config = JSONObject.fromObject(configMap);","194","","195","        DescriptorExtensionList<Fish, Descriptor<Fish>> list = j.jenkins.<Fish, Descriptor<Fish>>getDescriptorList(Fish.class);","196","        Fish fish = list.newInstanceFromRadioList(config);","197","        assertTrue(fish instanceof Saba);","198","    }","199",""]}],"core\/src\/main\/java\/hudson\/util\/DescriptorList.java":[{"add":["160","        int idx = config.getInt(\"value\");","161","        return get(idx).newInstance(Stapler.getCurrentRequest(),config);"],"delete":["160","        String descriptorId = config.getString(\"value\");","161","        Descriptor<T> d = findByName(descriptorId);","162","        return d != null ? d.newInstance(Stapler.getCurrentRequest(),config) : null;"]}],"core\/src\/main\/java\/hudson\/DescriptorExtensionList.java":[{"add":["142","        int idx = config.getInt(\"value\");","143","        return get(idx).newInstance(Stapler.getCurrentRequest(),config);"],"delete":["142","        String descriptorId = config.getString(\"value\");","143","        Descriptor<T> d = findByName(descriptorId);","144","        return d != null ? d.newInstance(Stapler.getCurrentRequest(),config) : null;"]}]}},"951f447a5abb5c14a0239b935d2542d4250c2ab0":{"changes":{"changelog.html":"MODIFY","war\/src\/main\/webapp\/scripts\/sortable.js":"MODIFY"},"diff":{"changelog.html":[{"add":["60","  <li class=rfe>","61","    Sortable table wasn't \"stable\" when there are same values in different rows","62","  (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11551\">issue 11551<\/a>)"],"delete":["60","  <li class=>"]}],"war\/src\/main\/webapp\/scripts\/sortable.js":[{"add":["100","        text: \"&nbsp;&nbsp;&uarr;\"","104","        text: \"&nbsp;&nbsp;&darr;\"","143","    var sortfn2 = sortfn;","144","    if(dir === arrowTable.up) {","145","        \/\/ ascending","146","        sortfn2 = function(a,b){return -sortfn(a,b)};","147","    }","148","    newRows.sort(function(a,b) {","149","        return sortfn2(","150","            extractData(a.cells[column]),","151","            extractData(b.cells[column]));","152","    });","153",""],"delete":["100","        text: \"&nbsp;&nbsp;&uarr;\",","101","        reorder: function(rows) { rows.reverse(); }","105","        text: \"&nbsp;&nbsp;&darr;\",","106","        reorder: function() {}","139","    newRows.sort(function(a,b) {","140","      return sortfn(","141","              extractData(a.cells[column]),","142","              extractData(b.cells[column]));","143","    });","144","","151","\t\t","153","    dir.reorder(newRows);"]}]}},"7c2d0ceaada1bc4d7a2b61fb3860634851c1848f":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["51","      <version>1.41<\/version>"],"delete":["51","      <version>1.40<\/version>"]}]}},"344aafe4a4ed7a9850387a008a4530eefb8a6d02":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Run\/KeepLogBuildBadge\/badge.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Run\/KeepLogBuildBadge\/badge.jelly":[{"add":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi","25","  title=\"${%Keep this build forever}\" alt=\"[saved]\"","26","  src=\"${imagesURL}\/16x16\/lock.gif\"\/>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","25","  title=\"${it.tooltip}\" alt=\"[saved]\"","26","  src=\"${imagesURL}\/16x16\/lock.gif\"\/>"]}]}},"7aef5bc6e0cff3d379a9b0cb77f28cf995aca2ae":{"changes":{"core\/src\/main\/resources\/hudson\/matrix\/Messages_pt_BR.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/matrix\/Messages_pt_BR.properties":[{"add":["25","MatrixProject.Pronoun=Projeto de M\\u00faltiplas Configura\\u00e7\\u00f5es","41","TextArea.DisplayName=Eixo Definido pelo Usu\\u00e1rio"],"delete":["25","MatrixProject.Pronoun=Projeto de M\\u00fltiplas Configura\\u00e7\\u00f5es","41","TextArea.DisplayName=Eixo Definido pelo Usu\\u00E1rio"]}]}},"5e8bb98ee071c67046fdd3a09d2021c272560207":{"changes":{"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":[{"add":["261","    ","262","    \/**","263","     * Returns all the bundled plugin dependencies for a particular Jenkins version","264","     *\/","265","    public static List<PluginWrapper.Dependency> getPreviouslyBundledDependencies(String jenkinsVersion) {","266","        List<PluginWrapper.Dependency> out = new ArrayList<>();","267","        for (DetachedPlugin detached : DETACHED_LIST) {","268","            if (jenkinsVersion == null || jenkinsVersion.equals(\"null\") || new VersionNumber(jenkinsVersion).compareTo(detached.splitWhen) <= 0) {","269","                out.add(new PluginWrapper.Dependency(detached.shortName + ':' + detached.requireVersion));","270","            }","271","        }","272","        return out;","273","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["1142","                    \/\/ There could be cases like:","1143","                    \/\/ 'plugin.ambiguous.updatesite' where both","1144","                    \/\/ 'plugin' @ 'ambigiuous.updatesite' and 'plugin.ambiguous' @ 'updatesite' resolve to valid plugins","1154","            ","1158","            ","1159","            \/\/ JENKINS-33308 - automatically install implied\/previously bundled dependencies for older plugins that may need them","1160","            for(PluginWrapper.Dependency previouslyBundledDependency : ClassicPluginStrategy.getPreviouslyBundledDependencies(p.requiredCore)) {","1161","                \/\/ if they aren't already installed, note the dependencies show 'need restart' messages if installed multiple times","1162","                \/\/ but it can't be prevented here","1163","                if(getPlugin(previouslyBundledDependency.shortName) == null) {","1164","                    \/\/ as these are basically jenkins core, these should always be installed from the default update center","1165","                    UpdateSite.Plugin previouslyBundledPlugin = getPlugin(previouslyBundledDependency.shortName, UpdateCenter.ID_DEFAULT);","1166","                    Future<UpdateCenter.UpdateCenterJob> jobFuture = previouslyBundledPlugin.deploy(dynamicLoad, correlationId);","1167","                    installJobs.add(jobFuture);","1168","                }","1169","            }","1170","            "],"delete":["1142","                    \/\/ TODO: Someone that understands what the following logic is about, please add a comment."]}]}},"d61538c83bc08de5a2b4fd3b8314aea5fee512c6":{"changes":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":[{"add":["167","                \/\/ according to http:\/\/community.acresso.com\/showthread.php?t=83301, \\\" is the trick to quote values with whitespaces.","168","                \/\/ Oh Windows, oh windows, why do you have to be so difficult?","169","                args.add(\"\/v\/qn REBOOT=Suppress INSTALLDIR=\\\\\\\"\"+normalizedPath+\"\\\\\\\" \/L \\\\\\\"\"+logFile.getRemote()+\"\\\\\\\"\");"],"delete":["167","                args.add(\"\/v\/qn REBOOT=Suppress INSTALLDIR=\"+normalizedPath+\" \/L \"+logFile.getRemote());"]}]}},"0c16c8576bf662b2af049d8d9720ea7d30085c3a":{"changes":{"core\/src\/test\/java\/hudson\/FilePathTest.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/FilePathTest.java":[{"add":["40","import java.net.MalformedURLException;","44","import java.net.URLStreamHandlerFactory;","641","    @Issue(\"JENKINS-23507\")","642","    @Test public void installIfNecessaryFollowsRedirects() throws Exception{","643","        File tmp = temp.getRoot();","644","        final FilePath d = new FilePath(tmp);","645","        FilePath.UrlFactory urlFactory = mock(FilePath.UrlFactory.class);","646","        d.setUrlFactory(urlFactory);","647","        final HttpURLConnection con = mock(HttpURLConnection.class);","648","        final HttpURLConnection con2 = mock(HttpURLConnection.class);","649","        final URL url = someUrlToZipFile(con);","650","        when(con.getResponseCode()).thenReturn(HttpURLConnection.HTTP_MOVED_TEMP);","651","        URL url2 = someUrlToZipFile(con2);","652","        String someUrl = url2.toExternalForm();","653","        when(con.getHeaderField(\"Location\")).thenReturn(someUrl);","654","        when(urlFactory.newURL(someUrl)).thenReturn(url2);","655","        when(con2.getResponseCode()).thenReturn(HttpURLConnection.HTTP_OK);","656","        when(con2.getInputStream()).thenReturn(someZippedContent());","657","","658","        ByteArrayOutputStream baos = new ByteArrayOutputStream();","659","        String message = \"going ahead\";","660","        assertTrue(d.installIfNecessaryFrom(url, new StreamTaskListener(baos), message));","661","    }","662",""],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["27","import com.google.common.annotations.VisibleForTesting;","74","import org.kohsuke.accmod.Restricted;","75","import org.kohsuke.accmod.restrictions.NoExternalUse;","96","import java.net.MalformedURLException;","195","     * Maximum http redirects we will follow. This defaults to the same number as Firefox\/Chrome tolerates.","196","     *\/","197","    private static final int MAX_REDIRECTS = 20;","198","","199","    \/**","766","        return installIfNecessaryFrom(archive, listener, message, MAX_REDIRECTS);","767","    }","768","","769","    private boolean installIfNecessaryFrom(@Nonnull URL archive, @CheckForNull TaskListener listener, @Nonnull String message, int maxRedirects) throws InterruptedException, IOException {","792","            if (con instanceof HttpURLConnection) {","795","                if (responseCode == HttpURLConnection.HTTP_MOVED_PERM","796","                        || responseCode == HttpURLConnection.HTTP_MOVED_TEMP) {","797","                    \/\/ follows redirect","798","                    if (maxRedirects > 0) {","799","                        String location = httpCon.getHeaderField(\"Location\");","800","                        listener.getLogger().println(\"Following redirect \" + archive.toExternalForm() + \" -> \" + location);","801","                        return installIfNecessaryFrom(getUrlFactory().newURL(location), listener, message, maxRedirects - 1);","802","                    } else {","803","                        listener.getLogger().println(\"Skipping installation of \" + archive + \" to \" + remote + \" due to too many redirects.\");","804","                        return false;","805","                    }","806","                }","807","                if (lastModified != 0) {","808","                    if (responseCode == HttpURLConnection.HTTP_NOT_MODIFIED) {","809","                        return false;","810","                    } else if (responseCode != HttpURLConnection.HTTP_OK) {","811","                        listener.getLogger().println(\"Skipping installation of \" + archive + \" to \" + remote + \" due to server error: \" + responseCode + \" \" + httpCon.getResponseMessage());","812","                        return false;","813","                    }","2549","    private static final UrlFactory DEFAULT_URL_FACTORY = new UrlFactory();","2550","","2551","    @Restricted(NoExternalUse.class)","2552","    static class UrlFactory {","2553","        public URL newURL(String location) throws MalformedURLException {","2554","            return new URL(location);","2555","        }","2556","    }","2557","","2558","    private UrlFactory urlFactory;","2559","","2560","    @VisibleForTesting","2561","    @Restricted(NoExternalUse.class)","2562","    void setUrlFactory(UrlFactory urlFactory) {","2563","        this.urlFactory = urlFactory;","2564","    }","2565","","2566","    private UrlFactory getUrlFactory() {","2567","        if (urlFactory != null) {","2568","            return urlFactory;","2569","        } else {","2570","            return DEFAULT_URL_FACTORY;","2571","        }","2572","    }","2573",""],"delete":["779","            if (lastModified != 0 && con instanceof HttpURLConnection) {","782","                if (responseCode == HttpURLConnection.HTTP_NOT_MODIFIED) {","783","                    return false;","784","                } else if (responseCode != HttpURLConnection.HTTP_OK) {","785","                    listener.getLogger().println(\"Skipping installation of \" + archive + \" to \" + remote + \" due to server error: \" + responseCode + \" \" + httpCon.getResponseMessage());","786","                    return false;"]}]}},"fabec0eef00212109a1ad5c2bedcb8c55de4f38a":{"changes":{"core\/src\/main\/resources\/hudson\/node_monitors\/SwapSpaceMonitor\/column.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/DiskSpaceMonitor\/column.jelly":"MODIFY","core\/src\/main\/java\/hudson\/node_monitors\/DiskSpaceMonitorDescriptor.java":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/TemporarySpaceMonitor\/column.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/node_monitors\/SwapSpaceMonitor\/column.jelly":[{"add":["34","<\/j:jelly>"],"delete":["34","<\/j:jelly>"]}],"core\/src\/main\/resources\/hudson\/node_monitors\/DiskSpaceMonitor\/column.jelly":[{"add":["31","      <td align=\"right\" data=\"${data.freeSize}\"><j:out value=\"${data.toHtml()}\"\/><\/td>","34","<\/j:jelly>"],"delete":["31","      <td align=\"right\" data=\"${data}\"><j:out value=\"${data.toHtml()}\"\/><\/td>","34","<\/j:jelly>"]}],"core\/src\/main\/java\/hudson\/node_monitors\/DiskSpaceMonitorDescriptor.java":[{"add":["39","import org.kohsuke.accmod.Restricted;","40","import org.kohsuke.accmod.restrictions.DoNotUse;","85","        \/\/ Needed for jelly that does not seem to be able to access properties","86","        \/\/ named 'size' as it confuses it with built-in size method and fails","87","        \/\/ to parse the expression expecting '()'.","88","        @Restricted(DoNotUse.class)","89","        public long getFreeSize() {","90","            return size;","91","        }","92",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/node_monitors\/TemporarySpaceMonitor\/column.jelly":[{"add":["31","      <td align=\"right\" data=\"${data.freeSize}\"><j:out value=\"${data.toHtml()}\"\/><\/td>","34","<\/j:jelly>"],"delete":["31","      <td align=\"right\" data=\"${data}\"><j:out value=\"${data.toHtml()}\"\/><\/td>","34","<\/j:jelly>"]}]}},"03214978a3226be82db0ca6f32098313efb61714":{"changes":{"core\/src\/main\/java\/hudson\/model\/ViewGroupMixIn.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ViewGroupMixIn.java":[{"add":["165","     * Returns the primary {@link View} that renders the top-page of Hudson or","166","     * {@code null} if there is no primary one defined.","169","    @CheckForNull","172","        if(v==null && !views().isEmpty()) \/\/ fallback"],"delete":["165","     * Returns the primary {@link View} that renders the top-page of Hudson.","170","        if(v==null) \/\/ fallback"]}]}},"5bc37c2ad49d6093e9b912159faf0db0131273c5":{"changes":{"core\/src\/main\/java\/hudson\/util\/DescribableList.java":"MODIFY","maven-plugin\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/DescribableList.java":[{"add":[],"delete":["41","import org.apache.avalon.framework.configuration.Reconfigurable;"]}],"maven-plugin\/pom.xml":[{"add":["356","        <exclusion><!-- bundling binding creates a problem with app servers that use different versions of slf4j -->","357","          <groupId>org.slf4j<\/groupId>","358","          <artifactId>jcl-over-slf4j<\/artifactId>","359","        <\/exclusion>"],"delete":[]}],"changelog.html":[{"add":["85","    Fixed a <tt>NoSuchMethodError<\/tt> on JBoss 5.1 EAP","86","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11960\">issue 11960<\/a>)","87","  <li class=bug>"],"delete":[]}]}},"6e5c41c65bbb8064aacfb9f618b86082c2fdeddd":{"changes":{"core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/RunParameterDefinitionTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":[{"add":["25","import static java.util.logging.Level.WARNING;","26","","27","import java.util.logging.Level;","28","import java.util.logging.Logger;","170","        Job project = getProject();","171","","172","        if (project == null) {","173","            return null;","174","        }","179","            lastBuild = project.getLastCompletedBuild();","182","            lastBuild = project.getLastSuccessfulBuild();","185","            lastBuild = project.getLastStableBuild();","188","            lastBuild = project.getLastBuild();","210","    private static final Logger LOGGER = Logger.getLogger(RunParameterDefinition.class.getName());"],"delete":["170","            lastBuild = getProject().getLastCompletedBuild();","173","            lastBuild = getProject().getLastSuccessfulBuild();","176","            lastBuild = getProject().getLastStableBuild();","179","            lastBuild = getProject().getLastBuild();"]}],"test\/src\/test\/java\/hudson\/model\/RunParameterDefinitionTest.java":[{"add":["28",""],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["2873","    public @CheckForNull <T extends Item> T getItemByFullName(@Nonnull String fullName, Class<T> type) throws AccessDeniedException {"],"delete":["2873","    public @CheckForNull <T extends Item> T getItemByFullName(String fullName, Class<T> type) throws AccessDeniedException {"]}]}},"6f818cebef90bf7dbcf85a86f334775ef8d4a900":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Hudson\/newView.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Hudson\/newView.jelly":[{"add":["43","            if(radio.checked) return false;  \/\/ if there's only one radiobutton"],"delete":[]}]}},"f420038bba05e66b21565348c5595e1f32c35983":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":[],"delete":["349","          <version>2.8<\/version>","354","          <version>3.0<\/version>","363","          <version>1.4<\/version>","368","          <version>2.3.1<\/version>","373","          <version>2.10.3<\/version>","381","          <version>2.6<\/version>","386","          <version>2.6<\/version>","391","          <version>2.20<\/version> <!-- ignoring ${maven-surefire-plugin.version} -->","405","          <version>2.4<\/version>","425","          <version>2.6<\/version>","460","          <version>1.7<\/version>","477","          <version>1.24<\/version>","500","          <version>2.5.2<\/version>","527","          <version>2.7.1<\/version>","543","          <version>2.0<\/version>","548","          <version>3.3<\/version>","560","        <version>3.0.0-M1<\/version> <!-- TODO 3.0.0 when released -->","605","\t        <version>1.15<\/version>","617","        <version>2.5.1<\/version>"]}]}},"3e44e1365e0d20ac77c914c3372767182735f616":{"changes":{"core\/src\/main\/java\/hudson\/tools\/InstallerTranslator.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/tools\/InstallerTranslatorTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/tools\/InstallerTranslator.java":[{"add":["44","        if (node.getRootPath() == null) {","45","            log.error(node.getDisplayName() + \" is offline; cannot locate \" + tool.getName());","46","            return null;","47","        }"],"delete":[]}],"changelog.html":[{"add":["58","    <code>IllegalArgumentException<\/code> from <code>AbstractProject.getEnvironment<\/code> when trying to get environment variables from an offline slave.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-23517\">issue 23517<\/a>)","60","  <li class=bug>"],"delete":[]}],"test\/src\/test\/java\/hudson\/tools\/InstallerTranslatorTest.java":[{"add":[],"delete":[]}]}},"c862eb849aa8421beaf5ed01556352dce84eb0ea":{"changes":{"core\/pom.xml":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/main.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/ListView\/configure-entries.jelly":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["335","      <version>1.132<\/version>"],"delete":["335","      <version>1.131<\/version>","338","          <groupId>dom4j<\/groupId>","339","          <artifactId>dom4j<\/artifactId>","340","        <\/exclusion>","341","        <exclusion>","472","      <groupId>org.jvnet.hudson.dom4j<\/groupId>","473","      <artifactId>dom4j<\/artifactId>","474","      <version>1.6.1-hudson-1<\/version>","475","      <exclusions>","476","        <exclusion>","477","          <groupId>xml-apis<\/groupId>","478","          <artifactId>xml-apis<\/artifactId>","479","        <\/exclusion>","480","      <\/exclusions>","481","    <\/dependency>","482","    <dependency>"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/index.jelly":[{"add":["32","        <br\/> ${%UpdatePageLegend(rootURL+'\/updateCenter\/')}"],"delete":["32","        &lt;br\/&gt; ${%UpdatePageLegend(rootURL+'\/updateCenter\/')}"]}],"core\/src\/main\/resources\/hudson\/model\/View\/main.jelly":[{"add":["29","        <br\/>"],"delete":["29","        &lt;br\/&gt;"]}],"core\/src\/main\/resources\/hudson\/model\/ListView\/configure-entries.jelly":[{"add":["31","      ${job.name} <br\/>"],"delete":["31","      ${job.name} &lt;br\/&gt;"]}]}},"142825718be9787547973eac0fb801414c6cf39e":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["284","        LOGGER.log(FINER, \"new {0} @{1}\", new Object[] {this, hashCode()});","323","            LOGGER.log(FINER, \"reload {0} @{1}\", new Object[] {this, hashCode()});","1746","                LOGGER.log(FINER, \"moving into POST_PRODUCTION on {0}\", this);","1842","        LOGGER.log(FINER, \"moving to BUILDING on {0}\", this);","1855","        LOGGER.log(FINER, \"moving to COMPLETED on {0}\", this);"],"delete":["284","        LOGGER.log(FINE, \"new {0} @{1}\", new Object[] {this, hashCode()});","323","            LOGGER.log(FINE, \"reload {0} @{1}\", new Object[] {this, hashCode()});","1746","                LOGGER.log(FINE, \"moving into POST_PRODUCTION on {0}\", this);","1842","        LOGGER.log(FINE, \"moving to BUILDING on {0}\", this);","1855","        LOGGER.log(FINE, \"moving to COMPLETED on {0}\", this);"]}]}},"ca8a5bde3ff1b11702a64c46841ebcce66a8a5a4":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["426","                    return new GZIPInputStream(in,8192);","434","                return new GZIPOutputStream(new BufferedOutputStream(out));","456","                    readFromTar(\"input stream\",dir, compression.extract(in));","1152","            int r = writeToTar(new File(remote),fileMask,excludes,TarCompression.GZIP.compress(pipe.getOut()));","1166","                        return writeToTar(f,fileMask,excludes,TarCompression.GZIP.compress(pipe.getOut()));"],"delete":["426","                    return new GZIPInputStream(in);","434","                return new GZIPOutputStream(out);","456","                    readFromTar(\"input stream\",dir, compression.extract(new BufferedInputStream(in)));","1152","            int r = writeToTar(new File(remote),fileMask,excludes,new GZIPOutputStream(pipe.getOut()));","1166","                        return writeToTar(f,fileMask,excludes,new GZIPOutputStream(pipe.getOut()));"]}]}},"00d27176f3a452e38bd0caafebe78c7bc2fa822f":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ListViewTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["619","    @Override public void delete() throws IOException, InterruptedException {"],"delete":["619","    @Override public synchronized void delete() throws IOException, InterruptedException {"]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["509","    public void delete() throws IOException, InterruptedException {","511","        synchronized (this) { \/\/ could just make performDelete synchronized but overriders might not honor that","512","            performDelete();","513","        } \/\/ JENKINS-19446: leave synch block, but JENKINS-22001: still notify synchronously","514","        invokeOnDeleted();","515","        Jenkins.getInstance().rebuildDependencyGraphAsync();","516","    }","518","    \/**","519","     * A pointless function to work around what appears to be a HotSpot problem. See JENKINS-5756 and bug 6933067","520","     * on BugParade for more details.","521","     *\/","522","    private void invokeOnDeleted() throws IOException {","523","        getParent().onDeleted(AbstractItem.this);"],"delete":["45","import jenkins.model.Jenkins.MasterComputer;","510","    public synchronized void delete() throws IOException, InterruptedException {","512","        performDelete();","514","        \/\/ defer the notification to avoid the lock ordering problem. See JENKINS-19446.","515","        MasterComputer.threadPoolForRemoting.submit(new java.util.concurrent.Callable<Void>() {","516","            @Override","517","            public Void call() throws Exception {","518","                invokeOnDeleted();","519","                Jenkins.getInstance().rebuildDependencyGraphAsync();","520","                return null;","521","            }","522","","523","            \/**","524","             * A pointless function to work around what appears to be a HotSpot problem. See JENKINS-5756 and bug 6933067","525","             * on BugParade for more details.","526","             *\/","527","            private void invokeOnDeleted() throws IOException {","528","                getParent().onDeleted(AbstractItem.this);","529","            }","530","        });"]}],"test\/src\/test\/java\/hudson\/model\/ListViewTest.java":[{"add":[],"delete":["130","        Thread.sleep(500); \/\/ TODO working around crappy JENKINS-19446 fix"]}]}},"f6454983acff9687f0655d23157f723ca5e11090":{"changes":{"core\/src\/main\/resources\/lib\/form\/hetero-list\/hetero-list.js":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/hetero-list\/hetero-list.js":[{"add":["35","        var menuButton = new YAHOO.widget.Button(btn, { type: \"menu\", menu: menu, menualignment: menuAlign.split(\"-\"), menuminscrollheight: 250 });"],"delete":["35","        var menuButton = new YAHOO.widget.Button(btn, { type: \"menu\", menu: menu, menualignment: menuAlign.split(\"-\") });"]}]}},"00292ff44c38a4d6c1423020f13f97e48efd7bad":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["108","  <li class=\"major bug\">","4394","    Fixed a pipe clogging problem thata name=v1.399 can result in a hanging build."],"delete":["108","  <li class=\"bug\">","4394","    Fixed a pipe clogging problem that can result in a hanging build."]}]}},"4f421c0e9f35c8ce1ef52e2da79396b6d9e9fce1":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_it.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_sl.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_fr.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_sv_SE.properties":"ADD","core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages_da.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_nl.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_ja.properties":"ADD","core\/src\/main\/java\/hudson\/model\/Cause.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages_zh_CN.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description.jelly":"ADD","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_ru.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Messages_es.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_es.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_de.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_ko.properties":"ADD","changelog.html":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages_ja.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_pt_BR.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Messages_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_da.properties":"ADD","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_zh_CN.properties":"ADD"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_it.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_sl.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_fr.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_sv_SE.properties":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["131","                owner, owner.getDelay(req), new ParametersAction(values), new CauseAction(new Cause.UserIdCause()));"],"delete":["131","                owner, owner.getDelay(req), new ParametersAction(values), new CauseAction(new Cause.UserCause()));"]}],"core\/src\/main\/resources\/hudson\/model\/Messages_da.properties":[{"add":["32","Cause.UserIdCause.ShortDescription=Startet af brugeren {0}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_nl.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["295","Cause.UserIdCause.ShortDescription=Started by user {0}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Messages_de.properties":[{"add":["278","Cause.UserIdCause.ShortDescription=Gestartet durch Benutzer {0}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_ja.properties":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Cause.java":[{"add":["184","     * ","185","     * @deprecated 1.428","186","     *   use {@link UserIdCause}","217","    \/**","218","     * A build is started by an user action.","219","     * ","220","     * @since 1.427","221","     *\/","222","    public static class UserIdCause extends Cause {","223","","224","        private String userId;","225","        ","226","        public UserIdCause() {","227","            User user = User.current();","228","            this.userId = (user == null) ? null : user.getId();","229","        }","230","","231","        @Exported(visibility = 3)","232","        public String getUserId() {","233","            return userId;","234","        }","235","        ","236","        @Exported(visibility = 3)","237","        public String getUserName() {","238","            String userName = \"anonymous\";","239","            if (userId != null) {","240","                User user = User.get(userId, false);","241","                if (user != null) ","242","                    userName = user.getDisplayName();","243","            }","244","            return userName;","245","        }","246","","247","        @Override","248","        public String getShortDescription() {","249","            return Messages.Cause_UserIdCause_ShortDescription(getUserName());","250","        }","251","        ","252","        @Override","253","        public boolean equals(Object o) {","254","            return o instanceof UserIdCause && Arrays.equals(new Object[]{userId},","255","                    new Object[]{((UserIdCause) o).userId});","256","        }","257","","258","        @Override","259","        public int hashCode() {","260","            return 295 + (this.userId != null ? this.userId.hashCode() : 0);","261","        }","262","    }","263",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Messages_zh_CN.properties":[{"add":["263","Cause.UserIdCause.ShortDescription=Started by user {0}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_ru.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Messages_es.properties":[{"add":["249","Cause.UserIdCause.ShortDescription=Lanzada por el usuario {0}","283","AbstractProject.AssignedLabelString.NoMatch=No hay ning\\u00fan nodo\/nube que cumpla esta asignaci\\u00f3n","285","AbstractProject.DownstreamBuildInProgress=El projecto padre {0} todav\\u00eda est\\u00e1 en ejecuci\\u00f3n","286","AbstractProject.AwaitingBuildForWorkspace=El trabajo est\\u00e1 esperando para tener un ''espacio de trabajo''","289","AbstractProject.AssignedLabelString.InvalidBooleanExpression=Expresi\\u00f3n booleana incorrecta: {0}"],"delete":["282","AbstractProject.AssignedLabelString.NoMatch=No hay ningn nodo\/nube que cumpla esta asignacin","284","AbstractProject.DownstreamBuildInProgress=El projecto padre {0} todava est en ejecucin","285","AbstractProject.AwaitingBuildForWorkspace=El trabajo est esperando para tener un ''espacio de trabajo''","288","AbstractProject.AssignedLabelString.InvalidBooleanExpression=Expresin booleana incorrecta: {0}"]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_es.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_de.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_ko.properties":[{"add":[],"delete":[]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Link \"Started by user XXX\" broken on build status page if user name modified.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10698\">issue 10698<\/a>)","60",""],"delete":["57","  <li class=>"]}],"core\/src\/main\/resources\/hudson\/model\/Messages_ja.properties":[{"add":["253","Cause.UserIdCause.ShortDescription=\\u30e6\\u30fc\\u30b6\\u30fc{0}\\u304c\\u5b9f\\u884c"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Messages_pt_BR.properties":[{"add":["119","# Started by user {0}","120","Cause.UserIdCause.ShortDescription= Iniciado pelo usu\\u00e1rio {0}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_pt_BR.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Messages_fr.properties":[{"add":["183","Cause.UserIdCause.ShortDescription=D\\u00e9marr\\u00e9 par l''utilisateur {0}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_da.properties":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["43","import hudson.model.Cause.UserIdCause;","1591","            cause = new UserIdCause();"],"delete":["43","import hudson.model.Cause.UserCause;","1591","            cause = new UserCause();"]}],"core\/src\/main\/resources\/hudson\/model\/Cause\/UserIdCause\/description_zh_CN.properties":[{"add":[],"delete":[]}]}},"3aae1bbc8f24faa624bfe2cab6a044d03d06167e":{"changes":{"core\/src\/main\/resources\/hudson\/model\/View\/newJob.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/View\/newJob.jelly":[{"add":["54","              <j:set var=\"descriptor\" value=\"${it.descriptor}\" \/>","55","              <s:textbox id=\"from\" name=\"from\" field=\"copyNewItemFrom\"\/>"],"delete":["54","              <input type=\"text\" id=\"from\" name=\"from\" field=\"copyNewItemFrom\" \/>"]}]}},"07e035f93c8779c0737926c1e00f30e35a3f49d0":{"changes":{"core\/src\/main\/resources\/lib\/layout\/layout.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/configure-entries.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/layout\/layout.jelly":[{"add":[],"delete":["107","    <!-- TODO: moved here as a temporary fix against HUDSON-7281. Use YUILoader to fix this problem -->","108","    <l:yui module=\"treeview\" \/>","109","    <link rel=\"stylesheet\" href=\"${rootURL}\/scripts\/yui\/treeview\/assets\/skins\/sam\/treeview.css\" type=\"text\/css\" \/>","110","    "]}],"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/configure-entries.jelly":[{"add":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Stephen Connolly","43","    <!-- Needed for LabelAxis, but including these from LabelAxis\/config.jelly is too late -->","44","    <l:yui module=\"treeview\" \/>","45","    <link rel=\"stylesheet\" type=\"text\/css\"","46","          href=\"${rootURL}\/scripts\/yui\/treeview\/assets\/skins\/sam\/treeview.css\" \/>","47",""],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Stephen Connolly"]}]}},"0e5274b4b5fdd4dd6751d9c2186ca0c2c83932be":{"changes":{"test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":[],"delete":["991","    public void testDefaultImplementationOfGetCauseOfBlockageForBlocked() throws Exception {","992","        Queue queue = r.getInstance().getQueue();","993","        queue.schedule2(new TestTask(new AtomicInteger(0), true), 0);","994","","995","        queue.maintain();","996","","997","        assertEquals(1, r.jenkins.getQueue().getBlockedItems().size());","998","        CauseOfBlockage actual = r.jenkins.getQueue().getBlockedItems().get(0).getCauseOfBlockage();","999","        CauseOfBlockage expected = CauseOfBlockage.fromMessage(Messages._Queue_Unknown());","1000","","1001","        assertEquals(expected.getShortDescription(), actual.getShortDescription());","1002","    }","1003","","1004","    @Test"]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":[],"delete":["1843","            if (isBuildBlocked()) {","1844","                return CauseOfBlockage.fromMessage(Messages._Queue_Unknown());","1845","            }"]}]}},"0e122dfcacebbf791223ca416ad845e12a4ca38e":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/test\/TestObject.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/ClassResult.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/test\/AggregatedTestResultAction.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/test\/AbstractTestResultAction.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/test\/TestObject.java":[{"add":["313","     * Gets the full name of this object.","314","     * @since 1.594","315","     *\/","316","    public String getFullName() {","317","        StringBuilder sb = new StringBuilder(getName());","318","        if (getParent() != null) {","319","            sb.insert(0, \" : \");","320","            sb.insert(0, getParent().getFullName());","321","        }","322","        return sb.toString();","323","    }","324","","325","","326","    \/**"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":[{"add":["333","    @Override"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/ClassResult.java":[{"add":["229","    @Override"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/test\/AggregatedTestResultAction.java":[{"add":["104","    public List<? extends TestResult> getFailedTests() {","105","        List<TestResult> failedTests = new ArrayList<TestResult>(failCount);"],"delete":["26","import hudson.tasks.junit.CaseResult;","27","import hudson.tasks.junit.TestResult;","106","    public List<CaseResult> getFailedTests() {","107","        List<CaseResult> failedTests = new ArrayList<CaseResult>(failCount);"]}],"core\/src\/main\/java\/hudson\/tasks\/test\/AbstractTestResultAction.java":[{"add":["189","    public List<? extends TestResult> getFailedTests() {"],"delete":["27","import hudson.tasks.junit.CaseResult;","190","    public List<CaseResult> getFailedTests() {"]}]}},"e292366f62e511323442a03abdcf020396cbc407":{"changes":{"core\/src\/main\/resources\/lib\/form\/apply\/apply.js":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/apply\/apply.js":[{"add":["51","","52","                    var contentHeight = r.height*3\/4;","53","                    var dialogStyleHeight = contentHeight+40;","54","                    var contentWidth = r.width*3\/4;","55","                    var dialogStyleWidth = contentWidth+20;","56","","57","                    $(containerId).style.height = contentHeight+\"px\";","58","                    $(containerId).style.width = contentWidth+\"px\";","59","                    $(containerId).style.overflow = \"scroll\";","60","","61","                    responseDialog.cfg.setProperty(\"width\", dialogStyleWidth+\"px\");","62","                    responseDialog.cfg.setProperty(\"height\", dialogStyleHeight+\"px\");"],"delete":["51","                    responseDialog.cfg.setProperty(\"width\",r.width*3\/4+\"px\");","52","                    responseDialog.cfg.setProperty(\"height\",r.height*3\/4+\"px\");"]}]}},"60c2071a301ec6310e6e71b2c98df1b6cade9c90":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":"MODIFY","test\/src\/test\/java\/jenkins\/model\/MasterBuildConfigurationTest.java":"ADD"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":[{"add":["7","f.entry(title:_(\"Labels\"),field:\"labelString\") {","8","    f.textbox()","10","f.slave_mode(name:\"master.mode\",node:app)"],"delete":["7","if (!app.slaves.isEmpty() || !app.clouds.isEmpty()) {","8","    f.entry(title:_(\"Labels\"),field:\"labelString\") {","9","        f.textbox()","10","    }","11","    f.slave_mode(name:\"master.mode\",node:app)"]}],"test\/src\/test\/java\/jenkins\/model\/MasterBuildConfigurationTest.java":[{"add":[],"delete":[]}]}},"5de91d0d285975e0cde9cddc00e2751544cc7c45":{"changes":{"core\/src\/main\/resources\/lib\/form\/password.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/password.jelly":[{"add":["62","  <f:prepareDatabinding\/>","63","  <j:set var=\"resolvedValue\" value=\"${attrs.value ?: instance[attrs.field]}\" \/>","64","","68","        <j:when test=\"${!empty(resolvedValue)}\"><span class=\"jenkins-readonly\">****<\/span><\/j:when>","77","        <j:set var=\"value\" value=\"${h.getPasswordValue(resolvedValue)}\"\/>","138","                   value=\"${h.getPasswordValue(resolvedValue)}\""],"delete":["65","        <j:when test=\"${value}\"><span class=\"jenkins-readonly\">****<\/span><\/j:when>","72","      <f:prepareDatabinding\/>","75","          <j:set var=\"value\" value=\"${h.getPasswordValue(attrs.value ?: instance[attrs.field])}\"\/>","136","                   value=\"${h.getPasswordValue(attrs.value ?: instance[attrs.field])}\""]}]}},"0646acb3895b90bbf284ed5c5ad6616a3b99e600":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["358","      <version>1.148<\/version>"],"delete":["358","      <version>1.147<\/version>"]}]}},"704899683c580f2bb265d2d400552819b72b681f":{"changes":{"core\/src\/main\/java\/hudson\/security\/HudsonFilter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/HudsonFilter.java":[{"add":["29","import static java.util.logging.Level.SEVERE;","101","        try {","102","            Hudson hudson = Hudson.getInstance();","103","            if (hudson != null) {","104","                \/\/ looks like we are initialized after Hudson came into being. initialize it now. See #3069","105","                LOGGER.fine(\"Security wasn't initialized; Initializing it...\");","106","                SecurityRealm securityRealm = hudson.getSecurityRealm();","107","                reset(securityRealm);","108","                LOGGER.fine(\"securityRealm is \" + securityRealm);","109","                LOGGER.fine(\"Security initialized\");","110","            }","111","        } catch (ExceptionInInitializerError e) {","112","            \/\/ see HUDSON-4592. In some containers this happens before","113","            \/\/ WebAppMain.contextInitialized kicks in, which makes","114","            \/\/ the whole thing fail hard before a nicer error check","115","            \/\/ in WebAppMain.contextInitialized. So for now,","116","            \/\/ just report it here, and let the WebAppMain handle the failure gracefully.","117","            LOGGER.log(SEVERE, \"Failed to initialize Hudson\",e);"],"delete":["100","        Hudson hudson = Hudson.getInstance();","101","        if (hudson != null) {","102","            \/\/ looks like we are initialized after Hudson came into being. initialize it now. See #3069","103","            LOGGER.fine(\"Security wasn't initialized; Initializing it...\");","104","            SecurityRealm securityRealm = hudson.getSecurityRealm();","105","            reset(securityRealm);","106","            LOGGER.fine(\"securityRealm is \" + securityRealm);","107","            LOGGER.fine(\"Security initialized\");"]}]}},"94b235dd750410c9adb041d09567c93ea49e9488":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModule.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/FilteredChangeLogSet.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenUtil.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["30","import hudson.scm.ChangeLogSet;","158","     * Returns the filtered changeset entries that match the given module.","159","     *\/","160","    \/*package*\/ List<ChangeLogSet.Entry> getChangeSetFor(final MavenModule mod) {","161","        return new ArrayList<ChangeLogSet.Entry>() {","162","            {","163","                \/\/ modules that are under 'mod'. lazily computed","164","                List<MavenModule> subsidiaries = null;","165","","166","                for (ChangeLogSet.Entry e : getChangeSet()) {","167","                    if(isDescendantOf(e, mod)) {","168","                        if(subsidiaries==null)","169","                            subsidiaries = mod.getSubsidiaries();","170","","171","                        \/\/ make sure at least one change belongs to this module proper,","172","                        \/\/ and not its subsidiary module","173","                        if (notInSubsidiary(subsidiaries, e))","174","                            add(e);","175","                    }","176","                }","177","            }","178","","179","            private boolean notInSubsidiary(List<MavenModule> subsidiaries, ChangeLogSet.Entry e) {","180","                for (String path : e.getAffectedPaths())","181","                    if(!belongsToSubsidiary(subsidiaries, path))","182","                        return true;","183","                return false;","184","            }","185","","186","            private boolean belongsToSubsidiary(List<MavenModule> subsidiaries, String path) {","187","                for (MavenModule sub : subsidiaries)","188","                    if(path.startsWith(sub.getRelativePath()))","189","                        return true;","190","                return false;","191","            }","192","","193","            \/**","194","             * Does this change happen somewhere in the given module or its descendants?","195","             *\/","196","            private boolean isDescendantOf(ChangeLogSet.Entry e, MavenModule mod) {","197","                for (String path : e.getAffectedPaths())","198","                    if(path.startsWith(mod.getRelativePath()))","199","                        return true;","200","                return false;","201","            }","202","        };","203","    }","204","","205","    \/**","425","                                if (!getChangeSetFor(m).isEmpty()) {"],"delete":["376","                                if (MavenUtil.isModuleInChangeset(m, MavenModuleSetBuild.this)) {"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModule.java":[{"add":["146","     * Computes the list of {@link MavenModule}s that are 'under' this POM filesystem-wise. The list doens't include","147","     * this module itself.","148","     *","149","     * <p>","150","     * Note that this doesn't necessary has anything to do with the module inheritance structure or parent\/child","151","     * relationship of the POM.","152","     *\/","153","    public List<MavenModule> getSubsidiaries() {","154","        List<MavenModule> r = new ArrayList<MavenModule>();","155","        for (MavenModule mm : getParent().getModules())","156","            if(mm!=this && mm.getRelativePath().startsWith(getRelativePath()))","157","                r.add(mm);","158","        return r;","159","    }","160","","161","    \/**"],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/FilteredChangeLogSet.java":[{"add":["31","import java.util.Collections;","39","    private final List<Entry> master;","48","            master = Collections.emptyList();","49","        } else {","50","            core = parentBuild.getChangeSet();","51","            master = parentBuild.getChangeSetFor(build.getParent());"],"delete":["38","    private final List<Entry> master = new ArrayList<Entry>();","44","        MavenModule mod = build.getParent();","45","","46","        \/\/ modules that are under 'mod'. lazily computed","47","        List<MavenModule> subsidiaries = null;","48","","52","            return;","53","        }","54","        ","55","        core = parentBuild.getChangeSet();","56","","57","        for (Entry e : core) {","58","            boolean belongs = false;","59","","60","            for (String path : e.getAffectedPaths()) {","61","                if(path.startsWith(mod.getRelativePath())) {","62","                    belongs = true;","63","                    break;","64","                }","65","            }","66","","67","            if(belongs) {","68","                \/\/ make sure at least one change belongs to this module proper,","69","                \/\/ and not its subsidiary module","70","                if(subsidiaries==null) {","71","                    subsidiaries = new ArrayList<MavenModule>();","72","                    for (MavenModule mm : mod.getParent().getModules()) {","73","                        if(mm!=mod && mm.getRelativePath().startsWith(mod.getRelativePath()))","74","                            subsidiaries.add(mm);","75","                    }","76","                }","77","","78","                belongs = false;","79","","80","                for (String path : e.getAffectedPaths()) {","81","                    if(!MavenUtil.belongsToSubsidiary(subsidiaries, path)) {","82","                        belongs = true;","83","                        break;","84","                    }","85","                }","86","","87","                if(belongs)","88","                    master.add(e);","89","            }"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenUtil.java":[{"add":[],"delete":["32","import hudson.scm.ChangeLogSet;","33","import hudson.scm.ChangeLogSet.Entry;","34","","45","import java.io.PrintStream;","253","    public static boolean isModuleInChangeset(MavenModule mod, MavenModuleSetBuild parentBuild) {","254","        \/\/ modules that are under 'mod'. lazily computed","255","        List<MavenModule> subsidiaries = null;","256","        ","257","        boolean moduleChanged = false;","258","        ChangeLogSet<? extends Entry> changes = parentBuild.getChangeSet();","259","        ","260","        for (Entry e : changes) {","261","            boolean belongs = false;","262","            ","263","            for (String path : e.getAffectedPaths()) {","264","                ","265","                if(path.startsWith(mod.getRelativePath())) {","266","                    belongs = true;","267","                    break;","268","                }","269","            }","270","","271","            if(belongs) {","272","                \/\/ make sure at least one change belongs to this module proper,","273","                \/\/ and not its subsidiary module","274","                if(subsidiaries==null) {","275","                    subsidiaries = new ArrayList<MavenModule>();","276","                    for (MavenModule mm : mod.getParent().getModules()) {","277","                        if(mm!=mod && mm.getRelativePath().startsWith(mod.getRelativePath()))","278","                            subsidiaries.add(mm);","279","                    }","280","                }","281","","282","                belongs = false;","283","","284","                for (String path : e.getAffectedPaths()) {","285","                    if(!belongsToSubsidiary(subsidiaries, path)) {","286","                        belongs = true;","287","                        break;","288","                    }","289","                }","290","                ","291","                if (belongs) {","292","                    moduleChanged = true;","293","                }","294","            }","295","        }","296","","297","        return moduleChanged;","298","    }","299","","300","    public static boolean belongsToSubsidiary(List<MavenModule> subsidiaries, String path) {","301","        for (MavenModule sub : subsidiaries)","302","            if(path.startsWith(sub.getRelativePath()))","303","                return true;","304","        return false;","305","    }","306","","307",""]}]}},"09ffe933d104de7cc94f11e3a3b196a53dfa385b":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","test\/src\/test\/java\/hudson\/maven\/MavenProjectTest.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi,","4"," * Red Hat, Inc., Victor Glushenkov, Alan Harder","240","    public synchronized void delete() throws IOException {","241","        super.delete();","242","        \/\/ Delete all contained module builds too","243","        for (List<MavenBuild> list : getModuleBuilds().values())","244","            for (MavenBuild build : list)","245","                build.delete();","246","    }","247","","248","    @Override","260","     * (when indivudual modules are built, a new ModuleSetBuild is not created,","261","     *  but rather the new module build falls under the previous ModuleSetBuild)"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Red Hat, Inc., Victor Glushenkov"]}],"test\/src\/test\/java\/hudson\/maven\/MavenProjectTest.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc.","121","    @Bug(6779)","122","    public void testDeleteSetBuildDeletesModuleBuilds() throws Exception {","123","        MavenModuleSet project = createProject(\"maven-multimod.zip\");","124","        project.setGoals(\"package\");","125","        buildAndAssertSuccess(project);","126","        buildAndAssertSuccess(project.getModule(\"org.jvnet.hudson.main.test.multimod:moduleB\"));","127","        buildAndAssertSuccess(project);","128","        assertEquals(2, project.getBuilds().size()); \/\/ Module build does not add a ModuleSetBuild","129","        project.getFirstBuild().delete();","130","        \/\/ A#1, B#1 and B#2 should all be deleted too","131","        assertEquals(1, project.getModule(\"org.jvnet.hudson.main.test.multimod:moduleA\").getBuilds().size());","132","        assertEquals(1, project.getModule(\"org.jvnet.hudson.main.test.multimod:moduleB\").getBuilds().size());","133","    }"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc.","25","import com.gargoylesoftware.htmlunit.html.HtmlPage;","27","import hudson.model.Descriptor;","28","import hudson.tasks.ArtifactArchiver;","33","import org.xml.sax.SAXException;"]}]}},"b2cdcf02186f83683169eae16423f8c9e6c579f7":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/queue.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/queue.jelly":[{"add":["48","    <st:adjunct includes=\"lib.form.link.link\"\/>"],"delete":[]}]}},"75f5d2180f7340ce2efd4f41c8670afb049eb530":{"changes":{"test\/src\/test\/java\/hudson\/model\/ParametersTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/ParametersTest.java":[{"add":["2","import static org.hamcrest.CoreMatchers.containsString;","3","import static org.hamcrest.MatcherAssert.assertThat;","4","","5","import org.junit.Test;","6","import org.jvnet.hudson.test.Bug;","9","","16","","166","","167","    @Bug(11543)","168","    public void testUnicodeParametersArePresetedCorrectly() throws Exception {","169","        final FreeStyleProject p = createFreeStyleProject();","170","        ParametersDefinitionProperty pdb = new ParametersDefinitionProperty(","171","                new StringParameterDefinition(\"sname:a\u2031?\", \"svalue:a\u2031?\", \"sdesc:a\u2031?\"),","172","                new FileParameterDefinition(\"fname:a\u2031?\", \"fdesc:a\u2031?\")","173","        );","174","        p.addProperty(pdb);","175","","176","        WebClient wc = createWebClient();","177","        wc.setThrowExceptionOnFailingStatusCode(false); \/\/ Ignore 405","178","        HtmlPage page = wc.getPage(p, \"build\");","179","","180","        \/\/ java.lang.IllegalArgumentException: No such parameter definition: <gibberish>.","181","        wc.setThrowExceptionOnFailingStatusCode(true);","182","        final HtmlForm form = page.getFormByName(\"parameters\");","183","        form.submit(form.getButtonByCaption(\"Build\"));","184","    }"],"delete":[]}]}},"1a5a10f99b3bc2f5d1864c7dc88948f213285755":{"changes":{"core\/src\/main\/java\/hudson\/Functions.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["458","        if (permission == null)","459","            return;","460","        "],"delete":[]}]}},"52015e2c98bd07875f3c5968158152d92ee9d830":{"changes":{"war\/resources\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/LogRotator\/config.jelly":"MODIFY"},"diff":{"war\/resources\/scripts\/hudson-behavior.js":[{"add":["223","function registerRegexpValidator(e,regexp,message) {","224","    e.targetElement = findFollowingTR(e, \"validation-error-area\").firstChild.nextSibling;","225","    e.onchange = function() {","226","        if (this.value.match(regexp)) {","227","            this.targetElement.innerHTML = \"\";","228","        } else {","229","            this.targetElement.innerHTML = \"<div class=error>\" + message + \"<\/div>\";","230","        }","231","    }","232","    e = null; \/\/ avoid memory leak","233","}","234","","437","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^(\\d+|)$\/,\"Not a number\"); },","438","    \"INPUT.positive-number\" : function(e) {","439","        registerRegexpValidator(e,\/^(\\d*[1-9]\\d*|)$\/,\"Not a positive number\");"],"delete":["425","    \"INPUT.number\" : function(e) {","426","        e.targetElement = findFollowingTR(e, \"validation-error-area\").firstChild.nextSibling;","427","        e.onchange = function() {","428","            if (this.value.match(\/^(\\d+|)$\/)) {","429","                this.targetElement.innerHTML = \"\";","430","            } else {","431","                this.targetElement.innerHTML = \"<div class=error>Not a number<\/div>\";","432","            }","433","        }","434","        e = null; \/\/ avoid memory leak"]}],"core\/src\/main\/resources\/hudson\/tasks\/LogRotator\/config.jelly":[{"add":["27","    <input class=\"setting-input positive-number\" name=\"logrotate_days\"","32","    <input class=\"setting-input positive-number\" name=\"logrotate_nums\"","35","<\/j:jelly>"],"delete":["27","    <input class=\"setting-input number\" name=\"logrotate_days\"","32","    <input class=\"setting-input number\" name=\"logrotate_nums\"","35","<\/j:jelly>"]}]}},"ef08900292726bb35be269ce6d41d8dc141c6dea":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["301","            Item current;","302","            try {","303","                current = parent.getItem(name);","304","            } catch (RuntimeException x) {","305","                LOGGER.log(Level.WARNING, \"failed to look up \" + name + \" in \" + parent, x);","306","                current = null;","307","            }"],"delete":["301","            Item current = parent.getItem(name);"]}]}},"63cc1108f299d39f9b18e50acd74b48f439bdb3e":{"changes":{"war\/src\/main\/js\/widgets\/add\/addform.less":"MODIFY"},"diff":{"war\/src\/main\/js\/widgets\/add\/addform.less":[{"add":["60","      button[type=submit]:active:not(.disabled){        ","61","        box-shadow: inset 0px 1px 6px 2px #1b2b33;","62","      }","63",""],"delete":[]}]}},"ddfa65fae64663cda51a7b9dd7b45eeebbd10eda":{"changes":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/test\/java\/jenkins\/model\/JenkinsGetRootUrlTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["1918","        String scheme = req.getScheme();","1919","        String forwardedScheme = req.getHeader(\"X-Forwarded-Proto\");","1920","        if (forwardedScheme != null) {","1921","            scheme = forwardedScheme;","1922","        }","1923","        buf.append(scheme+\":\/\/\");"],"delete":["1918","        buf.append(req.getScheme()+\":\/\/\");"]}],"core\/src\/test\/java\/jenkins\/model\/JenkinsGetRootUrlTest.java":[{"add":["104","    ","105","    @Bug(10675)","106","    @Test","107","    public void useForwardedProtoWhenPresent() {","108","        configured(\"https:\/\/ci\/jenkins\/\");","109","        ","110","        \/\/ Without a forwarded protocol, it should use the request protocol","111","        accessing(\"http:\/\/ci\/jenkins\/\");","112","        rootUrlFromRequestIs(\"http:\/\/ci\/jenkins\/\");","113","        ","114","        \/\/ With a forwarded protocol, it should use the forwarded protocol","115","        accessing(\"http:\/\/ci\/jenkins\/\");","116","        withHeader(\"X-Forwarded-Proto\", \"https\");","117","        rootUrlFromRequestIs(\"https:\/\/ci\/jenkins\/\");","118","        ","119","        accessing(\"https:\/\/ci\/jenkins\/\");","120","        withHeader(\"X-Forwarded-Proto\", \"http\");","121","        rootUrlFromRequestIs(\"http:\/\/ci\/jenkins\/\");","122","    }","123","    ","124","    private void rootUrlFromRequestIs(final String expectedRootUrl) {","125","        ","126","        assertThat(jenkins.getRootUrlFromRequest(), equalTo(expectedRootUrl));","127","    }","138","    ","139","    private void withHeader(String name, String value) {","140","        final StaplerRequest req = Stapler.getCurrentRequest();","141","        when(req.getHeader(name)).thenReturn(value);","142","    }"],"delete":[]}]}},"4755ecd639d6a2ddfa4ff3afc09631ce3c6e9ee9":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["410","    <dependency><!-- groovy shell uses this but uses an optional dependency -->","413","      <version>1.0<\/version>"],"delete":["410","    <dependency><!-- groovy shell uses this but it doesn't declare this dependency -->","413","      <version>0.9.94<\/version>"]}]}},"df0170ec87fa621f236c2a490c39d8006b7aa2d4":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/MailSender.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/MailSender.java":[{"add":["92","                    StringBuilder buf = new StringBuilder(\"Sending e-mails to:\");","158","        StringBuilder buf = new StringBuilder();","171","        boolean still = false;","175","            else if(prev.getResult()==Result.UNSTABLE) {","177","                still = true;","178","            }","182","        StringBuilder buf = new StringBuilder();","183","        \/\/ Link to project changes summary for \"still unstable\" if this or last build has changes","184","        if (still && !(build.getChangeSet().isEmptySet() && prev.getChangeSet().isEmptySet()))","185","            appendUrl(Util.encode(build.getProject().getUrl()) + \"changes\", buf);","186","        else","187","            appendBuildUrl(build, buf);","193","    private void appendBuildUrl(AbstractBuild<?, ?> build, StringBuilder buf) {","194","        appendUrl(Util.encode(build.getUrl())","195","                  + (build.getChangeSet().isEmptySet() ? \"\" : \"changes\"), buf);","196","    }","197","","198","    private void appendUrl(String url, StringBuilder buf) {","200","        if (baseUrl != null)","201","            buf.append(\"See <\").append(baseUrl).append(url).append(\">\\n\\n\");","209","        StringBuilder buf = new StringBuilder();"],"delete":["92","                    StringBuffer buf = new StringBuffer(\"Sending e-mails to:\");","158","        StringBuffer buf = new StringBuffer();","174","            if(prev.getResult()==Result.UNSTABLE)","179","        StringBuffer buf = new StringBuffer();","180","        appendBuildUrl(build, buf);","186","    private void appendBuildUrl(AbstractBuild<?, ?> build, StringBuffer buf) {","188","        if (baseUrl != null) {","189","            buf.append(\"See <\").append(baseUrl).append(Util.encode(build.getUrl()));","190","            if(!build.getChangeSet().isEmptySet())","191","                buf.append(\"changes\");","192","            buf.append(\">\\n\\n\");","193","        }","201","        StringBuffer buf = new StringBuffer();"]}]}},"adbccfee4f7229843f8b53fd5cee40a072f271e3":{"changes":{"war\/resources\/help\/security\/ldap\/groupSearchBase.html":"ADD","core\/src\/main\/resources\/hudson\/security\/LDAPSecurityRealm\/config.jelly":"MODIFY","core\/src\/main\/java\/hudson\/security\/DeferredCreationLdapAuthoritiesPopulator.java":"ADD","war\/resources\/WEB-INF\/security\/LDAPBindSecurityRealm.groovy":"MODIFY","core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":"MODIFY"},"diff":{"war\/resources\/help\/security\/ldap\/groupSearchBase.html":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/security\/LDAPSecurityRealm\/config.jelly":[{"add":["15","    <f:entry title=\"${%Group search base}\" help=\"\/help\/security\/ldap\/groupSearchBase.html\">","16","      <f:textbox name=\"ldap.groupSearchBase\" value=\"${instance.groupSearchBase}\" \/>","17","    <\/f:entry>"],"delete":[]}],"core\/src\/main\/java\/hudson\/security\/DeferredCreationLdapAuthoritiesPopulator.java":[{"add":[],"delete":[]}],"war\/resources\/WEB-INF\/security\/LDAPBindSecurityRealm.groovy":[{"add":["8","import hudson.security.DeferredCreationLdapAuthoritiesPopulator","37","authoritiesPopulator(DeferredCreationLdapAuthoritiesPopulator,initialDirContextFactory,\"ou=groups\") {"],"delete":["4","import org.acegisecurity.providers.ldap.populator.DefaultLdapAuthoritiesPopulator","37","authoritiesPopulator(DefaultLdapAuthoritiesPopulator,initialDirContextFactory,\"ou=groups\") {"]}],"core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":[{"add":["44","","81","    ","82","    \/**","83","     * This defines the organizational unit that contains groups.","84","     *","85","     * Normally \"ou=groups\"","86","     *","87","     * @see FilterBasedLdapUserSearch","88","     *\/","89","    public final String groupSearchBase;","118","    public LDAPSecurityRealm(String server, String rootDN, String userSearchBase, String userSearch, String groupSearchBase, String managerDN, String managerPassword) {","125","        this.groupSearchBase = Util.fixEmptyAndTrim(groupSearchBase);","178","        correctAuthoritiesPopulator(appContext);","196","     * Adjust the authoritiesPopulator bean to have the correct groupSearchBase","197","     * @param appContext ","198","     *\/","199","    private void correctAuthoritiesPopulator(WebApplicationContext appContext) {","200","        DeferredCreationLdapAuthoritiesPopulator factory = (DeferredCreationLdapAuthoritiesPopulator) appContext.getBean(\"authoritiesPopulator\");","201","        factory.setGroupSearchBase(groupSearchBase==null ? \"ou=groups\" : groupSearchBase);","202","    }","203","    ","204","    \/**"],"delete":["108","    public LDAPSecurityRealm(String server, String rootDN, String userSearchBase, String userSearch, String managerDN, String managerPassword) {"]}]}},"55448c4008d73eeb09d21f1c0066563eb9205aed":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["514","      <version>1.7<\/version>"],"delete":["514","      <version>1.6<\/version>"]}]}},"8deb42bf89b0ced99a1ef5a9721986b35deda244":{"changes":{"core\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["585","    <!-- TODO overridden until Stapler 1.220 -->","586","    <dependency>","587","      <groupId>com.jcraft<\/groupId>","588","      <artifactId>jzlib<\/artifactId>","589","      <version>1.1.3<\/version>","590","    <\/dependency>"],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["637","                return new GZIPOutputStream(new BufferedOutputStream(out));"],"delete":["637","                return new GZIPOutputStream(new BufferedOutputStream(out),","638","                        \/\/ TODO JENKINS-19473 workaround; replace when jzlib fixed","639","                        new com.jcraft.jzlib.Deflater(6, 15+16, 9),   \/\/ use 9 for memLevel","640","                        512,","641","                        true","642","                );"]}]}},"74db6eba11aba3ce29a0b4b470dcb8b35d68ea31":{"changes":{"core\/src\/main\/resources\/hudson\/matrix\/Messages_pt_BR.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/matrix\/Messages_pt_BR.properties":[{"add":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Reginaldo L. Russinholi, Cleiber Silva, ","3","# Bruno Meneguello","23","MatrixBuild.depends_on_this={0} depende deste.","25","MatrixProject.Pronoun=Projeto de M\\u00fltiplas Configura\\u00e7\\u00f5es","31","MatrixBuild.Completed={0} completado com o resultado {1}","33","MatrixConfiguration.Pronoun=Configura\\u00e7\\u00e3o","34","MatrixRun.KeptBecauseOfParent=Mantido porque {0} est\\u00e1 mantido","35","","37","","38","JDKAxis.DisplayName=JDK","39","LabelAxis.DisplayName=Slaves","40","LabelExpAxis.DisplayName=Express\\u00e7o de R\\u00f3tulo","41","TextArea.DisplayName=Eixo Definido pelo Usu\\u00E1rio"],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Reginaldo L. Russinholi, Cleiber Silva","29","MatrixConfiguration.Pronoun=Configura\\u00e7\\u00e3o# mantida porque {0} est\\u00e1 mantida","30","MatrixRun.KeptBecauseOfParent=","31","# Duplicate axis name"]}]}},"4df0c56ea4013bb37ad2c7a18b57f8b7fa977347":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":[{"add":["790","             * An arbitrary upper-limit on how many characters readLine() will","791","             * try reading before giving up. This avoids having readLine() loop","792","             * over the entire process address space if this class has bugs.","793","             *\/","794","            private final int LINE_LENGTH_LIMIT =","795","                SystemProperties.getInteger(Solaris.class.getName()+\".lineLimit\", 10000);","796","","797","            \/*","910","                            long addr = b64 ? m.getLong(0) : to64(m.getInt(0));","945","                            long addr = b64 ? m.getLong(0) : to64(m.getInt(0));","969","                int i = 0;","971","                    if (i++ > LINE_LENGTH_LIMIT) {","972","                        LOGGER.finest(\"could not find end of line, giving up\");","973","                        throw new IOException(\"could not find end of line, giving up\");","974","                    }","975",""],"delete":["902","                            long addr = b64 ? m.getLong(0) : m.getInt(0);","937","                            long addr = b64 ? m.getLong(0) : m.getInt(0);"]}]}},"00c858d403ab1f7747de0b9ce80e1eef921c41b3":{"changes":{"changelog.html":"MODIFY","pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=bug>","58","    Errors in some Maven builds since 1.598.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-26601\">issue 26601<\/a>)"],"delete":["57","  <li class=>"]}],"pom.xml":[{"add":["189","        <version>4.0-beta<\/version>"],"delete":["189","        <version>4.0-beta5<\/version>"]}]}},"237dda40e08f4db759e965738b1b9b3755525161":{"changes":{"core\/src\/main\/java\/hudson\/cli\/ClientAuthenticationCache.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/ClientAuthenticationCache.java":[{"add":["45","                File hudsonHome = new File(home, \".hudson\");","46","                if (hudsonHome.exists()) {","47","                    return new FilePath(new File(hudsonHome, \"cli-credentials\"));","48","                }","49","                return new FilePath(new File(home, \".jenkins\/cli-credentials\"));"],"delete":["45","                return new FilePath(new File(home, \".hudson\/cli-credentials\"));"]}]}},"40a384aee5e247ad518845ce84989ddb0473398a":{"changes":{"test\/src\/test\/java\/hudson\/model\/JobQueueTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/JobQueueTest.java":[{"add":["81","            assertTrue(project.isInQueue()); \/\/That means it's pending or it's waiting or blocked"],"delete":["81","            assertTrue(project.isInQueue()); \/\/That means its pending or its waiting or blocked"]}]}},"9cb284b7521685259d944471675e6d9b2a57b365":{"changes":{"war\/resources\/help\/ant\/ant-targets.html":"MODIFY","war\/resources\/help\/ant\/ant-buildfile.html":"MODIFY"},"diff":{"war\/resources\/help\/ant\/ant-targets.html":[{"add":["2","  specified in the build script. Additionally, you can also use this field to specify other Ant options.","3","<\/div>"],"delete":["2","  specified in the build script. Additionally, you can also this field to specify other Ant options. ","3","<\/div>"]}],"war\/resources\/help\/ant\/ant-buildfile.html":[{"add":["2","  specify it here.  By default Ant will use the <code>build.xml<\/code> in the root directory;"],"delete":["2","  specify it here.  By default Ant will use the <code>build.xml<\/code> in the root directory, "]}]}},"d21407be4fc9c90bc29c2d8ca440be995c591cef":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["1648","        "],"delete":[]}]}},"8975b0e0b5b5c553301c7bc85fd81d080a658b96":{"changes":{"test\/src\/test\/java\/hudson\/model\/ItemsTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/ItemsTest.java":[{"add":["26","import java.io.File;","28","","29","import hudson.Util;","33","import org.jvnet.hudson.test.Issue;","62","    @Issue(\"JENKINS-24825\")","63","    @Test public void moveItem() throws Exception {","64","        File tmp = Util.createTempDir();","65","        r.jenkins.setRawBuildsDir(tmp.getAbsolutePath()+\"\/${ITEM_FULL_NAME}\");","66","        MockFolder foo = r.createFolder(\"foo\");","67","        MockFolder bar = r.createFolder(\"bar\");","68","        FreeStyleProject test = foo.createProject(FreeStyleProject.class, \"test\");","69","        test.scheduleBuild2(0).get();","70","        Items.move(test, bar);","71","        assertFalse(new File(tmp, \"foo\/test\/1\").exists());","72","        assertTrue(new File(tmp, \"bar\/test\/1\").exists());","73","    }","74",""],"delete":[]}]}},"8767ddb192cf752c7d28f512884b9ecd3b9cdbd4":{"changes":{"core\/src\/main\/java\/hudson\/model\/FileParameterValue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/FileParameterValue.java":[{"add":["259","                FileInputStream inputStream = new FileInputStream(file);","260","                try {","261","                    return IOUtils.toByteArray(inputStream);","262","                } finally {","263","                    inputStream.close();","264","                }","300","        @Deprecated"],"delete":["259","                return IOUtils.toByteArray(new FileInputStream(file));"]}]}},"b23cb10980a3bcc9d14596b6a604543ff3745eec":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["1978","\/* see the Icon class for the definition of these CSS classes *\/","1979",".icon-sm {","1984",".icon-md {","1989",".icon-lg {","1994",".icon-xlg {"],"delete":["1978","img.icon-sm {","1983","img.icon-md {","1988","img.icon-lg {","1993","img.icon-xl {"]}]}},"0d98e72f403be0572be4cfeed745f2e0fca47504":{"changes":{"core\/src\/main\/resources\/hudson\/model\/View\/sidepanel_de.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/View\/sidepanel_de.properties":[{"add":["5","Delete\\ View=Ansicht l\\u00f6schen","7","Check\\ File\\ Fingerprint=Fingerabdruck \\u00fcberpr\\u00fcfen"],"delete":["5","Delete\\ View=Ansicht l?schen","7","Check\\ File\\ Fingerprint=Fingerabdruck ?berpr?fen"]}]}},"822458b9a5addb3f0c67e74239c0cb7c1fd0f29e":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModule.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModule.java":[{"add":["50","import org.kohsuke.stapler.export.Exported;","61","import java.util.logging.Level;","62","import java.util.logging.Logger;","190","    @Override","314","    @Override","342","    @Override","414","            try {","415","                Action a = step.getProjectAction(this);","416","                if(a!=null)","417","                    transientActions.add(a);","418","            } catch (Exception e) {","419","                LOGGER.log(Level.WARNING, \"Failed to getProjectAction from \" + step","420","                           + \". Report issue to plugin developers.\", e);","421","            }","436","    @Override","448","    @Override","458","        List<MavenReporter> reporterList = new ArrayList<MavenReporter>();","460","        getReporters().addAllTo(reporterList);","461","        getParent().getReporters().addAllTo(reporterList);","468","                reporterList.add(auto);","471","        return reporterList;","473","","474","    private static final Logger LOGGER = Logger.getLogger(MavenModule.class.getName());"],"delete":["26","import hudson.FilePath;","61","import org.kohsuke.stapler.export.Exported;","410","            Action a = step.getProjectAction(this);","411","            if(a!=null)","412","                transientActions.add(a);","447","        List<MavenReporter> reporters = new ArrayList<MavenReporter>();","449","        getReporters().addAllTo(reporters);","450","        getParent().getReporters().addAllTo(reporters);","457","                reporters.add(auto);","460","        return reporters;"]}]}},"85c8dc5a4b73a02cf994921fd8f84f8e2ae15434":{"changes":{"core\/pom.xml":"MODIFY","pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["855","            <groupId>com.mysema.maven<\/groupId>","857","            <!-- version specified in parent pom -->"],"delete":["855","            <groupId>org.codehaus.mojo<\/groupId>","857","            <!-- version specified in grandparent pom -->"]}],"pom.xml":[{"add":["162","","497","          <groupId>com.mysema.maven<\/groupId>","499","          <version>1.1.3<\/version>","667","          <!-- default reuseCreated is more performant","762","","763",""],"delete":["162","      ","497","          <groupId>org.codehaus.mojo<\/groupId>","499","          <version>1.0-alpha-5<\/version>","667","          <!-- default reuseCreated is more performant ","762","      ","763","      "]}]}},"99a948348bca6f3e8147e1ef8f1ad70f287641ed":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_es.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages.properties":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/JUnitResultArchiver.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_zh_TW.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_ja.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_da.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_es.properties":[{"add":[],"delete":["34","JUnitResultArchiver.BadXML=Formato incorrecto en los atributos XML del fichero de resultados en {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages.properties":[{"add":[],"delete":["36","JUnitResultArchiver.BadXML=Incorrect XML attributes for test results found in {0}"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/JUnitResultArchiver.java":[{"add":["142","            \/\/ TODO can the build argument be omitted now, or is it used prior to the call to addAction?","143","            action = new TestResultAction(build, result, listener);"],"delete":["142","\t\t\ttry {","143","                \/\/ TODO can the build argument be omitted now, or is it used prior to the call to addAction?","144","\t\t\t\taction = new TestResultAction(build, result, listener);","145","\t\t\t} catch (NullPointerException npe) {","146","\t\t\t\tthrow new AbortException(Messages.JUnitResultArchiver_BadXML(testResults));","147","\t\t\t}"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_pt_BR.properties":[{"add":[],"delete":["35","JUnitResultArchiver.BadXML=Atributos XML incorretos para teste de resultados em {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_zh_TW.properties":[{"add":[],"delete":["36","JUnitResultArchiver.BadXML=\\u5728 {0} \\u7684\\u6e2c\\u8a66\\u7d50\\u679c\\u4e2d\\u767c\\u73fe\\u932f\\u8aa4\\u7684 XML \\u5c6c\\u6027"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_de.properties":[{"add":[],"delete":["41","JUnitResultArchiver.BadXML=Testergebnisse enthalten ungltige XML-Attribute in {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_ja.properties":[{"add":[],"delete":["36","JUnitResultArchiver.BadXML={0} \\u306b\\u3001\\u30c6\\u30b9\\u30c8\\u7d50\\u679c\\u306eXML\\u306b\\u4e0d\\u9069\\u5207\\u306a\\u5c5e\\u6027\\u304c\\u3042\\u308a\\u307e\\u3059"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages_da.properties":[{"add":[],"delete":["34","JUnitResultArchiver.BadXML=Ukorrekt XML attribut fundet for test resultater i {0}"]}]}},"a0da4a8fd0e867a611a0686c8c3dd4a77302fc9e":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["61","import java.io.BufferedInputStream;","760","                return new BufferedInputStream(in);","763","                return new BufferedOutputStream(out);"],"delete":["61","","760","                return in;","763","                return out;"]}]}},"c595586ffe35a82b472bfd1ecf1936de52a312e2":{"changes":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/security\/AuthorizationMatrixProperty.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":[{"add":["286","            return doCheckName_(value, Hudson.getInstance(), Hudson.ADMINISTER);","289","        public FormValidation doCheckName_(String value, AccessControlled subject, Permission permission) throws IOException, ServletException {"],"delete":["286","            return doCheckName(value, Hudson.getInstance(), Hudson.ADMINISTER);","289","        public FormValidation doCheckName(String value, AccessControlled subject, Permission permission) throws IOException, ServletException {"]}],"changelog.html":[{"add":["58","    Fixed NPE in <tt>GlobalMatrixAuthorizationStrategy.doCheckName<\/tt>","59","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9412\">issue 9412<\/a>)","60","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/hudson\/security\/AuthorizationMatrixProperty.java":[{"add":["180","            return GlobalMatrixAuthorizationStrategy.DESCRIPTOR.doCheckName_(value, project, AbstractProject.CONFIGURE);"],"delete":["180","            return GlobalMatrixAuthorizationStrategy.DESCRIPTOR.doCheckName(value, project, AbstractProject.CONFIGURE);"]}]}},"6b95b9be2df6085c92e38353187ea466d5fafd5f":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10647\">issue 10647<\/a>)"],"delete":[]}]}},"6d15fb33bf6673012b767fc0c9afc5e899090412":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SubversionSCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SubversionSCM.java":[{"add":["820","        for( ModuleLocation loc : getLocations(lastBuild) ) {"],"delete":["820","        for( ModuleLocation loc : getLocations() ) {"]}]}},"b73bb3d0af419dd653b743b4c0b8458c965396e1":{"changes":{"core\/src\/main\/resources\/lib\/form\/link.jelly":"ADD","core\/src\/main\/resources\/lib\/form\/link\/link.js":"ADD","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/manage.jelly":"MODIFY","core\/src\/main\/java\/jenkins\/management\/ShutdownLink.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ManagementLink.java":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/queue.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/link.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/form\/link\/link.js":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/manage.jelly":[{"add":["45","              <f:link href=\"${_href}\" post=\"${post}\">${title}<\/f:link>","88","            <local:feature icon=\"${icon}\"      href=\"${m.urlName}\"   title=\"${m.displayName}\" requiresConfirmation=\"${m.requiresConfirmation}\" post=\"${m.requiresPOST}\">"],"delete":["45","              <a href=\"${_href}\">${title}<\/a>","88","            <local:feature icon=\"${icon}\"      href=\"${m.urlName}\"   title=\"${m.displayName}\" requiresConfirmation=\"${m.requiresConfirmation}\">"]}],"core\/src\/main\/java\/jenkins\/management\/ShutdownLink.java":[{"add":["54","","55","    @Override","56","    public boolean getRequiresPOST() {","57","        return true;","58","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ManagementLink.java":[{"add":["114","","115","    \/**","116","     * Define if the rendered link will use the default GET method or POST.","117","     * @return true if POST must be used","118","     * @see RequirePOST","119","     * @since TODO","120","     *\/","121","    public boolean getRequiresPOST() {","122","        return false;","123","    }"],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/queue.jelly":[{"add":["53","            <f:link href=\"${rootURL}\/cancelQuietDown\" post=\"true\">(${%cancel})<\/f:link>"],"delete":["53","            <a href=\"${rootURL}\/cancelQuietDown\">(${%cancel})<\/a>"]}]}},"bcbc0195b966913fe7b7eb924db7e1316fc997e4":{"changes":{"test\/src\/test\/java\/hudson\/jobs\/CreateItemTest.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AllView\/noJob.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/ViewDescriptor.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ViewDescriptorTest.java":"ADD","core\/src\/main\/java\/hudson\/model\/ItemGroupMixIn.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/jobs\/CreateItemTest.java":[{"add":["25","import static org.junit.Assert.*;","39","import hudson.model.FreeStyleProject;","40","import org.jvnet.hudson.test.MockFolder;","86","","87","    @Test","88","    public void createWithFolderPaths() throws Exception {","89","        rule.jenkins.setCrumbIssuer(null);","90","        rule.createFolder(\"d1\").createProject(FreeStyleProject.class, \"p\");","91","        MockFolder d2 = rule.createFolder(\"d2\");","92","        rule.createWebClient().getPage(new WebRequest(new URL(d2.getAbsoluteUrl() + \"createItem?mode=copy&name=p2&from=..\/d1\/p\"), HttpMethod.POST));","93","        assertNotNull(d2.getItem(\"p2\"));","94","        rule.createWebClient().getPage(new WebRequest(new URL(d2.getAbsoluteUrl() + \"createItem?mode=copy&name=p3&from=\/d1\/p\"), HttpMethod.POST));","95","        assertNotNull(d2.getItem(\"p3\"));","96","    }","97",""],"delete":["25","import static org.junit.Assert.assertEquals;"]}],"core\/src\/main\/resources\/hudson\/model\/AllView\/noJob.jelly":[{"add":["34","    <j:when test=\"${h.hasPermission(it.owner, permission)}\">"],"delete":["34","    <j:when test=\"${h.hasPermission(permission)}\">"]}],"core\/src\/main\/java\/hudson\/model\/ViewDescriptor.java":[{"add":["28","import java.util.Iterator;","29","import java.util.List;","30","import jenkins.model.DirectlyModifiableTopLevelItemGroup;","31","import jenkins.model.Jenkins;","35","import org.kohsuke.stapler.QueryParameter;","80","    public AutoCompletionCandidates doAutoCompleteCopyNewItemFrom(@QueryParameter final String value, @AncestorInPath ItemGroup<?> container) {","81","        AutoCompletionCandidates candidates = AutoCompletionCandidates.ofJobNames(TopLevelItem.class, value, container);","82","        if (container instanceof DirectlyModifiableTopLevelItemGroup) {","83","            DirectlyModifiableTopLevelItemGroup modifiableContainer = (DirectlyModifiableTopLevelItemGroup) container;","84","            Iterator<String> it = candidates.getValues().iterator();","85","            while (it.hasNext()) {","86","                TopLevelItem item = Jenkins.getInstance().getItem(it.next(), container, TopLevelItem.class);","87","                if (item == null) {","88","                    continue; \/\/ ?","89","                }","90","                if (!modifiableContainer.canAdd(item)) {","91","                    it.remove();","92","                }","93","            }","94","        }","95","        return candidates;"],"delete":["30","import org.kohsuke.stapler.QueryParameter;","32","","33","import java.util.List;","78","    public AutoCompletionCandidates doAutoCompleteCopyNewItemFrom(@QueryParameter final String value, @AncestorInPath ItemGroup container) {","79","        return AutoCompletionCandidates.ofJobNames(TopLevelItem.class, value, container);"]}],"test\/src\/test\/java\/hudson\/model\/ViewDescriptorTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ItemGroupMixIn.java":[{"add":["139","     * Creates a {@link TopLevelItem} for example from the submission of the {@code \/lib\/hudson\/newFromList\/form} tag","172","            Item src = Jenkins.getInstance().getItem(from, parent);"],"delete":["139","     * Creates a {@link TopLevelItem} from the submission of the '\/lib\/hudson\/newFromList\/formList'","172","            Item src = null;","173","            if (!from.startsWith(\"\/\"))","174","                src = parent.getItem(from);","175","            if (src==null)","176","                src = Jenkins.getInstance().getItemByFullName(from);","177",""]}]}},"a21402b5f8fd3af237d242b4a1b43329976b4158":{"changes":{"core\/src\/main\/resources\/hudson\/PluginManager\/table.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/_table.js":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/index.jelly":"MODIFY","test\/src\/test\/java\/hudson\/model\/UpdateSiteTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/PluginManager\/table.jelly":[{"add":["94","                             data-compat-warning=\"${!p.isCompatible(cache)}\" \/>"],"delete":["94","                             data-compat-warning=\"${!p.isCompatibleWithInstalledVersion()}\" \/>"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/_table.js":[{"add":["4","        if(candidate.type === \"checkbox\") {","5","            candidate.checked = candidate.dataset.compatWarning === 'false';"],"delete":["4","        if(candidate.type === \"checkbox\" && candidate.dataset.compatWarning === 'false') {","5","            candidate.checked = true;"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/index.jelly":[{"add":["31","      ${%Select}: <a href=\"javascript:toggleCheckboxes(true);\">${%All}<\/a>,","32","                  <a href=\"javascript:checkPluginsWithoutWarnings();\">${%Compatible}<\/a>,","33","                  <a href=\"javascript:toggleCheckboxes(false);\">${%None}<\/a><br\/>"],"delete":["31","      ${%Select}: <a href=\"javascript:checkPluginsWithoutWarnings();\">${%All}<\/a>, <a href=\"javascript:toggleCheckboxes(false);\">${%None}<\/a><br\/>"]}],"test\/src\/test\/java\/hudson\/model\/UpdateSiteTest.java":[{"add":["153","    @Issue(\"JENKINS-56477\")","154","    @Test","155","    public void isPluginUpdateCompatible() throws Exception {","156","        UpdateSite site = getUpdateSite(\"\/plugins\/minJavaVersion-update-center.json\");","157","        final UpdateSite.Plugin tasksPlugin = site.getPlugin(\"tasks\");","158","        assertNotNull(tasksPlugin);","159","        assertFalse(tasksPlugin.isNeededDependenciesForNewerJava());","160","        assertFalse(tasksPlugin.isForNewerJava());","161","        assertTrue(tasksPlugin.isCompatible());","162","    }","163","","166","        UpdateSite site = getUpdateSite(\"\/plugins\/minJavaVersion-update-center.json\");","191","","192","","193","    private UpdateSite getUpdateSite(String path) throws Exception {","194","        URL url = new URL(baseUrl, path);","195","        UpdateSite site = new UpdateSite(UpdateCenter.ID_DEFAULT, url.toString());","196","        assertEquals(FormValidation.ok(), site.updateDirectly(false).get());","197","        return site;","198","    }"],"delete":["47","import org.eclipse.jetty.server.HttpConnection;","58","import org.jvnet.hudson.test.recipes.LocalData;","157","        \/\/ TODO: factor out the sites init","158","        PersistedList<UpdateSite> sites = j.jenkins.getUpdateCenter().getSites();","159","        sites.clear();","160","        URL url = new URL(baseUrl, \"\/plugins\/minJavaVersion-update-center.json\");","161","        UpdateSite site = new UpdateSite(UpdateCenter.ID_DEFAULT, url.toString());","162","        sites.add(site);","163","        assertEquals(FormValidation.ok(), site.updateDirectly(false).get());","164","        \/\/ END TODO"]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["1046","         * Returns true if the plugin and its dependencies are fully compatible with the current installation","1047","         * This is set to restricted for now, since it is only being used by Jenkins UI at the moment.","1048","         *","1049","         * @since TODO","1050","         *\/","1051","        @Restricted(NoExternalUse.class)","1052","        public boolean isCompatible() {","1053","            return isCompatible(new PluginManager.MetadataCache());","1054","        }","1055","","1056","        @Restricted(NoExternalUse.class) \/\/ table.jelly","1057","        public boolean isCompatible(PluginManager.MetadataCache cache) {","1058","            return isCompatibleWithInstalledVersion() && !isForNewerHudson() &&  !isForNewerJava() &&","1059","                    isNeededDependenciesCompatibleWithInstalledVersion(cache) &&","1060","                    !isNeededDependenciesForNewerJenkins(cache) && !isNeededDependenciesForNewerJava();","1061","        }","1062","","1063","        \/**"],"delete":[]}]}},"6566a0c7f9418469281f68cf243ca15d0ec32e95":{"changes":{"changelog.html":"MODIFY","war\/src\/main\/webapp\/scripts\/sortable.js":"MODIFY"},"diff":{"changelog.html":[{"add":["58","    Fixed a JavaScript problem in sortable table with IE8.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-21729\">issue 21729<\/a>)","60","  <li class=bug>"],"delete":[]}],"war\/src\/main\/webapp\/scripts\/sortable.js":[{"add":["57","            cell.innerHTML = '<a href=\"#\" class=\"sortheader\">'+this.getInnerText(cell)+'<span class=\"sortarrow\"><\/span><\/a>';"],"delete":["57","            cell.innerHTML = '<a href=\"#\" class=\"sortheader\">'+this.getInnerText(cell)+'<span class=\"sortarrow\" \/><\/a>';"]}]}},"cae20e7613f3ae6443df52c3e3dfb6050622d7a5":{"changes":{"core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["1090","                    oneOffExecutors.remove(e);"],"delete":[]}]}},"e998c2a670fbb7f9e32af37218e7076de696455e":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["360","        if (node!=null) {","361","            final Computer computer = node.toComputer();","362","            env = (computer != null) ? computer.buildEnvironment(listener) : new EnvVars();                ","363","        } else {","365","        }"],"delete":["360","        if (node!=null)","361","            env = node.toComputer().buildEnvironment(listener);","362","        else"]}]}},"8d602f8464c7445412e515464b5c3c9e507735ae":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/NodeProperty.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Build.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/NodeProperty.java":[{"add":["28","import hudson.FilePath;\r","29","import hudson.scm.SCM;\r","39","import java.io.File;\r","75","     * Runs before the {@link SCM#checkout(AbstractBuild, Launcher, FilePath, BuildListener, File)} runs, and performs a set up.\r","76","     * Can contribute additional properties to the environment.\r","77","     * \r"],"delete":["72","     * Runs before the {@link Builder} runs, and performs a set up. Can contribute additional properties\r","73","     * to the environment.\r","74","     *\r"]}],"core\/src\/main\/java\/hudson\/model\/Build.java":[{"add":["125","            buildEnvironments = new ArrayList<Environment>();","126","","127","            for (NodeProperty nodeProperty: Hudson.getInstance().getGlobalNodeProperties()) {","128","                Environment environment = nodeProperty.setUp(Build.this, l, listener);","129","                if (environment != null) {","130","                    buildEnvironments.add(environment);","131","                }","132","            }","133","","134","            for (NodeProperty nodeProperty: Computer.currentComputer().getNode().getNodeProperties()) {","135","                Environment environment = nodeProperty.setUp(Build.this, l, listener);","136","                if (environment != null) {","137","                    buildEnvironments.add(environment);","138","                }","139","            }","140",""],"delete":["83","            buildEnvironments = new ArrayList<Environment>();","87","                for (NodeProperty<?> nodeProperty: Hudson.getInstance().getGlobalNodeProperties()) {","88","                    Environment environment = nodeProperty.setUp(Build.this, launcher, listener);","89","                    if (environment != null) {","90","                        buildEnvironments.add(environment);","91","                    }","92","                }","93","","94","                for (NodeProperty<?> nodeProperty: Computer.currentComputer().getNode().getNodeProperties()) {","95","                    Environment environment = nodeProperty.setUp(Build.this, launcher, listener);","96","                    if (environment != null) {","97","                        buildEnvironments.add(environment);","98","                    }","99","                }","100",""]}]}},"14d17c551a9c8229b59ee1cf702a7e30731764fb":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/queue\/Executables.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"changelog.html":[{"add":["44","  <li class=bug>","45","    Fixed an <tt>AbstractMethodError<\/tt> in listing up executors.","46","    (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8106\">issue 8106<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/queue\/Executables.java":[{"add":["67","","68","    \/**","69","     * Returns the estimated duration for the executable.","70","     * Protects against {@link AbstractMethodError}s if the {@link Executable} implementation","71","     * was compiled against Hudson < 1.383","72","     *\/","73","    public static long getEstimatedDurationFor(Executable e) {","74","        try {","75","            return _getEstimatedDuration(e);","76","        } catch (AbstractMethodError error) {","77","            return e.getParent().getEstimatedDuration();","78","        }","79","    }","80","","81","    \/**","82","     * A pointless function to work around what appears to be a HotSpot problem. See HUDSON-5756 and bug 6933067","83","     * on BugParade for more details.","84","     *\/","85","    private static long _getEstimatedDuration(Executable e) {","86","        return e.getEstimatedDuration();","87","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["1118","         * Please, consider using {@link Executables#getEstimatedDurationFor(Executable)}"],"delete":["1118","         * Please, consider using {@link Executor#getEstimatedDurationFor(Executable)}"]}],"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["28","import hudson.model.queue.Executables;","272","        long d = Executables.getEstimatedDurationFor(e);","293","        long d = Executables.getEstimatedDurationFor(e);","325","        long d = Executables.getEstimatedDurationFor(e);","342","        long d = Executables.getEstimatedDurationFor(e);","382","            return Math.max(startTime + Math.max(0, Executables.getEstimatedDurationFor(executable)),","424","     * was compiled against Hudson < 1.383","425","     *","426","     * @deprecated as of 1.388","427","     *      Use {@link Executables#getEstimatedDurationFor(Executable)}","430","        return Executables.getEstimatedDurationFor(e);"],"delete":["271","        long d = getEstimatedDurationFor(e);","292","        long d = getEstimatedDurationFor(e);","324","        long d = getEstimatedDurationFor(e);","341","        long d = getEstimatedDurationFor(e);","381","            return Math.max(startTime + Math.max(0, getEstimatedDurationFor(executable)),","423","     * was compiled against Hudson < 1.383 ","426","        try {","427","            return e.getEstimatedDuration();","428","        } catch (AbstractMethodError error) {","429","            return e.getParent().getEstimatedDuration();","430","        }"]}]}},"4a3978c34ea41fed3f583b0a82de0ca126d2b51b":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["170","        <version>3.10.1-20170926.021703-2<\/version>"],"delete":["170","        <version>3.10<\/version>"]}]}},"6d298b0a4950c4a1507a0b17bc5071fe25cf4e09":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["60","  <li class=bug>","61","    Fixed ClassCastException on org.dom4j.DocumentFactory","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13709\">issue 13709<\/a>)"],"delete":[]}]}},"65a29596ef4775e761a1838ced56e1ace448a89e":{"changes":{"core\/src\/main\/resources\/lib\/layout\/layout.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/layout\/layout.jelly":[{"add":["162","                  <input name=\"q\" placeholder=\"${%search}\" id=\"search-box\" class=\"has-default-text\" value=\"${request.getParameter('q')}\" \/>"],"delete":["162","                  <input name=\"q\" placeholder=\"${%search}\" id=\"search-box\" class=\"has-default-text\" \/>"]}]}},"d9ffc44a2fdeae76e6b53b8a140878615408b6c7":{"changes":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":[{"add":["226","            args.add(\"\/v\/qn REBOOT=ReallySuppress INSTALLDIR=\\\\\\\"\"+ expectedLocation +\"\\\\\\\" \/L \\\\\\\"\"+logFile+\"\\\\\\\"\");"],"delete":["226","            args.add(\"\/v\/qn REBOOT=Suppress INSTALLDIR=\\\\\\\"\"+ expectedLocation +\"\\\\\\\" \/L \\\\\\\"\"+logFile+\"\\\\\\\"\");"]}],"changelog.html":[{"add":["58","    Fixed the reported system reboot problem on installing JDK on Windows","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7288\">issue 7288<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"67cd5b4dd8b2ee217190ba106f559a0ab71bce8d":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/tasks_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/tasks.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/tasks_de.properties":[{"add":["1","#","3","#","10","#","13","#","28","Edit\\ Description=Beschreibung editieren","29","View\\ Description=Beschreibung anzeigen"],"delete":["1","# ","3","# ","10","# ","13","# ","28","View\\ Configuration=Konfiguration anzeigen"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/tasks.jelly":[{"add":["48","      <l:task icon=\"images\/24x24\/notepad.gif\" href=\"${buildUrl.baseUrl}\/configure\" title=\"${h.hasPermission(it,it.UPDATE)?'%Edit Description':'%View Description'}\"\/>"],"delete":["48","      <l:task icon=\"images\/24x24\/setting.gif\" href=\"${buildUrl.baseUrl}\/configure\" title=\"${h.hasPermission(it,it.UPDATE)?'%Configure':'%View Configuration'}\"\/>"]}]}},"bec0ee1eec5bd6fb5983b6fbc9b5acd9fceb7047":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/MailSenderTest.java":"ADD","core\/src\/main\/java\/hudson\/tasks\/MailSender.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/MailSenderTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/MailSender.java":[{"add":["360","    void includeCulpritsOf(AbstractProject upstreamProject, AbstractBuild<?, ?> currentBuild, BuildListener listener, Set<InternetAddress> recipientList) throws AddressException {","375","            if (b != null) {","376","                recipientList.addAll(buildCulpritList(listener,b.getCulprits()));","377","            }"],"delete":["360","    private void includeCulpritsOf(AbstractProject upstreamProject, AbstractBuild<?, ?> currentBuild, BuildListener listener, Set<InternetAddress> recipientList) throws AddressException {","374","            recipientList.addAll(buildCulpritList(listener,b.getCulprits()));"]}],"changelog.html":[{"add":["90","  <li class=bug>","91","    Upstream culprits did include culprits of an old build.","92","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8567\">issue 8567<\/a>)"],"delete":[]}]}},"73a8007d43a7317f168709539ed6c15466cf9044":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/Command.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/Pipe.java":"MODIFY","remoting\/src\/test\/java\/hudson\/remoting\/PipeTest.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/Channel.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/PipeWindow.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/ProxyOutputStream.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/Command.java":[{"add":["49","    protected Command(Throwable cause) {","50","        this.createdAt = new Source(cause);","51","    }","52","","80","        private Source(Throwable cause) {","81","            super(cause);","82","        }","83",""],"delete":[]}],"remoting\/src\/main\/java\/hudson\/remoting\/Pipe.java":[{"add":["95","        return in;"],"delete":["95","        return new FilterInputStream(in) {","96","            @Override","97","            public void close() throws IOException {","98","                try {","99","                    \/\/ Since closing the reading side does not stop the writing side. We read till the stream is done.","100","                    final byte[] buffer = new byte[4096];","101","                    while(read(buffer) != -1) {","102","                    }","103","                } finally {","104","                    super.close();","105","                }","106","            }","107","        };"]}],"remoting\/src\/test\/java\/hudson\/remoting\/PipeTest.java":[{"add":["39","import java.util.concurrent.ExecutionException;","62","     * Have the reader close the read end of the pipe while the writer is still writing.","63","     * The writer should pick up a failure.","67","    public void testReaderCloseWhileWriterIsStillWriting() throws Exception {","69","        final Future<Void> f = channel.callAsync(new InfiniteWriter(p));","73","","74","        try {","75","            f.get();","76","            fail();","77","        } catch (ExecutionException e) {","78","            \/\/ should have resulted in an IOException","79","            if (!(e.getCause() instanceof IOException)) {","80","                e.printStackTrace();","81","                fail();","82","            }","83","        }","84","    }","85","","86","    \/**","87","     * Just writes forever to the pipe","88","     *\/","89","    private static class InfiniteWriter implements Callable<Void, Exception> {","90","        private final Pipe pipe;","91","","92","        public InfiniteWriter(Pipe pipe) {","93","            this.pipe = pipe;","94","        }","95","","96","        public Void call() throws Exception {","97","            while (true) {","98","                pipe.getOut().write(0);","99","                Thread.sleep(10);","100","            }","101","        }"],"delete":["26","import hudson.remoting.FastPipedInputStream.ClosedBy;","32","import org.jvnet.hudson.test.Url;","41","import java.util.logging.Handler;","42","import java.util.logging.LogRecord;","43","import java.util.logging.Logger;","66","     * Helper class for testPartialReadQuietlyConsumesPipeOnClose.","67","     *\/","68","    private static class EventCounterHandler extends Handler {","69","        int count = 0;","70","        ","71","        @Override","72","        public void publish(final LogRecord record) {","73","            if (ProxyOutputStream.class.getName().equals(record.getLoggerName())) {","74","                Throwable thrown = record.getThrown();","75","                while (thrown != null) {","76","                    if (thrown instanceof ClosedBy) {","77","                        count += 1;","78","                        break;","79","                    }","80","                    thrown = thrown.getCause();","81","                }","82","            }","83","        }","84","        ","85","        @Override","86","        public void flush() {","87","        }","88","        ","89","        @Override","90","        public void close() throws SecurityException {","91","        }","92","","93","        public int getCount() {","94","            return count;","95","        }","96","    }","97","    ","98","    \/**","99","     * This test should be reproducing the initial bug as reported in JENKINS-8592. The assert in this test is not the","100","     * best and is fragile, but it is the best I can come up with.","104","    @Url(\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8592\")","105","    public void testPartialReadQuietlyConsumesPipeOnClose() throws Exception {","106","        final EventCounterHandler handler = new EventCounterHandler();","107","        final Logger logger = Logger.getLogger(ProxyOutputStream.class.getName());","108","        logger.addHandler(handler);","110","        final Future<Integer> f = channel.callAsync(new WritingCallable(p));","114","        f.get();","115","        logger.removeHandler(handler);","116","        assertEquals(0, handler.getCount());"]}],"remoting\/src\/main\/java\/hudson\/remoting\/Channel.java":[{"add":["610","            PipeWindow w;","611","            if (!remoteCapability.supportsPipeThrottling())","612","                w = new Real(k, PIPE_WINDOW_SIZE);","613","            else","614","                w = new PipeWindow.Fake();"],"delete":["601","        if (!remoteCapability.supportsPipeThrottling())","602","            return PipeWindow.FAKE;","603","","613","            Real w = new Real(k, PIPE_WINDOW_SIZE);"]}],"remoting\/src\/main\/java\/hudson\/remoting\/PipeWindow.java":[{"add":["25","import java.io.IOException;","50","    protected Throwable dead;","51","","58","     *","59","     * @throws IOException","60","     *      If we learned that there is an irrecoverable problem on the remote side that prevents us from writing.","61","     * @throws InterruptedException","62","     *      If a thread was interrupted while blocking.","64","    abstract int get() throws InterruptedException, IOException;","69","     * Indicates that the remote end has died and all the further send attempt should fail.","70","     *\/","71","    void dead(Throwable cause) {","72","        this.dead = cause;","73","    }","74","","75","    \/**","76","     * If we already know that the remote end had developed a problem, throw an exception.","77","     * Otherwise no-op.","78","     *\/","79","    protected void checkDeath() throws IOException {","80","        if (dead!=null)","81","            \/\/ the remote end failed to write.","82","            throw (IOException)new IOException(\"Pipe is already closed\").initCause(dead);","83","    }","84","","85","","86","    \/**","89","    static class Fake extends PipeWindow {","97","        int get() throws InterruptedException, IOException {","98","            checkDeath();","104","    }","163","        public int get() throws InterruptedException, IOException {","164","            checkDeath();","171","                    checkDeath();"],"delete":["56","    abstract int get() throws InterruptedException;","63","    static final PipeWindow FAKE = new PipeWindow() {","71","        int get() throws InterruptedException {","77","    };","136","        public int get() throws InterruptedException {"]}],"remoting\/src\/main\/java\/hudson\/remoting\/ProxyOutputStream.java":[{"add":["186","                        try {","187","                            channel.send(new NotifyDeadWriter(e,oid));","188","                        } catch (ChannelClosedException x) {","189","                            \/\/ the other direction can be already closed if the connection","190","                            \/\/ shut down is initiated from this side. In that case, remain silent.","191","                        } catch (IOException x) {","192","                            \/\/ ignore errors","193","                            LOGGER.log(Level.WARNING, \"Failed to notify the sender that the write end is dead\",x);","194","                            LOGGER.log(Level.WARNING, \"... the failed write was:\",e);","195","                        }","200","                            } catch (ChannelClosedException x) {","201","                                \/\/ the other direction can be already closed if the connection","202","                                \/\/ shut down is initiated from this side. In that case, remain silent.","342","    \/**","343","     * {@link Command} to notify the sender that the receiver is dead.","344","     *\/","345","    private static final class NotifyDeadWriter extends Command {","346","        private final int oid;","347","","348","        private NotifyDeadWriter(Throwable cause, int oid) {","349","            super(cause);","350","            this.oid = oid;","351","        }","352","","353","        @Override","354","        protected void execute(Channel channel) {","355","            PipeWindow w = channel.getPipeWindow(oid);","356","            w.dead(createdAt.getCause());","357","        }","358","","359","        public String toString() {","360","            return \"Pipe.Dead(\"+oid+\")\";","361","        }","362","","363","        private static final long serialVersionUID = 1L;","364","    }","365",""],"delete":["186","                        \/\/ ignore errors","187","                        LOGGER.log(Level.WARNING, \"Failed to write to stream\",e);"]}]}},"91a62d6574075516ecabf24f920a933683957ccb":{"changes":{"core\/src\/main\/java\/jenkins\/security\/ConfidentialStore.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/ConfidentialStore.java":[{"add":["65","        Jenkins j = Jenkins.getInstance();","66","        if (j == null) {","67","            throw new IllegalStateException(\"cannot initialize confidential key store until Jenkins has started\");","68","        }","69","        Lookup lookup = j.lookup;"],"delete":["65","        Lookup lookup = Jenkins.getInstance().lookup;"]}]}},"f4d5c764212df6e287e4db69c6c5b9e65207d4ad":{"changes":{"test\/src\/test\/java\/hudson\/cli\/ReloadConfigurationCommandTest.java":"MODIFY","test\/src\/test\/java\/jenkins\/model\/JenkinsReloadConfigurationTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/MyViewsPropertyTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/UserRestartTest.java":"ADD","core\/src\/main\/java\/hudson\/model\/User.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/UserTest.java":"MODIFY","core\/src\/main\/java\/hudson\/init\/InitMilestone.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/ReloadConfigurationCommandTest.java":[{"add":["109","        {","117","        }","119","        {","120","        User user = User.getById(\"some_user\", false);","122","        }"],"delete":["116","","118",""]}],"test\/src\/test\/java\/jenkins\/model\/JenkinsReloadConfigurationTest.java":[{"add":["58","        {","66","        }","68","        {","69","        assertEquals(\"newName\", User.getById(\"some_user\", false).getFullName());","70","        }"],"delete":["57","    public void reloadUserConfig() throws Exception {","58","        User user = User.get(\"some_user\", true, null);","59","        user.setFullName(\"oldName\");","60","        user.save();","61","","62","        replace(\"users\/some_user\/config.xml\", \"oldName\", \"newName\");","63","","64","        assertEquals(\"oldName\", user.getFullName());","65","","66","        User.reload();","67","","68","        assertEquals(\"newName\", user.getFullName());","69","    }","70","","71","    @Test","80","","82","","83","        assertEquals(\"newName\", user.getFullName());"]}],"test\/src\/test\/java\/hudson\/model\/MyViewsPropertyTest.java":[{"add":["55","","56","    \/* TODO unclear what exactly this is purporting to assert","78","    *\/","183","    public void testAddView() throws Exception {","184","        {","193","        }","194","        rule.jenkins.reload();","195","        {","196","        User user = User.get(\"User\");","197","        MyViewsProperty property = user.getProperty(MyViewsProperty.class);","198","        assertTrue(\"Property should save changes.\", property.getViews().contains(property.getView(\"foo\")));","199","        }","204","        {","215","        }","216","        rule.jenkins.reload();","217","        {","218","        MyViewsProperty property = User.get(\"User\").getProperty(MyViewsProperty.class);","220","        }"],"delete":["55","    ","181","    public void testAddView() throws IOException {","190","        User.reload();","191","        user = User.get(\"User\");","192","        property = user.getProperty(property.getClass());","193","        assertTrue(\"Property should save changes.\", property.getViews().contains(property.getView(view.name)));","208","        User.reload();","209","        property = User.get(\"User\").getProperty(property.getClass());"]}],"test\/src\/test\/java\/hudson\/model\/UserRestartTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/User.java":[{"add":["36","import hudson.init.InitMilestone;","37","import hudson.init.Initializer;","431","            u = AllUsers.byName().get(idkey);","469","                prev = AllUsers.byName().putIfAbsent(idkey, u = tmp);","547","            r = new ArrayList<User>(AllUsers.byName().values());","561","     * To be called from {@link Jenkins#reload} only.","563","    @Restricted(NoExternalUse.class)","567","            AllUsers.byName().clear();","571","        UserDetailsCache.get().invalidateAll();","572","        AllUsers.scanAll();","576","     * @deprecated Used to be called by test harnesses; now ignored in that case.","578","    @Deprecated","580","        if (ExtensionList.lookup(AllUsers.class).isEmpty()) {","581","            \/\/ Historically this was called by JenkinsRule prior to startup. Ignore!","582","            return;","583","        }","586","            AllUsers.byName().clear();","600","            ConcurrentMap<String, User> byName = AllUsers.byName();","747","            AllUsers.byName().remove(strategy.keyFor(id));","854","     * This lock is used to guard access to the {@link AllUsers#byName} map. Use","993","    \/** Per-{@link Jenkins} holder of all known {@link User}s. *\/","994","    @Extension","995","    @Restricted(NoExternalUse.class)","996","    public static final class AllUsers {","997","","998","        @Initializer(after = InitMilestone.JOB_LOADED) \/\/ so Jenkins.loadConfig has been called","999","        public static void scanAll() {","1000","            IdStrategy strategy = idStrategy();","1001","            File[] subdirs = getRootDir().listFiles((FileFilter) DirectoryFileFilter.INSTANCE);","1002","            if (subdirs != null) {","1003","                for (File subdir : subdirs) {","1004","                    if (new File(subdir, \"config.xml\").exists()) {","1005","                        String name = strategy.idFromFilename(subdir.getName());","1006","                        getOrCreate(name, \/* <init> calls load(), probably clobbering this anyway *\/name, true);","1007","                    }","1008","                }","1009","            }","1010","        }","1011","","1012","        @GuardedBy(\"User.byNameLock\")","1013","        private final ConcurrentMap<String,User> byName = new ConcurrentHashMap<String, User>();","1014","","1015","        \/**","1016","         * Keyed by {@link User#id}. This map is used to ensure","1017","         * singleton-per-id semantics of {@link User} objects.","1018","         *","1019","         * The key needs to be generated by {@link IdStrategy#keyFor(String)}.","1020","         *\/","1021","        @GuardedBy(\"User.byNameLock\")","1022","        static ConcurrentMap<String,User> byName() {","1023","            ExtensionList<AllUsers> instances = ExtensionList.lookup(AllUsers.class);","1024","            if (instances.size() != 1) {","1025","                throw new IllegalStateException();","1026","            }","1027","            return instances.get(0).byName;","1028","        }","1029","","1030","    }","1031",""],"delete":["429","            u = byName.get(idkey);","467","                prev = byName.putIfAbsent(idkey, u = tmp);","537","    private static volatile long lastScanned;","538","","544","        if(System.currentTimeMillis() -lastScanned>10000) {","545","            \/\/ occasionally scan the file system to check new users","546","            \/\/ whether we should do this only once at start up or not is debatable.","547","            \/\/ set this right away to avoid another thread from doing the same thing while we do this.","548","            \/\/ having two threads doing the work won't cause race condition, but it's waste of time.","549","            lastScanned = System.currentTimeMillis();","550","","551","            File[] subdirs = getRootDir().listFiles((FileFilter)DirectoryFileFilter.INSTANCE);","552","            if(subdirs==null)       return Collections.emptyList(); \/\/ shall never happen","553","","554","            for (File subdir : subdirs)","555","                if(new File(subdir,\"config.xml\").exists()) {","556","                    String name = strategy.idFromFilename(subdir.getName());","557","                    User.getOrCreate(name, name, true);","558","                }","559","","560","            lastScanned = System.currentTimeMillis();","561","        }","562","","566","            r = new ArrayList<User>(byName.values());","580","     * Reloads the configuration from disk.","585","            for (User u : byName.values()) {","586","                u.load();","587","            }","590","            UserDetailsCache.get().invalidateAll();","595","     * Stop gap hack. Don't use it. To be removed in the trunk.","600","            byName.clear();","760","            byName.remove(strategy.keyFor(id));","867","     * Keyed by {@link User#id}. This map is used to ensure","868","     * singleton-per-id semantics of {@link User} objects.","869","     *","870","     * The key needs to be generated by {@link IdStrategy#keyFor(String)}.","871","     *\/","872","    @GuardedBy(\"byNameLock\")","873","    private static final ConcurrentMap<String,User> byName = new ConcurrentHashMap<String, User>();","874","","875","    \/**","876","     * This lock is used to guard access to the {@link #byName} map. Use"]}],"test\/src\/test\/java\/hudson\/model\/UserTest.java":[{"add":["164","    public void testGetUser() throws Exception {","165","        {","170","        }","171","        j.jenkins.reload();","172","        {","175","        assertEquals(\"What was this asserting exactly?\", \"John Smith\", user3.getId());","178","        }","247","    public void testAddAndGetProperty() throws Exception {","248","        {","255","        }","256","        j.jenkins.reload();","257","        {","258","        assertNotNull(\"User should have SomeUserProperty property.\", User.getById(\"John Smith\", false).getProperty(SomeUserProperty.class));","259","        }","291","    public void testReload() throws Exception {","292","        {","299","        }","300","        j.jenkins.reload();","301","        {","302","        User user = User.get(\"John Smith\", false, Collections.emptyMap());","304","        }","334","    public void testSave() throws Exception {","335","        {","337","        }","338","        j.jenkins.reload();","339","        {","340","        User user = User.get(\"John Smith\", false, Collections.emptyMap());","345","        }","346","        j.jenkins.reload();","347","        {","348","        User user = User.get(\"John Smithl\", false, Collections.emptyMap());","351","        }","356","        String id;","357","        {","360","        id = u.getId();","361","        }","362","        j.jenkins.reload();","363","        {","364","        User u = User.get(id);","366","        }","370","    public void testDelete() throws Exception {","371","        {","379","        }","380","        j.jenkins.reload();","381","        {","384","             if(u.getId().equals(\"John Smith\")){","390","        }","428","    \/* TODO cannot follow what this is purporting to test","473","    *\/"],"delete":["26","import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;","62","import org.junit.Assert;","166","    public void testGetUser() {","171","        User.clear();","174","        assertEquals(\"Users should not have the same id.\", user.getId(), user3.getId());","245","    public void testAddAndGetProperty() throws IOException {","252","        User.reload();","253","        assertNotNull(\"User should have SomeUserProperty property.\", user.getProperty(SomeUserProperty.class));","285","    public void testReload() throws IOException{","292","        User.clear();","293","        assertEquals(\"User should have full name John Smith.\", \"John Smith\", user.getFullName());","294","        User.reload();","295","        user = User.get(user.getId(), false, Collections.emptyMap());","297","    }","298","","299","    @Test","300","    public void testClear() {","301","        User user = User.get(\"John Smith\", true, Collections.emptyMap());","302","        assertNotNull(\"User should not be null.\", user);","303","        user.clear();","304","        user = User.get(\"John Smith\", false, Collections.emptyMap());","305","        assertNull(\"User should be null\", user);       ","335","    public void testSave() throws IOException {","337","        User.clear();","338","        User.reload();","339","        user = User.get(\"John Smith\", false, Collections.emptyMap());","344","        User.clear();","345","        User.reload();","346","        user = User.get(\"John Smithl\", false, Collections.emptyMap());","355","        String id = u.getId();","356","        User.clear(); \/\/ simulate Jenkins restart","357","        u = User.get(id);","362","    public void testDelete() throws IOException {","370","         User.reload();","373","             if(u.getId().equals(user.getId())){","459","        User.reload();","460","        assertNotNull(\"Deleted user should be loaded.\",User.get(user.getId(),false, Collections.EMPTY_MAP));     "]}],"core\/src\/main\/java\/hudson\/init\/InitMilestone.java":[{"add":["84","    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"), \/\/ TODO nothing attains() this so when does it actually happen?"],"delete":["84","    EXTENSIONS_AUGMENTED(\"Augmented all extensions\"),"]}]}},"d08181bb8204c1cdfef61d739abce09855bca3cc":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["299","        return (owner!=null ? owner.getUrl() : \"\") + \"view\/\" + Util.rawEncode(getViewName()) + '\/';"],"delete":["299","        return (owner!=null ? owner.getUrl() : \"\") + \"view\/\" + getViewName() + '\/';"]}]}},"ae1fdc95a1d50df65a97447ff536d21cb2c5dba2":{"changes":{"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["256","                JSONObject data = new JSONObject();","257","                if (crumbIssuer != null) {","258","                    data.accumulate(\"crumbRequestField\", crumbIssuer.getCrumbRequestField()).accumulate(\"crumb\", crumbIssuer.getCrumb(req));","259","                }"],"delete":["256","                JSONObject data = new JSONObject().accumulate(\"crumbRequestField\", crumbIssuer.getCrumbRequestField()).accumulate(\"crumb\", crumbIssuer.getCrumb(req));"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["3675","    @CheckForNull"],"delete":[]}]}},"e7cc1410944d029a38cf36b57a2bb52b351e665e":{"changes":{"ui-samples-plugin\/src\/main\/resources\/jenkins\/plugins\/ui_samples\/ModularizeViewScript\/index.groovy":"MODIFY"},"diff":{"ui-samples-plugin\/src\/main\/resources\/jenkins\/plugins\/ui_samples\/ModularizeViewScript\/index.groovy":[{"add":["22","class SomeGenerator extends AbstractGroovyViewModule {"],"delete":["22","static class SomeGenerator extends AbstractGroovyViewModule {"]}]}},"ad3ccffc0043998b940bfafd63971ca4d89fcaa0":{"changes":{"core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":[{"add":["204","     * We also use this to wake the acceptor thread on termination.","205","     *","206","     * @since TODO"],"delete":["204","     * We also use this","205","     * @since"]}]}},"5e84c5470f4838abc7374c64100a17cb4545afec":{"changes":{"cli\/src\/main\/java\/hudson\/cli\/FullDuplexHttpStream.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/FullDuplexHttpService.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":"MODIFY","test\/src\/test\/java\/jenkins\/util\/FullDuplexHttpServiceTest.java":"ADD","core\/src\/main\/java\/hudson\/model\/Api.java":"MODIFY","cli\/src\/main\/java\/hudson\/cli\/CLI.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/csrf\/CrumbIssuer.java":"MODIFY"},"diff":{"cli\/src\/main\/java\/hudson\/cli\/FullDuplexHttpStream.java":[{"add":["16"," * {@code FullDuplexHttpService} is the counterpart on the server side.","29","    \/**","30","     * A way to get data from the server.","31","     * There will be an initial zero byte used as a handshake which you should expect and ignore.","32","     *\/","37","    \/**","38","     * A way to upload data to the server.","39","     * You will need to write to this and {@link OutputStream#flush} it to finish establishing a connection.","40","     *\/","90","        LOGGER.fine(\"establishing download side\");","101","        \/\/ make sure we hit the right URL; no need for CLI.verifyJenkinsConnection here","105","        LOGGER.fine(\"established download side\"); \/\/ calling getResponseCode or getHeaderFields breaks everything","107","        \/\/ client->server uses chunked encoded POST for unlimited capacity.","108","        LOGGER.fine(\"establishing upload side\");","120","        LOGGER.fine(\"established upload side\");"],"delete":["2","import java.io.BufferedReader;","5","import java.io.InputStreamReader;","18"," *","81","        CrumbData crumbData = new CrumbData();","82","","94","        if(crumbData.isValid) {","95","            con.addRequestProperty(crumbData.crumbName, crumbData.crumb);","96","        }","99","        \/\/ make sure we hit the right URL","104","        \/\/ client->server uses chunked encoded POST for unlimited capacity. ","115","","116","        if(crumbData.isValid) {","117","            con.addRequestProperty(crumbData.crumbName, crumbData.crumb);","118","        }","143","    private final class CrumbData {","144","    \tString crumbName;","145","    \tString crumb;","146","    \tboolean isValid;","147","","148","    \tprivate CrumbData() {","149","            this.crumbName = \"\";","150","            this.crumb = \"\";","151","            this.isValid = false;","152","            getData();","153","    \t}","154","","155","    \tprivate void getData() {","156","            try {","157","                String base = createCrumbUrlBase();","158","                String[] pair = readData(base + \"?xpath=concat(\/\/crumbRequestField,\\\":\\\",\/\/crumb)\").split(\":\", 2);","159","                crumbName = pair[0];","160","                crumb = pair[1];","161","                isValid = true;","162","                LOGGER.fine(\"Crumb data: \"+crumbName+\"=\"+crumb);","163","            } catch (IOException e) {","164","                \/\/ presumably this Hudson doesn't use crumb ","165","                LOGGER.log(Level.FINE,\"Failed to get crumb data\",e);","166","            }","167","    \t}","168","","169","    \tprivate String createCrumbUrlBase() {","170","            return base + \"crumbIssuer\/api\/xml\/\";","171","    \t}","172","","173","    \tprivate String readData(String dest) throws IOException {","174","            HttpURLConnection con = (HttpURLConnection) new URL(dest).openConnection();","175","            if (authorization != null) {","176","                con.addRequestProperty(\"Authorization\", authorization);","177","            }","178","            CLI.verifyJenkinsConnection(con);","179","","180","            try (BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()))) {","181","                String line = reader.readLine();","182","                String nextLine = reader.readLine();","183","                if (nextLine != null) {","184","                    System.err.println(\"Warning: received junk from \" + dest);","185","                    System.err.println(line);","186","                    System.err.println(nextLine);","187","                    while ((nextLine = reader.readLine()) != null) {","188","                        System.err.println(nextLine);","189","                    }","190","                }","191","                return line;","192","            }","193","            finally {","194","                con.disconnect();","195","            }","196","        }","197","    }"]}],"core\/src\/main\/java\/jenkins\/util\/FullDuplexHttpService.java":[{"add":["26","import hudson.model.RootAction;","27","import hudson.security.csrf.CrumbExclusion;","48"," * <p>","49"," * To use, bind this to an endpoint with {@link RootAction} (you will also need a {@link CrumbExclusion})."],"delete":[]}],"test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":[{"add":[],"delete":["2","import com.gargoylesoftware.htmlunit.HttpMethod;","3","import com.gargoylesoftware.htmlunit.Page;","4","import com.gargoylesoftware.htmlunit.WebRequest;","5","import com.gargoylesoftware.htmlunit.WebResponse;","28","import java.util.UUID;","123","        \/\/ so we check the access by emulating the CLI connection post request","124","        WebRequest settings = new WebRequest(new URL(j.getURL(), \"cli\"));","125","        settings.setHttpMethod(HttpMethod.POST);","126","        settings.setAdditionalHeader(\"Session\", UUID.randomUUID().toString());","127","        settings.setAdditionalHeader(\"Side\", \"download\"); \/\/ We try to download something to init the duplex channel","128","","129","        Page page = wc.getPage(settings);","130","        WebResponse webResponse = page.getWebResponse();","131","        assertEquals(\"We expect that the proper POST request from CLI gets processed successfully\",","132","            200, webResponse.getStatusCode());"]}],"test\/src\/test\/java\/jenkins\/util\/FullDuplexHttpServiceTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Api.java":[{"add":["55","import org.kohsuke.accmod.Restricted;","56","import org.kohsuke.accmod.restrictions.NoExternalUse;","232","    @Restricted(NoExternalUse.class)","233","    protected void setHeaders(StaplerResponse rsp) {"],"delete":["230","    private void setHeaders(StaplerResponse rsp) {"]}],"cli\/src\/main\/java\/hudson\/cli\/CLI.java":[{"add":["551","                for (Logger logger : new Logger[] {LOGGER, FullDuplexHttpStream.LOGGER, PlainCLIProtocol.LOGGER, Logger.getLogger(\"org.apache.sshd\")}) { \/\/ perhaps also Channel"],"delete":["551","                for (Logger logger : new Logger[] {LOGGER, PlainCLIProtocol.LOGGER, Logger.getLogger(\"org.apache.sshd\")}) { \/\/ perhaps also Channel"]}],"core\/src\/main\/java\/hudson\/security\/csrf\/CrumbIssuer.java":[{"add":["195","            setHeaders(rsp);"],"delete":[]}]}},"a4b63d2dc0ced54196f0ac69fe040246b7579090":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["723","                    if (updateSite == null) {","724","                        throw new Failure(\"No such update center: \" + siteName);","725","                    } else {"],"delete":["723","                    if (siteName != null) {"]}]}},"e6a8d5e6449161a954dfe9998763906923555650":{"changes":{"changelog.html":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["58","    Added more MIME type mapping for Winstone.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13496\">issue 13496<\/a>)","60","  <li class=bug>","61","    Winstone wasn't handling downloads bigger than 2GB.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12854\">issue 12854<\/a>)","63","  <li class=bug>"],"delete":[]}],"war\/pom.xml":[{"add":["101","      <version>0.9.10-jenkins-37<\/version>"],"delete":["101","      <version>0.9.10-jenkins-36<\/version>"]}]}},"d9188ce2ad2070eab5ea27cb7f96257b351392a7":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/LogRotator.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/LogRotator.java":[{"add":["120","            \/\/ (Using RunMap.headMap would not suffice, since we do not know if some recent builds have been deleted for other reasons,","121","            \/\/ so simply subtracting numToKeep from the currently last build number might cause us to delete too many.)","124","                if (shouldKeepRun(r, lsb, lstb)) {","135","            Run r = job.getFirstBuild();","136","            while (r != null) {","137","                if (tooNew(r, cal)) {","138","                    break;","140","                if (!shouldKeepRun(r, lsb, lstb)) {","141","                    LOGGER.log(FINE, \"{0} is to be removed\", r);","142","                    r.delete();","143","                }","144","                r = r.getNextBuild();","151","                if (shouldKeepRun(r, lsb, lstb)) {","162","            Run r = job.getFirstBuild();","163","            while (r != null) {","164","                if (tooNew(r, cal)) {","165","                    break;","167","                if (!shouldKeepRun(r, lsb, lstb)) {","168","                    LOGGER.log(FINE, \"{0} is to be purged of artifacts\", r);","169","                    r.deleteArtifacts();","170","                }","171","                r = r.getNextBuild();","176","    private boolean shouldKeepRun(Run r, Run lsb, Run lstb) {","189","        return false;","190","    }","191","","192","    private boolean tooNew(Run r, Calendar cal) {","193","        if (!r.getTimestamp().before(cal)) {","196","        } else {","197","            return false;"],"delete":["122","                if (shouldKeepRun(r, lsb, lstb, null)) {","133","            for( Run r : copy(job.getBuilds()) ) {","134","                if (shouldKeepRun(r, lsb, lstb, cal)) {","135","                    continue;","137","                LOGGER.log(FINE, \"{0} is to be removed\", r);","138","                r.delete();","145","                if (shouldKeepRun(r, lsb, lstb, null)) {","156","            for( Run r : copy(job.getBuilds())) {","157","                if (shouldKeepRun(r, lsb, lstb, cal)) {","158","                    continue;","160","                LOGGER.log(FINE, \"{0} is to be purged of artifacts\", r);","161","                r.deleteArtifacts();","166","    private boolean shouldKeepRun(Run r, Run lsb, Run lstb, Calendar cal) {","179","        if (cal != null && !r.getTimestamp().before(cal)) {","183","        return false;"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    More efficient deletion of old builds (specified by date).","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-22607\">issue 22607<\/a>)"],"delete":["57","  <li class=>"]}]}},"684921e8c5ec0a3c75db3f045199b8a5c5e33961":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["196","      <version>1.6<\/version>"],"delete":["196","      <version>1.5<\/version>"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Linkage error in <code>InitializerFinder.discoverTasks<\/code> blocks startup.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-20442\">issue 20442<\/a>)"],"delete":[]}]}},"4102c9f0f06f6f6c34011f77ad010bb86cc58a56":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Run\/_api.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Run\/_api.jelly":[{"add":["27","    <dt><a href=\"..\/buildNumber\">Build number<\/a><\/dt>","29","      This URL returns the build number in <tt>text\/plain<\/tt> format.","31","    <dt><a href=\"..\/buildTimestamp\">Build timestamp<\/a><\/dt>","41","<\/j:jelly>"],"delete":["27","    <dt><a href=\"..\/buildNumber\">build number<\/a><\/dt>","29","      This URL returns the build number in the <tt>text\/plain<\/tt> format.","31","    <dt><a href=\"..\/buildTimestamp\">build timestamp<\/a><\/dt>","41","<\/j:jelly>"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index.jelly":[{"add":["148","<\/j:jelly>"],"delete":["146","","147","","148","      <h2>${%Permalinks}<\/h2>","149","      <ul>","150","        <li><a href=\"buildNumber\">${%Build number}<\/a><\/li>","151","      <\/ul>","154","<\/j:jelly>"]}]}},"0993b7099b9faa06915cc6e342c7cf83b0e1946f":{"changes":{"test\/pom.xml":"MODIFY","test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":"MODIFY","test\/src\/test\/java\/jenkins\/I18nTest.java":"MODIFY","core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":"MODIFY","test\/src\/test\/java\/hudson\/PluginTest.java":"MODIFY","test\/src\/test\/java\/hudson\/PluginManagerInstalledGUITest.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","test\/src\/test\/resources\/hudson\/model\/UsageStatisticsTest\/jobs.json":"MODIFY","test\/src\/test\/java\/hudson\/model\/UsageStatisticsTest.java":"MODIFY","test\/src\/test\/java\/hudson\/PluginManagerTest.java":"MODIFY","test\/src\/test\/resources\/hudson\/model\/UsageStatisticsTest\/nodes.json":"MODIFY"},"diff":{"test\/pom.xml":[{"add":["58","      <version>2.20<\/version>"],"delete":["58","      <version>2.13<\/version>","100","    <dependency> <!-- TODO seems to be used only by PluginManagerTest -->","101","      <groupId>org.jenkins-ci.plugins<\/groupId>","102","      <artifactId>subversion<\/artifactId>","103","      <version>1.45<\/version>","104","      <scope>test<\/scope>","105","    <\/dependency>"]}],"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":[{"add":["555","        j.jenkins.pluginManager.installDetachedPlugin(\"javadoc\")","556","        j.jenkins.pluginManager.installDetachedPlugin(\"junit\")","557","        j.jenkins.pluginManager.installDetachedPlugin(\"mailer\")","558","        j.jenkins.pluginManager.installDetachedPlugin(\"maven-plugin\")","559",""],"delete":[]}],"test\/src\/test\/java\/jenkins\/I18nTest.java":[{"add":["35","import org.jvnet.hudson.test.TestPluginManager;","64","    public void test_baseName_plugin() throws Exception {","65","        ((TestPluginManager) jenkinsRule.jenkins.pluginManager).installDetachedPlugin(\"credentials\");","66","        ((TestPluginManager) jenkinsRule.jenkins.pluginManager).installDetachedPlugin(\"ssh-credentials\");","67","        ((TestPluginManager) jenkinsRule.jenkins.pluginManager).installDetachedPlugin(\"ssh-slaves\");","69","        Assert.assertEquals(response.toString(), \"ok\", response.getString(\"status\"));"],"delete":["63","    public void test_baseName_plugin() throws IOException, SAXException {","64","        \/\/ ssh-slaves plugin is installed by default","66","        Assert.assertEquals(\"ok\", response.getString(\"status\"));"]}],"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":[{"add":["196","            if (classes.exists()) { \/\/ should not normally happen, due to createClassJarFromWebInfClasses","197","                LOGGER.log(Level.WARNING, \"Deprecated unpacked classes directory found in {0}\", classes);","199","            }","673","        if (classesJar.isFile()) {","674","            LOGGER.log(Level.WARNING, \"Created {0}; update plugin to a version created with a newer harness\", classesJar);","675","        }"],"delete":["196","            if (classes.exists())"]}],"test\/src\/test\/java\/hudson\/PluginTest.java":[{"add":["31","import org.jvnet.hudson.test.TestPluginManager;","39","        ((TestPluginManager) r.jenkins.pluginManager).installDetachedPlugin(\"credentials\");"],"delete":[]}],"test\/src\/test\/java\/hudson\/PluginManagerInstalledGUITest.java":[{"add":["62","                            copyBundledPlugin(PluginManagerInstalledGUITest.class.getResource(\"\/WEB-INF\/detached-plugins\/cvs.hpi\"), \"cvs.jpi\"); \/\/ cannot use installDetachedPlugin at this point","63","                            copyBundledPlugin(PluginManagerInstalledGUITest.class.getResource(\"\/plugins\/tasks.jpi\"), \"tasks.jpi\");"],"delete":["62","                            installResourcePlugin(\"tasks.jpi\");"]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["954","        LOGGER.log(FINE, \"Copying {0}\", src);"],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/UsageStatisticsTest\/jobs.json":[{"add":["0","{\"hudson-matrix-MatrixProject\":0,\"hudson-maven-MavenModuleSet\":0,\"hudson-model-FreeStyleProject\":0,\"org-jvnet-hudson-test-MockFolder\":0,\"org-jvnet-hudson-test-SecuredMockFolder\":0}"],"delete":["0","{\"hudson-matrix-MatrixProject\":0,\"hudson-maven-MavenModuleSet\":0,\"hudson-model-ExternalJob\":0,\"hudson-model-FreeStyleProject\":0,\"org-jvnet-hudson-test-MockFolder\":0,\"org-jvnet-hudson-test-SecuredMockFolder\":0}"]}],"test\/src\/test\/java\/hudson\/model\/UsageStatisticsTest.java":[{"add":["32","import net.sf.json.JSONArray;","54","import static org.hamcrest.Matchers.*;","58","import org.jvnet.hudson.test.TestPluginManager;","73","        ((TestPluginManager) j.jenkins.pluginManager).installDetachedPlugin(\"credentials\");","117","        assertThat(reported, containsInAnyOrder(\"credentials\"));","121","        JSONArray nodes = o.getJSONArray(\"nodes\");","122","        for (Object node : nodes) {","123","            ((JSONObject) node).remove(\"os\"); \/\/ depends on timing of AbstractNodeMonitorDescriptor.get whether or not this will be present","124","        }","125","        compareWithFile(\"nodes.json\", nodes);"],"delete":["27","import hudson.ClassicPluginStrategy;","31","import hudson.util.VersionNumber;","55","import static org.hamcrest.Matchers.instanceOf;","56","import static org.hamcrest.Matchers.is;","105","        Set<String> detached = new TreeSet<>();","106","        for (ClassicPluginStrategy.DetachedPlugin p: ClassicPluginStrategy.getDetachedPlugins()) {","107","            if (p.getSplitWhen().isOlderThan(Jenkins.getVersion())) {","108","                detached.add(p.getShortName());","109","            }","110","        }","123","        reported.retainAll(detached); \/\/ ignore the dependencies of the detached plugins","124","        assertThat(reported, is(detached));","128","        compareWithFile(\"nodes.json\", o.get(\"nodes\"));","179","        String os = System.getProperty(\"os.name\");","180","        String arch = System.getProperty(\"os.arch\");","181","        fileContent = fileContent.replace(\"OSSPEC\", os + \" (\" + arch + ')');"]}],"test\/src\/test\/java\/hudson\/PluginManagerTest.java":[{"add":[],"delete":["33","import hudson.scm.SubversionSCM;","169","                    uberClassLoader.loadClass(SubversionSCM.class.getName());"]}],"test\/src\/test\/resources\/hudson\/model\/UsageStatisticsTest\/nodes.json":[{"add":["0","[{\"master\":true,\"jvm-vendor\":\"JVMVENDOR\",\"jvm-name\":\"JVMNAME\",\"jvm-version\":\"JVMVERSION\",\"executors\":2},{\"executors\":1}]"],"delete":["0","[{\"master\":true,\"jvm-vendor\":\"JVMVENDOR\",\"jvm-name\":\"JVMNAME\",\"jvm-version\":\"JVMVERSION\",\"executors\":2,\"os\":\"OSSPEC\"},{\"executors\":1,\"os\":\"OSSPEC\"}]"]}]}},"3f9e65d825770e47bbfd76c77c17a0c4dae6844e":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["1059","        }","1060","        if (blockBuildWhenUpstreamBuilding()) {"],"delete":["1059","        } else if (blockBuildWhenUpstreamBuilding()) {"]}],"changelog.html":[{"add":["62","  <li class=bug>","63","    When both \"block build when upstream\/downstream is building\" are checked, the upstream block check wasn't taking effect.","64","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8968\">issue 8968<\/a>)"],"delete":[]}]}},"76e732636f1745fa6c0b674142619c8cc8a01fc5":{"changes":{"\/dev\/null":"DELETE","core\/src\/main\/resources\/hudson\/views\/MyViewsTabBarDescriptor\/config.jelly":"ADD","core\/src\/main\/resources\/hudson\/views\/ViewsTabBarDescriptor\/config.jelly":"ADD"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/views\/MyViewsTabBarDescriptor\/config.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/views\/ViewsTabBarDescriptor\/config.jelly":[{"add":[],"delete":[]}]}},"3be4551e3b455e6905733af4ff6b06b25fca43a9":{"changes":{"test\/src\/test\/java\/hudson\/model\/AbstractProjectTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/AbstractProjectTest.java":[{"add":["35","import hudson.Util;","38","import java.io.IOException;","46","import org.apache.commons.io.FileUtils;","176","            @Override public boolean requiresWorkspaceForPolling() {","181","            @Override public void run() {","203","","204","    @Bug(1986)","205","    public void testBuildSymlinks() throws Exception {","206","        FreeStyleProject job = createFreeStyleProject();","207","        job.getBuildersList().add(new Shell(\"echo \\\"Build #$BUILD_NUMBER\\\"\\n\"));","208","        FreeStyleBuild build = job.scheduleBuild2(0, new Cause.UserCause()).get();","209","        File lastSuccessful = new File(job.getRootDir(), \"lastSuccessful\"),","210","             lastStable = new File(job.getRootDir(), \"lastStable\");","211","        \/\/ First build creates links","212","        assertSymlinkForBuild(lastSuccessful, 1);","213","        assertSymlinkForBuild(lastStable, 1);","214","        FreeStyleBuild build2 = job.scheduleBuild2(0, new Cause.UserCause()).get();","215","        \/\/ Another build updates links","216","        assertSymlinkForBuild(lastSuccessful, 2);","217","        assertSymlinkForBuild(lastStable, 2);","218","        \/\/ Delete latest build should update links","219","        build2.delete();","220","        assertSymlinkForBuild(lastSuccessful, 1);","221","        assertSymlinkForBuild(lastStable, 1);","222","        \/\/ Delete all builds should remove links","223","        build.delete();","224","        assertFalse(\"lastSuccessful link should be removed\", lastSuccessful.exists());","225","        assertFalse(\"lastStable link should be removed\", lastStable.exists());","226","    }","227","","228","    private static void assertSymlinkForBuild(File file, int buildNumber) throws IOException {","229","        assertTrue(\"should exist and point to something that exists\", file.exists());","230","        assertTrue(\"should be symlink\", Util.isSymlink(file));","231","        String s = FileUtils.readFileToString(new File(file, \"log\"));","232","        assertTrue(\"link should point to build #\" + buildNumber + \", but log was:\\n\" + s,","233","                   s.contains(\"Build #\" + buildNumber + \"\\n\"));","234","    }"],"delete":["32","import hudson.scm.SCM;","33","import hudson.scm.ChangeLogParser;","44","import java.io.IOException;","176","            public boolean requiresWorkspaceForPolling() {","181","            public void run() {"]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["52","import hudson.util.LogTaskListener;","330","    @Override","331","    public synchronized void delete() throws IOException {","332","        \/\/ Need to check if deleting this build affects lastSuccessful\/lastStable symlinks","333","        R lastSuccessful = getProject().getLastSuccessfulBuild(),","334","          lastStable = getProject().getLastStableBuild();","335","","336","        super.delete();","337","","338","        try {","339","            if (lastSuccessful == this)","340","                updateSymlink(\"lastSuccessful\", getProject().getLastSuccessfulBuild());","341","            if (lastStable == this)","342","                updateSymlink(\"lastStable\", getProject().getLastStableBuild());","343","        } catch (InterruptedException ex) {","344","            LOGGER.warning(\"Interrupted update of lastSuccessful\/lastStable symlinks for \"","345","                           + getProject().getDisplayName());","346","            \/\/ handle it later","347","            Thread.currentThread().interrupt();","348","        }","349","    }","350","","351","    private void updateSymlink(String name, AbstractBuild<?,?> newTarget) throws InterruptedException {","352","        if (newTarget != null)","353","            newTarget.createSymlink(new LogTaskListener(LOGGER, Level.WARNING), name);","354","        else","355","            new File(getProject().getBuildDir(), \"..\/\"+name).delete();","356","    }","357","","358","    private void createSymlink(TaskListener listener, String name) throws InterruptedException {","359","        Util.createSymlink(getProject().getBuildDir(),\"builds\/\"+getId(),\"..\/\"+name,listener);","360","    }","361","","429","                    createSymlink(listener, \"lastSuccessful\");","432","                    createSymlink(listener, \"lastStable\");"],"delete":["396","                    createSymLink(listener,\"lastSuccessful\");","399","                    createSymLink(listener,\"lastStable\");","443","        private void createSymLink(BuildListener listener, String name) throws InterruptedException {","444","            Util.createSymlink(getProject().getBuildDir(),\"builds\/\"+getId(),\"..\/\"+name,listener);","445","        }","446",""]}]}},"cc90b7fe1d68c487861d3057d2db029901254184":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/test\/TestObject\/sidepanel.jelly":"MODIFY"},"diff":{"changelog.html":[{"add":["78","  <li class=bug>","79","    Clicking \"History\" from the left bar in a test result history page results in 404","80","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-5450\">issue 5450<\/a>)"],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/test\/TestObject\/sidepanel.jelly":[{"add":["33","      <j:set var=\"baseUrl\" value=\"${request.findAncestor(it).relativePath}\"\/>","35","      <l:task icon=\"images\/24x24\/graph.gif\" href=\"${baseUrl}\/history\" title=\"${%History}\"\/>"],"delete":["34","      <l:task icon=\"images\/24x24\/graph.gif\" href=\"history\" title=\"${%History}\"\/>"]}]}},"83f204fd5933be1a990c2fe50a5f91ca77c75e87":{"changes":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":"MODIFY","test\/pom.xml":"MODIFY","core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":[{"add":[],"delete":["395","        \/\/ TODO: there's awful inefficiency in htmlunit where it loads the whole binary into one big byte array.","396","        \/\/ needs to modify it to use temporary file or something","397",""]}],"test\/pom.xml":[{"add":["102","      <version>2.6-jenkins-5<\/version>"],"delete":["102","      <version>2.6-jenkins-4<\/version>"]}],"core\/pom.xml":[{"add":["159","      <version>2.6-jenkins-5<\/version>"],"delete":["159","      <version>2.6-jenkins-4<\/version>"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Fixed the OutOfMemoryError in trying to download\/install JDK","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10689\">issue 10689<\/a>)"],"delete":["57","  <li class=>"]}]}},"e8f2002c466c49eff4a7be0cc4633580515cd7a5":{"changes":{"core\/src\/main\/java\/jenkins\/security\/s2m\/MasterKillSwitchConfiguration.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/s2m\/MasterKillSwitchConfiguration.java":[{"add":["3","import javax.inject.Inject;","48","        if (rule.getMasterKillSwitch()) {","49","            return true; \/\/ always relevant if it is enabled.","50","        }","51","        return jenkins.isUseSecurity()            \/\/ if security is off, there's no point","52","            && (jenkins.getComputers().length>1   \/\/ if there's no slave,","53","                || !jenkins.clouds.isEmpty()      \/\/ and no clouds, likewise this is pointless","54","            )"],"delete":["9","import javax.inject.Inject;","10","","49","        return jenkins.getComputers().length>1  \/\/ if there's no slave, there's no point","50","            && jenkins.isUseSecurity()          \/\/ if security is off, likewise this is pointless"]}]}},"990a84f75396fe942d2cbc690a7c047223b648dd":{"changes":{"core\/src\/main\/java\/hudson\/model\/HealthReport.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/HealthReport.java":[{"add":["36","import java.util.HashMap;","38","import java.util.Map;","64","    private static final Map<String, String> iconIMGToClassMap = new HashMap<String, String>();","65","    static {","66","        iconIMGToClassMap.put(HEALTH_OVER_80_IMG, HEALTH_OVER_80);","67","        iconIMGToClassMap.put(HEALTH_61_TO_80_IMG, HEALTH_61_TO_80);","68","        iconIMGToClassMap.put(HEALTH_41_TO_60_IMG, HEALTH_41_TO_60);","69","        iconIMGToClassMap.put(HEALTH_21_TO_40_IMG, HEALTH_21_TO_40);","70","        iconIMGToClassMap.put(HEALTH_0_TO_20_IMG, HEALTH_0_TO_20);","71","    }","72","","364","","365","            if (hr.iconClassName == null && hr.iconUrl != null && iconIMGToClassMap.containsKey(hr.iconUrl)) {","366","                hr.iconClassName = iconIMGToClassMap.get(hr.iconUrl);","367","            }"],"delete":[]}]}},"bcd0b2c72bf8c55b7d4997e142954c149b7d4faa":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["172","        <version>3.14<\/version>"],"delete":["172","        <version>3.13<\/version>"]}]}},"345b3bb3743f93a797c843bfc51d95a90093f144":{"changes":{"changelog.html":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY"},"diff":{"changelog.html":[{"add":["60","  <li class=bug>","61","    Fixed an occasional NPE when running Maven jobs ","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9822\">issue 9822<\/a>)"],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["542","         * Sends the accumulated log in {@link SplittableBuildListener} to the log of this build.","588","            if (moduleSetBuild == null) {","589","                \/\/ ModuleSetBuild is gone, for whatever reason JENKINS-9822","590","                return;","591","            }","592","            "],"delete":["542","         * Sends the accumuldated log in {@link SplittableBuildListener} to the log of this build."]}]}},"b831acd9854b525d680ca72fd218c848121b9d3f":{"changes":{"core\/src\/test\/java\/hudson\/model\/ViewTest.java":"MODIFY","\/dev\/null":"DELETE","core\/src\/main\/java\/hudson\/search\/UserSearchProperty.java":"MODIFY","test\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterCaseSensitiveSearchTest.java":"ADD","core\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterTest.java":"MODIFY","core\/src\/main\/java\/hudson\/search\/FixedSet.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/model\/ViewTest.java":[{"add":["15","import java.util.Collections;","101","        Mockito.when(rightView.getItems()).thenReturn(Collections.singletonList(rightJob));"],"delete":["100","        Mockito.when(rightView.getItems()).thenReturn(Arrays.asList(rightJob));"]}],"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/search\/UserSearchProperty.java":[{"add":["13","","14","    private static final boolean DEFAULT_SEARCH_CASE_INSENSITIVE_MODE = true;","15","","29","","30","        if (user == null) {","31","            return DEFAULT_SEARCH_CASE_INSENSITIVE_MODE;","33","","34","        return user.getProperty(UserSearchProperty.class).getInsensitiveSearch();","45","            return new UserSearchProperty(DEFAULT_SEARCH_CASE_INSENSITIVE_MODE);"],"delete":["13","    ","27","        boolean caseInsensitive = false;","28","        if(user!=null && user.getProperty(UserSearchProperty.class).getInsensitiveSearch()){\/\/Searching for anonymous user is case-sensitive","29","          caseInsensitive=true;","31","        return caseInsensitive;","42","            return new UserSearchProperty(false); \/\/default setting is case-sensitive searching"]}],"test\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterCaseSensitiveSearchTest.java":[{"add":[],"delete":[]}],"core\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterTest.java":[{"add":["40","import org.jvnet.hudson.test.Issue;","328","    @Issue(\"JENKINS-42645\")","329","    public void should_be_case_insensitive_by_default() throws IOException {","331","        assertOneMatchingBuildForGivenSearchStringAndRunItems(\"failure\", runs);","335","    public void should_lower_case_search_string_in_case_insensitive_search() throws IOException {","336","        List<ModelObject> runs = Lists.<ModelObject>newArrayList(new MockRun(2, Result.FAILURE), new MockRun(1, Result.SUCCESS));","337","        assertOneMatchingBuildForGivenSearchStringAndRunItems(\"FAILure\", runs);","338","    }","339","","340","    @Test","341","    @Issue(\"JENKINS-40718\")","342","    public void should_search_builds_by_build_variables() throws IOException {","350","    @Issue(\"JENKINS-40718\")","351","    public void should_search_builds_by_build_params() throws IOException {","359","    @Issue(\"JENKINS-40718\")","360","    public void should_ignore_sensitive_parameters_in_search_builds_by_build_params() throws IOException {"],"delete":["39","import org.junit.Ignore;","328","    public void test_search_should_be_case_sensitive_for_anonymous_user() throws IOException {","329","        \/\/given","330","        HistoryPageFilter<ModelObject> historyPageFilter = newPage(5, null, null);","331","        \/\/and","332","        historyPageFilter.setSearchString(\"failure\");","333","        \/\/and","335","        List<Queue.Item> queueItems = newQueueItems(3, 4);","336","","337","        \/\/when","338","        historyPageFilter.add(runs, queueItems);","339","","340","        \/\/then","341","        Assert.assertEquals(0, historyPageFilter.runs.size());","345","    public void test_search_builds_by_build_variables() throws IOException {","353","    public void test_search_builds_by_build_params() throws IOException {","361","    public void test_ignore_sensitive_parameters_in_search_builds_by_build_params() throws IOException {"]}],"core\/src\/main\/java\/hudson\/search\/FixedSet.java":[{"add":["29","import org.apache.commons.lang.StringUtils;","30","","37","","50","        for (SearchItem i : items) {","52","            if (name.equals(token) || (caseInsensitive && name.equalsIgnoreCase(token))) {","54","            }","60","        for (SearchItem i : items) {","62","            if (name.contains(token) || (caseInsensitive && StringUtils.containsIgnoreCase(name, token))) {","64","            }"],"delete":["47","        for (SearchItem i : items){","49","            if(caseInsensitive){","50","                token=token.toLowerCase();","51","                name=name.toLowerCase();","52","            }","53","            if(token.equals(i.getSearchName()))","60","        for (SearchItem i : items){","62","            if(caseInsensitive){","63","                token=token.toLowerCase();","64","                name=name.toLowerCase();","65","            }","66","            if(name.contains(token))"]}]}},"35d708862953a6ce6045c60644a56b8125d63c0d":{"changes":{"core\/src\/main\/java\/hudson\/model\/listeners\/ItemListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/listeners\/ItemListener.java":[{"add":["195","    \/**","196","     * Call before a job is copied into a new parent, to allow the {@link ItemListener} implementations the ability","197","     * to veto the copy operation before it starts.","198","     *","199","     * @param src    the item being copied","200","     * @param parent the proposed parent","201","     * @throws Failure if the copy operation has been vetoed.","202","     * @since TODO","203","     *\/"],"delete":[]}]}},"b517eb7925a0ac50bf499d30732b986efbf6d276":{"changes":{"core\/src\/main\/resources\/jenkins\/diagnosis\/HsErrPidList\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/diagnosis\/HsErrPidList\/index.jelly":[{"add":["53","              <form method=\"post\" action=\"files\/${idx.index}\/delete\" name=\"${idx}\">"],"delete":["53","              <form method=\"post\" action=\"files\/${idx.index}\/${f.name}\/delete\" name=\"${idx}\">"]}]}},"8b6d38de67154fb96c59791082d5cbe743b2b693":{"changes":{"core\/src\/main\/java\/hudson\/security\/csrf\/CrumbIssuer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/csrf\/CrumbIssuer.java":[{"add":["45","","46","    @Restricted(NoExternalUse.class)"],"delete":[]}]}},"3df6ccaec8ba60b144d60a5302233e149507712b":{"changes":{"test\/src\/test\/java\/jenkins\/model\/NodesTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Nodes.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/model\/NodesTest.java":[{"add":["40","import static org.junit.Assert.assertNull;","41","import static org.junit.Assert.assertNotNull;","92","    @Test","93","    @Issue(\"JENKINS-56403\")","94","    public void replaceNodeShouldRemoveOldNode() throws Exception {","95","        Node oldNode = r.createSlave(\"foo\", \"\", null);","96","        Node newNode = r.createSlave(\"foo-new\", \"\", null);","97","        r.jenkins.addNode(oldNode);","98","        r.jenkins.getNodesObject().replaceNode(oldNode, newNode);","99","        r.jenkins.getNodesObject().load();","100","        assertNull(r.jenkins.getNode(oldNode.getNodeName()));","101","    }","102","","103","    @Test","104","    @Issue(\"JENKINS-56403\")","105","    public void replaceNodeShouldNotRemoveIdenticalOldNode() throws Exception {","106","        Node oldNode = r.createSlave(\"foo\", \"\", null);","107","        Node newNode = r.createSlave(\"foo\", \"\", null);","108","        r.jenkins.addNode(oldNode);","109","        r.jenkins.getNodesObject().replaceNode(oldNode, newNode);","110","        r.jenkins.getNodesObject().load();","111","        assertNotNull(r.jenkins.getNode(oldNode.getNodeName()));","112","    }","113",""],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Nodes.java":[{"add":["235","            if (!newOne.getNodeName().equals(oldOne.getNodeName())) {","236","                Util.deleteRecursive(new File(getNodesDir(), oldOne.getNodeName()));","237","            }","239",""],"delete":[]}]}},"c51fd534634f06a34276a857c25983fd3d0c061c":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["41","    <stapler.version>1.237<\/stapler.version>"],"delete":["41","    <stapler.version>1.236<\/stapler.version>"]}]}},"d3666a1714f6525928f14f63859ea77fda55db49":{"changes":{"test\/src\/test\/java\/jenkins\/install\/UpgradeWizardTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/UpgradeWizard.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/install\/UpgradeWizardTest.java":[{"add":["12","import java.util.concurrent.Callable;","33","        j.executeOnServer(new Callable<Void>() {","34","            @Override","35","            public Void call() throws Exception {","36","                assertTrue(uw.isDue());","37","                uw.doSnooze();","38","                assertFalse(uw.isDue());","39","","40","                return null;","41","            }","42","        });","50","        j.executeOnServer(new Callable<Void>() {","51","            @Override","52","            public Void call() throws Exception {","53","                assertTrue(j.jenkins.getUpdateCenter().getJobs().size() == 0);","54","                assertTrue(newInstance().isDue());","55","                assertNotSame(UpgradeWizard.NOOP, uw.doUpgrade());","57","                \/\/ can't really test this because UC metadata is empty","58","                \/\/ assertTrue(j.jenkins.getUpdateCenter().getJobs().size() > 0);","59","","60","                return null;","61","            }","62","        });","87","        j.executeOnServer(new Callable<Void>() {","88","            @Override","89","            public Void call() throws Exception {","90","                assertTrue(uw.isDue());","91","                uw.setCurrentLevel(new VersionNumber(\"2.0\"));","92","                assertFalse(uw.isDue());","93","","94","                return null;","95","            }","96","        });"],"delete":["32","        assertTrue(uw.isDue());","33","        uw.doSnooze();","34","        assertFalse(uw.isDue());","42","        assertTrue(j.jenkins.getUpdateCenter().getJobs().size() == 0);","43","        assertTrue(newInstance().isDue());","44","        assertNotSame(UpgradeWizard.NOOP, uw.doUpgrade());","46","        \/\/ can't really test this because UC metadata is empty","47","        \/\/ assertTrue(j.jenkins.getUpdateCenter().getJobs().size() > 0);","72","        assertTrue(uw.isDue());","73","        uw.setCurrentLevel(new VersionNumber(\"2.0\"));","74","        assertFalse(uw.isDue());"]}],"core\/src\/main\/java\/jenkins\/install\/UpgradeWizard.java":[{"add":["12","import org.kohsuke.stapler.WebApp;","89","        \/\/ only show when Jenkins is fully up & running","90","        WebApp wa = WebApp.getCurrent();","91","        if (wa==null || !(wa.getApp() instanceof Jenkins))","92","            return false;","93",""],"delete":[]}]}},"f061322cd91edd6f153daac800c7c9362a95252d":{"changes":{"core\/src\/main\/java\/hudson\/model\/LoadStatistics.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/LoadStatistics.java":[{"add":["140","                    busyExecutors.pick(timeScale).getHistory(),"],"delete":["139","                    busyExecutors.pick(timeScale).getHistory(),"]}]}},"f9a2679004a83c8ffb41cc8243fd41c48a3b8464":{"changes":{"core\/src\/main\/java\/hudson\/util\/DescribableList.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/DescribableList.java":[{"add":["99","    \/**","100","     * Removes all instances of the same type, then add the new one.","101","     *\/","102","    public void replace(T item) throws IOException {","103","        removeAll((Class)item.getClass());","104","        data.add(item);","105","        onModified();","106","    }","107","","127","    \/**","128","     * Gets all instances that matches the given type.","129","     *\/","130","    public <U extends T> List<U> getAll(Class<U> type) {","131","        List<U> r = new ArrayList<U>();","132","        for (T t : data)","133","            if(type.isInstance(t))","134","                r.add(type.cast(t));","135","        return r;","136","    }","137","","159","    public void removeAll(Class<? extends T> type) throws IOException {","160","        boolean modified=false;","161","        for (T t : data) {","162","            if(t.getClass()==type) {","163","                data.remove(t);","164","                modified=true;","165","            }","166","        }","167","        if(modified)","168","            onModified();","169","    }","170",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["412","                    \/\/ here, we just need to replace the old one with the new one,","413","                    \/\/ but there was a regression (we don't know when it started) that put multiple BuildTriggers","414","                    \/\/ into the list.","415","                    \/\/ for us not to lose the data, we need to merge them all.","416","                    List<BuildTrigger> existingList = pl.getAll(BuildTrigger.class);","417","                    BuildTrigger existing;","418","                    switch (existingList.size()) {","419","                    case 0:","420","                        existing = null;","421","                        break;","422","                    case 1:","423","                        existing = existingList.get(0);","424","                        break;","425","                    default:","426","                        pl.removeAll(BuildTrigger.class);","427","                        Set<AbstractProject> combinedChildren = new HashSet<AbstractProject>();","428","                        for (BuildTrigger bt : existingList)","429","                            combinedChildren.addAll(bt.getChildProjects());","430","                        existing = new BuildTrigger(new ArrayList<AbstractProject>(combinedChildren),existingList.get(0).getThreshold());","431","                        pl.add(existing);","432","                        break;","433","                    }","434","","437","                    pl.replace(new BuildTrigger(newChildProjects,"],"delete":["50","import hudson.tasks.BuildWrapper;","413","                    BuildTrigger existing = pl.get(BuildTrigger.class);","416","                    pl.add(new BuildTrigger(newChildProjects,"]}]}},"b563655b4e933ed6834d9f55072cc146af5880d6":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":[{"add":["24","<?jelly escape-by-default='true'?>","73","                  <j:invokeStatic var=\"exeparent\"","74","                     className=\"hudson.model.queue.Executables\" method=\"getParentOf\">","75","                    <j:arg type=\"hudson.model.Queue$Executable\" value=\"${exe}\" \/>","76","                  <\/j:invokeStatic>","78","                    <j:when test=\"${h.hasPermission(exeparent,exeparent.READ)}\">","79","                      <a href=\"${rootURL}\/${exeparent.url}\">${exeparent.fullDisplayName}<\/a>&#160;<a href=\"${rootURL}\/${exe.url}\">#${exe.number}<\/a>"],"delete":["24","","74","                    <j:when test=\"${h.hasPermission(exe.parent,exe.parent.READ)}\">","75","                      <a href=\"${rootURL}\/${exe.parent.url}\">${exe.parent.fullDisplayName}<\/a>&#160;<a href=\"${rootURL}\/${exe.url}\">#${exe.number}<\/a>"]}]}},"98dbfd7e0d17b3c242a94efbc84e49d25d9f3863":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["219","                  <version>0.20<\/version>"],"delete":["219","                  <version>0.17<\/version>"]}]}},"9f2f827023c4074875ce2fb28d2313b54861c764":{"changes":{"war\/src\/main\/js\/add-item.js":"MODIFY"},"diff":{"war\/src\/main\/js\/add-item.js":[{"add":[],"delete":["123","          $('input[name=\"name\"][type=\"text\"]', '#createItem').focus();","172","            $('input[name=\"name\"][type=\"text\"]', '#createItem').focus();","180","        $('input[name=\"name\"][type=\"text\"]', '#createItem').focus();"]}]}},"4f6e649294e27feb3afc870d0ca959e771ff9778":{"changes":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":[{"add":["244","                args.add(jdkBundle, \"\/s\");","245","","246","                \/\/ Create a private JRE by omitting \"PublicjreFeature\"","247","                \/\/ @see http:\/\/docs.oracle.com\/javase\/7\/docs\/webnotes\/install\/windows\/jdk-installation-windows.html#jdk-silent-installation","248","                args.add(\"ADDLOCAL=\\\"ToolsFeature\\\"\");","249","","250","                args.add(\"REBOOT=ReallySuppress\", \"INSTALLDIR=\" + expectedLocation,"],"delete":["244","                args.add(jdkBundle, \"\/s\", \"REBOOT=ReallySuppress\",","245","                        \"INSTALLDIR=\" + expectedLocation,"]}]}},"6fe5d6c6bab63998b11a3b987c57f59a928c965e":{"changes":{"core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/VirtualFile.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":[{"add":["27","import hudson.remoting.Callable;","253","                glob = baseFile.run(new BuildChildPaths(baseFile, req.getLocale()));","447","            if(f.isDirectory())     return 0;","455","    private static final class BuildChildPaths implements Callable<List<List<Path>>,IOException> {","456","        private final VirtualFile cur;","457","        private final Locale locale;","458","        BuildChildPaths(VirtualFile cur, Locale locale) {","459","            this.cur = cur;","460","            this.locale = locale;","461","        }","462","        @Override public List<List<Path>> call() throws IOException {","463","            return buildChildPaths(cur, locale);","464","        }","465","    }"],"delete":["36","import java.util.IdentityHashMap;","39","import java.util.Map;","254","                glob = buildChildPaths(baseFile, req.getLocale());","433","        private final Map<VirtualFile,Boolean> isDirCache = new IdentityHashMap<VirtualFile,Boolean>();","447","        private boolean isDirectory(VirtualFile f) throws IOException {","448","            Boolean known = isDirCache.get(f);","449","            if (known == null) {","450","                known = f.isDirectory();","451","                isDirCache.put(f, known);","452","            }","453","            return known;","454","        }","455","","458","            if(isDirectory(f))     return 0;"]}],"core\/src\/main\/java\/jenkins\/util\/VirtualFile.java":[{"add":["28","import hudson.remoting.Callable;","37","import java.io.Serializable;","60","public abstract class VirtualFile implements Comparable<VirtualFile>, Serializable {","189","     * Does some calculations in batch.","190","     * For a remote file, this can be much faster than doing the corresponding operations one by one as separate requests.","191","     * The default implementation just calls the block directly.","192","     * @param <V> a value type","193","     * @param <T> the exception type","194","     * @param callable something to run all at once (only helpful if any mentioned files are on the same system)","195","     * @return the callable result","196","     * @throws IOException if remote communication failed","197","     * @since 1.554","198","     *\/","199","    public <V> V run(Callable<V,IOException> callable) throws IOException {","200","        return callable.call();","201","    }","202","","203","    \/**","209","        return new FileVF(f);","210","    }","211","    private static final class FileVF extends VirtualFile {","212","        private final File f;","213","        FileVF(File f) {","214","            this.f = f;","215","        }","271","        return new FilePathVF(f);","272","    }","273","    private static final class FilePathVF extends VirtualFile {","274","        private final FilePath f;","275","        FilePathVF(FilePath f) {","276","            this.f = f;","277","        }","358","            @Override public <V> V run(Callable<V,IOException> callable) throws IOException {","359","                try {","360","                    return f.act(callable);","361","                } catch (InterruptedException x) {","362","                    throw (IOException) new IOException(x.toString()).initCause(x);","363","                }","364","            }"],"delete":["58","public abstract class VirtualFile implements Comparable<VirtualFile> {","192","        return new VirtualFile() {","240","        };","249","        return new VirtualFile() {","330","        };"]}]}},"c8459682021e104666d0178d23e403f6e3b0e1ee":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenModule.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Project.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/reporters\/MavenAbstractArtifactRecord.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/AbstractMavenProject.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Maven.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/RedeployPublisher.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenEmbedder.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenUtil.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactRecord.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":[{"add":["409","    public MavenInstallation inferMavenInstallation() {","410","        return getMaven();","411","    }","412","","413","    @Override"],"delete":[]}],"core\/src\/main\/java\/hudson\/maven\/MavenModule.java":[{"add":["23","import hudson.tasks.Maven.MavenInstallation;","378","    @Override","379","    public MavenInstallation inferMavenInstallation() {","380","        return getParent().inferMavenInstallation();","381","    }","382",""],"delete":[]}],"core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["8","import hudson.tasks.Maven.MavenInstallation;","374","                poms = project.getModuleRoot().act(new PomParser(listener,project.getMaven(),project.getRootPOM(),project.getProfiles()));","624","        private final MavenInstallation mavenHome;","627","        public PomParser(BuildListener listener, MavenInstallation mavenHome, String rootPOM, String profiles) {","629","            this.mavenHome = mavenHome;","667","                MavenEmbedder embedder = mavenHome.createEmbedder(listener,profiles);"],"delete":["373","                poms = project.getModuleRoot().act(new PomParser(listener,project.getRootPOM(),project.getProfiles()));","625","        public PomParser(BuildListener listener, String rootPOM, String profiles) {","664","                MavenEmbedder embedder = MavenUtil.createEmbedder(listener, profiles);"]}],"core\/src\/main\/java\/hudson\/model\/Project.java":[{"add":["12","import hudson.tasks.Maven;","13","import hudson.tasks.Maven.ProjectWithMaven;","14","import hudson.tasks.Maven.MavenInstallation;","34","    extends AbstractProject<P,B> implements SCMedItem, DescribableList.Owner, ProjectWithMaven {","134","        for (Publisher p : publishers) {","135","            if(p instanceof Fingerprinter)","136","                return true;","141","    @Override","142","    public MavenInstallation inferMavenInstallation() {","143","        for (Builder builder : builders) {","144","            if (builder instanceof Maven)","145","                return ((Maven) builder).getMaven();","146","        }","147","        return null;","148","    }","150","    \/\/"],"delete":["31","    extends AbstractProject<P,B> implements SCMedItem, DescribableList.Owner {","131","        synchronized(publishers) {","132","            for (Publisher p : publishers) {","133","                if(p instanceof Fingerprinter)","134","                    return true;","135","            }","141","","142","\/\/"]}],"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenAbstractArtifactRecord.java":[{"add":["172","                    MavenEmbedder embedder = MavenUtil.createEmbedder(listener,getBuild().getProject(),null);"],"delete":["172","                    MavenEmbedder embedder = MavenUtil.createEmbedder(listener, null);"]}],"core\/src\/main\/java\/hudson\/maven\/AbstractMavenProject.java":[{"add":["7","import hudson.tasks.Maven.ProjectWithMaven;","17","public abstract class AbstractMavenProject<P extends AbstractMavenProject<P,R>,R extends AbstractBuild<P,R>> extends AbstractProject<P,R>","18","    implements ProjectWithMaven {"],"delete":["16","public abstract class AbstractMavenProject<P extends AbstractMavenProject<P,R>,R extends AbstractBuild<P,R>> extends AbstractProject<P,R>  {"]}],"core\/src\/main\/java\/hudson\/tasks\/Maven.java":[{"add":["10","import hudson.maven.MavenEmbedder;","11","import hudson.maven.MavenUtil;","12","import hudson.maven.RedeployPublisher;","26","import org.apache.maven.embedder.MavenEmbedderException;","330","        public MavenEmbedder createEmbedder(BuildListener listener, String profiles) throws MavenEmbedderException, IOException {","331","            return MavenUtil.createEmbedder(listener,getHomeDir(),profiles);","332","        }","333","","336","","337","    \/**","338","     * Optional interface that can be implemented by {@link AbstractProject}","339","     * that has \"contextual\" {@link MavenInstallation} associated with it.","340","     *","341","     * <p>","342","     * Code like {@link RedeployPublisher} uses this interface in an attempt","343","     * to use the consistent Maven installation attached to the project.","344","     *","345","     * @since 1.235","346","     *\/","347","    public interface ProjectWithMaven {","348","        \/**","349","         * Gets the {@link MavenInstallation} associated with the project.","350","         * Can be null.","351","         *","352","         * <p>","353","         * If the Maven installation can not be uniquely determined,","354","         * it's often better to return just one of them, rather than returning","355","         * null, since this method is currently ultimately only used to","356","         * decide where to parse <tt>conf\/settings.xml<\/tt> from.","357","         *\/","358","        MavenInstallation inferMavenInstallation();","359","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/maven\/RedeployPublisher.java":[{"add":["57","            MavenEmbedder embedder = MavenUtil.createEmbedder(listener,build.getProject(),null);"],"delete":["57","            MavenEmbedder embedder = MavenUtil.createEmbedder(listener, null);"]}],"core\/src\/main\/java\/hudson\/maven\/MavenEmbedder.java":[{"add":["89","import java.lang.reflect.Field;","169","    \/**","170","     * Installation of Maven. We don't really read jar files from here,","171","     * but we do read <tt>conf\/settings.xml<\/tt>.","172","     *","173","     * <p>","174","     * For compatibility reasons, this field may be null,","175","     * when {@link MavenEmbedder} is invoked from old plugins","176","     * who don't give us this value.","177","     *\/","178","    private final File mavenHome;","179","","180","    public MavenEmbedder(File mavenHome) {","181","        this.mavenHome = mavenHome; ","182","    }","183","","732","            if(mavenHome!=null) {","733","                \/\/ set global settings.xml.","734","                \/\/ Maven figures this out from system property, which is obviously not set","735","                \/\/ for us. So we need to override this private field.","736","                try {","737","                    Field field = settingsBuilder.getClass().getDeclaredField(\"globalSettingsFile\");","738","                    \/\/ getAbsoluteFile is probably not necessary, but just following what DefaultMavenSettingsBuilder does","739","                    field.set(settingsBuilder,new File(mavenHome,\"conf\/settings.xml\").getAbsoluteFile());","740","                } catch (NoSuchFieldException e) {","741","                    throw new MavenEmbedderException(e);","742","                } catch (IllegalAccessException e) {","743","                    throw new MavenEmbedderException(e);","744","                }","745","            }","746",""],"delete":[]}],"core\/src\/main\/java\/hudson\/maven\/MavenUtil.java":[{"add":["3","import hudson.model.BuildListener;","4","import hudson.model.TaskListener;","5","import hudson.model.AbstractProject;","6","import hudson.tasks.Maven.MavenInstallation;","7","import hudson.tasks.Maven.ProjectWithMaven;","25","     * @deprecated","26","     *      Use {@link MavenInstallation#createEmbedder(BuildListener, String)}","27","     *      or other overloaded versions that infers maven home.","28","     *\/","29","    public static MavenEmbedder createEmbedder(TaskListener listener, String profiles) throws MavenEmbedderException, IOException {","30","        return createEmbedder(listener,(File)null,profiles);","31","    }","32","","33","    \/**","34","     * This version tries to infer mavenHome by looking at a project.","35","     *","36","     * @see #createEmbedder(TaskListener, File, String)","37","     *\/","38","    public static MavenEmbedder createEmbedder(TaskListener listener, AbstractProject<?,?> project, String profiles) throws MavenEmbedderException, IOException {","39","        MavenInstallation m=null;","40","        if (project instanceof ProjectWithMaven)","41","            m = ((ProjectWithMaven) project).inferMavenInstallation();","42","","43","        return createEmbedder(listener,m!=null?m.getHomeDir():null,profiles);","44","    }","45","","46","    \/**","51","     * @param mavenHome","52","     *      Directory of the Maven installation. We read {@code conf\/settings.xml}","53","     *      from here. Can be null.","57","    public static MavenEmbedder createEmbedder(TaskListener listener, File mavenHome, String profiles) throws MavenEmbedderException, IOException {","58","        MavenEmbedder maven = new MavenEmbedder(mavenHome);"],"delete":["2","import hudson.model.TaskListener;","3","import hudson.model.BuildListener;","8","import org.apache.maven.settings.Settings;","9","import org.apache.maven.settings.Proxy;","10","import org.apache.maven.settings.Server;","11","import org.apache.maven.settings.Mirror;","12","import org.apache.maven.SettingsConfigurationException;","13","import org.apache.maven.artifact.manager.WagonManager;","14","import org.codehaus.plexus.component.repository.exception.ComponentLookupException;","15","import org.codehaus.plexus.component.repository.exception.ComponentLifecycleException;","16","import org.codehaus.plexus.util.xml.Xpp3Dom;","25","import java.util.Iterator;","39","    public static MavenEmbedder createEmbedder(TaskListener listener, String profiles) throws MavenEmbedderException, IOException {","40","        MavenEmbedder maven = new MavenEmbedder();"]}],"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactRecord.java":[{"add":["14","import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;","107","    public void install(MavenEmbedder embedder) throws MavenEmbedderException, IOException, ComponentLookupException, ArtifactInstallationException {"],"delete":["8","import hudson.maven.MavenUtil;","12","import org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;","108","    public void install(TaskListener listener) throws MavenEmbedderException, IOException, ComponentLookupException, ArtifactInstallationException {","109","        MavenEmbedder embedder = MavenUtil.createEmbedder(listener,null);","121","","122","        embedder.stop();"]}]}},"77bc6ad835fc0fc54e4fed16395deb24332a2b49":{"changes":{"core\/src\/main\/java\/jenkins\/mvn\/GlobalSettingsProvider.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/mvn\/GlobalSettingsProvider.java":[{"add":["53","            settingsPath = settings.supplySettings(build, listener);"],"delete":["53","            try {","54","                settingsPath = settings.supplySettings(build, listener);","55","            } catch (Exception e) {","56","                listener.getLogger().print(\"failed to get the path to the alternate global settings.xml\");","57","            }"]}]}},"e0a3a1ddf5fa08e80a94a565dd05c39f76de6e93":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/maven\/MavenBuildTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["32","import hudson.util.IOException2;","75","import java.security.DigestInputStream;","559","            MessageDigest md5 = MessageDigest.getInstance(\"MD5\");","560","","561","            byte[] buffer = new byte[1024];","562","            DigestInputStream in =new DigestInputStream(source,md5);","563","            try {","564","                while(in.read(buffer)>=0)","565","                    ; \/\/ simply discard the input","566","            } finally {","567","                in.close();","568","            }","569","            return toHexString(md5.digest());","570","        } catch (NoSuchAlgorithmException e) {","571","            throw new IOException2(\"MD5 not installed\",e);    \/\/ impossible","572","        }","573","        \/* JENKINS-18178: confuses Maven 2 runner","574","        try {","579","        *\/"],"delete":[]}],"changelog.html":[{"add":["69","  <li class='major bug'>","70","    Since 1.517, Maven projects using Maven 2 could not build projects using extensions depending on Apache Commons Codec.","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18178\">issue 18178<\/a>)"],"delete":[]}],"test\/src\/test\/java\/hudson\/maven\/MavenBuildTest.java":[{"add":["19","import org.jvnet.hudson.test.SingleFileSCM;","178","    }","179","","180","    @Bug(18178)","181","    public void testExtensionsConflictingWithCore() throws Exception {","182","        MavenModuleSet m = createMavenProject();","183","        m.setMaven(configureDefaultMaven().getName());","184","        m.setScm(new SingleFileSCM(\"pom.xml\",","185","                \"<project><modelVersion>4.0.0<\/modelVersion>\" +","186","                \"<groupId>g<\/groupId><artifactId>a<\/artifactId><version>0<\/version>\" +","187","                \"<build><extensions>\" +","188","                \"<extension><groupId>org.springframework.build.aws<\/groupId><artifactId>org.springframework.build.aws.maven<\/artifactId><version>3.0.0.RELEASE<\/version><\/extension>\" +","189","                \"<\/extensions><\/build><\/project>\"));","190","        buildAndAssertSuccess(m);","191","    }"],"delete":["10","import hudson.tasks.test.TestResultProjectAction;","14","import java.util.List;","179","    }    "]}]}},"dedac56f0c7ddd4fe5075e63aae2884f89d1d028":{"changes":{"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/index.jelly":"MODIFY","maven-plugin\/src\/main\/resources\/hudson\/maven\/MavenModuleSet\/index_ja.properties":"MODIFY","maven-plugin\/src\/main\/resources\/hudson\/maven\/MavenModuleSet\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/index_ja.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/index.jelly":[{"add":["30","      <t:editableDescription permission=\"${it.CONFIGURE}\"\/>","31","","32","      <j:if test=\"${it.disabled}\">","33","        <div class=\"warning\">","34","          <form method=\"post\" action=\"enable\">","35","            ${%This project is currently disabled}","36","            <l:hasPermission permission=\"${it.CONFIGURE}\">","37","              <f:submit value=\"${%Enable}\" \/>","38","            <\/l:hasPermission>","39","          <\/form>","40","        <\/div>","41","      <\/j:if>"],"delete":["30","      <t:editableDescription permission=\"${app.ADMINISTER}\"\/>"]}],"maven-plugin\/src\/main\/resources\/hudson\/maven\/MavenModuleSet\/index_ja.properties":[{"add":["22","Workspace=\\u30ef\\u30fc\\u30af\\u30b9\\u30da\\u30fc\\u30b9","23","Recent\\ Changes=\\u6700\\u65b0\\u306e\\u5909\\u66f4","24","Latest\\ Test\\ Result=\\u6700\\u65b0\\u306e\\u30c6\\u30b9\\u30c8\\u7d50\\u679c","25","Last\\ Successful\\ Artifacts=\\u6700\\u65b0\\u6210\\u529f\\u30d3\\u30eb\\u30c9\\u306e\\u6210\\u679c\\u7269","26","This\\ project\\ is\\ currently\\ disabled=\\u73fe\\u5728\\u3001\\u3053\\u306e\\u30d7\\u30ed\\u30b8\\u30a7\\u30af\\u30c8\\u306f\\u7121\\u52b9\\u3067\\u3059\\u3002","27","Enable=\\u6709\\u52b9\\u5316","28",""],"delete":["22","Workspace=\\u30EF\\u30FC\\u30AF\\u30B9\\u30DA\\u30FC\\u30B9","23","Recent\\ Changes=\\u6700\\u65B0\\u306E\\u5909\\u66F4","24","Latest\\ Test\\ Result=\\u6700\\u65B0\\u306E\\u30C6\\u30B9\\u30C8\\u7D50\\u679C","25","Last\\ Successful\\ Artifacts=\\u6700\\u65B0\\u6210\\u529F\\u30D3\\u30EB\\u30C9\\u306E\\u6210\\u679C\\u7269"]}],"maven-plugin\/src\/main\/resources\/hudson\/maven\/MavenModuleSet\/index.jelly":[{"add":["29","      <t:editableDescription permission=\"${it.CONFIGURE}\"\/>","30","","31","      <j:if test=\"${it.disabled}\">","32","        <div class=\"warning\">","33","          <form method=\"post\" action=\"enable\">","34","            ${%This project is currently disabled}","35","            <l:hasPermission permission=\"${it.CONFIGURE}\">","36","              <f:submit value=\"${%Enable}\" \/>","37","            <\/l:hasPermission>","38","          <\/form>","39","        <\/div>","40","      <\/j:if>"],"delete":["29","      <t:editableDescription permission=\"${app.ADMINISTER}\"\/>"]}],"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/index_ja.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman","23","This\\ project\\ is\\ currently\\ disabled=\\u73fe\\u5728\\u3001\\u3053\\u306e\\u30d7\\u30ed\\u30b8\\u30a7\\u30af\\u30c8\\u306f\\u7121\\u52b9\\u3067\\u3059\\u3002","24","Enable=\\u6709\\u52b9\\u5316"],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman"]}]}},"c3495eb395c2ddd5c59c956c14a2ae9bed39f5b7":{"changes":{"core\/src\/main\/resources\/jenkins\/management\/Messages_fr.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/management\/Messages_fr.properties":[{"add":["25","ReloadLink.Description=Supprimer toutes les donn\\u00E9es en m\\u00E9moire et recharger tout \\u00E0 partir du syst\\u00E8me de fichiers.\\n\\","28","SystemInfoLink.DisplayName=Informations sur le syst\\u00E8me","29","SystemInfoLink.Description=Affiche diverses informations relatives au syst\\u00E8me pour aider \\u00E0 la r\\u00E9solution de probl\\u00EAmes.","30","SystemLogLink.Description=Le log syst\\u00E8me capture la sortie <tt>java.util.logging<\/tt> relative \\u00E0 Jenkins.","32","ConsoleLink.Description=Ex\\u00E9cute des scripts arbitraires pour l''administration, la r\\u00E9solution de probl\\u00E8mes ou pour un diagnostic.","36","ConfigureLink.DisplayName=Configurer le syst\\u00E8me"],"delete":["25","ReloadLink.Description=Supprimer toutes les donn\\u00E9es en m\\u00E9moire et recharger tout \\u00E0 partir du syst\\u00EAme de fichiers.\\n\\","28","SystemInfoLink.DisplayName=Informations sur le syst\\u00EAme","29","SystemInfoLink.Description=Affiche diverses informations relatives au syst\\u00EAme pour aider \\u00E0 la r\\u00E9solution de probl\\u00EAmes.","30","SystemLogLink.Description=Le log syst\\u00EAme capture la sortie <tt>java.util.logging<\/tt> relative \\u00E0 Jenkins.","32","ConsoleLink.Description=Ex\\u00E9cute des scripts arbitraires pour l''''administration, la r\\u00E9solution de probl\\u00E8mes ou pour un diagnostic.","36","ConfigureLink.DisplayName=Configurer le syst\\u00EAme"]}]}},"0cc517f3dcc0839c55a957da0db53deb84e808be":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["72","    Updating the master computer's configuration from the slave list UI had no immediate effect.","73","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17276\">issue 17276<\/a>)","74","  <li class='rfe'>"],"delete":[]}]}},"8a2849b441226ceaba282906af3fe3820fdfa03d":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","test\/src\/test\/resources\/jenkins\/model\/BuildDiscarderPropertyTest\/buildDiscarderField.zip":"ADD","test\/src\/test\/java\/jenkins\/model\/BuildDiscarderPropertyTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["432","        BuildDiscarderProperty prop = _getProperty(BuildDiscarderProperty.class);","555","    @SuppressWarnings({\"unchecked\", \"rawtypes\"})","557","        Map result = Descriptor.toMap((Iterable) properties);","558","        if (logRotator != null) {","559","            result.put(Jenkins.getActiveInstance().getDescriptorByType(BuildDiscarderProperty.DescriptorImpl.class), new BuildDiscarderProperty(logRotator));","560","        }","561","        return result;","578","        if (clazz == BuildDiscarderProperty.class && logRotator != null) {","579","            return clazz.cast(new BuildDiscarderProperty(logRotator));","580","        }","581","        return _getProperty(clazz);","582","    }","583","","584","    private <T extends JobProperty> T _getProperty(Class<T> clazz) {","1209","            logRotator = null;","1210",""],"delete":["432","        BuildDiscarderProperty prop = getProperty(BuildDiscarderProperty.class);","555","    @SuppressWarnings(\"unchecked\")","557","        return Descriptor.toMap((Iterable) properties);"]}],"test\/src\/test\/resources\/jenkins\/model\/BuildDiscarderPropertyTest\/buildDiscarderField.zip":[{"add":[],"delete":[]}],"test\/src\/test\/java\/jenkins\/model\/BuildDiscarderPropertyTest.java":[{"add":["27","import hudson.model.FreeStyleProject;","44","    @Issue(\"JENKINS-31518\")","45","    @LocalData","46","    @Test","47","    public void buildDiscarderField() throws Exception {","48","        FreeStyleProject p = r.jenkins.getItemByFullName(\"p\", FreeStyleProject.class);","49","        verifyBuildDiscarder(p);","50","        r.configRoundtrip(p);","51","        verifyBuildDiscarder(p);","52","        String xml = p.getConfigFile().asString();","53","        assertFalse(xml, xml.contains(\"<logRotator class=\"));","54","        assertTrue(xml, xml.contains(\"<\" + BuildDiscarderProperty.class.getName() + \">\"));","55","    }","56","","57","    private void verifyBuildDiscarder(FreeStyleProject p) {","58","        BuildDiscarder bd = p.getBuildDiscarder();","59","        assertNotNull(bd);","60","        LogRotator lr = (LogRotator) bd;","61","        assertEquals(7, lr.getDaysToKeep());","62","        assertEquals(10, lr.getNumToKeep());","63","        assertNotNull(p.getProperty(BuildDiscarderProperty.class));","64","        assertEquals(1, p.getProperties().size());","65","    }","66",""],"delete":[]}]}},"e14c13cdf04e8b9b8871dd15cedefdf42e08fe29":{"changes":{"core\/src\/main\/resources\/hudson\/node_monitors\/ResponseTimeMonitor\/column.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/node_monitors\/ResponseTimeMonitor\/column.jelly":[{"add":["31","      <td align=\"right\" data=\"${data.average()}\"><j:out value=\"${data}\"\/><\/td>"],"delete":["31","      <td align=\"right\" data=\"${data.average()}\">${data}<\/td>"]}]}},"0e541e66b69cef0e0c147cc9635e2ec800adaa5a":{"changes":{"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/triggers\/SCMTriggerTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":[{"add":["511","            BuildAction oldAction = build.getAction(BuildAction.class);","512","            if (oldAction != null) {","513","                build.getActions().remove(oldAction);","514","            }","515","            "],"delete":[]}],"changelog.html":[{"add":["68","  <li class=bug>","69","    Multiple polling events triggering a single build show up as multiple identical BuildActions in the sidebar, since there","70","    is only one polling log file, regardless of how many times polling happened. Should only be the latest polling instance now.","71","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7649\">issue 7649<\/a>)"],"delete":[]}],"test\/src\/test\/java\/hudson\/triggers\/SCMTriggerTest.java":[{"add":["37","import hudson.model.Cause.UserCause;","39","import hudson.scm.PollingResult;","40","import hudson.scm.PollingResult.Change;","41","import hudson.scm.RepositoryBrowser;","42","import hudson.scm.SCMDescriptor;","43","import hudson.scm.SCMRevisionState;","44","import hudson.triggers.SCMTrigger.SCMTriggerCause;","45","import hudson.triggers.SCMTrigger.BuildAction;","48","import org.jvnet.hudson.test.SingleFileSCM;","49","import org.jvnet.hudson.test.TestBuilder;","53","import java.util.List;","98","","99","    \/**","100","     * Make sure that only one polling result shows up per build.","101","     *\/","102","    @Bug(7649)","103","    public void testMultiplePollingOneBuildAction() throws Exception {","104","        final OneShotEvent buildStarted = new OneShotEvent();","105","        final OneShotEvent buildShouldComplete = new OneShotEvent();","106","        FreeStyleProject p = createFreeStyleProject();","107","        \/\/ Make build sleep a while so it blocks new builds","108","        p.getBuildersList().add(new TestBuilder() {","109","            public boolean perform(AbstractBuild<?, ?> build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {","110","                buildStarted.signal();","111","                buildShouldComplete.block();","112","                return true;","113","            }","114","        });","115","","116","        SCMTrigger t = new SCMTrigger(\"@daily\");","117","        t.start(p,true);","118","        p.addTrigger(t);","119","","120","        \/\/ Start one build to block others","121","        assertTrue(p.scheduleBuild(new UserCause()));","122","        buildStarted.block(); \/\/ wait for the build to really start","123","","124","        \/\/ Schedule a new build, and trigger it many ways while it sits in queue","125","        Future<FreeStyleBuild> fb = p.scheduleBuild2(0, new UserCause());","126","        assertNotNull(fb);","127","        assertFalse(p.scheduleBuild(new SCMTriggerCause(\"First poll\")));","128","        assertFalse(p.scheduleBuild(new SCMTriggerCause(\"Second poll\")));","129","        assertFalse(p.scheduleBuild(new SCMTriggerCause(\"Third poll\")));","130","","131","        \/\/ Wait for 2nd build to finish","132","        buildShouldComplete.signal();","133","        FreeStyleBuild build = fb.get();","134","","135","        List<BuildAction> ba = build.getActions(BuildAction.class);","136","","137","        assertFalse(\"There should only be one BuildAction.\", ba.size()!=1);","138","    }","140",""],"delete":["43",""]}]}},"74ddfd01e1d4a4bc3513c6878fde95f9b3041fdf":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Job\/configure.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/descriptionForm.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/editDescription.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Job\/configure.jelly":[{"add":["13","            rows=\"5\" style=\"width:100%\"><st:out value=\"${it.description}\"\/><\/textarea>"],"delete":["13","            rows=\"5\" style=\"width:100%\">${it.description}<\/textarea>"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/descriptionForm.jelly":[{"add":["4","  <textarea name=\"description\" style=\"width:100%; height:10em;\"><st:out value=\"${it.description}\" xmlns:st=\"jelly:stapler\"\/><\/textarea>"],"delete":["4","  <textarea name=\"description\" style=\"width:100%; height:10em;\">${it.description}<\/textarea>"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/editDescription.jelly":[{"add":["8","        <textarea name=\"description\" style=\"width:100%; height:10em;\"><st:out value=\"${it.description}\" \/><\/textarea>"],"delete":["8","        <textarea name=\"description\" style=\"width:100%; height:10em;\">${it.description}<\/textarea>"]}]}},"2a6fc653ee7b13adde18515b21f7e6dc1200fa8a":{"changes":{"core\/src\/main\/java\/hudson\/util\/ClassLoaderSanityThreadFactory.java":"ADD","core\/src\/test\/java\/jenkins\/util\/TimerTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/Timer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ClassLoaderSanityThreadFactory.java":[{"add":[],"delete":[]}],"core\/src\/test\/java\/jenkins\/util\/TimerTest.java":[{"add":["2","import static org.junit.Assert.assertEquals;","5","import groovy.lang.GroovyClassLoader;","7","import org.junit.Assert;","11","import java.net.URLClassLoader;","13","import java.util.concurrent.ScheduledExecutorService;","14","import java.util.concurrent.ScheduledFuture;","52","","53","    \/**","54","     * Launch two tasks which can only complete","55","     * by running doRun() concurrently.","56","     *\/","57","    @Test","58","    @Issue(\"JENKINS-49206\")","59","    public void timerBogusClassloader() throws Exception {","60","        final int threadCount = 10;  \/\/ Twice Timer pool size to ensure we end up creating at least one new thread","61","        final CountDownLatch startLatch = new CountDownLatch(threadCount);","62","","63","        final ClassLoader[] contextClassloaders = new ClassLoader[threadCount];","64","        ScheduledFuture[] futures = new ScheduledFuture[threadCount];","65","        final ClassLoader bogusClassloader = new GroovyClassLoader();","66","","67","        Runnable timerTest = new Runnable() {","68","            @Override","69","            public void run() {","70","                ClassLoader cl = Thread.currentThread().getContextClassLoader();","71","                Thread.currentThread().setContextClassLoader(bogusClassloader);","72","                ScheduledExecutorService exec = Timer.get();","73","                for (int i=0; i<threadCount; i++) {","74","                    final int j = i;","75","                    futures[j] = exec.schedule(new Runnable() {","76","                        @Override","77","                        public void run() {","78","                            try {","79","                                startLatch.countDown();","80","                                contextClassloaders[j] = Thread.currentThread().getContextClassLoader();","81","                            } catch (Exception ex) {","82","                                throw  new RuntimeException(ex);","83","                            }","84","                        }","85","                    }, 0, TimeUnit.SECONDS);","86","                }","87","                Thread.currentThread().setContextClassLoader(cl);","88","            }","89","        };","90","","91","        Thread t = new Thread(timerTest);","92","        t.run();","93","        t.join(1000L);","94","","95","        for (int i=0; i<threadCount; i++) {","96","            futures[i].get();","97","            Assert.assertEquals(Timer.class.getClassLoader(), contextClassloaders[i]);","98","        }","99","    }"],"delete":[]}],"core\/src\/main\/java\/jenkins\/util\/Timer.java":[{"add":["3","import hudson.util.ClassLoaderSanityThreadFactory;","32","    static ScheduledExecutorService executorService;","33","","46","             executorService = new ImpersonatingScheduledExecutorService(new ErrorLoggingScheduledThreadPoolExecutor(10, new NamingThreadFactory(new ClassLoaderSanityThreadFactory(new DaemonThreadFactory()), \"jenkins.util.Timer\")), ACL.SYSTEM);"],"delete":["31","    private static ScheduledExecutorService executorService;","44","            executorService = new ImpersonatingScheduledExecutorService(new ErrorLoggingScheduledThreadPoolExecutor(10, new NamingThreadFactory(new DaemonThreadFactory(), \"jenkins.util.Timer\")), ACL.SYSTEM);"]}]}},"c8e932f2d8bd62371deb9af6596bf7e50a199d89":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["167","                    if (FilenameUtils.separatorsToUnix(path).startsWith(FilenameUtils.normalize(sub.getRelativePath())))","177","                    if (FilenameUtils.separatorsToUnix(path).startsWith(FilenameUtils.normalize(mod.getRelativePath())))"],"delete":["167","                    if(path.startsWith(FilenameUtils.normalize(sub.getRelativePath())))","177","                    if(path.startsWith(FilenameUtils.normalize(mod.getRelativePath())))"]}]}},"0e339d7a454df119995b896eea14f09a099f99b5":{"changes":{"core\/src\/main\/java\/hudson\/model\/User.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/LastGrantedAuthoritiesPropertyTest.groovy":"ADD","changelog.html":"MODIFY","core\/src\/main\/java\/jenkins\/security\/LastGrantedAuthoritiesProperty.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/model\/User.java":[{"add":["35","import hudson.security.UserMayOrMayNotExistException;","41","import jenkins.security.LastGrantedAuthoritiesProperty;","259","        } catch (UserMayOrMayNotExistException e) {","260","            \/\/ backend can't load information about other users. so use the stored information if available","262","            \/\/ if the user no longer exists in the backend, we need to refuse impersonating this user","263","            throw e;","265","            \/\/ seems like it's in the same boat as UserMayOrMayNotExistException","267","","268","        LastGrantedAuthoritiesProperty p = getProperty(LastGrantedAuthoritiesProperty.class);","269","        if (p!=null)","270","            return new UsernamePasswordAuthenticationToken(id, \"\", p.getAuthorities());","271","        else","272","            return new UsernamePasswordAuthenticationToken(id, \"\",","273","                new GrantedAuthority[]{SecurityRealm.AUTHENTICATED_AUTHORITY});"],"delete":["258","            \/\/ ignore","260","            \/\/ ignore","262","        \/\/ TODO: use the stored GrantedAuthorities","263","        return new UsernamePasswordAuthenticationToken(id, \"\",","264","            new GrantedAuthority[]{SecurityRealm.AUTHENTICATED_AUTHORITY});"]}],"test\/src\/test\/java\/jenkins\/security\/LastGrantedAuthoritiesPropertyTest.groovy":[{"add":[],"delete":[]}],"changelog.html":[{"add":["57","  <li class=rfe>","58","    Access through API token and SSH key login now fully retains group memberships.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-20064\">issue 20064<\/a>)"],"delete":["57","  <li class=>"]}],"core\/src\/main\/java\/jenkins\/security\/LastGrantedAuthoritiesProperty.java":[{"add":[],"delete":[]}]}},"1bf993caf5be57bfe8c1c4a80bfd51c38d683d5b":{"changes":{"core\/src\/main\/java\/jenkins\/diagnostics\/ooom\/Problem.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/diagnostics\/ooom\/Problem.java":[{"add":["258","                            offenders.add(b.compareTo(o) > 0 ? o : b);"],"delete":["258","                            offenders.add(o);"]}]}},"9acf12f7976bd97bfa125e4b715ae340be8c1715":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["44","    <stapler.version>1.187<\/stapler.version>"],"delete":["44","    <stapler.version>1.186<\/stapler.version>"]}]}},"606794a46fca01a83387064844abbc1886ba211c":{"changes":{"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.woff":"ADD","core\/src\/main\/resources\/hudson\/AboutJenkins\/index.jelly":"MODIFY","core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/setupWizardFirstUser.jelly":"MODIFY","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.woff":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.woff":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.woff":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.woff":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.ttf":"ADD","war\/src\/main\/webapp\/css\/icomoon\/fonts\/icomoon.eot":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.svg":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.eot":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.svg":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.svg":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.ttf":"ADD","war\/src\/main\/less\/pluginSetupWizard.less":"MODIFY","war\/src\/main\/webapp\/css\/font-awesome\/fonts\/LICENSE.txt":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.ttf":"ADD","war\/src\/main\/webapp\/css\/icomoon\/fonts\/icomoon.ttf":"ADD","war\/src\/main\/webapp\/css\/icomoon\/css\/icomoon.css":"ADD","war\/src\/main\/webapp\/css\/font-awesome\/css\/LICENSE.txt":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.eot":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.eot":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.ttf":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.svg":"ADD","war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.eot":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.eot":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.eot":"ADD","war\/src\/main\/webapp\/css\/icomoon\/fonts\/icomoon.svg":"ADD","war\/src\/main\/webapp\/css\/icomoon\/fonts\/icomoon.woff":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.woff2":"ADD","core\/src\/main\/resources\/hudson\/AboutJenkins\/index.properties":"MODIFY","war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.woff2":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.svg":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.woff2":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.ttf":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/css\/roboto.css":"ADD","war\/src\/main\/webapp\/css\/font-awesome\/css\/font-awesome.min.css":"ADD","war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.ttf":"ADD","war\/src\/main\/webapp\/css\/font-awesome\/css\/font-awesome.css":"ADD","war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.svg":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.woff2":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/LICENSE.txt":"ADD","\/dev\/null":"DELETE","war\/src\/main\/webapp\/css\/font-awesome\/fonts\/FontAwesome.otf":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.woff2":"ADD","war\/package.json":"MODIFY","war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.woff":"ADD","war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.woff2":"ADD","war\/pom.xml":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.woff":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/AboutJenkins\/index.jelly":[{"add":["36","          <h2>${%dependencies}<\/h2>","37","          <h3>Mavenized dependencies<\/h3>","49","          <h3>${%static.dependencies}<\/h3>","50","          <ul>","51","            <li><a href=\"http:\/\/fontawesome.io\">Font Awesome<\/a>, created by <a href=\"https:\/\/twitter.com\/davegandy\">Dave Gandy<\/a>. <a href=\"http:\/\/scripts.sil.org\/OFL\">SIL OFL 1.1 License<\/a> and <a href=\"http:\/\/opensource.org\/licenses\/mit-license.html\">MIT License<\/a><\/li>","52","            <li><a href=\"https:\/\/www.google.com\/fonts\/specimen\/Roboto\">Google Fonts: Roboto<\/a>, created by <a href=\"https:\/\/plus.google.com\/110879635926653430880\/about\">Christian Robertson<\/a>. <a href=\"http:\/\/www.apache.org\/licenses\/LICENSE-2.0.html\">Apache License, version 2.0<\/a><\/li>","53","          <\/ul>","54","          <h2>${%plugin.dependencies}<\/h2>"],"delete":["36","          <p>${%dependencies}<\/p>","48","          <p>${%plugin.dependencies}<\/p>"]}],"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/setupWizardFirstUser.jelly":[{"add":["5","","7","","8","    <link rel=\"stylesheet\" href=\"${resURL}\/css\/google-fonts\/roboto\/css\/roboto.css\" type=\"text\/css\" \/>","9","","11",""],"delete":["7","      @import url(https:\/\/maxcdn.bootstrapcdn.com\/font-awesome\/4.4.0\/css\/font-awesome.min.css);","8","      @import url(https:\/\/fonts.googleapis.com\/css?family=Roboto:400,300,500,900,700);","9","      "]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.woff":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.woff":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.woff":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.woff":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.ttf":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/icomoon\/fonts\/icomoon.eot":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.svg":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.eot":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.svg":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.svg":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.ttf":[{"add":[],"delete":[]}],"war\/src\/main\/less\/pluginSetupWizard.less":[{"add":["0","@import (css) '..\/css\/font-awesome\/css\/font-awesome.min.css';","1","@import (css) '..\/css\/icomoon\/css\/icomoon.css';","2","@import (css) '..\/css\/google-fonts\/roboto\/css\/roboto.css';"],"delete":["0","@import (css) 'https:\/\/maxcdn.bootstrapcdn.com\/font-awesome\/4.4.0\/css\/font-awesome.min.css';","1","@import (css) '..\/css\/icons\/icomoon.css';","2","@import url(https:\/\/fonts.googleapis.com\/css?family=Roboto:400,300,500,900,700);","3",""]}],"war\/src\/main\/webapp\/css\/font-awesome\/fonts\/LICENSE.txt":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.ttf":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/icomoon\/fonts\/icomoon.ttf":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/icomoon\/css\/icomoon.css":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/font-awesome\/css\/LICENSE.txt":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.eot":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.eot":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.ttf":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.svg":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.eot":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.eot":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.eot":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/icomoon\/fonts\/icomoon.svg":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/icomoon\/fonts\/icomoon.woff":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-700.woff2":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/AboutJenkins\/index.properties":[{"add":["25","dependencies=Jenkins depends on the following 3rd party libraries","26","plugin.dependencies=License and dependency information for plugins","27","static.dependencies=Static resources"],"delete":["25","dependencies=Jenkins depends on the following 3rd party libraries.","26","plugin.dependencies=License and dependency information for plugins:"]}],"war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.woff2":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.svg":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-900.woff2":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.ttf":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/css\/roboto.css":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/font-awesome\/css\/font-awesome.min.css":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.ttf":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/font-awesome\/css\/font-awesome.css":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.svg":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-regular.woff2":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/LICENSE.txt":[{"add":[],"delete":[]}],"\/dev\/null":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/font-awesome\/fonts\/FontAwesome.otf":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-500.woff2":[{"add":[],"delete":[]}],"war\/package.json":[{"add":["19","    \"gulp-jshint\": \"^2.0.0\",","20","    \"gulp-less\": \"^3.1.0\""],"delete":["19","    \"gulp-jshint\": \"^2.0.0\""]}],"war\/src\/main\/webapp\/css\/font-awesome\/fonts\/fontawesome-webfont.woff":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/css\/google-fonts\/roboto\/fonts\/roboto-v15-greek_latin-ext_latin_vietnamese_cyrillic_greek-ext_cyrillic-ext-300.woff2":[{"add":[],"delete":[]}],"war\/pom.xml":[{"add":["44","    <npm.version>3.8.9<\/npm.version>"],"delete":["44","    <npm.version>2.13.1<\/npm.version>"]}]}},"b02071a441c643073f56d8a817b04c24227216b8":{"changes":{"core\/src\/main\/java\/jenkins\/model\/ArtifactManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/ArtifactManager.java":[{"add":["35","import javax.annotation.Nonnull;","50","    public abstract void onLoad(@Nonnull Run<?,?> build);"],"delete":["49","    public abstract void onLoad(Run<?,?> build);"]}]}},"b6b7bfd27c9b5551fde04416ee9b7b5faf16ad99":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":"MODIFY","core\/src\/test\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMapTest.java":"MODIFY","core\/src\/test\/java\/jenkins\/model\/lazy\/FakeMap.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":[{"add":["511","            R r = getById(idOnDisk.get(hi-1));"],"delete":["511","            R r = load(idOnDisk.get(hi-1), null);"]}],"core\/src\/test\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMapTest.java":[{"add":["151","    @Bug(19418)","164","    @Bug(22681)","165","    @Test public void exactSearchShouldNotReload() throws Exception {","166","        FakeMap m = localBuilder.add(1, \"A\").add(2, \"B\").make();","167","        assertNull(m.search(0, Direction.EXACT));","168","        Build a = m.search(1, Direction.EXACT);","169","        a.asserts(1, \"A\");","170","        Build b = m.search(2, Direction.EXACT);","171","        b.asserts(2, \"B\");","172","        assertNull(m.search(0, Direction.EXACT));","173","        assertSame(a, m.search(1, Direction.EXACT));","174","        assertSame(b, m.search(2, Direction.EXACT));","175","        assertNull(m.search(3, Direction.EXACT));","176","        assertNull(m.search(0, Direction.EXACT));","177","        assertSame(a, m.search(1, Direction.EXACT));","178","        assertSame(\"#2 should not have been reloaded by searching for #3\", b, m.search(2, Direction.EXACT));","179","        assertNull(m.search(3, Direction.EXACT));","180","    }","181",""],"delete":[]}],"core\/src\/test\/java\/jenkins\/model\/lazy\/FakeMap.java":[{"add":["84","","85","    @Override public String toString() {","86","        return \"Build #\" + n + \" [\" + id + \"] @\" + hashCode();","87","    }","88",""],"delete":[]}],"changelog.html":[{"add":["69","    Under certain conditions, a running build could mistakenly be shown as completed (and failed), while still producing output.","70","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-22681\">issue 22681<\/a>)","71","  <li class=bug>"],"delete":[]}]}},"aa677ed8486559433ff71a50cf4f5bbf8fc46cd8":{"changes":{"core\/src\/main\/java\/hudson\/model\/CauseAction.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/CauseAction.java":[{"add":["103","            if (c != null) {","104","                Integer i = result.get(c);","105","                result.put(c, i == null ? 1 : i.intValue() + 1);","106","            }","124","                if (c != null)","125","                    c.onLoad(b);","137","                if (c != null)","138","                    c.onAddedTo(b);"],"delete":["103","            Integer i = result.get(c);","104","            result.put(c, i == null ? 1 : i.intValue() + 1);","122","                c.onLoad(b);","134","                c.onAddedTo(b);"]}]}},"8b2617b6e6a31d5aade99bccb03f4760400ce203":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Mailer.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Mailer\/config.properties":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Mailer.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi,","4"," * Bruce Chapman, Erik Ramfelt, Jean-Baptiste Quenot, Luca Domenico Milanesio","26","import hudson.EnvVars;","28","import hudson.Functions;","29","import hudson.Launcher;","103","    public boolean perform(AbstractBuild<?,?> build, Launcher launcher, BuildListener listener) throws IOException, InterruptedException {","106","        \/\/ substitute build parameters","107","        EnvVars env = build.getEnvironment(listener);","108","        String recip = env.expand(recipients);","109","","110","        return new MailSender(recip, dontNotifyEveryUnstableBuild, sendToIndividuals, descriptor().getCharset()) {"],"delete":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Bruce Chapman, Erik Ramfelt, Jean-Baptiste Quenot, Luca Domenico Milanesio","25","import hudson.Launcher;","26","import hudson.Functions;","35","import hudson.model.ParametersAction;","44","import org.kohsuke.accmod.restrictions.DoNotUse;","103","    public boolean perform(AbstractBuild<?,?> build, Launcher launcher, BuildListener listener) throws InterruptedException {","106","        \/\/ substitute build parameters if available","107","        ParametersAction parameters = build.getAction(ParametersAction.class);","108","        if (parameters!=null)","109","            recipients = parameters.substitute(build, recipients);","110","            ","111","        return new MailSender(recipients,dontNotifyEveryUnstableBuild,sendToIndividuals, descriptor().getCharset()) {"]}],"core\/src\/main\/resources\/hudson\/tasks\/Mailer\/config.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi","22","description=Whitespace-separated list of recipient addresses. May reference build \\","23","   parameters like <tt>$PARAM<\/tt>. \\","24","   E-mail will be sent when a build fails, becomes unstable or returns to stable."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","22","description=Whitespace-separated list of recipient addresses. E-mail will be sent when a build fails."]}]}},"f082765029b390479c1251c45ec593dd0dbdb0fc":{"changes":{"debian\/debian\/jenkins.init":"MODIFY"},"diff":{"debian\/debian\/jenkins.init":[{"add":["30","if [ ! -x \"$DAEMON\" ]; then","31","    echo \"daemon package not installed\" >&2","32","    exit 0","33","fi","36","if [ \"$RUN_STANDALONE\" = \"false\" ]; then","37","    echo \"Not configured to run standalone\" >&2","38","    exit 0","39","fi"],"delete":["30","[ -x \"$DAEMON\" ] || (echo \"daemon package not installed\" && exit 0)","33","[ \"$RUN_STANDALONE\" = \"false\" ] && echo \"Not configured to run standalone\" && exit 0"]}]}},"8fe67f724ce76c189db4f87b7bc998144c4776e9":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["132","      <version>2.6<\/version>"],"delete":["132","      <version>2.5<\/version>"]}]}},"4204d22496a77c2ccc0bb9f959592a01e27fb54d":{"changes":{"core\/src\/test\/java\/hudson\/EnvVarsTest.java":"MODIFY","core\/src\/main\/java\/hudson\/EnvVars.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/EnvVarsTest.java":[{"add":["25","import hudson.EnvVars.OverrideOrderCalculator;","28","import java.util.Arrays;","30","import java.util.Iterator;","31","import java.util.List;","32","import java.util.Map;","46","    ","47","    public void testOverrideExpandingAll() throws Exception {","48","        EnvVars env = new EnvVars();","49","        env.put(\"PATH\", \"orig\");","50","        env.put(\"A\", \"Value1\");","51","        ","52","        EnvVars overrides = new EnvVars();","53","        overrides.put(\"PATH\", \"append\" + Platform.current().pathSeparator + \"${PATH}\");","54","        overrides.put(\"B\", \"${A}Value2\");","55","        overrides.put(\"C\", \"${B}${D}\");","56","        overrides.put(\"D\", \"${E}\");","57","        overrides.put(\"E\", \"Value3\");","58","        overrides.put(\"PATH+TEST\", \"another\");","59","        ","60","        env.overrideExpandingAll(overrides);","61","        ","62","        assertEquals(\"Value1Value2Value3\", env.get(\"C\"));","63","        assertEquals(\"another\" + Platform.current().pathSeparator + \"append\" + Platform.current().pathSeparator + \"orig\", env.get(\"PATH\"));","64","    }","65","    ","66","    public void testOverrideOrderCalculatorSimple() {","67","        EnvVars env = new EnvVars();","68","        EnvVars overrides = new EnvVars();","69","        overrides.put(\"A\", \"NoReference\");","70","        overrides.put(\"A+B\", \"NoReference\");","71","        overrides.put(\"B\", \"Refer1${A}\");","72","        overrides.put(\"C\", \"Refer2${B}\");","73","        overrides.put(\"D\", \"Refer3${B}${Nosuch}\");","74","        ","75","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides);","76","        assertEquals(0, calc.getRefereeNum(\"A\"));","77","        assertEquals(0, calc.getRefereeNum(\"A+B\"));","78","        assertEquals(0, calc.getRefereeNum(\"Nosuch\"));","79","        assertEquals(1, calc.getRefereeNum(\"B\"));","80","        assertEquals(2, calc.getRefereeNum(\"C\"));","81","        assertEquals(3, calc.getRefereeNum(\"D\"));","82","        ","83","        List<Map.Entry<String,String>> order = calc.getOrderedVariables();","84","        assertEquals(5, order.size());","85","        assertEquals(\"A\", order.get(0).getKey());","86","        assertEquals(\"B\", order.get(1).getKey());","87","        assertEquals(\"C\", order.get(2).getKey());","88","        assertEquals(\"D\", order.get(3).getKey());","89","        assertEquals(\"A+B\", order.get(4).getKey());","90","    }","91","    ","92","    public void testOverrideOrderCalculatorInOrder() {","93","        EnvVars env = new EnvVars();","94","        EnvVars overrides = new EnvVars();","95","        overrides.put(\"A\", \"NoReference\");","96","        overrides.put(\"B\", \"${A}\");","97","        overrides.put(\"C\", \"${B}\"); \/\/ refers A, B","98","        overrides.put(\"D\", \"${E}\"); \/\/ refers A, B, C, E","99","        overrides.put(\"E\", \"${C}\"); \/\/ refers A, B, C","100","        ","101","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides) {","102","            @Override","103","            protected Iterator<String> rawKeyIterator() {","104","                \/\/ should process in this order.","105","                return Arrays.asList(\"A\", \"B\", \"C\", \"D\", \"E\", \"F\").iterator();","106","            }","107","        };","108","        assertEquals(0, calc.getRefereeNum(\"A\"));","109","        assertEquals(1, calc.getRefereeNum(\"B\"));","110","        assertEquals(2, calc.getRefereeNum(\"C\"));","111","        assertEquals(4, calc.getRefereeNum(\"D\"));","112","        assertEquals(3, calc.getRefereeNum(\"E\"));","113","    }","114","    ","115","    public void testOverrideOrderCalculatorMultiple() {","116","        EnvVars env = new EnvVars();","117","        EnvVars overrides = new EnvVars();","118","        overrides.put(\"A\", \"Noreference\");","119","        overrides.put(\"B\", \"${A}\");","120","        overrides.put(\"C\", \"${A}${B}\");","121","        ","122","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides);","123","        assertEquals(0, calc.getRefereeNum(\"A\"));","124","        assertEquals(1, calc.getRefereeNum(\"B\"));","125","        assertEquals(2, calc.getRefereeNum(\"C\"));","126","    }","127","    ","128","    public void testOverrideOrderCalculatorSelfReference() {","129","        EnvVars env = new EnvVars();","130","        EnvVars overrides = new EnvVars();","131","        overrides.put(\"PATH\", \"some;${PATH}\");","132","        ","133","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides);","134","        assertEquals(1, calc.getRefereeNum(\"PATH\"));","135","    }","136","    ","137","    public void testOverrideOrderCalculatorCyclic() {","138","        EnvVars env = new EnvVars();","139","        EnvVars overrides = new EnvVars();","140","        overrides.put(\"A\", \"${B}\");","141","        overrides.put(\"B\", \"${C}\");","142","        overrides.put(\"C\", \"${A}\");","143","        ","144","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides);","145","        assertEquals(3, calc.getRefereeNum(\"A\"));","146","        assertEquals(3, calc.getRefereeNum(\"B\"));","147","        assertEquals(3, calc.getRefereeNum(\"C\"));","148","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/EnvVars.java":[{"add":["28","import hudson.util.VariableResolver;","32","import java.util.ArrayList;","33","import java.util.Collections;","34","import java.util.Comparator;","35","import java.util.Iterator;","36","import java.util.List;","38","import java.util.Set;","41","import java.util.TreeSet;","159","     * Calculates the order to override variables.","160","     * ","161","     * We should override variables in a following order:","162","     * <ol>","163","     *   <li>variables that does not contain variable expressions.<\/li>","164","     *   <li>variables that refers variables overridden in 1.<\/li>","165","     *   <li>variables that refers variables overridden in 2.<\/li>","166","     *   <li>...<\/li>","167","     *   <li>(last) variables contains '+' (as PATH+MAVEN)<\/li>","168","     * <\/ol>","169","     * ","170","     * This class orders variables in a following way:","171","     * <ol>","172","     *   <li>scan each overriding variables and list all referred variables (includes indirect references).<\/li>","173","     *   <li>sort variables with a number of referring variables (ascending order).<\/li>","174","     * <\/ol>","175","     *\/","176","    public static class OverrideOrderCalculator {","177","        \/**","178","         * Extract variables referred directly from a variable.","179","         *\/","180","        private static class TraceResolver implements VariableResolver<String> {","181","            private final Comparator<? super String> comparator;","182","            public Set<String> referredVariables;","183","            ","184","            public TraceResolver(Comparator<? super String> comparator) {","185","                this.comparator = comparator;","186","                clear();","187","            }","188","            ","189","            public void clear() {","190","                referredVariables = new TreeSet<String>(comparator);","191","            }","192","            ","193","            public String resolve(String name) {","194","                referredVariables.add(name);","195","                return \"\";","196","            }","197","        }","198","        ","199","        private final Comparator<? super String> comparator;","200","        ","201","        private final Map<String,String> overrides;","202","        \/**","203","         * set of variables that a variable is REFERRING.","204","         * When A=${B}, refereeSetMap.get(\"A\").contains(\"B\").","205","         * Also contains indirect references, when A=${B}, B=${C},","206","         * refereeSetMap.get(\"A\").contains(\"C\").","207","         *\/","208","        private Map<String, Set<String>> refereeSetMap;","209","        ","210","        \/**","211","         * set of variables that a variable is REFERRED BY.","212","         * When A=${B}, referrerSetMap.get(\"B\").contains(\"A\").","213","         * Also contains indirect references, when A=${B}, B=${C},","214","         * referrerSetMap.get(\"C\").contains(\"A\").","215","         *\/","216","        private Map<String, Set<String>> referrerSetMap;","217","        ","218","        public OverrideOrderCalculator(EnvVars target, Map<String,String> overrides) {","219","            comparator = target.comparator();","220","            this.overrides = overrides;","221","            refereeSetMap = new TreeMap<String, Set<String>>(comparator);","222","            referrerSetMap = new TreeMap<String, Set<String>>(comparator);","223","            scan();","224","        }","225","        ","226","        \/**","227","         * Return an iterator for keys of overriding variables.","228","         * ","229","         * Scan variables in this order.","230","         * This is only provided for testing purpose to control scanning order.","231","         * ","232","         * @return an iterator for keys of overriding variables","233","         *\/","234","        protected Iterator<String> rawKeyIterator() {","235","            return overrides.keySet().iterator();","236","        }","237","        ","238","        public Set<String> getRefereeSet(String variable) {","239","            return refereeSetMap.get(variable);","240","        }","241","        ","242","        public int getRefereeNum(String variable) {","243","            if (refereeSetMap.containsKey(variable)) {","244","                return refereeSetMap.get(variable).size();","245","            }","246","            return 0;","247","        }","248","        ","249","        public List<Map.Entry<String,String>> getOrderedVariables() {","250","            List<Map.Entry<String,String>> varList = new ArrayList<Map.Entry<String,String>>(overrides.entrySet());","251","            Collections.sort(varList, new Comparator<Map.Entry<String,String>>() {","252","                @Override","253","                public int compare(Map.Entry<String, String> o1, Map.Entry<String, String> o2) {","254","                    String key1 = o1.getKey();","255","                    String key2 = o2.getKey();","256","                    if (key1.indexOf('+') > -1) {","257","                        if (key2.indexOf('+') > -1) {","258","                            \/\/ ABC+FOO == XYZ+BAR","259","                            return 0;","260","                        }","261","                        \/\/ ABC+FOO > BAR","262","                        return 1;","263","                    }","264","                    ","265","                    if (key2.indexOf('+') > -1) {","266","                        \/\/ FOO < ABC+BAR","267","                        return -1;","268","                    }","269","                    ","270","                    \/\/ depends on the number of variables each variable refers.","271","                    return getRefereeNum(key1) - getRefereeNum(key2);","272","                }","273","            });","274","            return varList;","275","        }","276","        ","277","        \/**","278","         * Scan all variables and list all referring variables.","279","         *\/","280","        public void scan() {","281","            TraceResolver resolver = new TraceResolver(comparator);","282","            ","283","            Iterator<String> referrerIterator  = rawKeyIterator();","284","            while (referrerIterator.hasNext()) {","285","                String currentVar = referrerIterator.next();","286","                if (currentVar.indexOf('+') > 0) {","287","                    \/\/ XYZ+AAA variables should be always processed in last.","288","                    continue;","289","                }","290","                resolver.clear();","291","                Util.replaceMacro(overrides.get(currentVar), resolver);","292","                ","293","                \/\/ Variables directly referred from the current scanning variable.","294","                Set<String> refereeSet = resolver.referredVariables;","295","                ","296","                if (refereeSet.isEmpty()) {","297","                    \/\/ nothing to do if this variables does not refer other variables.","298","                    continue;","299","                }","300","                ","301","                \/\/ Find indirect referred variables:","302","                \/\/   A=${B}","303","                \/\/   CurrentVar=${A}","304","                \/\/   -> CurrentVar refers B.","305","                Set<String> indirectRefereeSet = new TreeSet<String>(comparator);","306","                for (String referee: refereeSet) {","307","                    if (refereeSetMap.containsKey(referee)) {","308","                        indirectRefereeSet.addAll(refereeSetMap.get(referee));","309","                    }","310","                }","311","                ","312","                \/\/ now contains variables referred both directly and indirectly.","313","                refereeSet.addAll(indirectRefereeSet);","314","                ","315","                \/\/ Variables refers the current scanning variable.","316","                \/\/ this contains both direct and indirect reference.","317","                Set<String> referrerSet = referrerSetMap.get(currentVar);","318","                ","319","                \/\/ what I have to do:","320","                \/\/ 1. Create a link between the current scanning variable and referred variables.","321","                \/\/     1-a. register the current variable as a referrer of referred variables.","322","                \/\/     1-b. register referred variables as a referee of the current variable.","323","                \/\/ 2. Create links between referring variables and referred variables.","324","                \/\/     2-a. register referring variables as referrers of referred variables.","325","                \/\/     2-b. register referred variables as referees of referring variables.","326","                \/\/ ","327","                \/\/ Links between referring variables and the current scanning variable","328","                \/\/ is already created from referring variables.","329","                for (String referee: refereeSet) {","330","                    if (!referrerSetMap.containsKey(referee)) {","331","                        referrerSetMap.put(referee, new TreeSet<String>(comparator));","332","                    }","333","                    \/\/ 1-a. register the current variable as a referrer of referred variables.","334","                    referrerSetMap.get(referee).add(currentVar);","335","                    \/\/ 2-b. register referred variables as referees of referring variables.","336","                    if (referrerSet != null) {","337","                        referrerSetMap.get(referee).addAll(referrerSet);","338","                    }","339","                }","340","                ","341","                if (!refereeSetMap.containsKey(currentVar)) {","342","                    refereeSetMap.put(currentVar, new TreeSet<String>(comparator));","343","                }","344","                \/\/ 1-b. register referred variables as a referee of the current variable.","345","                refereeSetMap.get(currentVar).addAll(refereeSet);","346","                ","347","                if (referrerSet != null) {","348","                    for (String referer: referrerSet) {","349","                        \/\/ 2-b. register referred variables as referees of referring variables.","350","                        \/\/ For referrer refers the current scanning variable,","351","                        \/\/ refereeSetMap.get(referer) always exists.","352","                        refereeSetMap.get(referer).addAll(refereeSet);","353","                    }","354","                }","355","            }","356","        }","357","    }","358","    ","359","","360","    \/**","361","     * Overrides all values in the map by the given map. Expressions in values will be expanded.","362","     * See {@link #override(String, String)}.","363","     * @return this","364","     *\/","365","    public EnvVars overrideExpandingAll(Map<String,String> all) {","366","        for (Map.Entry<String, String> e : new OverrideOrderCalculator(this, all).getOrderedVariables()) {","367","            override(e.getKey(), expand(e.getValue()));","368","        }","369","        return this;","370","    }","371","","372","    \/**"],"delete":[]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["1089","        m.overrideExpandingAll(overrides);"],"delete":["1089","        \/\/ first add all new values and then eventually expand them as values can refer other newly added values (see JENKINS-19488)","1090","        for (Map.Entry<String,String> o : overrides.entrySet())","1091","            if(m.get(o.getKey()) == null)","1092","                m.put(o.getKey(), o.getValue());","1093","        for (Map.Entry<String,String> o : overrides.entrySet()) ","1094","            m.override(o.getKey(),m.expand(o.getValue()));"]}]}},"43ca4c86d23772e6b6d999dea7bcc61d21c8078a":{"changes":{"maven-plugin\/src\/main\/resources\/hudson\/maven\/MavenModuleSet\/configure-entries.jelly":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":"MODIFY","maven-plugin\/src\/main\/webapp\/archivingDisabled.html":"ADD","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifact.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuildProxy.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/resources\/hudson\/maven\/MavenModuleSet\/configure-entries.jelly":[{"add":["82","      <f:optionalBlock name=\"maven.archivingDisabled\"","83","                       title=\"${%Disable automatic artifact archiving}\"","84","                       help=\"\/plugin\/maven-plugin\/archivingDisabled.html\"","85","                       checked=\"${it.isArchivingDisabled()}\" \/>"],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":[{"add":["143","     * If true, do not archive artifacts to the master.","144","     *\/","145","    private boolean archivingDisabled = false;","146","","147","    \/**","297","    public boolean isArchivingDisabled() {","298","        return archivingDisabled;","299","    }","300","","317","    public void setIsArchivingDisabled(boolean archivingDisabled) {","318","        this.archivingDisabled = archivingDisabled;","319","    }","320","","686","        archivingDisabled = req.hasParameter(\"maven.archivingDisabled\");","687","        "],"delete":["673",""]}],"maven-plugin\/src\/main\/webapp\/archivingDisabled.html":[{"add":[],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["366","        public boolean isArchivingDisabled() {","367","            return MavenBuild.this.getParent().getParent().isArchivingDisabled();","368","        }","369","        "],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifact.java":[{"add":["26","import hudson.Util;","39","import java.io.FileInputStream;","88","    \/**","89","     * The md5sum for this artifact.","90","     *\/","91","    public final String md5sum;","92","    ","93","    public MavenArtifact(Artifact a) throws IOException {","101","        this.md5sum = Util.getDigestOf(new FileInputStream(a.getFile()));","111","    public MavenArtifact(String groupId, String artifactId, String version, String classifier, String type, String fileName, String md5sum) {","119","        this.md5sum = md5sum;","126","    public static MavenArtifact create(Artifact a) throws IOException {","191","        if (build.isArchivingDisabled()) {","192","            listener.getLogger().println(\"[HUDSON] Archiving disabled - not archiving \" + file);","194","        else {","195","            FilePath target = getArtifactArchivePath(build,groupId,artifactId,version);","196","            FilePath origin = new FilePath(file);","197","            if (!target.exists()) {","198","                listener.getLogger().println(\"[HUDSON] Archiving \"+ file+\" to \"+target);","199","                origin.copyTo(target);","200","            } else if (!origin.digest().equals(target.digest())) {","201","                listener.getLogger().println(\"[HUDSON] Re-archiving \"+file);","202","                origin.copyTo(target);","203","            } else {","204","                LOGGER.fine(\"Not actually archiving \"+origin+\" due to digest match\");","205","            }","245","            if(!target.exists())","246","                throw new AssertionError(\"Just copied \"+file+\" to \"+target+\" but now I can't find it\");","247","        }","254","        FingerprintMap map = Hudson.getInstance().getFingerprintMap();","255","        map.getOrCreate(build,fileName,md5sum);"],"delete":["86","    public MavenArtifact(Artifact a) {","94","","104","    public MavenArtifact(String groupId, String artifactId, String version, String classifier, String type, String fileName) {","118","    public static MavenArtifact create(Artifact a) {","183","        FilePath target = getArtifactArchivePath(build,groupId,artifactId,version);","184","        FilePath origin = new FilePath(file);","185","        if (!target.exists()) {","186","            listener.getLogger().println(\"[HUDSON] Archiving \"+ file+\" to \"+target);","187","            origin.copyTo(target);","188","        } else if (!origin.digest().equals(target.digest())) {","189","            listener.getLogger().println(\"[HUDSON] Re-archiving \"+file);","190","            origin.copyTo(target);","191","        } else {","192","            LOGGER.fine(\"Not actually archiving \"+origin+\" due to digest match\");","233","        if(!target.exists())","234","            throw new AssertionError(\"Just copied \"+file+\" to \"+target+\" but now I can't find it\");","241","        try {","242","            FingerprintMap map = Hudson.getInstance().getFingerprintMap();","243","            map.getOrCreate(build,fileName,new FilePath(getFile(build)).digest());","244","        } catch (InterruptedException e) {","245","            throw new AssertionError(); \/\/ this runs on the master, so this is impossible","246","        }"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":[{"add":["35","import hudson.Util;","42","import java.io.FileInputStream;","106","                                                                pom.getGroupId(), pom.getArtifactId(), pom.getVersion(), null, \"pom\", pom.getFile().getName(), Util.getDigestOf(new FileInputStream(pom.getFile())));","148","            if (build.isArchivingDisabled()) {","149","                listener.getLogger().println(\"[HUDSON] Archiving disabled - not archiving \" + assembly);","150","            }","151","            else {","152","                FilePath target = build.getArtifactsDir().child(assembly.getName());","153","                listener.getLogger().println(\"[HUDSON] Archiving \"+ assembly+\" to \"+target);","154","                new FilePath(assembly).copyTo(target);","155","                \/\/ TODO: fingerprint","156","            }"],"delete":["104","                pom.getGroupId(), pom.getArtifactId(), pom.getVersion(), null, \"pom\", pom.getFile().getName());","146","            FilePath target = build.getArtifactsDir().child(assembly.getName());","147","            listener.getLogger().println(\"[HUDSON] Archiving \"+ assembly+\" to \"+target);","148","            new FilePath(assembly).copyTo(target);","149","            \/\/ TODO: fingerprint"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuildProxy.java":[{"add":["116","     * If true, artifacts will not actually be archived to master. Calls {@link MavenModuleSet#isArchivingDisabled()}.","117","     *\/","118","    boolean isArchivingDisabled();","119","    ","120","    \/**","208","        public boolean isArchivingDisabled() {","209","            return core.isArchivingDisabled();","210","        }","211","        "],"delete":[]}]}},"5f3f3e04c9f060c75927df3f74cccc468b63f909":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/iconSize_lt.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize.jelly":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_es.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_ko.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_ru.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_es_ES.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_it.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_zh_CN.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_zh_TW.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_tr.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_ja.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_sv_SE.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_fr.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_nl.properties":"ADD","\/dev\/null":"DELETE","core\/src\/main\/resources\/lib\/hudson\/iconSize_nb_NO.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/projectView.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/People\/index.jelly":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/iconSize_de.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_fi.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/iconSize_pt_BR.properties":"ADD","core\/src\/main\/resources\/lib\/hudson\/rssBar-with-iconSize.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/iconSize_lt.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_es.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_ko.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_ru.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_es_ES.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_it.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_zh_CN.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_zh_TW.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_tr.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_ja.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_sv_SE.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_fr.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_nl.properties":[{"add":[],"delete":[]}],"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_nb_NO.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/projectView.jelly":[{"add":["79","      <t:iconSize><t:rssBar\/><\/t:iconSize>"],"delete":["79","      <t:rssBar-with-iconSize\/>"]}],"core\/src\/main\/resources\/hudson\/model\/View\/People\/index.jelly":[{"add":["25","  <l:layout title=\"People - ${it.parent.viewName}\">","26","    <st:include page=\"sidepanel.jelly\" it=\"${it.parent}\" \/>","27","    <t:setIconSize\/>","28","    <l:main-panel>","38","            <td><a href=\"${rootURL}\/${p.user.url}\/\"><img src=\"${imagesURL}\/${iconSize}\/user.gif\"","39","                 alt=\"\"\/><\/a><\/td>","46","      <t:iconSize\/>","48","  <\/l:layout>"],"delete":["25","\t<l:layout title=\"People - ${it.parent.viewName}\">","26","\t\t<st:include page=\"sidepanel.jelly\" it=\"${it.parent}\" \/>","27","\t\t<l:main-panel>","37","            <td><a href=\"${rootURL}\/${p.user.url}\/\"><img src=\"${imagesURL}\/32x32\/user.gif\" alt=\"\"\/><\/a><\/td>","45","\t<\/l:layout>"]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_de.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_fi.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/iconSize_pt_BR.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/rssBar-with-iconSize.jelly":[{"add":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi","24","<!-- Deprecated since 1.345: use <t:iconSize><t:rssBar\/><\/t:iconSize> -->","25","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\">","26","  <t:iconSize><t:rssBar\/><\/t:iconSize>","27","<\/j:jelly>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","24","<j:jelly xmlns:j=\"jelly:core\" xmlns:x=\"jelly:xml\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:f=\"\/lib\/form\">","25","  <table style=\"width:100%\">","26","    <tr>","27","      <d:taglib uri=\"local\">","28","        <d:tag name=\"iconSizeLink\">","29","          <st:nbsp\/>","30","          <j:choose>","31","            <j:when test=\"${sz==iconSize}\">","32","              ${title}","33","            <\/j:when>","34","            <j:otherwise>","35","              <a href=\"${rootURL}\/iconSize?${sz}\">${title}<\/a>","36","            <\/j:otherwise>","37","          <\/j:choose>","38","        <\/d:tag>","39","      <\/d:taglib>","40","","41","      <td xmlns:local=\"local\">${%Icon}:","42","        <local:iconSizeLink title=\"S\" sz=\"16x16\" \/>","43","        <local:iconSizeLink title=\"M\" sz=\"24x24\" \/>","44","        <local:iconSizeLink title=\"L\" sz=\"32x32\" \/>","45","      <\/td><td>","46","        <t:rssBar \/>","47","      <\/td>","48","    <\/tr>","49","  <\/table>","50","<\/j:jelly>"]}]}},"58ba65cacf743ed070ef0b63ea06521bef5e22d4":{"changes":{"war\/src\/main\/js\/api\/pluginManager.js":"MODIFY","war\/src\/main\/js\/templates\/setupCompletePanel.hbs":"MODIFY","war\/src\/test\/js\/pluginSetupWizard-spec.js":"MODIFY","war\/src\/main\/js\/pluginSetupWizardGui.js":"MODIFY","core\/src\/main\/resources\/jenkins\/install\/pluginSetupWizard.properties":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY"},"diff":{"war\/src\/main\/js\/api\/pluginManager.js":[{"add":["192","exports.getRestartStatus = function(handler) {","193","\tjenkins.get('\/setupWizard\/restartStatus', function(response) {"],"delete":["192","exports.isRestartRequired = function(handler) {","193","\tjenkins.get('\/updateCenter\/api\/json?tree=restartRequiredForCompletion', function(response) {"]}],"war\/src\/main\/js\/templates\/setupCompletePanel.hbs":[{"add":["5","\t\t{{#if restartRequired}}","6","\t\t<h1>{{translations.installWizard_installComplete_bannerRestart}}<\/h1>","7","\t\t{{else}}","9","\t\t{{\/if}}","14","\t\t\t{{#if restartSupported}}","15","\t\t\t<p>{{translations.installWizard_installComplete_installComplete_restartRequiredMessage}}<\/p>","16","\t\t\t<button type=\"button\" class=\"btn btn-primary install-done-restart\">","17","\t\t\t\t{{translations.installWizard_installComplete_restartLabel}}","18","\t\t\t<\/button>","19","\t\t\t{{else}}","20","\t\t\t<p>{{translations.installWizard_installComplete_installComplete_restartRequiredNotSupportedMessage}}<\/p>","21","\t\t\t{{\/if}}"],"delete":["10","\t\t<p>{{translations.installWizard_installComplete_message}} {{translations.installWizard_installComplete_restartRequiredMessage}}<\/p>","11","\t\t<button type=\"button\" class=\"btn btn-primary install-done-restart\">","12","\t\t\t{{translations.installWizard_installComplete_restartLabel}}","13","\t\t<\/button>"]}],"war\/src\/test\/js\/pluginSetupWizard-spec.js":[{"add":["317","    it(\"restart required\", function (done) {","318","        var ajaxMappings = {","319","            '\/jenkins\/setupWizard\/restartStatus': {","320","                status: 'ok',","321","                data: {","322","                    restartRequired: true,","323","                    restartSupported: true,","324","                }","325","            },","326","            '\/jenkins\/updateCenter\/installStatus': {","327","                status: 'ok',","328","                data: {","329","                    state: 'INITIAL_SETUP_COMPLETED',","330","                    jobs: [],","331","                }","332","            },","333","        };","334","        test(function($) {","335","            expect($('.install-done').size()).toBe(0);","336","            expect($('.install-done-restart').size()).toBe(1);","337","            done();","338","        }, ajaxMappings);","339","    });","340","","341","    it(\"restart required not supported\", function (done) {","342","        var ajaxMappings = {","343","            '\/jenkins\/setupWizard\/restartStatus': {","344","                status: 'ok',","345","                data: {","346","                    restartRequired: true,","347","                    restartSupported: false,","348","                }","349","            },","350","            '\/jenkins\/updateCenter\/installStatus': {","351","                status: 'ok',","352","                data: {","353","                    state: 'INITIAL_SETUP_COMPLETED',","354","                    jobs: [],","355","                }","356","            },","357","        };","358","        test(function($) {","359","            expect($('.install-done').size()).toBe(0);","360","            expect($('.install-done-restart').size()).toBe(0);","361","            done();","362","        }, ajaxMappings);","363","    });","364","","365","    it(\"restart not required\", function (done) {","366","        var ajaxMappings = {","367","            '\/jenkins\/setupWizard\/restartStatus': {","368","                status: 'ok',","369","                data: {","370","                    restartRequired: false,","371","                    restartSupported: false,","372","                }","373","            },","374","            '\/jenkins\/updateCenter\/installStatus': {","375","                status: 'ok',","376","                data: {","377","                    state: 'INITIAL_SETUP_COMPLETED',","378","                    jobs: [],","379","                }","380","            },","381","        };","382","        test(function($) {","383","            expect($('.install-done').size()).toBe(1);","384","            expect($('.install-done-restart').size()).toBe(0);","385","            done();","386","        }, ajaxMappings);","387","    });","388",""],"delete":[]}],"war\/src\/main\/js\/pluginSetupWizardGui.js":[{"add":["423","","424","\tvar showSetupCompletePanel = function(messages) {","425","\t\tpluginManager.getRestartStatus(function(restartStatus) {","426","\t\t\tsetPanel(setupCompletePanel, $.extend(restartStatus, messages));","427","\t\t});","428","\t};","429","","438","\t\tRUNNING: function() { showSetupCompletePanel(); },","439","\t\tINITIAL_SETUP_COMPLETED: function() { showSetupCompletePanel(); },","890","\t\tshowSetupCompletePanel({message: translations.installWizard_firstUserSkippedMessage});","946","\t\t\t\tpluginManager.getRestartStatus(function(restartStatus) {","947","\t\t\t\t\tif(this.isError || restartStatus.restartRequired) {","948","\t\t\t\t\t\tif (this.isError || restartStatus.restartSupported) {","949","\t\t\t\t\t\t\tconsole.log('Waiting...');","950","\t\t\t\t\t\t\tsetTimeout(pingUntilRestarted, 1000);","951","\t\t\t\t\t\t} else if(!restartStatus.restartSupported) {","952","\t\t\t\t\t\t\tthrow new Error(translations.installWizard_error_restartNotSupported);","953","\t\t\t\t\t\t}"],"delete":["423","\t","432","\t\tRUNNING: function() { setPanel(setupCompletePanel); },","433","\t\tINITIAL_SETUP_COMPLETED: function() { setPanel(setupCompletePanel); },","884","\t\tsetPanel(setupCompletePanel, {message: translations.installWizard_firstUserSkippedMessage});","940","\t\t\t\tpluginManager.isRestartRequired(function(isRequired) {","941","\t\t\t\t\tif(this.isError || isRequired) {","942","\t\t\t\t\t\tconsole.log('Waiting...');","943","\t\t\t\t\t\tsetTimeout(pingUntilRestarted, 1000);"]}],"core\/src\/main\/resources\/jenkins\/install\/pluginSetupWizard.properties":[{"add":["18","installWizard_error_restartNotSupported=Restart is not supported, please manually restart this instance","32","installWizard_installComplete_bannerRestart=Jenkins is almost ready!","36","installWizard_installComplete_installComplete_restartRequiredMessage=Your Jenkins setup is complete, but some plugins require Jenkins to be restarted.","37","installWizard_installComplete_installComplete_restartRequiredNotSupportedMessage=Your Jenkins setup is complete, but some plugins require Jenkins to be restarted and it appears this instance does not support an automated restart. Please manually restart your instance now to complete installation."],"delete":["34","installWizard_installComplete_restartRequiredMessage=Some plugins require Jenkins to be restarted."]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["312","     * Returns whether the system needs a restart, and if it is supported","313","     * e.g. { restartRequired: true, restartSupported: false }","314","     *\/","315","    @Restricted(DoNotUse.class) \/\/ WebOnly","316","    public HttpResponse doRestartStatus() throws IOException {","317","        JSONObject response = new JSONObject();","318","        Jenkins jenkins = Jenkins.getInstance();","319","        response.put(\"restartRequired\", jenkins.getUpdateCenter().isRestartRequiredForCompletion());","320","        response.put(\"restartSupported\", jenkins.getLifecycle().canRestart());","321","        return HttpResponses.okJSON(response);","322","    }","323","","324","    \/**"],"delete":[]}]}},"dbb5e443b96ddc7472207862e9e60d807666f72c":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":"MODIFY","core\/src\/test\/java\/hudson\/slaves\/ChannelPingerTest.java":"MODIFY","test\/src\/test\/java\/hudson\/slaves\/PingThreadTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":[{"add":["25","import com.google.common.annotations.VisibleForTesting;","37","import javax.annotation.CheckForNull;","90","        SlaveComputer slaveComputer = null;","91","        if (c instanceof SlaveComputer) {","92","            slaveComputer = (SlaveComputer) c;","93","        }","94","        install(channel, slaveComputer);","98","        install(channel, null);","99","    }","100","","101","    @VisibleForTesting","102","    \/*package*\/ void install(Channel channel, @CheckForNull SlaveComputer c) {","108","        \/\/ set up ping from both directions, so that in case of a router dropping a connection,","109","        \/\/ both sides can notice it and take compensation actions.","114","            LOGGER.log(Level.SEVERE, \"Failed to set up a ping for \" + channel.getName(), e);","117","        setUpPingForChannel(channel, c, pingTimeoutSeconds, pingIntervalSeconds, true);","120","    @VisibleForTesting","121","    \/*package*\/ static class SetUpRemotePing extends MasterToSlaveCallable<Void, IOException> {","135","            setUpPingForChannel(Channel.current(), null, pingTimeoutSeconds, pingIntervalSeconds, false);","177","    @VisibleForTesting","178","    \/*package*\/ static void setUpPingForChannel(final Channel channel, final SlaveComputer computer, int timeoutSeconds, int intervalSeconds, final boolean analysis) {","187","                    boolean inClosed = isInClosed.get();","188","                    \/\/ Disassociate computer channel before closing it","189","                    if (computer != null) {","190","                        Exception exception = cause instanceof Exception ? (Exception) cause: new IOException(cause);","191","                        computer.disconnect(new OfflineCause.ChannelTermination(exception));","192","                    }","193","                    if (inClosed) {","200","            private void analyze(Throwable cause) {","202","                    try {","203","                        pfa.onPingFailure(channel, cause);","204","                    } catch (IOException ex) {","205","                        LOGGER.log(Level.WARNING, \"Ping failure analyzer \" + pfa.getClass().getName() + \" failed for \" + channel.getName(), ex);","206","                    }"],"delete":["88","        install(channel);","101","            LOGGER.severe(\"Failed to set up a ping for \" + channel.getName());","104","        \/\/ set up ping from both directions, so that in case of a router dropping a connection,","105","        \/\/ both sides can notice it and take compensation actions.","106","        setUpPingForChannel(channel, pingTimeoutSeconds, pingIntervalSeconds, true);","109","    static class SetUpRemotePing extends MasterToSlaveCallable<Void, IOException> {","123","            setUpPingForChannel(Channel.current(), pingTimeoutSeconds, pingIntervalSeconds, false);","165","    static void setUpPingForChannel(final Channel channel, int timeoutSeconds, int intervalSeconds, final boolean analysis) {","171","                try {","175","                    if (isInClosed.get()) {","179","                        channel.close(cause);","181","                } catch (IOException e) {","182","                    LOGGER.log(Level.SEVERE,\"Failed to terminate the channel \"+channel.getName(),e);","183","                }","186","            private void analyze(Throwable cause) throws IOException {","188","                    pfa.onPingFailure(channel,cause);"]}],"core\/src\/test\/java\/hudson\/slaves\/ChannelPingerTest.java":[{"add":["61","        channelPinger.install(mockChannel, null);","66","        ChannelPinger.setUpPingForChannel(mockChannel, null, ChannelPinger.PING_TIMEOUT_SECONDS_DEFAULT,","76","        channelPinger.install(mockChannel, null);","80","        ChannelPinger.setUpPingForChannel(mockChannel, null, 42, 73, true);","88","        channelPinger.install(mockChannel, null);","92","        ChannelPinger.setUpPingForChannel(mockChannel, null, ChannelPinger.PING_TIMEOUT_SECONDS_DEFAULT, 420, true);","101","        channelPinger.install(mockChannel, null);","105","        ChannelPinger.setUpPingForChannel(mockChannel, null, ChannelPinger.PING_TIMEOUT_SECONDS_DEFAULT, 73, true);"],"delete":["61","        channelPinger.install(mockChannel);","66","        ChannelPinger.setUpPingForChannel(mockChannel, ChannelPinger.PING_TIMEOUT_SECONDS_DEFAULT,","76","        channelPinger.install(mockChannel);","80","        ChannelPinger.setUpPingForChannel(mockChannel, 42, 73, true);","88","        channelPinger.install(mockChannel);","92","        ChannelPinger.setUpPingForChannel(mockChannel, ChannelPinger.PING_TIMEOUT_SECONDS_DEFAULT, 420, true);","101","        channelPinger.install(mockChannel);","105","        ChannelPinger.setUpPingForChannel(mockChannel, ChannelPinger.PING_TIMEOUT_SECONDS_DEFAULT, 73, true);"]}],"test\/src\/test\/java\/hudson\/slaves\/PingThreadTest.java":[{"add":[],"delete":[]}]}},"f042bf22150e22e59f1ce5b4f68e16e90432d19c":{"changes":{"core\/src\/test\/java\/jenkins\/util\/ResourceBundleUtilTest.java":"MODIFY"},"diff":{"core\/src\/test\/java\/jenkins\/util\/ResourceBundleUtilTest.java":[{"add":["56","        Locale defaultOSLocale = Locale.getDefault();","57","        try {","58","            \/\/Set Default-Locale to english","59","            Locale.setDefault(new Locale(\"en\", \"US\"));","61","            JSONObject bundle = ResourceBundleUtil.getBundle(\"hudson.logging.Messages\", new Locale(\"kok\")); \/\/ konkani","62","            Assert.assertEquals(\"Initialing log recorders\", bundle.getString(\"LogRecorderManager.init\"));","63","        }finally{","64","            Locale.setDefault(defaultOSLocale);","65","        }"],"delete":["56","        JSONObject bundle = ResourceBundleUtil.getBundle(\"hudson.logging.Messages\", new Locale(\"kok\")); \/\/ konkani","57","        Assert.assertEquals(\"Initialing log recorders\", bundle.getString(\"LogRecorderManager.init\"));"]}]}},"f36917c210d52ce7fc1f4bca71c9f1baf11c4647":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["117","      <version>build217-jenkins-10<\/version>"],"delete":["117","      <version>build217-jenkins-9<\/version>"]}]}},"c748d324752b8744d5085633c1c478aa0b3b774e":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["63","  <li class=rfe>","64","    Maven agent needs a fix for the 'hardcoded' socket connection to localhost","65","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-6795\">issue 6795<\/a>)"],"delete":[]}]}},"3396247ea6c8cdb36b411003f37660518dbe87c5":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=rfe>","58","    Can't build using maven 3.1.0","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15935\">issue 15935<\/a>)"],"delete":[]}]}},"a98ccdff0f074b10907ac1b41d3c26bf33e878b0":{"changes":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":[{"add":["242","            String logFile = expectedLocation + \"\\\\jdk.exe.install.log\";","243","","244","","252","                \/\/ see http:\/\/docs.oracle.com\/javase\/1.5.0\/docs\/guide\/deployment\/deployment-guide\/silent.html","255","                        + expectedLocation + \"\\\\\\\" \/L \\\\\\\"\" + logFile + \"\\\\\\\"\\\"\");","262","                args.add(\"ADDLOCAL=\\\"ToolsFeature\\\"\",","263","                        \"REBOOT=ReallySuppress\", \"INSTALLDIR=\" + expectedLocation,","264","                        \"\/L\",  logFile);","719","                return FormValidation.error(Messages.JDKInstaller_DescriptorImpl_doCheckAcceptLicense());"],"delete":["236","            String logFile = jdkBundle+\".install.log\";","252","                        + expectedLocation + \"\\\\\\\" \/L \\\\\\\"\" + expectedLocation","253","                        + \"\\\\jdk.exe.install.log\\\\\\\"\\\"\");","260","                args.add(\"ADDLOCAL=\\\"ToolsFeature\\\"\");","261","","262","                args.add(\"REBOOT=ReallySuppress\", \"INSTALLDIR=\" + expectedLocation,","263","                        \"\/L \\\\\\\"\" + expectedLocation + \"\\\\jdk.exe.install.log\\\\\\\"\");","718","                return FormValidation.error(Messages.JDKInstaller_DescriptorImpl_doCheckAcceptLicense()); "]}]}},"409438f36dc80f20964fb16f8d88041e11ba4ed4":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["181","        <version>2.59<\/version>"],"delete":["181","        <version>2.57<\/version>"]}]}},"75745f00428226d648ccbee899f2970adf51c899":{"changes":{"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/config.jelly":"MODIFY","core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/config.jelly":[{"add":["27","    <f:textarea field=\"scmpoll_spec\" checkUrl=\"'${rootURL}\/trigger\/TimerTrigger\/check?value='+encodeURIComponent(this.value)\"\/>"],"delete":["27","    <f:textarea name=\"scmpoll_spec\" checkUrl=\"'${rootURL}\/trigger\/TimerTrigger\/check?value='+encodeURIComponent(this.value)\" value=\"${instance.spec}\"\/>"]}],"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":[{"add":["78","import org.kohsuke.stapler.DataBoundSetter;","100","","102","    public SCMTrigger(String scmpoll_spec) throws ANTLRException {","103","        super(scmpoll_spec);","104","    }","105","","106","    \/**","107","     * Backwards-compatibility constructor.","108","     *","109","     * @param scmpoll_spec","110","     *     The spec to poll with.","111","     * @param ignorePostCommitHooks","112","     *     Whether to ignore post commit hooks.","113","     *","114","     * @deprecated since 2.21","115","     *\/","116","    @Deprecated","121","","133","    \/**","134","     * Data-bound setter for ignoring post commit hooks.","135","     *","136","     * @param ignorePostCommitHooks","137","     *     True if we should ignore post commit hooks, false otherwise.","138","     *","139","     * @since 2.22","140","     *\/","141","    @DataBoundSetter","142","    public void setIgnorePostCommitHooks(boolean ignorePostCommitHooks) {","143","        this.ignorePostCommitHooks = ignorePostCommitHooks;","144","    }","145","","146","    public String getScmpoll_spec() {","147","        return super.getSpec();","148","    }","149","","209","    @Extension @Symbol(\"pollSCM\")"],"delete":["99","    ","100","    public SCMTrigger(String scmpoll_spec) throws ANTLRException {","101","        this(scmpoll_spec, false);","102","    }","103","    ","109","    ","180","    @Extension @Symbol(\"scm\")"]}]}},"16145cca86134ab77b085569d0de17d136a709f1":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/java\/jenkins\/tools\/GlobalToolConfiguration.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/GlobalSecurityConfiguration.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/MyViewsProperty.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/labels\/LabelAtom.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/RedactSecretJsonInErrorMessageSanitizerHtmlTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ComputerSet.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/TreeView.java":"MODIFY","core\/src\/main\/java\/hudson\/logging\/LogRecorder.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/User.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["117","import org.kohsuke.stapler.verb.POST;","1320","    @POST"],"delete":["1319","    @RequirePOST"]}],"core\/src\/main\/java\/jenkins\/tools\/GlobalToolConfiguration.java":[{"add":["40","import org.kohsuke.stapler.verb.POST;","76","    @POST"],"delete":["40","import org.kohsuke.stapler.interceptor.RequirePOST;","76","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["125","import org.kohsuke.stapler.verb.POST;","988","    @POST"],"delete":["987","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["67","import org.kohsuke.stapler.verb.POST;","380","    @POST"],"delete":["379","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["136","import org.kohsuke.stapler.verb.POST;","2446","    @POST"],"delete":["2445","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/security\/GlobalSecurityConfiguration.java":[{"add":["55","import org.kohsuke.stapler.verb.POST;","94","    @POST"],"delete":["55","import org.kohsuke.stapler.interceptor.RequirePOST;","94","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["91","import org.kohsuke.stapler.verb.POST;","1470","    @POST"],"delete":["1469","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["101","import org.kohsuke.stapler.verb.POST;","1615","    @POST"],"delete":["1614","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/MyViewsProperty.java":[{"add":["56","import org.kohsuke.stapler.verb.POST;","173","    @POST"],"delete":["56","import org.kohsuke.stapler.interceptor.RequirePOST;","173","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/labels\/LabelAtom.java":[{"add":["46","import org.kohsuke.stapler.verb.POST;","202","    @POST"],"delete":["201","    @RequirePOST"]}],"test\/src\/test\/java\/jenkins\/security\/RedactSecretJsonInErrorMessageSanitizerHtmlTest.java":[{"add":["46","import org.kohsuke.stapler.verb.POST;","251","        @POST","277","        @POST"],"delete":["46","import org.kohsuke.stapler.interceptor.RequirePOST;","251","        @RequirePOST","277","        @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/ComputerSet.java":[{"add":["64","import org.kohsuke.stapler.verb.POST;","287","    @POST","345","    @POST"],"delete":["286","    @RequirePOST","344","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/TreeView.java":[{"add":["45","import org.kohsuke.stapler.verb.POST;","111","    @POST"],"delete":["110","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/logging\/LogRecorder.java":[{"add":["60","import org.kohsuke.stapler.verb.POST;","329","    @POST"],"delete":["328","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["127","import org.kohsuke.stapler.verb.POST;","768","    @POST"],"delete":["767","    @RequirePOST"]}],"core\/src\/main\/java\/hudson\/model\/User.java":[{"add":["95","import org.kohsuke.stapler.verb.POST;","819","    @POST"],"delete":["818","    @RequirePOST"]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["73","import org.kohsuke.stapler.verb.POST;","237","    @POST","305","    @POST"],"delete":["236","    @RequirePOST","304","    @RequirePOST"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["245","import org.kohsuke.stapler.verb.POST;","3758","    @POST","3812","    @POST","3963","    @POST","4944","        @POST"],"delete":["3757","    @RequirePOST","3811","    @RequirePOST","3962","    @RequirePOST","4943","        @RequirePOST"]}]}},"e698d1de41d4311bf5f8b1d2c40b591109e696e2":{"changes":{"\/dev\/null":"DELETE","core\/pom.xml":"MODIFY","core\/src\/main\/resources\/windows-service\/jenkins.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"core\/pom.xml":[{"add":["757","                  <version>2.0.2<\/version>"],"delete":["757","                  <version>1.16<\/version>"]}],"core\/src\/main\/resources\/windows-service\/jenkins.xml":[{"add":["3","Copyright (c) 2004-2017, Sun Microsystems, Inc., Kohsuke Kawaguchi, Oleg Nenashev, and other Jenkins contributors","25","  Windows service definition for Jenkins.","33","  <description>This service runs Jenkins automation server.<\/description>","49","  ","50","  <!-- ","51","    In the case WinSW gets terminated and leaks the process, we want to abort","52","    these runaway JAR processes on startup to prevent corruption of JENKINS_HOME.","53","    So this extension is enabled by default.","54","  -->","55","  <extensions>","56","    <!-- This is a sample configuration for the RunawayProcessKiller extension. -->","57","    <extension enabled=\"true\" ","58","               className=\"winsw.Plugins.RunawayProcessKiller.RunawayProcessKillerExtension\"","59","               id=\"killOnStartup\">","60","      <pidfile>%BASE%\\jenkins.pid<\/pidfile>","61","      <stopTimeout>10000<\/stopTimeout>","62","      <stopParentFirst>false<\/stopParentFirst>","63","    <\/extension>","64","  <\/extensions>","65","  ","66","  <!-- See the referenced examples for more options -->","67","  "],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","25","  Windows service definition for Jenkins","33","  <description>This service runs Jenkins continuous integration system.<\/description>"]}],"war\/pom.xml":[{"add":["116","      <version>1.7<\/version>"],"delete":["116","      <version>1.6<\/version>"]}]}},"432d07bfdb97c5707a3a3a4a19f72cbc3b8e24c8":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/sidepanel.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/sidepanel.jelly":[{"add":["44","          <l:task icon=\"images\/24x24\/up.png\" href=\"${rootURL}\/${it.parent.url}\" title=\"${%Up}\" contextMenu=\"false\" \/>"],"delete":["44","          <l:task icon=\"images\/24x24\/up.png\" href=\"${url}\/..\/\" title=\"${%Up}\" contextMenu=\"false\" \/>"]}]}},"1ab11ea121749d41416ac4d0a27ace9f479c886e":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["121","      <version>build-217-jenkins-14<\/version>"],"delete":["121","      <version>build-217-jenkins-11<\/version>"]}]}},"b3166a03c7ea490cf0eacd066d58998609723ee6":{"changes":{"core\/src\/main\/java\/hudson\/model\/DownloadService.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DownloadService.java":[{"add":["66","                if(d.getDue()<now && d.lastAttempt+10*1000<now) {","81","                    d.lastAttempt = now;","113","        private volatile long lastAttempt=Long.MIN_VALUE;"],"delete":["66","                if(d.getDue()<now) {"]}]}},"89ddfc2d8222936e22ba91c0d16ed40c0d679886":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/test\/MetaTabulatedResult\/body.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/test\/MetaTabulatedResult\/body.jelly":[{"add":["75","          <td class=\"pane\" style=\"text-align:right;\" data=\"${f.duration}\">","76","            ${f.durationString}","112","            <td class=\"pane\" style=\"text-align:right\" data=\"${p.failCount-prev.failCount}\">","116","            <td class=\"pane\" style=\"text-align:right\" data=\"${p.skipCount-prev.skipCount}\">","120","            <td class=\"pane\" style=\"text-align:right\" data=\"${p.totalCount-prev.totalCount}\">"],"delete":["75","          <td class=\"pane\" style=\"text-align:right;\">","76","            ${f.duration}","112","            <td class=\"pane\" style=\"text-align:right\">","116","            <td class=\"pane\" style=\"text-align:right\">","120","            <td class=\"pane\" style=\"text-align:right\">"]}],"changelog.html":[{"add":["58","    Sorting \"diff\" in test result requires 2 clicks","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-5460\">issue 5460<\/a>)","60","  <li class=bug>","61","    java.io.IOException: Unexpected termination of the channel - SEVERE: I\/O error in channel Chunked connection when using jenkins-cli.jar (works on older Hudson version)","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11130\">issue 11130<\/a>)","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11551\">issue 11551<\/a>)"],"delete":["58","  java.io.IOException: Unexpected termination of the channel - SEVERE: I\/O error in channel Chunked connection when using jenkins-cli.jar (works on older Hudson version)","59","  (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11130\">issue 11130<\/a>)","62","  (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11551\">issue 11551<\/a>)"]}]}},"5c8cc45900bf8d78058cecd471840bdbc88215d3":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/DumbSlave\/configure-entries.jelly":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["696","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^(\\d+|)$\/,\"Not an integer\"); },","697","    \"INPUT.number-required\" : function(e) { registerRegexpValidator(e,\/^\\-?(\\d+)$\/,\"Not an integer\"); },","698","","699","    \"INPUT.non-negative-number-required\" : function(e) {","702","","704","        registerRegexpValidator(e,\/^(\\d*[1-9]\\d*|)$\/,\"Not a positive integer\");","705","    },","706","    \"INPUT.positive-number-required\" : function(e) {"],"delete":["696","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^\\-?(\\d+)$\/,\"Not an integer\"); },","697","    \"INPUT.non-negative-number\" : function(e) {"]}],"core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":[{"add":["5","    f.number(clazz:\"non-negative-number-required\", min:0, step:1)"],"delete":["5","    f.number(clazz:\"non-negative-number\", min:0, step:1)"]}],"core\/src\/main\/resources\/hudson\/slaves\/DumbSlave\/configure-entries.jelly":[{"add":["35","    <f:number clazz=\"positive-number-required\" min=\"1\" step=\"1\" default=\"1\"\/>"],"delete":["35","    <f:number clazz=\"positive-number\" min=\"1\" step=\"1\" default=\"1\"\/>"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":[{"add":["44","          <f:number clazz=\"non-negative-number-required\" min=\"0\" step=\"1\"\/>"],"delete":["44","          <f:number clazz=\"non-negative-number\" min=\"0\" step=\"1\"\/>"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["69","import org.apache.commons.lang.StringUtils;","1476","        if (StringUtils.isBlank(nExecutors) || Integer.parseInt(nExecutors)<=0) {"],"delete":["1475","        if (Integer.parseInt(nExecutors)<=0) {"]}]}},"3b0b411cdf5f6fa05fbb54c7e7af22986ee90f1b":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/test\/Messages.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/test\/Messages.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Stephen Connolly, id:cactusman","24","AbstractTestResultAction.TestsDescription={0}: {1} {1,choice,0#tests|1#test|1<tests} failing \\","25","  out of a total of {2} {2,choice,1#test|1<tests}."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Stephen Connolly, id:cactusman","24","AbstractTestResultAction.TestsDescription={0}: {1} tests failing out of a total of {2} tests."]}]}},"83822830cf6f74a5663dfcc9acd14b13774739ae":{"changes":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/GetEnvironmentOutsideBuildTest.java":"ADD"},"diff":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":[{"add":["629","    protected String createUniqueProjectName() {"],"delete":["629","    private String createUniqueProjectName() {"]}],"test\/src\/test\/java\/hudson\/model\/GetEnvironmentOutsideBuildTest.java":[{"add":[],"delete":[]}]}},"c3c57c798d3f7ab6bb1dab58d3677841f021a208":{"changes":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["1672","            String from = req.getParameter(\"from\");","1673","            TopLevelItem src = getItem(from);","1675","                rsp.setStatus(SC_BAD_REQUEST);","1676","                if(Util.fixEmpty(from)==null)","1677","                    sendError(\"Specify which job to copy\",req,rsp);","1678","                else","1679","                    sendError(\"No such job: \"+from,req,rsp);"],"delete":["1672","            TopLevelItem src = getItem(req.getParameter(\"from\"));","1674","                rsp.sendError(SC_BAD_REQUEST);"]}]}},"0d4c0cb6b274bfa18c810fcf761e3ad8b27ceb34":{"changes":{"test\/src\/test\/java\/hudson\/util\/ProcessTreeKillerTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/util\/ProcessTreeKillerTest.java":[{"add":["2","import hudson.Functions;","4","import hudson.model.FreeStyleProject;","6","import hudson.tasks.Shell;","7","import org.jvnet.hudson.test.Bug;","35","    @Bug(22641)","36","    public void testProcessProperlyKilledUnix() throws Exception {","37","        ProcessTree.enabled = true;","38","        if (Functions.isWindows()) return; \/\/ This test does not involve windows.","39","","40","        FreeStyleProject sleepProject = createFreeStyleProject();","41","        FreeStyleProject processJob = createFreeStyleProject();","42","","43","        sleepProject.getBuildersList().add(new Shell(\"nohup sleep 100000 &\"));","44","","45","        assertBuildStatusSuccess(sleepProject.scheduleBuild2(0).get());","46","","47","        processJob.getBuildersList().add(new Shell(\"ps -ef | grep sleep\"));","48","","49","        String log = processJob.scheduleBuild2(0).get().getLog();","50","","51","        System.err.println(\"LOGS: \" + log);","52","","53","        assertFalse(\"Did not properly kill task\", log.contains(\"sleep 100000\"));","54","    }","55",""],"delete":["2","import hudson.model.FreeStyleProject;","5","","6","import org.easymock.EasyMock;","9","import org.kohsuke.stapler.StaplerRequest;","10","import org.kohsuke.stapler.StaplerResponse;"]}]}},"df21a13cd6d86c01381bd79f31894e98a79f3e90":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["736","    background-size: 16px 16px;"],"delete":[]}]}},"5b28310d28706bb59bdd67f2a17eb8b697deed5b":{"changes":{"core\/src\/main\/java\/hudson\/model\/Api.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ApiTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Api.java":[{"add":["113","            if (wrapper!=null) {","114","                Element root = DocumentFactory.getInstance().createElement(wrapper);","115","                for (Object o : list) {","116","                    if (o instanceof String) {","117","                        root.addText(o.toString());","118","                    } else {","119","                        root.add(((org.dom4j.Node)o).detach());","120","                    }","121","                }","122","                result = root;","123","            } else if (list.isEmpty()) {","127","            } else if (list.size() > 1) {","128","                rsp.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);","129","                rsp.getWriter().print(Messages.Api_MultipleMatch(xpath,list.size()));","130","                return;","131","            } else {","133","            }"],"delete":["113","            if(list.isEmpty()) {","114","                \/\/ XPath didn't match","118","            }","119","            if(list.size()>1) {","120","                if(wrapper!=null) {","121","                    Element root = DocumentFactory.getInstance().createElement(wrapper);","122","                    for (Object o : list) {","123","                        if(o instanceof String)","124","                            root.addText(o.toString());","125","                        else","126","                            root.add(((org.dom4j.Node)o).detach());","127","                    }","128","                    result = root;","129","                } else {","130","                    \/\/ XPath didn't match","131","                    rsp.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);","132","                    rsp.getWriter().print(Messages.Api_MultipleMatch(xpath,list.size()));","133","                    return;","134","                }","135","            } else"]}],"test\/src\/test\/java\/hudson\/model\/ApiTest.java":[{"add":["25","import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;","26","import com.gargoylesoftware.htmlunit.Page;","34","","39","","40","    @Bug(3267)","41","    public void testWrappedZeroItems() throws Exception {","42","        Page page = new WebClient().goTo(\"api\/xml?wrapper=root&xpath=\/hudson\/nonexistent\", \"application\/xml\");","43","        assertEquals(\"<root\/>\", page.getWebResponse().getContentAsString());","44","    }","45","","46","    @Bug(3267)","47","    public void testWrappedOneItem() throws Exception {","48","        Page page = new WebClient().goTo(\"api\/xml?wrapper=root&xpath=\/hudson\/view\/name\", \"application\/xml\");","49","        assertEquals(\"<root><name>All<\/name><\/root>\", page.getWebResponse().getContentAsString());","50","    }","51","","52","    public void testWrappedMultipleItems() throws Exception {","53","        createFreeStyleProject();","54","        createFreeStyleProject();","55","        Page page = new WebClient().goTo(\"api\/xml?wrapper=root&xpath=\/hudson\/job\/name\", \"application\/xml\");","56","        assertEquals(\"<root><name>test0<\/name><name>test1<\/name><\/root>\", page.getWebResponse().getContentAsString());","57","    }","58","","59","    public void testUnwrappedZeroItems() throws Exception {","60","        try {","61","            new WebClient().goTo(\"api\/xml?xpath=\/hudson\/nonexistent\", \"application\/xml\");","62","        } catch (FailingHttpStatusCodeException x) {","63","            assertEquals(404, x.getStatusCode());","64","        }","65","    }","66","","67","    public void testUnwrappedOneItem() throws Exception {","68","        Page page = new WebClient().goTo(\"api\/xml?xpath=\/hudson\/view\/name\", \"application\/xml\");","69","        assertEquals(\"<name>All<\/name>\", page.getWebResponse().getContentAsString());","70","    }","71","","72","    public void testUnwrappedMultipleItems() throws Exception {","73","        createFreeStyleProject();","74","        createFreeStyleProject();","75","        try {","76","            new WebClient().goTo(\"api\/xml?xpath=\/hudson\/job\/name\", \"application\/xml\");","77","        } catch (FailingHttpStatusCodeException x) {","78","            assertEquals(500, x.getStatusCode());","79","        }","80","    }","81",""],"delete":[]}]}},"8549e7b32debae32827cca4cd6e7aa69858140b0":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/UserAvatarResolver.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["794","                                    userInfo.avatar = UserAvatarResolver.resolveOrNull(user, iconSize);","826","                        userInfo.avatar = UserAvatarResolver.resolveOrNull(u, iconSize);","844","                        accumulate(\"avatar\", i.avatar != null ? i.avatar : Stapler.getCurrentRequest().getContextPath() + Functions.getResourcePath() + \"\/images\/\" + iconSize + \"\/user.png\")."],"delete":["794","                                    userInfo.avatar = UserAvatarResolver.resolve(user, iconSize);","826","                        userInfo.avatar = UserAvatarResolver.resolve(u, iconSize);","844","                        accumulate(\"avatar\", i.avatar)."]}],"core\/src\/main\/java\/hudson\/tasks\/UserAvatarResolver.java":[{"add":["35","import javax.annotation.CheckForNull;","81","     * Resolve an avatar image URL string for the user.","82","     * Note that this method must be called from an HTTP request to be reliable; else use {@link #resolveOrNull}.","88","        String avatar = resolveOrNull(u, avatarSize);","89","        return avatar != null ? avatar : Jenkins.getInstance().getRootUrl() + Functions.getResourcePath() + \"\/images\/\" + avatarSize + \"\/user.png\";","90","    }","92","    \/**","93","     * Like {@link #resolve} but returns null rather than a fallback URL in case there is no special avatar.","94","     * @since 1.518","95","     *\/","96","    public static @CheckForNull String resolveOrNull(User u, String avatarSize) {","109","        return null;"],"delete":["80","     * Resolve an avatar image URL string for the user","99","        return Jenkins.getInstance().getRootUrl() + Functions.getResourcePath() + \"\/images\/\" + avatarSize + \"\/user.png\";"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    User icon in People broken if Jenkins root URL unconfigured.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18118\">issue 18118<\/a>)"],"delete":["57","  <li class=>"]}]}},"48fcab9862e002546a2001ffa5a4584d93e5c831":{"changes":{"test\/src\/test\/resources\/hudson\/model\/UserTest\/shellyUsernameMigrated.zip":"MODIFY","test\/src\/test\/java\/hudson\/model\/UserTest.java":"MODIFY"},"diff":{"test\/src\/test\/resources\/hudson\/model\/UserTest\/shellyUsernameMigrated.zip":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/UserTest.java":[{"add":["825","        user = User.getById(\"make\\u1000000\", false);","826","        assertNotNull(\"we do not prevent accesses to the phony name, alas\", user);","827","        user = User.getById(\"make$1000000\", false);","828","        assertCorrectConfig(user, \"users\/make$00241000000\/config.xml\");","829","        assertFalse(new File(rootDir, \"make$1000000\").exists());","830","        assertTrue(\"but asking for the real name triggers migration\", user.getConfigFile().getFile().exists());","831","        assertThat(user.getFullName(), equalTo(\"Greedy Fella\"));"],"delete":[]}]}},"66ec7029c66cc11b6513a6699880ae6cf0aa58ad":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["91","      <version>4.5-20180827.050220-1<\/version>"],"delete":["91","      <version>4.4<\/version>"]}]}},"ef1ad6ca29c313fa0b4bc6f5dcd8344046221049":{"changes":{"maven-plugin\/pom.xml":"MODIFY","changelog.html":"MODIFY","pom.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"maven-plugin\/pom.xml":[{"add":["330","        <exclusion><!-- jcl-over-slf4j version needs to match with slf4j-api version, which makes this fragile. let's not try to intercept jcl calls -->"],"delete":["49","    <slf4jVersion>1.6.2<\/slf4jVersion> <!-- < 1.6.x version didn't specify the license (MIT) -->","57","  <dependencyManagement>","58","    <dependencies>","59","      <!-- SLF4J is used by wagon-webdav-jackrabbit dep --> ","60","      <dependency>","61","        <groupId>org.slf4j<\/groupId>","62","        <artifactId>slf4j-api<\/artifactId>","63","        <version>${slf4jVersion}<\/version>","64","      <\/dependency>","65","      <dependency>","66","        <groupId>org.slf4j<\/groupId>","67","        <artifactId>slf4j-nop<\/artifactId>","68","        <version>${slf4jVersion}<\/version>","69","      <\/dependency>","70","      <dependency>","71","        <groupId>org.slf4j<\/groupId>","72","        <artifactId>slf4j-jdk14<\/artifactId>","73","        <version>${slf4jVersion}<\/version>","74","      <\/dependency>","75","      <dependency>","76","        <groupId>org.slf4j<\/groupId>","77","        <artifactId>jcl-over-slf4j<\/artifactId>","78","        <version>${slf4jVersion}<\/version>","79","      <\/dependency>","80","    <\/dependencies>","81","  <\/dependencyManagement>","356","        <exclusion><!-- bundling binding creates a problem with app servers that use different versions of slf4j -->"]}],"changelog.html":[{"add":["68","    Bundled slf4j binding to avoid classloader contraint violation in JBoss","69","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12334\">issue 12334<\/a>,","70","     <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12446\">issue 12446<\/a>,","71","     <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12650\">issue 12650<\/a>)","72","  <li class=\"bug\">"],"delete":[]}],"pom.xml":[{"add":["91","    <slf4jVersion>1.6.2<\/slf4jVersion> <!-- < 1.6.x version didn't specify the license (MIT) -->","208","      <!-- SLF4J used in maven-plugin and core -->","209","      <dependency>","210","        <groupId>org.slf4j<\/groupId>","211","        <artifactId>slf4j-api<\/artifactId>","212","        <version>${slf4jVersion}<\/version>","213","      <\/dependency>","214","      <dependency>","215","        <groupId>org.slf4j<\/groupId>","216","        <artifactId>slf4j-nop<\/artifactId>","217","        <version>${slf4jVersion}<\/version>","218","      <\/dependency>","219","      <dependency>","220","        <groupId>org.slf4j<\/groupId>","221","        <artifactId>slf4j-jdk14<\/artifactId>","222","        <version>${slf4jVersion}<\/version>","223","      <\/dependency>","224","      <dependency>","225","        <groupId>org.slf4j<\/groupId>","226","        <artifactId>jcl-over-slf4j<\/artifactId>","227","        <version>${slf4jVersion}<\/version>","228","      <\/dependency>"],"delete":[]}],"war\/pom.xml":[{"add":["119","    <dependency>","120","      <!--","121","        We bundle slf4j binding since we got some components (sshd for example)","122","        that uses slf4j.","123","","124","        The problem with not shipping any binding in the war is that if the","125","        servlet container does use slf4j in itself, then we got a classloader","126","        constraint violation (see JENKINS-12334) as we try to load StaticLoggerBinder","127","        which resides in the binding jar (this jar would be from container implementation,","128","        which relies on slf4j api in the container, when we have our own slf4j API jar","129","        statically depending on the binding jar.)","130","","131","        We also get tickets like JENKINS-12650 for not reporting logs at all","132","        (although this is a non-fatal problem.)","133","","134","        The downside of adding a jar is that we can potentially get \"multiple binding jar\"","135","        warning like http:\/\/www.slf4j.org\/codes.html, but that's at least non-fatal.","136","      -->","137","      <groupId>org.slf4j<\/groupId>","138","      <artifactId>slf4j-jdk14<\/artifactId>","139","    <\/dependency>","140","","143","","144","    <!--dependency"],"delete":["121","    <!--dependency>"]}]}},"a27fd88c5d1e881f886e86e6e56cbe41495fac7d":{"changes":{"core\/src\/main\/resources\/lib\/form\/expandableTextbox.jelly":"MODIFY","test\/src\/test\/java\/lib\/form\/ExpandableTextboxTest.java":"ADD"},"diff":{"core\/src\/main\/resources\/lib\/form\/expandableTextbox.jelly":[{"add":["32","  <j:set var=\"value\" value=\"${h.defaulted(attrs.value,instance[attrs.field])}\" \/>","34","    <j:when test=\"${h.isMultiline(value)}\">","36","      <f:textarea name='${attrs.name}' value=\"${value}\" field=\"${attrs.field}\"\/>","45","                   name =\"${name}\" value=\"${value}\""],"delete":["33","    <j:when test=\"${h.isMultiline(attrs.value)}\">","35","      <f:textarea name='${attrs.name}' value=\"${attrs.value}\" field=\"${attrs.field}\"\/>","44","                   name =\"${name}\"","45","                   value=\"${h.defaulted(attrs.value,instance[attrs.field])}\""]}],"test\/src\/test\/java\/lib\/form\/ExpandableTextboxTest.java":[{"add":[],"delete":[]}]}},"74c943088565a7fa8b58a49ad875007cdd85a0df":{"changes":{"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/configure-entries.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/configure-entries.jelly":[{"add":["100","                <input type=\"button\" value=\"${%Delete}\" class=\"repeatable-delete show-if-not-only\" style=\"margin-left: 1em;\" \/>","120","<\/j:jelly>"],"delete":["100","                <input type=\"button\" value=\"${%Delete}\" class=\"repeatable-delete\" style=\"margin-left: 1em;\" \/>","120","<\/j:jelly>"]}]}},"a1cc3b4f6152d874e912076f2497a91c71e12ccc":{"changes":{"core\/src\/main\/java\/hudson\/model\/DependencyGraph.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DependencyGraph.java":[{"add":["27","import hudson.security.NotSerilizableSecurityContext;","28","import org.acegisecurity.context.SecurityContext;","95","        \/\/ Set full privileges while computing to avoid missing any projects the current user cannot see.","96","        \/\/ Use setContext (NOT getContext().setAuthentication()) so we don't affect concurrent threads for same HttpSession.","97","        SecurityContext saveCtx = SecurityContextHolder.getContext();","99","            NotSerilizableSecurityContext system = new NotSerilizableSecurityContext();","100","            system.setAuthentication(ACL.SYSTEM);","101","            SecurityContextHolder.setContext(system);","110","            SecurityContextHolder.setContext(saveCtx);"],"delete":["27","import org.acegisecurity.Authentication;","94","        \/\/ Set full privileges while computing to avoid missing any projects the current user cannot see","95","        Authentication saveAuth = SecurityContextHolder.getContext().getAuthentication();","97","            SecurityContextHolder.getContext().setAuthentication(ACL.SYSTEM);","106","            SecurityContextHolder.getContext().setAuthentication(saveAuth);"]}]}},"3fc392108ae382a4616964aa8bbb6b8cb9dff0dc":{"changes":{"core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["491","        executableEstimatedDuration = DEFAULT_ESTIMATED_DURATION;"],"delete":["461","            executableEstimatedDuration = DEFAULT_ESTIMATED_DURATION;"]}]}},"7a5775ca8d5d58c4cf4ac4a9feabffb4ddb5b2ce":{"changes":{"core\/src\/main\/java\/hudson\/tools\/ToolLocationNodeProperty.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/ToolLocationNodeProperty.java":[{"add":["152","            return type + \"@\" + name;\r"],"delete":["152","            return type.getClass().getName() + \"@\" + name;\r"]}]}},"79481041974776746f71c4e5e68304c4cb91c71e":{"changes":{"core\/src\/main\/java\/hudson\/security\/AccessControlled.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/ACL.java":"MODIFY","test\/src\/test\/java\/hudson\/security\/ACLTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/security\/AccessControlled.java":[{"add":["61","        if (a == ACL.SYSTEM) {","62","            return true;","63","        }"],"delete":[]}],"core\/src\/main\/java\/hudson\/security\/ACL.java":[{"add":["66","        if (a == SYSTEM) {","67","            return;","68","        }","80","        Authentication a = Jenkins.getAuthentication();","81","        if (a == SYSTEM) {","82","            return true;","83","        }","84","        return hasPermission(a, p);","110","        if (a == SYSTEM) {","111","            return;","112","        }","148","        if (a == SYSTEM) {","149","            return;","150","        }"],"delete":["77","        return hasPermission(Jenkins.getAuthentication(),p);"]}],"test\/src\/test\/java\/hudson\/security\/ACLTest.java":[{"add":[],"delete":[]}]}},"e0017ae1de222a69b093011f5b30b48cde1dc7e6":{"changes":{"core\/src\/main\/java\/hudson\/model\/AllView.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AllView.java":[{"add":["166","                                new Object[]{allView.owner.getUrl(), primaryView, DEFAULT_VIEW_NAME});"],"delete":["166","                                new Object[]{allView.owner.getUrl(), DEFAULT_VIEW_NAME});"]}]}},"465877c215555661d5c768b30a7d20bd356b77ab":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["649","            LOGGER.fine(\"Scheduling \"+this+\" to installerService\");","662","            LOGGER.fine(\"Doing a connectivity check\");","863","","864","        @Override","865","        public String toString() {","866","            return super.toString()+\"[plugin=\"+plugin.title+\"]\";","867","        }"],"delete":[]}]}},"c45d6be237de4b588c59395b6bcd9a8dc63a7383":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Computer\/sidepanel.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/sidepanel2.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Computer\/sidepanel.jelly":[{"add":["32","      <l:task contextMenu=\"false\" href=\"${rootURL}\/computer\" icon=\"icon-up icon-md\" title=\"${%Back to List}\"\/>","34","      <l:task href=\"${rootURL}\/${it.url}delete\" icon=\"icon-edit-delete icon-md\" permission=\"${it.DELETE}\" title=\"${%Delete Slave}\"\/>","35","      <l:task href=\"${rootURL}\/${it.url}configure\" icon=\"icon-setting icon-md\" permission=\"${it.CONFIGURE}\" title=\"${%Configure}\"\/>","36","      <l:task href=\"${rootURL}\/${it.url}builds\" icon=\"icon-notepad icon-md\" title=\"${%Build History}\"\/>","37","      <l:task href=\"${rootURL}\/${it.url}load-statistics\" icon=\"icon-monitor icon-md\" title=\"${%Load Statistics}\"\/>","38","      <l:task href=\"${rootURL}\/${it.url}script\" icon=\"icon-terminal icon-md\" permission=\"${app.RUN_SCRIPTS}\" title=\"${%Script Console}\"\/>"],"delete":["32","      <l:task contextMenu=\"false\" href=\"..\" icon=\"icon-up icon-md\" title=\"${%Back to List}\"\/>","34","      <l:task href=\"delete\" icon=\"icon-edit-delete icon-md\" permission=\"${it.DELETE}\" title=\"${%Delete Slave}\"\/>","35","      <l:task href=\"configure\" icon=\"icon-setting icon-md\" permission=\"${it.CONFIGURE}\" title=\"${%Configure}\"\/>","36","      <l:task href=\"builds\" icon=\"icon-notepad icon-md\" title=\"${%Build History}\"\/>","37","      <l:task href=\"load-statistics\" icon=\"icon-monitor icon-md\" title=\"${%Load Statistics}\"\/>","38","      <l:task href=\"script\" icon=\"icon-terminal icon-md\" permission=\"${app.RUN_SCRIPTS}\" title=\"${%Script Console}\"\/>"]}],"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/sidepanel2.jelly":[{"add":["26","  <l:task icon=\"icon-clipboard icon-md\" href=\"${rootURL}\/${it.url}log\" title=\"${%Log}\" permission=\"${it.CONNECT}\" \/>","28","    <l:task icon=\"icon-computer icon-md\" href=\"${rootURL}\/${it.url}systemInfo\" title=\"${%System Information}\" permission=\"${it.CONNECT}\"\/>","29","    <l:task icon=\"icon-edit-delete icon-md\" href=\"${rootURL}\/${it.url}disconnect\" title=\"${%Disconnect}\" permission=\"${it.DISCONNECT}\"\/>"],"delete":["26","  <l:task icon=\"icon-clipboard icon-md\" href=\"log\" title=\"${%Log}\" permission=\"${it.CONNECT}\" \/>","28","    <l:task icon=\"icon-computer icon-md\" href=\"systemInfo\" title=\"${%System Information}\" permission=\"${it.CONNECT}\"\/>","29","    <l:task icon=\"icon-edit-delete icon-md\" href=\"disconnect\" title=\"${%Disconnect}\" permission=\"${it.DISCONNECT}\"\/>"]}]}},"081235acff1a791126bec3d395e9f3a38a53240e":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["738","      <version>1.10<\/version>"],"delete":["738","      <version>1.9<\/version>"]}],"changelog.html":[{"add":["48","  <li class=bug>","49","    Hudson installed as Windows service wasn't restarting properly","50","    (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-5090\">issue 5090<\/a>)"],"delete":[]}]}},"3cf8de04a9fae00dabcec4c3888903afda4336df":{"changes":{"war\/src\/main\/js\/api\/securityConfig.js":"MODIFY","\/dev\/null":"DELETE","war\/src\/main\/js\/templates\/firstUserPanel.hbs":"MODIFY","core\/src\/main\/java\/hudson\/security\/HudsonPrivateSecurityRealm.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY","core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/setupWizardFirstUser.jelly":"ADD"},"diff":{"war\/src\/main\/js\/api\/securityConfig.js":[{"add":["11","\t\t\t'\/setupWizard\/createAdminUser',"],"delete":["11","\t\t\t'\/securityRealm\/createFirstAccount',"]}],"\/dev\/null":[{"add":[],"delete":[]}],"war\/src\/main\/js\/templates\/firstUserPanel.hbs":[{"add":["5","\t\t<iframe src=\"{{baseUrl}}\/setupWizard\/setupWizardFirstUser\"><\/iframe>"],"delete":["5","\t\t<iframe src=\"{{baseUrl}}\/securityRealm\/setupWizardFirstUser\"><\/iframe>"]}],"core\/src\/main\/java\/hudson\/security\/HudsonPrivateSecurityRealm.java":[{"add":["261","     * Creates a user account. Used by admins.","267","        createAccountByAdmin(req, rsp, \"addUser.jelly\", \".\"); \/\/ send the user back to the listing page on success","268","    }","269","","270","    \/**","271","     * Creates a user account. Requires {@link Jenkins#ADMINISTER}","272","     *\/","273","    public User createAccountByAdmin(StaplerRequest req, StaplerResponse rsp, String addUserView, String successView) throws IOException, ServletException {","275","        User u = createAccount(req, rsp, false, addUserView);","276","        if(u != null) {","277","            rsp.sendRedirect(successView);","279","        return u;","289","        if(hasSomeUser()) {","293","        User u = createAccount(req, rsp, false, \"firstUser.jelly\");","294","        if (u!=null) {","295","            tryToMakeAdmin(u);","296","            loginAndTakeBack(req, rsp, u);"],"delete":["31","import jenkins.install.InstallState;","32","import jenkins.install.SetupWizard;","263","     * Creates an user account. Used by admins.","270","        if(createAccount(req, rsp, false, \"addUser.jelly\")!=null) {","271","            rsp.sendRedirect(\".\");  \/\/ send the user back to the listing page","282","        boolean inSetup = !Jenkins.getInstance().getInstallState().isSetupComplete();","283","        if(!inSetup && hasSomeUser()) {","287","        ","288","        User admin = null;","289","        try {","290","            String view = \"firstUser.jelly\";","291","            if(inSetup) {","292","                admin = getUser(SetupWizard.initialSetupAdminUserName);","293","                if(admin != null) {","294","                    admin.delete(); \/\/ assume the new user may well be 'admin'","295","                }","296","                view = \"setupWizardFirstUser.jelly\";","297","            }","298","            ","299","            User u = createAccount(req, rsp, false, view);","300","            if (u!=null) {","301","                tryToMakeAdmin(u);","302","                if(admin != null) {","303","                    admin = null;","304","                }","305","                Jenkins.getInstance().setInstallState(InstallState.CREATE_ADMIN_USER.getNextState());","306","                loginAndTakeBack(req, rsp, u);","307","            }","308","        } finally {","309","            if(admin != null) {","310","                admin.save(); \/\/ recreate this initial user if something failed","311","            }"]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["16","import org.acegisecurity.Authentication;","17","import org.acegisecurity.context.SecurityContextHolder;","18","import org.acegisecurity.providers.UsernamePasswordAuthenticationToken;","19","import org.kohsuke.accmod.Restricted;","20","import org.kohsuke.accmod.restrictions.NoExternalUse;","34","import hudson.util.VersionNumber;","44","@Restricted(NoExternalUse.class)","122","    ","123","    \/**","124","     * Called during the initial setup to create an admin user","125","     *\/","126","    public void doCreateAdminUser(StaplerRequest req, StaplerResponse rsp) throws IOException, ServletException {","127","        Jenkins j = Jenkins.getInstance();","128","        j.checkPermission(Jenkins.ADMINISTER);","129","        ","130","        \/\/ This will be set up by default. if not, something changed, ok to fail","131","        HudsonPrivateSecurityRealm securityRealm = (HudsonPrivateSecurityRealm)j.getSecurityRealm();","132","        ","133","        User admin = securityRealm.getUser(SetupWizard.initialSetupAdminUserName);","134","        try {","135","            if(admin != null) {","136","                admin.delete(); \/\/ assume the new user may well be 'admin'","137","            }","138","            ","139","            User u = securityRealm.createAccountByAdmin(req, rsp, \"\/jenkins\/install\/SetupWizard\/setupWizardFirstUser.jelly\", j.getRootUrl());","140","            if (u != null) {","141","                if(admin != null) {","142","                    admin = null;","143","                }","144","                ","145","                j.setInstallState(InstallState.CREATE_ADMIN_USER.getNextState());","146","                ","147","                \/\/ ... and then login","148","                Authentication a = new UsernamePasswordAuthenticationToken(u.getId(),req.getParameter(\"password1\"));","149","                a = securityRealm.getSecurityComponents().manager.authenticate(a);","150","                SecurityContextHolder.getContext().setAuthentication(a);","151","            }","152","        } finally {","153","            if(admin != null) {","154","                admin.save(); \/\/ recreate this initial user if something failed","155","            }","156","        }","157","    }","193","            \/\/ Force root requests to the setup wizard","196","                if((req.getContextPath() + \"\/\").equals(req.getRequestURI())) {","199","                            return getContextPath() + \"\/setupWizard\/\";","202","                    return;"],"delete":["3","import java.util.Iterator;","5","import java.util.Map;","8","import java.util.regex.Pattern;","19","import hudson.util.VersionNumber;","35","import org.kohsuke.accmod.Restricted;","36","import org.kohsuke.accmod.restrictions.NoExternalUse;","37","import org.kohsuke.stapler.HttpResponse;","38","","39","import javax.servlet.Filter;","40","import javax.servlet.FilterChain;","41","import javax.servlet.FilterConfig;","42","import javax.servlet.ServletException;","43","import javax.servlet.ServletRequest;","44","import javax.servlet.ServletResponse;","45","import javax.servlet.http.HttpServletRequest;","46","import javax.servlet.http.HttpServletRequestWrapper;","47","import java.io.IOException;","48","import java.util.Locale;","49","import java.util.UUID;","50","import java.util.logging.Logger;","58","@Restricted(NoExternalUse.class) \/\/ use by Jelly","165","        private Pattern RESOURCE_PATTERN = Pattern.compile(\".*[.](css|ttf|gif|woff|eot|png|js)\");","166","        private Pattern ALLOWED_PATHS = Pattern.compile(","167","            \"\\\\Q\/login\\\\E\"","168","            + \"|\\\\Q\/loginError\\\\E\"","169","            + \"|\\\\Q\/securityRealm\/\" + new HudsonPrivateSecurityRealm(true, false, null).getAuthenticationGatewayUrl() + \"\\\\E\");","176","            \/\/ As an extra measure of security, the install wizard generates a security token, and","177","            \/\/ requires the user to enter it before proceeding through the installation. Once set","178","            \/\/ we'll set a cookie so the subsequent operations succeed","181","                \/\/ Allow js & css requests through","182","                if (!RESOURCE_PATTERN.matcher(req.getRequestURI()).matches()) { \/\/ allow resources","183","                    boolean isAdmin = jenkins.getACL().hasPermission(Jenkins.ADMINISTER);","184","                    final String adjustedPath = req.getRequestURI().substring(req.getContextPath().length());","185","                    final String destination;","186","                    \/\/ if the user hasn't authenticated, don't allow anything other than the login submit and error page","187","                    if (!isAdmin && !ALLOWED_PATHS.matcher(adjustedPath).matches()) {","188","                        destination = req.getContextPath() + \"\/login\";","189","                    } else if (isAdmin && \"\/\".equals(adjustedPath)) {","190","                        destination = req.getContextPath() + \"\/setupWizard\/\";","191","                    } else {","192","                        destination = req.getRequestURI();","193","                    }","196","                            return destination;"]}],"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/setupWizardFirstUser.jelly":[{"add":[],"delete":[]}]}},"22d9db09d56c1caa2a8a3e008e6bd29f5c9ed395":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["121","      <version>1.5.1<\/version>"],"delete":["121","      <version>1.5<\/version>"]}]}},"5869e4178fe09a8d6e8b0e2e4ba09e5a7b9715c4":{"changes":{"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":[{"add":["933","                        FilePath path = new FilePath(destdir).child(m);","934","                        boolean isDir = path.isDirectory();","935","","937","                        cmd.add(\"cvs\",\"tag\");","938","                        if(isDir) {","939","                            cmd.add(\"-R\");","940","                        }","941","                        cmd.add(tagName);","942","                        if(!isDir) {","943","                            cmd.add(path.getName());","944","                            path = path.getParent();","945","                        }","946","","947","                        if(!CVSSCM.this.run(new Launcher(listener),cmd,listener, path)) {"],"delete":["934","                        cmd.add(\"cvs\",\"tag\",\"-R\",tagName);","935","                        if(!CVSSCM.this.run(new Launcher(listener),cmd,listener,new FilePath(destdir).child(m))) {"]}]}},"f8a1680f026c1d335044cf18ec64ef6e6bd626e6":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant, Erik Ramfelt, Seiji Sogabe, id:cactusman","191","View.MissingMode=No view type is specified"],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant, Erik Ramfelt, Seiji Sogabe, id:cactusman"]}]}},"5936e970fbf7e31c46272c74f358f058a36b9b0a":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY","changelog.html":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":[],"delete":["246","  vertical-align: middle;"]}],"changelog.html":[{"add":["116","  <li class=bug>","117","    Label Alignment does not correctly work for top-level entries that span several lines","118","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10253\">issue 10253<\/a>)"],"delete":[]}]}},"92a2c48fab69b08eb0b9e3b8ff9a202d2c6ad09c":{"changes":{"core\/src\/main\/java\/hudson\/model\/queue\/WorkUnit.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/queue\/WorkUnit.java":[{"add":["29","import org.kohsuke.stapler.export.ExportedBean;","37","@ExportedBean"],"delete":[]}]}},"35e507ee385e866a45b9418f734fc594d9eea1f0":{"changes":{"war\/src\/main\/webapp\/css\/layout-common.css":"MODIFY","war\/src\/main\/webapp\/css\/responsive-grid.css":"MODIFY","war\/src\/main\/webapp\/css\/style.css":"MODIFY","core\/src\/main\/resources\/lib\/layout\/breadcrumbs.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/layout-common.css":[{"add":["95","  display:block;","115","    display:block;","126","    display:block;"],"delete":[]}],"war\/src\/main\/webapp\/css\/responsive-grid.css":[{"add":["15","h1.build-caption.page-headline {","16","    max-width: 1200px;","17","    overflow: hidden;","18","    white-space: nowrap;","19","    text-overflow: ellipsis;","20","}"],"delete":[]}],"war\/src\/main\/webapp\/css\/style.css":[{"add":["28","  display: inline-block;","34","  max-width: 325px;","35","  overflow: hidden;","37","  text-overflow: ellipsis;"],"delete":[]}],"core\/src\/main\/resources\/lib\/layout\/breadcrumbs.css":[{"add":["26","    display:block;","34","    display:inline-block;","50","    display: block;","51","    max-width: 1330px;","52","    float: left;","53","    text-overflow: ellipsis;","54","    overflow: hidden;","55","    white-space: nowrap;"],"delete":[]}]}},"aae1dc3164b94565d2676edbe68a6daec9c62817":{"changes":{"core\/src\/main\/java\/jenkins\/util\/ProgressiveRendering.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/AsynchPeople\/index.jelly":"MODIFY","changelog.html":"MODIFY","war\/src\/main\/webapp\/scripts\/sortable.js":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/util\/ProgressiveRendering.java":[{"add":["46"," *     (Call {@code ts_refresh($('someid'))} if using a {@code sortable} table.)"],"delete":["46"," *     (Call {@code var t = document.getElementById('someid'); if (t.sortable != null) t.sortable.refresh()} if using a {@code sortable} table.)"]}],"core\/src\/main\/resources\/hudson\/model\/View\/AsynchPeople\/index.jelly":[{"add":["95","                  ts_refresh(p);"],"delete":["95","                  if (p.sortable != null) {","96","                      p.sortable.refresh();","97","                  }"]}],"changelog.html":[{"add":["90","  <li class=bug>","91","    Revisited fix to be compatible for plugins.","92","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18119\">issue 18119<\/a>)"],"delete":[]}],"war\/src\/main\/webapp\/scripts\/sortable.js":[{"add":["366","\/** Calls table.sortable.refresh() in case the sortable has been initialized; otherwise does nothing. *\/","367","function ts_refresh(table) {","368","    var s = table.sortable;","369","    if (s != null) {","370","        s.refresh();","371","    }"],"delete":["366","function ts_refresh(table) { \/\/ backward compatibility","367","    return table.sortable.refresh();"]}]}},"303a9f7df70b702dfa3df1fa5bdf0a2afe9b1445":{"changes":{"test\/src\/test\/resources\/plugins\/plugin-first.hpi":"ADD","core\/src\/main\/java\/jenkins\/util\/AntWithFindResourceClassLoader.java":"ADD","core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginFirstClassLoader.java":"MODIFY","test\/src\/test\/java\/hudson\/PluginManagerTest.java":"MODIFY"},"diff":{"test\/src\/test\/resources\/plugins\/plugin-first.hpi":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/util\/AntWithFindResourceClassLoader.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":[{"add":["28","","29","import jenkins.util.AntWithFindResourceClassLoader;","834","    private final class AntClassLoader2 extends AntWithFindResourceClassLoader implements Closeable {","836","            super(parent, true);","838","        "],"delete":["832","    private final class AntClassLoader2 extends AntClassLoader implements Closeable {","833","        private final Vector pathComponents;","834","","836","            super(parent,true);","837","","838","            try {","839","                Field $pathComponents = AntClassLoader.class.getDeclaredField(\"pathComponents\");","840","                $pathComponents.setAccessible(true);","841","                pathComponents = (Vector)$pathComponents.get(this);","842","            } catch (NoSuchFieldException | IllegalAccessException e) {","843","                throw new Error(e);","844","            }","846","","847","","848","        public void addPathFiles(Collection<File> paths) throws IOException {","849","            for (File f : paths)","850","                addPathFile(f);","851","        }","852","","853","        public void close() throws IOException {","854","            cleanup();","855","        }","856","","857","        \/**","858","         * As of 1.8.0, {@link AntClassLoader} doesn't implement {@link #findResource(String)}","859","         * in any meaningful way, which breaks fast lookup. Implement it properly.","860","         *\/","861","        @Override","862","        protected URL findResource(String name) {","863","            URL url = null;","864","","865","            \/\/ try and load from this loader if the parent either didn't find","866","            \/\/ it or wasn't consulted.","867","            Enumeration e = pathComponents.elements();","868","            while (e.hasMoreElements() && url == null) {","869","                File pathComponent = (File) e.nextElement();","870","                url = getResourceURL(pathComponent, name);","871","                if (url != null) {","872","                    log(\"Resource \" + name + \" loaded from ant loader\", Project.MSG_DEBUG);","873","                }","874","            }","875","","876","            return url;","877","        }","878",""]}],"core\/src\/main\/java\/hudson\/PluginFirstClassLoader.java":[{"add":["35","import jenkins.util.AntWithFindResourceClassLoader;","44","    extends AntWithFindResourceClassLoader","47","","48","    public PluginFirstClassLoader() {","49","        super(null, false);","50","    }","51","","106","    }"],"delete":["35","import org.apache.tools.ant.AntClassLoader;","44","    extends AntClassLoader","47","    ","102","    }   ","103","    "]}],"test\/src\/test\/java\/hudson\/PluginManagerTest.java":[{"add":["45","","46","import jenkins.ClassLoaderReflectionToolkit;","519","","520","    @Issue(\"JENKINS-44898\")","521","    @WithPlugin(\"plugin-first.hpi\")","522","    @Test","523","    public void findResourceForPluginFirstClassLoader() throws Exception {","524","        PluginWrapper w = r.jenkins.getPluginManager().getPlugin(\"plugin-first\");","525","        assertNotNull(w);","526","","527","        URL fromPlugin = w.classLoader.getResource(\"org\/jenkinsci\/plugins\/pluginfirst\/HelloWorldBuilder\/config.jelly\");","528","        assertNotNull(fromPlugin);","529","","530","        \/\/ This is how UberClassLoader.findResource functions.","531","        URL fromToolkit = ClassLoaderReflectionToolkit._findResource(w.classLoader, \"org\/jenkinsci\/plugins\/pluginfirst\/HelloWorldBuilder\/config.jelly\");","532","","533","        assertEquals(fromPlugin, fromToolkit);","534","    }"],"delete":[]}]}},"2f442e4d31b9bd4c1059b4c11d865d4e641e68df":{"changes":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/ExtractResourceWithChangesSCM.java":"MODIFY"},"diff":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/ExtractResourceWithChangesSCM.java":[{"add":["126","            stream.println(\"<file>\");","128","            stream.println(\"<\/file>\");"],"delete":["124","        stream.println(\"<file>\");","130","        stream.println(\"<\/file>\");"]}]}},"0449883d152a772deea8621ce2e2c3e97e7e8a1f":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/test\/AbstractTestResultAction.java":"MODIFY"},"diff":{"changelog.html":[{"add":["72","  <li class=\"bug\">","73","    Displaying unabridged test result trend on project index page defeated lazy loading.","74","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-23945\">issue 23945<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/test\/AbstractTestResultAction.java":[{"add":["36","import java.util.Set;","190","        return (T)getPreviousResult(getClass(), true);","193","    private <U extends AbstractTestResultAction> U getPreviousResult(Class<U> type, boolean eager) {","194","        Set<Integer> loadedBuilds = eager ? null : owner.getProject()._getRuns().getLoadedBuilds().keySet();","197","            b = eager || loadedBuilds.contains(b.number - \/* assuming there are no gaps *\/1) ? b.getPreviousBuild() : null;","280","        for (AbstractTestResultAction<?> a = this; a != null; a = a.getPreviousResult(AbstractTestResultAction.class, false)) {"],"delete":["189","        return (T)getPreviousResult(getClass());","192","    private <U extends AbstractTestResultAction> U getPreviousResult(Class<U> type) {","195","            b = b.getPreviousBuild();","278","        for( AbstractTestResultAction<?> a=this; a!=null; a=a.getPreviousResult(AbstractTestResultAction.class) ) {"]}]}},"805149bf32f02ca4b23f456623965a9b492fba51":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["109","    <remoting.version>3.29<\/remoting.version>"],"delete":["109","    <remoting.version>3.28<\/remoting.version>"]}]}},"cb3990a4d6094260bea4571e7079fd0e3949047f":{"changes":{"core\/src\/main\/java\/jenkins\/FilePathFilter.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/Security218CliTest.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","test\/src\/test\/java\/hudson\/bugs\/JnlpAccessWithSecuredHudsonTest.java":"MODIFY","pom.xml":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/StandardOutputSwapper.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/FilePathFilter.java":[{"add":["104","     * or {@code null} if none is needed."],"delete":["104","     * or null if none is needed."]}],"core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":[{"add":["135","            \/\/ No sense in setting up channel pinger if the channel is being closed","136","            setUpPingForChannel(getOpenChannelOrFail(), null, pingTimeoutSeconds, pingIntervalSeconds, false);"],"delete":["135","            setUpPingForChannel(Channel.current(), null, pingTimeoutSeconds, pingIntervalSeconds, false);"]}],"test\/src\/test\/java\/jenkins\/security\/Security218CliTest.java":[{"add":["241","                getChannelOrFail().call(new Callable<String, Exception>() {"],"delete":["241","                Channel.current().call(new Callable<String, Exception>() {"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["869","            Channel.currentOrFail().setProperty(\"slave\",Boolean.TRUE); \/\/ indicate that this side of the channel is the slave side."],"delete":["869","            Channel.current().setProperty(\"slave\",Boolean.TRUE); \/\/ indicate that this side of the channel is the slave side."]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["1291","            final Channel channel = getOpenChannelOrFail();","1301","            return channel.export(RemoteProcess.class,new RemoteProcess() {","1307","                        Channel taskChannel = null;","1309","                            \/\/ Sync IO will fail automatically if the channel is being closed, no need to use getOpenChannelOrFail()","1310","                            taskChannel = Channel.currentOrFail();","1311","                            taskChannel.syncIO();","1314","                            LOGGER.log(Level.INFO, \"Failed to synchronize IO streams on the channel \" + taskChannel, t);"],"delete":["1300","            return Channel.current().export(RemoteProcess.class,new RemoteProcess() {","1307","                            Channel.current().syncIO();"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["1428","            final Channel ch = getChannelOrFail();","1430","            try (PrintWriter pw = new PrintWriter(sw)) {","1431","                ch.dumpExportTable(pw);","1432","            }"],"delete":["1429","            PrintWriter pw = new PrintWriter(sw);","1430","            Channel.current().dumpExportTable(pw);","1431","            pw.close();"]}],"test\/src\/test\/java\/hudson\/bugs\/JnlpAccessWithSecuredHudsonTest.java":[{"add":["156","            return getChannelOrFail().call(new ScriptLoader(path));"],"delete":["156","            return Channel.current().call(new ScriptLoader(path));"]}],"pom.xml":[{"add":["177","        <version>3.15<\/version>"],"delete":["177","        <version>3.14<\/version>"]}],"core\/src\/main\/java\/jenkins\/slaves\/StandardOutputSwapper.java":[{"add":["41","            Channel c = getOpenChannelOrFail();"],"delete":["41","","42","            Channel c = Channel.current();","43",""]}]}},"4d5c1cdde4faef2661a66fab51f60be577603493":{"changes":{"core\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["282","      <version>1.79<\/version>"],"delete":["282","      <version>1.78<\/version>"]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["28","import org.kohsuke.stapler.Stapler;","73","        \/\/ JSON binding needs to be able to see all the classes from all the plugins","74","        Stapler.setClassLoader(context,uberClassLoader);","75",""],"delete":[]}]}},"cc06ae78e3955746176f64ff3f36d7f0e3cc80ab":{"changes":{"core\/src\/test\/java\/hudson\/model\/FileParameterValueTest.java":"ADD"},"diff":{"core\/src\/test\/java\/hudson\/model\/FileParameterValueTest.java":[{"add":[],"delete":[]}]}},"a1ed1b2278592d61619986a615d56dac3bdc5b76":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["59","  <li class=bug>","60","    Unfilled custom workspace textbox shouldn't be allowed.","61","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9806\">issue 9806<\/a>)"],"delete":[]}]}},"789dc6dc76c834e040e3324ef973bafcc763bf5e":{"changes":{"core\/src\/main\/resources\/hudson\/model\/ComputerSet\/_new.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/ComputerSet\/_new.jelly":[{"add":["34","        <f:entry title=\"${%Name}\" help=\"${requestScope.descriptor.getHelpFile('name')}\">"],"delete":["34","        <f:entry title=\"${%Name}\" help=\"\/help\/system-config\/master-slave\/name.html\">"]}]}},"90e989827e9e7a826c12997d7f7109ac21b0411b":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":[{"add":["430","                        env = new EnvVars();","431","","432","                        try","438","                        }","551","                UnixReflection.destroy(pid);","606","                if (isPreJava8()) {","607","                    DESTROY_PROCESS = clazz.getDeclaredMethod(\"destroyProcess\",int.class);","608","                } else {","609","                    DESTROY_PROCESS = clazz.getDeclaredMethod(\"destroyProcess\",int.class, boolean.class);","610","                }","626","","627","        public static void destroy(int pid) throws IllegalAccessException, InvocationTargetException {","628","            if (isPreJava8()) {","629","                DESTROY_PROCESS.invoke(null, pid);","630","            } else {","631","                DESTROY_PROCESS.invoke(null, pid, false);","632","            }","633","        }","634","","635","        private static boolean isPreJava8() {","636","            int javaVersionAsAnInteger = Integer.parseInt(System.getProperty(\"java.version\").replaceAll(\"\\\\.\", \"\").replaceAll(\"_\", \"\").substring(0, 2));","637","            return javaVersionAsAnInteger < 18;","638","        }"],"delete":["430","                        env = new EnvVars();   ","431","                        ","432","                        try ","438","                        }                          ","551","                UnixReflection.DESTROY_PROCESS.invoke(null, pid);","606","                DESTROY_PROCESS = clazz.getDeclaredMethod(\"destroyProcess\",int.class);"]}]}},"dcf7c9ebe3b82a8dee0c668c30ea0d0732a5af01":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/MailAddressResolver.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/UserNameResolver.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/SecurityRealm.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":[{"add":["91","     * @since 1.223"],"delete":["91","     * @sine 1.223"]}],"core\/src\/main\/java\/hudson\/tasks\/MailAddressResolver.java":[{"add":["34"," * @since 1.192"],"delete":["34"," * @sine 1.192"]}],"core\/src\/main\/java\/hudson\/tasks\/UserNameResolver.java":[{"add":["34"," * @since 1.192\r"],"delete":["34"," * @sine 1.192\r"]}],"core\/src\/main\/java\/hudson\/security\/SecurityRealm.java":[{"add":["47"," * @since 1.160"],"delete":["47"," * @sicne 1.160"]}]}},"1a28593f0922f0a662e475f816f9a194d563c521":{"changes":{"core\/src\/main\/java\/hudson\/ExtensionFinder.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ExtensionFinder.java":[{"add":["523","                            \/\/ make unique key, because Guice wants that.","524","                            Key key = Key.get(extType, Names.named(item.className() + \".\" + item.memberName()));"],"delete":["498","                int id=0;","499","","501","                    id++;","526","                            \/\/ use arbitrary id to make unique key, because Guice wants that.","527","                            Key key = Key.get(extType, Names.named(String.valueOf(id)));"]}]}},"f4aec235ec854ca599669402a5ce4d164adc2140":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":[{"add":["7","if (!app.slaves.isEmpty() || !app.clouds.isEmpty()) {"],"delete":["7","if (!app.slaves.isEmpty()) {"]}],"changelog.html":[{"add":["75","  <li class=bug>","76","    Label of the master should be editable if cloud is set up.","77","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11100\">issue 11100<\/a>)"],"delete":[]}]}},"867884f6328a4a16899c49859230442b5316aee1":{"changes":{"core\/src\/main\/java\/hudson\/cli\/declarative\/CLIRegisterer.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/CLIRegistererTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/cli\/declarative\/CLIRegisterer.java":[{"add":["169","                                    new ClassParser().parse(authenticator,parser);"],"delete":["151","                            new ClassParser().parse(Jenkins.getInstance().getSecurityRealm().createCliAuthenticator(this), parser);","152",""]}],"test\/src\/test\/java\/hudson\/cli\/CLIRegistererTest.java":[{"add":[],"delete":[]}]}},"acb12ff17dcb83dee3925bb3c9bc656ce4431d45":{"changes":{"core\/src\/main\/java\/hudson\/model\/listeners\/RunListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/listeners\/RunListener.java":[{"add":["30","import hudson.Functions;","248","        if (!Functions.isExtensionsAvailable()) {"],"delete":["38","import jenkins.model.Jenkins;","248","        if (Jenkins.getInstanceOrNull() == null) { \/\/ TODO use !Functions.isExtensionsAvailable() once JENKINS-33377"]}]}},"4b6049d586f7fd0c67368fffbda5a29f840450a5":{"changes":{"core\/src\/main\/resources\/hudson\/model\/queue\/_api.jelly":"ADD","core\/src\/test\/java\/hudson\/model\/QueueTest.java":"ADD","test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/queue\/_api.jelly":[{"add":[],"delete":[]}],"core\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["1088","        checkCancelOperationUsingUrl(item -> \"queue\/cancelItem?id=\" + item.getId(), false);","1094","        checkCancelOperationUsingUrl(item -> \"queue\/item\/\" + item.getId() + \"\/cancelQueue\", true);","1097","    \/**","1098","     *","1099","     * @param urlProvider the endpoint to query","1100","     * @param legacyRedirect whether the endpoint has the legacy behavior (ie makes a redirect no matter the result)","1101","     *                       Or it uses the newer response codes introduced by JENKINS-21311","1102","     *\/","1103","    private void checkCancelOperationUsingUrl(Function<Queue.Item, String> urlProvider, boolean legacyRedirect) throws Exception {","1132","            if(legacyRedirect) {","1133","                Page p = wc.getPage(request);","1134","                \/\/ the legacy endpoint returns a redirection to the previously visited page, none in our case","1135","                \/\/ (so force no redirect to avoid false positive error)","1136","                \/\/ see JENKINS-21311","1137","                assertThat(p.getWebResponse().getStatusCode(), lessThan(400));","1138","            }"],"delete":["1088","        checkCancelOperationUsingUrl(item -> \"queue\/cancelItem?id=\" + item.getId());","1094","        checkCancelOperationUsingUrl(item -> \"queue\/item\/\" + item.getId() + \"\/cancelQueue\");","1097","    private void checkCancelOperationUsingUrl(Function<Queue.Item, String> urlProvider) throws Exception {","1126","            Page p = wc.getPage(request);","1127","            \/\/ currently the endpoint return a redirection to the previously visited page, none in our case","1128","            \/\/ (so force no redirect to avoid false positive error)","1129","            assertThat(p.getWebResponse().getStatusCode(), lessThan(400));","1130",""]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["134","import javax.servlet.http.HttpServletResponse;","135","","764","     * Called from {@code queue.jelly} and {@code queue-items.jelly}.","771","                if(cancel(item)) {","772","                    return HttpResponses.status(HttpServletResponse.SC_NO_CONTENT);","773","                }","774","                return HttpResponses.error(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, \"Could not cancel run for id \" + id);","776","            return HttpResponses.error(422, \"Item for id (\" + id + \") is not cancellable\");","778","        return HttpResponses.error(HttpServletResponse.SC_NOT_FOUND, \"Provided id (\" + id + \") not found\");","2311","        public HttpResponse doCancelQueue() {","2315","            return HttpResponses.status(HttpServletResponse.SC_NO_CONTENT);"],"delete":["762","     * Called from {@code queue.jelly} and {@code entries.jelly}.","769","                cancel(item);","772","        return HttpResponses.forwardToPreviousPage();","2305","        public HttpResponse doCancelQueue() throws IOException, ServletException {","2309","            return HttpResponses.forwardToPreviousPage();"]}]}},"09693ce75e060ff5ce5008ff0ace406e2a358532":{"changes":{"core\/src\/main\/java\/hudson\/cli\/SetBuildDisplayNameCommand.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/SetBuildDisplayNameCommandTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/cli\/SetBuildDisplayNameCommand.java":[{"add":["31","        if (run == null) {","32","            stderr.format(\"Build #%d does not exist\\n\", number);","33","            return -1;","34","        }"],"delete":[]}],"test\/src\/test\/java\/hudson\/cli\/SetBuildDisplayNameCommandTest.java":[{"add":[],"delete":[]}]}},"3e187a026408d5ca74202f7e26dd565cde2e87d0":{"changes":{"core\/src\/main\/java\/hudson\/util\/io\/TarArchiver.java":"MODIFY","core\/src\/test\/java\/hudson\/FilePathTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/io\/TarArchiver.java":[{"add":["54","        tar = new TarArchiveOutputStream(out);"],"delete":["54","        tar = new TarArchiveOutputStream(new BufferedOutputStream(out) {","55","            \/\/ TarOutputStream uses TarBuffer internally,","56","            \/\/ which flushes the stream for each block. this creates unnecessary","57","            \/\/ data stream fragmentation, and flush request to a remote, which slows things down.","58","            @Override","59","            public void flush() throws IOException {","60","                \/\/ so don't do anything in flush","61","            }","62","        });    "]}],"core\/src\/test\/java\/hudson\/FilePathTest.java":[{"add":["661","","662","    @Issue(\"JENKINS-10629\")","663","    @Test","664","    public void testEOFbrokenFlush() throws IOException, InterruptedException {","665","        final File srcFolder = temp.newFolder(\"src\");","666","        \/\/ simulate magic structure with magic sizes:","667","        \/\/ |- dir\/pom.xml   (2049)","668","        \/\/ |- pom.xml       (2049)","669","        \/\/ \\- small.tar     (1537)","670","        final File smallTar = new File(srcFolder, \"small.tar\");","671","        givenSomeContentInFile(smallTar, 1537);","672","        final File dir = new File(srcFolder, \"dir\");","673","        dir.mkdirs();","674","        final File pomFile = new File(dir, \"pom.xml\");","675","        givenSomeContentInFile(pomFile, 2049);","676","        FileUtils.copyFileToDirectory(pomFile, srcFolder);","677","","678","        final File archive = temp.newFile(\"archive.tar\");","679","","680","        \/\/ Compress archive","681","        final FilePath tmpDirPath = new FilePath(srcFolder);","682","        int tarred = tmpDirPath.tar(new FileOutputStream(archive), \"**\");","683","        assertEquals(\"One file should have been compressed\", 3, tarred);","684","","685","        \/\/ Decompress","686","        final File dstFolder = temp.newFolder(\"dst\");","687","        dstFolder.mkdirs();","688","        FilePath outDir = new FilePath(dstFolder);","689","        \/\/ and now fail when flush is bad!","690","        tmpDirPath.child(\"..\/\" + archive.getName()).untar(outDir, TarCompression.NONE);","691","    }"],"delete":[]}]}},"75bad0954f3b70c0fe8e75b6e676e7bac00ec009":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Maven.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Maven.java":[{"add":["398","            if (fieldName != null && fieldName.equals(\"globalSettings\")) fieldName = \"settings\"; \/\/ same help file"],"delete":["398","            if (fieldName.equals(\"globalSettings\")) fieldName = \"settings\"; \/\/ same help file"]}],"changelog.html":[{"add":["59","  <li class=bug>","60","    WARNING: Caught exception evaluating: descriptor.getHelpFile(attrs.field). Reason: java.lang.NullPointerException. ","61","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15940\">issue 15940<\/a>)"],"delete":[]}]}},"4641247b118b03e125c90b141d667abecb68e7d2":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["78","Computer.BadChannel=Slave node offline or not a remote channel (such as master node)."],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["900","        VirtualChannel vc = getChannel();","901","        if (vc instanceof Channel) {","902","            w.println(\"Master to slave\");","903","            ((Channel)vc).dumpExportTable(w);","904","            w.flush(); \/\/ flush here once so that even if the dump from the slave fails, the client gets some useful info","906","            w.println(\"\\n\\n\\nSlave to master\");","907","            w.print(vc.call(new DumpExportTableTask()));","908","        } else {","909","            w.println(Messages.Computer_BadChannel());","910","        }"],"delete":["900","        w.println(\"Master to slave\");","901","        ((Channel)getChannel()).dumpExportTable(w);","902","        w.flush(); \/\/ flush here once so that even if the dump from the slave fails, the client gets some useful info","904","        w.println(\"\\n\\n\\nSlave to master\");","905","        w.print(getChannel().call(new DumpExportTableTask()));"]}]}},"68ed742227891a3f716e4e479388c36876bb935a":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/Engine.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/Engine.java":[{"add":["34","import java.util.Properties;","94","    \/**","95","     * This cookie identifiesof the current connection, allowing us to force the server to drop","96","     * the client if we initiate a reconnection from our end (even when the server still thinks","97","     * the connection is alive.)","98","     *\/","99","    private String cookie;","100","","192","                Socket s = connect(port);","196","                DataOutputStream dos = new DataOutputStream(s.getOutputStream());","198","","199","                dos.writeUTF(\"Protocol:JNLP2-connect\");","200","                Properties props = new Properties();","201","                props.put(\"Secret-Key\", secretKey);","202","                props.put(\"Node-Name\", slaveName);","203","                if (cookie!=null)","204","                    props.put(\"Cookie\", cookie);","205","                ByteArrayOutputStream o = new ByteArrayOutputStream();","206","                props.store(o, null);","207","                dos.writeUTF(o.toString(\"UTF-8\"));","208","","209","                String greeting = readLine(in);","210","                if (greeting.startsWith(\"Unknown protocol\")) {","211","                    LOGGER.info(\"The server didn't understand the v2 handshake. Falling back to v1 handshake\");","212","                    s.close();","213","                    s = connect(port);","214","                    in = new BufferedInputStream(s.getInputStream());","215","                    dos = new DataOutputStream(s.getOutputStream());","216","","217","                    dos.writeUTF(\"Protocol:JNLP-connect\");","218","                    dos.writeUTF(secretKey);","219","                    dos.writeUTF(slaveName);","220","","221","                    greeting = readLine(in); \/\/ why, oh why didn't I use DataOutputStream when writing to the network?","222","                    if (!greeting.equals(GREETING_SUCCESS)) {","223","                        onConnectionRejected(greeting);","224","                        continue;","225","                    }","226","                } else {","227","                    if (greeting.equals(GREETING_SUCCESS)) {","228","                        Properties responses = readResponseHeaders(in);","229","                        cookie = responses.getProperty(\"Cookie\");","230","                    } else {","231","                        onConnectionRejected(greeting);","232","                        continue;","233","                    }","236","                final Socket socket = s;","245","                                socket.close();","269","    private void onConnectionRejected(String greeting) throws InterruptedException {","270","        listener.error(new Exception(\"The server rejected the connection: \"+greeting));","271","        Thread.sleep(10*1000);","272","    }","273","","274","    private Properties readResponseHeaders(BufferedInputStream in) throws IOException {","275","        Properties response = new Properties();","276","        while (true) {","277","            String line = readLine(in);","278","            if (line.length()==0)","279","                return response;","280","            int idx = line.indexOf(':');","281","            response.put(line.substring(0,idx).trim(), line.substring(idx+1).trim());","282","        }","283","    }","284",""],"delete":["184","                final Socket s = connect(port);","187","                DataOutputStream dos = new DataOutputStream(s.getOutputStream());","188","                dos.writeUTF(\"Protocol:JNLP-connect\");","189","                dos.writeUTF(secretKey);","190","                dos.writeUTF(slaveName);","193","                String greeting = readLine(in); \/\/ why, oh why didn't I use DataOutputStream when writing to the network?","194","                if (!greeting.equals(GREETING_SUCCESS)) {","195","                    listener.error(new Exception(\"The server rejected the connection: \"+greeting));","196","                    Thread.sleep(10*1000);","197","                    continue;","208","                                s.close();"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["369","    public Channel getChannel() {"],"delete":["44","import java.io.FileOutputStream;","45","import java.io.FileNotFoundException;","61","import org.apache.commons.io.IOUtils;","372","    public VirtualChannel getChannel() {"]}],"changelog.html":[{"add":["47","  <li class=rfe>","48","    If the JNLP-connected slave drops out without the master not noticing, allow the reconnection","49","    without rejecting it.","50","    (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-5055\">issue 5055<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":[{"add":["27","import hudson.slaves.OfflineCause;","37","import hudson.util.IOException2;","39","import java.io.ByteArrayInputStream;","49","import java.security.SecureRandom;","50","import java.util.Map.Entry;","51","import java.util.Properties;","52","import java.util.concurrent.ExecutionException;","53","import java.util.concurrent.TimeUnit;","54","import java.util.concurrent.TimeoutException;","183","                    } else if(protocol.equals(\"JNLP2-connect\")) {","184","                        runJnlp2Connect(in, out);","186","                        runCliConnect(in, out);","246","            jnlpConnect(computer);","247","        }","248","","249","        \/**","250","         * Handles JNLP slave agent connection request (v2 protocol)","251","         *\/","252","        private void runJnlp2Connect(DataInputStream in, PrintWriter out) throws IOException, InterruptedException {","253","            Properties request = new Properties();","254","            request.load(new ByteArrayInputStream(in.readUTF().getBytes(\"UTF-8\")));","255","","256","            if(!getSecretKey().equals(request.getProperty(\"Secret-Key\"))) {","257","                error(out, \"Unauthorized access\");","258","                return;","259","            }","260","","261","            final String nodeName = request.getProperty(\"Node-Name\");","262","            SlaveComputer computer = (SlaveComputer) Hudson.getInstance().getComputer(nodeName);","263","            if(computer==null) {","264","                error(out, \"No such slave: \"+nodeName);","265","                return;","266","            }","267","","268","            Channel ch = computer.getChannel();","269","            if(ch !=null) {","270","                String c = request.getProperty(\"Cookie\");","271","                if (c!=null && c.equals(ch.getProperty(COOKIE_NAME))) {","272","                    \/\/ we think we are currently connected, but this request proves that it's from the party","273","                    \/\/ we are supposed to be communicating to. so let the current one get disconnected","274","                    LOGGER.info(\"Disconnecting \"+nodeName+\" as we are reconnected from the current peer\");","275","                    try {","276","                        computer.disconnect(new ConnectionFromCurrentPeer()).get(15, TimeUnit.SECONDS);","277","                    } catch (ExecutionException e) {","278","                        throw new IOException2(\"Failed to disconnect the current client\",e);","279","                    } catch (TimeoutException e) {","280","                        throw new IOException2(\"Failed to disconnect the current client\",e);","281","                    }","282","                } else {","283","                    error(out, nodeName + \" is already connected to this master. Rejecting this connection.\");","284","                    return;","285","                }","286","            }","287","","288","            out.println(Engine.GREETING_SUCCESS);","289","","290","            Properties response = new Properties();","291","            String cookie = generateCookie();","292","            response.put(\"Cookie\",cookie);","293","            writeResponseHeaders(out, response);","294","","295","            ch = jnlpConnect(computer);","296","","297","            ch.setProperty(COOKIE_NAME, cookie);","298","        }","299","","300","        private void writeResponseHeaders(PrintWriter out, Properties response) {","301","            for (Entry<Object, Object> e : response.entrySet()) {","302","                out.println(e.getKey()+\": \"+e.getValue());","303","            }","304","            out.println(); \/\/ empty line to conclude the response header","305","        }","306","","307","        private String generateCookie() {","308","            byte[] cookie = new byte[32];","309","            new SecureRandom().nextBytes(cookie);","310","            return Util.toHexString(cookie);","311","        }","312","","313","        private Channel jnlpConnect(SlaveComputer computer) throws InterruptedException, IOException {","314","            final String nodeName = computer.getName();","338","                return computer.getChannel();","344","                logw.println(\"Failed to establish the connection with the slave \" + nodeName);","357","    \/**","358","     * Connection terminated because we are reconnected from the current peer.","359","     *\/","360","    public static class ConnectionFromCurrentPeer extends OfflineCause {","361","        public String toString() {","362","            return \"The current peer is reconnecting\";","363","        }","364","    }","365","","369","","370","    private static final String COOKIE_NAME = TcpSlaveAgentListener.class.getName()+\".cookie\";"],"delete":["175","                            runCliConnect(in, out);","263","                logw.println(\"Failed to establish the connection with the slave \" + nodeName); "]}]}},"b8fa2b0b6a17721e7de8bec3a70d01f5257b682f":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Computer\/index.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Computer\/index.properties":[{"add":["24","title.projects_tied_on=Projects tied to {0}"],"delete":["24","title.projects_tied_on=Projects tied on {0}"]}]}},"8bc0068d5df69d7540d051a1e42b0df2ed4328d4":{"changes":{"core\/src\/main\/resources\/hudson\/Messages_pt.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/Messages_pt.properties":[{"add":["50","Util.day   ={0} {0,choice,0#dias|1#dia|1<dias}"],"delete":["50","Util.day= {0} {0,escolha,0#dias|1#dia|1<dias}"]}]}},"54f25363da58884a639e5d6fd35914e2e33b415b":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["55","  Your container doesn''t use UTF-8 to decode URLs. If you use non-ASCII characters as a job name etc, \\","56","  this will cause problems. \\","57","  See <a href=''http:\/\/hudson.gotdns.com\/wiki\/display\/HUDSON\/Containers''>Containers<\/a> and \\","58","  <a href=''http:\/\/hudson.gotdns.com\/wiki\/display\/HUDSON\/Tomcat#Tomcat-i18n''>Tomcat i18n<\/a> for more details."],"delete":["55","  Your container does''t use UTF-8 to decode URLs. If you use non-ASCII characters as a Job name etc, \\","56","  See  <a href=''http:\/\/hudson.gotdns.com\/wiki\/display\/HUDSON\/Containers''>Containers<\/a> or \\","57","  <a href=''http:\/\/hudson.gotdns.com\/wiki\/display\/HUDSON\/Tomcat#Tomcat-i18n''>Tomcat i18N<\/a>."]}]}},"1320d9c6cfc779f19ea582538a7e5239400449cf":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/projectView.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/projectView.jelly":[{"add":["14","          <l:isAdmin>","15","            <l:tab name=\"+\" href=\"${rootURL}\/newView\" active=\"false\" \/>","16","          <\/l:isAdmin>"],"delete":["14","          <l:tab name=\"+\" href=\"${rootURL}\/newView\" active=\"false\" \/>"]}]}},"2f057b4edde450bb2e6fe86bcd02fd731c8dbc88":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["58","  <li class=bug>","59","    Failure to serialize a single <code>Action<\/code> could cause an entire REST export response to fail.","60","    Upgraded to Stapler <code>1.249<\/code> with a fix.","61","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-40088\">issue 40088<\/a>)"],"delete":["58","  <li class=>","93","  <li class=bug>","94","    Failure to serialize a single <code>Action<\/code> could cause an entire REST export response to fail.","95","    Upgraded to Stapler <code>1.249<\/code> with a fix.","96","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-40088\">issue 40088<\/a>)"]}]}},"02d6908ada70fcf8012833ddef628bc09c6f8389":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["73","        this.parameterDefinitions = parameterDefinitions != null ? parameterDefinitions : new ArrayList<>();","77","        this.parameterDefinitions = parameterDefinitions != null ? Arrays.asList(parameterDefinitions) : new ArrayList<>();"],"delete":["73","        if (parameterDefinitions == null) {","74","            throw new NullPointerException(\"ParameterDefinitions is null when this is a not valid value\");","75","        }","76","        this.parameterDefinitions = parameterDefinitions;","80","        if (parameterDefinitions == null) {","81","            throw new NullPointerException(\"ParameterDefinitions is null when this is a not valid value\");","82","        }","83","        this.parameterDefinitions = Arrays.asList(parameterDefinitions) ;"]}]}},"ac274f153b732d1834b9e0aa46ee6f64fa3527cb":{"changes":{"test\/src\/test\/groovy\/lib\/form\/TextAreaTest.groovy":"ADD","test\/src\/test\/resources\/lib\/form\/TextAreaTest\/TestBuilder\/config.jelly":"ADD"},"diff":{"test\/src\/test\/groovy\/lib\/form\/TextAreaTest.groovy":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/lib\/form\/TextAreaTest\/TestBuilder\/config.jelly":[{"add":[],"delete":[]}]}}}