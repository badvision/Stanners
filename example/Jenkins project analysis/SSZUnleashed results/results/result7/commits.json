{"1de091b92af3922e02becef404822e767f5f22c0":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Maven.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Maven.java":[{"add":["156","                \/\/ MAVEN_HOME (as Maven 2 gives M2_HOME priority.)","161","                env.put(\"M2_HOME\",ai.getMavenHome());"],"delete":["156","                \/\/ MAVEN_HOME (as Maven 2 gives M2_HOME priority)","161","                env.remove(\"M2_HOME\");"]}]}},"04e2d33c60f075e133304db2f2e71e037cd5ef9d":{"changes":{"core\/pom.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["757","                  <version>2.0.3<\/version>"],"delete":["757","                  <version>2.0.2<\/version>"]}],"war\/pom.xml":[{"add":["116","      <version>1.8<\/version>"],"delete":["116","      <version>1.7<\/version>"]}]}},"0bdde83cbb18300d555dda4e7f0ee663f4ad267f":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/BuildTrigger\/config.jelly":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/BuildTrigger.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/BuildTrigger\/config.jelly":[{"add":["32","  <j:if test=\"${descriptor.showEvenIfUnstableOption(targetType)}\"> <!-- XXX JENKINS-16444 this will always be true when first adding step -->"],"delete":["32","  <j:if test=\"${descriptor.showEvenIfUnstableOption(targetType)}\">"]}],"changelog.html":[{"add":["65","    Exception printed to log while adding <b>Build other projects<\/b> post-build step.","66","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16444\">issue 16444<\/a>)","67","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/BuildTrigger.java":[{"add":["67","import javax.annotation.CheckForNull;","313","        public boolean showEvenIfUnstableOption(@CheckForNull Class<? extends AbstractProject<?,?>> jobType) {","315","            return jobType == null || !jobType.getName().contains(\"PromotionProcess\");"],"delete":["312","        public boolean showEvenIfUnstableOption(Class<? extends AbstractProject> jobType) {","314","            return !jobType.getName().contains(\"PromotionProcess\");"]}]}},"ba461f4d2abfb2dd29b6f953730f596f4e32e4de":{"changes":{"debian\/debian\/jenkins.default":"MODIFY"},"diff":{"debian\/debian\/jenkins.default":[{"add":["54","# --argumentsRealm.roles.$ADMIN_USER=admin"],"delete":["54","# --argumentsRealm.$ADMIN_USER=admin"]}]}},"815da8aa732baa699481828dda67dd5835ba4992":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["183","        <version>3.5<\/version>"],"delete":["183","        <version>3.4.1<\/version>"]}]}},"005242bf9223e7ebdbbd7d21aaab98c51e8dc053":{"changes":{"core\/src\/main\/java\/hudson\/model\/StringParameterDefinition.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ParameterDefinition.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/StringParameterDefinition.java":[{"add":["43","    \r","44","    public StringParameterValue getDefaultParameterValue() {\r","45","        return new StringParameterValue(getName(), defaultValue);\r","46","    }\r"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["378","        if (isDisabled())","379","            return false;","380","","381","        if (isParameterized())","382","            return Hudson.getInstance().getQueue().add(","383","                    new ParameterizedProjectTask(this, getDefaultParametersValues()), quietPeriod);","384","        else","385","            return Hudson.getInstance().getQueue().add(this, quietPeriod);","386","    }","387","","388","    private List<ParameterValue> getDefaultParametersValues() {","389","        ParametersDefinitionProperty paramDefProp = getProperty(ParametersDefinitionProperty.class);","390","        ArrayList<ParameterValue> defValues = new ArrayList<ParameterValue>();","391","        ","392","        \/*","393","         * This check is made ONLY if someone will call this method even if isParametrized() is false.","394","         *\/","395","        if(paramDefProp == null)","396","            return defValues;","397","        ","398","        \/* Scan for all parameter with an associated default values *\/","399","        for(ParameterDefinition paramDefinition : paramDefProp.getParameterDefinitions())","400","        {","401","           ParameterValue defaultValue  = paramDefinition.getDefaultParameterValue();","402","            ","403","            if(defaultValue != null)","404","                defValues.add(defaultValue);           ","405","        }","406","        ","407","        return defValues;"],"delete":["378","        if(isDisabled())    return false;","379","        return Hudson.getInstance().getQueue().add(this,quietPeriod);"]}],"core\/src\/main\/java\/hudson\/model\/ParameterDefinition.java":[{"add":["83","    \r","84","    \/**\r","85","     * Returns default parameter value for this definition.\r","86","     * \r","87","     * @return default parameter value or null if no defaults are available\r","88","     * @since 1.253\r","89","     *\/\r","90","    public ParameterValue getDefaultParameterValue() {\r","91","        return null;\r","92","    }\r"],"delete":[]}]}},"516f3dc300c1baf34fa1fee67ccd2adc0c76269e":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["183","      <version>1.8<\/version>"],"delete":["183","      <version>1.7<\/version>"]}]}},"fc80d6745fe1b4eeb78e051776409371a21b6f7c":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_ja.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/logKeep.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_nl.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_pt_BR.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_ja.properties":[{"add":["22","Don't\\ keep\\ this\\ build\\ forever=\\u30d3\\u30eb\\u30c9\\u3092\\u4fdd\\u5b58\\u3057\\u306a\\u3044"],"delete":["22","Don''t\\ keep\\ this\\ build\\ forever=\\u30d3\\u30eb\\u30c9\\u3092\\u4fdd\\u5b58\\u3057\\u306a\\u3044"]}],"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_de.properties":[{"add":["22","Don't\\ keep\\ this\\ build\\ forever=Diesen Build nur befristet aufbewahren"],"delete":["22","Don''t\\ keep\\ this\\ build\\ forever=Diesen Build nur befristet aufbewahren"]}],"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_tr.properties":[{"add":["22","Don't\\ keep\\ this\\ build\\ forever=Bu yap\\u0131land\\u0131rmay\\u0131 sonsuza kadar tutma"],"delete":["22","Don''t\\ keep\\ this\\ build\\ forever=Bu yap\\u0131land\\u0131rmay\\u0131 sonsuza kadar tutma"]}],"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_ru.properties":[{"add":["22","Don't\\ keep\\ this\\ build\\ forever=\\u041d\\u0435 \\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c \\u044d\\u0442\\u0443 \\u0441\\u0431\\u043e\\u0440\\u043a\\u0443 \\u0432\\u0435\\u0447\\u043d\\u043e"],"delete":["22","Don''t\\ keep\\ this\\ build\\ forever=\\u041d\\u0435 \\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c \\u044d\\u0442\\u0443 \\u0441\\u0431\\u043e\\u0440\\u043a\\u0443 \\u0432\\u0435\\u0447\\u043d\\u043e"]}],"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep.jelly":[{"add":["31","        <f:submit value=\"${%Don't keep this build forever}\"  \/>","38","<\/j:jelly>"],"delete":["31","        <f:submit value=\"${%Don''t keep this build forever}\"  \/>","38","<\/j:jelly>"]}],"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_fr.properties":[{"add":["22","Don't\\ keep\\ this\\ build\\ forever=Ne pas conserver ce build sans limite de temps"],"delete":["22","Don''t\\ keep\\ this\\ build\\ forever=Ne pas conserver ce build sans limite de temps"]}],"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_nl.properties":[{"add":["22","Don't\\ keep\\ this\\ build\\ forever=Deze bouwpoging niet eeuwig bijhouden."],"delete":["22","Don''t\\ keep\\ this\\ build\\ forever=Deze bouwpoging niet eeuwig bijhouden."]}],"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep_pt_BR.properties":[{"add":["22","Don't\\ keep\\ this\\ build\\ forever=N\\u00E3o manter esta constru\\u00E7\\u00E3o nunca"],"delete":["22","Don''t\\ keep\\ this\\ build\\ forever=N\\u00E3o manter esta constru\\u00E7\\u00E3o nunca"]}]}},"b057abc7b84295969b894d06011e250842c6d09c":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["91","      <version>5.1<\/version>"],"delete":["91","      <version>5.0<\/version>"]}]}},"4fd154eee9153142c7fd308a12f48afdb0956f3b":{"changes":{"core\/src\/main\/resources\/lib\/layout\/task.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/layout\/task.jelly":[{"add":["116","                <l:icon class=\"${iconMetadata.classSpec}\" style=\"width: 24px; height: 24px; margin: 2px;\" \/>","119","                <l:icon alt=\"\" src=\"${icon}\" style=\"width: 24px; height: 24px; margin: 2px;\" \/>","139","          <j:choose>","140","            <j:when test=\"${iconMetadata != null}\">","141","              ${taskTags!=null and attrs.contextMenu!='false' ? taskTags.add(href, iconMetadata.getQualifiedUrl(context), title, post == 'true', requiresConfirmation == 'true') : null}","142","            <\/j:when>","143","            <j:otherwise>","144","              ${taskTags!=null and attrs.contextMenu!='false' ? taskTags.add(href, icon, title, post == 'true', requiresConfirmation == 'true') : null}","145","            <\/j:otherwise>","146","          <\/j:choose>"],"delete":["116","                <l:icon class=\"${iconMetadata.classSpec}\"\/>","119","                <l:icon width=\"24\" height=\"24\" style=\"margin: 2px;\" alt=\"\" src=\"${icon}\"\/>","139","          ${taskTags!=null and attrs.contextMenu!='false' ? taskTags.add(href, icon, title, post == 'true', requiresConfirmation == 'true') : null}"]}]}},"27d9b73ef4434de0000007c35352dfe48a08c751":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/java\/hudson\/WebAppMain.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/RingBufferLogHandler.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/SystemProperties.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["58","import jenkins.util.SystemProperties;","544","        channel.call(new SlaveInitializer(DEFAULT_RING_BUFFER_SIZE));","807","        static RingBufferLogHandler SLAVE_LOG_HANDLER;","811","        final int ringBufferSize;","812","","813","        public SlaveInitializer(int ringBufferSize) {","814","            this.ringBufferSize = ringBufferSize;","815","        }","816","","818","            SLAVE_LOG_HANDLER = new RingBufferLogHandler(ringBufferSize);","819","","878","    \/\/ use RingBufferLogHandler class name to configure for backward compatibility","879","    private static final int DEFAULT_RING_BUFFER_SIZE = SystemProperties.getInteger(RingBufferLogHandler.class.getName() + \".defaultSize\", 256);","880",""],"delete":["543","        channel.call(new SlaveInitializer());","806","        static final RingBufferLogHandler SLAVE_LOG_HANDLER = new RingBufferLogHandler();"]}],"core\/src\/main\/java\/hudson\/WebAppMain.java":[{"add":["79","","80","    \/\/ use RingBufferLogHandler class name to configure for backward compatibility","81","    private static final int DEFAULT_RING_BUFFER_SIZE = SystemProperties.getInteger(RingBufferLogHandler.class.getName() + \".defaultSize\", 256);","82","","83","    private final RingBufferLogHandler handler = new RingBufferLogHandler(DEFAULT_RING_BUFFER_SIZE) {"],"delete":["79","    private final RingBufferLogHandler handler = new RingBufferLogHandler() {"]}],"core\/src\/main\/java\/hudson\/util\/RingBufferLogHandler.java":[{"add":["37","    private static final int DEFAULT_RING_BUFFER_SIZE = Integer.getInteger(RingBufferLogHandler.class.getName() + \".defaultSize\", 256);","43","    \/**","44","     * This constructor is deprecated. It can't access system properties with {@link jenkins.util.SystemProperties}","45","     * as it's not legal to use it on remoting agents.","46","     *\/","47","    @Deprecated"],"delete":["25","import jenkins.util.SystemProperties;","38","    private static final int DEFAULT_RING_BUFFER_SIZE = SystemProperties.getInteger(RingBufferLogHandler.class.getName() + \".defaultSize\", 256);"]}],"core\/src\/main\/java\/jenkins\/util\/SystemProperties.java":[{"add":["34","","35","import jenkins.util.io.OnMaster;","69","public class SystemProperties implements ServletContextListener, OnMaster {","92","    @SuppressFBWarnings(value = \"ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD\","],"delete":["67","public class SystemProperties implements ServletContextListener {","90","    @SuppressFBWarnings(value = \"ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD\", "]}]}},"17eedcfde8043829b247e639ae985ddb97dd0571":{"changes":{"core\/src\/main\/java\/jenkins\/triggers\/ReverseBuildTrigger.java":"MODIFY","test\/src\/test\/java\/jenkins\/triggers\/ReverseBuildTriggerTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/triggers\/ReverseBuildTrigger.java":[{"add":["68","import org.acegisecurity.AccessDeniedException;","115","","116","        boolean downstreamVisible = false;","117","        boolean downstreamDiscoverable = false;","118","","120","        try {","121","            downstreamVisible = jenkins.getItemByFullName(job.getFullName()) == job;","122","        } catch (AccessDeniedException ex) {","123","            \/\/ Fails because of missing Item.READ but upstream user has Item.DISCOVER","124","            downstreamDiscoverable = true;","125","        }","126","","133","","135","        Item authUpstream = null;","137","            authUpstream = jenkins.getItemByFullName(upstream.getFullName());","139","        } catch (AccessDeniedException ade) {","140","            \/\/ Fails because of missing Item.READ but downstream user has Item.DISCOVER","144","","145","        if(authUpstream != upstream) {","146","            if (downstreamVisible) {","147","                \/\/ TODO ModelHyperlink","148","                listener.getLogger().println(Messages.ReverseBuildTrigger_running_as_cannot_even_see_for_trigger_f(auth.getName(),","149","                        upstream.getFullName(), job.getFullName()));","150","            } else  {","151","                LOGGER.log(Level.WARNING, \"Running as {0} cannot even {1} {2} for trigger from {3}, (but cannot tell {4} that)\",","152","                        new Object [] { auth.getName(), downstreamDiscoverable ? \"READ\" : \"DISCOVER\", upstream, job, originalAuth.getName()});","153","            }","154","            return false;","155","        }","223",""],"delete":["115","        boolean downstreamVisible = jenkins.getItemByFullName(job.getFullName()) == job;","124","            if (jenkins.getItemByFullName(upstream.getFullName()) != upstream) {","125","                if (downstreamVisible) {","126","                    \/\/ TODO ModelHyperlink","127","                    listener.getLogger().println(Messages.ReverseBuildTrigger_running_as_cannot_even_see_for_trigger_f(auth.getName(), upstream.getFullName(), job.getFullName()));","128","                } else {","129","                    LOGGER.log(Level.WARNING, \"Running as {0} cannot even see {1} for trigger from {2} (but cannot tell {3} that)\", new Object[] {auth.getName(), upstream, job, originalAuth.getName()});","130","                }","131","                return false;","132","            }","204","        "]}],"test\/src\/test\/java\/jenkins\/triggers\/ReverseBuildTriggerTest.java":[{"add":["54","import org.jvnet.hudson.test.MockAuthorizationStrategy;","82","        MockAuthorizationStrategy auth = new MockAuthorizationStrategy()","83","                .grant(Jenkins.READ).everywhere().to(\"alice\", \"bob\")","84","                .grant(Computer.BUILD).everywhere().to(\"alice\", \"bob\")","85","                .grant(Jenkins.ADMINISTER).everywhere().to(\"admin\");","91","        auth.grant(Item.READ).onItems(downstream).to(\"alice\")","92","            .grant(Item.READ).onItems(upstream).to(\"bob\");","120","        auth.grant(Item.READ).onItems(upstream).to(\"alice\", \"bob\");","140","","141","        \/\/ Alice can only DISCOVER upstream, so downstream does not get built, but the upstream build cannot DISCOVER downstream","142","        auth = new MockAuthorizationStrategy()","143","                .grant(Jenkins.READ).everywhere().to(\"alice\", \"bob\")","144","                .grant(Computer.BUILD).everywhere().to(\"alice\", \"bob\")","145","                .grant(Jenkins.ADMINISTER).everywhere().to(\"admin\")","146","                .grant(Item.READ).onItems(upstream).to(\"bob\")","147","                .grant(Item.DISCOVER).onItems(upstream).to(\"alice\");","148","        r.jenkins.setAuthorizationStrategy(auth);","149","        auth.grant(Item.READ).onItems(downstream).to(\"alice\");","150","        qiaConfig = new HashMap<String,Authentication>();","151","        qiaConfig.put(upstreamName, User.get(\"bob\").impersonate());","152","        qiaConfig.put(downstreamName, User.get(\"alice\").impersonate());","153","        QueueItemAuthenticatorConfiguration.get().getAuthenticators().replace(new MockQueueItemAuthenticator(qiaConfig));","154","        b = r.buildAndAssertSuccess(upstream);","155","        r.assertLogNotContains(downstreamName, b);","156","        r.waitUntilNoActivity();","157","        assertEquals(3, downstream.getLastBuild().number);","158","","159","        \/\/ A QIA is configured but does not specify any authentication for downstream, anonymous can only DISCOVER upstream","160","        \/\/ so no message is printed about it, and no Exception neither (JENKINS-42707)","161","        auth.grant(Item.READ).onItems(upstream).to(\"bob\");","162","        auth.grant(Item.DISCOVER).onItems(upstream).to(\"anonymous\");","163","        qiaConfig = new HashMap<String,Authentication>();","164","        qiaConfig.put(upstreamName, User.get(\"bob\").impersonate());","165","        QueueItemAuthenticatorConfiguration.get().getAuthenticators().replace(new MockQueueItemAuthenticator(qiaConfig));","166","        b = r.buildAndAssertSuccess(upstream);","167","        r.assertLogNotContains(downstreamName, b);","168","        r.assertLogNotContains(\"Please login to access job \" + upstreamName, b);","169","        r.waitUntilNoActivity();","170","        assertEquals(3, downstream.getLastBuild().number);"],"delete":["35","import hudson.security.AuthorizationMatrixProperty;","36","import hudson.security.Permission;","37","import hudson.security.ProjectMatrixAuthorizationStrategy;","42","import java.util.Arrays;","45","import java.util.HashSet;","47","import java.util.Set;","87","        ProjectMatrixAuthorizationStrategy auth = new ProjectMatrixAuthorizationStrategy();","88","        auth.add(Jenkins.READ, \"alice\");","89","        auth.add(Computer.BUILD, \"alice\");","90","        auth.add(Jenkins.ADMINISTER, \"admin\");","91","        auth.add(Jenkins.READ, \"bob\");","92","        auth.add(Computer.BUILD, \"bob\");","98","        Map<Permission,Set<String>> perms = new HashMap<Permission,Set<String>>();","99","        perms.put(Item.READ, Collections.singleton(\"alice\"));","100","        downstream.addProperty(new AuthorizationMatrixProperty(perms));","101","        perms = new HashMap<Permission,Set<String>>();","102","        perms.put(Item.READ, Collections.singleton(\"bob\"));","103","        upstream.addProperty(new AuthorizationMatrixProperty(perms));","131","        perms = new HashMap<Permission,Set<String>>();","132","        perms.put(Item.READ, new HashSet<String>(Arrays.asList(\"alice\", \"bob\")));","133","        upstream.removeProperty(AuthorizationMatrixProperty.class);","134","        upstream.addProperty(new AuthorizationMatrixProperty(perms));"]}]}},"df9adaf8f1e23d57c60ec9fb9313287f6d458c7c":{"changes":{"core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ListViewTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["172","        Iterable<? extends TopLevelItem> candidates;","173","        if (recurse) {","174","            candidates = Items.getAllItems(parent, TopLevelItem.class);","175","        } else {","176","            candidates = parent.getItems();","177","        }","178","        for (TopLevelItem item : candidates) {"],"delete":["172","        for (TopLevelItem item : Items.getAllItems(getOwnerItemGroup(), TopLevelItem.class)) {"]}],"test\/src\/test\/java\/hudson\/model\/ListViewTest.java":[{"add":["121","        v.setRecurse(true);"],"delete":[]}]}},"46339e1043244a63dc855c3f66473f7329f16671":{"changes":{"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":[{"add":["1039","            if(tagName==null && !Hudson.isAdmin())","1040","                return null;","1045","            if(tagName==null)","1046","                return \"Tag this build\";","1047","            if(tagName.indexOf(' ')>=0)","1048","                return \"CVS tags\";","1049","            else","1050","                return \"CVS tag\";","1085","            if(!Hudson.adminCheck(req,rsp))","1086","                return;","1087","","1135","            if(!Hudson.adminCheck(req,rsp))","1136","                return;","1137",""],"delete":["1043","            return \"Tag this build\";"]}]}},"e38a97d4aa403628fac12fdc439c3a1901073650":{"changes":{"core\/src\/main\/java\/hudson\/model\/Slave.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Slave.java":[{"add":["148","    private \/*almost final*\/ DescribableList<NodeProperty<?>,NodePropertyDescriptor> nodeProperties =","149","            new DescribableList<>(this);","561","            nodeProperties = new DescribableList<>(this);"],"delete":["148","    private \/*almost final*\/ DescribableList<NodeProperty<?>,NodePropertyDescriptor> nodeProperties = ","149","                                    new DescribableList<NodeProperty<?>,NodePropertyDescriptor>(Jenkins.getInstance().getNodesObject());","561","            nodeProperties = new DescribableList<NodeProperty<?>,NodePropertyDescriptor>(Jenkins.getInstance().getNodesObject());"]}]}},"c6190cb707227255e956cdaaa22da8e311e847e9":{"changes":{"core\/src\/main\/resources\/lib\/form\/breadcrumb-config-outline\/init.js":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/breadcrumb-config-outline\/init.js":[{"add":["12","            $(e.section).insert({top:\"<a id=\" + id + \" class='section-anchor'>#<\/a>\"});"],"delete":["12","            $(e.section).insert({top:\"<a id=\" + id + \" class='section-anchor'>#<;\/a>\"});"]}]}},"8a46a4c0d4962a3a48e460de176b79edcc68e6cd":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/test\/TestResult\/index_ru.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/test\/TestResult\/index_ru.properties":[{"add":["22","took=\\u0417\\u0430\\u043d\\u044f\\u043b\\u043e {0}."],"delete":["22","took=\\u0417\\u0430\\u043D\\u044F\\u043B\\u043E {}."]}]}},"1bf958afb196d0c56b37f00681027a549d0c9189":{"changes":{"test\/src\/test\/groovy\/hudson\/matrix\/MatrixProjectTest.groovy":"MODIFY"},"diff":{"test\/src\/test\/groovy\/hudson\/matrix\/MatrixProjectTest.groovy":[{"add":["473","    @Bug(17337)","474","    @Test public void reload() throws Exception {","475","        MatrixProject p = j.createMatrixProject();","476","        AxisList axes = new AxisList();","477","        axes.add(new TextAxis(\"p\", \"only\"));","478","        p.setAxes(axes);","479","        String n = p.getFullName();","480","        j.buildAndAssertSuccess(p);","481","        j.jenkins.reload();","482","        p = j.jenkins.getItemByFullName(n, MatrixProject.class);","483","        assertNotNull(p);","484","        MatrixConfiguration c = p.getItem(\"p=only\");","485","        assertNotNull(c);","486","        assertNotNull(c.getBuildByNumber(1));","487","    }","488",""],"delete":[]}]}},"904343394a04195ce3fa8ebee35c202e8feef42f":{"changes":{"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":[{"add":["687","                            task.setPackage(getAllModulesNormalized());"],"delete":["687","                            task.setPackage(module);"]}]}},"4c592656e847c12dc6fc1b7e5a383aca036e8c88":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":[{"add":["158","    \/**","159","     * The time to wait between sending Ctrl+C and killing the process. (JENKINS-17116)","160","     *","161","     * The default is 5 seconds. Careful! There are other timers in the system that may","162","     * interfere with this value here, e.g. in org.jenkinsci.plugins.workflow.cps.CpsThread.stop","163","     *\/","164","    private final long softKillWaitSeconds = Integer.getInteger(\"SoftKillWaitSeconds\", 5);"],"delete":["158","    private final long softKillWaitSeconds = Integer.getInteger(\"SoftKillWaitSeconds\", 2 * 60); \/\/ by default processes get at most 2 minutes to respond to SIGTERM (JENKINS-17116)"]}]}},"d2c9d7346f0b6f1a66ea466602eb5a79b2730931":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/XmlFile.java":"MODIFY"},"diff":{"changelog.html":[{"add":["58","    Fixed the XML encoding sniffing problem in environments that have old JAXP","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-4525\">issue 4525<\/a>)","60","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/hudson\/XmlFile.java":[{"add":["263","                    \/\/ if we still haven't found it at the first start element, then we are not going to find it.","280","            if(e.encoding!=null)","281","                return e.encoding;","282","            \/\/ the environment can contain old version of Xerces and others that do not support Locator2","283","            \/\/ in such a case, assume UTF-8 rather than fail, since Jenkins internally always write XML in UTF-8","284","            return \"UTF-8\";"],"delete":["263","                    \/\/ if we still haven't found it at the first start element,","264","                    \/\/ there's something wrong.","281","            if(e.encoding==null)","282","                throw new IOException(\"Failed to detect encoding of \"+file);","283","            return e.encoding;"]}]}},"05a26da704b9fce80527f5dd6fc32bf57bb2089c":{"changes":{"core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["723","            \/* There may be busy executors with higher index, so only","724","               fill up until numExecutors is reached.","725","               Extra executors will call removeExecutor(...) and that","726","               will create any necessary executors from #0 again. *\/","727","            if (executors.size() < numExecutors) {","728","                Executor e = new Executor(this, number);","729","                executors.add(e);","730","            }","732",""],"delete":["723","            Executor e = new Executor(this, number);","724","            executors.add(e);"]}]}},"cb623640ccd820ad0540efc3b50cc596626e43a2":{"changes":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":[{"add":["390","        d.renameTo(\"d2\");","391","        p = jenkins.getItemByFullName(\"d2\/edited\");","392","        p._getRuns().purgeCache();","393","        assertEquals(1, p.getBuilds().size());"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["30","import com.infradna.tool.bridge_method_injector.WithBridgeMethods;","33","import hudson.EnvVars;","34","import hudson.Extension;","35","import hudson.ExtensionPoint;","38","import hudson.Functions;","57","import hudson.model.queue.QueueTaskFuture;","58","import hudson.model.queue.ScheduleResult;","59","import hudson.model.queue.SubTask;","66","","67","import static hudson.scm.PollingResult.*;","113","import javax.annotation.Nonnull;","114","import javax.servlet.ServletException;","116","import jenkins.model.Jenkins;","117","import jenkins.model.JenkinsLocationConfiguration;","118","import jenkins.model.ModelObjectWithChildren;","119","import jenkins.model.Uptime;","120","import jenkins.model.lazy.AbstractLazyLoadRunMap.Direction;","121","import jenkins.scm.DefaultSCMCheckoutStrategyImpl;","122","import jenkins.scm.SCMCheckoutStrategy;","123","import jenkins.scm.SCMCheckoutStrategyDescriptor;","124","import jenkins.util.TimeDuration;","125","import net.sf.json.JSONObject;","126","import org.acegisecurity.Authentication;","127","import org.acegisecurity.context.SecurityContext;","128","import org.acegisecurity.context.SecurityContextHolder;","129","import org.jenkinsci.bytecode.AdaptField;","130","import org.kohsuke.accmod.Restricted;","131","import org.kohsuke.accmod.restrictions.DoNotUse;","132","import org.kohsuke.accmod.restrictions.NoExternalUse;","133","import org.kohsuke.args4j.Argument;","134","import org.kohsuke.args4j.CmdLineException;","135","import org.kohsuke.stapler.Ancestor;","136","import org.kohsuke.stapler.AncestorInPath;","137","import org.kohsuke.stapler.ForwardToView;","138","import org.kohsuke.stapler.HttpRedirect;","139","import org.kohsuke.stapler.HttpResponse;","140","import org.kohsuke.stapler.HttpResponses;","141","import org.kohsuke.stapler.QueryParameter;","142","import org.kohsuke.stapler.StaplerRequest;","143","import org.kohsuke.stapler.StaplerResponse;","144","import org.kohsuke.stapler.export.Exported;","145","import org.kohsuke.stapler.interceptor.RequirePOST;","2418","    @Restricted(DoNotUse.class)","2419","    @Extension public static final class ItemListenerImpl extends ItemListener {","2420","        @Override public void onLocationChanged(Item item, String oldFullName, String newFullName) {","2421","            if (item instanceof AbstractProject) {","2422","                AbstractProject p = (AbstractProject) item;","2423","                p.builds.updateBaseDir(p.getBuildDir());","2424","            }","2425","        }","2426","    }","2427",""],"delete":["29","import com.infradna.tool.bridge_method_injector.WithBridgeMethods;","30","import hudson.EnvVars;","31","import hudson.ExtensionPoint;","32","import hudson.Functions;","50","import hudson.model.queue.QueueTaskFuture;","51","import hudson.model.queue.ScheduleResult;","52","import hudson.model.queue.SubTask;","87","import jenkins.model.Jenkins;","88","import jenkins.model.JenkinsLocationConfiguration;","89","import jenkins.model.ModelObjectWithChildren;","90","import jenkins.model.Uptime;","91","import jenkins.model.lazy.AbstractLazyLoadRunMap.Direction;","92","import jenkins.scm.DefaultSCMCheckoutStrategyImpl;","93","import jenkins.scm.SCMCheckoutStrategy;","94","import jenkins.scm.SCMCheckoutStrategyDescriptor;","95","import jenkins.util.TimeDuration;","96","import net.sf.json.JSONObject;","97","import org.acegisecurity.Authentication;","98","import org.acegisecurity.context.SecurityContext;","99","import org.acegisecurity.context.SecurityContextHolder;","100","import org.jenkinsci.bytecode.AdaptField;","101","import org.kohsuke.accmod.Restricted;","102","import org.kohsuke.accmod.restrictions.NoExternalUse;","103","import org.kohsuke.args4j.Argument;","104","import org.kohsuke.args4j.CmdLineException;","105","import org.kohsuke.stapler.Ancestor;","106","import org.kohsuke.stapler.AncestorInPath;","107","import org.kohsuke.stapler.ForwardToView;","108","import org.kohsuke.stapler.HttpRedirect;","109","import org.kohsuke.stapler.HttpResponse;","110","import org.kohsuke.stapler.HttpResponses;","111","import org.kohsuke.stapler.QueryParameter;","112","import org.kohsuke.stapler.StaplerRequest;","113","import org.kohsuke.stapler.StaplerResponse;","114","import org.kohsuke.stapler.export.Exported;","115","import org.kohsuke.stapler.interceptor.RequirePOST;","116","","117","import javax.annotation.Nonnull;","118","import javax.servlet.ServletException;","141","","142","import static hudson.scm.PollingResult.*;","1674","    @Override","1675","    public void renameTo(String newName) throws IOException {","1676","        super.renameTo(newName);","1677","        \/\/ Update locations inside builds cache","1678","        builds.updateBaseDir(getBuildDir());","1679","    }","1680",""]}],"changelog.html":[{"add":["68","  <li class=\"major bug\">","69","    Builds can seem to disappear from a job in a folder if that folder is renamed.","70","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18694\">issue 18694<\/a>)"],"delete":[]}]}},"bd87d70b3aa6cd8d13dbeae56b3c09fc425e2442":{"changes":{"test\/src\/test\/java\/hudson\/ClassicPluginStrategyTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/ClassicPluginStrategyTest.java":[{"add":["26","import org.jvnet.hudson.test.Bug;","74","     * Check transitive dependency exclude disabled plugins","77","    @Bug(18654)","87","                fail(\"disabled dependency should not be included\");"],"delete":["84","                fail(\"disabled dependency should be included\");"]}]}},"8940249652284189454a43ba858f7b239c1071af":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["183","      <version>1.7<\/version>"],"delete":["183","      <version>1.6<\/version>"]}]}},"d660d60ea7e2e411972b215fc7f6fee9ff03e329":{"changes":{"core\/src\/main\/resources\/jenkins\/triggers\/ReverseBuildTrigger\/config.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/BuildTrigger\/config.jelly":"MODIFY","core\/src\/main\/resources\/lib\/form\/radio.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/triggers\/ReverseBuildTrigger\/config.jelly":[{"add":["31","        <f:radio name=\"ReverseBuildTrigger.threshold\" checked=\"${instance.threshold==null || instance.threshold.toString()=='SUCCESS'}\"","35","        <f:radio name=\"ReverseBuildTrigger.threshold\" checked=\"${instance.threshold.toString()=='UNSTABLE'}\"","39","        <f:radio name=\"ReverseBuildTrigger.threshold\" checked=\"${instance.threshold.toString()=='FAILURE'}\""],"delete":["31","        <f:radio name=\"threshold\" checked=\"${instance.threshold==null || instance.threshold.toString()=='SUCCESS'}\"","35","        <f:radio name=\"threshold\" checked=\"${instance.threshold.toString()=='UNSTABLE'}\"","39","        <f:radio name=\"threshold\" checked=\"${instance.threshold.toString()=='FAILURE'}\""]}],"core\/src\/main\/resources\/hudson\/tasks\/BuildTrigger\/config.jelly":[{"add":["34","      <f:radio name=\"BuildTrigger.threshold\" checked=\"${instance.threshold==null || instance.threshold.toString()=='SUCCESS'}\"","38","      <f:radio name=\"BuildTrigger.threshold\" checked=\"${instance.threshold.toString()=='UNSTABLE'}\"","42","      <f:radio name=\"BuildTrigger.threshold\" checked=\"${instance.threshold.toString()=='FAILURE'}\""],"delete":["34","      <f:radio name=\"threshold\" checked=\"${instance.threshold==null || instance.threshold.toString()=='SUCCESS'}\"","38","      <f:radio name=\"threshold\" checked=\"${instance.threshold.toString()=='UNSTABLE'}\"","42","      <f:radio name=\"threshold\" checked=\"${instance.threshold.toString()=='FAILURE'}\""]}],"core\/src\/main\/resources\/lib\/form\/radio.jelly":[{"add":["31","    Beware that the name attribute should be uniquified among all radio blocks on the page, such as by prefixing it with \"G0025.\" or whatever gensym."],"delete":[]}],"changelog.html":[{"add":["60","  <li class=bug>","61","    Failed to correctly resave a project configuration containing both a forward and a reverse build trigger.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-23191\">issue 23191<\/a>)"],"delete":[]}]}},"4a1667146d096c650a707a52b7411fcbe0fe0e28":{"changes":{"core\/src\/main\/java\/hudson\/search\/FixedSet.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/search\/FixedSet.java":[{"add":["52","            if (name != null && (name.equals(token) || (caseInsensitive && name.equalsIgnoreCase(token)))) {","62","            if (name != null && (name.contains(token) || (caseInsensitive && StringUtils.containsIgnoreCase(name, token)))) {"],"delete":["52","            if (name.equals(token) || (caseInsensitive && name.equalsIgnoreCase(token))) {","62","            if (name.contains(token) || (caseInsensitive && StringUtils.containsIgnoreCase(name, token))) {"]}]}},"d33e22d392a3f7346f9cd9a9f87b79485fdbee37":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/MyViewsProperty.java":"MODIFY"},"diff":{"changelog.html":[{"add":["66","  <li class=bug>","67","    \u201DMy Views\" links leads to 404 Not Found.","68","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17317\">issue 17317<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/MyViewsProperty.java":[{"add":["147","        return new HttpRedirect(\"view\/\" + Util.encode(getPrimaryView().getViewName()) + \"\/\");","264","   "],"delete":["147","        return new HttpRedirect(\"view\/\" + getPrimaryView().getViewName() + \"\/\");","264","    "]}]}},"f3701da9e215abeaadef39c1f47021cb6e4d479b":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/java\/hudson\/model\/DownloadService.java":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["1957","\/**","1958"," * Loads a dynamically created invisible IFRAME.","1959"," *\/","1960","function createIframe(src,callback) {","1961","    var iframe = document.createElement(\"iframe\");","1962","    iframe.src = src;","1963","    iframe.style.display = \"none\";","1964","","1965","    var done = false;","1966","    iframe.onload = iframe.onreadystatechange = function() {","1967","        if ( !done && (!this.readyState ||","1968","                this.readyState === \"loaded\" || this.readyState === \"complete\") ) {","1969","            done = true;","1970","            callback();","1971","        }","1972","    };","1973","","1974","    document.body.appendChild(iframe);","1975","    return iframe;","1976","}","1977","","1982","        var tag = {id:id,postBack:postBack,completionHandler:completionHandler,received:false};","1983","        this.continuations[id] = tag;","1984","","1985","        \/\/ use JSONP to download the data","1986","        function fallback() {","1987","            loadScript(url+\"?id=\"+id+'&'+Hash.toQueryString(info));","1988","        }","1989","","1990","        if (window.postMessage) {","1991","            \/\/ try downloading the postMessage version of the data,","1992","            \/\/ if we don't receive postMessage (which probably means the server isn't ready with these new datasets),","1993","            \/\/ fallback to JSONP","1994","            tag.iframe = createIframe(url+\".html\",function() {","1995","                window.setTimeout(function() {","1996","                    if (!tag.received)","1997","                        fallback();","1998","                },100); \/\/ bit of delay in case onload on our side fires first","1999","            });","2000","        } else {","2001","            \/\/ this browser doesn't support postMessage","2002","            fallback();","2003","        }","2004","","2005","        \/\/ NOTE:","2006","        \/\/   the only reason we even try fallback() is in case our server accepts the submission without a signature","2007","        \/\/   (which it really shouldn't)","2008","    },","2009","","2010","    \/**","2011","     * Call back to postMessage","2012","     *\/","2013","    receiveMessage : function(ev) {","2014","        var self = this;","2015","        Object.values(this.continuations).each(function(tag) {","2016","            if (tag.iframe.contentWindow==ev.source) {","2017","                self.post(tag.id,JSON.parse(ev.data));","2018","            }","2019","        })","2028","        var tag = this.continuations[id];","2029","        if (tag==undefined) {","2034","        tag.received = true;","2035","","2037","        new Ajax.Request(tag.postBack, {","2042","                if(tag.completionHandler!=null)","2043","                    tag.completionHandler();","2054","YAHOO.util.Event.addListener(window, \"message\", function(ev) { downloadService.receiveMessage(ev); })","2055",""],"delete":["1961","        this.continuations[id] = {postBack:postBack,completionHandler:completionHandler};","1962","        loadScript(url+\"?id=\"+id+'&'+Hash.toQueryString(info));","1971","        var o = this.continuations[id];","1972","        if (o==undefined) {","1978","        new Ajax.Request(o.postBack, {","1983","                if(o.completionHandler!=null)","1984","                    o.completionHandler();"]}],"core\/src\/main\/java\/hudson\/model\/DownloadService.java":[{"add":["65","        if (doesNotSupportPostMessage())  return \"\";","66","","93","    private boolean doesNotSupportPostMessage() {","94","        StaplerRequest req = Stapler.getCurrentRequest();","95","        if (req==null)      return false;","96","","97","        String ua = req.getHeader(\"User-Agent\");","98","        if (ua==null)       return false;","99","","100","        \/\/ according to http:\/\/caniuse.com\/#feat=x-doc-messaging, IE <=7 doesn't support pstMessage","101","        \/\/ see http:\/\/www.useragentstring.com\/pages\/Internet%20Explorer\/ for user agents","102","","103","        \/\/ we want to err on the cautious side here.","104","        \/\/ Because of JENKINS-15105, we can't serve signed metadata from JSON, which means we need to be","105","        \/\/ using a modern browser as a vehicle to request these data. This check is here to prevent Jenkins","106","        \/\/ from using older browsers that are known not to support postMessage as the vehicle.","107","        return ua.contains(\"Windows\") && (ua.contains(\" MSIE 5.\") || ua.contains(\" MSIE 6.\") || ua.contains(\" MSIE 7.\"));","108","    }","109",""],"delete":["65","    \t"]}]}},"aa554ea5fdcf9a7bb0889ac6bd7024a65e109b49":{"changes":{"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/index_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/diagnosis\/OldDataMonitor\/message_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/sidepanel_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Computer\/sidepanel_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/DirectoryBrowserSupport\/dir_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/views\/LastFailureColumn\/column_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/NoFingerprintMatch\/index_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/BatchFile\/config_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Computer\/index_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/ParametersDefinitionProperty\/index_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/layout\/task_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/User\/index_ru.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/login_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/security\/SecurityRealm\/loginLink_ru.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/People\/index_ru.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/management\/PluginsLink\/info_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/layout\/breadcrumbBar_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/views\/DefaultViewsTabBar\/viewTabs_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/ParametersDefinitionProperty\/config_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/test\/bar_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/main_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Computer\/_script_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/views\/BuildButtonColumn\/column_ru.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/projectRelationship-help_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/project\/upstream-downstream_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/sidepanel_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/matrix\/MatrixBuild\/ajaxMatrix_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Job\/rename_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/layout\/progressiveRendering_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/search\/UserSearchProperty\/config_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/project\/config-retryCount_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/LoadStatistics\/main_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/views\/LastDurationColumn\/column_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/layout\/layout_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/success_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/project\/config-blockWhenDownstreamBuilding_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/project\/config-concurrentBuild_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/table_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/loginLink_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/diagnosis\/TooManyJobsButNoView\/message_ru.properties":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/buildProgressBar_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Job\/configure_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/FreeStyleProject\/newJobDetail_ru.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/index_ru.properties":[{"add":["22","Project=\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442","23","Project\\ name=\\u0418\\u043c\\u044f \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\\u0430"],"delete":["22","Project=\\u043F\\u0440\\u043E\\u0435\\u043A\\u0442","23","Project\\ name=\\u0418\\u043C\\u044F \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430"]}],"core\/src\/main\/resources\/hudson\/diagnosis\/OldDataMonitor\/message_ru.properties":[{"add":["2","Dismiss=\\u0423\\u0431\\u0440\\u0430\\u0442\\u044c","3","Manage=\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0438\\u0442\\u044c","4","You\\ have\\ data\\ stored\\ in\\ an\\ older\\ format\\ and\/or\\ unreadable\\ data.=\\u0424\\u0430\\u0439\\u043b\\u044b \\u043a\\u043e\\u043d\\u0444\\u0438\\u0433\\u0443\\u0440\\u0430\\u0446\\u0438\\u0438 \\u0441\\u043e\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442 \\u0443\\u0441\\u0442\\u0430\\u0440\\u0435\\u0432\\u0448\\u0438\\u0435 \\u0438\/\\u0438\\u043b\\u0438 \\u043d\\u0435\\u0447\\u0438\\u0442\\u0430\\u0435\\u043c\\u044b\\u0435 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435."],"delete":["2","Dismiss=\\u0423\\u0431\\u0440\\u0430\\u0442\\u044C","3","Manage=\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0438\\u0442\\u044C","4","You\\ have\\ data\\ stored\\ in\\ an\\ older\\ format\\ and\/or\\ unreadable\\ data.=\\u0423 \\u0432\\u0430\\u0441 \\u0438\\u043C\\u0435\\u044E\\u0442\\u0441\\u044F \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435, \\u0445\\u0440\\u0430\\u043D\\u044F\\u0449\\u0438\\u0435\\u0441\\u044F \\u0432 \\u0443\\u0441\\u0442\\u0430\\u0440\\u0435\\u0432\\u0448\\u0435\\u043C \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u0435 \\u0438\/\\u0438\\u043B\\u0438 \\u043D\\u0435\\u0447\\u0438\\u0442\\u0430\\u0435\\u043C\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435."]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/sidepanel_ru.properties":[{"add":["22","Back\\ to\\ Dashboard=\\u0412\\u0435\\u0440\\u043d\\u0443\\u0442\\u044c\\u0441\\u044f \\u043a \\u0433\\u043b\\u0430\\u0432\\u043d\\u043e\\u0439 \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0435","23","Manage\\ Jenkins=\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0438\\u0442\\u044c Jenkins","24","Manage\\ Plugins=\\u0423\\u043f\\u0440\\u0430\\u0432\\u043b\\u0435\\u043d\\u0438\\u0435 \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d\\u0430\\u043c\\u0438"],"delete":["22","Back\\ to\\ Dashboard=\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A \\u0433\\u043B\\u0430\\u0432\\u043D\\u043E\\u0439 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0435","23","Manage\\ Jenkins=","24","Manage\\ Plugins=\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043B\\u0430\\u0433\\u0438\\u043D\\u0430\\u043C\\u0438"]}],"core\/src\/main\/resources\/hudson\/model\/Computer\/sidepanel_ru.properties":[{"add":["24","Configure=\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0438\\u0442\\u044c","25","Delete\\ Slave=\\u0423\\u0434\\u0430\\u043b\\u0438\\u0442\\u044c \\u043f\\u043e\\u0434\\u0447\\u0438\\u043d\\u0435\\u043d\\u043d\\u044b\\u0439 \\u0443\\u0437\\u0435\\u043b","26","Load\\ Statistics=\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0430 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f"],"delete":["24","Configure=\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0438\\u0442\\u044C","25","Delete\\ Slave=\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u0447\\u0438\\u043D\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0443\\u0437\\u0435\\u043B","26","Load\\ Statistics=\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043D\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438"]}],"core\/src\/main\/resources\/hudson\/model\/DirectoryBrowserSupport\/dir_ru.properties":[{"add":["24","view=\\u041f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440"],"delete":["24","view=\\u043F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C"]}],"core\/src\/main\/resources\/hudson\/views\/LastFailureColumn\/column_ru.properties":[{"add":["22","N\/A=\\u041d\/\\u0414"],"delete":["22","N\/A=\\u041D\\u0435\\u0438\\u0437\\u0432\\u0435\\u0441\\u0442\\u043D\\u043E."]}],"core\/src\/main\/resources\/hudson\/model\/NoFingerprintMatch\/index_ru.properties":[{"add":["2","Back\\ to\\ Dashboard=\\u0412\\u0435\\u0440\\u043d\\u0443\\u0442\\u044c\\u0441\\u044f \\u043a \\u043f\\u0440\\u0438\\u0431\\u043e\\u0440\\u043d\\u043e\\u0439 \\u043f\\u0430\\u043d\\u0435\\u043b\\u0438","3","No\\ matching\\ record\\ found=\\u0421\\u043e\\u043e\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0443\\u044e\\u0449\\u0438\\u0445 \\u0437\\u0430\\u043f\\u0438\\u0441\\u0435\\u0439 \\u043d\\u0435 \\u043d\\u0430\\u0439\\u0434\\u0435\\u043d\\u043e","4","cause.1=\\","5","   \\u0412\\u0435\\u0440\\u043e\\u044f\\u0442\\u043d\\u043e, \\u0434\\u0430\\u043d\\u043d\\u044b\\u0439 \\u0444\\u0430\\u0439\\u043b \\u043d\\u0435 \\u0431\\u044b\\u043b \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d \\u0432 Jenkins. \\","6","   \\u0414\\u0430\\u043d\\u043d\\u0430\\u044f \\u0432\\u0435\\u0440\\u0441\\u0438\\u044f \\u043c\\u043e\\u0433\\u043b\\u0430 \\u0431\\u044b\\u0442\\u044c \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d\\u0430 \\u043b\\u043e\\u043a\\u0430\\u043b\\u044c\\u043d\\u043e \\u043e\\u0434\\u043d\\u0438\\u043c \\u0438\\u0437 \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0435\\u0439.","7","cause.2=\\","8","   \\u0412\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e, \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b \\u043d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0435\\u043d\\u044b \\u043d\\u0435\\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u043e, \\u0438\\u0437-\\u0437\\u0430 \\u0447\\u0435\\u0433\\u043e \\u043e\\u0442\\u043f\\u0435\\u0447\\u0430\\u0442\\u043a\\u0438 \\u043e\\u0442\\u043f\\u0435\\u0447\\u0430\\u0442\\u043a\\u0438 \\u043d\\u0435 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u044e\\u0442\\u0441\\u044f.\\","9","   \\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u044c\\u0442\\u0435 \\u043d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0438 \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\\u0430.","10","description=\\u041e\\u0442\\u043f\\u0435\\u0447\\u0430\\u0442\\u043e\\u043a {0} \\u043d\\u0435 \\u0441\\u043e\\u043e\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043d\\u0438 \\u043e\\u0434\\u043d\\u043e\\u043c\\u0443 \\u0438\\u0437 \\u0437\\u0430\\u043f\\u0438\\u0441\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445."],"delete":["2","Back\\ to\\ Dashboard=\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A \\u043F\\u0440\\u0438\\u0431\\u043E\\u0440\\u043D\\u043E\\u0439 \\u043F\\u0430\\u043D\\u0435\\u043B\\u0438","3","No\\ matching\\ record\\ found=\\u0421\\u043E\\u043E\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0443\\u044E\\u0449\\u0438\\u0445 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E","4","cause.1=\\u0412\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E, \\u0444\\u0430\\u0439\\u043B \\u043D\\u0435 \\u0431\\u044B\\u043B \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D \\u043F\\u043E\\u0434 \\u0414\\u0436\\u0435\\u043D\\u043A\\u0438\\u043D\\u0441. \\u041C\\u043E\\u0436\\u0435\\u0442 \\u0431\\u044B\\u0442\\u044C, \\u044D\\u0442\\u043E \\u0432\\u0435\\u0440\\u0441\\u0438\\u044F, \\u0447\\u0442\\u043E \\u043A\\u0442\\u043E-\\u0442\\u043E \\u043F\\u043E\\u0441\\u0442\\u0440\\u043E\\u0438\\u043B \\u043B\\u043E\\u043A\\u0430\\u043B\\u044C\\u043D\\u043E \\u043D\\u0430 \\u0435\\u0433\\u043E \/ \\u0435\\u0435 \\u0441\\u043E\\u0431\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u043E\\u0439 \\u043C\\u0430\\u0448\\u0438\\u043D\\u0435.","5","cause.2=\\u0412\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E, \\u044D\\u0442\\u0438 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0435\\u043D \\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u043E, \\u0430 \\u043D\\u0435 \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C \\u043E\\u0442\\u043F\\u0435\\u0447\\u0430\\u0442\\u043A\\u043E\\u0432 \\u043F\\u0430\\u043B\\u044C\\u0446\\u0435\\u0432. \\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u044C\\u0442\\u0435 \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430.","6","description=\\u041E\\u0442\\u043F\\u0435\\u0447\\u0430\\u0442\\u043A\\u0430\\u043C \\u043F\\u0430\\u043B\\u044C\\u0446\\u0435\\u0432 {0} \\u043D\\u0435 \\u0441\\u043E\\u043E\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043D\\u0438 \\u043E\\u0434\\u043D\\u043E\\u043C\\u0443 \\u0438\\u0437 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445."]}],"core\/src\/main\/resources\/hudson\/tasks\/BatchFile\/config_ru.properties":[{"add":["2","Command=\\u041a\\u043e\\u043c\\u0430\\u043d\\u0434\\u0430"],"delete":["2","Command=\\u041A\\u043E\\u043C\\u043C\\u0430\\u043D\\u0434\\u0430"]}],"core\/src\/main\/resources\/hudson\/model\/Computer\/index_ru.properties":[{"add":["22","Labels:=\\u041c\\u0435\\u0442\\u043a\\u0438:","23","None=\\u041d\\u0435\\u0442 \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u0438","24","submit.not.temporarilyOffline=\\u041f\\u043e\\u043c\\u0435\\u0442\\u0438\\u0442\\u044c \\u044d\\u0442\\u043e\\u0442 \\u0443\\u0437\\u0435\\u043b \\u043a\\u0430\\u043a \\u043a\\u0430\\u043a \\u0432\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u043e \\u043d\\u0435\\u0434\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b\\u0439","25","submit.temporarilyOffline=\\u0412\\u043a\\u043b\\u044e\\u0447\\u0438\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0439 \\u0443\\u0437\\u0435\\u043b","26","submit.updateOfflineCause=\\u041e\\u0431\\u043d\\u043e\\u0432\\u0438\\u0442\\u044c \\u043f\\u0440\\u0438\\u0447\\u0438\\u043d\\u0443 \\u043e\\u0442\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u044f","27","title.projects_tied_on=\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b, \\u043f\\u0440\\u0438\\u0432\\u044f\\u0437\\u0430\\u043d\\u043d\\u044b\\u0435 \\u043a {0}"],"delete":["22","Labels:=\\u041C\\u0435\\u0442\\u043A\\u0438:","23","None=\\u041D\\u0435\\u0442 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438","24","submit.not.temporarilyOffline=\\u041F\\u043E\\u043C\\u0435\\u0442\\u0438\\u0442\\u044C \\u044D\\u0442\\u043E\\u0442 \\u0443\\u0437\\u0435\\u043B \\u043A\\u0430\\u043A \\u043A\\u0430\\u043A \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u043E \\u043D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0439","25","submit.temporarilyOffline=\\u0412\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u0443\\u0437\\u0435\\u043B","26","submit.updateOfflineCause=\\u0417\\u0430\\u0434\\u0430\\u0442\\u044C \\u043F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0443 \\u043E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u0438\\u044F","27","title.projects_tied_on=\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B \\u043D\\u0430 {0}"]}],"core\/src\/main\/resources\/hudson\/model\/ParametersDefinitionProperty\/index_ru.properties":[{"add":["2","Build=\\u0421\\u043e\\u0431\\u0440\\u0430\\u0442\\u044c","3","LOADING=\\u0417\\u0410\\u0413\\u0420\\u0423\\u0417\\u041a\\u0410","4","description=\\u0414\\u043b\\u044f \\u044d\\u0442\\u043e\\u0439 \\u0441\\u0431\\u043e\\u0440\\u043a\\u0438 \\u043d\\u0435\\u043e\\u0431\\u0445\\u043e\\u0434\\u0438\\u043c\\u044b \\u0441\\u043b\\u0435\\u0434\\u0443\\u044e\\u0449\\u0438\\u0435 \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u044b:"],"delete":["2","Build=\\u0421\\u043E\\u0431\\u0440\\u0430\\u0442\\u044C","3","LOADING=\\u0417\\u0410\\u0413\\u0420\\u0423\\u0417\\u041A\\u0410","4","description=\\u0414\\u043B\\u044F \\u044D\\u0442\\u043E\\u0439 \\u0441\\u0431\\u043E\\u0440\\u043A\\u0438 \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u044B \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B:"]}],"core\/src\/main\/resources\/lib\/layout\/task_ru.properties":[{"add":["2","Done.=\\u0413\\u043e\\u0442\\u043e\\u0432\\u043e."],"delete":["2","Done.=\\u0413\\u043E\\u0442\\u043E\\u0432\\u043E"]}],"core\/src\/main\/resources\/hudson\/model\/User\/index_ru.properties":[{"add":["22","Groups=\\u0413\\u0440\\u0443\\u043f\\u043f\\u044b","23","Jenkins\\ User\\ Id=\\u0418\\u0434\\u0435\\u043d\\u0442\\u0438\\u0444\\u0438\\u043a\\u0430\\u0442\\u043e\\u0440 \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044f"],"delete":["22","Groups=\\u0413\\u0440\\u0443\\u043F\\u043F\\u044B","23","Jenkins\\ User\\ Id=\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/login_ru.properties":[{"add":["23","Password=\\u041f\\u0430\\u0440\\u043e\\u043b\\u044c","24","Remember\\ me\\ on\\ this\\ computer=\\u0417\\u0430\\u043f\\u043e\\u043c\\u043d\\u0438\\u0442\\u044c \\u043c\\u0435\\u043d\\u044f","25","login=\\u0432\\u043e\\u0439\\u0442\\u0438"],"delete":["23","Password=yecgaa66","24","Remember\\ me\\ on\\ this\\ computer=\\u0417\\u0430\\u043F\\u043E\\u043C\\u043D\\u0438\\u0442\\u044C \\u043C\\u0435\\u043D\\u044F","25","login=\\u0412\\u043e\\u0439\\u0442\\u0438"]}],"core\/src\/main\/resources\/hudson\/security\/SecurityRealm\/loginLink_ru.properties":[{"add":["22","login=\\u0432\\u043e\\u0439\\u0442\\u0438"],"delete":["22","login=iibrikov"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure_ru.properties":[{"add":["23","Labels=\\u041c\\u0435\\u0442\\u043a\\u0438","24","Node\\ Properties=\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0438 \\u0443\\u0437\\u043b\\u0430","25","Save=\\u0421\\u043e\\u0445\\u0440\\u0430\\u043d\\u0438\\u0442\\u044c"],"delete":["23","Labels=\\u041C\\u0435\\u0442\\u043A\\u0438","24","Node\\ Properties=\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438 \\u044D\\u043A\\u0437\\u0435\\u043C\\u043F\\u043B\\u044F\\u0440\\u0430","25","Save=\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C"]}],"core\/src\/main\/resources\/hudson\/model\/View\/People\/index_ru.properties":[{"add":["2","User\\ Id=\\u0418\\u0434\\u0435\\u043d\\u0442\\u0438\\u0444\\u0438\\u043a\\u0430\\u0442\\u043e\\u0440 \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044f"],"delete":["2","User\\ Id=\\u0410\\u0439\\u0414\\u0438 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F"]}],"core\/src\/main\/resources\/jenkins\/management\/PluginsLink\/info_ru.properties":[{"add":["2","updates\\ available=\\u0414\\u043e\\u0441\\u0442\\u0443\\u043f\\u043d\\u044b \\u043e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u0438\\u044f"],"delete":["2","updates\\ available=\\u0418\\u043C\\u0435\\u044E\\u0442\\u0441\\u044F \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F"]}],"core\/src\/main\/resources\/lib\/layout\/breadcrumbBar_ru.properties":[{"add":["2","DISABLE\\ AUTO\\ REFRESH=\\u041e\\u0442\\u043a\\u043b\\u044e\\u0447\\u0438\\u0442\\u044c \\u0430\\u0432\\u0442\\u043e\\u043e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u0438\\u0435 \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446","4","ENABLE\\ AUTO\\ REFRESH=\\u0412\\u043a\\u043b\\u044e\\u0447\\u0438\\u0442\\u044c \\u0430\\u0432\\u0442\\u043e\\u043e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u0438\\u0435 \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446"],"delete":["2","DISABLE\\ AUTO\\ REFRESH=\\u043E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u0430\\u0432\\u0442\\u043E\\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435","4","ENABLE\\ AUTO\\ REFRESH=\\u0412\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u0430\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u043E\\u0435 \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u044B"]}],"core\/src\/main\/resources\/hudson\/views\/DefaultViewsTabBar\/viewTabs_ru.properties":[{"add":["22","New\\ View=\\u041d\\u043e\\u0432\\u044b\\u0439 \\u0432\\u0438\\u0434 (\\u043f\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043b\\u0435\\u043d\\u0438\\u0435)"],"delete":["22","New\\ View=\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435"]}],"core\/src\/main\/resources\/hudson\/model\/ParametersDefinitionProperty\/config_ru.properties":[{"add":["22","Add\\ Parameter=\\u0414\\u043e\\u0431\\u0430\\u0432\\u0438\\u0442\\u044c \\u041f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440","23","This\\ build\\ is\\ parameterized=\\u042d\\u0442\\u043e - \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0438\\u0437\\u043e\\u0432\\u0430\\u043d\\u043d\\u0430\\u044f \\u0441\\u0431\\u043e\\u0440\\u043a\\u0430"],"delete":["22","Add\\ Parameter=\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u041F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440","23","This\\ build\\ is\\ parameterized=\\u042D\\u0442\\u043E \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u0438\\u0437\\u043E\\u0432\\u0430\\u043D\\u043D\\u0430\\u044F \\u0441\\u0431\\u043E\\u0440\\u043A\\u0430"]}],"core\/src\/main\/resources\/lib\/test\/bar_ru.properties":[{"add":["23","failures={0} \\u043e\\u0448\\u0438\\u0431\\u043e\\u043a","24","skipped={0} \\u043f\\u0440\\u043e\\u043f\\u0443\\u0449\\u0435\\u043d\\u043e","25","tests={0} \\u0442\\u0435\\u0441\\u0442\\u043e\\u0432(\\u0430)"],"delete":["23","failures=\\u043e\\u0448\\u0438\\u0431\\u043e\\u043a","24","skipped=\\u043f\\u0440\\u043e\\u043f\\u0443\\u0449\\u0435\\u043d\\u043e","25","tests={0} \\u0442\\u0435\\u0441\\u0442\\u043E\\u0432(\\u0430)"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/main_ru.properties":[{"add":["22","Workspace=\\u0421\\u0431\\u043e\\u0440\\u043e\\u0447\\u043d\\u0430\\u044f \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u044f","23","Last\\ Successful\\ Artifacts=\\u0410\\u0440\\u0442\\u0435\\u0444\\u0430\\u043a\\u0442\\u044b \\u043f\\u043e\\u0441\\u043b\\u0435\\u0434\\u043d\\u0438\\u0445 \\u0443\\u0434\\u0430\\u0447\\u043d\\u044b\\u0445 \\u0441\\u0431\\u043e\\u0440\\u043e\\u043a"],"delete":["22","Workspace=\\u0420\\u0430\\u0431\\u043E\\u0447\\u0435\\u0435 \\u043F\\u0440\\u043E\\u0441\\u0442\\u0440\\u0430\\u043D\\u0441\\u0442\\u0432\\u043E","23","Last\\ Successful\\ Artifacts=\\u0410\\u0440\\u0445\\u0438\\u0432\\u044B \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0445 \\u0443\\u0434\\u0430\\u0447\\u043D\\u044B\\u0445 \\u0441\\u0431\\u043E\\u0440\\u043E\\u043A"]}],"core\/src\/main\/resources\/hudson\/model\/Computer\/_script_ru.properties":[{"add":["2","This\\ execution\\ happens\\ in\\ the\\ slave\\ agent\\ JVM.=\\u0412\\u044b\\u043f\\u043e\\u043b\\u043d\\u0435\\u043d\\u0438\\u0435 \\u043f\\u0440\\u043e\\u0438\\u0437\\u043e\\u0439\\u0434\\u0451\\u0442 \\u0432 JVM \\u043f\\u043e\\u0434\\u0447\\u0438\\u043d\\u0451\\u043d\\u043d\\u043e\\u0433\\u043e \\u0443\\u0437\\u043b\\u0430"],"delete":["2","This\\ execution\\ happens\\ in\\ the\\ slave\\ agent\\ JVM.=\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0438\\u0437\\u043E\\u0439\\u0434\\u0451\\u0442 \\u0432 \\u0432\\u044B\\u0434\\u0435\\u043B\\u0435\\u043D\\u043D\\u043E\\u0439 JVM"]}],"core\/src\/main\/resources\/hudson\/views\/BuildButtonColumn\/column_ru.properties":[{"add":["22","Build\\ scheduled=\\u0421\\u0431\\u043e\\u0440\\u043a\\u0430 \\u0437\\u0430\\u043f\\u043b\\u0430\\u043d\\u0438\\u0440\\u043e\\u0432\\u0430\\u043d\\u0430","25","Schedule\\ a\\ build=\\u0417\\u0430\\u043f\\u043b\\u0430\\u043d\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0441\\u0431\\u043e\\u0440\\u043a\\u0443","26","Schedule\\ a\\ build\\ with\\ parameters=\\u0417\\u0430\\u043f\\u043b\\u0430\\u043d\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0441\\u0431\\u043e\\u0440\\u043a\\u0443 \\u0441 \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0430\\u043c\\u0438"],"delete":["22","Build\\ scheduled=\\u0421\\u0431\\u043E\\u0440\\u043A\\u0430 \\u0437\\u0430\\u043F\\u043B\\u0430\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0430","25","Schedule\\ a\\ build=\\u0421\\u0442\\u0430\\u0440\\u0442\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0431\\u043E\\u0440\\u043A\\u0443","26","Schedule\\ a\\ build\\ with\\ parameters=\\u0417\\u0430\\u043F\\u043B\\u0430\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0431\\u043E\\u0440\\u043A\\u0443 \\u0441 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u0430\\u043C\\u0438"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/projectRelationship-help_ru.properties":[{"add":["24","The\\ downstream\\ project\\ records\\ the\\ fingerprints\\ of\\ the\\ upstream\\ files\\ it\\ uses=\\u041d\\u0438\\u0441\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u0439 \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442 \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u044f\\u0435\\u0442 \\u043e\\u0442\\u043f\\u0435\\u0447\\u0430\\u0442\\u043a\\u0438 (fingrprints) \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u0443\\u0435\\u043c\\u044b\\u0445 \\u0430\\u0440\\u0442\\u0435\\u0444\\u0430\\u043a\\u0442\\u043e\\u0432 \\u0432\\u043e\\u0441\\u0445\\u043e\\u0434\\u044f\\u0449\\u0435\\u0433\\u043e \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\\u0430."],"delete":["24","The\\ downstream\\ project\\ records\\ the\\ fingerprints\\ of\\ the\\ upstream\\ files\\ it\\ uses=\\u0412\\u043D\\u0438\\u0437 \\u043F\\u043E \\u0442\\u0435\\u0447\\u0435\\u043D\\u0438\\u044E \\u0437\\u0430\\u043F\\u0438\\u0441\\u0438 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430 \\u043E\\u0442\\u043F\\u0435\\u0447\\u0430\\u0442\\u043A\\u0438 \\u043F\\u0430\\u043B\\u044C\\u0446\\u0435\\u0432 \\u0432\\u0432\\u0435\\u0440\\u0445 \\u043F\\u043E \\u0442\\u0435\\u0447\\u0435\\u043D\\u0438\\u044E \\u0444\\u0430\\u0439\\u043B\\u044B, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0435 \\u043E\\u043D \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u0443\\u0435\\u0442"]}],"core\/src\/main\/resources\/lib\/hudson\/project\/upstream-downstream_ru.properties":[{"add":["22","Upstream\\ Projects=\\u0412\\u043e\\u0441\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u0435 \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b","23","Downstream\\ Projects=\\u041d\\u0438\\u0441\\u0445\\u043e\\u0434\\u044f\\u0449\\u0438\\u0435 \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b"],"delete":["22","Upstream\\ Projects=\\u041D\\u043E\\u0432\\u044B\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B","23","Downstream\\ Projects=\\u0417\\u0430\\u0431\\u0440\\u043E\\u0448\\u0435\\u043D\\u044B\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index_ru.properties":[{"add":["22","on=\\u043d\\u0430","23","startedAgo=\\u0417\\u0430\\u043f\\u0443\\u0449\\u0435\\u043d\\u0430 {0} \\u0434\\u043d\\u0435\\u0439 \\u043d\\u0430\\u0437\\u0430\\u0434.","24","Build=\\u0421\\u0431\\u043e\\u0440\\u043a\\u0430","25","Build\\ Artifacts=\\u0410\\u0440\\u0442\\u0435\\u0444\\u0430\\u043a\\u0442\\u044b \\u0441\\u0431\\u043e\\u0440\\u043a\\u0438","26","Changes\\ in\\ dependency=\\u0418\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u044f \\u0432 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043c\\u043e\\u0441\\u0442\\u044f\\u0445","27","beingExecuted=\\u0412\\u044b\\u043f\\u043e\\u043b\\u043d\\u044f\\u0435\\u0442\\u0441\\u044f {0}","37","Took=\\u0417\\u0430\\u043d\\u044f\\u043b\\u043e:"],"delete":["22","on=\\u043D\\u0430","23","startedAgo=\\u0417\\u0430\\u043F\\u0443\\u0449\\u0435\\u043D {0} \\u0434\\u043D\\u0435\\u0439 \\u043D\\u0430\\u0437\\u0430\\u0434.","24","Build=\\u0421\\u0431\\u043E\\u0440\\u043A\\u0430","25","Build\\ Artifacts=\\u0410\\u0440\\u0442\\u0435\\u0444\\u0430\\u043A\\u0442\\u044B \\u0441\\u0431\\u043E\\u0440\\u043A\\u0438","26","Changes\\ in\\ dependency=\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F \\u0432 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043C\\u043E\\u0441\\u0442\\u044F\\u0445","27","beingExecuted=\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u044F\\u0435\\u0442\\u0441\\u044F {0}","37","Took=\\u0417\\u0430\\u043D\\u044F\\u043B\\u043E:"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/sidepanel_ru.properties":[{"add":["23","Status=\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441","25","View\\ Configuration=\\u0421\\u043c\\u043e\\u0442\\u0440\\u0435\\u0442\\u044c \\u043a\\u043e\\u043d\\u0444\\u0438\\u0433\\u0443\\u0440\\u0430\\u0446\\u0438\\u044e","26","Wipe\\ Out\\ Workspace=\\u0423\\u0434\\u0430\\u043b\\u0438\\u0442\\u044c \\u0432\\u0441\\u0435 \\u0432 \\u0441\\u0431\\u043e\\u0440\\u043e\\u0447\\u043d\\u043e\\u0439 \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0438","27","Workspace=\\u0421\\u0431\\u043e\\u0440\\u043e\\u0447\\u043d\\u0430\\u044f \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u044f","31","delete.confirm=\\u0412\\u044b \\u0442\\u043e\\u0447\\u043d\\u043e \\u0445\\u043e\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043b\\u0438\\u0442\\u044c  {0} \\u2018{1}\\u2019? ","32","wipe.out.confirm=\\u041f\\u043e\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043e \\u0432\\u044b \\u0445\\u043e\\u0442\\u0438\\u0442\\u0435 \\u0444\\u0438\\u0437\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438 \\u0443\\u0434\\u0430\\u043b\\u0438\\u0442\\u044c \\u0432\\u0441\\u0435 \\u0444\\u0430\\u0439\\u043b\\u044b \\u0438\\u0437 \\u0440\\u0430\\u0431\\u043e\\u0447\\u0435\\u0433\\u043e \\u043f\\u0440\\u043e\\u0441\\u0442\\u0440\\u0430\\u043d\\u0441\\u0442\\u0432\\u0430?"],"delete":["23","Status=\\u0421\\u0442\\u0430\\u0442\\u0445\\u0443\\u0439\\u0441","25","View\\ Configuration=\\u0421\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u043A\\u043E\\u043D\\u0444\\u0438\\u0433\\u0443\\u0440\\u0430\\u0446\\u0438\\u044E","26","Wipe\\ Out\\ Workspace=\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0432\\u0441\\u0435 \\u0432 \\u0441\\u0431\\u043E\\u0440\\u043E\\u0447\\u043D\\u043E\\u0439 \\u0434\\u0438\\u0440\\u0435\\u043A\\u0442\\u043E\\u0440\\u0438\\u0438","27","Workspace=\\u0420\\u0430\\u0431\\u043E\\u0447\\u0435\\u0435 \\u043F\\u0440\\u043E\\u0441\\u0442\\u0440\\u0430\\u043D\\u0441\\u0442\\u0432\\u043E","31","delete.confirm=\\u0412\\u044B \\u0442\\u043E\\u0447\\u043D\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C  {0} \\u2018{1}\\u2019? ","32","wipe.out.confirm=\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E \\u0432\\u044B \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0444\\u0438\\u0437\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0432\\u0441\\u0435 \\u0444\\u0430\\u0439\\u043B\\u044B \\u0438\\u0437 \\u0440\\u0430\\u0431\\u043E\\u0447\\u0435\\u0433\\u043E \\u043F\\u0440\\u043E\\u0441\\u0442\\u0440\\u0430\\u043D\\u0441\\u0442\\u0432\\u0430?"]}],"core\/src\/main\/resources\/hudson\/matrix\/MatrixBuild\/ajaxMatrix_ru.properties":[{"add":["2","Not\\ run=\\u0417\\u0430\\u0434\\u0430\\u0447\\u0430 \\u043d\\u0435 \\u0438\\u0441\\u043f\\u043e\\u043b\\u043d\\u044f\\u043b\\u0430\\u0441\\u044c"],"delete":["2","Not\\ run="]}],"core\/src\/main\/resources\/hudson\/model\/Job\/rename_ru.properties":[{"add":["2","No=\\u041d\\u0435\\u0442","4","description=\\u0412\\u044b \\u0443\\u0432\\u0435\\u0440\\u0435\\u043d\\u044b, \\u0447\\u0442\\u043e \\u0445\\u043e\\u0442\\u0438\\u0442\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0438\\u043c\\u0435\\u043d\\u043e\\u0432\\u0430\\u0442\\u044c {0} \\u0432 {1}?","5","noRenameWhileBuilding=\\u041d\\u0435\\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e \\u043f\\u0435\\u0440\\u0435\\u0438\\u043c\\u0435\\u043d\\u043e\\u0432\\u0430\\u0442\\u044c \\u0437\\u0430\\u0434\\u0430\\u0447\\u0443 \\u043f\\u0440\\u0438 \\u0430\\u043a\\u0442\\u0438\\u0432\\u043d\\u044b\\u0445 \\u0441\\u0431\\u043e\\u0440\\u043a\\u0430\\u0445","6","newNameInUse=\\u0417\\u0430\\u0434\\u0430\\u0447\\u0430 \\u0441 \\u0438\\u043c\\u0435\\u043d\\u0435\\u043c {0} \\u0443\\u0436\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442.","7","configWasSaved=\\u041d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0439\\u043a\\u0438 \\u0443\\u0441\\u043f\\u0435\\u0448\\u043d\\u043e \\u0441\\u043e\\u0445\\u0440\\u0430\\u043d\\u0435\\u043d\\u044b"],"delete":["2","No=\\u041D\\u0435\\u0442","4","description=\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0435\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u0442\\u044C {0} \\u0432 {1}?","5","noRenameWhileBuilding=\\u041D\\u0435\\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E \\u043F\\u0435\\u0440\\u0435\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E\\u043A\\u0430 \\u044D\\u0442\\u0430 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0430 \\u0441\\u043E\\u0431\\u0438\\u0440\\u0430\\u0435\\u0442\\u0441\\u044F"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_ru.properties":[{"add":["22","Changes\\ will\\ take\\ effect\\ when\\ you\\ restart\\ Jenkins=\\u0418\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u044f \\u0432\\u0441\\u0442\\u0443\\u043f\\u044f\\u0442 \\u0432 \\u0441\\u0438\\u043b\\u0443 \\u043f\\u043e\\u0441\\u043b\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043a\\u0438 Jenkins","23","Enabled=\\u0410\\u043a\\u0442\\u0438\\u0432\\u043d\\u044b\\u0439","24","Name=\\u041d\\u0430\\u0438\\u043c\\u0435\\u043d\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435","25","Pinned=\\u041f\\u0440\\u0438\\u043a\\u0440\\u0435\\u043f\\u043b\\u0451\\u043d\\u043d\\u044b\\u0435","26","Previously\\ installed\\ version=\\u0420\\u0430\\u043d\\u0435\\u0435 \\u0443\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u044b\\u0435 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438","27","Restart\\ Once\\ No\\ Jobs\\ Are\\ Running=\\u041f\\u0435\\u0440\\u0435\\u0437\\u0430\\u043f\\u0443\\u0441\\u0442\\u0438\\u0442\\u044c \\u043f\\u043e\\u0441\\u043b\\u0435 \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043d\\u0438\\u0438 \\u0432\\u0441\\u0435\\u0445 \\u0437\\u0430\\u0434\\u0430\\u0447","28","Uncheck\\ to\\ disable\\ the\\ plugin=\\u0421\\u043d\\u0438\\u043c\\u0438\\u0442\\u0435 \\u0444\\u043b\\u0430\\u0436\\u043e\\u043a, \\u0447\\u0442\\u043e\\u0431\\u044b \\u0432\\u044b\\u043a\\u043b\\u044e\\u0447\\u0438\\u0442\\u044c \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d","29","Uninstall=\\u0423\\u0434\\u0430\\u043b\\u0438\\u0442\\u044c","30","Uninstallation\\ pending=\\u041e\\u0436\\u0438\\u0434\\u0430\\u043d\\u0438\\u0435 \\u0443\\u0434\\u0430\\u043b\\u0435\\u043d\\u0438\\u044f...","31","Unpin=\\u041e\\u0442\\u043a\\u0440\\u0435\\u043f\\u0438\\u0442\\u044c","32","Version=\\u0412\\u0435\\u0440\\u0441\\u0438\\u044f","33","downgradeTo=\\u0412\\u0435\\u0440\\u043d\\u0443\\u0442\\u044c \\u043a \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438 {0}"],"delete":["22","Changes\\ will\\ take\\ effect\\ when\\ you\\ restart\\ Jenkins=\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F \\u0432\\u0441\\u0442\\u0443\\u043F\\u044F\\u0442 \\u0432 \\u0441\\u0438\\u043B\\u0443 \\u043F\\u043E\\u0441\\u043B\\u0435 \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 Jenkins","23","Enabled=\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439","24","Name=\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435","25","Pinned=\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u043B\\u0451\\u043D\\u043D\\u044B\\u0435","26","Previously\\ installed\\ version=\\u0420\\u0430\\u043D\\u0435\\u0435 \\u0443\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438","27","Restart\\ Once\\ No\\ Jobs\\ Are\\ Running=\\u041F\\u0435\\u0440\\u0435\\u0437\\u0430\\u043F\\u0443\\u0441\\u0442\\u0438\\u0442\\u044C \\u043F\\u043E\\u0441\\u043B\\u0435 \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\\u0438\\u0438 \\u0432\\u0441\\u0435\\u0445 \\u0437\\u0430\\u0434\\u0430\\u0447","28","Uncheck\\ to\\ disable\\ the\\ plugin=\\u0421\\u043D\\u0438\\u043C\\u0438\\u0442\\u0435 \\u0444\\u043B\\u0430\\u0436\\u043E\\u043A, \\u0447\\u0442\\u043E\\u0431\\u044B \\u0432\\u044B\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043F\\u043B\\u0430\\u0433\\u0438\\u043D","29","Uninstall=\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C","30","Uninstallation\\ pending=\\u041E\\u0436\\u0438\\u0434\\u0430\\u043D\\u0438\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u044F...","31","Unpin=\\u041E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C","32","Version=\\u0412\\u0435\\u0440\\u0441\\u0438\\u044F","33","downgradeTo=\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C \\u043A \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438 {0}"]}],"core\/src\/main\/resources\/lib\/layout\/progressiveRendering_ru.properties":[{"add":["2","progressMessage=\\u0418\\u0434\\u0451\\u0442 \\u043e\\u0431\\u0440\\u0430\\u0431\\u043e\\u0442\\u043a\\u0430 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445..."],"delete":["2","progressMessage=\\u0418\\u0434\\u0451\\u0442 \\u043F\\u0440\\u043E\\u0446\\u0435\\u0441\\u0441 \\u0432\\u044B\\u0447\\u0438\\u0441\\u043B\\u0435\\u043D\\u0438\\u044F"]}],"core\/src\/main\/resources\/hudson\/search\/UserSearchProperty\/config_ru.properties":[{"add":["2","Case-sensitivity=\\u0427\\u0443\\u0432\\u0441\\u0442\\u0432\\u0438\\u0442\\u0435\\u043b\\u044c\\u043d\\u043e\\u0441\\u0442\\u044c \\u043a \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0443","3","Insensitive\\ search\\ tool=\\u0418\\u0433\\u043d\\u043e\\u0440\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440 \\u043f\\u0440\\u0438 \\u043f\\u043e\\u0438\\u0441\\u043a\\u0435"],"delete":["2","Case-sensitivity=\\u0427\\u0443\\u0432\\u0441\\u0442\\u0432\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C \\u043A \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0443","3","Insensitive\\ search\\ tool=\\u041F\\u043E\\u0438\\u0441\\u043A \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u043E-\\u043D\\u0435\\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043C\\u044B\\u0439"]}],"core\/src\/main\/resources\/lib\/hudson\/project\/config-retryCount_ru.properties":[{"add":["2","Retry\\ Count=\\u041a\\u043e\\u043b\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e \\u043f\\u043e\\u043f\\u044b\\u0442\\u043e\\u043a","3","SCM\\ checkout\\ retry\\ count=\\u0427\\u0438\\u0441\\u043b\\u043e \\u043f\\u043e\\u043f\\u044b\\u0442\\u043e\\u043a \\u043f\\u0440\\u0438 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043a\\u0435 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0438\\u0437 SCM"],"delete":["2","Retry\\ Count=\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u043E\\u043F\\u044B\\u043F\\u043E\\u0442\\u043E\\u043A","3","SCM\\ checkout\\ retry\\ count=\\u0421\\u0447\\u0451\\u0442\\u0447\\u0438\\u043A \\u043F\\u043E\\u043F\\u044B\\u0442\\u043E\\u043A checkout \\u0421\\u041A\\u0412"]}],"core\/src\/main\/resources\/hudson\/model\/LoadStatistics\/main_ru.properties":[{"add":["22","Load\\ statistics\\ graph=\\u0413\\u0440\\u0430\\u0444\\u0438\\u043a \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f","23","Long=\\u0414\\u043b\\u0438\\u043d\\u043d\\u044b\\u0439","24","Medium=\\u0421\\u0440\\u0435\\u0434\\u043d\\u0438\\u0439","25","Short=\\u041a\\u043e\\u0440\\u043e\\u0442\\u043a\\u0438\\u0439","26","Timespan=\\u0412\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u043e\\u0439 \\u0434\\u0438\\u0430\\u043f\\u0430\\u0437\\u043e\\u043d","27","blurb=\\u0412 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0443 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f \\u0437\\u0430\\u043f\\u0438\\u0441\\u044b\\u0432\\u0430\\u0435\\u0442\\u0441\\u044f \\u0438\\u0441\\u0442\\u043e\\u0440\\u0438\\u044f \\u0434\\u0438\\u043d\\u0430\\u043c\\u0438\\u043a\\u0438 \\u0442\\u0440\\u0435\\u0445 \\u043a\\u043b\\u044e\\u0447\\u0435\\u0432\\u044b\\u0445 \\u043c\\u0435\\u0442\\u0440\\u0438\\u043a \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043d\\u043e\\u0439 \\u0443\\u0442\\u0438\\u043b\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438: <dl> <dt>\\u0418\\u0442\\u043e\\u0433\\u043e\\u0432\\u043e\\u0435 \\u043a\\u043e\\u043b\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e \\u0441\\u0431\\u043e\\u0440\\u0449\\u0438\\u043a\\u043e\\u0432<\/dt> <dd>\\u0414\\u043b\\u044f \\u043a\\u043e\\u043d\\u043a\\u0440\\u0435\\u0442\\u043d\\u043e\\u0433\\u043e \\u043a\\u043e\\u043c\\u043f\\u044c\\u044e\\u0442\\u0435\\u0440\\u0430  \\u044d\\u0442\\u043e \\u0447\\u0438\\u0441\\u043b\\u043e \\u0441\\u0431\\u043e\\u0440\\u0449\\u0438\\u043a\\u043e\\u0432, \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0435 \\u0437\\u0430\\u043f\\u0443\\u0441\\u043a\\u0430\\u044e\\u0442\\u0441\\u044f \\u043d\\u0430 \\u0434\\u0430\\u043d\\u043d\\u043e\\u043c \\u043a\\u043e\\u043c\\u043f\\u044c\\u044e\\u0442\\u0435\\u0440\\u0435. \\u0414\\u043b\\u044f \\u043c\\u0435\\u0442\\u043a\\u0438 (\\u0433\\u0440\\u0443\\u043f\\u043f\\u044b),  \\u044d\\u0442\\u043e  \\u0441\\u0443\\u043c\\u043c\\u0430\\u0440\\u043d\\u043e\\u0435 \\u0447\\u0438\\u0441\\u043b\\u043e \\u0441\\u0431\\u043e\\u0440\\u0449\\u0438\\u043a\\u043e\\u0432 \\u043d\\u0430 \\u043a\\u043e\\u043c\\u043f\\u044c\\u044e\\u0442\\u0435\\u0440\\u0430\\u0445 \\u0432 \\u044d\\u0442\\u043e\\u0439 \\u0433\\u0440\\u0443\\u043f\\u043f\\u0435. \\u0414\\u043b\\u044f \\u0441\\u0430\\u043c\\u043e\\u0433\\u043e Jenkins, \\u044d\\u0442\\u043e \\u0441\\u0443\\u043c\\u043c\\u0430\\u0440\\u043d\\u043e\\u0435 \\u0447\\u0438\\u0441\\u043b\\u043e \\u0441\\u0431\\u043e\\u0440\\u0449\\u0438\\u043a\\u043e\\u0432, \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u0443\\u044e\\u0449\\u0438\\u0445\\u0441\\u044f \\u0432 \\u0434\\u0430\\u043d\\u043d\\u043e\\u0439 \\u0438\\u043d\\u0441\\u0442\\u0430\\u043b\\u044f\\u0446\\u0438\\u0438 Jenkins. \\u0414\\u0430\\u043d\\u043d\\u044b\\u0435 \\u0447\\u0438\\u0441\\u043b\\u0430 \\u043c\\u043e\\u0433\\u0443\\u0442 \\u043c\\u0435\\u043d\\u044f\\u0442\\u044c\\u0441\\u044f \\u0432 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043c\\u043e\\u0441\\u0442\\u0438 \\u043e\\u0442 \\u0442\\u043e\\u0433\\u043e, \\u0430\\u043a\\u0442\\u0438\\u0432\\u043d\\u044b \\u0438\\u043b\\u0438 \\u043d\\u0435\\u0442 \\u0443\\u0437\\u043b\\u044b \\u0441\\u0431\\u043e\\u0440\\u043a\\u0438. <\/dd> <dt>\\u041a\\u043e\\u043b\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e \\u0437\\u0430\\u043d\\u044f\\u0442\\u044b\\u0445 \\u0441\\u0431\\u043e\\u0440\\u0449\\u0438\\u043a\\u043e\\u0432<\/dt> <dd>This line tracks the number of executors (among the executors counted above) that are carrying out builds. The ratio of this to the total number of executors gives you the resource utilization. If all your executors are busy for a prolonged period of time, consider adding more computers to your Jenkins cluster.<\/dd><dt>Queue length<\/dt><dd>This is the number of jobs that are in the build queue, waiting for an available executor (of this computer, of this label, or in this Jenkins, respectively.) This doesn''t include jobs that are in the quiet period, nor does it include jobs that are in the queue because earlier builds are still in progress. If this line ever goes above 0, that means your Jenkins will run more builds by adding more computers.<\/dd><\/dl>The graph is exponential moving average of periodically collected data values. 3 timespans are updated every 10 seconds, 1 minute, and 1 hour respectively.","29","title=\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043a\\u0430 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u043d\\u0438\\u044f: {0}"],"delete":["22","Load\\ statistics\\ graph=\\u0413\\u0440\\u0430\\u0444\\u0438\\u043A \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438","23","Long=\\u0414\\u043B\\u0438\\u043D\\u043D\\u044B\\u0439","24","Medium=\\u0421\\u0440\\u0435\\u0434\\u043D\\u0438\\u0439","25","Short=\\u041A\\u043E\\u0440\\u043E\\u0442\\u043A\\u0438\\u0439","26","Timespan=\\u0412\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u043E\\u0439 \\u0434\\u0438\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D","27","blurb=\\u0412 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0443 \\u0443\\u0442\\u0438\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438 \\u0437\\u0430\\u043F\\u0438\\u0441\\u044B\\u0432\\u0430\\u0435\\u0442\\u0441\\u044F \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u0434\\u0438\\u043D\\u0430\\u043C\\u0438\\u043A\\u0438 \\u0442\\u0440\\u0435\\u0445 \\u043A\\u043B\\u044E\\u0447\\u0435\\u0432\\u044B\\u0445 \\u043C\\u0435\\u0442\\u0440\\u0438\\u043A \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043D\\u043E\\u0439 \\u0443\\u0442\\u0438\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438: <dl> <dt>\\u0418\\u0442\\u043E\\u0433\\u043E\\u0432\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0441\\u0431\\u043E\\u0440\\u0449\\u0438\\u043A\\u043E\\u0432<\/dt> <dd>\\u0414\\u043B\\u044F \\u043A\\u043E\\u043D\\u043A\\u0440\\u0435\\u0442\\u043D\\u043E\\u0433\\u043E \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440\\u0430  \\u044D\\u0442\\u043E \\u0447\\u0438\\u0441\\u043B\\u043E \\u0441\\u0431\\u043E\\u0440\\u0449\\u0438\\u043A\\u043E\\u0432, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0435 \\u0437\\u0430\\u043F\\u0443\\u0441\\u043A\\u0430\\u044E\\u0442\\u0441\\u044F \\u043D\\u0430 \\u0434\\u0430\\u043D\\u043D\\u043E\\u043C \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440\\u0435. \\u0414\\u043B\\u044F \\u043C\\u0435\\u0442\\u043A\\u0438 (\\u0433\\u0440\\u0443\\u043F\\u043F\\u044B),  \\u044D\\u0442\\u043E  \\u0441\\u0443\\u043C\\u043C\\u0430\\u0440\\u043D\\u043E\\u0435 \\u0447\\u0438\\u0441\\u043B\\u043E \\u0441\\u0431\\u043E\\u0440\\u0449\\u0438\\u043A\\u043E\\u0432 \\u043D\\u0430 \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440\\u0430\\u0445 \\u0432 \\u044D\\u0442\\u043E\\u0439 \\u0433\\u0440\\u0443\\u043F\\u043F\\u0435. \\u0414\\u043B\\u044F \\u0441\\u0430\\u043C\\u043E\\u0433\\u043E Jenkins, \\u044D\\u0442\\u043E \\u0441\\u0443\\u043C\\u043C\\u0430\\u0440\\u043D\\u043E\\u0435 \\u0447\\u0438\\u0441\\u043B\\u043E \\u0441\\u0431\\u043E\\u0440\\u0449\\u0438\\u043A\\u043E\\u0432, \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u0443\\u044E\\u0449\\u0438\\u0445\\u0441\\u044F \\u0432 \\u0434\\u0430\\u043D\\u043D\\u043E\\u0439 \\u0438\\u043D\\u0441\\u0442\\u0430\\u043B\\u044F\\u0446\\u0438\\u0438 Jenkins. \\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0447\\u0438\\u0441\\u043B\\u0430 \\u043C\\u043E\\u0433\\u0443\\u0442 \\u043C\\u0435\\u043D\\u044F\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043C\\u043E\\u0441\\u0442\\u0438 \\u043E\\u0442 \\u0442\\u043E\\u0433\\u043E, \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B \\u0438\\u043B\\u0438 \\u043D\\u0435\\u0442 \\u0443\\u0437\\u043B\\u044B \\u0441\\u0431\\u043E\\u0440\\u043A\\u0438. <\/dd> <dt>\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0437\\u0430\\u043D\\u044F\\u0442\\u044B\\u0445 \\u0441\\u0431\\u043E\\u0440\\u0449\\u0438\\u043A\\u043E\\u0432<\/dt> <dd>This line tracks the number of executors (among the executors counted above) that are carrying out builds. The ratio of this to the total number of executors gives you the resource utilization. If all your executors are busy for a prolonged period of time, consider adding more computers to your Jenkins cluster.<\/dd><dt>Queue length<\/dt><dd>This is the number of jobs that are in the build queue, waiting for an available executor (of this computer, of this label, or in this Jenkins, respectively.) This doesn''t include jobs that are in the quiet period, nor does it include jobs that are in the queue because earlier builds are still in progress. If this line ever goes above 0, that means your Jenkins will run more builds by adding more computers.<\/dd><\/dl>The graph is exponential moving average of periodically collected data values. 3 timespans are updated every 10 seconds, 1 minute, and 1 hour respectively.","29","title=\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043D\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438: {0}"]}],"core\/src\/main\/resources\/hudson\/views\/LastDurationColumn\/column_ru.properties":[{"add":["22","N\/A=\\u041d\/\\u0414"],"delete":["22","N\/A=\\u041D\\u0435 \\u043F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u043C\\u043E"]}],"core\/src\/main\/resources\/lib\/layout\/layout_ru.properties":[{"add":["22","search=\\u043f\\u043e\\u0438\\u0441\\u043a","24","Page\\ generated=\\u0421\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0430 \\u0441\\u0433\\u0435\\u043d\\u0435\\u0440\\u0438\\u0440\\u043e\\u0432\\u0430\\u043d\\u0430","25","logout=\\u0432\\u044b\\u0445\\u043e\\u0434","26","DISABLE\\ AUTO\\ REFRESH=\\u041e\\u0422\\u041a\\u041b\\u042e\\u0427\\u0418\\u0422\\u042c \\u0410\\u0412\\u0422\\u041e\\u041e\\u0411\\u041d\\u041e\\u0412\\u041b\\u0415\\u041d\\u0418\\u0415 \\u0421\\u0422\\u0420\\u0410\\u041d\\u0418\\u0426\\u042b","27","ENABLE\\ AUTO\\ REFRESH=\\u0412\\u041a\\u041b\\u042e\\u0427\\u0418\\u0422\\u042c \\u0410\\u0412\\u0422\\u041e\\u041e\\u0411\\u041d\\u041e\\u0412\\u041b\\u0415\\u041d\\u0418\\u0415 \\u0421\\u0422\\u0420\\u0410\\u041d\\u0418\\u0426\\u042b"],"delete":["22","search=\\u041F\\u043E\\u0438\\u0441\\u043A","24","Page\\ generated=\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u0441\\u0433\\u0435\\u043D\\u0435\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0430","25","logout=\\u0412\\u044B\\u0445\\u043E\\u0434","26","DISABLE\\ AUTO\\ REFRESH=\\u041E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u0430\\u0432\\u0442\\u043E\\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u044B","27","ENABLE\\ AUTO\\ REFRESH=\\u0412\\u041A\\u041B\\u042E\\u0427\\u0418\\u0422\\u042C \\u0421\\u0410\\u041C\\u041E\\u041E\\u0411\\u041D\\u041E\\u0412\\u041B\\u0415\\u041D\\u0418\\u0415"]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/success_ru.properties":[{"add":["2","Success=\\u0412\\u044b \\u0443\\u0441\\u043f\\u0435\\u0448\\u043d\\u043e \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043e\\u0432\\u0430\\u043b\\u0438\\u0441\\u044c!.","3","description=\\u0412\\u044b \\u0432\\u043e\\u0448\\u043b\\u0438 \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u0443, \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0432\\u0435\\u0440\\u043d\\u0443\\u0442\\u044c\\u0441\\u044f <a href=\"..\">\\u043d\\u0430 \\u0433\\u043b\\u0430\\u0432\\u043d\\u0443\\u044e \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0443<\/a>."],"delete":["2","Success=\\u0412\\u044B \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043B\\u0438\\u0441\\u044C!.","3","description=\\u0422\\u0435\\u043F\\u0435\\u0440\\u044C \\u0412\\u044B \\u0437\\u0430\\u0448\\u043B\\u0438 \\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A <a href=\"..\"> \\u0433\\u043B\\u0430\\u0432\\u043D\\u043E\\u0439 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0435 <\/ A>."]}],"core\/src\/main\/resources\/lib\/hudson\/project\/config-blockWhenDownstreamBuilding_ru.properties":[{"add":["2","Block\\ build\\ when\\ downstream\\ project\\ is\\ building=\\u0411\\u043b\\u043e\\u043a\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0441\\u0431\\u043e\\u0440\\u043a\\u0443, \\u043f\\u043e\\u043a\\u0430 \\u0432\\u044b\\u0437\\u0432\\u0430\\u043d\\u043d\\u0430\\u044f \\u0437\\u0430\\u0434\\u0430\\u0447\\u0430 \\u043d\\u0435 \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043d\\u0430"],"delete":["2","Block\\ build\\ when\\ downstream\\ project\\ is\\ building=\\u0411\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0431\\u043E\\u0440\\u043A\\u0443, \\u043A\\u043E\\u0433\\u0434\\u0430 \\u0432\\u0442\\u043E\\u0440\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442 \\u0441\\u043E\\u0431\\u0438\\u0440\\u0430\\u0435\\u0442\\u0441\\u044F"]}],"core\/src\/main\/resources\/lib\/hudson\/project\/config-concurrentBuild_ru.properties":[{"add":["2","title.concurrentbuilds=\\u0420\\u0430\\u0437\\u0440\\u0435\\u0448\\u0438\\u0442\\u044c \\u043f\\u0430\\u0440\\u0430\\u043b\\u043b\\u0435\\u043b\\u044c\\u043d\\u044b\\u0439 \\u0437\\u0430\\u043f\\u0443\\u0441\\u043a \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438"],"delete":["2","title.concurrentbuilds=\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u044F\\u0442\\u044C \\u043F\\u0440\\u043E\\u0446\\u0435\\u0441\\u0441 \\u0441\\u0431\\u043E\\u0440\\u043A\\u0438 \\u043F\\u043E \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E\\u0441\\u0442\\u0438"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/table_ru.properties":[{"add":["22","Check\\ to\\ install\\ the\\ plugin=\\u041f\\u0440\\u043e\\u0432\\u0435\\u0440\\u0438\\u0442\\u044c \\u0432\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u043e\\u0441\\u0442\\u044c \\u0443\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u043a\\u0438 \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d\\u0430","23","Click\\ this\\ heading\\ to\\ sort\\ by\\ category=\\u041d\\u0430\\u0436\\u043c\\u0438\\u0442\\u0435 \\u043d\\u0430 \\u0437\\u0430\\u0433\\u043e\\u043b\\u043e\\u0432\\u043e\\u043a \\u0434\\u043b\\u044f \\u0441\\u043e\\u0440\\u0442\\u0438\\u0440\\u043e\\u0432\\u043a\\u0438 \\u043f\\u043e \\u043a\\u0430\\u0442\\u0435\\u0433\\u043e\\u0440\\u0438\\u044f\\u043c","24","Download\\ now\\ and\\ install\\ after\\ restart=\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044c \\u0438 \\u0443\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u0438\\u0442\\u044c \\u043f\\u043e\\u0441\\u043b\\u0435 \\u043f\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043a\\u0438","25","Filter=\\u0424\\u0438\\u043b\\u044c\\u0442\\u0440","26","Inactive=\\u041d\\u0435\\u0430\\u043a\\u0442\\u0438\\u0432\\u043d\\u044b\\u0435","27","Install=\\u0423\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u0438\\u0442\\u044c","28","Install\\ without\\ restart=\\u0423\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u0438\\u0442\\u044c \\u0431\\u0435\\u0437 \\u043f\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043a\\u0438","29","Installed=\\u0423\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043e","30","Name=\\u041d\\u0430\\u0438\\u043c\\u0435\\u043d\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435","31","No\\ updates=\\u041d\\u0435\\u0442 \\u043e\\u0431\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u0438\\u0439","32","Version=\\u0412\\u0435\\u0440\\u0441\\u0438\\u044f","33","compatWarning=\\u0412\\u043d\\u0438\\u043c\\u0430\\u043d\\u0438\\u0435: \\u043d\\u043e\\u0432\\u0430\\u044f \\u0432\\u0435\\u0440\\u0441\\u0438\\u044f \\u043d\\u0435 \\u0441\\u043e\\u0432\\u043c\\u0435\\u0441\\u0442\\u0438\\u043c\\u0430 \\u0441 \\u0443\\u0441\\u0442\\u0430\\u043d\\u043e\\u0432\\u043b\\u0435\\u043d\\u043d\\u043e\\u0439 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0435\\u0439. \\u0414\\u043b\\u044f \\u0437\\u0430\\u0434\\u0430\\u0447, \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u0443\\u044e\\u0449\\u0438\\u0445 \\u0434\\u0430\\u043d\\u043d\\u044b\\u0439 \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d, \\u043c\\u043e\\u0436\\u0435\\u0442 \\u043f\\u043e\\u0442\\u0440\\u0435\\u0431\\u043e\\u0432\\u0430\\u0442\\u044c\\u0441\\u044f \\u0438\\u0437\\u043c\\u0435\\u043d\\u0435\\u043d\\u0438\\u0435 \\u043d\\u0430\\u0441\\u0442\\u0440\\u043e\\u0435\\u043a.","34","coreWarning=\\u041f\\u0440\\u0435\\u0434\\u0443\\u043f\\u0440\\u0435\\u0436\\u0434\\u0435\\u043d\\u0438\\u0435: \\u041f\\u043b\\u0430\\u0433\\u0438\\u043d \\u0441\\u043e\\u0432\\u043c\\u0435\\u0441\\u0442\\u0438\\u043c \\u0441 Jenkins \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438 {0} \\u0438\\u043b\\u0438 \\u043d\\u043e\\u0432\\u0435\\u0435. \\u0412\\u043e\\u0437\\u043c\\u043e\\u0436\\u043d\\u0430 \\u043d\\u0435\\u043a\\u043e\\u0440\\u0440\\u0435\\u043a\\u0442\\u043d\\u0430\\u044f \\u0440\\u0430\\u0431\\u043e\\u0442\\u0430 \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d\\u0430 \\u0441 \\u0432\\u0430\\u0448\\u0435\\u0439 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0435\\u0439 Jenkins."],"delete":["22","Check\\ to\\ install\\ the\\ plugin=\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u0438\\u0442\\u044C \\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C \\u0443\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043A\\u0438 \\u043F\\u043B\\u0430\\u0433\\u0438\\u043D\\u0430","23","Click\\ this\\ heading\\ to\\ sort\\ by\\ category=\\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u043D\\u0430 \\u0437\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A \\u0434\\u043B\\u044F \\u0441\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0438 \\u043F\\u043E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\\u043C","24","Download\\ now\\ and\\ install\\ after\\ restart=\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438 \\u0443\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0441\\u043B\\u0435 \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438","25","Filter=\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440","26","Inactive=\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0435","27","Install=\\u0423\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C","28","Install\\ without\\ restart=\\u0423\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0431\\u0435\\u0437 \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438","29","Installed=\\u0423\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043E","30","Name=\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435","31","No\\ updates=\\u041D\\u0435\\u0442 \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0439","32","Version=\\u0412\\u0435\\u0440\\u0441\\u0438\\u044F","33","compatWarning=\\u0412\\u043D\\u0438\\u043C\\u0430\\u043D\\u0438\\u0435: \\u043D\\u043E\\u0432\\u0430\\u044F \\u0432\\u0435\\u0440\\u0441\\u0438\\u044F \\u043D\\u0435 \\u0441\\u043E\\u0432\\u043C\\u0435\\u0441\\u0442\\u0438\\u043C\\u0430 \\u0441 \\u0443\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u043E\\u0439 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0435\\u0439. \\u0417\\u0430\\u0434\\u0430\\u0447\\u0430\\u043C \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u0443\\u044E\\u0449\\u0438\\u043C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u043F\\u043B\\u0430\\u0433\\u0438\\u043D \\u043C\\u043E\\u0436\\u0435\\u0442 \\u043F\\u043E\\u0442\\u0440\\u0435\\u0431\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0435\\u043A.","34","coreWarning=\\u041F\\u0440\\u0435\\u0434\\u0443\\u043F\\u0440\\u0435\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435: \\u041F\\u043B\\u0430\\u0433\\u0438\\u043D \\u0441\\u043E\\u0432\\u043C\\u0435\\u0441\\u0442\\u0438\\u043C \\u0441 Jenkins \\u0432\\u0435\\u0440\\u0441\\u0438\\u0438 {0} \\u0438\\u043B\\u0438 \\u043D\\u043E\\u0432\\u0435\\u0435. \\u0412\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u0430 \\u043D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u0430\\u044F \\u0440\\u0430\\u0431\\u043E\\u0442\\u0430 \\u043F\\u043B\\u0430\\u0433\\u0438\\u043D\\u0430 \\u0441 \\u0432\\u0430\\u0448\\u0435\\u0439 \\u0432\\u0435\\u0440\\u0441\\u0438\\u0435\\u0439 Jenkins."]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/loginLink_ru.properties":[{"add":["22","sign\\ up=\\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c\\u0441\\u044f"],"delete":["22","sign\\ up=\\u043F\\u0440\\u0438\\u0441\\u043E\\u0435\\u0434\\u0438\\u043D\\u0438\\u0442\\u044C\\u0441\\u044F"]}],"core\/src\/main\/resources\/hudson\/diagnosis\/TooManyJobsButNoView\/message_ru.properties":[{"add":["22","Dismiss=\\u0423\\u0431\\u0440\\u0430\\u0442\\u044c","23","blurb=\\u041a\\u0430\\u0436\\u0435\\u0442\\u0441\\u044f, \\u0443 \\u0412\\u0430\\u0441 \\u0431\\u043e\\u043b\\u044c\\u0448\\u043e\\u0435 \\u043a\\u043e\\u043b\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e \\u0437\\u0430\\u0434\\u0430\\u0447. \\u0417\\u043d\\u0430\\u0435\\u0442\\u0435 \\u043b\\u0438 \\u0432\\u044b, \\u0447\\u0442\\u043e \\u043c\\u043e\\u0436\\u043d\\u043e \\u0441\\u0433\\u0440\\u0443\\u043f\\u043f\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438 \\u0432 \\u0440\\u0430\\u0437\\u043b\\u0438\\u0447\\u043d\\u044b\\u0435 \\u0441\\u043f\\u0438\\u0441\\u043a\\u0438? \\u0412\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u043d\\u0430\\u0436\\u0430\\u0442\\u044c \"+\" \\u0432 \\u0432\\u0435\\u0440\\u0445\\u0443 \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u044b, \\u0447\\u0442\\u043e\\u0431\\u044b \\u0441\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u043d\\u043e\\u0432\\u044b\\u0439 \\u0441\\u043f\\u0438\\u0441\\u043e\\u043a (\\u0432\\u0438\\u0434) \\u0432 \\u043b\\u044e\\u0431\\u043e\\u0435 \\u0432\\u0440\\u0435\\u043c\\u044f."],"delete":["22","Dismiss=\\u0423\\u0431\\u0440\\u0430\\u0442\\u044C","23","blurb=\\u041A\\u0430\\u0436\\u0435\\u0442\\u0441\\u044F \\u0443 \\u0412\\u0430\\u0441 \\u0431\\u043E\\u043B\\u044C\\u0448\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0437\\u0430\\u0434\\u0430\\u0447. \\u0417\\u043D\\u0430\\u0435\\u0442\\u0435 \\u043B\\u0438 \\u0432\\u044B, \\u0447\\u0442\\u043E \\u0432\\u044B \\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438 \\u0432 \\u0440\\u0430\\u0437\\u043B\\u0438\\u0447\\u043D\\u044B\\u0435 \\u0432\\u0438\\u0434\\u044B \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430? \\u0412\\u044B \\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u043D\\u0430\\u0436\\u0430\\u0442\\u044C \"+\" \\u0432 \\u0432\\u0435\\u0440\\u0445\\u0443 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u044B, \\u0447\\u0442\\u043E\\u0431\\u044B \\u0441\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0432\\u0438\\u0434 \\u0432 \\u043B\\u044E\\u0431\\u043E\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F."]}],"core\/src\/main\/resources\/lib\/hudson\/buildProgressBar_ru.properties":[{"add":["22","text=\\u0417\\u0430\\u043f\\u0443\\u0449\\u0435\\u043d\\u043e {0}<br> \\u041f\\u0440\\u0438\\u0431\\u043b\\u0438\\u0437\\u0438\\u0442\\u0435\\u043b\\u044c\\u043d\\u043e\\u0435 \\u0432\\u0440\\u0435\\u043c\\u044f \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043d\\u0438\\u044f: {1}"],"delete":["22","text=\\u0421\\u0442\\u0430\\u0440\\u0442\\u043E\\u0432\\u0430\\u043B\\u0430 {0}<br> \\u041F\\u0440\\u0438\\u0431\\u043B\\u0438\\u0437\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\\u0438\\u044F: {1}"]}],"core\/src\/main\/resources\/hudson\/model\/Job\/configure_ru.properties":[{"add":["22","Strategy=\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044f","23","name={0}","26","LOADING=\\u0417\\u0410\\u0413\\u0420\\u0423\\u0417\\u041a\\u0410"],"delete":["22","Strategy=\\u0421\\u0442\\u0440\\u0430\\u0442\\u0435\\u0433\\u0438\\u044F","23","name={0} \\u0438\\u043C\\u044F","26","LOADING=\\u0417\\u0410\\u0413\\u0420\\u0423\\u0417\\u041A\\u0410"]}],"core\/src\/main\/resources\/hudson\/model\/FreeStyleProject\/newJobDetail_ru.properties":[{"add":["22","body=\\u042d\\u0442\\u043e - \\u043e\\u0441\\u043d\\u043e\\u0432\\u043d\\u043e\\u0439 \\u0438 \\u043d\\u0430\\u0438\\u0431\\u043e\\u043b\\u0435\\u0435 \\u0443\\u043d\\u0438\\u0432\\u0435\\u0440\\u0441\\u0430\\u043b\\u044c\\u043d\\u044b\\u0439 \\u0442\\u0438\\u043f \\u0437\\u0430\\u0434\\u0430\\u0447 \\u0432 Jenkins. \\","23","  Jenkins \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0441\\u043e\\u0431\\u0438\\u0440\\u0430\\u0442\\u044c \\u0432\\u0430\\u0448 \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442, \\u043a\\u043e\\u043c\\u0431\\u0438\\u043d\\u0438\\u0440\\u0443\\u044f \\u043b\\u044e\\u0431\\u0443\\u044e SCM \\u0441 \\u043b\\u044e\\u0431\\u043e\\u0439 \\u0441\\u0431\\u043e\\u0440\\u043e\\u0447\\u043d\\u043e\\u0439 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043c\\u043e\\u0439. \\","24","  \\u0414\\u0430\\u043d\\u043d\\u044b\\u0439 \\u0442\\u0438\\u043f \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043c\\u043e\\u0436\\u0435\\u0442 \\u0438\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c\\u0441\\u044f \\u0434\\u043b\\u044f \\u0437\\u0430\\u0434\\u0430\\u0447, \\u043e\\u0442\\u043b\\u0438\\u0447\\u043d\\u044b\\u0445 \\u043e\\u0442 \\u0441\\u0431\\u043e\\u0440\\u043a\\u0438 \\u041f\\u041e."],"delete":["22","body=\\u042D\\u0442\\u043E \\u043E\\u0441\\u043D\\u043E\\u0432\\u043D\\u0430\\u044F \\u0444\\u0443\\u043D\\u043A\\u0446\\u0438\\u044F Jenkins. Jenkins \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0441\\u043E\\u0431\\u0438\\u0440\\u0430\\u0442\\u044C \\u0432\\u0430\\u0448 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442, \\u043A\\u043E\\u043C\\u0431\\u0438\\u043D\\u0438\\u0440\\u0443\\u044F \\u043B\\u044E\\u0431\\u0443\\u044E SCM \\u0441 \\u043B\\u044E\\u0431\\u043E\\u0439 \\u0441\\u0431\\u043E\\u0440\\u043E\\u0447\\u043D\\u043E\\u0439 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u043E\\u0439, \\u0438 \\u044D\\u0442\\u043E \\u0434\\u0430\\u0436\\u0435 \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F \\u0434\\u043B\\u044F \\u0447\\u0435\\u0433\\u043E-\\u043D\\u0438\\u0431\\u0443\\u0434\\u044C, \\u043E\\u0442\\u043B\\u0438\\u0447\\u043D\\u043E\\u0433\\u043E \\u043E\\u0442 \\u0441\\u0431\\u043E\\u0440\\u043A\\u0438 \\u041F\\u041E."]}]}},"3b61b96119b9fd8c80b1fa79a19f8f770af434b7":{"changes":{"core\/src\/main\/resources\/hudson\/PluginManager\/table.jelly":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/PluginManager\/table.jelly":[{"add":["74","                <j:set var=\"cache\" value=\"${it.createCache()}\"\/>","108","                      <j:if test=\"${!p.isNeededDependenciesCompatibleWithInstalledVersion(cache)}\">","111","                      <j:if test=\"${p.isNeededDependenciesForNewerJenkins(cache)}\">"],"delete":["107","                      <j:if test=\"${!p.isNeededDependenciesCompatibleWithInstalledVersion()}\">","110","                      <j:if test=\"${p.isNeededDependenciesForNewerJenkins()}\">"]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["146","import java.util.function.Supplier;","1819","    @Restricted(DoNotUse.class) \/\/ table.jelly","1820","    public MetadataCache createCache() {","1821","        return new MetadataCache();","1822","    }","1823","","1824","    @Restricted(NoExternalUse.class) \/\/ table.jelly","1825","    public static final class MetadataCache {","1826","        private final Map<String, Object> data = new HashMap<>();","1827","        public <T> T of(String key, Class<T> type, Supplier<T> func) {","1828","            return type.cast(data.computeIfAbsent(key, _ignored -> func.get()));","1829","        }","1830","    }","1831",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["223","        data = new Data(o);","307","        data = null;","312","     * Loads the update center data, if any.","317","        if (data == null) {","319","            if (o != null) {","1089","            return isNeededDependenciesForNewerJenkins(new PluginManager.MetadataCache());","1090","        }","1091","","1092","        @Restricted(NoExternalUse.class) \/\/ table.jelly","1093","        public boolean isNeededDependenciesForNewerJenkins(PluginManager.MetadataCache cache) {","1094","            return cache.of(\"isNeededDependenciesForNewerJenkins:\" + name, Boolean.class, () -> {","1095","                for (Plugin p : getNeededDependencies()) {","1096","                    if (p.isForNewerHudson() || p.isNeededDependenciesForNewerJenkins()) {","1097","                        return true;","1098","                    }","1099","                }","1100","                return false;","1101","            });","1113","            return isNeededDependenciesCompatibleWithInstalledVersion(new PluginManager.MetadataCache());","1114","        }","1115","","1116","        @Restricted(NoExternalUse.class) \/\/ table.jelly","1117","        public boolean isNeededDependenciesCompatibleWithInstalledVersion(PluginManager.MetadataCache cache) {","1118","            return cache.of(\"isNeededDependenciesCompatibleWithInstalledVersion:\" + name, Boolean.class, () -> {","1119","                for (Plugin p : getNeededDependencies()) {","1120","                    if (!p.isCompatibleWithInstalledVersion() || !p.isNeededDependenciesCompatibleWithInstalledVersion()) {","1121","                        return false;","1122","                    }","1123","                }","1124","                return true;","1125","            });"],"delete":["123","     * lastModified time of the data file when it was last read.","124","     *\/","125","    private transient long dataLastReadFromFile;","126","","127","    \/**","315","     * Loads the update center data, if any and if modified since last read.","320","        TextFile df = getDataFile();","321","        if (df.exists() && dataLastReadFromFile != df.file.lastModified()) {","323","            if (o!=null) {","325","                dataLastReadFromFile = df.file.lastModified();","326","            } else {","327","                data = null;","1096","            for (Plugin p: getNeededDependencies()) {","1097","                if (p.isForNewerHudson() || p.isNeededDependenciesForNewerJenkins()) return true;","1098","            }","1099","            return false;","1111","            for (Plugin p: getNeededDependencies()) {","1112","                if (!p.isCompatibleWithInstalledVersion() || !p.isNeededDependenciesCompatibleWithInstalledVersion())","1113","                    return false;","1114","            }","1115","            return true;"]}]}},"8ae105ef5f39837ebe38ca0720e1ec3799567947":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["98","    <java.level>8<\/java.level>","675","                  <version>1.8.0<\/version>"],"delete":["98","    <java.level>7<\/java.level>","675","                  <version>1.7.0<\/version>"]}]}},"78b96c34ed168a27ae79b63bd2575b91908c7d11":{"changes":{"core\/src\/main\/resources\/hudson\/scm\/SubversionSCM\/config.jelly":"MODIFY","core\/src\/main\/java\/hudson\/EnvVars.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/scm\/SubversionSCM\/config.jelly":[{"add":["10","            checkUrl=\"'${rootURL}\/scm\/SubversionSCM\/svnLocalLocationCheck?value='+escape(this.value)\"\/>"],"delete":["10","            checkUrl=\"'${rootURL}\/scm\/SubversionSCM\/svnLocalLocationCheck?value='+escape(this.value)\"\/>     "]}],"core\/src\/main\/java\/hudson\/EnvVars.java":[{"add":["3","import java.io.Serializable;","5","import java.util.TreeMap;","6","import java.util.Comparator;","21","public class EnvVars extends TreeMap<String,String> {","24","        super(CASE_INSENSITIVE_COMPARATOR);","28","        super(CASE_INSENSITIVE_COMPARATOR);","29","        putAll(m);","67","","68","    \/**","69","     * Compares strings case insensitively.","70","     *\/","71","    private static final Comparator<String> CASE_INSENSITIVE_COMPARATOR = new CaseInsensitiveComparator();","72","","73","    private static class CaseInsensitiveComparator implements Comparator<String>, Serializable {","74","        public int compare(String lhs, String rhs) {","75","            return lhs.compareToIgnoreCase(rhs);","76","        }","77","        private static final long serialVersionUID = 1L;","78","    }"],"delete":["3","import java.util.HashMap;","19","public class EnvVars extends HashMap<String,String> {","25","        super(m);"]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["4","import hudson.EnvVars;","931","        EnvVars env = new EnvVars();"],"delete":["32","import java.io.Serializable;","931","        Map<String,String> env = new TreeMap<String,String>(CASE_INSENSITIVE_COMPARATOR);","1007","","1008","    \/**","1009","     * Compares strings case insensitively.","1010","     *\/","1011","    private static final Comparator<String> CASE_INSENSITIVE_COMPARATOR = new CaseInsensitiveComparator();","1012","","1013","    private static class CaseInsensitiveComparator implements Comparator<String>, Serializable {","1014","        public int compare(String lhs, String rhs) {","1015","            return lhs.compareToIgnoreCase(rhs);","1016","        }","1017","        private static final long serialVersionUID = 1L;","1018","    }"]}]}},"b910e6af920261fe598bbe43d05bf75a2264f71b":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenAbstractArtifactRecord.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenAbstractArtifactRecord.java":[{"add":["50","import org.kohsuke.stapler.HttpResponse;","51","import org.kohsuke.stapler.HttpRedirect;","133","        public final void doIndex(StaplerResponse rsp) throws IOException {","190","    public final HttpResponse doRedeploy(","191","            @QueryParameter(\"_.id\") final String id,","192","            @QueryParameter(\"_.url\") final String repositoryUrl,","193","            @QueryParameter(\"_.uniqueVersion\") final boolean uniqueVersion) throws ServletException, IOException {","225","        return HttpRedirect.DOT;"],"delete":["131","        public final void doIndex(StaplerRequest req, StaplerResponse rsp) throws IOException {","188","    public final void doRedeploy(StaplerRequest req, StaplerResponse rsp,","189","                           @QueryParameter(\"redeploy.id\") final String id,","190","                           @QueryParameter(\"redeploy.url\") final String repositoryUrl,","191","                           @QueryParameter(\"redeploy.uniqueVersion\") final boolean uniqueVersion) throws ServletException, IOException {","223","        rsp.sendRedirect(\".\");"]}]}},"15ce24ae4dac23a732f193f29b6423bc03be7a49":{"changes":{"core\/src\/test\/java\/hudson\/slaves\/DelegatingComputerLauncherTest.java":"ADD","core\/src\/main\/java\/hudson\/slaves\/DelegatingComputerLauncher.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/slaves\/DelegatingComputerLauncherTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/slaves\/DelegatingComputerLauncher.java":[{"add":["76","                if (DelegatingComputerLauncher.class.isAssignableFrom(d.getKlass().toJavaClass()))  continue;"],"delete":["76","                if (DelegatingComputerLauncher.class.isInstance(d))  continue;"]}]}},"7790dbcabfcfe3aeb8db54cf13673036e0548d34":{"changes":{"core\/src\/main\/java\/hudson\/model\/FingerprintCleanupThread.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/Fingerprint.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/FingerprintCleanupThread.java":[{"add":["103","                logger.fine(\"deleting obsolete \" + fingerprintFile);","109","                logger.finer(\"possibly trimming \" + fingerprintFile);"],"delete":[]}],"changelog.html":[{"add":["69","  <li class=bug>","70","    Robustness against truncated fingerprint files.","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19515\">issue 19515<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Fingerprint.java":[{"add":["40","import hudson.util.AtomicFileWriter;","46","import java.io.EOFException;","999","        if (modified) {","1000","            if (logger.isLoggable(Level.FINE)) {","1001","                logger.log(Level.FINE, \"Saving trimmed {0}\", getFingerprintFile(md5sum));","1002","            }","1004","        }","1109","            AtomicFileWriter afw = new AtomicFileWriter(file);","1111","                PrintWriter w = new PrintWriter(afw);","1148","                afw.commit();","1150","                afw.abort();","1240","            String parseError = messageOfParseException(e);","1250","    private static String messageOfParseException(Throwable t) {","1251","        if (t instanceof XmlPullParserException || t instanceof EOFException) {","1256","            return messageOfParseException(t2);"],"delete":["997","        if (modified)","1103","            PrintWriter w = new PrintWriter(file, \"UTF-8\");","1142","                w.close();","1232","            String parseError = messageOfXmlPullParserException(e);","1242","    private static String messageOfXmlPullParserException(Throwable t) {","1243","        if (t instanceof XmlPullParserException) {","1248","            return messageOfXmlPullParserException(t2);"]}]}},"f602e0f40f5140064e7b7766c98438e5f59b2c15":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/progressiveText.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/progressiveText.jelly":[{"add":["65","                e.appendChild(p); \/\/ Needs to be first for IE","66","                \/\/ Use \"outerHTML\" for IE; workaround for:","67","                \/\/ http:\/\/www.quirksmode.org\/bugreports\/archives\/2004\/11\/innerhtml_and_t.html","68","                if (p.outerHTML) p.outerHTML = '<pre>'+text+'<\/pre>';","69","                else p.innerHTML = text;"],"delete":["65","                p.innerHTML = text;","66","                e.appendChild(p);"]}]}},"9404759d0d76951372688c02100fbfc5f383ff6d":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/project\/console-link.jelly":"ADD","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/tasks.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/project\/console-link.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/tasks.jelly":[{"add":["28","<j:jelly xmlns:j=\"jelly:core\" xmlns:l=\"\/lib\/layout\" xmlns:p=\"\/lib\/hudson\/project\">","32","      <p:console-link\/>"],"delete":["28","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:f=\"\/lib\/form\" xmlns:i=\"jelly:fmt\">","32","      <j:choose>","33","        <j:when test=\"${it.logFile.length() > 200000}\">","34","          <!-- Show raw link directly so user need not click through live console page, though this is not so bad now as they would just see: Skipping nnn KB.. Full Log. -->","35","          <l:task icon=\"images\/24x24\/terminal.png\" href=\"${buildUrl.baseUrl}\/console\" title=\"${%Console Output}\"\/>","36","          <l:task icon=\"images\/24x24\/document.png\" href=\"${buildUrl.baseUrl}\/consoleText\" title=\"${%View as plain text}\"\/>","37","        <\/j:when>","38","        <j:otherwise>","39","          <l:task icon=\"images\/24x24\/terminal.png\" href=\"${buildUrl.baseUrl}\/console\" title=\"${%Console Output}\" >","40","            <l:task icon=\"images\/24x24\/document.png\" href=\"${buildUrl.baseUrl}\/consoleText\" title=\"${%View as plain text}\" \/>","41","          <\/l:task>","42","        <\/j:otherwise>","43","      <\/j:choose>"]}]}},"ea4ccfb64defdd181e967b2d303e6289ce513d25":{"changes":{"core\/src\/main\/java\/hudson\/cli\/CLICommand.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/handlers\/ViewOptionHandler.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/CLICommand.java":[{"add":["251","     * Exposed to be overridden by {@link hudson.cli.declarative.CLIRegisterer}."],"delete":["251","     * Exposed to be overridden by {@link CLIRegisterer}."]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["2171","     * {@link hudson.tasks.BuildStep}s that invoke external processes should use this."],"delete":["2171","     * {@link BuildStep}s that invoke external processes should use this."]}],"core\/src\/main\/java\/hudson\/cli\/handlers\/ViewOptionHandler.java":[{"add":["55"," * name does not exist or a user was not granted {@link View#READ} permission."],"delete":["55"," * name does not exist or a user was not granted {@link View.READ} permission."]}]}},"d90c1e0758f6cab5fc9360ae279678c291f6091e":{"changes":{"core\/src\/main\/resources\/hudson\/scm\/SubversionChangeLogSet\/digest.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/scm\/SubversionChangeLogSet\/digest.jelly":[{"add":["20","          <li>${r.key} : ${r.value}<\/li>"],"delete":["20","          ${r.key} : ${r.value}"]}]}},"07683617d3f9277fe274e7a35f745b14b6a35e44":{"changes":{"test\/src\/test\/resources\/hudson\/cli\/testview-foo.xml":"ADD","core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/UpdateViewCommandTest.java":"MODIFY"},"diff":{"test\/src\/test\/resources\/hudson\/cli\/testview-foo.xml":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["1192","            Object o = Jenkins.XSTREAM.unmarshal(new Xpp3Driver().createReader(in), this);","1193","            if (!o.getClass().equals(getClass())) {","1194","                \/\/ ensure that we've got the same view type. extending this code to support updating","1195","                \/\/ to different view type requires destroying & creating a new view type","1196","                throw new IOException(\"Expecting view type: \"+this.getClass()+\" but got: \"+o.getClass()+\" instead.\" +","1197","                    \"\\nShould you needed to change to a new view type, you must first delete and then re-create \" +","1198","                    \"the view with the new view type.\");","1199","            }"],"delete":["1188","","1193","            Jenkins.XSTREAM.unmarshal(new Xpp3Driver().createReader(in), this);"]}],"test\/src\/test\/java\/hudson\/cli\/UpdateViewCommandTest.java":[{"add":["33","","35","import hudson.model.TreeView;","70","    \/**","71","     * This test shows that updating a view using an XML that will be","72","     * converted by XStream via an alias will rightfully succeed.","73","     *","74","     * @throws Exception","75","     *\/","76","    @Test public void updateViewWithRenamedClass() throws Exception {","77","        ListView tv  = new ListView(\"tView\");","78","        j.jenkins.addView(tv);","79","        j.jenkins.XSTREAM2.addCompatibilityAlias(\"org.acme.old.Foo\", ListView.class);","80","        final CLICommandInvoker.Result result = command","81","                .authorizedTo(View.READ, View.CONFIGURE, Jenkins.READ)","82","                .withStdin(this.getClass().getResourceAsStream(\"\/hudson\/cli\/testview-foo.xml\"))","83","                .invokeWithArgs(\"tView\");","84","","85","        assertThat(result, succeededSilently());","86","    }","87","","88","    @Test public void updateViewWithWrongViewTypeShouldFail() throws Exception {","89","        TreeView tv = new TreeView(\"aView\");","90","        j.jenkins.addView(tv);","91","        final CLICommandInvoker.Result result = command","92","                .authorizedTo(View.READ, View.CONFIGURE, Jenkins.READ)","93","                .withStdin(this.getClass().getResourceAsStream(\"\/hudson\/cli\/view.xml\"))","94","                .invokeWithArgs(\"aView\")","95","                ;","96","","97","        assertThat(result, failedWith(1));","98","        assertThat(result.stderr(), containsString(\"Expecting view type: \"+ tv.getClass()","99","                + \" but got: class hudson.model.ListView instead.\"));","100","    }","101","","134",""],"delete":[]}]}},"28cb11e0eb78e95ffe1587adada00b8e788d907f":{"changes":{"core\/src\/main\/java\/hudson\/model\/User.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/User.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Erik Ramfelt, Tom Huybrechts","271","        String id = idOrFullName.replace('\\\\', '_').replace('\/', '_').replace('<','_')","272","                                .replace('>','_');  \/\/ 4 replace() still faster than regex"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Erik Ramfelt, Tom Huybrechts","271","        String id = idOrFullName.replace('\\\\', '_').replace('\/', '_').replace('<','_');"]}]}},"f2d470d97855a746730f82b06cbc1953ed564368":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["458","                    listener.getLogger().print(Messages.AbstractBuild_BuildingRemotely(ModelHyperlinkNote.encodeTo(\"\/computer\/\" + builtOn, node.getDisplayName())));"],"delete":["458","                    listener.getLogger().print(Messages.AbstractBuild_BuildingRemotely(ModelHyperlinkNote.encodeTo(\"\/computer\/\" + builtOn, builtOn)));"]}]}},"a594973432dbc04b0b53d6b29ec5abb7240d9568":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["78","  <li class=bug>","79","    Build history overflows","80","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-28425\">issue 28425<\/a>)","81","  <li class=bug>","82","    Build History badges don't wrap","83","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-28455\">issue 28455<\/a>)","101","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-28437\">issue 28437<\/a>)"],"delete":["95","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-28437\">issue 28437<\/a>)  ","96","  <li class=bug>","97","    Build history overflows","98","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-28425\">issue 28425<\/a>)","99","  <li class=bug>","100","    Build History badges don't wrap","101","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-28455\">issue 28455<\/a>)    "]}]}},"abea5bed21e0a9f5afca2077d93c955ba4fd34a0":{"changes":{"core\/src\/main\/resources\/hudson\/model\/UsageStatistics\/global.groovy":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/UsageStatistics\/global.groovy":[{"add":["4","f.section(title: _(\"Usage Statistics\")) {","5","    f.optionalBlock(field: \"usageStatisticsCollected\", checked: app.usageStatisticsCollected, title: _(\"statsBlurb\"))","6","}"],"delete":["4","f.optionalBlock( field:\"usageStatisticsCollected\", checked:app.usageStatisticsCollected, title:_(\"statsBlurb\"))"]}]}},"eeebfee5d895dc27b46a77d1651b3d9d06a6bccc":{"changes":{"core\/src\/main\/java\/hudson\/cli\/BuildCommand.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/BuildCommand.java":[{"add":["163","            stdout.flush();"],"delete":[]}]}},"541641100b4a9570d72d263a12edbc1e06c987a2":{"changes":{"core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":[{"add":[],"delete":["90","        InstallState current = Jenkins.getInstance().getInstallState();","91","        if (!current.equals(prior)) {","92","            if (Main.isDevelopmentMode) LOGGER.warning(\"Transitioning state from: \" + prior + \", but current is: \" + current);","93","        }"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["955","        if (installState == null || installState.name() == null) {","956","            return InstallState.UNKNOWN;","957","        }"],"delete":[]}]}},"fa6c9ba35de4ec98f5487f296bab7ee1b7fb2da5":{"changes":{"changelog.html":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["60","  <li class='major bug'>","61","    Made <code>--httpKeepAliveTimeout<\/code> option work (that was supposed to have been introduced in 1.503).","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16474\">issue 16474<\/a>)"],"delete":[]}],"war\/pom.xml":[{"add":["53","      <version>1.28<\/version>","106","      <version>0.9.10-jenkins-43<\/version>"],"delete":["53","      <version>1.26<\/version>","106","      <version>0.9.10-jenkins-42<\/version>"]}]}},"073b1a839580778cbc4b4c46840eab87241a698b":{"changes":{"war\/resources\/WEB-INF\/web.xml":"MODIFY","core\/pom.xml":"MODIFY"},"diff":{"war\/resources\/WEB-INF\/web.xml":[{"add":["11","    <init-param>","12","      <param-name>default-encodings<\/param-name>","13","      <param-value>text\/html=UTF-8<\/param-value>","14","    <\/init-param>"],"delete":[]}],"core\/pom.xml":[{"add":["278","      <version>1.67<\/version>"],"delete":["278","      <version>1.66<\/version>"]}]}},"3751edff338ad21029ccf406830fd8cfe54cbe6c":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["196","  <li class=bug>","197","    HudsonAuthenticationEntryPoint can break CLI support, because the port isn't exposed properly.","198","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18634\">issue 18634<\/a>)"],"delete":[]}]}},"f1669601e4bd607ffa8a809e109f1ad0c79244b1":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["103","import java.util.jar.JarFile;","732","","733","            \/\/ first copy into a temporary file name","734","            File t = File.createTempFile(\"uploaded\", \"jp_\",rootDir);","735","            fileItem.write(t); \/\/ rename all new plugins to *.jpi","738","            final String baseName = identifyPluginShortName(t);","739","","740","            \/\/ and move the temp file into a proper name","741","            new File(rootDir, baseName + \".hpi\").delete(); \/\/ don't keep confusing legacy *.hpi","742","            new File(rootDir, baseName + \".jpi\").delete(); \/\/ rename can fail if the file already exists","743","            t.renameTo(new File(rootDir, baseName + \".jpi\"));","744","","760","    protected String identifyPluginShortName(File t) {","761","        try {","762","            JarFile j = new JarFile(t);","763","            try {","764","                String name = j.getManifest().getMainAttributes().getValue(\"Short-Name\");","765","                if (name!=null) return name;","766","            } finally {","767","                j.close();","768","            }","769","        } catch (IOException e) {","770","            LOGGER.log(WARNING, \"Failed to identify the short name from \"+t,e);","771","        }","772","        return FilenameUtils.getBaseName(t.getName());    \/\/ fall back to the base name of what's uploaded","773","    }","774",""],"delete":["731","            final String baseName = FilenameUtils.getBaseName(fileName);","732","            new File(rootDir, baseName + \".hpi\").delete(); \/\/ don't keep confusing legacy *.hpi","733","            fileItem.write(new File(rootDir, baseName + \".jpi\")); \/\/ rename all new plugins to *.jpi"]}]}},"957754803bd638e260099b3b46faf47def340d5e":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["1574","                try {","1575","                    int len;","1576","                    while((len=in.read(buf))>=0)","1577","                        tar.write(buf,0,len);","1578","                } finally {","1579","                    in.close();","1580","                }"],"delete":["1574","                int len;","1575","                while((len=in.read(buf))>=0)","1576","                    tar.write(buf,0,len);","1577","                in.close();"]}]}},"ff8e660cf89b3fd0eb76a46a1277a7d5e5cf180a":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenUtil.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["26","import java.util.logging.Logger;","285","                MavenUtil.resolveModules(embedder,mp,getRootPath(),relPath,listener);"],"delete":["10","import hudson.tasks.test.AbstractTestResultAction;","26","import java.util.logging.Logger;","286","                MavenUtil.resolveModules(embedder,mp,getRootPath(),relPath);"]}],"core\/src\/main\/java\/hudson\/maven\/MavenUtil.java":[{"add":["3","import hudson.model.BuildListener;","58","     *","59","     * @throws AbortException","60","     *      errors will be reported to the listener and the exception thrown.","62","    public static void resolveModules(MavenEmbedder embedder, MavenProject project, String rel, Map<MavenProject,String> relativePathInfo, BuildListener listener) throws ProjectBuildingException, AbortException {","71","            if(!moduleFile.exists()) {","72","                listener.getLogger().println(moduleFile+\" is referenced from \"+project.getFile()+\" but it doesn't exist\");","73","                throw new AbortException();","74","            }","81","            resolveModules(embedder,child,relativePath,relativePathInfo,listener);"],"delete":["58","    public static void resolveModules(MavenEmbedder embedder, MavenProject project, String rel, Map<MavenProject,String> relativePathInfo) throws ProjectBuildingException {","73","            resolveModules(embedder,child,relativePath,relativePathInfo);"]}]}},"0ad3215f5136db4d47202d5aeaf1f4c1aee7733e":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["375","      <version>1.1-hudson-20071129<\/version>"],"delete":["375","      <version>1.1-hudson-20071021<\/version>"]}]}},"584112aa274fcc698dd19db7e89900ede4bd1a9d":{"changes":{"core\/src\/main\/resources\/hudson\/PluginManager\/installed.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/PluginManager\/installed.jelly":[{"add":["140","          var e = $A(Form.getInputs('plugins', 'checkbox')).find(function(e) {"],"delete":["140","          var e = $A($('plugins').getElementsByTagName('input')).find(function(e) {"]}],"changelog.html":[{"add":["65","  <li class=bug>","66","    Plugin Manager incorrectly displays \"Changes will take effect when you restart Jenkins\".","67","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8917\">issue 8917<\/a>)"],"delete":[]}]}},"46d604dd421294f51fe6c12c642caf3193486867":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["1118","        rsp.sendRedirect2(req.getContextPath() + \"\/images\/48x48\/\" + getBuildStatusUrl());"],"delete":["1118","        rsp.sendRedirect2(req.getContextPath() + \"\/nocacheImages\/48x48\/\"","1119","                + getBuildStatusUrl());"]}],"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":[],"delete":["176","import java.io.FileInputStream;","2771","     * Serves static resources without the \"Last-Modified\" header to work around","2772","     * a bug in Firefox.","2773","     *","2774","     * <p>","2775","     * See https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=89419","2776","     *\/","2777","    public void doNocacheImages( StaplerRequest req, StaplerResponse rsp ) throws IOException {","2778","        String path = req.getRestOfPath();","2779","","2780","        if(path.length()==0)","2781","            path = \"\/\";","2782","","2783","        if(path.indexOf(\"..\")!=-1 || path.length()<1) {","2784","            \/\/ don't serve anything other than files in the artifacts dir","2785","            rsp.sendError(SC_BAD_REQUEST);","2786","            return;","2787","        }","2788","","2789","        File f = new File(req.getServletContext().getRealPath(\"\/images\"),path.substring(1));","2790","        if(!f.exists()) {","2791","            rsp.sendError(SC_NOT_FOUND);","2792","            return;","2793","        }","2794","","2795","        if(f.isDirectory()) {","2796","            \/\/ listing not allowed","2797","            rsp.sendError(HttpServletResponse.SC_FORBIDDEN);","2798","            return;","2799","        }","2800","","2801","        FileInputStream in = new FileInputStream(f);","2802","        \/\/ serve the file","2803","        String contentType = req.getServletContext().getMimeType(f.getPath());","2804","        rsp.setContentType(contentType);","2805","        rsp.setContentLength((int)f.length());","2806","        Util.copyStream(in,rsp.getOutputStream());","2807","        in.close();","2808","    }","2809","","2810","    \/**"]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["1431","        rsp.sendRedirect2(req.getContextPath()+\"\/images\/48x48\/\"+getBuildStatusUrl());"],"delete":["1431","        \/\/ see Hudson.doNocacheImages. this is a work around for a bug in Firefox","1432","        rsp.sendRedirect2(req.getContextPath()+\"\/nocacheImages\/48x48\/\"+getBuildStatusUrl());"]}]}},"0ca5ff7b4044ce168c32ffe5a2b51b93c69275b4":{"changes":{"core\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/model\/FingerprintCleanupThread.java":"MODIFY","core\/src\/test\/java\/hudson\/model\/FingerprintCleanupThreadTest.java":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["44","    <hamcrest.version>2.2<\/hamcrest.version>","194","      <artifactId>hamcrest<\/artifactId>","195","      <version>${hamcrest.version}<\/version>","196","      <scope>test<\/scope>","197","    <\/dependency>","198","    <dependency>","199","      <groupId>org.hamcrest<\/groupId>","201","      <version>${hamcrest.version}<\/version>"],"delete":["194","      <version>1.3<\/version>"]}],"core\/src\/main\/java\/hudson\/model\/FingerprintCleanupThread.java":[{"add":["36","import java.util.Date;","118","                    listener.getLogger().println(deletionBlockerFacet.getClass().getName() + \" created on \" + new Date(deletionBlockerFacet.getTimestamp()) + \" blocked deletion of \" + fingerprintFile);"],"delete":["25","import com.thoughtworks.xstream.converters.basic.DateConverter;","56","    private static final DateConverter DATE_CONVERTER = new DateConverter();","57","","120","                    listener.getLogger().println(deletionBlockerFacet.getClass().getName() + \" created on \" + DATE_CONVERTER.toString(deletionBlockerFacet.getTimestamp()) + \" blocked deletion of \" + fingerprintFile);"]}],"core\/src\/test\/java\/hudson\/model\/FingerprintCleanupThreadTest.java":[{"add":["36","import jenkins.model.FingerprintFacet;","37","","38","import static org.hamcrest.io.FileMatchers.aReadableFile;","39","import static org.hamcrest.core.Is.is;","40","import static org.hamcrest.core.IsNot.not;","41","import static org.hamcrest.core.StringContains.containsString;","42","","46","import static org.junit.Assert.assertThat;","100","    @Test","101","    public void testBlockingFacetBlocksDeletion() throws IOException {","102","        createFolderStructure();","103","        TestTaskListener testTaskListener = new TestTaskListener();","104","        Fingerprint fp = new TestFingerprint(false);","105","        fp.facets.setOwner(Saveable.NOOP);","106","        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), true);","107","        fp.facets.add(facet);","108","        FingerprintCleanupThread cleanupThread = new TestFingerprintCleanupThread(fp);","109","        cleanupThread.execute(testTaskListener);","110","        String logOutput = testTaskListener.outputStream.toString();","111","        assertThat(logOutput, containsString(\"blocked deletion of\"));","112","    }","113","","114","    @Test","115","    public void testUnblockedFacetsDontBlockDeletion() throws IOException {","116","        createFolderStructure();","117","        TestTaskListener testTaskListener = new TestTaskListener();","118","        Fingerprint fp = new TestFingerprint(false);","119","        fp.facets.setOwner(Saveable.NOOP);","120","        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), false);","121","        fp.facets.add(facet);","122","        FingerprintCleanupThread cleanupThread = new TestFingerprintCleanupThread(fp);","123","        cleanupThread.execute(testTaskListener);","124","        assertThat(fpFile.toFile(), is(not(aReadableFile())));","125","    }","126","","182","    public static final class TestFingperprintFacet extends FingerprintFacet {","183","","184","        private boolean deletionBlocked;","185","","186","        public TestFingperprintFacet(Fingerprint fingerprint, long timestamp, boolean deletionBlocked) {","187","            super(fingerprint, timestamp);","188","            this.deletionBlocked = deletionBlocked;","189","        }","190","","191","        @Override public boolean isFingerprintDeletionBlocked() {","192","            return deletionBlocked;","193","        }","194","","195","    }","196",""],"delete":[]}]}},"4ef6a6431990ae36d4e7dc376b3f0be9b1ee2625":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/listeners\/RunListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["113","import hudson.model.Run.RunExecution;","114","import java.io.ByteArrayInputStream;","121","import javax.annotation.Nonnull;","1228","        String message = \"No such file: \" + logFile;","1229","    \treturn new ByteArrayInputStream(charset != null ? message.getBytes(charset) : message.getBytes());","1470","        public abstract void cleanUp(@Nonnull BuildListener listener) throws Exception;","1602","                if (listener != null) {","1603","                    try {","1604","                        job.cleanUp(listener);","1605","                    } catch (Exception e) {","1606","                        handleFatalBuildProblem(listener,e);","1607","                        \/\/ too late to update the result now","1608","                    }","1609","                    RunListener.fireCompleted(this,listener);","1612","                }"],"delete":["106","import org.apache.tools.ant.taskdefs.email.Mailer;","1226","    \treturn new NullInputStream(0);","1467","        public abstract void cleanUp(BuildListener listener) throws Exception;","1599","                try {","1600","                    job.cleanUp(listener);","1601","                } catch (Exception e) {","1602","                    handleFatalBuildProblem(listener,e);","1603","                    \/\/ too late to update the result now","1604","                }","1605","                    ","1606","                RunListener.fireCompleted(this,listener);","1607","","1608","                if(listener!=null)","1610","                if(listener!=null)"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Bogus \u201CBuild Record Root Directory\u201D inadequately diagnosed.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16457\">issue 16457<\/a>)"],"delete":["57","  <li class=>"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["379","     * Root directory for the workspaces.","380","     * This value will be variable-expanded as per {@link #expandVariablesForDirectory}.","386","     * Root directory for the builds.","387","     * This value will be variable-expanded as per {@link #expandVariablesForDirectory}.","1768","        public FormValidation doCheckRawBuildsDir(@QueryParameter String value) {","1769","            if (!value.contains(\"${\")) {","1770","                File d = new File(value);","1771","                if (!d.isDirectory() && (d.getParentFile() == null || !d.getParentFile().canWrite())) {","1772","                    return FormValidation.error(value + \" does not exist and probably cannot be created\");","1773","                }","1774","                \/\/ XXX failure to use either ITEM_* variable might be an error too?","1775","            }","1776","            return FormValidation.ok(); \/\/ XXX assumes it will be OK after substitution, but can we be sure?","1777","        }","1778",""],"delete":["96","import hudson.ExtensionPoint;","113","import hudson.WebAppMain;","137","import hudson.security.BasicAuthenticationFilter;","265","import java.text.ParseException;","383","     * Root directory for the workspaces. This value will be variable-expanded against","384","     * job name and JENKINS_HOME.","385","     *","391","     * Root directory for the workspaces. This value will be variable-expanded against","392","     * job name and JENKINS_HOME.","393","     *"]}],"core\/src\/main\/java\/hudson\/model\/listeners\/RunListener.java":[{"add":["49","import javax.annotation.Nonnull;","89","    public void onCompleted(R r, @Nonnull TaskListener listener) {}","177","    public static void fireCompleted(Run r, @Nonnull TaskListener listener) {"],"delete":["88","    public void onCompleted(R r, TaskListener listener) {}","176","    public static void fireCompleted(Run r, TaskListener listener) {"]}]}},"d35c7de73b1b78e1aa47470bdff36b0f60884c8d":{"changes":{"war\/src\/main\/js\/widgets\/config\/tabbar.less":"MODIFY"},"diff":{"war\/src\/main\/js\/widgets\/config\/tabbar.less":[{"add":["301","        position: absolute;","302","        top: -4px;","303","        right: 40px;","304","        height: 20px;","305","        width: 30px;","306","","307","        button {","308","          text-align: center;","309","          text-indent: -9999px;","310","          width: 30px !important;","311","          height: 18px !important;","312","          padding: 0 !important;","313","          margin: 0 !important;","314","          .border-radius-top(0) !important;","318","          line-height: 12px !important;","319","          display: inline-block;","320","          font-size: 8px;","322","","324","        button:hover {","326","          border-color: @danger-dark-line;","327","          color: @brightest;","329","","330","        button:before {","334","          display: block;","336","          top: 2;","337","          width: 30px;","338","          height: 16px;","341","          text-indent: 0;","342","        }"],"delete":["301","        position:absolute;","302","        top:-2px;","303","        right:35px;","304","        height:18px;","305","        width:32px;","306","        .border-radius-bottom(3px);","307","        overflow:hidden;","308","        ","309","        button{","310","          padding:0;","311","          margin:0;","312","          text-indent:999em;","318","        button:hover{","320","          border-color:@danger-dark-line;","321","          color:@brightest;","323","        button:before{","326","          text-indent: 0;","327","          display: block;","330","          right: 0;","331","          top: 0;","332","          bottom: 0;","335","          line-height: 18px;","336","        }  "]}]}},"8508fc365ac9faa4fa6ccee116e820c0455f0988":{"changes":{"core\/src\/main\/java\/hudson\/diagnosis\/OldDataMonitor.java":"MODIFY","test\/src\/test\/java\/hudson\/diagnosis\/OldDataMonitorTest.java":"ADD","test\/src\/test\/resources\/hudson\/diagnosis\/OldDataMonitorTest\/robustness.zip":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/diagnosis\/OldDataMonitor.java":[{"add":["70","    static OldDataMonitor get(Jenkins j) {","71","        return (OldDataMonitor) j.getAdministrativeMonitor(\"OldData\");","72","    }","73","","92","        OldDataMonitor odm = get(Jenkins.getInstance());","136","        OldDataMonitor odm = get(Jenkins.getInstance());","190","        OldDataMonitor odm = get(j);","264","    public synchronized HttpResponse doUpgrade(StaplerRequest req, StaplerResponse rsp) {","273","                try {","274","                    entry.getKey().save();","275","                } catch (Exception x) {","276","                    LOGGER.log(Level.WARNING, \"failed to save \" + entry.getKey(), x);","277","                }","289","    public synchronized HttpResponse doDiscard(StaplerRequest req, StaplerResponse rsp) {","295","                try {","296","                    entry.getKey().save();","297","                } catch (Exception x) {","298","                    LOGGER.log(Level.WARNING, \"failed to save \" + entry.getKey(), x);","299","                }"],"delete":["88","        OldDataMonitor odm = (OldDataMonitor) Jenkins.getInstance().getAdministrativeMonitor(\"OldData\");","132","        OldDataMonitor odm = (OldDataMonitor) Jenkins.getInstance().getAdministrativeMonitor(\"OldData\");","186","        OldDataMonitor odm = (OldDataMonitor) j.getAdministrativeMonitor(\"OldData\");","260","    public synchronized HttpResponse doUpgrade(StaplerRequest req, StaplerResponse rsp) throws IOException {","268","                entry.getKey().save();","281","    public synchronized HttpResponse doDiscard(StaplerRequest req, StaplerResponse rsp) throws IOException {","286","                entry.getKey().save();"]}],"test\/src\/test\/java\/hudson\/diagnosis\/OldDataMonitorTest.java":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/diagnosis\/OldDataMonitorTest\/robustness.zip":[{"add":[],"delete":[]}]}},"194209309af220ab6c950b4781d6f73e53710365":{"changes":{"war\/src\/main\/less\/base\/style.less":"MODIFY"},"diff":{"war\/src\/main\/less\/base\/style.less":[{"add":["1601","    will-change: opacity;","1647","  -webkit-animation: fadein 350ms ease-out 1 normal forwards;","1648","  -moz-animation: fadein 350ms ease-out 1 normal forwards;","1649","  -o-animation: fadein 350ms ease-out 1 normal forwards;","1650","  -ms-animation: fadein 350ms ease-out 1 normal forwards;","1651","  animation: fadein 350ms ease-out 1 normal forwards;","1655","  -webkit-animation: fadeout 350ms ease-in 1 normal forwards;","1656","  -moz-animation: fadeout 350ms ease-in 1 normal forwards;","1657","  -o-animation: fadeout 350ms ease-in 1 normal forwards;","1658","  -ms-animation: fadeout 350ms ease-in 1 normal forwards;","1659","  animation: fadeout 350ms ease-in 1 normal forwards;"],"delete":["1646","  -webkit-animation: fadein 1s linear 1 normal forwards;","1650","  -webkit-animation: fadeout 0.7s linear 1 normal forwards;"]}]}},"65f2a4a406c9d853a4ba9c763acc8f049a82c649":{"changes":{"test\/src\/test\/java\/jenkins\/util\/SystemPropertiesTest.java":"MODIFY","war\/src\/main\/webapp\/WEB-INF\/web.xml":"MODIFY","core\/src\/main\/java\/hudson\/WebAppMain.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/SystemProperties.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/util\/SystemPropertiesTest.java":[{"add":["26","import javax.servlet.ServletContextEvent;","46","        new SystemProperties().contextInitialized(new ServletContextEvent(j.jenkins.servletContext));"],"delete":["45","        SystemProperties.initialize(j.jenkins.servletContext);"]}],"war\/src\/main\/webapp\/WEB-INF\/web.xml":[{"add":["159","    <!-- Must be before WebAppMain in order to initialize the context before the first use of this class. -->","160","    <listener-class>jenkins.util.SystemProperties<\/listener-class>","161","  <\/listener>","162","  <listener>"],"delete":[]}],"core\/src\/main\/java\/hudson\/WebAppMain.java":[{"add":[],"delete":["123","            SystemProperties.initialize( event.getServletContext() );","124",""]}],"core\/src\/main\/java\/jenkins\/util\/SystemProperties.java":[{"add":["31","import javax.servlet.ServletContextEvent;","32","import javax.servlet.ServletContextListener;","66","public class SystemProperties implements ServletContextListener {","67","    \/\/ this class implements ServletContextListener and is declared in WEB-INF\/web.xml","68","","81","     * Public for the servlet container.","83","    public SystemProperties() {}","84","","85","    \/**","86","     * Called by the servlet container to initialize the {@link ServletContext}.","87","     *\/","88","    @Override","89","    public void contextInitialized(ServletContextEvent event) {","90","        theContext = event.getServletContext();","91","    }","267","","268","    @Override","269","    public void contextDestroyed(ServletContextEvent event) {","270","        \/\/ nothing to do","271","    }"],"delete":["64","public class SystemProperties {","77","     * This class should never be instantiated.","79","    private SystemProperties() {}","85","     * {@link ServletContext} check will be skipped if the context is not initialized.","122","     * {@link ServletContext} check will be skipped if the context is not initialized.","165","      * {@link ServletContext} check will be skipped if the context is not initialized.","184","      * {@link ServletContext} check will be skipped if the context is not initialized.","205","      * {@link ServletContext} check will be skipped if the context is not initialized.","245","    \/**","246","     * Invoked by WebAppMain, tells us where to get the \"init\" parameters from.","247","     * ","248","     * @param context the <code>ServletContext<\/code> obtained from <code>contextInitialized<\/code>","249","     *\/","250","    public static void initialize(ServletContext context) {","251","        theContext = context;","252","    }","253","    "]}]}},"023b2ad4188ad117bcddd9da78dde2ebcaa33872":{"changes":{"core\/src\/main\/resources\/hudson\/PluginWrapper\/uninstall.groovy":"MODIFY","core\/src\/main\/resources\/hudson\/PluginWrapper\/thirdPartyLicenses.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/PluginWrapper\/uninstall.groovy":[{"add":["2","import jenkins.model.Jenkins","3","","7","l.layout(permission: Jenkins.ADMINISTER) {"],"delete":["5","l.layout {"]}],"core\/src\/main\/resources\/hudson\/PluginWrapper\/thirdPartyLicenses.jelly":[{"add":["27","  <l:layout title=\"${%about(it.longName)}\" permission=\"${app.ADMINISTER}\">"],"delete":["27","  <l:layout title=\"${%about(it.longName)}\">"]}]}},"7a948d399585d201c4132597aed5723a495acf69":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["182","        <version>3.1<\/version>"],"delete":["182","        <version>3.0<\/version>"]}]}},"bb1f620d0abfee671f65abbeffef5e3d2fd8cfed":{"changes":{"\/dev\/null":"DELETE","war\/src\/main\/js\/api\/pluginManager.js":"MODIFY","test\/src\/test\/java\/jenkins\/install\/SetupWizardTest.java":"ADD","war\/src\/test\/js\/pluginSetupWizard-spec.js":"MODIFY","war\/src\/main\/js\/pluginSetupWizardGui.js":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY","core\/src\/main\/resources\/jenkins\/install\/platform-plugins.json":"ADD"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"war\/src\/main\/js\/api\/pluginManager.js":[{"add":["9","\/\/Get plugin info (plugins + recommended plugin list) from update centers.","10","var plugins;","11"," ","12","exports.initialPluginList = function(handler) {","13"," jenkins.get('\/setupWizard\/platformPluginList', function(response) {","14","   if(response.status !== 'ok') {","15","     handler.call({ isError: true, data: response.data });","16","     return;","17","   }","18","","19","   handler.call({ isError: false }, response.data);","20"," }, {","21","   timeout: pluginManagerErrorTimeoutMillis,","22","   error: function(xhr, textStatus, errorThrown) {","23","     handler.call({ isError: true, errorMessage: errorThrown });","24","   }","25"," });","26","};","27"," ","28","\/\/ Call this to initialize the plugin list","29","exports.init = function(handler) {","30","\texports.initialPluginList(function(initialPluginCategories) {","31","\t\tplugins = {};","32","\t\tplugins.names = [];","33","\t\tplugins.recommendedPlugins = [];","34","\t\tplugins.availablePlugins = initialPluginCategories;","35","\t\tfor (var i = 0; i < initialPluginCategories.length; i++) {","36","\t\t\tvar pluginCategory = initialPluginCategories[i];","37","\t\t\tvar categoryPlugins = pluginCategory.plugins;","38","\t\t\tfor (var ii = 0; ii < categoryPlugins.length; ii++) {","39","\t\t\t\tvar plugin = categoryPlugins[ii];","40","\t\t\t\tvar pluginName = plugin.name;","41","\t\t\t\tif (plugins.names.indexOf(pluginName) === -1) {","42","\t\t\t\t\tplugins.names.push(pluginName);","43","\t\t\t\t\tif (plugin.suggested) {","44","\t\t\t\t\t\tplugins.recommendedPlugins.push(pluginName);","45","\t\t\t\t\t}","46","\t\t\t\t}","47","\t\t\t}","48","\t\t}","49","\t\thandler();","50","\t});","51","}; ","233",""],"delete":["9","var plugins = require('.\/plugins.js');","10","plugins.names =[];","11","for (var i = 0; i < plugins.availablePlugins.length; i++) {","12","    var pluginCategory = plugins.availablePlugins[i];","13","    var categoryPlugins = pluginCategory.plugins;","14","    for (var ii = 0; ii < categoryPlugins.length; ii++) {","15","        var pluginName = categoryPlugins[ii].name;","16","        if (plugins.names.indexOf(pluginName) === -1) {","17","            plugins.names.push(pluginName);","18","        }","19","    }","20","}"]}],"test\/src\/test\/java\/jenkins\/install\/SetupWizardTest.java":[{"add":[],"delete":[]}],"war\/src\/test\/js\/pluginSetupWizard-spec.js":[{"add":["96","          status: 'ok',","97","          data: 'RANDOM_UUID_1234'","98","        },","99","        '\/jenkins\/setupWizard\/platformPluginList': {","101","        data: [","102","        {","103","         \"category\":\"Stuff\",","104","         \"plugins\": [","105","             { \"name\": \"mailer\" },","106","             { \"name\": \"junit\" },","107","             { \"name\": \"workflow-aggregator\", \"added\": \"2.0\" },","108","         ]","109","        },","110","        {","111","         \"category\":\"Source Code Management\",","112","         \"plugins\": [","113","             { \"name\": \"git\" },","114","             { \"name\": \"subversion\", \"suggested\": true }","115","         ]","116","        },","117","        {","118","         \"category\":\"User Management and Security\",","119","         \"plugins\": [            ","120","             { \"name\": \"matrix-auth\" },","121","             { \"name\": \"pam-auth\" },","122","             { \"name\": \"ldap\" }","123","         ]","124","        },","125","        {","126","         \"category\":\"Notifications and Publishing\",","127","         \"plugins\": [","128","             { \"name\": \"email-ext\" },","129","             { \"name\": \"ssh\" }","130","         ]","131","        }","132","        ]"],"delete":["11","var pluginList = jsTest.requireSrcModule('api\/plugins');","12","","13","pluginList.recommendedPlugins = ['subversion'];","14","","101","        data: 'RANDOM_UUID_1234'"]}],"war\/src\/main\/js\/pluginSetupWizardGui.js":[{"add":["138","\t","139","\tvar pluginList;","140","\tvar allPluginNames;","141","\tvar selectedPluginNames;","142","\t","143","\t\/\/ Initialize the plugin manager after connectivity checks","144","\tpluginManager.init(handleGenericError(function() {","145","\t  pluginList = pluginManager.plugins();","146","\t  allPluginNames = pluginManager.pluginNames();","147","\t  selectedPluginNames = pluginManager.recommendedPluginNames();","148","\t}));","910","\t\t\t"],"delete":["140","\tvar pluginList = pluginManager.plugins();","141","\tvar allPluginNames = pluginManager.pluginNames();","142","\tvar selectedPluginNames = pluginManager.recommendedPluginNames();","902",""]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["2","import edu.umd.cs.findbugs.annotations.CheckForNull;","29","import hudson.ProxyConfiguration;","31","import hudson.model.UpdateSite;","40","import java.io.File;","41","import java.net.HttpRetryException;","42","import java.net.HttpURLConnection;","43","import java.net.URL;","44","import java.net.URLConnection;","45","import java.util.Iterator;","48","import net.sf.json.JSONArray;","49","import net.sf.json.JSONObject;","50","import org.apache.commons.io.FileUtils;","51","import static org.apache.commons.io.FileUtils.readFileToString;","52","import org.apache.commons.io.IOUtils;","53","import static org.apache.commons.lang.StringUtils.defaultIfBlank;","54","import org.kohsuke.accmod.restrictions.DoNotUse;","69","    private final static Logger LOGGER = Logger.getLogger(SetupWizard.class.getName());","210","    \/*package*\/ static void completeUpgrade(Jenkins jenkins) throws IOException {","211","        setCurrentLevel(Jenkins.getVersion());","212","        \/\/TODO: restore when https:\/\/github.com\/jenkinsci\/jenkins\/pull\/2281 gets merged","213","        \/\/ jenkins.getInstallState().proceedToNextState();","214","    }","215","    ","216","    \/*package*\/ static void setCurrentLevel(VersionNumber v) throws IOException {","217","        FileUtils.writeStringToFile(getUpdateStateFile(), v.toString());","218","    }","219","    ","220","    \/**","221","     * File that captures the state of upgrade.","222","     *","223","     * This file records the version number that the installation has upgraded to.","224","     *\/","225","    \/*package*\/ static File getUpdateStateFile() {","226","        return new File(Jenkins.getInstance().getRootDir(),\"jenkins.install.UpgradeWizard.state\");","227","    }","228","    ","229","    \/**","230","     * What is the version the upgrade wizard has run the last time and upgraded to?.","231","     * If {@link #getUpdateStateFile()} is missing, presumes the baseline is 1.0","232","     * @return Current baseline. {@code null} if it cannot be retrieved.","233","     *\/","234","    @Restricted(NoExternalUse.class)","235","    @CheckForNull","236","    public static VersionNumber getCurrentLevel() {","237","        VersionNumber from = new VersionNumber(\"1.0\");","238","        File state = getUpdateStateFile();","239","        if (state.exists()) {","240","            try {","241","                from = new VersionNumber(defaultIfBlank(readFileToString(state), \"1.0\").trim());","242","            } catch (IOException ex) {","243","                LOGGER.log(Level.SEVERE, \"Cannot read the current version file\", ex);","244","                return null;","245","            }","246","        }","247","        return from;","248","    }","249","    ","250","    \/**","251","     * Returns the initial plugin list in JSON format","252","     *\/","253","    @Restricted(DoNotUse.class) \/\/ WebOnly","254","    public HttpResponse doPlatformPluginList() throws IOException {","255","        jenkins.install.SetupWizard setupWizard = Jenkins.getInstance().getSetupWizard();","256","        if (setupWizard != null) {","257","            if (InstallState.UPGRADE.equals(Jenkins.getInstance().getInstallState())) {","258","                JSONArray initialPluginData = getPlatformPluginUpdates();","259","                if(initialPluginData != null) {","260","                    return HttpResponses.okJSON(initialPluginData);","261","                }","262","            } else {","263","                JSONArray initialPluginData = getPlatformPluginList();","264","                if(initialPluginData != null) {","265","                    return HttpResponses.okJSON(initialPluginData);","266","                }","267","            }","268","        }","269","        return HttpResponses.okJSON();","270","    }","271","    ","272","    \/**","273","     * Provides the list of platform plugin updates from the last time","274","     * the upgrade was run.","275","     * @return {@code null} if the version range cannot be retrieved.","276","     *\/","277","    @CheckForNull","278","    \/*package*\/ JSONArray getPlatformPluginUpdates() {","279","        final VersionNumber version = getCurrentLevel();","280","        if (version == null) {","281","            return null;","282","        }","283","        return getPlatformPluginsForUpdate(version, Jenkins.getVersion());","284","    }","285","    ","286","    \/**","287","     * Gets the suggested plugin list from the update sites, falling back to a local version","288","     * @return JSON array with the categorized plugon list","289","     *\/","290","    @CheckForNull","291","    \/*package*\/ JSONArray getPlatformPluginList() {","292","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","293","        JSONArray initialPluginList = null;","294","        updateSiteList: for (UpdateSite updateSite : Jenkins.getInstance().getUpdateCenter().getSiteList()) {","295","            String updateCenterJsonUrl = updateSite.getUrl();","296","            String suggestedPluginUrl = updateCenterJsonUrl.replace(\"\/update-center.json\", \"\/platform-plugins.json\");","297","            try {","298","                URLConnection connection = ProxyConfiguration.open(new URL(suggestedPluginUrl));","299","                ","300","                try {","301","                    if(connection instanceof HttpURLConnection) {","302","                        int responseCode = ((HttpURLConnection)connection).getResponseCode();","303","                        if(HttpURLConnection.HTTP_OK != responseCode) {","304","                            throw new HttpRetryException(\"Invalid response code (\" + responseCode + \") from URL: \" + suggestedPluginUrl, responseCode);","305","                        }","306","                    }","307","                    ","308","                    String initialPluginJson = IOUtils.toString(connection.getInputStream(), \"utf-8\");","309","                    initialPluginList = JSONArray.fromObject(initialPluginJson);","310","                    break updateSiteList;","311","                } catch(Exception e) {","312","                    \/\/ not found or otherwise unavailable","313","                    LOGGER.log(Level.FINE, e.getMessage(), e);","314","                    continue updateSiteList;","315","                }","316","            } catch(Exception e) {","317","                LOGGER.log(Level.FINE, e.getMessage(), e);","318","            }","319","        }","320","        if (initialPluginList == null) {","321","            \/\/ fall back to local file","322","            try {","323","                ClassLoader cl = getClass().getClassLoader();","324","                URL localPluginData = cl.getResource(\"jenkins\/install\/platform-plugins.json\");","325","                String initialPluginJson = IOUtils.toString(localPluginData.openStream(), \"utf-8\");","326","                initialPluginList =  JSONArray.fromObject(initialPluginJson);","327","            } catch (Exception e) {","328","                LOGGER.log(Level.SEVERE, e.getMessage(), e);","329","            }","330","        }","331","        return initialPluginList;","332","    }","333","","334","    \/**","335","     * Get the platform plugins added in the version range","336","     *\/","337","    \/*package*\/ JSONArray getPlatformPluginsForUpdate(VersionNumber from, VersionNumber to) {","338","        JSONArray pluginCategories = JSONArray.fromObject(getPlatformPluginList().toString());","339","        for (Iterator<?> categoryIterator = pluginCategories.iterator(); categoryIterator.hasNext();) {","340","            Object category = categoryIterator.next();","341","            if (category instanceof JSONObject) {","342","                JSONObject cat = (JSONObject)category;","343","                JSONArray plugins = cat.getJSONArray(\"plugins\");","344","                ","345","                nextPlugin: for (Iterator<?> pluginIterator = plugins.iterator(); pluginIterator.hasNext();) {","346","                    Object pluginData = pluginIterator.next();","347","                    if (pluginData instanceof JSONObject) {","348","                        JSONObject plugin = (JSONObject)pluginData;","349","                        if (plugin.has(\"added\")) {","350","                            String sinceVersion = plugin.getString(\"added\");","351","                            if (sinceVersion != null) {","352","                                VersionNumber v = new VersionNumber(sinceVersion);","353","                                if(v.compareTo(to) <= 0 && v.compareTo(from) > 0) {","354","                                    plugin.put(\"suggested\", false);","355","                                    continue nextPlugin;","356","                                }","357","                            }","358","                        }","359","                    }","360","                    ","361","                    pluginIterator.remove();","362","                }","363","                ","364","                if (plugins.isEmpty()) {","365","                    categoryIterator.remove();","366","                }","367","            }","368","        }","369","        return pluginCategories;","370","    }","371","","391","        try {","392","            completeUpgrade(jenkins);","393","        } catch(IOException ex) {","394","            LOGGER.log(Level.SEVERE, \"Cannot update the upgrade status\", ex);","395","        }"],"delete":["53","    private final Logger LOGGER = Logger.getLogger(SetupWizard.class.getName());"]}],"core\/src\/main\/resources\/jenkins\/install\/platform-plugins.json":[{"add":[],"delete":[]}]}},"7694555886ac4a53a351f5a0d12443dd6443edd0":{"changes":{"core\/src\/main\/java\/hudson\/util\/AtomicFileWriter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/AtomicFileWriter.java":[{"add":["151","        core = new FileChannelWriter(tmpPath, charset, integrityOnFlush, integrityOnClose, StandardOpenOption.WRITE, StandardOpenOption.CREATE);"],"delete":["151","        core = new FileChannelWriter(tmpPath, charset, integrityOnFlush, integrityOnClose, StandardOpenOption.WRITE);"]}]}},"c7b6b4ddf036e710a0e0bf56b0a6edddb8fcbbf3":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Run\/consoleText.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Run\/consoleText.jelly":[{"add":["3","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\">","4","<st:contentType value=\"text\/plain;charset=UTF-8\" \/>${it.log}<\/j:jelly>"],"delete":["3","<j:jelly xmlns:j=\"jelly:core\">${it.log}<\/j:jelly>"]}]}},"0c4fe2ddbac2963c0b633fe27bb1a6016134da50":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenFingerprinter.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","changelog.html":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuildInformation.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenFingerprinter.java":[{"add":["140","        Map<String,String> modelParents = build.getMavenBuildInformation().modelParents;","141","        ArtifactRepository localRepository = getLocalRepository(build.getMavenBuildInformation(), pom);","142","        if (localRepository == null) {","143","            listener.error(\"Could not find local repository for \" + build.getMavenBuildInformation().getMavenVersion());","144","            return;","145","        }","146","\t\tString parent = modelParents.get(pom.getId());","148","            String[] parts = parent.split(\":\");","149","            assert parts.length == 4 : parent;","150","            \/\/ Maven 2.x lacks DefaultArtifact constructor with String version and ArtifactRepository.find:","151","            Artifact parentArtifact = new DefaultArtifact(parts[0], parts[1], VersionRange.createFromVersion(parts[3]), null, parts[2], null, new DefaultArtifactHandler(parts[2]));","152","            File parentFile = new File(localRepository.getBasedir(), localRepository.pathOf(parentArtifact));","153","            \/\/ we need to include the artifact Id for poms as well, otherwise a project with the same groupId would override its parent's fingerprint","154","            record(parts[0] + \":\" + parts[1], parentFile, used);","155","\t\t\tparent = modelParents.get(parent);","159","    private ArtifactRepository getLocalRepository(MavenBuildInformation mavenBuildInformation, MavenProject pom) {","161","            return pom.getProjectBuildingRequest().getLocalRepository();"],"delete":["140","\t\tMavenProject parent = getParent(pom, listener);","142","\t\t\tFile parentFile = parent.getFile();","143","","144","\t\t\tif (parentFile == null) {","145","\t\t\t\t\/\/ Parent artifact contains no actual file, so we resolve against","146","\t\t\t\t\/\/ the local repository","147","\t\t\t\tArtifactRepository localRepository = getLocalRepository(build.getMavenBuildInformation(), parent, pom);","148","\t\t\t\tif (localRepository != null) {","149","\t\t\t\t    Artifact parentArtifact = getArtifact(parent);","150","\t\t\t\t\t\/\/ Don't use ArtifactRepository.find(), for compatibility with Maven 2.x","151","\t\t\t\t    if (parentArtifact != null) {","152","\t\t\t\t        parentFile = new File(localRepository.getBasedir(),","153","\t\t\t\t\t\t\tlocalRepository.pathOf(parentArtifact));","154","\t\t\t\t    }","155","\t\t\t\t}","156","\t\t\t}","157","\t\t\t","158","\t\t\tif (parentFile != null) {","159","    \t\t\t\/\/ we need to include the artifact Id for poms as well, otherwise a","160","    \t\t\t\/\/ project with the same groupId would override its parent's","161","    \t\t\t\/\/ fingerprint","162","    \t\t\trecord(parent.getGroupId() + \":\" + parent.getArtifactId(),","163","    \t\t\t\t\tparentFile, used);","164","\t\t\t}","165","\t\t\tparent = getParent(parent, listener);","169","    \/\/ XXX consider calling also from PomInfo which makes a naked call to getParent","170","    private static MavenProject getParent(MavenProject pom, BuildListener listener) {","171","        try {","172","            return pom.getParent();","173","        } catch (IllegalStateException x) { \/\/ MNG-5075","174","            x.printStackTrace(listener.error(\"Warning: failed to resolve parent of \" + pom.getId()));","175","            return null;","176","        }","177","    }","178","","179","\tprivate Artifact getArtifact(MavenProject parent) {","180","\t    Artifact art = parent.getArtifact();","181","\t    if (art == null) {","182","\t        \/\/ happens for Maven 2.x","183","\t        DefaultArtifactHandler artifactHandler = new DefaultArtifactHandler(\"pom\");","184","\t        art = new DefaultArtifact(parent.getGroupId(), parent.getArtifactId(), VersionRange.createFromVersion(parent.getVersion()),","185","\t                null, \"pom\", \"\", artifactHandler);","186","\t    }","187","        return art;","188","    }","189","","190","    private ArtifactRepository getLocalRepository(MavenBuildInformation mavenBuildInformation, MavenProject parent, MavenProject pom) {","191","        ","193","            return parent.getProjectBuildingRequest().getLocalRepository();"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["67","import java.io.Serializable;","585","                    parsePoms(listener, logger, envVars, mvn, mavenVersion, mavenBuildInformation);","622","                        parsePoms(listener, logger, envVars, mvn, mavenVersion, mavenBuildInformation); \/\/ #5428 : do pre-build *before* parsing pom","859","        private void parsePoms(BuildListener listener, PrintStream logger, EnvVars envVars, MavenInstallation mvn, String mavenVersion, MavenBuildInformation mavenBuildInformation) throws IOException, InterruptedException {","864","                PomParser.Result result = getModuleRoot().act(new PomParser(listener, mvn, mavenVersion, envVars, MavenModuleSetBuild.this));","865","                poms = result.infos;","866","                mavenBuildInformation.modelParents.putAll(result.modelParents);","1002","    private static final class PomParser implements FileCallable<PomParser.Result> {","1033","        PomParser(BuildListener listener, MavenInstallation mavenHome, String mavenVersion, EnvVars envVars, MavenModuleSetBuild build) {","1087","        public static final class Result implements Serializable {","1088","            public final List<PomInfo> infos;","1089","            public final Map<String,String> modelParents;","1090","            public Result(List<PomInfo> infos, Map<String,String> modelParents) {","1091","                this.infos = infos;","1092","                this.modelParents = modelParents;","1093","            }","1094","        }","1095","","1096","        public Result invoke(File ws, VirtualChannel channel) throws IOException {","1208","                Map<String,String> modelParents = new HashMap<String,String>();","1213","                    while (true) {","1214","                        String k = mp.getId();","1215","                        if (modelParents.containsKey(k)) {","1216","                            break;","1217","                        }","1218","                        MavenProject mpp = mp.getParent();","1219","                        if (mpp == null) {","1220","                            break;","1221","                        }","1222","                        modelParents.put(k, mpp.getId());","1223","                        mp = mpp;","1224","                    }","1252","                return new Result(new ArrayList<PomInfo>(infos), modelParents);"],"delete":["584","                    parsePoms(listener, logger, envVars, mvn, mavenVersion);","621","                        parsePoms(listener, logger, envVars, mvn, mavenVersion); \/\/ #5428 : do pre-build *before* parsing pom","858","        private void parsePoms(BuildListener listener, PrintStream logger, EnvVars envVars, MavenInstallation mvn, String mavenVersion) throws IOException, InterruptedException {","863","                poms = getModuleRoot().act(new PomParser(listener, mvn, mavenVersion, envVars, MavenModuleSetBuild.this));","999","    private static final class PomParser implements FileCallable<List<PomInfo>> {","1030","        public PomParser(BuildListener listener, MavenInstallation mavenHome, String mavenVersion, EnvVars envVars, MavenModuleSetBuild build) {","1084","        public List<PomInfo> invoke(File ws, VirtualChannel channel) throws IOException {","1227","                return new ArrayList<PomInfo>(infos);"]}],"changelog.html":[{"add":["60","  <li class='major bug'>","61","    Properly find parent POMs when fingerprinting a Maven project.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17775\">issue 17775<\/a>)","78","    Mitigation of exception from fingerprinting in a Maven project when a parent POM could not be located."],"delete":["75","    Amelioration of exception from fingerprinting in a Maven project when a parent POM could not be located."]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuildInformation.java":[{"add":["23","import java.util.HashMap;","24","import java.util.Map;","28","import org.apache.maven.model.Model;","29","import org.apache.maven.project.MavenProject;","39","    \/**","40","     * Map of model IDs to IDs of the model parents (if defined).","41","     * @see MavenProject#getId","42","     * @see Model#getId","43","     * @see MavenProject#getParent","44","     * @see Model#getParent","45","     * @since 1.515","46","     *\/","47","    public final Map<String,String> modelParents = new HashMap<String,String>();"],"delete":[]}]}},"b1fe504b7d35d192c01f69f79daf554348128dec":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/ArtifactArchiverTest.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/ArtifactArchiverTest.java":[{"add":["26","import hudson.FilePath;","33","import java.io.File;","122","    @Bug(3227)","123","    public void testEmptyDirectories() throws Exception {","124","        FreeStyleProject project = createFreeStyleProject();","125","        Publisher artifactArchiver = new ArtifactArchiver(\"dir\/\", \"\", false);","126","        project.getPublishersList().replaceBy(Collections.singleton(artifactArchiver));","127","        project.getBuildersList().replaceBy(Collections.singleton(new TestBuilder() {","128","            public boolean perform(AbstractBuild<?, ?> build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {","129","                FilePath dir = build.getProject().getWorkspace().child(\"dir\");","130","                dir.child(\"subdir1\").mkdirs();","131","                FilePath subdir2 = dir.child(\"subdir2\");","132","                subdir2.mkdirs();","133","                subdir2.child(\"file\").write(\"content\", \"UTF-8\");","134","                return true;","135","            }","136","        }));","137","        assertEquals(Result.SUCCESS, build(project)); \/\/ #1","138","        File artifacts = project.getBuildByNumber(1).getArtifactsDir();","139","        File[] kids = artifacts.listFiles();","140","        assertEquals(1, kids.length);","141","        assertEquals(\"dir\", kids[0].getName());","142","        kids = kids[0].listFiles();","143","        assertEquals(1, kids.length);","144","        assertEquals(\"subdir2\", kids[0].getName());","145","        kids = kids[0].listFiles();","146","        assertEquals(1, kids.length);","147","        assertEquals(\"file\", kids[0].getName());","148","    }","149",""],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["944","                        copyTask.setIncludeEmptyDirs(false);"],"delete":[]}]}},"c0db657f2245b8d9a6b1db727db47b85dce3d3bd":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi,","3","# Eric Lefevre-Ardant, Erik Ramfelt, Seiji Sogabe, id:cactusman","163","Run.InProgressDuration={0} and counting"],"delete":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant, Erik Ramfelt, Seiji Sogabe, id:cactusman"]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi,","4"," * Daniel Dyer, Red Hat, Inc., Tom Huybrechts","522","            return Messages.Run_InProgressDuration(","523","                    Util.getTimeSpanString(System.currentTimeMillis()-timestamp));","1272","                duration = Math.max(end - start, 0);  \/\/ @see HUDSON-5844"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, Red Hat, Inc., Tom Huybrechts","52","import hudson.util.IOUtils;","60","import java.io.FilterOutputStream;","82","import java.util.ListIterator;","524","            return Util.getTimeSpanString(System.currentTimeMillis()-timestamp)+\" and counting\";","1273","                duration = end-start;"]}]}},"a156f1ebc610eae0e6e2316576d6f97a0180986b":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["360","  <li class=bug>"],"delete":["360","  <li class=rfe>"]}]}},"df8df45c27a229a6e3e2358b98db03a6028d8fc4":{"changes":{"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginStrategy.java":"MODIFY","test\/src\/test\/resources\/plugins\/depender.hpi":"ADD","test\/src\/test\/resources\/plugins\/dependee.hpi":"ADD","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","test\/src\/test\/java\/hudson\/PluginManagerTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":[{"add":["379","    \/**","380","     * Called when a plugin is deployed, and there is a plugin optionally depending on that plugin.","381","     * The class loader of the existing depending plugin should be updated","382","     * to load classes from the newly deployed plugin.","383","     * ","384","     * @param depender the plugin to update its class loader","385","     * @param dependee","386","     * @see hudson.PluginStrategy#updateDependency(hudson.PluginWrapper, hudson.PluginWrapper)","387","     *\/","388","    @Override","389","    public void updateDependency(PluginWrapper depender, PluginWrapper dependee) {","390","        DependencyClassLoader classLoader = findAncestorDependencyClassLoader(depender.classLoader);","391","        if (classLoader != null) {","392","            classLoader.updateTransientDependencies();","393","            LOGGER.log(Level.INFO, \"Updated dependency of {0}\", depender.getShortName());","394","        }","395","    }","396","","397","    private DependencyClassLoader findAncestorDependencyClassLoader(ClassLoader classLoader)","398","    {","399","        for (; classLoader != null; classLoader = classLoader.getParent()) {","400","            if (classLoader instanceof DependencyClassLoader) {","401","                return (DependencyClassLoader)classLoader;","402","            }","403","            ","404","            if (classLoader instanceof AntClassLoader) {","405","                \/\/ AntClassLoaders hold parents not only as AntClassLoader#getParent()","406","                \/\/ but also as AntClassLoader#getConfiguredParent()","407","                DependencyClassLoader ret = findAncestorDependencyClassLoader(","408","                        ((AntClassLoader)classLoader).getConfiguredParent()","409","                );","410","                if (ret != null) {","411","                    return ret;","412","                }","413","            }","414","        }","415","        return null;","416","    }","417","","564","        private void updateTransientDependencies() {","565","            \/\/ This will be recalculated at the next time.","566","            transientDependencies = null;","567","        }","568",""],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginStrategy.java":[{"add":["79","    ","80","    \/**","81","     * Called when a plugin that is depended by another plugin is newly deployed.","82","     * ","83","     * @param depender plugin depending on dependee.","84","     * @param dependee newly loaded plugin.","85","     *\/","86","    void updateDependency(PluginWrapper depender, PluginWrapper dependee);"],"delete":[]}],"test\/src\/test\/resources\/plugins\/depender.hpi":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/plugins\/dependee.hpi":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["455","        ","456","        \/\/ recalculate dependencies of plugins optionally depending the newly deployed one.","457","        for (PluginWrapper depender: plugins) {","458","            if (depender.equals(p)) {","459","                \/\/ skip itself.","460","                continue;","461","            }","462","            for (Dependency d: depender.getOptionalDependencies()) {","463","                if (d.shortName.equals(p.getShortName())) {","464","                    \/\/ this plugin depends on the newly loaded one!","465","                    \/\/ recalculate dependencies!","466","                    getPluginStrategy().updateDependency(depender, p);","467","                    break;","468","                }","469","            }","470","        }","471","        "],"delete":[]}],"test\/src\/test\/java\/hudson\/PluginManagerTest.java":[{"add":["43","import java.lang.reflect.Method;","225","    \/\/ plugin \"depender\" optionally depends on plugin \"dependee\".","226","    \/\/ they are written like this:","227","    \/\/ org.jenkinsci.plugins.dependencytest.dependee:","228","    \/\/   public class Dependee {","229","    \/\/     public static String getValue() {","230","    \/\/       return \"dependee\";","231","    \/\/     }","232","    \/\/   }","233","    \/\/   ","234","    \/\/   public abstract class DependeeExtensionPoint implements ExtensionPoint {","235","    \/\/   }","236","    \/\/   ","237","    \/\/ org.jenkinsci.plugins.dependencytest.depender:","238","    \/\/   public class Depender {","239","    \/\/     public static String getValue() {","240","    \/\/       if (Jenkins.getInstance().getPlugin(\"dependee\") != null) {","241","    \/\/         return Dependee.getValue();","242","    \/\/       }","243","    \/\/       return \"depender\";","244","    \/\/     }","245","    \/\/   }","246","    \/\/   ","247","    \/\/   @Extension(optional=true)","248","    \/\/   public class DependerExtension extends DependeeExtensionPoint {","249","    \/\/   }","250","    ","251","    ","252","    \/**","253","     * call org.jenkinsci.plugins.dependencytest.depender.Depender.getValue().","254","     * ","255","     * @return","256","     * @throws Exception","257","     *\/","258","    private String callDependerValue() throws Exception {","259","        Class<?> c = jenkins.getPluginManager().uberClassLoader.loadClass(\"org.jenkinsci.plugins.dependencytest.depender.Depender\");","260","        Method m = c.getMethod(\"getValue\");","261","        return (String)m.invoke(null);","262","    }","263","    ","264","    \/**","265","     * Load \"dependee\" and then load \"depender\".","266","     * Asserts that \"depender\" can access to \"dependee\".","267","     * ","268","     * @throws Exception","269","     *\/","270","    public void testInstallDependingPluginWithoutRestart() throws Exception {","271","        \/\/ Load dependee.","272","        {","273","            String target = \"dependee.hpi\";","274","            URL src = getClass().getClassLoader().getResource(String.format(\"plugins\/%s\", target));","275","            File dest = new File(jenkins.getRootDir(), String.format(\"plugins\/%s\", target));","276","            FileUtils.copyURLToFile(src, dest);","277","            jenkins.pluginManager.dynamicLoad(dest);","278","        }","279","        ","280","        \/\/ before load depender, of course failed to call Depender.getValue()","281","        try {","282","            callDependerValue();","283","            fail();","284","        } catch (ClassNotFoundException _) {","285","        }","286","        ","287","        \/\/ No extensions exist.","288","        assertTrue(jenkins.getExtensionList(\"org.jenkinsci.plugins.dependencytest.dependee.DependeeExtensionPoint\").isEmpty());","289","        ","290","        \/\/ Load depender.","291","        {","292","            String target = \"depender.hpi\";","293","            URL src = getClass().getClassLoader().getResource(String.format(\"plugins\/%s\", target));","294","            File dest = new File(jenkins.getRootDir(), String.format(\"plugins\/%s\", target));","295","            FileUtils.copyURLToFile(src, dest);","296","            jenkins.pluginManager.dynamicLoad(dest);","297","        }","298","        ","299","        \/\/ depender successfully accesses to dependee.","300","        assertEquals(\"dependee\", callDependerValue());","301","        ","302","        \/\/ Extension in depender is loaded.","303","        assertFalse(jenkins.getExtensionList(\"org.jenkinsci.plugins.dependencytest.dependee.DependeeExtensionPoint\").isEmpty());","304","    }","305","    ","306","    \/**","307","     * Load \"depender\" and then load \"dependee\".","308","     * Asserts that \"depender\" can access to \"dependee\".","309","     * ","310","     * @throws Exception","311","     *\/","312","    public void testInstallDependedPluginWithoutRestart() throws Exception {","313","        \/\/ Load depender.","314","        {","315","            String target = \"depender.hpi\";","316","            URL src = getClass().getClassLoader().getResource(String.format(\"plugins\/%s\", target));","317","            File dest = new File(jenkins.getRootDir(), String.format(\"plugins\/%s\", target));","318","            FileUtils.copyURLToFile(src, dest);","319","            jenkins.pluginManager.dynamicLoad(dest);","320","        }","321","        ","322","        \/\/ before load dependee, depender does not access to dependee.","323","        assertEquals(\"depender\", callDependerValue());","324","        ","325","        \/\/ before load dependee, of course failed to list extensions for dependee.","326","        try {","327","            jenkins.getExtensionList(\"org.jenkinsci.plugins.dependencytest.dependee.DependeeExtensionPoint\");","328","            fail();","329","        } catch( ClassNotFoundException _ ){","330","        }","331","        ","332","        \/\/ Load dependee.","333","        {","334","            String target = \"dependee.hpi\";","335","            URL src = getClass().getClassLoader().getResource(String.format(\"plugins\/%s\", target));","336","            File dest = new File(jenkins.getRootDir(), String.format(\"plugins\/%s\", target));","337","            FileUtils.copyURLToFile(src, dest);","338","            jenkins.pluginManager.dynamicLoad(dest);","339","        }","340","        ","341","        \/\/ (MUST) Not throws an exception","342","        \/\/ (SHOULD) depender successfully accesses to dependee.","343","        assertEquals(\"dependee\", callDependerValue());","344","        ","345","        \/\/ No extensions exist.","346","        \/\/ extensions in depender is not loaded.","347","        assertTrue(jenkins.getExtensionList(\"org.jenkinsci.plugins.dependencytest.dependee.DependeeExtensionPoint\").isEmpty());","348","    }","349",""],"delete":[]}]}},"f0d9e13ec85ced63ba9db570f4a5c02bc83bbf3b":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY","test\/src\/test\/java\/hudson\/model\/BuildExecutionTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Build.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["94","Build.post_build_steps_failed=Post-build steps failed"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/BuildExecutionTest.java":[{"add":["47","        r.assertLogContains(Messages.Build_post_build_steps_failed(), b);"],"delete":["47","        r.assertLogContains(\"Post-build steps failed\", b);"]}],"core\/src\/main\/java\/hudson\/model\/Build.java":[{"add":["195","                x.printStackTrace(listener.error(Messages.Build_post_build_steps_failed()));"],"delete":["195","                x.printStackTrace(listener.error(\"Post-build steps failed\"));"]}]}},"12cd1593679eefcc73680abfd3a289fee805f5e9":{"changes":{"core\/src\/main\/resources\/hudson\/PluginManager\/table.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/PluginManager\/table.jelly":[{"add":["104","                      <j:if test=\"${p.fixesSecurityVulnerabilities()}\">","105","                        <div class=\"alert alert-warning\">${%Applying this update will address security vulnerabilities in the currently installed version.}<\/div>","106","                      <\/j:if>"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["69","import jenkins.security.UpdateSiteWarningsMonitor;","1280","         * Returns true if and only if this update addressed a currently active security vulnerability.","1281","         *","1282","         * @return true if and only if this update addressed a currently active security vulnerability.","1283","         *\/","1284","        @Restricted(NoExternalUse.class) \/\/ Jelly","1285","        public boolean fixesSecurityVulnerabilities() {","1286","            final PluginWrapper installed = getInstalled();","1287","            if (installed == null) {","1288","                return false;","1289","            }","1290","            boolean allWarningsStillApply = true;","1291","            for (Warning warning : ExtensionList.lookupSingleton(UpdateSiteWarningsMonitor.class).getActivePluginWarningsByPlugin().getOrDefault(installed, Collections.emptyList())) {","1292","                boolean thisWarningApplies = false;","1293","                for (WarningVersionRange range : warning.versionRanges) {","1294","                    if (range.includes(new VersionNumber(version))) {","1295","                        thisWarningApplies = true;","1296","                    }","1297","                }","1298","                if (!thisWarningApplies) {","1299","                    allWarningsStillApply = false;","1300","                }","1301","            }","1302","            return !allWarningsStillApply;","1303","        }","1304","","1305","        \/**"],"delete":[]}]}},"a415a37dbb9df81c9fb1a5b4623055ec9a63033b":{"changes":{"core\/src\/main\/resources\/hudson\/security\/Messages_es.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/security\/Messages_es.properties":[{"add":["22","GlobalSecurityConfiguration.DisplayName=Configuraci\\u00F3n global de la seguridad","23","GlobalSecurityConfiguration.Description=Seguridad en Jenkins. \\","24","  Define qui\\u00E9n tiene acceso al sistema (autenticaci\\u00F3n) y qu\\u00E9 puede hacer (autorizaci\\u00F3n)"],"delete":[]}]}},"d79b1fb6819f7b077a426c1d5b614a76b4d924fc":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["392","      <version>1.3.1-hudson-1<\/version>"],"delete":["392","      <version>1.3-hudson-3<\/version>"]}]}},"d83ecab213d84ad51d29798a8405e4d9afc4c8fe":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["109","                <resolveArtifact groupId=\"org.jvnet.hudson.winstone\" artifactId=\"winstone\" version=\"0.9.10-hudson-11\" type=\"jar\" tofile=\"${basedir}\/target\/generated-resources\/winstone.jar\" \/>"],"delete":["109","                <resolveArtifact groupId=\"org.jvnet.hudson.winstone\" artifactId=\"winstone\" version=\"0.9.10-hudson-10\" type=\"jar\" tofile=\"${basedir}\/target\/generated-resources\/winstone.jar\" \/>"]}]}},"85e9e126773c0bb20a8529a2e6591dde17d7e209":{"changes":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":"MODIFY"},"diff":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":[{"add":["280","    \/* TODO too slow, seems capable of causing testWorkspaceLock to time out:","289","    *\/"],"delete":[]}]}},"f68aa5b7a46bb2a736c7bc8bd4a85e427a92d9fc":{"changes":{"core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["75","","76","                for (TopLevelItem item : owner.getItems()) {","77","                \tString itemName = item.getName();","78","\t\t\t\t\tif (includePattern.matcher(itemName).matches()) {","79","                        names.add(itemName);","80","                    }"],"delete":["75","                ","76","                Collection<String> allJobNames = owner.getJobNames();","77","                for (Iterator<String> iterator = allJobNames.iterator(); iterator.hasNext();) {","78","                    String string = iterator.next();","79","                    if (includePattern.matcher(string).matches()) {","80","                        names.add(string);","81","                    }   "]}]}},"f633a44ffba7c4a3b78aaecdb07aebdafa3814dd":{"changes":{"core\/src\/main\/java\/hudson\/security\/HudsonPrivateSecurityRealm.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/HudsonPrivateSecurityRealm.java":[{"add":["312","                \/\/ Allow sign up. SCM people has no such property.","313","                if (user.getProperty(Details.class) != null)","314","                    si.errorMessage = Messages.HudsonPrivateSecurityRealm_CreateAccount_UserNameAlreadyTaken();"],"delete":["312","                si.errorMessage = Messages.HudsonPrivateSecurityRealm_CreateAccount_UserNameAlreadyTaken();"]}]}},"681a8ff3070736610f338972ba433379723346fb":{"changes":{"core\/src\/main\/java\/hudson\/diagnosis\/OldDataMonitor.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/diagnosis\/OldDataMonitorTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/diagnosis\/OldDataMonitor.java":[{"add":["25","import com.thoughtworks.xstream.converters.UnmarshallingContext;","26","import hudson.Extension;","31","import hudson.model.ManagementLink;","47","import javax.annotation.CheckForNull;","48","import jenkins.model.Jenkins;","52","import org.kohsuke.stapler.StaplerRequest;","53","import org.kohsuke.stapler.StaplerResponse;","64","    private static final Logger LOGGER = Logger.getLogger(OldDataMonitor.class.getName());","66","    private HashMap<SaveableReference,VersionRange> data = new HashMap<SaveableReference,VersionRange>();","87","        Map<Saveable,VersionRange> r = new HashMap<Saveable,VersionRange>();","88","        for (Map.Entry<SaveableReference,VersionRange> entry : data.entrySet()) {","89","            Saveable s = entry.getKey().get();","90","            if (s != null) {","91","                r.put(s, entry.getValue());","92","            }","93","        }","94","        return r;","101","            odm.data.remove(referTo(obj));","104","                    odm.data.remove(referTo(r));","145","                SaveableReference ref = referTo(obj);","146","                VersionRange vr = odm.data.get(ref);","148","                else            odm.data.put(ref, new VersionRange(version, null));","199","            SaveableReference ref = referTo(obj);","200","            VersionRange vr = odm.data.get(ref);","202","            else            odm.data.put(ref, new VersionRange(null, buf.toString()));","276","        for (Iterator<Map.Entry<SaveableReference,VersionRange>> it = data.entrySet().iterator(); it.hasNext();) {","277","            Map.Entry<SaveableReference,VersionRange> entry = it.next();","281","                tryToSave(entry.getKey());","295","        for (Iterator<Map.Entry<SaveableReference,VersionRange>> it = data.entrySet().iterator(); it.hasNext();) {","296","            Map.Entry<SaveableReference,VersionRange> entry = it.next();","299","                tryToSave(entry.getKey());","306","    private void tryToSave(SaveableReference ref) {","307","        Saveable s = ref.get();","308","        if (s != null) {","309","            try {","310","                s.save();","311","            } catch (Exception x) {","312","                LOGGER.log(Level.WARNING, \"failed to save \" + s, x);","313","            }","314","        }","315","    }","316","","321","    \/** Reference to a saveable object that need not actually hold it in heap. *\/","322","    private interface SaveableReference {","323","        @CheckForNull Saveable get();","324","        \/\/ must also define equals, hashCode","325","    }","326","","327","    private static SaveableReference referTo(Saveable s) {","328","        if (s instanceof Run) {","329","            return new RunSaveableReference((Run) s);","330","        } else {","331","            return new SimpleSaveableReference(s);","332","        }","333","    }","334","","335","    private static final class SimpleSaveableReference implements SaveableReference {","336","        private final Saveable instance;","337","        SimpleSaveableReference(Saveable instance) {","338","            this.instance = instance;","339","        }","340","        @Override public Saveable get() {","341","            return instance;","342","        }","343","        @Override public int hashCode() {","344","            return instance.hashCode();","345","        }","346","        @Override public boolean equals(Object obj) {","347","            return obj instanceof SimpleSaveableReference && instance.equals(((SimpleSaveableReference) obj).instance);","348","        }","349","    }","350","","351","    \/\/ could easily make an ItemSaveableReference, but Jenkins holds all these strongly, so why bother","352","","353","    private static final class RunSaveableReference implements SaveableReference {","354","        private final String id;","355","        RunSaveableReference(Run<?,?> r) {","356","            id = r.getExternalizableId();","357","        }","358","        @Override public Saveable get() {","359","            try {","360","                return Run.fromExternalizableId(id);","361","            } catch (IllegalArgumentException x) {","362","                \/\/ Typically meaning the job or build was since deleted.","363","                LOGGER.log(Level.FINE, null, x);","364","                return null;","365","            }","366","        }","367","        @Override public int hashCode() {","368","            return id.hashCode();","369","        }","370","        @Override public boolean equals(Object obj) {","371","            return obj instanceof RunSaveableReference && id.equals(((RunSaveableReference) obj).id);","372","        }","373","    }","374",""],"delete":["27","import hudson.model.ManagementLink;","28","import jenkins.model.Jenkins;","29","import hudson.Extension;","39","import org.kohsuke.stapler.StaplerRequest;","40","import org.kohsuke.stapler.StaplerResponse;","41","import com.thoughtworks.xstream.converters.UnmarshallingContext;","42","","45","import java.util.Collections;","65","    private static Logger LOGGER = Logger.getLogger(OldDataMonitor.class.getName());","67","    private HashMap<Saveable,VersionRange> data = new HashMap<Saveable,VersionRange>();","88","        return Collections.unmodifiableMap(data);","95","            odm.data.remove(obj);","98","                    odm.data.remove(r);","139","                VersionRange vr = odm.data.get(obj);","141","                else            odm.data.put(obj, new VersionRange(version, null));","192","            VersionRange vr = odm.data.get(obj);","194","            else            odm.data.put(obj, new VersionRange(null, buf.toString()));","268","        for (Iterator<Map.Entry<Saveable,VersionRange>> it = data.entrySet().iterator(); it.hasNext();) {","269","            Map.Entry<Saveable,VersionRange> entry = it.next();","273","                try {","274","                    entry.getKey().save();","275","                } catch (Exception x) {","276","                    LOGGER.log(Level.WARNING, \"failed to save \" + entry.getKey(), x);","277","                }","291","        for (Iterator<Map.Entry<Saveable,VersionRange>> it = data.entrySet().iterator(); it.hasNext();) {","292","            Map.Entry<Saveable,VersionRange> entry = it.next();","295","                try {","296","                    entry.getKey().save();","297","                } catch (Exception x) {","298","                    LOGGER.log(Level.WARNING, \"failed to save \" + entry.getKey(), x);","299","                }"]}],"changelog.html":[{"add":["65","  <li class=bug>","66","    Memory leaks in the old data monitor.","67","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19544\">issue 19544<\/a>)"],"delete":[]}],"test\/src\/test\/java\/hudson\/diagnosis\/OldDataMonitorTest.java":[{"add":["26","import hudson.model.FreeStyleBuild;","29","import java.lang.ref.WeakReference;","36","import org.jvnet.hudson.test.MemoryAssert;","63","    @Bug(19544)","64","    @Test public void memory() throws Exception {","65","        FreeStyleProject p = r.createFreeStyleProject(\"p\");","66","        FreeStyleBuild b = r.assertBuildStatusSuccess(p.scheduleBuild2(0));","67","        b.addAction(new BadAction2());","68","        b.save();","69","        r.jenkins.getQueue().clearLeftItems();","70","        p._getRuns().purgeCache();","71","        b = p.getBuildByNumber(1);","72","        assertEquals(Collections.singleton(b), OldDataMonitor.get(r.jenkins).getData().keySet());","73","        WeakReference<?> ref = new WeakReference<Object>(b);","74","        b = null;","75","        MemoryAssert.assertGC(ref);","76","    }","77","","84","    public static final class BadAction2 extends InvisibleAction {","85","        private Object readResolve() {","86","            throw new IllegalStateException(\"broken\");","87","        }","88","    }","89",""],"delete":[]}]}},"b0fd310ab61d6ba81759b1750ea5b5a48a257777":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["81","    <code>ParametersDefinition<\/code> and <code>BuildDiscarder<\/code> properties. "],"delete":["81","    <code>ParametersDefinition<\/code> and <code>BuildDiscarder\/code> properties. "]}]}},"2a75ca1ffe0df0035024cb221381a66bb6dcf61c":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/changes.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/changes.jelly":[{"add":["33","      <j:choose>","34","        <j:when test=\"${it.hasChangeSetComputed()}\">","35","          <st:include page=\"index.jelly\" it=\"${it.changeSet}\" \/>","36","        <\/j:when>","37","        <j:when test=\"${it.building}\">","38","          ${%Not yet determined}","39","        <\/j:when>","40","        <j:otherwise>","41","          ${%Failed to determine} (<a href=\"console\">${%log}<\/a>)","42","        <\/j:otherwise>","43","      <\/j:choose>"],"delete":["33","      <st:include page=\"index.jelly\" it=\"${it.changeSet}\" \/>"]}]}},"b1e8c6565cef1f6f3e979c50eb0d6580460cbc64":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["196","            CHECK_UPDATE_ATTEMPTS = SystemProperties.getInteger(PluginManager.class.getName() + \".checkUpdateAttempts\", 1);"],"delete":["196","            CHECK_UPDATE_ATTEMPTS = SystemProperties.getInteger(PluginManager.class.getName() + \".CHECK_UPDATE_ATTEMPTS\", 1);"]}]}},"e998a7808ff7bf2523382fac8a28c2c1912b63a4":{"changes":{"cli\/src\/main\/resources\/hudson\/cli\/client\/Messages.properties":"MODIFY","core\/pom.xml":"MODIFY","cli\/pom.xml":"MODIFY","cli\/src\/main\/java\/hudson\/cli\/CLI.java":"MODIFY","pom.xml":"MODIFY","test\/src\/test\/java\/hudson\/cli\/CLIEnvVarTest.java":"ADD","cli\/src\/main\/resources\/hudson\/cli\/client\/Messages_es.properties":"MODIFY"},"diff":{"cli\/src\/main\/resources\/hudson\/cli\/client\/Messages.properties":[{"add":["15","                                   for use with -http, or -remoting but only when the JNLP agent port is disabled.\\n\\","16","                                   Not necessary if JENKINS_USER_ID and JENKINS_API_TOKEN env vars are set\\n\\","23","CLI.BadAuth=The JENKINS_USER_ID and JENKINS_API_TOKEN env vars should be both set or left empty. "],"delete":["15","                                   for use with -http, or -remoting but only when the JNLP agent port is disabled\\n\\"]}],"core\/pom.xml":[{"add":[],"delete":["281","      <version>2.6<\/version>"]}],"cli\/pom.xml":[{"add":["83","    <dependency>","84","      <groupId>commons-lang<\/groupId>","85","      <artifactId>commons-lang<\/artifactId>","86","    <\/dependency>"],"delete":[]}],"cli\/src\/main\/java\/hudson\/cli\/CLI.java":[{"add":["79","import org.apache.commons.lang.StringUtils;","455","","456","        String userIdEnv = System.getenv(\"JENKINS_USER_ID\");","457","        String tokenEnv = System.getenv(\"JENKINS_API_TOKEN\");","458","","570","        if (auth == null) {","571","            \/\/ -auth option not set","572","            if (StringUtils.isNotBlank(userIdEnv) && StringUtils.isNotBlank(tokenEnv)) {","573","                auth = StringUtils.defaultString(userIdEnv).concat(\":\").concat(StringUtils.defaultString(tokenEnv));","574","            } else if (StringUtils.isNotBlank(userIdEnv) || StringUtils.isNotBlank(tokenEnv)) {","575","                printUsage(Messages.CLI_BadAuth());","576","                return -1;","577","            } \/\/ Otherwise, none credentials were set","578","","579","        }","580",""],"delete":[]}],"pom.xml":[{"add":["151","        <groupId>commons-lang<\/groupId>","152","        <artifactId>commons-lang<\/artifactId>","153","        <version>2.6<\/version>","154","      <\/dependency>","155","","156","      <dependency>"],"delete":[]}],"test\/src\/test\/java\/hudson\/cli\/CLIEnvVarTest.java":[{"add":[],"delete":[]}],"cli\/src\/main\/resources\/hudson\/cli\/client\/Messages_es.properties":[{"add":["1","  Uso: java -jar jenkins-cli.jar [-s URL] command [opts...] args...\\n\\","2","  Opciones:\\n\\","3","   -s URL       : direcci\\u00f3n web (por defecto se usa la variable JENKINS_URL)\\n\\","4","   -http        : usa un protocolo plano sobre HTTP(S) (es el uso por defecto; excluyente con -ssh y -remoting)\\n\\","5","   -ssh         : usa el protocolo SSH (requiere -user; el puerto SSH debe estar abierto en el servidor y el usuario debe tener registrada su clave publica)\\n\\","6","   -remoting    : usa el protocolo deprecado de Remoting (siempre que est\\u00e9 habilitado en el servidor; s\\u00f3lo para compatibilidad con comandos heredados o legacy)\\n\\","7","   -i KEY       : clave privada SSH usada para autenticaci\\u00f3n (usado con -ssh o -remoting)\\n\\","8","   -p HOST:PORT : host y puerto para el uso de proxy HTTPS. Ver https:\/\/jenkins.io\/redirect\/cli-https-proxy-tunnel\\n\\","9","   -noCertificateCheck : elude por completo la verificaci\\u00f3n del certificado HTTPS. Usar con precauci\\u00f3n\\n\\","10","   -noKeyAuth   : intenta no cargar la clave privada de autenticaci\\u00f3n SSH. Presenta conflicto con -i\\n\\","11","   -user        : especifica el usuario (se usa con -ssh)\\n\\","12","   -strictHostKey : solicita la comprobaci\\u00f3n estricta de la clave del host (se usa con -ssh)\\n\\","13","   -logger FINE : habilita logs detallados en el cliente\\n\\","14","   -auth [ USER:SECRET | @FILE ] : especifica el usuario y contrase\\u00f1a o API token (o los carga de un fichero);\\n\\","15","                                   se usa con -http o -remoting pero s\\u00f3lo si el puerto del agente JNLP est\\u00e1 deshabilitado.\\n\\","16","                                   No es necesario si las variables de entorno JENKINS_USER_ID y JENKINS_API_TOKEN se encuentran configuradas.\\n\\","18","  La lista de comandos disponibles depende del servidor. Ejecuta\\n\\","19","  el comando ''help'' para ver la lista completa.","20","CLI.NoURL=No se ha especificado el par\\u00e1metro -s ni la variable JENKINS_URL","21","CLI.VersionMismatch=La versi\\u00f3n no coincide. Esta consola \"CLI\" no se puede usar en este Jenkins","23","CLI.BadAuth=Ambas variables de entorno JENKINS_USER_ID y JENKINS_API_TOKEN deber\\u00edan estar configuradas o mantenerse vac\\u00edas. "],"delete":["1","  Usar: java -jar jenkins-cli.jar [-s URL] command [opts...] args...\\n\\","2","  Options:\\n\\","3","  \\ -s URL : direccin web (por defecto se usa la variable JENKINS_URL)\\n\\","5","  La lista completa de comandos disponibles depende del servidor. Ejecuta\\n\\","6","  el comando ''help'' para ver la lista.","7","CLI.NoURL=No se ha especificado el parmetro -s ni la variable JENKINS_URL","8","CLI.VersionMismatch=La versin no coincide. Esta consola \"CLI\" no se puede usar en este Jenkins"]}]}},"c572146b260616788ef5332799362e03d5746f9e":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/model\/ViewTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["1047","                    xStream2.toXMLUTF8(View.this,  rsp.getOutputStream());","1093","        save();"],"delete":["1047","                    xStream2.toXMLUTF8(this,  rsp.getOutputStream());"]}],"changelog.html":[{"add":["70","    Since 1.477 GET on <code>\/view\/\u2026\/config.xml<\/code> included a spurious wrapper element.","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17302\">issue 17302<\/a>)","72","  <li class=bug>"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/ViewTest.java":[{"add":["28","import com.gargoylesoftware.htmlunit.HttpMethod;","29","import com.gargoylesoftware.htmlunit.WebRequestSettings;","34","import hudson.XmlFile;","39","import java.io.File;","178","    @Bug(17302)","179","    @Test public void doConfigDotXml() throws Exception {","180","        ListView view = new ListView(\"v\", j.jenkins);","181","        view.description = \"one\";","182","        j.jenkins.addView(view);","183","        WebClient wc = j.createWebClient();","184","        String xml = wc.goToXml(\"view\/v\/config.xml\").getContent();","185","        assertTrue(xml, xml.contains(\"<description>one<\/description>\"));","186","        xml = xml.replace(\"<description>one<\/description>\", \"<description>two<\/description>\");","187","        WebRequestSettings req = new WebRequestSettings(wc.createCrumbedUrl(\"view\/v\/config.xml\"), HttpMethod.POST);","188","        req.setRequestBody(xml);","189","        wc.getPage(req);","190","        assertEquals(\"two\", view.getDescription());","191","        xml = new XmlFile(Jenkins.XSTREAM, new File(j.jenkins.getRootDir(), \"config.xml\")).asString();","192","        assertTrue(xml, xml.contains(\"<description>two<\/description>\"));","193","    }","194",""],"delete":[]}]}},"4a057c26a4a6ea3a5b7c858dc370e3a341e86682":{"changes":{"war\/src\/main\/js\/widgets\/config\/tabbar.js":"MODIFY"},"diff":{"war\/src\/main\/js\/widgets\/config\/tabbar.js":[{"add":["7","\/**","8"," * Extracting this call from outside of the addPageTabs due to a regression","9"," * in 2.216\/2.217 (see JENKINS-61429)","10"," *","11"," * The proxied call to Behaviour.specify needs to be called from outside of the","12"," * addPageTabs function. Otherwise, it will not apply to existing draggable","13"," * elements on the form. It would only only apply to new elements.","14"," *","15"," * Extracting this Behaviour.specify call to the module level causes it to be executed","16"," * on script load, and this seems to set up the event listeners properly.","17"," *\/","18","behaviorShim.specify(\".dd-handle\", 'config-drag-start', 1000, function(el) {","19","    page.fixDragEvent(el);","20","});","21","","161","};"],"delete":["11","        behaviorShim.specify(\".dd-handle\", 'config-drag-start', 1000, function(el) {","12","            page.fixDragEvent(el);","13","        });","149","};"]}]}},"a42ebcc84f67acc1dbce60473e0a81e7e8c06e63":{"changes":{"core\/src\/main\/resources\/hudson\/model\/DirectoryBrowserSupport\/dir.jelly":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/artifactList.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/DirectoryBrowserSupport\/dir.jelly":[{"add":["77","                        <j:if test=\"${app.fingerprintMap.ready}\">","78","                          <a href=\"${x.href}\/*fingerprint*\/\">","79","                            <img src=\"${imagesURL}\/16x16\/fingerprint.png\" alt=\"fingerprint\" height=\"16\" width=\"16\" \/>","80","                          <\/a>","81","                          <st:nbsp\/>","82","                        <\/j:if>"],"delete":["77","                        <a href=\"${x.href}\/*fingerprint*\/\">","78","                          <img src=\"${imagesURL}\/16x16\/fingerprint.png\" alt=\"fingerprint\" height=\"16\" width=\"16\" \/>","79","                        <\/a>","80","                        <st:nbsp\/>"]}],"core\/src\/main\/resources\/lib\/hudson\/artifactList.jelly":[{"add":["62","                    <j:if test=\"${app.fingerprintMap.ready}\">","63","                      <a href=\"${baseURL}artifact\/${f.href}\/*fingerprint*\/\">","64","                        <img src=\"${imagesURL}\/16x16\/fingerprint.png\" alt=\"[fingerprint]\" height=\"16\" width=\"16\"\/>","65","                      <\/a>","66","                      <st:nbsp\/>","67","                    <\/j:if>"],"delete":["62","                    <a href=\"${baseURL}artifact\/${f.href}\/*fingerprint*\/\">","63","                      <img src=\"${imagesURL}\/16x16\/fingerprint.png\" alt=\"[fingerprint]\" height=\"16\" width=\"16\"\/>","64","                    <\/a>","65","                    <st:nbsp\/>"]}]}},"5981ac4ed7b4b5c462a71ae186a133f7fe44e1a1":{"changes":{"core\/src\/main\/java\/hudson\/model\/Label.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Node.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Label.java":[{"add":["41","import hudson.security.ACL;","48","import org.acegisecurity.context.SecurityContext;","49","import org.acegisecurity.context.SecurityContextHolder;","62","import java.util.Stack;","351","    \/**","352","     * Returns a count of projects that are tied on this node. In a system without security this should be the same","353","     * as {@code getTiedJobs().size()} but significantly faster as it involves fewer temporary objects and avoids","354","     * sorting the intermediary list. In a system with security, this will likely return a higher value as it counts","355","     * all jobs (mostly) irrespective of access.","356","     * @return a count of projects that are tied on this node.","357","     *\/","358","    public int getTiedJobCount() {","359","        \/\/ denormalize for performance","360","        \/\/ we don't need to respect security as much when returning a simple count","361","        SecurityContext context = ACL.impersonate(ACL.SYSTEM);","362","        try {","363","            int result = 0;","364","            \/\/ top level gives the map without checking security of items in the map","365","            \/\/ therefore best performance","366","            for (TopLevelItem topLevelItem : Jenkins.getInstance().getItemMap().values()) {","367","                if (topLevelItem instanceof AbstractProject) {","368","                    final AbstractProject project = (AbstractProject) topLevelItem;","369","                    if (this.equals(project.getAssignedLabel())) {","370","                        result++;","371","                    }","372","                }","373","                if (topLevelItem instanceof ItemGroup) {","374","                    Stack<ItemGroup> q = new Stack<ItemGroup>();","375","                    q.push((ItemGroup) topLevelItem);","376","","377","                    while (!q.isEmpty()) {","378","                        ItemGroup<?> parent = q.pop();","379","                        \/\/ we run the risk of permissions checks in ItemGroup#getItems()","380","                        \/\/ not much we can do here though","381","                        for (Item i : parent.getItems()) {","382","                            if (i instanceof AbstractProject) {","383","                                final AbstractProject project = (AbstractProject) i;","384","                                if (this.equals(project.getAssignedLabel())) {","385","                                    result++;","386","                                }","387","                            }","388","                            if (i instanceof ItemGroup) {","389","                                q.push((ItemGroup) i);","390","                            }","391","                        }","392","                    }","393","                }","394","            }","395","            return result;","396","        } finally {","397","            SecurityContextHolder.setContext(context);","398","        }","399","    }","400",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Node.java":[{"add":["227","                return item.getTiedJobCount();"],"delete":["227","                return item.getTiedJobs().size();"]}]}},"3192dfb59f6864fa5e782163dbca749cd80bed2b":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["74","  <li class=rfe>","75","    Expand variables in the Maven POM definition in Maven projects.","76","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-5885\">issue 5885<\/a>)"],"delete":[]}]}},"0f73231f775e06105103fa9d0f23e20d7b122ac1":{"changes":{"core\/src\/main\/java\/hudson\/LocalPluginManager.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginWrapper.java":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed.jelly":"MODIFY","test\/src\/test\/java\/hudson\/PluginManagerInstalledGUITest.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","core\/src\/main\/java\/jenkins\/plugins\/DetachedPluginsUtil.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/LocalPluginManager.java":[{"add":[],"delete":["68","    \/**","69","     * If the war file has any \"\/WEB-INF\/plugins\/*.jpi\", extract them into the plugin directory.","70","     *","71","     * @return","72","     *      File names of the bundled plugins. Like {\"ssh-slaves.jpi\",\"subversion.jpi\"}","73","     *\/"]}],"core\/src\/main\/java\/hudson\/PluginWrapper.java":[{"add":["257","     * Note that the list will include elements of {@link #getOptionalDependents}.","277","     * Like {@link #getDependents} but excluding optional dependencies.","278","     * @since TODO","279","     *\/","280","    public @Nonnull Set<String> getMandatoryDependents() {","281","        Set<String> s = new HashSet<>(dependents);","282","        s.removeAll(optionalDependents);","283","        return s;","284","    }","285","","286","    \/**","303","     * Note that optional dependents are included.","312","     * Like {@link #hasDependents} but excluding optional dependencies.","313","     * @since TODO","314","     *\/","315","    public boolean hasMandatoryDependents() {","316","        if (isBundled) {","317","            return true;","318","        }","319","        return dependents.stream().anyMatch(d -> !optionalDependents.contains(d));","320","    }","321","","322","    \/**","349","     * Note that this include optional dependencies.","353","        return !dependencies.isEmpty();","354","    }","355","","356","    \/**","357","     * Like {@link #hasDependencies} but omitting optional dependencies.","358","     * @since TODO","359","     *\/","360","    public boolean hasMandatoryDependencies() {","361","        return dependencies.stream().anyMatch(d -> !d.optional);","428","        for (Dependency d : optionalDependencies) {","429","            assert d.optional : d + \" included among optionalDependencies of \" + shortName + \" but was not marked optional\";","430","        }","475","    \/**","476","     * Gets all dependencies of this plugin on other plugins.","477","     * Note that the list will <em>usually<\/em> include the members of {@link #getOptionalDependencies}","478","     * (missing optional dependencies will however be omitted).","479","     *\/","485","    \/**","486","     * Like {@link #getDependencies} but omits optional dependencies.","487","     * @since TODO","488","     *\/","489","    public List<Dependency> getMandatoryDependencies() {","490","        return dependencies.stream().filter(d -> !d.optional).collect(Collectors.toList());","491","    }","492","","803","","804","    \/**","805","     * Is this plugin bundled in the WAR?","806","     * Normally false as noted in {@link PluginManager#loadBundledPlugins}:","807","     * this does <em>not<\/em> apply to \u201Cdetached\u201D plugins.","808","     *\/"],"delete":["329","        return (dependencies != null && !dependencies.isEmpty());","755","    "]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed.jelly":[{"add":["69","                <tr class=\"plugin ${p.hasMandatoryDependents()?'has-dependents':''} ${(p.hasMandatoryDependents() &amp;&amp; !p.enabled)?'has-dependents-but-disabled':''} ${p.isDeleted()?'deleted':''}\" data-plugin-id=\"${p.shortName}\" data-plugin-name=\"${p.displayName}\">","120","                          <j:if test=\"${p.hasMandatoryDependents()}\">","122","                              <j:forEach var=\"dependent\" items=\"${p.mandatoryDependents}\">","127","                          <j:if test=\"${p.hasMandatoryDependencies()}\">","129","                              <j:forEach var=\"dependency\" items=\"${p.mandatoryDependencies}\">"],"delete":["69","                <tr class=\"plugin ${p.hasDependents()?'has-dependents':''} ${(p.hasDependents() &amp;&amp; !p.enabled)?'has-dependents-but-disabled':''} ${p.isDeleted()?'deleted':''}\" data-plugin-id=\"${p.shortName}\" data-plugin-name=\"${p.displayName}\">","120","                          <j:if test=\"${p.hasDependents()}\">","122","                              <j:forEach var=\"dependent\" items=\"${p.dependents}\">","127","                          <j:if test=\"${p.hasDependencies()}\">","129","                              <j:forEach var=\"dependency\" items=\"${p.dependencies}\">"]}],"test\/src\/test\/java\/hudson\/PluginManagerInstalledGUITest.java":[{"add":["34","import org.jvnet.hudson.test.Issue;","63","                            copyBundledPlugin(PluginManagerInstalledGUITest.class.getResource(\"\/WEB-INF\/detached-plugins\/matrix-auth.hpi\"), \"matrix-auth.jpi\"); \/\/ cannot use installDetachedPlugin at this point","64","                            copyBundledPlugin(PluginManagerInstalledGUITest.class.getResource(\"\/plugins\/dependee-0.0.2.hpi\"), \"dependee.jpi\");","65","                            copyBundledPlugin(PluginManagerInstalledGUITest.class.getResource(\"\/plugins\/depender-0.0.2.hpi\"), \"depender.jpi\");","66","                            copyBundledPlugin(PluginManagerInstalledGUITest.class.getResource(\"\/plugins\/mandatory-depender-0.0.2.hpi\"), \"mandatory-depender.jpi\");","76","","77","    @Issue(\"JENKINS-33843\")","82","        InstalledPlugin matrixAuthPlugin = installedPlugins.get(\"matrix-auth\");","83","        InstalledPlugin dependeePlugin = installedPlugins.get(\"dependee\");","84","        InstalledPlugin dependerPlugin = installedPlugins.get(\"depender\");","85","        InstalledPlugin mandatoryDependerPlugin = installedPlugins.get(\"mandatory-depender\");","87","        \/\/ As a detached plugin, it is an optional dependency of others built against a newer baseline.","88","        matrixAuthPlugin.assertHasNoDependents();","89","        \/\/ Has a mandatory dependency:","90","        dependeePlugin.assertHasDependents();","91","        \/\/ Leaf plugins:","92","        dependerPlugin.assertHasNoDependents();","93","        mandatoryDependerPlugin.assertHasNoDependents();","95","        \/\/ This plugin should be enabled and it should be possible to disable it","97","        mandatoryDependerPlugin.assertEnabled();","98","        mandatoryDependerPlugin.assertEnabledStateChangeable();","99","        mandatoryDependerPlugin.assertUninstallable();","101","        \/\/ This plugin should be enabled, but it should not be possible to disable or uninstall it","102","        \/\/ because another plugin depends on it.","103","        dependeePlugin.assertEnabled();","104","        dependeePlugin.assertEnabledStateNotChangeable();","105","        dependeePlugin.assertNotUninstallable();","107","        \/\/ Disable one plugin","108","        mandatoryDependerPlugin.clickEnabledWidget();","110","        \/\/ Now that plugin should be disabled, but it should be possible to re-enable it","112","        mandatoryDependerPlugin.assertNotEnabled(); \/\/ this is different to earlier","113","        mandatoryDependerPlugin.assertEnabledStateChangeable();","114","        mandatoryDependerPlugin.assertUninstallable();","116","        \/\/ The dependee plugin should still be enabled, but it should now be possible to disable it because","117","        \/\/ the mandatory depender plugin is no longer enabled. Should still not be possible to uninstall it.","118","        \/\/ Note that the depender plugin does not block its disablement.","119","        dependeePlugin.assertEnabled();","120","        dependeePlugin.assertEnabledStateChangeable(); \/\/ this is different to earlier","121","        dependeePlugin.assertNotUninstallable();","122","        dependerPlugin.assertEnabled();","124","        \/\/ Disable the dependee plugin","125","        dependeePlugin.clickEnabledWidget();","127","        \/\/ Now it should NOT be possible to change the enable state of the depender plugin because one","128","        \/\/ of the plugins it depends on is not enabled.","129","        mandatoryDependerPlugin.assertNotEnabled();","130","        mandatoryDependerPlugin.assertEnabledStateNotChangeable();  \/\/ this is different to earlier","131","        mandatoryDependerPlugin.assertUninstallable();","132","        dependerPlugin.assertEnabled();","133","","134","        \/\/ You can disable a detached plugin if there is no explicit dependency on it.","135","        matrixAuthPlugin.assertEnabled();","136","        matrixAuthPlugin.assertEnabledStateChangeable();","137","        matrixAuthPlugin.assertUninstallable();","138","        matrixAuthPlugin.clickEnabledWidget();","139","        matrixAuthPlugin.assertNotEnabled();","140","        matrixAuthPlugin.assertEnabledStateChangeable();","141","        matrixAuthPlugin.assertUninstallable();","171","            Assert.fail(\"No pluginManager\/installed row for plugin \" + pluginId);","244","            Assert.assertTrue(\"Plugin '\" + getId() + \"' is expected to have dependents.\", hasDependents());","248","            Assert.assertFalse(\"Plugin '\" + getId() + \"' is expected to have no dependents.\", hasDependents());"],"delete":["62","                            copyBundledPlugin(PluginManagerInstalledGUITest.class.getResource(\"\/WEB-INF\/detached-plugins\/cvs.hpi\"), \"cvs.jpi\"); \/\/ cannot use installDetachedPlugin at this point","63","                            copyBundledPlugin(PluginManagerInstalledGUITest.class.getResource(\"\/plugins\/tasks.jpi\"), \"tasks.jpi\");","73","    ","78","        InstalledPlugin tasksPlugin = installedPlugins.get(\"tasks\");","79","        InstalledPlugin cvsPlugin = installedPlugins.get(\"cvs\");","81","        tasksPlugin.assertHasNoDependents();","82","        cvsPlugin.assertHasDependents();","84","        \/\/ Tasks plugin should be enabled and it should be possible to disable it","86","        tasksPlugin.assertEnabled();","87","        tasksPlugin.assertEnabledStateChangeable();","88","        tasksPlugin.assertUninstallable();","90","        \/\/ CVS plugin should be enabled, but it should not be possible to disable or uninstall it","91","        \/\/ because the tasks plugin depends on it.","92","        cvsPlugin.assertEnabled();","93","        cvsPlugin.assertEnabledStateNotChangeable();","94","        cvsPlugin.assertNotUninstallable();","96","        \/\/ Disable the tasks plugin","97","        tasksPlugin.clickEnabledWidget();","99","        \/\/ Now the tasks plugin should be disabled, but it should be possible to re-enable it ","101","        tasksPlugin.assertNotEnabled(); \/\/ this is different to earlier","102","        tasksPlugin.assertEnabledStateChangeable();","103","        tasksPlugin.assertUninstallable();","105","        \/\/ The CVS plugin should still be enabled, but it should now be possible to disable it because","106","        \/\/ the tasks plugin is no longer enabled. Should still not be possible to uninstall it.","107","        cvsPlugin.assertEnabled();","108","        cvsPlugin.assertEnabledStateChangeable(); \/\/ this is different to earlier","109","        cvsPlugin.assertNotUninstallable();","111","        \/\/ Disable the cvs plugin","112","        cvsPlugin.clickEnabledWidget();","114","        \/\/ Now it should NOT be possible to change the enable state of the tasks plugin because one","115","        \/\/ of the plugins it depends on (the CVS plugin) is not enabled.","116","        tasksPlugin.assertNotEnabled();","117","        tasksPlugin.assertEnabledStateNotChangeable();  \/\/ this is different to earlier","118","        tasksPlugin.assertUninstallable();","148","            Assert.fail(\"Now pluginManager\/installed row for plugin \" + pluginId);","221","            Assert.assertTrue(hasDependents());","225","            Assert.assertFalse(hasDependents());"]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["1021","     *      File names of the bundled plugins. Normally empty (not to be confused with {@link #loadDetachedPlugins}) but OEM WARs may have some.","1028","     * Copies the plugin from the given URL to the given destination.","1029","     * Despite the name, this is used also from {@link #loadDetachedPlugins}.","1030","     * Includes a reasonable up-to-date check.","1031","     * A convenience method to be used by {@link #loadBundledPlugins()}.","1032","     * @param fileName like {@code abc.jpi}"],"delete":["1021","     *      File names of the bundled plugins. Like {\"ssh-slaves.hpi\",\"subversion.jpi\"}","1028","     * Copies the bundled plugin from the given URL to the destination of the given file name (like 'abc.jpi'),","1029","     * with a reasonable up-to-date check. A convenience method to be used by the {@link #loadBundledPlugins()}."]}],"core\/src\/main\/java\/jenkins\/plugins\/DetachedPluginsUtil.java":[{"add":["95","                out.add(new PluginWrapper.Dependency(detached.shortName + ':' + detached.requiredVersion + \";resolution:=optional\"));"],"delete":["95","                out.add(new PluginWrapper.Dependency(detached.shortName + ':' + detached.requiredVersion));"]}]}},"4074818b97d50b98b754f723842f03306a1ddaea":{"changes":{"test\/src\/test\/java\/hudson\/views\/GlobalDefaultViewConfigurationTest.java":"ADD","core\/src\/main\/resources\/hudson\/views\/Messages.properties":"MODIFY","test\/src\/test\/java\/org\/kohsuke\/stapler\/MockStaplerRequestBuilder.java":"ADD","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ViewGroupMixIn.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/GlobalDefaultViewConfiguration.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/views\/GlobalDefaultViewConfigurationTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/views\/Messages.properties":[{"add":["32","","33","GlobalDefaultViewConfiguration.ViewDoesNotExist=The specified view does not exist: {0}"],"delete":[]}],"test\/src\/test\/java\/org\/kohsuke\/stapler\/MockStaplerRequestBuilder.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["1800","    \/**","1801","     * Gets a view by the specified name.","1802","     * The method iterates through {@link ViewGroup}s if required.","1803","     * @param name Name of the view","1804","     * @return View instance or {@code null} if it is missing","1805","     *\/","1806","    @CheckForNull","1807","    public View getView(@CheckForNull String name) {","1866","    public void setPrimaryView(@Nonnull View v) {"],"delete":["1800","    public View getView(String name) {","1859","    public void setPrimaryView(View v) {"]}],"core\/src\/main\/java\/hudson\/model\/ViewGroupMixIn.java":[{"add":["37","import javax.annotation.CheckForNull;","95","    \/**","96","     * Gets a view by the specified name.","97","     * The method iterates through {@link ViewGroup}s if required.","98","     * @param name Name of the view","99","     * @return View instance or {@code null} if it is missing","100","     *\/","101","    @CheckForNull","102","    public View getView(@CheckForNull String name) {"],"delete":["94","    public View getView(String name) {"]}],"core\/src\/main\/java\/hudson\/views\/GlobalDefaultViewConfiguration.java":[{"add":["26","import hudson.model.View;","44","        if (json.has(\"primaryView\")) {","45","            final String viewName = json.getString(\"primaryView\");","46","            final View newPrimaryView = j.getView(viewName);","47","            if (newPrimaryView == null) {","48","                throw new FormException(Messages.GlobalDefaultViewConfiguration_ViewDoesNotExist(viewName), \"primaryView\");","49","            }","50","            j.setPrimaryView(newPrimaryView);","51","        } else {","52","            \/\/ Fallback if the view is not specified","53","            j.setPrimaryView(j.getViews().iterator().next());","54","        }","55","        "],"delete":["43","        j.setPrimaryView(json.has(\"primaryView\") ? j.getView(json.getString(\"primaryView\")) : j.getViews().iterator().next());"]}]}},"8d8493a9d7be24a7aecc32a084197f05223d9540":{"changes":{"core\/src\/main\/java\/hudson\/matrix\/MatrixProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/matrix\/MatrixProject.java":[{"add":["174","                        Combination comb = new Combination(c);","175","                        \/\/ if we already have this in memory, just use it.","176","                        \/\/ otherwise load it","177","                        MatrixConfiguration item=null;","178","                        if(this.configurations!=null)","179","                            item = this.configurations.get(comb);","180","                        if(item==null) {","181","                            item = (MatrixConfiguration) config.read();","182","                            item.setCombination(comb);","183","                            item.onLoad(this, v.getName());","184","                        }"],"delete":["174","                        MatrixConfiguration item = (MatrixConfiguration) config.read();","175","                        item.setCombination(new Combination(c));","176","                        item.onLoad(this, v.getName());"]}]}},"3f1f122ff415319b6408ab89f8b3ff0bf4da597d":{"changes":{"core\/src\/test\/java\/hudson\/FunctionsTest.java":"MODIFY","core\/src\/main\/java\/hudson\/Functions.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/FunctionsTest.java":[{"add":["293","        assertBrokenAs(\"Hello world!\", \"Hello world!\");","294","        assertBrokenAs(\"Hello-world!\", \"Hello\", \"-world!\");","295","        assertBrokenAs(\"ALongStringThatCanNotBeBrokenByDefault\", \"ALongStrin\", \"gThatCanNo\", \"tBeBrokenB\", \"yDefault\");","296","        assertBrokenAs(\"jenkins_main_trunk\", \"jenkins\", \"_main\", \"_trunk\");","297","","298","        assertBrokenAs(\"&lt;&lt;&lt;&lt;&lt;\", \"\", \"&lt;\", \"&lt;\", \"&lt;\", \"&lt;\", \"&lt;\");","299","        assertBrokenAs(\"&amp;&amp;&amp;&amp;&amp;\", \"\", \"&amp;\", \"&amp;\", \"&amp;\", \"&amp;\", \"&amp;\");","300","        assertBrokenAs(\"&thetasym;&thetasym;&thetasym;\", \"\", \"&thetasym;\", \"&thetasym;\", \"&thetasym;\");","301","        assertBrokenAs(\"Crazy &lt;ha ha&gt;\", \"Crazy \", \"&lt;ha ha\", \"&gt;\");","302","        assertBrokenAs(\"A;String>Full]Of)Weird}Punctuation\", \"A;String\", \">Full\", \"]Of\", \")Weird\", \"}Punctuation\");","303","        assertBrokenAs(\"&lt;&lt;a&lt;bc&lt;def&lt;ghi&lt;\", \"\", \"&lt;\", \"&lt;a\", \"&lt;bc\", \"&lt;def\", \"&lt;ghi\", \"&lt;\");","304","        assertBrokenAs(\"H,e.l\/l:o=w_o+|d\", \"H\", \",e\", \".l\", \"\/l\", \":o\", \"=w\", \"_o\", \"+|d\");","305","        assertBrokenAs(\"a\u2031?a\u2031?a\u2031?a\u2031?a\u2031?a\u2031?a\u2031?a\u2031?\", \"a\u2031?a\u2031?a\", \"\u2031?a\u2031?a\u2031?\", \"a\u2031?a\u2031?a\u2031?\");","306","    }","307","","308","    private void assertBrokenAs(String plain, String... chunks) {","309","        assertEquals(","310","                Util.join(Arrays.asList(chunks), \"<wbr>\"),","311","                Functions.breakableString(plain)","312","        );"],"delete":["293","        assertEquals(\"Hello world!\", Functions.breakableString(\"Hello world!\"));","294","        assertEquals(\"H<wbr>,e<wbr>.l<wbr>\/l<wbr>:o<wbr>-w<wbr>_o<wbr>=+|d\", Functions.breakableString(\"H,e.l\/l:o-w_o=+|d\"));","295","        assertEquals(\"ALongStrin<wbr>gThatCanNo<wbr>tBeBrokenB<wbr>yDefault\", Functions.breakableString(\"ALongStringThatCanNotBeBrokenByDefault\"));"]}],"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["1826","        return plain.replaceAll(\"([\\\\p{Punct}&&[^;]]+\\\\w)\", \"<wbr>$1\")","1827","                .replaceAll(\"([^\\\\p{Punct}\\\\s-]{10})(?=[^\\\\p{Punct}\\\\s-]{3})\", \"$1<wbr>\")"],"delete":["1826","        return plain.replaceAll(\"(\\\\p{Punct}+\\\\w)\", \"<wbr>$1\")","1827","                .replaceAll(\"(\\\\w{10})(?=\\\\w{3})\", \"$1<wbr>\")"]}]}},"5969b8da99cc5541e313cf343cd31ba3ad2e4843":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["67","      <version>1.3<\/version>"],"delete":["67","      <version>1.1<\/version>"]}]}},"6c6f34cd6495a481af8bc54119e2c658d88d1edb":{"changes":{"core\/src\/main\/resources\/hudson\/security\/SecurityRealm\/loginLink.jelly":"MODIFY","core\/src\/main\/java\/hudson\/security\/SecurityRealm.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/security\/SecurityRealm\/loginLink.jelly":[{"add":[],"delete":["27","  <j:invokeStatic var=\"from\" className=\"java.net.URLEncoder\" method=\"encode\">","28","    <j:arg value=\"${if (request.session.attribute('from')!=null) request.session.getAttribute('from');  else if (request.getParameter('from')!=null) request.getParameter('from'); else if (request.requestURI=='\/loginError' || request.requestURI=='\/login') '\/'; else request.requestURI;}\"\/>","29","    <j:arg value=\"UTF-8\"\/>","30","  <\/j:invokeStatic>"]}],"core\/src\/main\/java\/hudson\/security\/SecurityRealm.java":[{"add":["64","import java.io.UnsupportedEncodingException;","487","    \/**","488","     * Perform a calculation where we should go back after sucessfull login","489","     *","490","     * @return Encoded URI where we should go back after sucessfull login or \"\/\" if no way back","491","     *","492","     * @since TODO","493","     *\/","494","    public static String getFrom() {","495","        String from = null;","496","        final StaplerRequest request = Stapler.getCurrentRequest();","497","","498","        if (request.getSession(false) != null) {","499","            from = (String) request.getSession().getAttribute(\"from\");","500","        }","501","","502","        if (from == null) {","503","            from = request.getParameter(\"from\");","504","        }","505","","506","        final String requestURI = request.getRequestURI();","507","        if (from == null && requestURI != null","508","                && requestURI.compareTo(\"\/loginError\") != 0 && requestURI.compareTo(\"\/login\") != 0) {","509","            from = requestURI;","510","        }","511","","512","        if (from == null || from.trim().isEmpty()) {","513","            from = \"\/\";","514","        }","515","","516","        try {","517","            from = java.net.URLEncoder.encode(from, \"UTF-8\");","518","        } catch (UnsupportedEncodingException e) {","519","            from = \"\/\";","520","        }","521","","522","        return from;","523","    }","524",""],"delete":[]}]}},"9d01903e5c37159138f5e6f7591a7385794e50f4":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Ant.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Ant.java":[{"add":["63","    \/**","64","     * Gets the ANT_OPTS parameter, or null.","65","     *\/","66","    public String getAntOpts() {","67","        return antOpts;","68","    }","69",""],"delete":[]}]}},"65b3e5102f90a23e5d7fa501c2ff19ff95f45874":{"changes":{"war\/resources\/help\/matrix\/label_nl.html":"MODIFY","core\/src\/main\/java\/hudson\/matrix\/Axis.java":"MODIFY","war\/resources\/help\/matrix\/axis-value.html":"MODIFY","war\/resources\/help\/matrix\/axis-value_nl.html":"MODIFY"},"diff":{"war\/resources\/help\/matrix\/label_nl.html":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/matrix\/Axis.java":[{"add":["26","import hudson.util.QuotedStringTokenizer;","123","     * If the axis is big and occupies a lot of space, use newline for separator","124","     * to display multi-line text.","130","        char delim = len>30 ? '\\n' : ' ';","131","        \/\/ Build string connected with delimiter, quoting as needed","132","        StringBuilder buf = new StringBuilder(len+values.size()*3);","133","        for (String value : values)","134","            buf.append(delim).append(QuotedStringTokenizer.quote(value,\"\"));","135","        return buf.substring(1);"],"delete":["122","     * If the axis is big and occupies a lot of space, use NL for separator","123","     * to display multi-line text","129","        return Util.join(values, len>30 ?\"\\n\":\" \");"]}],"war\/resources\/help\/matrix\/axis-value.html":[{"add":["2","  Use shell quoting syntax for a value that contains whitespace.","3","<\/div>"],"delete":["2","<\/div>"]}],"war\/resources\/help\/matrix\/axis-value_nl.html":[{"add":[],"delete":[]}]}},"a3ddc89afe27a52554a79ff9e6d1b2ec714f96cd":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["43","    <groovy.version>2.4.6-jenkins-1<\/groovy.version>"],"delete":["43","    <groovy.version>2.4.6<\/groovy.version>"]}]}},"4ac7c0850bb316db82637e7652bc97fd6aad2418":{"changes":{"core\/src\/main\/resources\/windows-service\/jenkins-slave.xml":"ADD"},"diff":{"core\/src\/main\/resources\/windows-service\/jenkins-slave.xml":[{"add":[],"delete":[]}]}},"132ca7cffe9162b4b04bf52d2cf13a44c0f902e0":{"changes":{"core\/src\/main\/java\/hudson\/model\/queue\/WorkUnit.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/queue\/Executables.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/queue\/WorkUnit.java":[{"add":["81","    @CheckForNull"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["33","import hudson.model.Queue.Executable;","90","import hudson.model.queue.SubTask;","91","import java.lang.reflect.InvocationTargetException;","625","                        final WorkUnit workUnit = e.getCurrentWorkUnit();","626","                        final Executable executable = workUnit != null ? workUnit.getExecutable() : null;","627","                        final SubTask subtask = executable != null ? getParentOf(executable) : null;","628","                                ","629","                        if (subtask != null) {        ","630","                            Item item = Tasks.getItemOf(subtask);"],"delete":["622","                        WorkUnit workUnit = e.getCurrentWorkUnit();","623","                        if (workUnit != null) {","624","                            Item item = Tasks.getItemOf(getParentOf(workUnit.getExecutable()));"]}],"core\/src\/main\/java\/hudson\/model\/queue\/Executables.java":[{"add":["38","    ","40","     * Due to the return type change in {@link Executable} in 1.377, the caller needs a special precaution now.","41","     * @param e Executable","42","     * @return Discovered subtask","44","    public static @Nonnull SubTask getParentOf(@Nonnull Executable e) ","45","            throws Error, RuntimeException {","83","            \/\/ TODO: according to the code above, e.getparent() may fail. The method also needs to be reworked"],"delete":["39","     * Due to the return type change in {@link Executable}, the caller needs a special precaution now.","41","    public static @Nonnull SubTask getParentOf(Executable e) {"]}],"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["513","    @CheckForNull"],"delete":[]}]}},"655beb988ecd89121529b494f1d358220306c6d2":{"changes":{"core\/src\/main\/java\/hudson\/DNSMultiCast.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/DNSMultiCast.java":[{"add":["99","    \/**","100","     * Class that extends {@link JmDNSImpl} to add an abort method. Since {@link javax.jmdns.JmDNS#close()} might","101","     * make the instance hang during the shutdown, the abort method terminate uncleanly, but rapidly and","102","     * without blocking.","103","     *","104","     * Initially it was part of the jenkinsci\/jmdns forked library, but now this class is responsible for aborting,","105","     * allowing to have a direct and clean dependency to the original library.","106","     *","107","     * The abort() method is pretty similar to close() method. To access private methods and fields uses","108","     * reflection.","109","     *","110","     * @since 2.178","111","     *","112","     * See JENKINS-25369 for further details","113","     *\/"],"delete":[]}]}},"cdb2406c892b357c4727e3bcf43ae31bb2b96286":{"changes":{"test\/src\/test\/resources\/lib\/layout\/TaskTest\/MockAction\/index.jelly":"ADD","test\/src\/test\/java\/lib\/layout\/TaskTest.java":"ADD","core\/src\/main\/resources\/lib\/layout\/task.jelly":"MODIFY"},"diff":{"test\/src\/test\/resources\/lib\/layout\/TaskTest\/MockAction\/index.jelly":[{"add":[],"delete":[]}],"test\/src\/test\/java\/lib\/layout\/TaskTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/layout\/task.jelly":[{"add":["209","              <a href=\"${href}\" class=\"task-link\" onclick=\"${attrs.onclick ?: (post ? 'return postRequest_' + id + '(this)' : null)}\">"],"delete":["209","              <a href=\"${href}\" class=\"task-link\" onclick=\"${attrs.onclick ?: (post ? 'postRequest_' + id + '(this)' : null)}\">"]}]}},"68db55528a560b816fbd58689b75d07210592b03":{"changes":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":"MODIFY"},"diff":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":[{"add":[],"delete":["509","        if(Functions.isWindows()) {","510","            \/\/ this is only needed on Windows because of the file","511","            \/\/ locking issue as described in JENKINS-12647","512","            context.setCopyWebDir(true);","513","        }"]}]}},"343382b9ff8a978f6914cc64714a5c16bd9b511a":{"changes":{"core\/src\/main\/resources\/lib\/form\/class-entry.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/class-entry.jelly":[{"add":["49","      <j:when test=\"${attrs.descriptor != null and attrs.descriptor.id != clazz}\">"],"delete":["49","      <j:when test=\"${descriptor != null and descriptor.id != clazz}\">"]}]}},"82e94e5e738c988c36181d8c0ff6b9ffed846bcc":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["1365","        logText = getLogText();","1366","        pos = logText.writeLogTo(pos, out);","1367","","1368","        while (!logText.isComplete()) {","1369","            \/\/ Instead of us hitting the log file as many times as possible, instead we get the information once every","1370","            \/\/ second to avoid CPU usage getting very high.","1371","            Thread.sleep(1000);","1374","        }"],"delete":["1365","        do {","1368","        } while (!logText.isComplete());"]}]}},"4c0d3ac6230300c369bc68878ea32c33a23c399a":{"changes":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","test\/src\/test\/resources\/hudson\/model\/AbstractProjectTest\/npeTrigger.xml":"ADD"},"diff":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":[{"add":["50","import hudson.triggers.Trigger","61","import org.jvnet.hudson.test.TestExtension;","598","","599","    @Issue(\"JENKINS-27549\")","600","    public void testLoadingWithNPEOnTriggerStart() {","601","        AbstractProject project = jenkins.createProjectFromXML(\"foo\", getClass().getResourceAsStream(\"AbstractProjectTest\/npeTrigger.xml\"))","602","","603","        assert project.triggers().size() == 1","604","    }","605","","606","    static class MockBuildTriggerThrowsNPEOnStart<Item> extends Trigger {","607","        @Override","608","        public void start(hudson.model.Item project, boolean newInstance) { throw new NullPointerException(); }","609","","610","        @Override","611","        public TriggerDescriptor getDescriptor() {","612","            return DESCRIPTOR;","613","        }","614","","615","        public static final TriggerDescriptor DESCRIPTOR = new DescriptorImpl()","616","","617","        @TestExtension(\"testLoadingWithNPEOnTriggerStart\")","618","        static class DescriptorImpl extends TriggerDescriptor {","619","","620","            public boolean isApplicable(hudson.model.Item item) {","621","                return false;","622","            }","623","","624","            @Override","625","            String getDisplayName() {","626","                return \"test\";","627","            }","628","        }","629","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["325","            try {","326","                t.start(this, Items.currentlyUpdatingByXml());","327","            } catch (Throwable e) {","328","                LOGGER.log(Level.WARNING, \"could not start trigger while loading project '\" + getFullName() + \"'\", e);","329","            }"],"delete":["325","            t.start(this, Items.currentlyUpdatingByXml());"]}],"test\/src\/test\/resources\/hudson\/model\/AbstractProjectTest\/npeTrigger.xml":[{"add":[],"delete":[]}]}},"7ca4dc47ecff4c3eb3b8041e521fc076efc42767":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":"MODIFY","test\/src\/test\/groovy\/hudson\/model\/AbstractBuildTest.groovy":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":[{"add":["725","        int n = getNumberOf(run);","726","        copy.byNumber.remove(n);","727","        SortedIntList a = new SortedIntList(numberOnDisk);","728","        a.removeValue(n);","729","        numberOnDisk = a;"],"delete":["725","        copy.byNumber.remove(getNumberOf(run));"]}],"test\/src\/test\/groovy\/hudson\/model\/AbstractBuildTest.groovy":[{"add":["40","import org.jvnet.hudson.test.Bug","124","","125","    @Bug(19920)","126","    @Test void lastBuildNextBuild() {","127","        FreeStyleProject p = j.createFreeStyleProject();","128","        AbstractBuild b1 = j.assertBuildStatusSuccess(p.scheduleBuild2(0));","129","        AbstractBuild b2 = j.assertBuildStatusSuccess(p.scheduleBuild2(0));","130","        assertEquals(b2, p.getLastBuild());","131","        b2.getNextBuild(); \/\/ force this to be initialized","132","        b2.delete();","133","        assertEquals(b1, p.getLastBuild());","134","        b1 = p.getLastBuild();","135","        assertEquals(null, b1.getNextBuild());","136","    }","137",""],"delete":[]}],"changelog.html":[{"add":["63","  <li class='major bug'>","64","    After deleting last build, next build of last build is zombie.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19920\">issue 19920<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["164","     * fields and point to {@link #selfReference} (or {@link #none}) of adjacent builds.","168","    @SuppressWarnings({\"unchecked\", \"rawtypes\"}) private static final BuildReference NONE = new BuildReference(\"NONE\", null);","169","    @SuppressWarnings(\"unchecked\") private BuildReference<R> none() {return NONE;}","170","","198","                nb.previousBuild = previousBuild;","224","                    this.previousBuild = none();","228","            if (r==none())","252","                    this.nextBuild = none();","256","            if (r==none())"],"delete":["164","     * fields and point to {@link #selfReference} of adjacent builds.","195","                \/\/ remove the oldest build","196","                if (previousBuild == selfReference) ","197","                    nb.previousBuild = nextBuild;","198","                else ","199","                    nb.previousBuild = previousBuild;","225","                    \/\/ this indicates that we know there's no previous build","226","                    \/\/ (as opposed to we don't know if\/what our previous build is.","227","                    this.previousBuild = selfReference;","231","            if (r==selfReference)","255","                    \/\/ this indicates that we know there's no next build","256","                    \/\/ (as opposed to we don't know if\/what our next build is.","257","                    this.nextBuild = selfReference;","261","            if (r==selfReference)"]}]}},"a79fdaa4b34b8f7fddb39bed3eabf4763940d11b":{"changes":{"test\/src\/test\/java\/jenkins\/triggers\/ReverseBuildTriggerTest.java":"MODIFY","test\/src\/test\/java\/jenkins\/model\/JenkinsTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ItemGroupMixIn.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ItemGroupMixInTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/triggers\/ReverseBuildTriggerTest.java":[{"add":["99","        String upstreamName = \"upstr3@m\"; \/\/ do not clash with English messages!"],"delete":["99","        String upstreamName = \"upstr3am\"; \/\/ do not clash with English messages!"]}],"test\/src\/test\/java\/jenkins\/model\/JenkinsTest.java":[{"add":[],"delete":["74","import org.jvnet.hudson.test.WithoutJenkins;","686","","687","    @Issue(\"JENKINS-46911\")","688","    @WithoutJenkins","689","    @Test","690","    public void testCheckGoodName() throws Exception{","691","        String[] illegalNames = {\"ab\\\\c\", \"abc\/\", \"ab\/c\", \" \", \"   \", \"\", \"..\", \".\", \"?\", \"*\", \"6%\",","692","                \"x!\", \"-@\", \"#\", \"$\", \"^\", \"&\", \"|\", \"<\", \">\", \"[\", \"]\", \":\", \";\", \"..\/.\", null};","693","        String[] legalNames = {\"abc\", \"a bc\", \"abc \", \" abc\", \"a.bc\", \". .\"};","694","        String msg = \"checkGoodNameTest found a legal name. Please check.\";","695","        int exceptions = 0;","696","        int goodNames = 0;","697","","698","        for (String name : illegalNames){","699","            try {","700","                Jenkins.checkGoodName(name);","701","                goodNames++;","702","            } catch (Failure e){","703","                exceptions++;","704","            }","705","        }","706","        assertEquals(msg, illegalNames.length, exceptions);","707","        assertEquals(0, goodNames);","708","","709","        exceptions = 0;","710","        goodNames = 0;","711","        for (String name : legalNames){","712","            try {","713","                Jenkins.checkGoodName(name);","714","                goodNames++;","715","            } catch (Failure e){","716","                exceptions++;","717","            }","718","        }","719","        assertEquals(msg, 0, exceptions);","720","        \/\/ TODO: store the name in an list and then assert the size of that list is zero and get a view of what failed. rather than 2 things failed.","721","        assertEquals(legalNames.length, goodNames);","722","    }"]}],"core\/src\/main\/java\/hudson\/model\/ItemGroupMixIn.java":[{"add":[],"delete":["260","        try {","261","            Jenkins.checkGoodName(name);","262","        } catch (Failure e){","263","            throw new IOException(\"Not a valid project name\", e);","264","        }","265","","317","        try {","318","            Jenkins.checkGoodName(name);","319","        } catch (Failure e){","320","            throw new IOException(\"Not a valid project name\", e);","321","        }","322",""]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["3844","        if(name==null || name.length()==0)"],"delete":["3812","     * Creates a new project from the given xml.","3813","     *","3814","     * @param name The name of new project.","3815","     * @param xml Projects xml.","3816","     *","3817","     * @throws IOException if the given name is not good or could not create project.","3818","     *","3819","     * @see #checkGoodName(String)","3852","        if(name==null || name.trim().length()==0)"]}],"test\/src\/test\/java\/hudson\/model\/ItemGroupMixInTest.java":[{"add":[],"delete":["35","import jenkins.model.Jenkins;","52","import java.io.InputStream;","211","    @Issue(\"JENKINS-46911\")","212","    @Test","213","    public void testCreateProjectCheckGoodName() throws Exception{","214","        String xmlFile = \"<?xml version='1.0' encoding='UTF-8'?>\\n\" +","215","                \"<project>\\n\" +","216","                \"<description><\/description>\\n\" +","217","                \"<keepDependencies>false<\/keepDependencies>\\n\" +","218","                \"<properties\/>\\n\" +","219","                \"<triggers\/>\\n\" +","220","                \"<concurrentBuild>false<\/concurrentBuild>\\n\" +","221","                \"<builders\/>\\n\" +","222","                \"<publishers\/>\\n\" +","223","                \"<buildWrappers\/>\\n\" +","224","                \"<\/project>\";","225","        String[] illegalNames = {\"ab\\\\c\", \"abc\/\", \"ab\/c\", \"\", \" \", \"   \", \"..\", \".\", \"?\", \"*\", \"6%\",","226","                \"x!\", \"-@\", \"#\", \"$\", \"^\", \"&\", \"|\", \"<\", \">\", \"[\", \"]\", \":\", \";\", \"..\/.\", null};","227","        Jenkins j = Jenkins.getInstance();","228","","229","        int created = 0;","230","        for (String name : illegalNames){","231","            try{","232","                InputStream is = new ByteArrayInputStream(xmlFile.getBytes());","233","                j.createProjectFromXML(name, is);","234","                created++;","235","            } catch (IOException e){}","236","        }","237","","238","        for (String name : illegalNames){","239","            try{","240","                j.createProject(FreeStyleProject.class, name);","241","                created++;","242","            } catch (IOException e){}","243","        }","244","        \/\/ Checks that no illegal named project has been created.","245","        assertEquals(0, created);","246","    }","247",""]}]}},"04c8a1efc0f6324868638be9a4cfdb085e17744f":{"changes":{"core\/src\/main\/java\/hudson\/model\/AllView.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/index.jelly":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/descriptionForm.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AllView.java":[{"add":[],"delete":["25","import jenkins.model.Jenkins;","56","    public String getDescription() {","57","        return Jenkins.getInstance().getDescription();","58","    }","59","","60","    @Override","85","    public synchronized void doSubmitDescription( StaplerRequest req, StaplerResponse rsp ) throws IOException, ServletException {","86","        checkPermission(Jenkins.ADMINISTER);","87","","88","        Jenkins.getInstance().setSystemMessage(req.getParameter(\"description\"));","89","        rsp.sendRedirect(\".\");","90","    }","91","","92","    @Override"]}],"core\/src\/main\/resources\/hudson\/model\/View\/index.jelly":[{"add":["36","              <t:editableDescription permission=\"${it.CONFIGURE}\"\/>"],"delete":["33","              <j:if test=\"${it.class.name!='hudson.model.AllView'}\">","37","              <\/j:if>            ","38","              <t:editableDescription permission=\"${app.ADMINISTER}\"\/>"]}],"changelog.html":[{"add":["71","    View description should be clearly separated from the Jenkins system message.","72","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18633\">issue 18633<\/a>)","73","  <li class=bug>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/descriptionForm.jelly":[{"add":["29","  <j:if test=\"${it.primaryView != null}\">"],"delete":["29","  <j:if test=\"${it.class.name=='hudson.model.Hudson'}\">"]}]}},"63c2f6c5d7d154a3a0f58c54f04f9b1a25ea5385":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["498","      <version>1.24<\/version>"],"delete":["498","      <version>1.22<\/version>"]}]}},"06b92a49bf80debd4d9f2d334049d790d46c6081":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/RunMap.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["112","import hudson.model.Run.RunExecution;","343","    static class InvalidDirectoryNameException extends IOException {","344","        InvalidDirectoryNameException(File buildDir) {","345","            super(\"Invalid directory name \" + buildDir);","346","        }","347","    }","348","","349","    \/*package*\/ static long parseTimestampFromBuildDir(File buildDir) throws IOException, InvalidDirectoryNameException {","363","            throw new InvalidDirectoryNameException(buildDir);"],"delete":["342","    \/*package*\/ static long parseTimestampFromBuildDir(File buildDir) throws IOException {","356","            throw new IOException2(\"[JENKINS-15587] Invalid directory name \"+buildDir,e);"]}],"core\/src\/main\/java\/hudson\/model\/RunMap.java":[{"add":["229","            } catch (Run.InvalidDirectoryNameException x) {","230","                Level lvl;","231","                try {","232","                    Integer.parseInt(d.getName());","233","                    \/\/ JENKINS-15587: just an mangled symlink","234","                    lvl = Level.FINE;","235","                } catch (NumberFormatException x2) {","236","                    \/\/ potentially a real build dir, maybe a bug","237","                    lvl = Level.WARNING;","238","                }","239","                LOGGER.log(lvl, \"skipping non-build directory {0}\", d);"],"delete":[]}]}},"d1c21484c3658b93bffa4de51749ab60b2c4ff11":{"changes":{"core\/src\/main\/java\/hudson\/scheduler\/CronTab.java":"MODIFY","core\/src\/main\/java\/hudson\/scheduler\/RareOrImpossibleDateException.java":"MODIFY","core\/src\/main\/resources\/hudson\/triggers\/Messages.properties":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scheduler\/CronTab.java":[{"add":["328","     *","329","     * @throws RareOrImpossibleDateException if the date isn't hit in the 2 years after it indicates an impossible","330","     * (e.g. Jun 31) date, or at least a date too rare to be useful. This addresses JENKINS-41864 and was added in TODO","338","                \/\/ we went too far into the future","389","     *","390","     * @throws RareOrImpossibleDateException if the date isn't hit in the 2 years before it indicates an impossible","391","     * (e.g. Jun 31) date, or at least a date too rare to be useful. This addresses JENKINS-41864 and was added in TODO","400","                \/\/ we went too far into the past"],"delete":["335","                \/\/ we went at least two years into the future","394","                \/\/ we went at least two years into the past"]}],"core\/src\/main\/java\/hudson\/scheduler\/RareOrImpossibleDateException.java":[{"add":["28","import java.util.Calendar;","29","","30","\/**","31"," * This exception is thrown when trying to determine the previous or next occurrence of a given date determines","32"," * that it's not happened, or going to happen, within some time period (e.g. within the next year).","33"," *","34"," * <p>This can typically have a few different reasons:<\/p>","35"," *","36"," * <ul>","37"," *   <li>The date is impossible. For example, June 31 does never happen, so <tt>0 0 31 6 *<\/tt> will never happen<\/li>","38"," *   <li>The date happens only rarely","39"," *     <ul>","40"," *       <li>February 29 being the obvious one<\/li>","41"," *       <li>Cron tab patterns specifying all of month, day of month, and day of week can also occur so rarely to trigger this exception<\/li>","42"," *     <\/ul>","43"," *   <\/li>","44"," * <\/ul>","45"," *","46"," * @see CronTab#floor(Calendar)","47"," * @see CronTab#ceil(Calendar)","48"," * @since TODO","49"," *\/"],"delete":[]}],"core\/src\/main\/resources\/hudson\/triggers\/Messages.properties":[{"add":["31","TimerTrigger.the_specified_cron_tab_is_rare_or_impossible=This schedule will match dates only rarely (e.g. February 29) or \\"],"delete":["31","TimerTrigger.the_specified_cron_tab_is_rare_or_impossible=This cron tab will match dates only rarely (e.g. February 29) or \\"]}]}},"ca21c65bf2538982126bd465eb70840071a61e4e":{"changes":{"core\/src\/main\/java\/hudson\/org\/apache\/tools\/tar\/TarInputStream.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/io\/TarArchiver.java":"MODIFY","core\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY","core\/src\/main\/java\/hudson\/org\/apache\/tools\/tar\/TarOutputStream.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/org\/apache\/tools\/tar\/TarInputStream.java":[{"add":["39"," *"],"delete":["39"," * @deprecated Use {@link org.apache.commons.compress.archivers.tar.TarArchiveInputStream} instead","41","@Deprecated"]}],"core\/src\/main\/java\/hudson\/util\/io\/TarArchiver.java":[{"add":["49","    private final TarOutputStream tar;","52","        tar = new TarOutputStream(new BufferedOutputStream(out) {","60","        });","61","        tar.setLongFileMode(TarOutputStream.LONGFILE_GNU);","66","        TarEntry e = new TarEntry(relativePath, LF_SYMLINK);","76","        try {","77","            StringBuffer linkName = (StringBuffer) LINKNAME_FIELD.get(e);","78","            linkName.setLength(0);","79","            linkName.append(target);","80","        } catch (IllegalAccessException x) {","81","            throw new IOException(\"Failed to set linkName\", x);","82","        }","83","","84","        tar.putNextEntry(e);","99","        TarEntry te = new TarEntry(relativePath);","106","        tar.putNextEntry(te);","119","        tar.closeEntry();","126","","127","    private static final Field LINKNAME_FIELD = getTarEntryLinkNameField();","128","","129","    private static Field getTarEntryLinkNameField() {","130","        try {","131","            Field f = TarEntry.class.getDeclaredField(\"linkName\");","132","            f.setAccessible(true);","133","            return f;","134","        } catch (SecurityException e) {","135","            throw new AssertionError(e);","136","        } catch (NoSuchFieldException e) {","137","            throw new AssertionError(e);","138","        }","139","    }"],"delete":["39","import org.apache.commons.compress.archivers.tar.TarArchiveEntry;","40","import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;","51","    private final TarArchiveOutputStream tar;","54","        tar = new TarArchiveOutputStream(new BufferedOutputStream(out) {","62","        });    ","63","        tar.setBigNumberMode(TarArchiveOutputStream.BIGNUMBER_STAR);","64","        tar.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);","69","        TarArchiveEntry e = new TarArchiveEntry(relativePath, LF_SYMLINK);","78","        ","79","        e.setLinkName(target);","81","        tar.putArchiveEntry(e);","82","        tar.closeArchiveEntry();","97","        TarArchiveEntry te = new TarArchiveEntry(relativePath);","104","        tar.putArchiveEntry(te);","117","        tar.closeArchiveEntry();"]}],"core\/pom.xml":[{"add":[],"delete":["279","        <groupId>org.apache.commons<\/groupId>","280","        <artifactId>commons-compress<\/artifactId>","281","        <version>1.9<\/version>","282","    <\/dependency>","283","    <dependency>"]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["35","import hudson.org.apache.tools.tar.TarInputStream;","72","import org.apache.tools.tar.TarEntry;","2272","        TarInputStream t = new TarInputStream(in);","2274","            TarEntry te;","2275","            while ((te = t.getNextEntry()) != null) {","2284","                    byte linkFlag = (Byte) LINKFLAG_FIELD.get(te);","2285","                    if (linkFlag==TarEntry.LF_SYMLINK) {","2302","        } catch (IllegalAccessException e) {","2303","            throw new IOException(\"Failed to extract \"+name,e);","2727","    private static final Field LINKFLAG_FIELD = getTarEntryLinkFlagField();","2728","","2729","    private static Field getTarEntryLinkFlagField() {","2730","        try {","2731","            Field f = TarEntry.class.getDeclaredField(\"linkFlag\");","2732","            f.setAccessible(true);","2733","            return f;","2734","        } catch (SecurityException e) {","2735","            throw new AssertionError(e);","2736","        } catch (NoSuchFieldException e) {","2737","            throw new AssertionError(e);","2738","        }","2739","    }","2740",""],"delete":["120","import org.apache.commons.compress.archivers.tar.TarArchiveEntry;","121","import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;","2270","     * @since TODO supports large files > 10 GB, migration to commons-compress","2273","        TarArchiveInputStream t = new TarArchiveInputStream(in);","2274","        ","2275","        \/\/ TarInputStream t = new TarInputStream(in);","2277","            TarArchiveEntry te;","2278","            while ((te = t.getNextTarEntry()) != null) {","2287","                    if (te.isSymbolicLink()) {"]}],"core\/src\/main\/java\/hudson\/org\/apache\/tools\/tar\/TarOutputStream.java":[{"add":[],"delete":["37"," * ","38"," * @deprecated Use {@link org.apache.commons.compress.archivers.tar.TarArchiveOutputStream} instead","41","@Deprecated"]}]}},"9ecc4a9a7a6f7794381e4e2ed34d077ce584fa32":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Publisher.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ExternalRun.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/BuildTrigger.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Build.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Publisher.java":[{"add":["3","import hudson.Launcher;","9","import hudson.model.AbstractBuild;","37","","38","    \/**","39","     * Returne true if this {@link Publisher} needs to run after the build result is","40","     * fully finalized.","41","     *","42","     * <p>","43","     * The execution of normal {@link Publisher}s are considered within a part","44","     * of the build. This allows publishers to mark the build as a failure, or","45","     * to include their execution time in the total build time.","46","     *","47","     * <p>","48","     * So normally, that is the preferrable behavior, but in a few cases","49","     * this is problematic. One of such cases is when a publisher needs to","50","     * trigger other builds, whcih in turn need to see this build as a","51","     * completed build. Those plugins that need to do this can return true","52","     * from this method, so that the {@link #perform(AbstractBuild, Launcher, BuildListener)}","53","     * method is called after the build is marked as completed.","54","     *","55","     * <p>","56","     * When {@link Publisher} behaves this way, note that they can no longer","57","     * change the build status anymore.","58","     *","59","     * @author Kohsuke Kawaguchi","60","     * @since 1.153","61","     *\/","62","    public boolean needsToRunAfterFinalized() {","63","        return false;","64","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["335","        protected void post2(BuildListener listener) throws Exception {","336","            \/\/ no op","337","        }","338","","339","        @Override","340","        public void cleanUp(BuildListener listener) throws Exception {"],"delete":["335","        public void post2(BuildListener listener) throws Exception {"]}],"core\/src\/main\/java\/hudson\/model\/ExternalRun.java":[{"add":["47","","48","            public void cleanUp(BuildListener listener) {","49","                \/\/ do nothing","50","            }","100","","101","            public void cleanUp(BuildListener listener) {","102","                \/\/ do nothing","103","            }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["571","         * <p>","580","","581","        \/**","582","         * Performs final clean up action.","583","         * <p>","584","         * This method is called after {@link #post(BuildListener)},","585","         * after the build result is fully finalized. This is the point","586","         * where the build is already considered completed.","587","         * <p>","588","         * Among other things, this is often a necessary pre-condition","589","         * before invoking other builds that depend on this build.","590","         *\/","591","        void cleanUp(BuildListener listener) throws Exception;","605","        BuildListener listener=null;","606","        PrintStream log = null;","607","","648","                long end = System.currentTimeMillis();","649","                duration = end-start;","650","","651","                \/\/ mark the state as completed.","652","                \/\/ the significance of doing this is that Hudson","653","                \/\/ will now see this build as completed.","654","                \/\/ things like triggering other builds requires this as pre-condition.","655","                \/\/ see issue #980.","656","                state = State.COMPLETED;","657","","658","                try {","659","                    job.cleanUp(listener);","660","                } catch (Exception e) {","661","                    handleFatalBuildProblem(listener,e);","662","                    \/\/ too late to update the result now","663","                }","664","","667","                if(listener!=null)","668","                    listener.finished(result);","669","                if(log!=null)","670","                    log.close();","672","                try {","673","                    save();","674","                } catch (IOException e) {","675","                    e.printStackTrace();","676","                }"],"delete":["571","         *","599","            BuildListener listener=null;","600","            PrintStream log = null;","636","            }","638","            long end = System.currentTimeMillis();","639","            duration = end-start;","641","            if(listener!=null)","642","                listener.finished(result);","643","            if(log!=null)","644","                log.close();","645","","646","            try {","647","                save();","648","            } catch (IOException e) {","649","                e.printStackTrace();"]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["262","","263","        public void cleanUp(BuildListener listener) throws Exception {","264","            \/\/ default is no-op","265","        }"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/BuildTrigger.java":[{"add":["110","    @Override","111","    public boolean needsToRunAfterFinalized() {","112","        return true;","113","    }","114",""],"delete":[]}],"core\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["292","","293","                    public void cleanUp(BuildListener listener) {","294","                    }","352","        }","354","        public void cleanUp(BuildListener listener) throws Exception {"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Build.java":[{"add":["6","import hudson.tasks.Publisher;","136","            performAllBuildStep(listener, project.getPublishers(),true);","137","            performAllBuildStep(listener, project.getProperties(),true);","138","        }","139","","140","        public void cleanUp(BuildListener listener) throws Exception {","141","            performAllBuildStep(listener, project.getPublishers(),false);","142","            performAllBuildStep(listener, project.getProperties(),false);","143","        }","144","","145","        \/\/ run all of them even if one of them failed","146","        private void performAllBuildStep(BuildListener listener, Map<?, ? extends BuildStep> buildSteps, boolean phase) throws InterruptedException, IOException {","147","            for( BuildStep bs : buildSteps.values() ) {","148","                if( (bs instanceof Publisher && ((Publisher)bs).needsToRunAfterFinalized()) ^ phase)","149","                    bs.perform(Build.this, launcher, listener);","150","            }"],"delete":["135","            \/\/ run all of them even if one of them failed","136","            for( BuildStep bs : project.getPublishers().values() )","137","                bs.perform(Build.this, launcher, listener);","138","            for( BuildStep bs : project.getProperties().values() )","139","                bs.perform(Build.this, launcher, listener);"]}]}},"19f9b63d74693d4de6f6906e9896399d18b4107f":{"changes":{"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginWrapper.java":"MODIFY","core\/src\/main\/java\/jenkins\/diagnostics\/PinningIsBlockingBundledPluginMonitor.java":"ADD","core\/src\/main\/resources\/jenkins\/diagnostics\/PinningIsBlockingBundledPluginMonitor\/message.jelly":"ADD","core\/src\/main\/resources\/jenkins\/diagnostics\/PinningIsBlockingBundledPluginMonitor\/message.properties":"ADD","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":[{"add":["74","import static org.apache.commons.io.FilenameUtils.getBaseName;","75","","129","                expandDir = new File(archive.getParentFile(), getBaseName(archive.getName()));","133","            File manifestFile = new File(expandDir, PluginWrapper.MANIFEST_FILENAME);"],"delete":["127","                expandDir = new File(archive.getParentFile(), PluginWrapper.getBaseName(archive));","131","            File manifestFile = new File(expandDir, \"META-INF\/MANIFEST.MF\");"]}],"core\/src\/main\/java\/hudson\/PluginWrapper.java":[{"add":["46","import static org.apache.commons.io.FilenameUtils.getBaseName;","48","import org.apache.commons.io.FilenameUtils;","203","\t\tthis.shortName = computeShortName(manifest, archive.getName());","239","    static String computeShortName(Manifest manifest, String fileName) {","251","        return getBaseName(fileName);","330","        return getVersionOf(manifest);","331","    }","332","","333","    private String getVersionOf(Manifest manifest) {","576","","577","    \/**","578","     * Checks if this plugin is pinned and that's forcing us to use an older version than the bundled one.","579","     *\/","580","    public boolean isPinningForcingOldVersion() {","581","        if (!isPinned())    return false;","582","","583","        Manifest bundled = Jenkins.getInstance().pluginManager.getBundledPluginManifest(getShortName());","584","        if (bundled==null)  return false;","585","","586","        VersionNumber you = new VersionNumber(getVersionOf(bundled));","587","        VersionNumber me = getVersionNumber();","588","","589","        return me.isOlderThan(you);","590","    }","591","","635","    \/**","636","     * Name of the plugin manifest file (to help find where we parse them.)","637","     *\/","638","    public static final String MANIFEST_FILENAME = \"META-INF\/MANIFEST.MF\";"],"delete":["201","\t\tthis.shortName = computeShortName(manifest, archive);","237","    private String computeShortName(Manifest manifest, File archive) {","249","        return getBaseName(archive);","250","    }","251","","252","","253","    \/**","254","     * Gets the \"abc\" portion from \"abc.ext\".","255","     *\/","256","    static String getBaseName(File archive) {","257","        String n = archive.getName();","258","        int idx = n.lastIndexOf('.');","259","        if(idx>=0)","260","            n = n.substring(0,idx);","261","        return n;"]}],"core\/src\/main\/java\/jenkins\/diagnostics\/PinningIsBlockingBundledPluginMonitor.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/diagnostics\/PinningIsBlockingBundledPluginMonitor\/message.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/diagnostics\/PinningIsBlockingBundledPluginMonitor\/message.properties":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["43","import hudson.util.IOUtils;","78","import javax.annotation.CheckForNull;","83","import java.io.Closeable;","91","import java.net.URLClassLoader;","109","import java.util.jar.Manifest;","181","    \/**","182","     * Manifest of the plugin binaries that are bundled with core.","183","     *\/","184","    private final Map<String,Manifest> bundledPluginManifests = new HashMap<String, Manifest>();","185","","418","     * Returns the manifest of a bundled but not-extracted plugin.","419","     *\/","420","    public @CheckForNull Manifest getBundledPluginManifest(String shortName) {","421","        return bundledPluginManifests.get(shortName);","422","    }","423","","424","    \/**","509","        if (pinFile.exists())","510","            parsePinnedBundledPluginManifest(src);","511","    }","512","","513","    \/**","514","     * When a pin file prevented a bundled plugin from getting extracted, check if the one we currently have","515","     * is older than we bundled.","516","     *\/","517","    private void parsePinnedBundledPluginManifest(URL bundledJpi) {","518","        try {","519","            URLClassLoader cl = new URLClassLoader(new URL[]{bundledJpi});","520","            InputStream in=null;","521","            try {","522","                URL res = cl.findResource(PluginWrapper.MANIFEST_FILENAME);","523","                if (res!=null) {","524","                    in = res.openStream();","525","                    Manifest manifest = new Manifest(in);","526","                    String shortName = PluginWrapper.computeShortName(manifest, FilenameUtils.getName(bundledJpi.getPath()));","527","                    bundledPluginManifests.put(shortName, manifest);","528","                }","529","            } finally {","530","                IOUtils.closeQuietly(in);","531","                if (cl instanceof Closeable)","532","                    ((Closeable)cl).close();","533","            }","534","        } catch (IOException e) {","535","            LOGGER.log(WARNING, \"Failed to parse manifest of \"+bundledJpi, e);","536","        }"],"delete":[]}]}},"79e3ae4f064d02d623b302997715588d0cd3d5ad":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["49","   (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8406\">issue 8406<\/a>)","50","  <li class=rfe> Violations plugin tries to access nonexistant directory.","51","   (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8418\">issue 8418<\/a>)       "],"delete":["49","   (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8406\">issue 8406<\/a>)    "]}]}},"da3bb81fadc966cc2df74b18c20a6eb01cf4806e":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/login.jelly":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/login.jelly":[{"add":["26","  <j:choose>","27","  <j:when test=\"${it.setupWizard.useGeneratedPassword()}\">","29","  <\/j:when>","30","  <j:otherwise>","77","  <\/j:otherwise>","78","  <\/j:choose>"],"delete":["26","  <j:if test=\"${it.setupWizard != null}\">","28","  <\/j:if>","29","  <j:if test=\"${it.setupWizard == null}\">","76","  <\/j:if>"]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["109","        if(iapf.exists()) {","110","            String setupKey = iapf.readToString().trim();","111","            String ls = System.lineSeparator();","112","            LOGGER.info(ls + ls + \"*************************************************************\" + ls","113","                    + \"*************************************************************\" + ls","114","                    + \"*************************************************************\" + ls","115","                    + ls","116","                    + \"Jenkins initial setup is required. An admin user has been created and \"","117","                    + \"a password generated.\" + ls","118","                    + \"Please use the following password to proceed to installation:\" + ls","119","                    + ls","120","                    + setupKey + ls","121","                    + ls","122","                    + \"This may also be found at: \" + iapf.getRemote() + ls","123","                    + ls","124","                    + \"*************************************************************\" + ls","125","                    + \"*************************************************************\" + ls","126","                    + \"*************************************************************\" + ls);","127","        }","135","    ","136","    \/**","137","     * Indicates a generated password should be used - e.g. this is a new install, no security realm set up","138","     *\/","139","    public boolean useGeneratedPassword() {","140","        try {","141","            return getInitialAdminPasswordFile().exists();","142","        } catch (Exception e) {","143","            \/\/ ignore","144","        }","145","        return false;","146","    }"],"delete":["109","        String setupKey = iapf.readToString().trim();","110","        String ls = System.lineSeparator();","111","        LOGGER.info(ls + ls + \"*************************************************************\" + ls","112","                + \"*************************************************************\" + ls","113","                + \"*************************************************************\" + ls","114","                + ls","115","                + \"Jenkins initial setup is required. An admin user has been created and \"","116","                + \"a password generated.\" + ls","117","                + \"Please use the following password to proceed to installation:\" + ls","118","                + ls","119","                + setupKey + ls","120","                + ls","121","                + \"This may also be found at: \" + iapf.getRemote() + ls","122","                + ls","123","                + \"*************************************************************\" + ls","124","                + \"*************************************************************\" + ls","125","                + \"*************************************************************\" + ls);"]}]}},"a58e198f8aa60dd0cb244cba338d9c48141590e5":{"changes":{"test\/src\/test\/resources\/hudson\/model\/ItemGroupMixInTest\/xmlFileReadCannotResolveClassException.zip":"ADD","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/ItemGroupMixIn.java":"MODIFY","test\/src\/main\/java\/org\/jvnet\/hudson\/test\/MockFolder.java":"MODIFY","core\/src\/main\/java\/hudson\/XmlFile.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ItemGroupMixInTest.java":"ADD"},"diff":{"test\/src\/test\/resources\/hudson\/model\/ItemGroupMixInTest\/xmlFileReadCannotResolveClassException.zip":[{"add":[],"delete":[]}],"changelog.html":[{"add":["79","      <code>CannotResolveClassException<\/code> breaks loading of entire containing folder, not just one job.","80","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-20951\">issue 20951<\/a>)","81","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ItemGroupMixIn.java":[{"add":["42","import java.util.logging.Level;","43","import java.util.logging.Logger;","103","                Logger.getLogger(ItemGroupMixIn.class.getName()).log(Level.WARNING, \"could not load \" + subdir, e);"],"delete":["101","                e.printStackTrace(); \/\/ TODO: logging"]}],"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/MockFolder.java":[{"add":["96","        if (items == null) {","97","            return null; \/\/ cf. parent hack in AbstractProject.onLoad","98","        }"],"delete":[]}],"core\/src\/main\/java\/hudson\/XmlFile.java":[{"add":["26","import com.thoughtworks.xstream.XStreamException;","142","        } catch (XStreamException e) {","163","        } catch (XStreamException e) {"],"delete":["26","import com.thoughtworks.xstream.converters.ConversionException;","142","        } catch(StreamException e) {","143","            throw new IOException(\"Unable to read \"+file,e);","144","        } catch(ConversionException e) {","165","        } catch (StreamException e) {","166","            throw new IOException(\"Unable to read \"+file,e);","167","        } catch(ConversionException e) {"]}],"test\/src\/test\/java\/hudson\/model\/ItemGroupMixInTest.java":[{"add":[],"delete":[]}]}},"118fe330a2185f44d30cbde10b528844be8a0080":{"changes":{"core\/src\/main\/java\/hudson\/ExtensionList.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ExtensionList.java":[{"add":["311","        if (jenkins == null || jenkins.getInitLevel().compareTo(InitMilestone.PLUGINS_PREPARED) < 0)"],"delete":["311","        if (jenkins.getInitLevel().compareTo(InitMilestone.PLUGINS_PREPARED)<0)"]}]}},"23891487d2e4355dd15029799aa17250b9445b7b":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":[{"add":["761","    @Override","762","    public DescriptorImpl getDescriptor() {","775","        public DescriptorImpl() {","776","            super();","777","            load();","778","        }","779","        "],"delete":["761","    public TopLevelItemDescriptor getDescriptor() {"]}]}},"7e8bbea3336dc65a10c2fd69a20beac20bc6fca3":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["44","    <stapler.version>1.217<\/stapler.version>"],"delete":["44","    <stapler.version>1.214<\/stapler.version>"]}]}},"a5f24cca93ca06ac25c6d7489afc2a749b02f2b3":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["34","import hudson.maven.reporters.MavenMailer;","50","import hudson.tasks.MailSender;","613","\t    MavenMailer mailer = project.getReporters().get(MavenMailer.class);","614","\t    if (mailer != null) {","615","\t\tnew MailSender(mailer.recipients,","616","\t\t\t       mailer.dontNotifyEveryUnstableBuild,","617","\t\t\t       mailer.sendToIndividuals).execute(MavenModuleSetBuild.this,listener);","618","\t    }","619","\t    "],"delete":[]}]}},"ed5d70d191ebf36b757cfb51c54edbc493214fb4":{"changes":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/AuthorizationMatrixProperty.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":[{"add":["55","import java.util.logging.Level;","56","import java.util.logging.Logger;","206","                    writer.setValue(p+':'+sid);","218","                try {","219","                    as.add(reader.getValue());","220","                } catch (IllegalArgumentException ex) {","221","                    Logger.getLogger(GlobalMatrixAuthorizationStrategy.class.getName())","222","                          .log(Level.WARNING,\"Skipping a non-existent permission\",ex);","223","                }"],"delete":["204","                    context.convertAnother(p+':'+sid);","216","                String id = (String)context.convertAnother(as,String.class);","217","                as.add(id);"]}],"core\/src\/main\/java\/hudson\/security\/AuthorizationMatrixProperty.java":[{"add":["43","import java.util.logging.Level;","44","import java.util.logging.Logger;","220","    \/**","221","     * Works like {@link #add(Permission, String)} but takes both parameters","222","     * from a single string of the form <tt>PERMISSIONID:sid<\/tt>","223","     *\/","224","    private void add(String shortForm) {","225","        int idx = shortForm.indexOf(':');","226","        Permission p = Permission.fromId(shortForm.substring(0, idx));","227","        if (p==null)","228","            throw new IllegalArgumentException(\"Failed to parse '\"+shortForm+\"' --- no such permission\");","229","        add(p, shortForm.substring(idx + 1));","230","    }","250","\t\t\t\t\twriter.setValue(p + ':' + sid);","263","\t\t\t\treader.getValue(); \/\/ we used to use this but not any more.","268","                try {","269","                    as.add(reader.getValue());","270","                } catch (IllegalArgumentException ex) {","271","                     Logger.getLogger(AuthorizationMatrixProperty.class.getName())","272","                           .log(Level.WARNING,\"Skipping a non-existent permission\",ex);","273","                }"],"delete":["218","\t\/**","219","\t * Works like {@link #add(Permission, String)} but takes both parameters","220","\t * from a single string of the form <tt>PERMISSIONID:sid<\/tt>","221","\t *\/","222","\tprivate void add(String shortForm) {","223","\t\tint idx = shortForm.indexOf(':');","224","\t\tadd(Permission.fromId(shortForm.substring(0, idx)), shortForm","225","\t\t\t\t.substring(idx + 1));","226","\t}","246","\t\t\t\t\tcontext.convertAnother(p + ':' + sid);","250","","260","                context.convertAnother(as, String.class); \/\/ we used to use this but not any more.","265","\t\t\t\tString id = (String) context.convertAnother(as, String.class);","266","\t\t\t\tas.add(id);"]}]}},"e6db919e5f70bb598de3235cbca00ef0a79302e9":{"changes":{"test\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/ExtensionList.java":"MODIFY","test\/src\/test\/java\/hudson\/ExtensionListTest.java":"MODIFY"},"diff":{"test\/pom.xml":[{"add":["42","    <trimStackTrace>false<\/trimStackTrace> <!-- SUREFIRE-1226 workaround -->"],"delete":[]}],"core\/src\/main\/java\/hudson\/ExtensionList.java":[{"add":["206","    @Override","207","    public boolean removeAll(Collection<?> c) {","208","        boolean removed = false;","209","        try {","210","            for (Object o : c) {","211","                removed |= removeSync(o);","212","            }","213","            return removed;","214","        } finally {","215","            if (extensions != null && removed) {","216","                fireOnChangeListeners();","217","            }","218","        }","219","    }","220",""],"delete":[]}],"test\/src\/test\/java\/hudson\/ExtensionListTest.java":[{"add":["12","import java.util.ArrayList;","19","import org.jvnet.hudson.test.Issue;","208","","209","    @Issue(\"JENKINS-39520\")","210","    @Test","211","    public void removeAll() {","212","        ExtensionList<Animal> list = ExtensionList.lookup(Animal.class);","213","        assertTrue(list.removeAll(new ArrayList<>(list)));","214","        assertEquals(0, list.size());","215","        assertFalse(list.removeAll(new ArrayList<>(list)));","216","        assertEquals(0, list.size());","217","    }","218",""],"delete":[]}]}},"0056b55146cb1948e3a828a905f543a1c540ab22":{"changes":{"test\/pom.xml":"MODIFY"},"diff":{"test\/pom.xml":[{"add":["152","      <exclusions>","153","        <exclusion>","154","          <groupId>org.jvnet.hudson<\/groupId>","155","          <artifactId>htmlunit-core-js<\/artifactId>","156","        <\/exclusion>","157","      <\/exclusions>"],"delete":[]}]}},"96174ecdf13064bcd5a4426dec6c5923fd1fde84":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/junit\/TestResult.java":"MODIFY","core\/src\/test\/resources\/hudson\/tasks\/junit\/junit-report-1472.xml":"ADD","core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/SuiteResult.java":"MODIFY","core\/src\/test\/java\/hudson\/tasks\/junit\/SuiteResultTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/junit\/TestResult.java":[{"add":["123","            for( SuiteResult suiteResult : SuiteResult.parse(reportFile) ) {","124","                suites.add( suiteResult );","125","                duration += suiteResult.getDuration();","126","            }"],"delete":["123","            SuiteResult suiteResult = new SuiteResult(reportFile);","124","            suites.add( suiteResult );","125","            duration += suiteResult.getDuration(); "]}],"core\/src\/test\/resources\/hudson\/tasks\/junit\/junit-report-1472.xml":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":[{"add":[],"delete":["36","    CaseResult(SuiteResult parent, Element testCase) {","37","        \/\/ reports in http:\/\/www.nabble.com\/difference-in-junit-publisher-and-ant-junitreport-tf4308604.html#a12265700","38","        \/\/ indicates that in certain situations, using the test suite name is better.","39","        \/\/ note however in other situations, this seems not to be the case","40","        \/\/ https:\/\/hudson.dev.java.net\/issues\/show_bug.cgi?id=1233","41","        this(parent, parent.getName(), testCase);","42","    }","43",""]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/SuiteResult.java":[{"add":["43","    \/**","44","     * Parses the JUnit XML file into {@link SuiteResult}s.","45","     * This method returns a collection, as a single XML may have multiple &lt;testsuite>","46","     * elements wrapped into the top-level &lt;testsuites>.","47","     *\/","48","    static List<SuiteResult> parse(File xmlReport) throws DocumentException {","49","        List<SuiteResult> r = new ArrayList<SuiteResult>();","50","","51","        \/\/ parse into DOM","52","        SAXReader saxReader = new SAXReader();","53","        \/\/ install EntityResolver for resolving DTDs, which are in files created by TestNG.","54","        \/\/ (see https:\/\/hudson.dev.java.net\/servlets\/ReadMsg?listName=users&msgNo=5530)","55","        XMLEntityResolver resolver = new XMLEntityResolver();","56","        saxReader.setEntityResolver(resolver);","59","","60","        if(root.getName().equals(\"testsuites\")) {","61","            \/\/ multi-suite file","62","            for (Element suite : (List<Element>)root.elements(\"testsuite\"))","63","                r.add(new SuiteResult(xmlReport,suite));","64","        } else {","65","            \/\/ single suite file","66","            r.add(new SuiteResult(xmlReport,root));","67","        }","68","","69","        return r;","70","    }","71","","72","    private SuiteResult(File xmlReport, Element suite) throws DocumentException {","73","        String name = suite.attributeValue(\"name\");","80","        stdout = suite.elementText(\"system-out\");","81","        stderr = suite.elementText(\"system-err\");","83","        Element ex = suite.element(\"error\");","86","            addCase(new CaseResult(this,suite,\"<init>\"));","89","        for (Element e : (List<Element>)suite.elements(\"testcase\")) {","90","            \/\/ https:\/\/hudson.dev.java.net\/issues\/show_bug.cgi?id=1233 indicates that","91","            \/\/ when <testsuites> is present, we are better off using @classname on the","92","            \/\/ individual testcase class.","94","            \/\/ https:\/\/hudson.dev.java.net\/issues\/show_bug.cgi?id=1463 indicates that","95","            \/\/ @classname may not exist in individual testcase elements. We now","96","            \/\/ also test if the testsuite element has a package name that can be used","97","            \/\/ as the class name instead of the file name which is default.","98","            String classname = e.attributeValue(\"classname\");","99","            if (classname == null) {","100","                classname = suite.attributeValue(\"name\");","102","","103","            \/\/ https:\/\/hudson.dev.java.net\/issues\/show_bug.cgi?id=1233 and","104","            \/\/ http:\/\/www.nabble.com\/difference-in-junit-publisher-and-ant-junitreport-tf4308604.html#a12265700","105","            \/\/ are at odds with each other --- when both are present,","106","            \/\/ one wants to use @name from <testsuite>,","107","            \/\/ the other wants to use @classname from <testcase>.","108","","109","            addCase(new CaseResult(this,classname,e));"],"delete":["43","    SuiteResult(File xmlReport) throws DocumentException {","44","\t\tSAXReader saxReader = new SAXReader();","45","\t\t\/\/ fix for problems related to testng-results.xml","46","\t\t\/\/ (see https:\/\/hudson.dev.java.net\/servlets\/ReadMsg?listName=users&msgNo=5530)","47","\t\tXMLEntityResolver resolver = new XMLEntityResolver();","48","\t\tsaxReader.setEntityResolver(resolver);","51","        String name = root.attributeValue(\"name\");","58","        stdout = root.elementText(\"system-out\");","59","        stderr = root.elementText(\"system-err\");","61","        Element ex = root.element(\"error\");","64","            addCase(new CaseResult(this,root,\"<init>\"));","67","        for (Element e : (List<Element>)root.elements(\"testcase\")) {","68","            addCase(new CaseResult(this,e));","69","        }","70","        \/\/ a user reported that there's a slight variation of the format that puts <testsuites> at root","71","        \/\/ see http:\/\/www.nabble.com\/More-JUnit-test-report-problems...-tf4267020.html#a12143611","72","        for (Element suite : (List<Element>)root.elements(\"testsuite\")) {","73","            for (Element e : (List<Element>)suite.elements(\"testcase\")) {","74","                ","75","                \/\/ https:\/\/hudson.dev.java.net\/issues\/show_bug.cgi?id=1233 indicates that","76","                \/\/ when <testsuites> is present, we are better off using @classname on the","77","                \/\/ individual testcase class.","79","                \/\/ https:\/\/hudson.dev.java.net\/issues\/show_bug.cgi?id=1463 indicates that","80","                \/\/ @classname may not exist in individual testcase elements. We now","81","                \/\/ also test if the testsuite element has a package name that can be used","82","                \/\/ as the class name instead of the file name which is default.","83","                ","84","                String classname = e.attributeValue(\"classname\");","85","                if (classname == null) {","86","                    classname = suite.attributeValue(\"name\");","87","                }","88","                ","89","                if (classname == null) {","90","                    addCase(new CaseResult(this,e));","91","                } else {","92","                    addCase(new CaseResult(this,classname,e));","93","                }"]}],"core\/src\/test\/java\/hudson\/tasks\/junit\/SuiteResultTest.java":[{"add":["4","import java.net.URISyntaxException;","7","import org.dom4j.DocumentException;","18","    private File getDataFile(String name) throws URISyntaxException {","19","        return new File(SuiteResultTest.class.getResource(name).toURI());","20","    }","21","","22","    private SuiteResult parseOne(File file) throws DocumentException {","23","        List<SuiteResult> results = SuiteResult.parse(file);","24","        assertEquals(1,results.size());","25","        return results.get(0);","26","    }","27","","33","        SuiteResult result = parseOne(getDataFile(\"junit-report-1233.xml\"));","48","        SuiteResult result = parseOne(getDataFile(\"junit-report-1463.xml\"));","61","","62","    \/**","63","     * Verifying fix for issue #1472.","64","     * JUnit report produced by TAP (Test Anything Protocol)","65","     * https:\/\/hudson.dev.java.net\/issues\/show_bug.cgi?id=1472","66","     *\/","67","    public void testIssue1472() throws Exception {","68","        List<SuiteResult> results = SuiteResult.parse(getDataFile(\"junit-report-1472.xml\"));","69","        assertTrue(results.size()>20); \/\/ lots of data here","70","","71","        SuiteResult sr0 = results.get(0);","72","        SuiteResult sr1 = results.get(1);","73","        assertEquals(\"make_test.t_basic_lint_t\",sr0.getName());","74","        assertEquals(\"make_test.t_basic_meta_t\",sr1.getName());","75","        assertTrue(!sr0.getStdout().equals(sr1.getStdout()));","76","    }"],"delete":["21","        File file = new File(SuiteResultTest.class.getResource(\"junit-report-1233.xml\").toURI());","22","        SuiteResult result = new SuiteResult(file);","31","    ","38","        File file = new File(SuiteResultTest.class.getResource(\"junit-report-1463.xml\").toURI());","39","        SuiteResult result = new SuiteResult(file);"]}]}},"196276f204d6943e45c8bde1d2aba02fcfc68c1b":{"changes":{"core\/src\/main\/java\/hudson\/util\/RobustCollectionConverter.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/RobustReflectionConverter.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/CopyOnWriteList.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/RobustCollectionConverter.java":[{"add":["37","import java.util.logging.Level;","38","import java.util.logging.Logger;","39","","40","import static java.util.logging.Level.WARNING;","88","                LOGGER.log(WARNING,\"Failed to resolve class\",e);","89","            } catch (LinkageError e) {","90","                LOGGER.log(WARNING,\"Failed to resolve class\",e);","96","    private static final Logger LOGGER = Logger.getLogger(RobustCollectionConverter.class.getName());"],"delete":["84","                System.err.println(\"failed to locate class: \"+e);"]}],"core\/src\/main\/java\/hudson\/util\/RobustReflectionConverter.java":[{"add":["53","import static java.util.logging.Level.WARNING;","54","","244","                LOGGER.log(WARNING,\"Skipping a non-existent field \"+e.getFieldName(),e);","246","                LOGGER.log(WARNING,\"Skipping a non-existend type\",e);","247","            } catch (LinkageError e) {","248","                LOGGER.log(WARNING,\"Failed to resolve a type\",e);"],"delete":["242","                LOGGER.log(Level.WARNING,\"Skipping a non-existent field \"+e.getFieldName(),e);","244","                LOGGER.log(Level.WARNING,\"Skipping a non-existend type\",e);"]}],"core\/src\/main\/java\/hudson\/util\/CopyOnWriteList.java":[{"add":["43","import static java.util.logging.Level.WARNING;","44","","188","                    LOGGER.log(WARNING,\"Failed to resolve class\",e);","189","                } catch (LinkageError e) {","190","                    LOGGER.log(WARNING,\"Failed to resolve class\",e);"],"delete":["186","                    LOGGER.log(Level.WARNING,\"Failed to resolve class\",e);"]}]}},"ae235930a9e91eb71a6c3fccb6ef87f34bbfe339":{"changes":{"core\/src\/main\/java\/hudson\/model\/Items.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Items.java":[{"add":["184","        final Jenkins jenkins = Jenkins.getInstance();","185","        ","187","        if (jenkins == null) {","188","            return r;","189","        }","190","        ","194","            if (StringUtils.isNotEmpty(fullName)) {","195","                T item = jenkins.getItem(fullName, context, type);","196","                if(item!=null)","197","                    r.add(item);","198","            }"],"delete":["184","        Jenkins hudson = Jenkins.getInstance();","185","","190","            T item = hudson.getItem(fullName, context, type);","191","            if(item!=null)","192","                r.add(item);"]}]}},"b5ed977bbca76f0ff1cd09ea9767d876e98aa64e":{"changes":{"test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/CLICommand.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":[{"add":["271","    @Test","272","    @Issue(\"JENKINS-50324\")","273","    public void userWithoutReadCanLogout() throws Exception {","274","        String userWithRead = \"userWithRead\";","275","        String userWithoutRead = \"userWithoutRead\";","276","        ","277","        File jar = tmp.newFile(\"jenkins-cli.jar\");","278","        FileUtils.copyURLToFile(j.jenkins.getJnlpJars(\"jenkins-cli.jar\").getURL(), jar);","279","        j.jenkins.setSecurityRealm(j.createDummySecurityRealm());","280","        j.jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy()","281","                .grant(Jenkins.ADMINISTER).everywhere().to(ADMIN)","282","                .grant(Jenkins.READ).everywhere().to(userWithRead)","283","                \/\/ nothing to userWithoutRead","284","        );","285","    ","286","        checkCanLogout(jar, ADMIN);","287","        checkCanLogout(jar, userWithRead);","288","        checkCanLogout(jar, userWithoutRead);","289","    }","290","    ","291","    private void checkCanLogout(File cliJar, String userLoginAndPassword) throws Exception {","292","        assertExitCode(0, false, cliJar, \"-remoting\", \"login\", \"--username\", userLoginAndPassword, \"--password\", userLoginAndPassword);","293","        assertExitCode(0, false, cliJar, \"-remoting\", \"who-am-i\");","294","        assertExitCode(0, false, cliJar, \"-remoting\", \"logout\");","295","    }","296","    "],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/CLICommand.java":[{"add":["275","            if (!(this instanceof LoginCommand || this instanceof LogoutCommand || this instanceof HelpCommand || this instanceof WhoAmICommand))"],"delete":["275","            if (!(this instanceof LoginCommand || this instanceof HelpCommand))"]}]}},"d99500ff1e75dcf91dae6de687d8214c974590cd":{"changes":{"core\/src\/main\/resources\/jenkins\/split-plugins.txt":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/split-plugins.txt":[{"add":["4","# Note that all split plugins between and including matrix-auth and jaxb incorrectly use the first"],"delete":["4","# Note that all split plugins between and including matrix-auth and jdk-tool incorrectly use the first"]}]}},"793b6826e567e20a256a6d4166031e75a185ef7a":{"changes":{"core\/src\/main\/java\/hudson\/util\/DirScanner.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/DirectoryBrowserSupportTest.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/DirScanner.java":[{"add":["53","     * <p>Note that all file paths are prefixed by the name of the root directory.","54","     * For example, when scanning a directory {@code \/tmp\/dir} containing a file {@code file},","55","     * the {@code relativePath} sent to the {@link FileVisitor} will be {@code dir\/file}.","76","     * Scans by filtering things out from {@link FileFilter}.","77","     * <p>An initial basename is prepended as with {@link Full}.","96","     * <p>An initial basename is prepended as with {@link Full} <strong>if the includes and excludes are blank<\/strong>.","97","     * Otherwise there is no prepended path. So for example when scanning a directory {@code \/tmp\/dir} containing a file {@code file},","98","     * the {@code relativePath} sent to the {@link FileVisitor} will be {@code dir\/file} if {@code includes} is blank","99","     * but {@code file} if it is {@code **}. (This anomaly is historical.)"],"delete":["73","     * Scans by filtering things out from {@link FileFilter}"]}],"test\/src\/test\/java\/hudson\/model\/DirectoryBrowserSupportTest.java":[{"add":["161","        InputStream is = readzip.getInputStream(readzip.getEntry(\"archive\/artifact.out\"));"],"delete":["161","        InputStream is = readzip.getInputStream(readzip.getEntry(\"artifact.out\"));"]}],"changelog.html":[{"add":["60","  <li class=bug>","61","    1.534 made ZIP downloads of artifacts work again, but missing a base directory inside the ZIP.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19947\">issue 19947<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":[{"add":["343","            String relativePath;","344","            if (glob.length() == 0) {","345","                \/\/ JENKINS-19947: traditional behavior is to prepend the directory name","346","                relativePath = dir.getName() + '\/' + n;","347","            } else {","348","                relativePath = n;","349","            }","350","            ZipEntry e = new ZipEntry(relativePath);"],"delete":["343","            ZipEntry e = new ZipEntry(n);"]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["394","     *      works like {@link #createZipArchive(OutputStream)}, inserting a top-level directory into the ZIP."],"delete":["394","     *      works like {@link #createZipArchive(OutputStream)}"]}]}},"f6ef70a8d40ae66eb5079ac102d6cd4923f4d648":{"changes":{"test\/src\/test\/java\/hudson\/cli\/CLITest.java":"MODIFY","test\/src\/test\/resources\/hudson\/cli\/huge-stdin.txt":"ADD","cli\/src\/main\/java\/hudson\/cli\/CLI.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/CLITest.java":[{"add":["257","","258","    @Test","259","    @Issue(\"JENKINS-54310\")","260","    public void readInputAtOnce() throws Exception {","261","        home = tempHome();","262","        grabCliJar();","263","","264","        try (ByteArrayOutputStream baos = new ByteArrayOutputStream();) {","265","            int ret = new Launcher.LocalLauncher(StreamTaskListener.fromStderr())","266","                    .launch()","267","                    .cmds(\"java\",","268","                            \"-Duser.home=\" + home,","269","                            \"-jar\", jar.getAbsolutePath(),","270","                            \"-s\", r.getURL().toString(),","271","                            \"list-plugins\") \/\/ This CLI Command needs -auth option, so when we omit it, the CLI stops before reading the input.","272","                    .stdout(baos)","273","                    .stderr(baos)","274","                    .stdin(CLITest.class.getResourceAsStream(\"huge-stdin.txt\"))","275","                    .join();","276","            assertThat(baos.toString(), not(containsString(\"java.io.IOException: Stream is closed\")));","277","            assertEquals(0, ret);","278","        }","279","    }","280",""],"delete":[]}],"test\/src\/test\/resources\/hudson\/cli\/huge-stdin.txt":[{"add":[],"delete":[]}],"cli\/src\/main\/java\/hudson\/cli\/CLI.java":[{"add":["711","                        final OutputStream stdin = connection.streamStdin();","713","                        while (!connection.complete && (c = System.in.read()) != -1) {"],"delete":["707","            final OutputStream stdin = connection.streamStdin();","713","                        while ((c = System.in.read()) != -1) { \/\/ TODO use InputStream.available"]}]}},"5a6ddd4fa632a25ad172183e9e4ae95ec579d1ab":{"changes":{"test\/src\/test\/java\/hudson\/scm\/SubversionSCMTest.java":"MODIFY","core\/src\/main\/java\/hudson\/scm\/SubversionTagAction.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/scm\/SubversionSCMTest.java":[{"add":["2","import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;","3","import com.gargoylesoftware.htmlunit.html.HtmlAnchor;","4","import com.gargoylesoftware.htmlunit.html.HtmlButton;","5","import com.gargoylesoftware.htmlunit.html.HtmlForm;","6","import com.gargoylesoftware.htmlunit.html.HtmlPage;","10","import org.dom4j.Document;","11","import org.dom4j.io.DOMReader;","25","    @Bug(2380)","42","        WebClient wc = new WebClient();","43","        HtmlPage html = wc.getPage(b);","44","","45","        \/\/ make sure there's no link to the 'tag this build'","46","        Document dom = new DOMReader().read(html);","47","        assertNull(dom.selectSingleNode(\"\/\/A[text()='Tag this build']\"));","48","        for( HtmlAnchor a : html.getAnchors() )","49","            assertFalse(a.getHrefAttribute().contains(\"\/tagBuild\/\"));","50","","51","        \/\/ and that tagging would fail","52","        html = wc.getPage(b,\"tagBuild\/\");","53","        HtmlForm form = html.getFormByName(\"tag\");","54","        try {","55","            form.submit((HtmlButton)last(form.getHtmlElementsByTagName(\"button\")));","56","            fail(\"should have been denied\");","57","        } catch (FailingHttpStatusCodeException e) {","58","            \/\/ make sure the request is denied","59","            assertEquals(e.getResponse().getStatusCode(),403);","60","        }","61","","62","        \/\/ now login as alice and make sure that the tagging would succeed","63","        wc = new WebClient();","64","        wc.login(\"alice\",\"alice\");","65","        html = wc.getPage(b,\"tagBuild\/\");","66","        form = html.getFormByName(\"tag\");","67","        form.submit((HtmlButton)last(form.getHtmlElementsByTagName(\"button\")));"],"delete":["18","    @Bug(-1) \/\/ TODO","35","        \/\/ TODO: test permission"]}],"core\/src\/main\/java\/hudson\/scm\/SubversionTagAction.java":[{"add":["53","    \/**","54","     * Was any tag created by the user already?","55","     *\/","56","    public boolean hasTags() {","57","        for (Entry<SvnInfo, List<String>> e : tags.entrySet())","58","            if(!e.getValue().isEmpty())","59","                return true;","60","        return false;","61","    }","62","","64","        if(!hasTags() && !getACL().hasPermission(getPermission()))"],"delete":["54","        if(tags==null && !Hudson.isAdmin())"]}]}},"7ed6e6e53d53e2ade01bd769e0ff8bba98e2d972":{"changes":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":[{"add":["59","","60","            \/\/ record POM","66","            \/\/ record artifacts","67","            record(build,pom.getArtifact(),listener,archivedFiles,true);","68","            for( Object a : pom.getAttachedArtifacts() )","69","                record(build,(Artifact)a,listener,archivedFiles,false);","71","            final boolean installed = this.installed;","72","            final boolean builtOnSlave = archivedPom.isRemote();","74","            if(!archivedFiles.isEmpty()) {","75","                build.execute(new BuildCallable<Void,IOException>() {","76","                    public Void call(MavenBuild build) throws IOException, InterruptedException {","77","                        \/\/ record fingerprints","78","                        FingerprintMap map = Hudson.getInstance().getFingerprintMap();","79","                        for (ArtifactInfo a : archivedFiles)","80","                            map.getOrCreate(build, a.path.getName(), a.path.digest());","82","                        \/\/ install files on the master","83","                        if(installed && builtOnSlave) {","84","                            try {","85","                                MavenEmbedder embedder = MavenUtil.createEmbedder(listener);","86","                                ArtifactInstaller installer = (ArtifactInstaller) embedder.getContainer().lookup(ArtifactInstaller.class.getName());","87","                                ArtifactFactory factory = (ArtifactFactory) embedder.getContainer().lookup(ArtifactFactory.class.getName());","88","                                for (ArtifactInfo a : archivedFiles) {","89","                                    Artifact artifact = a.toArtifact(factory);","90","                                    if(a.isPrimary)","91","                                        artifact.addMetadata( new ProjectArtifactMetadata( artifact, new File(archivedPom.getRemote()) ) );","92","                                    installer.install(new File(a.path.getRemote()), artifact,embedder.getLocalRepository());","93","                                }","94","                                embedder.stop();","95","                            } catch (MavenEmbedderException e) {","96","                                e.printStackTrace(listener.error(\"Failed to install artifact to the master\"));","97","                                build.setResult(Result.FAILURE);","98","                            } catch (ComponentLookupException e) {","99","                                e.printStackTrace(listener.error(\"Failed to install artifact to the master\"));","100","                                build.setResult(Result.FAILURE);","101","                            } catch (ArtifactInstallationException e) {","102","                                e.printStackTrace(listener.error(\"Failed to install artifact to the master\"));","103","                                build.setResult(Result.FAILURE);","107","                        return null;","108","                    }","109","                });","110","            }"],"delete":["58","        \/\/ record POM","64","        }","66","        \/\/ record artifacts","67","        record(build,pom.getArtifact(),listener,archivedFiles,true);","68","        for( Object a : pom.getAttachedArtifacts() )","69","            record(build,(Artifact)a,listener,archivedFiles,false);","71","        final boolean installed = this.installed;","72","        final boolean builtOnSlave = archivedPom.isRemote();","74","        if(!archivedFiles.isEmpty()) {","75","            build.execute(new BuildCallable<Void,IOException>() {","76","                public Void call(MavenBuild build) throws IOException, InterruptedException {","77","                    \/\/ record fingerprints","78","                    FingerprintMap map = Hudson.getInstance().getFingerprintMap();","79","                    for (ArtifactInfo a : archivedFiles)","80","                        map.getOrCreate(build, a.path.getName(), a.path.digest());","82","                    \/\/ install files on the master","83","                    if(installed && builtOnSlave) {","84","                        try {","85","                            MavenEmbedder embedder = MavenUtil.createEmbedder(listener);","86","                            ArtifactInstaller installer = (ArtifactInstaller) embedder.getContainer().lookup(ArtifactInstaller.class.getName());","87","                            ArtifactFactory factory = (ArtifactFactory) embedder.getContainer().lookup(ArtifactFactory.class.getName());","88","                            for (ArtifactInfo a : archivedFiles) {","89","                                Artifact artifact = a.toArtifact(factory);","90","                                if(a.isPrimary)","91","                                    artifact.addMetadata( new ProjectArtifactMetadata( artifact, new File(archivedPom.getRemote()) ) );","92","                                installer.install(new File(a.path.getRemote()), artifact,embedder.getLocalRepository());","94","                            embedder.stop();","95","                        } catch (MavenEmbedderException e) {","96","                            e.printStackTrace(listener.error(\"Failed to install artifact to the master\"));","97","                            build.setResult(Result.FAILURE);","98","                        } catch (ComponentLookupException e) {","99","                            e.printStackTrace(listener.error(\"Failed to install artifact to the master\"));","100","                            build.setResult(Result.FAILURE);","101","                        } catch (ArtifactInstallationException e) {","102","                            e.printStackTrace(listener.error(\"Failed to install artifact to the master\"));","103","                            build.setResult(Result.FAILURE);","105","                    }","107","                    return null;","108","                }","109","            });"]}]}},"81178a3b434afc02e3631ee51f9f3453e748e46b":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Cause\/UpstreamCause\/description.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Cause\/UpstreamCause\/description.jelly":[{"add":["25","    <p>${h.ifThenElse(it.upstreamUrl!=null,\"%started_by_project(it.upstreamProject,it.upstreamBuild.toString(),it.upstreamUrl,rootURL)\",it.shortDescription)}<\/p>"],"delete":["25","    <p>${h.ifThenElse(it.upstreamUrl!=null,\"%started_by_project(it.upstreamProject,it.upstreamBuild,it.upstreamUrl,rootURL)\",it.shortDescription)}<\/p>"]}]}},"ca99a8f713ac22e0e227760bb88dea5c9cd7ec01":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["322","            JDK jdk = getParent().getParent().getJDK();","323","            if(jdk==null)","324","                args.add(\"java\");","325","            else","326","                args.add(jdk.getJavaHome()+\"\/bin\/java\");"],"delete":["322","            args.add(\"java\");"]}]}},"638ceb2316df86e724e537cd7ed0b5e4f263e315":{"changes":{"core\/src\/main\/resources\/jenkins\/widgets\/BuildQueueWidget\/index.groovy":"MODIFY","core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/ComputerSet\/sidepanel.jelly":"MODIFY","core\/src\/main\/java\/hudson\/widgets\/BuildHistoryWidget.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/ajaxBuildQueue.jelly":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/queue.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/widgets\/BuildQueueWidget\/index.groovy":[{"add":["4","t.queue(items:view.queueItems, it:view, filtered:view.filterQueue)"],"delete":["4","t.queue(items:view.approximateQueueItemsQuickly, it:view, filtered:view.filterQueue)"]}],"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["482","    \/**","483","     * @deprecated Use {@link #getQueueItems()}. As of 1.607 the approximation is no longer needed.","484","     * @return The items in the queue.","485","     *\/","486","    @Deprecated"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/ComputerSet\/sidepanel.jelly":[{"add":["38","    <t:queue items=\"${app.queue.items}\" \/>"],"delete":["38","    <t:queue items=\"${app.queue.approximateItemsQuickly}\" \/>"]}],"core\/src\/main\/java\/hudson\/widgets\/BuildHistoryWidget.java":[{"add":["65","        for (Item item : Jenkins.getInstance().getQueue().getItems()) {"],"delete":["65","        for (Item item : Jenkins.getInstance().getQueue().getApproximateItemsQuickly()) {"]}],"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["406","            throw (AssertionError) new AssertionError(r.jenkins.getQueue().getItems().toString()).initCause(x);"],"delete":["406","            throw (AssertionError) new AssertionError(r.jenkins.getQueue().getApproximateItemsQuickly().toString()).initCause(x);"]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["824","     * @deprecated Use {@link #getItems()} directly. As of 1.607 the approximation is no longer needed.","826","    @Deprecated","828","        return Arrays.asList(getItems());"],"delete":["174","     * Defines the refresh period for of the internal cache ({@link #itemsView}).","175","     * Data should be defined in milliseconds, default value - 1000;","176","     * @since 1.577","177","     *\/","178","    private static int CACHE_REFRESH_PERIOD = Integer.getInteger(Queue.class.getName() + \".cacheRefreshPeriod\", 1000);","179","","180","    \/**","220","    private final CachedItemList itemsView = new CachedItemList();","221","","222","    \/**","223","     * Maintains a copy of {@link Queue#getItems()}","224","     *","225","     * @see Queue#getApproximateItemsQuickly()","226","     *\/","227","    private class CachedItemList {","228","        \/**","229","         * The current cached value.","230","         *\/","231","        @CopyOnWrite","232","        private volatile List<Item> itemsView = Collections.emptyList();","233","        \/**","234","         * When does the cache info expire?","235","         *\/","236","        private final AtomicLong expires = new AtomicLong();","237","","238","        List<Item> get() {","239","            long t = System.currentTimeMillis();","240","            long d = expires.get();","241","            if (t>d) {\/\/ need to refresh the cache","242","                long next = t+CACHE_REFRESH_PERIOD;","243","                if (expires.compareAndSet(d,next)) {","244","                    \/\/ avoid concurrent cache update via CAS.","245","                    \/\/ if the getItems() lock is contended,","246","                    \/\/ some threads will end up serving stale data,","247","                    \/\/ but that's OK.","248","                    itemsView = ImmutableList.copyOf(getItems());","249","                }","250","            }","251","            return itemsView;","252","        }","253","    }","254","","868","        return itemsView.get();"]}],"core\/src\/main\/resources\/hudson\/model\/View\/ajaxBuildQueue.jelly":[{"add":["30","    <t:queue items=\"${it.queueItems}\" filtered=\"${it.isFilterQueue()}\" \/>"],"delete":["30","    <t:queue items=\"${it.approximateQueueItemsQuickly}\" filtered=\"${it.isFilterQueue()}\" \/>"]}],"core\/src\/main\/resources\/lib\/hudson\/queue.jelly":[{"add":["30","      Queue items to be displayed. Normally you should specify ${app.queue.items},"],"delete":["30","      Queue items to be displayed. Normally you should specify ${app.queue.approximateItemsQuickly},"]}]}},"583b3d3789f26cd7e90673d9d8c9ff1564ca54e0":{"changes":{"core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":[{"add":["36","import org.acegisecurity.GrantedAuthority;","41","import org.acegisecurity.userdetails.ldap.LdapUserDetailsImpl;","47","import org.acegisecurity.providers.ldap.LdapAuthoritiesPopulator;","340","                final LdapUserSearch ldapSearch = findBean(LdapUserSearch.class, appContext);","341","                final LdapAuthoritiesPopulator authoritiesPopulator = findBean(LdapAuthoritiesPopulator.class, appContext);","344","                        LdapUserDetails ldapUser = ldapSearch.searchForUser(username);","345","                        \/\/ LdapUserSearch does not populate granted authorities (group search).","346","                        \/\/ Add those, as done in LdapAuthenticationProvider.createUserDetails().","347","                        if (ldapUser != null) {","348","                            LdapUserDetailsImpl.Essence user = new LdapUserDetailsImpl.Essence(ldapUser);","349","                            GrantedAuthority[] extraAuthorities = authoritiesPopulator.getGrantedAuthorities(ldapUser);","350","                            for (int i = 0; i < extraAuthorities.length; i++) {","351","                                user.addAuthority(extraAuthorities[i]);","352","                            }","353","                            ldapUser = user.createUserDetails();","354","                        }","355","                        return ldapUser;","440","                            error(\"Syntax of server field is SERVER or SERVER:PORT or ldaps:\/\/SERVER[:PORT]\");"],"delete":["337","                final LdapUserSearch ldapSerach = findBean(LdapUserSearch.class, appContext);","340","                        return ldapSerach.searchForUser(username);","423","\/\/update to allow ldap:\/\/ or ldaps:\/\/ prefix  (issue #2599)","426","                            error(\"Syntax of this field is SERVER or SERVER:PORT or ldaps:\/\/SERVER[:PORT]\");"]}]}},"5b4440a2b89bc0ee782c6e6b0b9b3ea08f7eecae":{"changes":{"core\/src\/main\/java\/hudson\/util\/RunList.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/RunList.java":[{"add":["261","     * Filter the list to completed builds.","263","     * @since 1.561","265","    public RunList<R> completedOnly() {","268","                return !r.isBuilding();"],"delete":["261","     * Filter the list to completed builds above threshold.","263","     * @since 1.545","265","    public RunList<R> overThresholdAndCompletedOnly(final Result threshold) {","268","                return (!r.isBuilding() && r.getResult() != null && r.getResult().isBetterOrEqualTo(threshold));"]}],"core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":[{"add":["124","                return getProject().getBuilds().overThresholdOnly(Result.ABORTED).completedOnly();","126","                return getProject().getBuilds().overThresholdOnly(Result.UNSTABLE).completedOnly();","128","                return getProject().getBuilds().overThresholdOnly(Result.SUCCESS).completedOnly();"],"delete":["124","                return getProject().getBuilds().overThresholdAndCompletedOnly(Result.ABORTED);","126","                return getProject().getBuilds().overThresholdAndCompletedOnly(Result.UNSTABLE);","128","                return getProject().getBuilds().overThresholdAndCompletedOnly(Result.SUCCESS);"]}]}},"ef588be4f264b5ba285110f472f031e2bd771c71":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["183","        <version>3.3<\/version>"],"delete":["183","        <version>3.2<\/version>"]}]}},"4af38ea795aaeeacc5db851d872555be5af006be":{"changes":{"test\/src\/test\/java\/hudson\/model\/RSSTest.java":"ADD","core\/src\/main\/resources\/hudson\/atom.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/rss20.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/RSS.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/RSSTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/atom.jelly":[{"add":["30","      <link rel=\"alternate\" type=\"text\/html\" href=\"${app.rootUrl}${url}\"\/>","48","          <link rel=\"alternate\" type=\"text\/html\" href=\"${app.rootUrl}${h.encode(adapter.getEntryUrl(e))}\"\/>"],"delete":["30","      <link rel=\"alternate\" type=\"text\/html\" href=\"${rootURL}${url}\"\/>","48","          <link rel=\"alternate\" type=\"text\/html\" href=\"${rootURL}${h.encode(adapter.getEntryUrl(e))}\"\/>"]}],"core\/src\/main\/resources\/hudson\/rss20.jelly":[{"add":["31","        <link>${app.rootUrl}${url}<\/link>","37","            <link>${app.rootUrl}${h.encode(adapter.getEntryUrl(e))}<\/link>"],"delete":["31","        <link>${rootURL}${url}<\/link>","37","            <link>${rootURL}${h.encode(adapter.getEntryUrl(e))}<\/link>"]}],"core\/src\/main\/java\/hudson\/model\/RSS.java":[{"add":[],"delete":["79","        req.setAttribute(\"rootURL\", Jenkins.get().getRootUrl());"]}]}},"de9002b3985cfa11971bf51137179464d6b0fa20":{"changes":{"core\/src\/main\/java\/hudson\/model\/AutoCompletionCandidates.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/RunParameterDefinitionTest.java":"ADD","core\/src\/main\/resources\/hudson\/model\/RunParameterDefinition\/config.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AutoCompletionCandidates.java":[{"add":["38","import javax.annotation.CheckForNull;","89","    public static <T extends Item> AutoCompletionCandidates ofJobNames(final Class<T> type, final String value, @CheckForNull Item self, ItemGroup container) {"],"delete":["88","    public static <T extends Item> AutoCompletionCandidates ofJobNames(final Class<T> type, final String value, Item self, ItemGroup container) {"]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["2029","        return project.getFullName() + \"#\" + getNumber();","2040","        Job<?,?> job = Jenkins.getInstance().getItemByFullName(jobName, Job.class);"],"delete":["103","import org.apache.commons.io.input.NullInputStream;","2030","        return project.getName() + \"#\" + getNumber();","2041","        Job<?,?> job = (Job<?,?>) Jenkins.getInstance().getItem(jobName);"]}],"changelog.html":[{"add":["60","  <li class=bug>","61","    Run parameters do not support folders.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16462\">issue 16462<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":[{"add":["32","import org.kohsuke.stapler.QueryParameter;","68","        return Jenkins.getInstance().getItemByFullName(projectName, Job.class);","87","        ","88","        public AutoCompletionCandidates doAutoCompleteProjectName(@QueryParameter String value) {","89","            return AutoCompletionCandidates.ofJobNames(Job.class, value, null, Jenkins.getInstance());","90","        }","91",""],"delete":["67","        return (Job) Jenkins.getInstance().getItem(projectName);"]}],"test\/src\/test\/java\/hudson\/model\/RunParameterDefinitionTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/RunParameterDefinition\/config.jelly":[{"add":["32","            <f:textbox name=\"parameter.projectName\" value=\"${instance.projectName}\" autoCompleteField=\"projectName\"\/>"],"delete":["32","        <select name=\"parameter.projectName\">","33","          <j:forEach var=\"project\" items=\"${app.items}\">","34","            <f:option selected=\"${instance.project==project}\">${project.displayName}<\/f:option>","35","          <\/j:forEach>","36","        <\/select>"]}]}},"90432b56e9c04893b44cf45bd336db98746c40aa":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["326","table.pane > tbody > tr > td:last-child {","327","  border-right: 1px #bbb solid;","328","}"],"delete":[]}]}},"92147c3597308bc05e6448ccc41409fcc7c05fd7":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/AbstractCloudSlave.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/NodeProvisioner.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Nodes.java":"ADD","core\/src\/main\/java\/jenkins\/util\/AtmostOneTaskExecutor.java":"MODIFY","core\/src\/main\/java\/hudson\/Functions.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ResourceController.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Node.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractCIBase.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/executors.jelly":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/RetentionStrategy.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/ComputerRetentionWork.java":"MODIFY","core\/src\/main\/resources\/lib\/layout\/layout.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/AbstractCloudSlave.java":[{"add":["25","import hudson.model.Computer;","60","        final Computer computer = toComputer();","61","        if (computer != null) {","62","            computer.recordTermination();","63","        }"],"delete":[]}],"core\/src\/main\/java\/hudson\/slaves\/NodeProvisioner.java":[{"add":["37","import java.util.concurrent.Callable;","45","import java.util.concurrent.locks.Lock;","46","import java.util.concurrent.locks.ReadWriteLock;","47","import java.util.concurrent.locks.ReentrantLock;","48","import java.util.concurrent.locks.ReentrantReadWriteLock;","127","    @GuardedBy(\"#provisioningLock\")","130","    private final Lock provisioningLock = new ReentrantLock();","131","","132","    @GuardedBy(\"#provisioningLock\")","133","    private StrategyState provisioningState = null;","134","","160","        provisioningLock.lock();","161","        try {","163","        } finally {","164","            provisioningLock.unlock();","189","    private void update() {","190","        provisioningLock.lock();","191","        try {","192","            lastSuggestedReview = System.currentTimeMillis();","193","            Queue.withLock(new Runnable() {","194","                @Override","195","                public void run() {","196","                    Jenkins jenkins = Jenkins.getInstance();","197","                    \/\/ clean up the cancelled launch activity, then count the # of executors that we are about to","198","                    \/\/ bring up.","200","                    int plannedCapacitySnapshot = 0;","201","                    List<PlannedNode> completedLaunches = new ArrayList<PlannedNode>();","203","                    for (Iterator<PlannedNode> itr = pendingLaunches.iterator(); itr.hasNext(); ) {","204","                        PlannedNode f = itr.next();","205","                        if (f.future.isDone()) {","206","                            completedLaunches.add(f);","207","                            itr.remove();","208","                        } else {","209","                            plannedCapacitySnapshot += f.numExecutors;","210","                        }","211","                    }","212","","213","                    for (PlannedNode f : completedLaunches) {","214","                        try {","215","                            Node node = f.future.get();","216","                            for (CloudProvisioningListener cl : CloudProvisioningListener.all()) {","217","                                cl.onComplete(f, node);","218","                            }","219","","220","                            jenkins.addNode(node);","221","                            LOGGER.log(Level.INFO,","222","                                    \"{0} provisioning successfully completed. We have now {1,number,integer} computer\"","223","                                            + \"(s)\",","224","                                    new Object[]{f.displayName, jenkins.getComputers().length});","225","                        } catch (InterruptedException e) {","226","                            throw new AssertionError(e); \/\/ since we confirmed that the future is already done","227","                        } catch (ExecutionException e) {","228","                            LOGGER.log(Level.WARNING, \"Provisioned slave \" + f.displayName + \" failed to launch\",","229","                                    e.getCause());","230","                            for (CloudProvisioningListener cl : CloudProvisioningListener.all()) {","231","                                cl.onFailure(f, e.getCause());","232","                            }","233","                        } catch (IOException e) {","234","                            LOGGER.log(Level.WARNING, \"Provisioned slave \" + f.displayName + \" failed to launch\", e);","235","                            for (CloudProvisioningListener cl : CloudProvisioningListener.all()) {","236","                                cl.onFailure(f, e);","237","                            }","238","                        }","239","","240","                        f.spent();","241","                    }","242","","243","                    float plannedCapacity = plannedCapacitySnapshot;","244","                    plannedCapacitiesEMA.update(plannedCapacity);","245","","246","                    int idleSnapshot = stat.computeIdleExecutors();","247","                    int queueLengthSnapshot = stat.computeQueueLength();","248","","249","                    if (queueLengthSnapshot <= idleSnapshot) {","250","                        LOGGER.log(Level.FINE,","251","                                \"Queue length {0} is less than the idle capacity {1}. No provisioning strategy \"","252","                                        + \"required\",","253","                                new Object[]{queueLengthSnapshot, idleSnapshot});","254","                        provisioningState = null;","255","                    } else {","256","                        provisioningState = new StrategyState(queueLengthSnapshot, label, idleSnapshot,","257","                                stat.computeTotalExecutors(),","258","                                plannedCapacitySnapshot);","259","                    }","260","                }","261","            });","262","","263","            if (provisioningState != null) {","264","                List<Strategy> strategies = Jenkins.getInstance().getExtensionList(Strategy.class);","265","                for (Strategy strategy : strategies.isEmpty()","266","                        ? Arrays.<Strategy>asList(new StandardStrategyImpl())","267","                        : strategies) {","268","                    LOGGER.log(Level.FINER, \"Consulting {0} provisioning strategy with state {1}\",","269","                            new Object[]{strategy, provisioningState});","270","                    if (StrategyDecision.PROVISIONING_COMPLETED == strategy.apply(provisioningState)) {","271","                        LOGGER.log(Level.FINER, \"Provisioning strategy {0} declared provisioning complete\",","272","                                strategy);","273","                        break;","274","                    }","277","        } finally {","278","            provisioningLock.unlock();","415","        public int getAdditionalPlannedCapacity() {","416","            provisioningLock.lock();","417","            try {","418","                return additionalPlannedCapacity;","419","            } finally {","420","                provisioningLock.unlock();","421","            }","487","            provisioningLock.lock();","488","            try {","490","                if (additionalPlannedCapacity > 0) {","491","                        this.additionalPlannedCapacity += additionalPlannedCapacity;","493","            } finally {","494","                provisioningLock.unlock();"],"delete":["122","    @GuardedBy(\"self\")","150","        synchronized (pendingLaunches) {","176","    private synchronized void update() {","177","        Jenkins jenkins = Jenkins.getInstance();","178","        lastSuggestedReview = System.currentTimeMillis();","180","        \/\/ clean up the cancelled launch activity, then count the # of executors that we are about to bring up.","181","        int plannedCapacitySnapshot = 0;","182","        List<PlannedNode> completedLaunches = new ArrayList<PlannedNode>();","184","        synchronized (pendingLaunches) {","185","            for (Iterator<PlannedNode> itr = pendingLaunches.iterator(); itr.hasNext(); ) {","186","                PlannedNode f = itr.next();","187","                if (f.future.isDone()) {","188","                    completedLaunches.add(f);","189","                    itr.remove();","190","                } else {","191","                    plannedCapacitySnapshot += f.numExecutors;","194","        }","195","","196","        for (PlannedNode f : completedLaunches) {","197","            try {","198","                Node node = f.future.get();","199","                for (CloudProvisioningListener cl : CloudProvisioningListener.all()) {","200","                    cl.onComplete(f, node);","201","                }","202","","203","                jenkins.addNode(node);","204","                LOGGER.log(Level.INFO,","205","                        \"{0} provisioning successfully completed. We have now {1,number,integer} computer(s)\",","206","                        new Object[]{f.displayName, jenkins.getComputers().length});","207","            } catch (InterruptedException e) {","208","                throw new AssertionError(e); \/\/ since we confirmed that the future is already done","209","            } catch (ExecutionException e) {","210","                LOGGER.log(Level.WARNING, \"Provisioned slave \" + f.displayName + \" failed to launch\", e.getCause());","211","                for (CloudProvisioningListener cl : CloudProvisioningListener.all()) {","212","                    cl.onFailure(f, e.getCause());","213","                }","214","            } catch (IOException e) {","215","                LOGGER.log(Level.WARNING, \"Provisioned slave \" + f.displayName + \" failed to launch\", e);","216","                for (CloudProvisioningListener cl : CloudProvisioningListener.all()) {","217","                    cl.onFailure(f, e);","218","                }","219","            }","220","","221","            f.spent();","222","        }","223","","224","        float plannedCapacity = plannedCapacitySnapshot;","225","        plannedCapacitiesEMA.update(plannedCapacity);","226","","227","        int idleSnapshot = stat.computeIdleExecutors();","228","        int queueLengthSnapshot = stat.computeQueueLength();","229","","230","        if (queueLengthSnapshot <= idleSnapshot) {","231","            LOGGER.log(Level.FINE,","232","                    \"Queue length {0} is less than the idle capacity {1}. No provisioning strategy required\",","233","                    new Object[]{queueLengthSnapshot, idleSnapshot});","234","        } else {","235","            StrategyState state =","236","                    new StrategyState(queueLengthSnapshot, label, idleSnapshot, stat.computeTotalExecutors(),","237","                            plannedCapacitySnapshot);","238","            List<Strategy> strategies = Jenkins.getInstance().getExtensionList(Strategy.class);","239","            for (Strategy strategy : strategies.isEmpty()","240","                    ? Arrays.<Strategy>asList(new StandardStrategyImpl())","241","                    : strategies) {","242","                LOGGER.log(Level.FINER, \"Consulting {0} provisioning strategy with state {1}\",","243","                        new Object[]{strategy, state});","244","                if (StrategyDecision.PROVISIONING_COMPLETED == strategy.apply(state)) {","245","                    LOGGER.log(Level.FINER, \"Provisioning strategy {0} declared provisioning complete\",","246","                            strategy);","247","                    break;","248","                }","249","            }","386","        public synchronized int getAdditionalPlannedCapacity() {","387","            return additionalPlannedCapacity;","453","            synchronized (pendingLaunches) {","455","            }","456","            if (additionalPlannedCapacity > 0) {","457","                synchronized (this) {","458","                    this.additionalPlannedCapacity += additionalPlannedCapacity;"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["651","    protected void setNode(final Node node) {","659","            if (node instanceof Slave) {","660","                Queue.withLock(new Runnable() {","661","                    @Override","662","                    public void run() {","663","                        ((Slave)node).getRetentionStrategy().check(SlaveComputer.this);","664","                    }","665","                });","666","            } else {","668","            }"],"delete":["651","    protected void setNode(Node node) {","659","            if (node instanceof Slave)","660","                ((Slave)node).getRetentionStrategy().check(this);","661","            else"]}],"core\/src\/main\/java\/jenkins\/model\/Nodes.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/util\/AtmostOneTaskExecutor.java":[{"add":["4","import hudson.util.DaemonThreadFactory;","5","import hudson.util.NamingThreadFactory;","67","        this(new AtmostOneThreadExecutor(new NamingThreadFactory(","68","                        new DaemonThreadFactory(),","69","                        String.format(\"AtmostOneTaskExecutor[%s]\", task)","70","                )),","71","                task","72","        );"],"delete":["65","        this(new AtmostOneThreadExecutor(),task);"]}],"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["30","import hudson.init.InitMilestone;","204","","205","    public static boolean isExtensionsAvailable() {","206","        final Jenkins jenkins = Jenkins.getInstance();","207","        return jenkins == null ? false : jenkins.getInitLevel().compareTo(InitMilestone.EXTENSIONS_AUGMENTED) >= 0;","208","    }","209",""],"delete":["203","    "]}],"core\/src\/main\/java\/hudson\/model\/ResourceController.java":[{"add":["31","import java.util.concurrent.Callable;","77","    public void execute(@Nonnull Runnable task, final ResourceActivity activity ) throws InterruptedException {","78","        final ResourceList resources = activity.getResourceList();","79","        _withLock(new Runnable() {","80","            @Override","81","            public void run() {","82","                while(inUse.isCollidingWith(resources))","83","                    try {","84","                        \/\/ TODO revalidate the resource list after re-acquiring lock, for now we just let the build fail","85","                        _await();","86","                    } catch (InterruptedException e) {","87","                        throw new RuntimeException(e);","88","                    }","90","                \/\/ we have a go","91","                inProgress.add(activity);","92","                inUse = ResourceList.union(inUse,resources);","93","            }","94","        });","99","            _withLock(new Runnable() {","100","                @Override","101","                public void run() {","102","                    inProgress.remove(activity);","103","                    inUse = ResourceList.union(resourceView);","104","                    _signalAll();","105","                }","106","            });","119","    public boolean canRun(final ResourceList resources) {","120","        try {","121","            return _withLock(new Callable<Boolean>() {","122","                @Override","123","                public Boolean call() {","124","                    return !inUse.isCollidingWith(resources);","125","                }","126","            });","127","        } catch (Exception e) {","128","            throw new IllegalStateException(\"Inner callable does not throw exception\");","129","        }","140","    public Resource getMissingResource(final ResourceList resources) {","141","        try {","142","            return _withLock(new Callable<Resource>() {","143","                @Override","144","                public Resource call() {","145","                    return resources.getConflict(inUse);","146","                }","147","            });","148","        } catch (Exception e) {","149","            throw new IllegalStateException(\"Inner callable does not throw exception\");","150","        }","165","","166","    protected void _await() throws InterruptedException {","167","        wait();","168","    }","169","","170","    protected void _signalAll() {","171","        notifyAll();","172","    }","173","","174","    protected void _withLock(Runnable runnable) {","175","        synchronized (this) {","176","            runnable.run();","177","        }","178","    }","179","","180","    protected <V> V _withLock(java.util.concurrent.Callable<V> callable) throws Exception {","181","        synchronized (this) {","182","            return callable.call();","183","        }","184","    }"],"delete":["76","    public void execute(@Nonnull Runnable task, ResourceActivity activity ) throws InterruptedException {","77","        ResourceList resources = activity.getResourceList();","78","        synchronized(this) {","79","            while(inUse.isCollidingWith(resources))","80","                wait();","82","            \/\/ we have a go","83","            inProgress.add(activity);","84","            inUse = ResourceList.union(inUse,resources);","85","        }","90","            synchronized(this) {","91","                inProgress.remove(activity);","92","                inUse = ResourceList.union(resourceView);","93","                notifyAll();","94","            }","107","    public synchronized boolean canRun(ResourceList resources) {","108","        return !inUse.isCollidingWith(resources);","119","    public synchronized Resource getMissingResource(ResourceList resources) {","120","        return resources.getConflict(inUse);"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["178","    private transient final List<RuntimeException> terminatedBy = Collections.synchronizedList(new ArrayList","179","            <RuntimeException>());","180","","181","    public void recordTermination() {","182","        try {","183","            throw new RuntimeException(String.format(\"Termination requested by %s\", Thread.currentThread()));","184","        } catch (RuntimeException e) {","185","            terminatedBy.add(e);","186","        }","187","    }","188","","189","    public List<RuntimeException> getTerminatedBy() {","190","        return new ArrayList<RuntimeException>(terminatedBy);","191","    }","192","","421","        recordTermination();","437","        recordTermination();","827","    public List<DisplayExecutor> getDisplayExecutors() {","828","        List<DisplayExecutor> result = new ArrayList<DisplayExecutor>(executors.size()+oneOffExecutors.size());","829","        int index = 0;","830","        for (Executor e: executors) {","831","            result.add(new DisplayExecutor(Integer.toString(index+1), String.format(\"executors\/%d\", index), e));","832","            index++;","833","        }","834","        index = 0;","835","        for (OneOffExecutor e: oneOffExecutors) {","836","            result.add(new DisplayExecutor(\"\", String.format(\"oneOffExecutors\/%d\", index), e));","837","            index++;","838","        }","839","        return result;","840","    }","841","","901","    \/*package*\/ void removeExecutor(final Executor e) {","902","        Queue.withLock(new Runnable() {","903","            @Override","904","            public void run() {","905","                synchronized (Computer.this) {","906","                    executors.remove(e);","907","                    addNewExecutorIfNecessary();","908","                    if(!isAlive())","909","                    {","910","                        AbstractCIBase ciBase = Jenkins.getInstance();","911","                        ciBase.removeComputer(Computer.this);","912","                    }","913","                }","914","            }","915","        });","1454","    public static class DisplayExecutor implements ModelObject {","1455","","1456","        @Nonnull","1457","        private final String displayName;","1458","        @Nonnull","1459","        private final String url;","1460","        @Nonnull","1461","        private final Executor executor;","1462","","1463","        public DisplayExecutor(@Nonnull String displayName, @Nonnull String url, @Nonnull Executor executor) {","1464","            this.displayName = displayName;","1465","            this.url = url;","1466","            this.executor = executor;","1467","        }","1468","","1469","        @Override","1470","        @Nonnull","1471","        public String getDisplayName() {","1472","            return displayName;","1473","        }","1474","","1475","        @Nonnull","1476","        public String getUrl() {","1477","            return url;","1478","        }","1479","","1480","        @Nonnull","1481","        public Executor getExecutor() {","1482","            return executor;","1483","        }","1484","","1485","        @Override","1486","        public String toString() {","1487","            final StringBuilder sb = new StringBuilder(\"DisplayExecutor{\");","1488","            sb.append(\"displayName='\").append(displayName).append('\\'');","1489","            sb.append(\", url='\").append(url).append('\\'');","1490","            sb.append(\", executor=\").append(executor);","1491","            sb.append('}');","1492","            return sb.toString();","1493","        }","1494","","1495","        @Override","1496","        public boolean equals(Object o) {","1497","            if (this == o) {","1498","                return true;","1499","            }","1500","            if (o == null || getClass() != o.getClass()) {","1501","                return false;","1502","            }","1503","","1504","            DisplayExecutor that = (DisplayExecutor) o;","1505","","1506","            if (!executor.equals(that.executor)) {","1507","                return false;","1508","            }","1509","","1510","            return true;","1511","        }","1512","","1513","        @Override","1514","        public int hashCode() {","1515","            return executor.hashCode();","1516","        }","1517","    }","1518",""],"delete":["869","    \/*package*\/ synchronized void removeExecutor(Executor e) {","870","        executors.remove(e);","871","        addNewExecutorIfNecessary();","872","        if(!isAlive())","873","        {","874","            AbstractCIBase ciBase = Jenkins.getInstance();","875","            ciBase.removeComputer(this);","876","        }"]}],"core\/src\/main\/java\/hudson\/model\/Node.java":[{"add":["375","        if (!isAcceptingTasks()) {","376","            return CauseOfBlockage.fromMessage(Messages._Node_BecauseNodeIsNotAcceptingTasks(getNodeName()));","377","        }","378",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["90","import java.util.LinkedHashSet;","101","import java.util.concurrent.locks.Condition;","102","import java.util.concurrent.locks.Lock;","103","import java.util.concurrent.locks.ReentrantLock;","146"," *                                    ^              |","147"," *                                    |              |","148"," *                                    +---(rarely)---+","152"," * Note: In the normal case of events pending items only move to left. However they can move back","153"," * if the node they are assigned to execute on disappears before their {@link Executor} thread","154"," * starts, where the node is removed before the {@link Executable} has been instantiated it","155"," * is safe to move the pending item back to buildable. Once the {@link Executable} has been","156"," * instantiated the only option is to let the {@link Executable} bomb out as soon as it starts","157"," * to try an execute on the node that no longer exists.","158"," *","159"," * <p>","208","    private transient volatile Snapshot snapshot = new Snapshot(waitingList, blockedProjects, buildables, pendings);","209","","338","    private transient final Lock lock = new ReentrantLock();","339","","340","    private transient final Condition condition = lock.newCondition();","341","","377","    public void load() {","378","        lock.lock();","454","        } finally {","455","            updateSnapshot();","456","            lock.unlock();","463","    public void save() {","466","        lock.lock();","468","            \/\/ write out the queue state we want to save","469","            State state = new State();","470","            state.counter = WaitingItem.COUNTER.longValue();","471","","472","            \/\/ write out the tasks on the queue","473","            for (Item item: getItems()) {","474","                if(item.task instanceof TransientTask)  continue;","475","            state.items.add(item);","476","            }","477","","478","            try {","479","                XmlFile queueFile = new XmlFile(XSTREAM, getXMLQueueFile());","480","                queueFile.write(state);","481","                SaveableListener.fireOnChange(this, queueFile);","482","            } catch (IOException e) {","483","                LOGGER.log(Level.WARNING, \"Failed to write out the queue file \" + getXMLQueueFile(), e);","484","            }","485","        } finally {","486","            lock.unlock();","494","    public void clear() {","496","        lock.lock();","497","        try {","498","            for (WaitingItem i : new ArrayList<WaitingItem>(","499","                    waitingList))   \/\/ copy the list as we'll modify it in the loop","500","                i.cancel(this);","501","            blockedProjects.cancelAll();","502","            pendings.cancelAll();","503","            buildables.cancelAll();","504","        } finally {","505","            updateSnapshot();","506","            lock.unlock();","507","        }","553","    public WaitingItem schedule(Task p, int quietPeriod, List<Action> actions) {","578","    public @Nonnull ScheduleResult schedule2(Task p, int quietPeriod, List<Action> actions) {","586","        lock.lock();","587","        try {","588","            for (QueueDecisionHandler h : QueueDecisionHandler.all())","589","                if (!h.shouldSchedule(p, actions))","590","                    return ScheduleResult.refused();    \/\/ veto","592","            return scheduleInternal(p, quietPeriod, actions);","593","        } finally {","594","            updateSnapshot();","595","            lock.unlock();","596","        }","612","    private @Nonnull ScheduleResult scheduleInternal(Task p, int quietPeriod, List<Action> actions) {","613","        lock.lock();","614","        try {","615","            Calendar due = new GregorianCalendar();","616","            due.add(Calendar.SECOND, quietPeriod);","618","            \/\/ Do we already have this task in the queue? Because if so, we won't schedule a new one.","619","            List<Item> duplicatesInQueue = new ArrayList<Item>();","620","            for (Item item : liveGetItems(p)) {","621","                boolean shouldScheduleItem = false;","622","                for (QueueAction action : item.getActions(QueueAction.class)) {","623","                    shouldScheduleItem |= action.shouldSchedule(actions);","624","                }","625","                for (QueueAction action : Util.filter(actions, QueueAction.class)) {","626","                    shouldScheduleItem |= action.shouldSchedule((new ArrayList<Action>(item.getAllActions())));","627","                }","628","                if (!shouldScheduleItem) {","629","                    duplicatesInQueue.add(item);","630","                }","632","            if (duplicatesInQueue.isEmpty()) {","633","                LOGGER.log(Level.FINE, \"{0} added to queue\", p);","635","                \/\/ put the item in the queue","636","                WaitingItem added = new WaitingItem(due, p, actions);","637","                added.enter(this);","638","                scheduleMaintenance();   \/\/ let an executor know that a new item is in the queue.","639","                return ScheduleResult.created(added);","642","            LOGGER.log(Level.FINE, \"{0} is already in the queue\", p);","643","","644","            \/\/ but let the actions affect the existing stuff.","645","            for (Item item : duplicatesInQueue) {","646","                for (FoldableAction a : Util.filter(actions, FoldableAction.class)) {","647","                    a.foldIntoExisting(item, p, actions);","648","                }","649","            }","650","","651","            boolean queueUpdated = false;","652","            for (WaitingItem wi : Util.filter(duplicatesInQueue, WaitingItem.class)) {","653","                if (quietPeriod <= 0) {","654","                    \/\/ the user really wants to build now, and they mean NOW.","655","                    \/\/ so let's pull in the timestamp if we can.","656","                    if (wi.timestamp.before(due))","657","                        continue;","658","                } else {","659","                    \/\/ otherwise we do the normal quiet period implementation","660","                    if (wi.timestamp.after(due))","661","                        continue;","662","                    \/\/ quiet period timer reset. start the period over again","663","                }","664","","665","                \/\/ waitingList is sorted, so when we change a timestamp we need to maintain order","666","                wi.leave(this);","667","                wi.timestamp = due;","668","                wi.enter(this);","669","                queueUpdated = true;","670","            }","671","","672","            if (queueUpdated) scheduleMaintenance();","673","","674","            \/\/ REVISIT: when there are multiple existing items in the queue that matches the incoming one,","675","            \/\/ whether the new one should affect all existing ones or not is debatable. I for myself","676","            \/\/ thought this would only affect one, so the code was bit of surprise, but I'm keeping the current","677","            \/\/ behaviour.","678","            return ScheduleResult.existing(duplicatesInQueue.get(0));","679","        } finally {","680","            updateSnapshot();","681","            lock.unlock();","690","    public boolean add(Task p, int quietPeriod) {","694","    public @CheckForNull WaitingItem schedule(Task p, int quietPeriod) {","702","    public boolean add(Task p, int quietPeriod, Action... actions) {","709","    public @CheckForNull WaitingItem schedule(Task p, int quietPeriod, Action... actions) {","716","    public @Nonnull ScheduleResult schedule2(Task p, int quietPeriod, Action... actions) {","726","    public boolean cancel(Task p) {","727","        lock.lock();","728","        try {","729","            LOGGER.log(Level.FINE, \"Cancelling {0}\", p);","730","            for (WaitingItem item : waitingList) {","731","                if (item.task.equals(p)) {","732","                    return item.cancel(this);","733","                }","735","            \/\/ use bitwise-OR to make sure that both branches get evaluated all the time","736","            return blockedProjects.cancel(p) != null | buildables.cancel(p) != null;","737","        } finally {","738","            updateSnapshot();","739","            lock.unlock();","743","    private void updateSnapshot() {","744","        snapshot = new Snapshot(waitingList, blockedProjects, buildables, pendings);","745","    }","746","","747","    public boolean cancel(Item item) {","764","    public boolean isEmpty() {","765","        Snapshot snapshot = this.snapshot;","766","        return snapshot.waitingList.isEmpty() && snapshot.blockedProjects.isEmpty() && snapshot.buildables.isEmpty()","767","                && snapshot.pendings.isEmpty();","770","    private WaitingItem peek() {","781","    public Item[] getItems() {","782","        Snapshot s = this.snapshot;","783","        Item[] r = new Item[s.waitingList.size() + s.blockedProjects.size() + s.buildables.size() +","784","                s.pendings.size()];","785","        s.waitingList.toArray(r);","786","        int idx = s.waitingList.size();","787","        for (BlockedItem p : s.blockedProjects) {","789","        }","790","        for (BuildableItem p : reverse(s.buildables)) {","792","        }","793","        for (BuildableItem p : reverse(s.pendings)) {","795","        }","820","    public Item getItem(long id) {","821","        Snapshot snapshot = this.snapshot;","822","        for (Item item : snapshot.blockedProjects) {","823","            if (item.id == id)","824","                return item;","825","        }","826","        for (Item item : snapshot.buildables) {","827","            if (item.id == id)","828","                return item;","829","        }","830","        for (Item item : snapshot.pendings) {","831","            if (item.id == id)","832","                return item;","833","        }","834","        for (Item item : snapshot.waitingList) {","835","            if (item.id == id) {","836","                return item;","837","            }","838","        }","845","    public List<BuildableItem> getBuildableItems(Computer c) {","846","        Snapshot snapshot = this.snapshot;","848","        _getBuildableItems(c, snapshot.buildables, result);","849","        _getBuildableItems(c, snapshot.pendings, result);","853","    private void _getBuildableItems(Computer c, List<BuildableItem> col, List<BuildableItem> result) {","857","        for (BuildableItem p : col) {","866","    public List<BuildableItem> getBuildableItems() {","867","        Snapshot snapshot = this.snapshot;","868","        ArrayList<BuildableItem> r = new ArrayList<BuildableItem>(snapshot.buildables);","869","        r.addAll(snapshot.pendings);","876","    public List<BuildableItem> getPendingItems() {","877","        return new ArrayList<BuildableItem>(snapshot.pendings);","903","    public List<Item> getUnblockedItems() {","904","        Snapshot snapshot = this.snapshot;","905","        List<Item> queuedNotBlocked = new ArrayList<Item>();","906","        queuedNotBlocked.addAll(snapshot.waitingList);","907","        queuedNotBlocked.addAll(snapshot.buildables);","908","        queuedNotBlocked.addAll(snapshot.pendings);","918","    public Set<Task> getUnblockedTasks() {","929","    public boolean isPending(Task t) {","930","        Snapshot snapshot = this.snapshot;","931","        for (BuildableItem i : snapshot.pendings)","940","    public int countBuildableItemsFor(Label l) {","941","        Snapshot snapshot = this.snapshot;","943","        for (BuildableItem bi : snapshot.buildables)","945","                if (null == l || bi.getAssignedLabelFor(st) == l)","947","        for (BuildableItem bi : snapshot.pendings)","949","                if (null == l || bi.getAssignedLabelFor(st) == l)","957","    public int countBuildableItems() {","966","    public Item getItem(Task t) {","967","        Snapshot snapshot = this.snapshot;","968","        for (Item item : snapshot.blockedProjects) {","969","            if (item.task.equals(t))","970","                return item;","971","        }","972","        for (Item item : snapshot.buildables) {","973","            if (item.task.equals(t))","974","                return item;","975","        }","976","        for (Item item : snapshot.pendings) {","977","            if (item.task.equals(t))","978","                return item;","979","        }","980","        for (Item item : snapshot.waitingList) {","992","     * @since 1.FIXME","994","    private List<Item> liveGetItems(Task t) {","995","        lock.lock();","996","        try {","997","            List<Item> result = new ArrayList<Item>();","998","            result.addAll(blockedProjects.getAll(t));","999","            result.addAll(buildables.getAll(t));","1000","            result.addAll(pendings.getAll(t));","1001","            for (Item item : waitingList) {","1002","                if (item.task.equals(t)) {","1003","                    result.add(item);","1004","                }","1005","            }","1006","            return result;","1007","        } finally {","1008","            lock.unlock();","1009","        }","1010","    }","1011","","1012","    \/**","1013","     * Gets the information about the queue item for the given project.","1014","     *","1015","     * @return null if the project is not in the queue.","1016","     *\/","1017","    public List<Item> getItems(Task t) {","1018","        Snapshot snapshot = this.snapshot;","1019","        List<Item> result = new ArrayList<Item>();","1020","        for (Item item : snapshot.blockedProjects) {","1021","            if (item.task.equals(t)) {","1022","                result.add(item);","1023","            }","1024","        }","1025","        for (Item item : snapshot.buildables) {","1026","            if (item.task.equals(t)) {","1027","                result.add(item);","1028","            }","1029","        }","1030","        for (Item item : snapshot.pendings) {","1031","            if (item.task.equals(t)) {","1032","                result.add(item);","1033","            }","1034","        }","1035","        for (Item item : snapshot.waitingList) {","1047","    public Item getItem(AbstractProject p) {","1055","    public boolean contains(Task t) {","1056","        final Snapshot snapshot = this.snapshot;","1057","        for (Item item : snapshot.blockedProjects) {","1058","            if (item.task.equals(t))","1059","                return true;","1060","        }","1061","        for (Item item : snapshot.buildables) {","1062","            if (item.task.equals(t))","1063","                return true;","1064","        }","1065","        for (Item item : snapshot.pendings) {","1066","            if (item.task.equals(t))","1067","                return true;","1068","        }","1069","        for (Item item : snapshot.waitingList) {","1082","    \/*package*\/ void onStartExecuting(Executor exec) throws InterruptedException {","1083","        lock.lock();","1084","        try {","1085","            final WorkUnit wu = exec.getCurrentWorkUnit();","1086","            pendings.remove(wu.context.item);","1088","            LeftItem li = new LeftItem(wu.context);","1089","            li.enter(this);","1090","        } finally {","1091","            updateSnapshot();","1092","            lock.unlock();","1093","        }","1197","    @Override","1198","    protected void _await() throws InterruptedException {","1199","        condition.await();","1200","    }","1201","","1202","    @Override","1203","    protected void _signalAll() {","1204","        condition.signalAll();","1205","    }","1206","","1213","    protected void _withLock(Runnable runnable) {","1214","        lock.lock();","1215","        try {","1216","            runnable.run();","1217","        } finally {","1218","            lock.unlock();","1219","        }","1233","    protected <V, T extends Throwable> V _withLock(hudson.remoting.Callable<V, T> callable) throws T {","1234","        lock.lock();","1235","        try {","1236","            return callable.call();","1237","        } finally {","1238","            lock.unlock();","1239","        }","1252","    protected <V> V _withLock(java.util.concurrent.Callable<V> callable) throws Exception {","1253","        lock.lock();","1254","        try {","1255","            return callable.call();","1256","        } finally {","1257","            lock.unlock();","1258","        }","1273","    public void maintain() {","1274","        lock.lock();","1275","        try {","1277","            LOGGER.log(Level.FINE, \"Queue maintenance started {0}\", this);","1279","            \/\/ The executors that are currently waiting for a job to run.","1280","            Map<Executor, JobOffer> parked = new HashMap<Executor, JobOffer>();","1281","","1282","            {\/\/ update parked (and identify any pending items who's executor has disappeared)","1283","                List<BuildableItem> lostPendings = new ArrayList<BuildableItem>(pendings);","1284","                for (Computer c : Jenkins.getInstance().getComputers()) {","1285","                    for (Executor e : c.getExecutors()) {","1286","                        if (e.isParking()) {","1287","                            parked.put(e, new JobOffer(e));","1288","                        }","1289","                        final WorkUnit workUnit = e.getCurrentWorkUnit();","1290","                        if (workUnit != null) {","1291","                            lostPendings.remove(workUnit.context.item);","1292","                        }","1293","                    }","1294","                }","1295","                \/\/ pending -> buildable","1296","                for (BuildableItem p: lostPendings) {","1297","                    LOGGER.log(Level.INFO,","1298","                            \"BuildableItem {0}: pending -> buildable as the assigned executor disappeared\",","1299","                            p.task.getFullDisplayName());","1300","                    p.isPending = false;","1301","                    pendings.remove(p);","1302","                    makeBuildable(p);","1303","                }","1304","            }","1305","","1306","","1307","            {\/\/ blocked -> buildable","1308","                for (BlockedItem p : new ArrayList<BlockedItem>(blockedProjects.values())) {\/\/ copy as we'll mutate the list","1309","                    if (!isBuildBlocked(p) && allowNewBuildableTask(p.task)) {","1310","                        \/\/ ready to be executed","1311","                        Runnable r = makeBuildable(new BuildableItem(p));","1312","                        if (r != null) {","1313","                            p.leave(this);","1314","                            r.run();","1315","                        }","1320","            \/\/ waitingList -> buildable\/blocked","1321","            while (!waitingList.isEmpty()) {","1322","                WaitingItem top = peek();","1324","                if (top.timestamp.compareTo(new GregorianCalendar()) > 0)","1325","                    break; \/\/ finished moving all ready items from queue","1326","","1327","                top.leave(this);","1328","                Task p = top.task;","1329","                if (!isBuildBlocked(top) && allowNewBuildableTask(p)) {","1330","                    \/\/ ready to be executed immediately","1331","                    Runnable r = makeBuildable(new BuildableItem(top));","1334","                    } else {","1335","                        new BlockedItem(top).enter(this);","1338","                    \/\/ this can't be built now because another build is in progress","1339","                    \/\/ set this project aside.","1344","            final QueueSorter s = sorter;","1345","            if (s != null)","1346","                s.sortBuildableItems(buildables);","1348","            \/\/ allocate buildable jobs to executors","1349","            for (BuildableItem p : new ArrayList<BuildableItem>(","1350","                    buildables)) {\/\/ copy as we'll mutate the list in the loop","1351","                \/\/ one last check to make sure this build is not blocked.","1352","                if (isBuildBlocked(p)) {","1353","                    p.leave(this);","1354","                    new BlockedItem(p).enter(this);","1355","                    LOGGER.log(Level.FINE, \"Catching that {0} is blocked in the last minute\", p);","1356","                    continue;","1357","                }","1358","","1359","                List<JobOffer> candidates = new ArrayList<JobOffer>(parked.size());","1360","                for (JobOffer j : parked.values())","1361","                    if (j.canTake(p))","1362","                        candidates.add(j);","1363","","1364","                MappingWorksheet ws = new MappingWorksheet(p, candidates);","1365","                Mapping m = loadBalancer.map(p.task, ws);","1366","                if (m == null) {","1367","                    \/\/ if we couldn't find the executor that fits,","1368","                    \/\/ just leave it in the buildables list and","1369","                    \/\/ check if we can execute other projects","1370","                    LOGGER.log(Level.FINER, \"Failed to map {0} to executors. candidates={1} parked={2}\",","1371","                            new Object[]{p, candidates, parked.values()});","1372","                    continue;","1373","                }","1374","","1375","                \/\/ found a matching executor. use it.","1376","                WorkUnitContext wuc = new WorkUnitContext(p);","1377","                m.execute(wuc);","1378","","1380","                if (!wuc.getWorkUnits().isEmpty())","1381","                    makePending(p);","1382","                else","1383","                    LOGGER.log(Level.FINE, \"BuildableItem {0} with empty work units!?\", p);","1385","        } finally {","1386","            updateSnapshot();","1387","            lock.unlock();","2515","    private static class Snapshot {","2516","        private final Set<WaitingItem> waitingList;","2517","        private final List<BlockedItem> blockedProjects;","2518","        private final List<BuildableItem> buildables;","2519","        private final List<BuildableItem> pendings;","2520","","2521","        public Snapshot(Set<WaitingItem> waitingList, List<BlockedItem> blockedProjects, List<BuildableItem> buildables,","2522","                        List<BuildableItem> pendings) {","2523","            this.waitingList = new LinkedHashSet<WaitingItem>(waitingList);","2524","            this.blockedProjects = new ArrayList<BlockedItem>(blockedProjects);","2525","            this.buildables = new ArrayList<BuildableItem>(buildables);","2526","            this.pendings = new ArrayList<BuildableItem>(pendings);","2527","        }","2528","    }","2529",""],"delete":["356","    public synchronized void load() {","438","    public synchronized void save() {","441","        \/\/ write out the queue state we want to save","442","        State state = new State();","443","        state.counter = WaitingItem.COUNTER.longValue();","444","","445","        \/\/ write out the tasks on the queue","446","        for (Item item: getItems()) {","447","            if(item.task instanceof TransientTask)  continue;","448","\t    state.items.add(item);","449","    \t}","450","","452","            XmlFile queueFile = new XmlFile(XSTREAM, getXMLQueueFile());","453","            queueFile.write(state);","454","            SaveableListener.fireOnChange(this, queueFile);","455","        } catch (IOException e) {","456","            LOGGER.log(Level.WARNING, \"Failed to write out the queue file \" + getXMLQueueFile(), e);","464","    public synchronized void clear() {","466","        for (WaitingItem i : new ArrayList<WaitingItem>(waitingList))   \/\/ copy the list as we'll modify it in the loop","467","            i.cancel(this);","468","        blockedProjects.cancelAll();","469","        pendings.cancelAll();","470","        buildables.cancelAll();","516","    public synchronized WaitingItem schedule(Task p, int quietPeriod, List<Action> actions) {","541","    public synchronized @Nonnull ScheduleResult schedule2(Task p, int quietPeriod, List<Action> actions) {","549","    \tfor(QueueDecisionHandler h : QueueDecisionHandler.all())","550","    \t\tif (!h.shouldSchedule(p, actions))","551","                return ScheduleResult.refused();    \/\/ veto","553","        return scheduleInternal(p, quietPeriod, actions);","569","    private synchronized @Nonnull ScheduleResult scheduleInternal(Task p, int quietPeriod, List<Action> actions) {","570","        Calendar due = new GregorianCalendar();","571","    \tdue.add(Calendar.SECOND, quietPeriod);","573","        \/\/ Do we already have this task in the queue? Because if so, we won't schedule a new one.","574","    \tList<Item> duplicatesInQueue = new ArrayList<Item>();","575","    \tfor(Item item : getItems(p)) {","576","    \t\tboolean shouldScheduleItem = false;","577","    \t\tfor (QueueAction action: item.getActions(QueueAction.class)) {","578","                shouldScheduleItem |= action.shouldSchedule(actions);","579","    \t\t}","580","    \t\tfor (QueueAction action: Util.filter(actions,QueueAction.class)) {","581","                shouldScheduleItem |= action.shouldSchedule((new ArrayList<Action>(item.getAllActions())));","582","    \t\t}","583","    \t\tif(!shouldScheduleItem) {","584","    \t\t\tduplicatesInQueue.add(item);","585","    \t\t}","586","    \t}","587","    \tif (duplicatesInQueue.isEmpty()) {","588","    \t\tLOGGER.log(Level.FINE, \"{0} added to queue\", p);","589","","590","    \t\t\/\/ put the item in the queue","591","            WaitingItem added = new WaitingItem(due,p,actions);","592","            added.enter(this);","593","            scheduleMaintenance();   \/\/ let an executor know that a new item is in the queue.","594","            return ScheduleResult.created(added);","595","    \t}","596","","597","        LOGGER.log(Level.FINE, \"{0} is already in the queue\", p);","598","","599","        \/\/ but let the actions affect the existing stuff.","600","        for(Item item : duplicatesInQueue) {","601","            for(FoldableAction a : Util.filter(actions,FoldableAction.class)) {","602","                a.foldIntoExisting(item, p, actions);","604","        }","606","        boolean queueUpdated = false;","607","        for(WaitingItem wi : Util.filter(duplicatesInQueue,WaitingItem.class)) {","608","            if(quietPeriod<=0) {","609","                \/\/ the user really wants to build now, and they mean NOW.","610","                \/\/ so let's pull in the timestamp if we can.","611","                if (wi.timestamp.before(due))","612","                    continue;","613","            } else {","614","                \/\/ otherwise we do the normal quiet period implementation","615","                if (wi.timestamp.after(due))","616","                    continue;","617","                \/\/ quiet period timer reset. start the period over again","620","            \/\/ waitingList is sorted, so when we change a timestamp we need to maintain order","621","            wi.leave(this);","622","            wi.timestamp = due;","623","            wi.enter(this);","624","            queueUpdated=true;","626","","627","        if (queueUpdated)   scheduleMaintenance();","628","","629","        \/\/ REVISIT: when there are multiple existing items in the queue that matches the incoming one,","630","        \/\/ whether the new one should affect all existing ones or not is debatable. I for myself","631","        \/\/ thought this would only affect one, so the code was bit of surprise, but I'm keeping the current","632","        \/\/ behaviour.","633","        return ScheduleResult.existing(duplicatesInQueue.get(0));","641","    public synchronized boolean add(Task p, int quietPeriod) {","645","    public synchronized @CheckForNull WaitingItem schedule(Task p, int quietPeriod) {","653","    public synchronized boolean add(Task p, int quietPeriod, Action... actions) {","660","    public synchronized @CheckForNull WaitingItem schedule(Task p, int quietPeriod, Action... actions) {","667","    public synchronized @Nonnull ScheduleResult schedule2(Task p, int quietPeriod, Action... actions) {","677","    public synchronized boolean cancel(Task p) {","678","        LOGGER.log(Level.FINE, \"Cancelling {0}\", p);","679","        for (WaitingItem item : waitingList) {","680","            if (item.task.equals(p)) {","681","                return item.cancel(this);","684","        \/\/ use bitwise-OR to make sure that both branches get evaluated all the time","685","        return blockedProjects.cancel(p)!=null | buildables.cancel(p)!=null;","688","    public synchronized boolean cancel(Item item) {","705","    public synchronized boolean isEmpty() {","706","        return waitingList.isEmpty() && blockedProjects.isEmpty() && buildables.isEmpty() && pendings.isEmpty();","709","    private synchronized WaitingItem peek() {","720","    public synchronized Item[] getItems() {","721","        Item[] r = new Item[waitingList.size() + blockedProjects.size() + buildables.size() + pendings.size()];","722","        waitingList.toArray(r);","723","        int idx = waitingList.size();","724","        for (BlockedItem p : blockedProjects.values())","726","        for (BuildableItem p : reverse(buildables.values()))","728","        for (BuildableItem p : reverse(pendings.values()))","754","    public synchronized Item getItem(long id) {","755","    \tfor (Item item: waitingList) if (item.id == id) return item;","756","    \tfor (Item item: blockedProjects) if (item.id == id) return item;","757","    \tfor (Item item: buildables) if (item.id == id) return item;","758","        for (Item item: pendings) if (item.id == id) return item;","759","","766","    public synchronized List<BuildableItem> getBuildableItems(Computer c) {","768","        _getBuildableItems(c, buildables, result);","769","        _getBuildableItems(c, pendings, result);","773","    private void _getBuildableItems(Computer c, ItemList<BuildableItem> col, List<BuildableItem> result) {","777","        for (BuildableItem p : col.values()) {","786","    public synchronized List<BuildableItem> getBuildableItems() {","787","        ArrayList<BuildableItem> r = new ArrayList<BuildableItem>(buildables.values());","788","        r.addAll(pendings.values());","795","    public synchronized List<BuildableItem> getPendingItems() {","796","        return new ArrayList<BuildableItem>(pendings.values());","822","    public synchronized List<Item> getUnblockedItems() {","823","    \tList<Item> queuedNotBlocked = new ArrayList<Item>();","824","        queuedNotBlocked.addAll(waitingList);","825","        queuedNotBlocked.addAll(buildables);","826","        queuedNotBlocked.addAll(pendings);","836","    public synchronized Set<Task> getUnblockedTasks() {","847","    public synchronized boolean isPending(Task t) {","848","        for (BuildableItem i : pendings)","857","    public synchronized int countBuildableItemsFor(Label l) {","859","        for (BuildableItem bi : buildables.values())","861","                if (null==l || bi.getAssignedLabelFor(st)==l)","863","        for (BuildableItem bi : pendings.values())","865","                if (null==l || bi.getAssignedLabelFor(st)==l)","873","    public synchronized int countBuildableItems() {","882","    public synchronized Item getItem(Task t) {","883","        BlockedItem bp = blockedProjects.get(t);","884","        if (bp!=null)","885","            return bp;","886","        BuildableItem bi = buildables.get(t);","887","        if(bi!=null)","888","            return bi;","889","        bi = pendings.get(t);","890","        if(bi!=null)","891","            return bi;","892","","893","        for (Item item : waitingList) {","906","    public synchronized List<Item> getItems(Task t) {","907","    \tList<Item> result =new ArrayList<Item>();","908","    \tresult.addAll(blockedProjects.getAll(t));","909","    \tresult.addAll(buildables.getAll(t));","910","        result.addAll(pendings.getAll(t));","911","        for (Item item : waitingList) {","923","    public synchronized Item getItem(AbstractProject p) {","931","    public synchronized boolean contains(Task t) {","932","        if (blockedProjects.containsKey(t) || buildables.containsKey(t) || pendings.containsKey(t))","933","            return true;","934","        for (Item item : waitingList) {","947","    \/*package*\/ synchronized void onStartExecuting(Executor exec) throws InterruptedException {","948","        final WorkUnit wu = exec.getCurrentWorkUnit();","949","        pendings.remove(wu.context.item);","951","        LeftItem li = new LeftItem(wu.context);","952","        li.enter(this);","1062","    protected synchronized void _withLock(Runnable runnable) {","1063","        runnable.run();","1077","    protected synchronized <V, T extends Throwable> V _withLock(hudson.remoting.Callable<V, T> callable) throws T {","1078","        return callable.call();","1091","    protected synchronized <V> V _withLock(java.util.concurrent.Callable<V> callable) throws Exception {","1092","        return callable.call();","1107","    public synchronized void maintain() {","1108","        LOGGER.log(Level.FINE, \"Queue maintenance started {0}\", this);","1110","        \/\/ The executors that are currently waiting for a job to run.","1111","        Map<Executor,JobOffer> parked = new HashMap<Executor,JobOffer>();","1113","        {\/\/ update parked","1114","            for (Computer c : Jenkins.getInstance().getComputers()) {","1115","                for (Executor e : c.getExecutors()) {","1116","                    if (e.isParking()) {","1117","                        parked.put(e,new JobOffer(e));","1121","        }","1124","        {\/\/ blocked -> buildable","1125","            for (BlockedItem p : new ArrayList<BlockedItem>(blockedProjects.values())) {\/\/ copy as we'll mutate the list","1126","                if (!isBuildBlocked(p) && allowNewBuildableTask(p.task)) {","1127","                    \/\/ ready to be executed","1128","                    Runnable r = makeBuildable(new BuildableItem(p));","1130","                        p.leave(this);","1133","                }","1134","            }","1135","        }","1136","","1137","        \/\/ waitingList -> buildable\/blocked","1138","        while (!waitingList.isEmpty()) {","1139","            WaitingItem top = peek();","1140","","1141","            if (top.timestamp.compareTo(new GregorianCalendar())>0)","1142","                break; \/\/ finished moving all ready items from queue","1143","","1144","            top.leave(this);","1145","            Task p = top.task;","1146","            if (!isBuildBlocked(top) && allowNewBuildableTask(p)) {","1147","                \/\/ ready to be executed immediately","1148","                Runnable r = makeBuildable(new BuildableItem(top));","1149","                if (r != null) {","1150","                    r.run();","1154","            } else {","1155","                \/\/ this can't be built now because another build is in progress","1156","                \/\/ set this project aside.","1157","                new BlockedItem(top).enter(this);","1159","        }","1161","        final QueueSorter s = sorter;","1162","        if (s != null)","1163","        \ts.sortBuildableItems(buildables);","1165","        \/\/ allocate buildable jobs to executors","1166","        for (BuildableItem p : new ArrayList<BuildableItem>(buildables)) {\/\/ copy as we'll mutate the list in the loop","1167","            \/\/ one last check to make sure this build is not blocked.","1168","            if (isBuildBlocked(p)) {","1170","                new BlockedItem(p).enter(this);","1171","                LOGGER.log(Level.FINE, \"Catching that {0} is blocked in the last minute\", p);","1172","                continue;","1174","","1175","            List<JobOffer> candidates = new ArrayList<JobOffer>(parked.size());","1176","            for (JobOffer j : parked.values())","1177","                if (j.canTake(p))","1178","                    candidates.add(j);","1179","","1180","            MappingWorksheet ws = new MappingWorksheet(p, candidates);","1181","            Mapping m = loadBalancer.map(p.task, ws);","1182","            if (m == null) {","1183","                \/\/ if we couldn't find the executor that fits,","1184","                \/\/ just leave it in the buildables list and","1185","                \/\/ check if we can execute other projects","1186","                LOGGER.log(Level.FINER, \"Failed to map {0} to executors. candidates={1} parked={2}\", new Object[]{p, candidates, parked.values()});","1187","                continue;","1188","            }","1189","","1190","            \/\/ found a matching executor. use it.","1191","            WorkUnitContext wuc = new WorkUnitContext(p);","1192","            m.execute(wuc);","1193","","1194","            p.leave(this);","1195","            if (!wuc.getWorkUnits().isEmpty())","1196","                makePending(p);","1197","            else","1198","                LOGGER.log(Level.FINE, \"BuildableItem {0} with empty work units!?\", p);"]}],"core\/src\/main\/java\/hudson\/model\/AbstractCIBase.java":[{"add":["137","    \/*package*\/ void removeComputer(final Computer computer) {","138","        Queue.withLock(new Runnable() {","139","            @Override","140","            public void run() {","141","                Map<Node,Computer> computers = getComputerMap();","142","                for (Map.Entry<Node, Computer> e : computers.entrySet()) {","143","                    if (e.getValue() == computer) {","144","                        computers.remove(e.getKey());","145","                        computer.onRemoved();","146","                        return;","147","                    }","148","                }","150","        });","165","    protected void updateComputerList(final boolean automaticSlaveLaunch) {","166","        final Map<Node,Computer> computers = getComputerMap();","167","        Queue.withLock(new Runnable() {","168","            @Override","169","            public void run() {","170","                Map<String,Computer> byName = new HashMap<String,Computer>();","171","                for (Computer c : computers.values()) {","172","                    Node node = c.getNode();","173","                    if (node == null)","174","                        continue;   \/\/ this computer is gone","175","                    byName.put(node.getNodeName(),c);","176","                }","178","                final Set<Computer> old = new HashSet<Computer>(computers.values());","179","                Set<Computer> used = new HashSet<Computer>();","181","                updateComputer(AbstractCIBase.this, byName, used, automaticSlaveLaunch);","182","                for (Node s : getNodes()) {","183","                    long start = System.currentTimeMillis();","184","                    updateComputer(s, byName, used, automaticSlaveLaunch);","185","                    if(LOG_STARTUP_PERFORMANCE)","186","                        LOGGER.info(String.format(\"Took %dms to update node %s\",","187","                                System.currentTimeMillis()-start, s.getNodeName()));","188","                }","190","                \/\/ find out what computers are removed, and kill off all executors.","191","                \/\/ when all executors exit, it will be removed from the computers map.","192","                \/\/ so don't remove too quickly","193","                old.removeAll(used);","194","                for (Computer c : old) {","195","                    killComputer(c);","196","                }","198","        });"],"delete":["50","    private final transient Object updateComputerLock = new Object();","51","","139","    \/*package*\/ void removeComputer(Computer computer) {","140","        Map<Node,Computer> computers = getComputerMap();","141","        for (Map.Entry<Node, Computer> e : computers.entrySet()) {","142","            if (e.getValue() == computer) {","143","                computers.remove(e.getKey());","144","                computer.onRemoved();","145","                return;","147","        }","162","    protected void updateComputerList(boolean automaticSlaveLaunch) throws IOException {","163","        Map<Node,Computer> computers = getComputerMap();","164","        synchronized(updateComputerLock) {\/\/ just so that we don't have two code updating computer list at the same time","165","            Map<String,Computer> byName = new HashMap<String,Computer>();","166","            for (Computer c : computers.values()) {","167","                Node node = c.getNode();","168","                if (node == null)","169","                    continue;   \/\/ this computer is gone","170","                byName.put(node.getNodeName(),c);","171","            }","173","            final Set<Computer> old = new HashSet<Computer>(computers.values());","174","            Set<Computer> used = new HashSet<Computer>();","176","            updateComputer(this, byName, used, automaticSlaveLaunch);","177","            for (Node s : getNodes()) {","178","                long start = System.currentTimeMillis();","179","                updateComputer(s, byName, used, automaticSlaveLaunch);","180","                if(LOG_STARTUP_PERFORMANCE)","181","                    LOGGER.info(String.format(\"Took %dms to update node %s\",","182","                            System.currentTimeMillis()-start, s.getNodeName()));","183","            }","185","            \/\/ find out what computers are removed, and kill off all executors.","186","            \/\/ when all executors exit, it will be removed from the computers map.","187","            \/\/ so don't remove too quickly","188","            old.removeAll(used);","189","            for (Computer c : old) {","190","                killComputer(c);","192","        }"]}],"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["123","        return (List)getNodes();"],"delete":["123","        return (List)slaves;"]}],"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["315","Node.BecauseNodeIsNotAcceptingTasks={0} is not accepting tasks"],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":[{"add":["41","      <j:if test=\"${!c.offline or (c.offline and !e.idle)}\">","42","        <tr>","43","          <td class=\"pane\" align=\"right\" style=\"vertical-align: top\">","44","            ${name}","45","          <\/td>","46","          <j:choose>","47","            <j:when test=\"${!e.active}\">","48","              <td class=\"pane\">","49","                <a href=\"${rootURL}\/${c.url}${url}\/causeOfDeath\">","50","                  <div class=\"error\">${%Dead} (!)<\/div>","51","                <\/a>","52","              <\/td>","53","              <td class=\"pane\"\/>","54","              <td class=\"pane\"\/>","55","            <\/j:when>","56","            <j:when test=\"${e.idle}\">","57","              <td class=\"pane\">","58","                <j:choose>","59","                  <j:when test=\"${c.offline}\">","60","                    <a href=\"${rootURL}\/${c.url}\" class=\"model-link inside\">${%Offline}<\/a>","61","                  <\/j:when>","62","                  <j:otherwise>","63","                    ${%Idle}","64","                  <\/j:otherwise>","65","                <\/j:choose>","66","              <\/td>","67","              <td class=\"pane\"\/>","68","              <td class=\"pane\"\/>","69","            <\/j:when>","70","            <j:otherwise>","71","              <!-- not actually optional, but it helps with backward compatibility -->","72","              <j:set var=\"executor\" value=\"${e}\" \/>","73","              <st:include it=\"${e.currentExecutable}\" page=\"executorCell.jelly\" optional=\"true\">","75","                  <div style=\"white-space: normal\">","76","                    <j:set var=\"exe\" value=\"${e.currentExecutable}\" \/>","77","                    <j:set var=\"wu\" value=\"${e.currentWorkUnit}\" \/>","78","                    <j:choose>","79","                      <j:when test=\"${exe == null and wu != null}\">","80","                        <j:set var=\"exeparent\" value=\"${wu.work}\"\/>","81","                        <j:choose>","82","                          <j:when test=\"${h.hasPermission(exeparent,exeparent.READ)}\">","83","                            <a href=\"${rootURL}\/${exeparent.url}\"><l:breakable value=\"${exeparent.fullDisplayName}\"\/><\/a>","84","                            <t:progressBar tooltip=\"${%Pending}\" pos=\"-1\" href=\"${rootURL}\/${exeparent.url}\"\/>","85","                          <\/j:when>","86","                          <j:otherwise>","87","                            <span>${%Unknown Task}<\/span>","88","                          <\/j:otherwise>","89","                        <\/j:choose>","90","                      <\/j:when>","91","                      <j:when test=\"${exe == null and wu == null}\">","92","                        <!-- went idle concurrent with testing for idle -->","93","                        ${%Idle}","94","                      <\/j:when>","95","                      <j:otherwise>","96","                        <j:invokeStatic var=\"exeparent\"","97","                           className=\"hudson.model.queue.Executables\" method=\"getParentOf\">","98","                          <j:arg type=\"hudson.model.Queue$Executable\" value=\"${exe}\" \/>","99","                        <\/j:invokeStatic>","100","                        <j:choose>","101","                          <j:when test=\"${h.hasPermission(exeparent,exeparent.READ)}\">","102","                            <a href=\"${rootURL}\/${exeparent.url}\"><l:breakable value=\"${exeparent.fullDisplayName}\"\/><\/a>","103","                            <t:buildProgressBar build=\"${exe}\" executor=\"${executor}\"\/>","104","                          <\/j:when>","105","                          <j:otherwise>","106","                            <span>${%Unknown Task}<\/span>","107","                          <\/j:otherwise>","108","                        <\/j:choose>","109","                      <\/j:otherwise>","110","                    <\/j:choose>","111","                  <\/div>","113","              <td class=\"pane\">","114","                <j:if test=\"${h.hasPermission(exeparent,exeparent.READ)}\">","115","                    <a href=\"${rootURL}\/${exe.url}\" class=\"model-link inside\"><l:breakable value=\"${exe.displayName}\"\/><\/a>","116","                <\/j:if>","117","              <\/td>","118","              <\/st:include>","119","              <td class=\"pane\" align=\"center\" valign=\"middle\">","120","                <j:if test=\"${e.hasStopPermission()}\">","121","                  <l:stopButton href=\"${rootURL}\/${c.url}${url}\/stop\" alt=\"${%terminate this build}\"\/>","122","                <\/j:if>","123","              <\/td>","124","            <\/j:otherwise>","125","          <\/j:choose>","126","        <\/tr>","127","      <\/j:if>","131","  <j:set var=\"computersSize\" value=\"${computers.size()}\"\/>","132","  <l:pane width=\"3\" id=\"executors\"","133","      title=\"&lt;a href='${rootURL}\/computer\/'>${%Build Executor Status}&lt;\/a>\"","134","      collapsedText=\"${%Computers(computersSize - 1, app.unlabeledLoad.computeTotalExecutors() - app.unlabeledLoad.computeIdleExecutors(), app.unlabeledLoad.computeTotalExecutors())}\">","135","    <colgroup><col width=\"30\"\/><col width=\"200*\"\/><col width=\"24\"\/><\/colgroup>","137","    <j:forEach var=\"c\" items=\"${computers}\">","138","      <j:set var=\"cDisplayExecutors\" value=\"${c.displayExecutors}\"\/>","139","      <tr>","140","        <j:if test=\"${computersSize gt 1 and !cDisplayExecutors.isEmpty()}\">","141","          <th class=\"pane\" colspan=\"3\">","142","            <local:computerCaption title=\"${c.displayName}\" \/>","143","          <\/th>","144","        <\/j:if>","145","      <\/tr>","146","      <j:forEach var=\"de\" items=\"${cDisplayExecutors}\" varStatus=\"eloop\">","147","        <j:set var=\"e\" value=\"${de.executor}\"\/>","148","        <local:executor name=\"${de.displayName}\" url=\"${de.url}\" \/>","150","    <\/j:forEach>","151","  <\/l:pane>","152","  <!-- schedule updates only for the full page reload -->","153","  <j:if test=\"${ajax==null and !h.isAutoRefresh(request) and h.hasPermission(app.READ)}\">","154","    <script defer=\"defer\">","155","      refreshPart('executors',\"${rootURL}\/${h.hasView(it,'ajaxExecutors')?it.url:''}ajaxExecutors\");","156","    <\/script>","157","  <\/j:if>"],"delete":["41","      <j:choose>","42","        <j:when test=\"${!c.offline or (c.offline and !e.idle)}\">","43","          <tr>","44","            <td class=\"pane\" align=\"right\" style=\"vertical-align: top\">","45","              ${name}","46","            <\/td>","47","            <j:choose>","48","              <j:when test=\"${!e.active}\">","50","                  <a href=\"${rootURL}\/${c.url}${url}\/causeOfDeath\">","51","                    <div class=\"error\">${%Dead} (!)<\/div>","52","                  <\/a>","54","                <td class=\"pane\"\/>","55","                <td class=\"pane\"\/>","56","              <\/j:when>","57","              <j:when test=\"${e.idle}\">","58","                <td class=\"pane\">","59","                  <j:choose>","60","                    <j:when test=\"${c.offline}\">","61","                      <a href=\"${rootURL}\/${c.url}\" class=\"model-link inside\">${%Offline}<\/a>","62","                    <\/j:when>","63","                    <j:otherwise>","64","                      ${%Idle}","65","                    <\/j:otherwise>","66","                  <\/j:choose>","67","                <\/td>","68","                <td class=\"pane\"\/>","69","                <td class=\"pane\"\/>","70","              <\/j:when>","71","              <j:otherwise>","72","                <!-- not actually optional, but it helps with backward compatibility -->","73","                <j:set var=\"executor\" value=\"${e}\" \/>","74","                <st:include it=\"${e.currentExecutable}\" page=\"executorCell.jelly\" optional=\"true\">","75","                  <td class=\"pane\">","76","                    <div style=\"white-space: normal\">","77","                      <j:set var=\"exe\" value=\"${e.currentExecutable}\" \/>","78","                      <j:invokeStatic var=\"exeparent\"","79","                         className=\"hudson.model.queue.Executables\" method=\"getParentOf\">","80","                        <j:arg type=\"hudson.model.Queue$Executable\" value=\"${exe}\" \/>","81","                      <\/j:invokeStatic>","82","                      <j:choose>","83","                        <j:when test=\"${h.hasPermission(exeparent,exeparent.READ)}\">","84","                          <a href=\"${rootURL}\/${exeparent.url}\"><l:breakable value=\"${exeparent.fullDisplayName}\"\/><\/a>","85","                          <t:buildProgressBar build=\"${exe}\" executor=\"${executor}\"\/>","86","                        <\/j:when>","87","                        <j:otherwise>","88","                          <span>${%Unknown Task}<\/span>","89","                        <\/j:otherwise>","90","                      <\/j:choose>","91","                    <\/div>","92","                  <\/td>","93","                <td class=\"pane\">","94","                  <j:if test=\"${h.hasPermission(exeparent,exeparent.READ)}\">","95","                      <a href=\"${rootURL}\/${exe.url}\" class=\"model-link inside\"><l:breakable value=\"${exe.displayName}\"\/><\/a>","96","                  <\/j:if>","97","                <\/td>","98","                <\/st:include>","99","                <td class=\"pane\" align=\"center\" valign=\"middle\">","100","                  <j:if test=\"${e.hasStopPermission()}\">","101","                    <l:stopButton href=\"${rootURL}\/${c.url}${url}\/stop\" alt=\"${%terminate this build}\"\/>","102","                  <\/j:if>","103","                <\/td>","104","              <\/j:otherwise>","105","            <\/j:choose>","106","          <\/tr>","107","        <\/j:when>","108","      <\/j:choose>","112","    <l:pane width=\"3\" id=\"executors\"","113","        title=\"&lt;a href='${rootURL}\/computer\/'>${%Build Executor Status}&lt;\/a>\"","114","        collapsedText=\"${%Computers(computers.size() - 1, app.unlabeledLoad.computeTotalExecutors() - app.unlabeledLoad.computeIdleExecutors(), app.unlabeledLoad.computeTotalExecutors())}\">","115","      <colgroup><col width=\"30\"\/><col width=\"200*\"\/><col width=\"24\"\/><\/colgroup>","117","      <j:forEach var=\"c\" items=\"${computers}\">","118","        <tr>","119","          <j:if test=\"${computers.size() gt 1 and (c.executors.size()!=0 or c.oneOffExecutors.size()!=0)}\">","120","            <th class=\"pane\" colspan=\"3\">","121","              <local:computerCaption title=\"${c.displayName}\" \/>","122","            <\/th>","123","          <\/j:if>","124","        <\/tr>","125","        <j:forEach var=\"e\" items=\"${c.executors}\" varStatus=\"eloop\">","126","          <local:executor name=\"${eloop.index+1}\" url=\"executors\/${eloop.index}\" \/>","127","        <\/j:forEach>","128","        <j:forEach var=\"e\" items=\"${c.oneOffExecutors}\" varStatus=\"eloop\">","129","          <local:executor name=\"\" url=\"oneOffExecutors\/${eloop.index}\" \/>","130","        <\/j:forEach>","132","    <\/l:pane>","133","    <!-- schedule updates only for the full page reload -->","134","    <j:if test=\"${ajax==null and !h.isAutoRefresh(request) and h.hasPermission(app.READ)}\">","135","      <script defer=\"defer\">","136","        refreshPart('executors',\"${rootURL}\/${h.hasView(it,'ajaxExecutors')?it.url:''}ajaxExecutors\");","137","      <\/script>","138","    <\/j:if>"]}],"core\/src\/main\/java\/hudson\/slaves\/RetentionStrategy.java":[{"add":["35","import net.jcip.annotations.GuardedBy;","38","import java.util.concurrent.TimeUnit;","58","    @GuardedBy(\"hudson.model.Queue#lock\")","96","    public void start(final T c) {","97","        Queue.withLock(new Runnable() {","98","            @Override","99","            public void run() {","100","                check(c);","101","            }","102","        });","267","                    \/\/ we've been idle for long enough","268","                    logger.log(Level.INFO, \"Disconnecting computer {0} as it has been idle for {1}\",","269","                            new Object[]{c.getName(), Util.getTimeSpanString(idleMilliseconds)});","270","                    c.disconnect(OfflineCause.create(Messages._RetentionStrategy_Demand_OfflineIdle()));","271","                } else {","272","                    \/\/ no point revisiting until we can be confident we will be idle","273","                    return TimeUnit.MILLISECONDS.toMinutes(TimeUnit.MINUTES.toMillis(idleDelay) - idleMilliseconds);"],"delete":["93","    public void start(T c) {","94","        check(c);","259","                    Queue.withLock(new Runnable() {","260","                        @Override","261","                        public void run() {","262","                            \/\/ re-check idle now that we are within the Queue lock","263","                            if (c.isIdle()) {","264","                                final long idleMilliseconds = System.currentTimeMillis() - c.getIdleStartMilliseconds();","265","                                if (idleMilliseconds > idleDelay * 1000 * 60 \/*MINS->MILLIS*\/) {","266","                                    \/\/ we've been idle for long enough","267","                                    logger.log(Level.INFO, \"Disconnecting computer {0} as it has been idle for {1}\",","268","                                            new Object[]{c.getName(), Util.getTimeSpanString(idleMilliseconds)});","269","                                    c.disconnect(OfflineCause.create(Messages._RetentionStrategy_Demand_OfflineIdle()));","270","                                }","271","                            }","272","                        }","273","                    });"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["291","import java.util.concurrent.locks.ReentrantReadWriteLock;","501","     * Legacy store of the set of installed cluster nodes.","502","     * @deprecated in favour of {@link Nodes}","504","    @Deprecated","505","    protected transient volatile NodeList slaves;","506","","507","    \/**","508","     * The holder of the set of installed cluster nodes.","509","     *","510","     * @since 1.FIXME","511","     *\/","512","    private transient final Nodes nodes = new Nodes(this);","1218","    protected void updateComputerList() {","1667","        return nodes.getNode(name);","1686","        return nodes.getNodes();","1692","    public void addNode(Node n) throws IOException {","1693","        nodes.addNode(n);","1699","    public void removeNode(@Nonnull Node n) throws IOException {","1700","        nodes.removeNode(n);","1703","    public void setNodes(final List<? extends Node> n) throws IOException {","1704","        nodes.setNodes(n);","1721","    \/*package*\/ void trimLabels() {","2630","                if (slaves != null && !slaves.isEmpty() && nodes.isLegacy()) {","2631","                    nodes.setNodes(slaves);","2632","                    slaves = null;","2633","                } else {","2634","                    nodes.load();","2635","                }","2675","                    for (Node slave : nodes.getNodes())"],"delete":["500","     * Set of installed cluster nodes.","501","     * <p>","502","     * We use this field with copy-on-write semantics.","503","     * This field has mutable list (to keep the serialization look clean),","504","     * but it shall never be modified. Only new completely populated slave","505","     * list can be set here.","506","     * <p>","507","     * The field name should be really {@code nodes}, but again the backward compatibility","508","     * prevents us from renaming.","510","    protected volatile NodeList slaves;","1216","    protected void updateComputerList() throws IOException {","1665","        return slaves.getNode(name);","1684","        return slaves;","1690","    public synchronized void addNode(Node n) throws IOException {","1691","        if(n==null)     throw new IllegalArgumentException();","1692","        ArrayList<Node> nl = new ArrayList<Node>(this.slaves);","1693","        if(!nl.contains(n)) \/\/ defensive check","1694","            nl.add(n);","1695","        setNodes(nl);","1701","    public synchronized void removeNode(@Nonnull Node n) throws IOException {","1702","        Computer c = n.toComputer();","1703","        if (c!=null)","1704","            c.disconnect(OfflineCause.create(Messages._Hudson_NodeBeingRemoved()));","1705","","1706","        ArrayList<Node> nl = new ArrayList<Node>(this.slaves);","1707","        nl.remove(n);","1708","        setNodes(nl);","1711","    public void setNodes(final List<? extends Node> nodes) throws IOException {","1712","        Jenkins.this.slaves = new NodeList(nodes);","1713","        updateComputerList();","1714","        trimLabels();","1715","        save();","1732","    private void trimLabels() {","2629","                \/\/ JENKINS-8043: some slaves (eg. swarm slaves) are not saved into the config file","2630","                \/\/ and will get overwritten when reloading. Make a backup copy now, and re-add them later","2631","                NodeList oldSlaves = slaves;","2632","","2645","                if (slaves == null) slaves = new NodeList();","2648","","2649","                \/\/ JENKINS-8043: re-add the slaves which were not saved into the config file","2650","                \/\/ and are now missing, but still connected.","2651","                if (oldSlaves != null) {","2652","                    ArrayList<Node> newSlaves = new ArrayList<Node>(slaves);","2653","                    for (Node n: oldSlaves) {","2654","                        if (n instanceof EphemeralNode) {","2655","                            if(!newSlaves.contains(n)) {","2656","                                newSlaves.add(n);","2657","                            }","2658","                        }","2659","                    }","2660","                    setNodes(newSlaves);","2661","                }","2699","                    for (Node slave : slaves)"]}],"core\/src\/main\/java\/hudson\/slaves\/ComputerRetentionWork.java":[{"add":["2"," *","4"," *","11"," *","14"," *","29","import hudson.model.Queue;","59","        for (final Computer c : Jenkins.getInstance().getComputers()) {","60","            Queue.withLock(new Runnable() {","61","                @Override","62","                public void run() {","63","                    Node n = c.getNode();","64","                    if (n!=null && n.isHoldOffLaunchUntilSave())","65","                        return;","66","                    if (!nextCheck.containsKey(c) || startRun > nextCheck.get(c)) {","67","                        \/\/ at the moment I don't trust strategies to wait more than 60 minutes","68","                        \/\/ strategies need to wait at least one minute","69","                        final long waitInMins = Math.max(1, Math.min(60, c.getRetentionStrategy().check(c)));","70","                        nextCheck.put(c, startRun + waitInMins*1000*60 \/*MINS->MILLIS*\/);","71","                    }","72","                }","73","            });"],"delete":["2"," * ","4"," * ","11"," * ","14"," * ","58","        for (Computer c : Jenkins.getInstance().getComputers()) {","59","            Node n = c.getNode();","60","            if (n!=null && n.isHoldOffLaunchUntilSave())","61","                continue;","62","            if (!nextCheck.containsKey(c) || startRun > nextCheck.get(c)) {","63","                \/\/ at the moment I don't trust strategies to wait more than 60 minutes","64","                \/\/ strategies need to wait at least one minute","65","                final long waitInMins = Math.max(1, Math.min(60, c.getRetentionStrategy().check(c)));","66","                nextCheck.put(c, startRun + waitInMins*1000*60 \/*MINS->MILLIS*\/);","67","            }"]}],"core\/src\/main\/resources\/lib\/layout\/layout.jelly":[{"add":["71","  <j:set var=\"extensionsAvailable\" value=\"${h.extensionsAvailable}\"\/>","74","    <j:if test=\"${extensionsAvailable}\">","75","      <j:forEach var=\"pd\" items=\"${h.pageDecorators}\">","76","        <st:include it=\"${pd}\" page=\"httpHeaders.jelly\" optional=\"true\"\/>","77","      <\/j:forEach>","78","    <\/j:if>","131","    <j:if test=\"${extensionsAvailable}\">","132","      <script>","133","          crumb.init(\"${h.getCrumbRequestField()}\", \"${h.getCrumb(request)}\");","134","      <\/script>","135","    <\/j:if>","150","    <j:if test=\"${extensionsAvailable}\">","151","      <j:forEach var=\"pd\" items=\"${h.pageDecorators}\">","152","        <st:include it=\"${pd}\" page=\"header.jelly\" optional=\"true\" \/>","153","      <\/j:forEach>","154","    <\/j:if>","268","        <j:if test=\"${extensionsAvailable}\">","272","        <\/j:if>"],"delete":["73","    <j:forEach var=\"pd\" items=\"${h.pageDecorators}\">","74","      <st:include it=\"${pd}\" page=\"httpHeaders.jelly\" optional=\"true\"\/>","75","    <\/j:forEach>","128","    <script>","129","        crumb.init(\"${h.getCrumbRequestField()}\", \"${h.getCrumb(request)}\");","130","    <\/script>","145","    <j:forEach var=\"pd\" items=\"${h.pageDecorators}\">","146","      <st:include it=\"${pd}\" page=\"header.jelly\" optional=\"true\" \/>","147","    <\/j:forEach>"]}],"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["39","import net.jcip.annotations.GuardedBy;","51","import java.io.PrintWriter;","52","import java.io.StringWriter;","58","import java.util.concurrent.locks.ReadWriteLock;","59","import java.util.concurrent.locks.ReentrantReadWriteLock;","80","    private final ReadWriteLock lock = new ReentrantReadWriteLock();","82","    @GuardedBy(\"#lock\")","96","    @GuardedBy(\"#lock\")","97","    private Queue.Executable executable;","103","    @GuardedBy(\"#lock\")","104","    private WorkUnit workUnit;","110","    @GuardedBy(\"#lock\")","111","    private boolean started;","117","    @GuardedBy(\"#lock\")","123","    @GuardedBy(\"#lock\")","162","        lock.writeLock().lock();","163","        try {","170","            interruptStatus = result;","171","","176","        } finally {","177","            lock.writeLock().unlock();","183","        lock.readLock().lock();","184","        try {","185","            Result r = interruptStatus;","186","            if (r == null) r =","187","                    Result.ABORTED; \/\/ this is when we programmatically throw InterruptedException instead of calling the interrupt method.","188","","189","            return r;","190","        } finally {","191","            lock.readLock().unlock();","192","        }","203","        \/\/ atomically get&clear causes.","204","        lock.writeLock().lock();","205","        try {","209","        } finally {","210","            lock.writeLock().unlock();","218","    \/**","219","     * There are some cases where an executor is started but the node is removed or goes off-line before we are ready","220","     * to start executing the assigned work unit. This method is called to clear the assigned work unit so that","221","     * the {@link Queue#maintain()} method can return the item to the buildable state.","222","     *","223","     * Note: once we create the {@link Executable} we cannot unwind the state and the build will have to end up being","224","     * marked as a failure.","225","     *\/","226","    private void resetWorkUnit(String reason) {","227","        StringWriter writer = new StringWriter();","228","        PrintWriter pw = new PrintWriter(writer);","229","        try {","230","            pw.printf(\"%s grabbed %s from queue but %s %s. \", getName(), workUnit, owner.getDisplayName(), reason);","231","            if (owner.getTerminatedBy().isEmpty()) {","232","                pw.print(\"No termination trace available.\");","233","            } else {","234","                pw.println(\"Termination trace follows:\");","235","                for (RuntimeException terminator: owner.getTerminatedBy()) {","236","                    terminator.printStackTrace(pw);","237","                }","238","            }","239","        } finally {","240","            pw.close();","241","        }","242","        LOGGER.log(WARNING, writer.toString());","243","        lock.writeLock().lock();","244","        try {","245","            if (executable != null) {","246","                throw new IllegalStateException(\"Cannot reset the work unit after the executable has been created\");","247","            }","248","            workUnit = null;","249","        } finally {","250","            lock.writeLock().unlock();","251","        }","252","    }","253","","256","        if (!owner.isOnline()) {","257","            resetWorkUnit(\"went off-line before the task's worker thread started\");","258","            owner.removeExecutor(this);","259","            queue.scheduleMaintenance();","260","            return;","261","        }","262","        if (owner.getNode() == null) {","263","            resetWorkUnit(\"was removed before the task's worker thread started\");","264","            owner.removeExecutor(this);","265","            queue.scheduleMaintenance();","266","            return;","267","        }","268","        final WorkUnit workUnit;","269","        lock.writeLock().lock();","270","        try {","271","            startTime = System.currentTimeMillis();","272","            workUnit = this.workUnit;","273","        } finally {","274","            lock.writeLock().unlock();","275","        }","285","            task = Queue.withLock(new java.util.concurrent.Callable<SubTask>() {","286","                @Override","287","                public SubTask call() throws Exception {","288","                    if (!owner.isOnline()) {","289","                        resetWorkUnit(\"went off-line before the task's worker thread was ready to execute\");","290","                        return null;","291","                    }","292","                    if (owner.getNode() == null) {","293","                        resetWorkUnit(\"was removed before the task's worker thread was ready to execute\");","294","                        return null;","295","                    }","296","                    \/\/ after this point we cannot unwind the assignment of the work unit, if the owner","297","                    \/\/ is removed or goes off-line then the build will just have to fail.","298","                    workUnit.setExecutor(Executor.this);","299","                    queue.onStartExecuting(Executor.this);","300","                    if (LOGGER.isLoggable(FINE))","301","                        LOGGER.log(FINE, getName()+\" grabbed \"+workUnit+\" from queue\");","302","                    SubTask task = workUnit.work;","303","                    Executable executable = task.createExecutable();","304","                    lock.writeLock().lock();","305","                    try {","306","                        Executor.this.executable = executable;","307","                    } finally {","308","                        lock.writeLock().unlock();","309","                    }","310","                    workUnit.setExecutable(executable);","311","                    return task;","312","                }","313","            });","314","            Executable executable;","315","            lock.readLock().lock();","316","            try {","317","                if (this.workUnit == null) {","318","                    \/\/ we called resetWorkUnit, so bail. Outer finally will remove this and schedule queue maintenance","319","                    return;","320","                }","321","                executable = this.executable;","322","            } finally {","323","                lock.readLock().unlock();","379","            for (RuntimeException e1: owner.getTerminatedBy()) LOGGER.log(Level.WARNING, String.format(\"%s termination trace\", getName()), e1);","403","        lock.readLock().lock();","404","        try {","405","            return executable;","406","        } finally {","407","            lock.readLock().unlock();","408","        }","420","        lock.readLock().lock();","421","        try {","422","            return workUnit;","423","        } finally {","424","            lock.readLock().unlock();","425","        }","434","        lock.readLock().lock();","435","        try {","436","            if (executable == null) {","437","                return null;","438","            }","439","            if (executable instanceof AbstractBuild) {","440","                AbstractBuild ab = (AbstractBuild) executable;","441","                return ab.getWorkspace();","442","            }","443","            return null;","444","        } finally {","445","            lock.readLock().unlock();","473","        lock.readLock().lock();","474","        try {","475","            return workUnit == null && executable == null;","476","        } finally {","477","            lock.readLock().unlock();","478","        }","485","        lock.readLock().lock();","486","        try {","487","            return workUnit != null || executable != null;","488","        } finally {","489","            lock.readLock().unlock();","490","        }","503","        lock.readLock().lock();","504","        try {","505","            return !started || isAlive();","506","        } finally {","507","            lock.readLock().unlock();","508","        }","515","        lock.readLock().lock();","516","        try {","517","            return !started;","518","        } finally {","519","            lock.readLock().unlock();","520","        }","541","        long d;","542","        lock.readLock().lock();","543","        try {","544","            if (executable == null) {","545","                return -1;","546","            }","547","            d = Executables.getEstimatedDurationFor(executable);","548","        } finally {","549","            lock.readLock().unlock();","550","        }","551","        if (d < 0) {","552","            return -1;","553","        }","555","        int num = (int) (getElapsedTime() * 100 \/ d);","556","        if (num >= 100) {","557","            num = 99;","558","        }","571","        long d;","572","        long elapsed;","573","        lock.readLock().lock();","574","        try {","575","            if (executable == null) {","576","                return false;","577","            }","579","            elapsed = getElapsedTime();","580","            d = Executables.getEstimatedDurationFor(executable);","581","        } finally {","582","            lock.readLock().unlock();","583","        }","584","        if (d >= 0) {","586","            return d * 10 < elapsed;","589","            return TimeUnit2.MILLISECONDS.toHours(elapsed) > 24;","594","        lock.readLock().lock();","595","        try {","596","            return System.currentTimeMillis() - startTime;","597","        } finally {","598","            lock.readLock().unlock();","599","        }","608","        lock.readLock().lock();","609","        try {","610","            return startTime - workUnit.context.item.buildableStartMilliseconds;","611","        } finally {","612","            lock.readLock().unlock();","613","        }","631","        long d;","632","        lock.readLock().lock();","633","        try {","634","            if (executable == null) {","635","                return Messages.Executor_NotAvailable();","636","            }","638","            d = Executables.getEstimatedDurationFor(executable);","639","        } finally {","640","            lock.readLock().unlock();","641","        }","642","        if (d < 0) {","643","            return Messages.Executor_NotAvailable();","644","        }","646","        long eta = d - getElapsedTime();","647","        if (eta <= 0) {","648","            return Messages.Executor_NotAvailable();","649","        }","659","        long d;","660","        lock.readLock().lock();","661","        try {","662","            if (executable == null) {","663","                return -1;","664","            }","666","            d = Executables.getEstimatedDurationFor(executable);","667","        } finally {","668","            lock.readLock().unlock();","669","        }","670","        if (d < 0) {","671","            return -1;","672","        }","674","        long eta = d - getElapsedTime();","675","        if (eta <= 0) {","676","            return -1;","677","        }","688","    public void start() {","692","    \/*protected*\/ void start(WorkUnit task) {","693","        lock.writeLock().lock();","694","        try {","695","            this.workUnit = task;","696","            super.start();","697","            started = true;","698","        } finally {","699","            lock.writeLock().unlock();","700","        }","720","        lock.writeLock().lock(); \/\/ need write lock as interrupt will change the field","721","        try {","722","            if (executable != null) {","723","                Tasks.getOwnerTaskOf(getParentOf(executable)).checkAbortPermission();","724","                interrupt();","725","            }","726","        } finally {","727","            lock.writeLock().unlock();","748","        lock.readLock().lock();","749","        try {","750","            return executable != null && Tasks.getOwnerTaskOf(getParentOf(executable)).hasAbortPermission();","751","        } finally {","752","            lock.readLock().unlock();","753","        }","764","        lock.readLock().lock();","765","        try {","766","            if (isIdle())","767","                return Math.max(creationTime, owner.getConnectTime());","768","            else {","769","                return Math.max(startTime + Math.max(0, Executables.getEstimatedDurationFor(executable)),","770","                        System.currentTimeMillis() + 15000);","771","            }","772","        } finally {","773","            lock.readLock().unlock();"],"delete":["89","    private volatile Queue.Executable executable;","95","    private volatile WorkUnit workUnit;","101","    private volatile boolean started;","150","        synchronized (this) {","156","        }","158","        interruptStatus = result;","159","        synchronized (this.causes) {","169","        Result r = interruptStatus;","170","        if (r==null)    r = Result.ABORTED; \/\/ this is when we programmatically throw InterruptedException instead of calling the interrupt method.","171","        return r;","182","        \/\/ atomically get&clear causes, and minimize the lock.","183","        synchronized (causes) {","196","        startTime = System.currentTimeMillis();","206","            synchronized (queue) {","207","                workUnit.setExecutor(this);","208","                queue.onStartExecuting(this);","209","                if (LOGGER.isLoggable(FINE))","210","                    LOGGER.log(FINE, getName()+\" grabbed \"+workUnit+\" from queue\");","211","                task = workUnit.work;","212","                executable = task.createExecutable();","213","                workUnit.setExecutable(executable);","292","        return executable;","304","        return workUnit;","313","        Executable e = executable;","314","        if(e==null) return null;","315","        if (e instanceof AbstractBuild) {","316","            AbstractBuild ab = (AbstractBuild) e;","317","            return ab.getWorkspace();","319","        return null;","346","        return executable==null;","353","        return executable!=null;","366","        return !started || isAlive();","373","        return !started;","394","        Queue.Executable e = executable;","395","        if(e==null)     return -1;","396","        long d = Executables.getEstimatedDurationFor(e);","397","        if(d<0)         return -1;","399","        int num = (int)(getElapsedTime()*100\/d);","400","        if(num>=100)    num=99;","413","        Queue.Executable e = executable;","414","        if(e==null)     return false;","416","        long elapsed = getElapsedTime();","417","        long d = Executables.getEstimatedDurationFor(e);","418","        if(d>=0) {","420","            return d*10 < elapsed;","423","            return TimeUnit2.MILLISECONDS.toHours(elapsed)>24;","428","        return System.currentTimeMillis() - startTime;","437","        return startTime - workUnit.context.item.buildableStartMilliseconds;","455","        Queue.Executable e = executable;","456","        if(e==null)     return Messages.Executor_NotAvailable();","458","        long d = Executables.getEstimatedDurationFor(e);","459","        if(d<0)         return Messages.Executor_NotAvailable();","461","        long eta = d-getElapsedTime();","462","        if(eta<=0)      return Messages.Executor_NotAvailable();","472","        Queue.Executable e = executable;","473","        if(e==null)     return -1;","475","        long d = Executables.getEstimatedDurationFor(e);","476","        if(d<0)         return -1;","478","        long eta = d-getElapsedTime();","479","        if(eta<=0)      return -1;","490","    public synchronized void start() {","494","    \/*protected*\/ synchronized void start(WorkUnit task) {","495","        this.workUnit = task;","496","        super.start();","497","        started = true;","517","        Queue.Executable e = executable;","518","        if(e!=null) {","519","            Tasks.getOwnerTaskOf(getParentOf(e)).checkAbortPermission();","520","            interrupt();","541","        Queue.Executable e = executable;","542","        return e!=null && Tasks.getOwnerTaskOf(getParentOf(e)).hasAbortPermission();","553","        if (isIdle())","554","            return Math.max(creationTime, owner.getConnectTime());","555","        else {","556","            return Math.max(startTime + Math.max(0, Executables.getEstimatedDurationFor(executable)),","557","                    System.currentTimeMillis() + 15000);"]}]}},"4fdf09c90272e367778da71cac86cd8795f070a8":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SubversionSCM.java":"MODIFY","core\/pom.xml":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SubversionSCM.java":[{"add":["11","import hudson.remoting.Callable;","15","import hudson.util.IOException2;","541","            abstract SVNAuthentication createSVNAuthentication(String kind) throws SVNException;","617","            SVNSSHAuthentication createSVNAuthentication(String kind) throws SVNException {","618","                if(kind.equals(ISVNAuthenticationManager.SSH)) {","619","                    try {","620","                        Channel channel = Channel.current();","621","                        String privateKey;","622","                        if(channel!=null) {","623","                            \/\/ remote","624","                            privateKey = channel.call(new Callable<String,IOException>() {","625","                                public String call() throws IOException {","626","                                    return FileUtils.readFileToString(getKeyFile(),\"iso-8859-1\");","627","                                }","628","                            });","629","                        } else {","630","                            privateKey = FileUtils.readFileToString(getKeyFile(),\"iso-8859-1\");","631","                        }","632","                        return new SVNSSHAuthentication(userName, privateKey, Scrambler.descramble(passphrase),-1,false);","633","                    } catch (IOException e) {","634","                        throw new SVNException(SVNErrorMessage.create(SVNErrorCode.AUTHN_CREDS_UNAVAILABLE,\"Unable to load private key\"),e);","635","                    } catch (InterruptedException e) {","636","                        throw new SVNException(SVNErrorMessage.create(SVNErrorCode.AUTHN_CREDS_UNAVAILABLE,\"Unable to load private key\"),e);","637","                    }","638","                } else","677","                try {","678","                    return cred.createSVNAuthentication(kind);","679","                } catch (SVNException e) {","680","                    logger.log(Level.SEVERE, \"Failed to authorize\",e);","681","                    return null;","682","                }"],"delete":["16","import hudson.util.IOException2;","540","            abstract SVNAuthentication createSVNAuthentication(String kind);","616","            SVNSSHAuthentication createSVNAuthentication(String kind) {","617","                if(kind.equals(ISVNAuthenticationManager.SSH))","618","                    return new SVNSSHAuthentication(userName,","619","                        getKeyFile(),","620","                        Scrambler.descramble(passphrase),-1,false);","621","                else","660","                return cred.createSVNAuthentication(kind);"]}],"core\/pom.xml":[{"add":["111","      <version>1.1.2-hudson-1<\/version>"],"delete":["111","      <version>1.1.2<\/version>"]}]}},"8c1b8b8e144280f9645eaf761ed7f5e894ac7353":{"changes":{"core\/src\/main\/java\/hudson\/ExtensionFinder.java":"MODIFY","test\/src\/test\/resources\/plugins\/variant.hpi":"ADD","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","test\/src\/test\/resources\/plugins\/jenkins-50336.hpi":"ADD","test\/src\/test\/java\/hudson\/PluginManagerTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ExtensionFinder.java":[{"add":["256","            refreshExtensionAnnotations();","258","            SezpozModule extensions = new SezpozModule(loadSezpozIndices(Jenkins.getInstance().getPluginManager().uberClassLoader));","269","            modules.add(extensions);","277","                sezpozIndex = extensions.getLoadedIndex();","293","        private void refreshExtensionAnnotations() {","294","            for (ExtensionComponent<GuiceExtensionAnnotation> ec : moduleFinder.find(GuiceExtensionAnnotation.class, Hudson.getInstance())) {","295","                GuiceExtensionAnnotation gea = ec.getInstance();","296","                extensionAnnotations.put(gea.annotationType,gea);","297","            }","298","        }","299","","322","            refreshExtensionAnnotations();","328","","329","            SezpozModule deltaExtensions = new SezpozModule(delta);","332","            modules.add(deltaExtensions);","340","                List<IndexItem<?, Object>> l = Lists.newArrayList(sezpozIndex);","341","                l.addAll(deltaExtensions.getLoadedIndex());","342","                sezpozIndex = l;","458","            private final List<IndexItem<?,Object>> loadedIndex;","462","                this.loadedIndex = new ArrayList<>();","539","                        loadedIndex.add(item);","548","","549","            public List<IndexItem<?, Object>> getLoadedIndex() {","550","                return Collections.unmodifiableList(loadedIndex);","551","            }"],"delete":["256","            for (ExtensionComponent<GuiceExtensionAnnotation> ec : moduleFinder.find(GuiceExtensionAnnotation.class, Hudson.getInstance())) {","257","                GuiceExtensionAnnotation gea = ec.getInstance();","258","                extensionAnnotations.put(gea.annotationType,gea);","259","            }","261","            sezpozIndex = loadSezpozIndices(Jenkins.getInstance().getPluginManager().uberClassLoader);","272","            modules.add(new SezpozModule(sezpozIndex));","322","            List<IndexItem<?, Object>> l = Lists.newArrayList(sezpozIndex);","323","            l.addAll(delta);","324","            sezpozIndex = l;","327","            modules.add(new SezpozModule(delta));"]}],"test\/src\/test\/resources\/plugins\/variant.hpi":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["28","import jenkins.ExtensionRefreshException;","924","            try {","925","                Jenkins.get().refreshExtensions();","926","            } catch (ExtensionRefreshException e) {","927","                throw new IOException(\"Failed to refresh extensions after installing \" + sn + \" plugin\", e);","928","            }"],"delete":[]}],"test\/src\/test\/resources\/plugins\/jenkins-50336.hpi":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/PluginManagerTest.java":[{"add":["48","import jenkins.model.GlobalConfiguration;","49","","346","        \/\/ extensions in depender are loaded.","347","        assertFalse(r.jenkins.getExtensionList(\"org.jenkinsci.plugins.dependencytest.dependee.DependeeExtensionPoint\").isEmpty());","537","","538","    \/\/ Sources for jenkins-50336.hpi are available at https:\/\/github.com\/Vlatombe\/jenkins-50336","539","    \/\/","540","    \/\/ package io.jenkins.plugins;","541","    \/\/ import org.jenkinsci.plugins.variant.OptionalExtension;","542","    \/\/ import jenkins.model.GlobalConfiguration;","543","    \/\/ @OptionalExtension public class MyGlobalConfiguration extends GlobalConfiguration {}","544","    \/\/","545","    @Issue(\"JENKINS-50336\")","546","    @Test","547","    public void optionalExtensionCanBeFoundAfterDynamicLoadOfVariant() throws Exception {","548","        dynamicLoad(\"variant.hpi\");","549","        assertNotNull(r.jenkins.getPluginManager().getPlugin(\"variant\"));","550","        dynamicLoad(\"jenkins-50336.hpi\");","551","        assertTrue(ExtensionList.lookup(GlobalConfiguration.class).stream().anyMatch(gc -> \"io.jenkins.plugins.MyGlobalConfiguration\".equals(gc.getClass().getName())));","552","    }"],"delete":["344","        \/\/ extensions in depender is not loaded.","345","        assertTrue(r.jenkins.getExtensionList(\"org.jenkinsci.plugins.dependencytest.dependee.DependeeExtensionPoint\").isEmpty());"]}]}},"05b9727edf1089b1c5e6e9461b4f62c71790065e":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["62","  <li class=bug>","63","    Fixed a deadlock when upstream and downstream jobs are blocked on each other","64","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8929\">issue 8929<\/a>)"],"delete":[]}]}},"99f8b3f8669ee5c180b6c30226cf3850d6adad94":{"changes":{"core\/src\/main\/java\/hudson\/security\/ACL.java":"MODIFY","test\/src\/test\/java\/hudson\/security\/ACLTest.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/StackTraceSuppressionTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/ACL.java":[{"add":["30","import java.util.HashSet;","31","import java.util.LinkedHashSet;","32","import java.util.Set;","104","        if (failed) { \/\/ we know that none of the permissions are granted","105","            Set<Permission> enabledPermissions = new LinkedHashSet<>();","106","            for (Permission p : permissions) {","107","                while (!p.enabled && p.impliedBy != null) {","108","                    p = p.impliedBy;","109","                }","110","                enabledPermissions.add(p);","111","            }","112","            String permissionsDisplayName = enabledPermissions.stream()","117","            if (enabledPermissions.size() == 1) {"],"delete":["101","        if (failed) {","102","            String permissionsDisplayName = Arrays.stream(permissions)","107","            if (permissions.length == 1) {"]}],"test\/src\/test\/java\/hudson\/security\/ACLTest.java":[{"add":["26","import hudson.model.Build;","118","    @Issue(\"JENKINS-61467\")","119","    public void checkAnyPermissionDoesNotShowDisabledPermissionsInError() throws Exception {","120","        Jenkins jenkins = r.jenkins;","121","        jenkins.setSecurityRealm(r.createDummySecurityRealm());","122","        jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy()","123","                .grant(Jenkins.READ).everywhere().to(\"manager\")","124","        );","125","","126","        final User manager = User.getOrCreateByIdOrFullName(\"manager\");","127","","128","        expectedException.expectMessage(\"manager is missing the Overall\/Administer permission\");","129","        expectedException.expect(AccessDeniedException.class);","130","        try (ACLContext ignored = ACL.as(manager.impersonate())) {","131","            jenkins.getACL().checkAnyPermission(Jenkins.MANAGE, Jenkins.SYSTEM_READ);","132","        }","133","    }","134","","135","    @Test","136","    @Issue(\"JENKINS-61467\")","137","    public void checkAnyPermissionShouldShowDisabledPermissionsIfNotImplied() throws Exception {","138","        Jenkins jenkins = r.jenkins;","139","        jenkins.setSecurityRealm(r.createDummySecurityRealm());","140","        jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy()","141","                .grant(Jenkins.READ).everywhere().to(\"manager\")","142","        );","143","","144","        final User manager = User.getOrCreateByIdOrFullName(\"manager\");","145","","146","        expectedException.expectMessage(\"manager is missing a permission, one of Job\/WipeOut, Run\/Artifacts is required\");","147","        expectedException.expect(AccessDeniedException.class);","148","        try (ACLContext ignored = ACL.as(manager.impersonate())) {","149","            jenkins.getACL().checkAnyPermission(Item.WIPEOUT, Build.ARTIFACTS);","150","        }","151","    }","152","","153","    @Test"],"delete":[]}],"test\/src\/test\/java\/jenkins\/security\/StackTraceSuppressionTest.java":[{"add":["76","        assertThat(content, containsString(alice.getId() + \" is missing the Overall\/Administer permission\"));"],"delete":["76","        assertThat(content, containsString(alice.getId() + \" is missing a permission\"));"]}]}},"695a35191d22a12f47906922ec709705faf48647":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["131","            if (req.getParameter(\"parameterized\") == null) {","132","            \treturn null;","133","            }","134","            "],"delete":[]}]}},"2a548fa9ee9aa28b67518ef835b584cc41569455":{"changes":{"war\/jest.config.json":"MODIFY"},"diff":{"war\/jest.config.json":[{"add":["5","  \"reporters\": [\"jest-standard-reporter\"],","6","  \"roots\": [\"<rootDir>\/src\"]"],"delete":["5","  \"reporters\": [\"jest-standard-reporter\"]"]}]}},"ebb84da617a989d9d1bff8660d9903d89ca3ea41":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["562","                    \/\/ And then add the current plugin ","563","                    dependencySet.add(dependencyURL);"],"delete":["560","                    dependencySet.add(dependencyURL);"]}]}},"ad87c2e64653fec5138eb80419d02486a0dcc72b":{"changes":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["1251","        \/\/ Fallback to subview of primary view if it is a ViewGroup","1252","        View pv = getPrimaryView();","1253","        if (pv instanceof ViewGroup)","1254","            return ((ViewGroup)pv).getView(name);"],"delete":[]}]}},"e98e402810425822f2e039fb239632c205709efc":{"changes":{"core\/src\/main\/java\/hudson\/maven\/PomInfo.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/PomInfo.java":[{"add":["3","import org.apache.maven.model.Dependency;","4","import org.apache.maven.model.Extension;","5","import org.apache.maven.model.Notifier;","6","import org.apache.maven.model.Plugin;","7","import org.apache.maven.model.ReportPlugin;","8","import org.apache.maven.project.MavenProject;","13","import java.util.Set;","76","        if(parent!=null)","77","            dependencies.add(parent.name);"],"delete":["2","import org.apache.maven.project.MavenProject;","3","import org.apache.maven.model.Dependency;","4","import org.apache.maven.model.Plugin;","5","import org.apache.maven.model.Extension;","6","import org.apache.maven.model.ReportPlugin;","7","import org.apache.maven.model.Notifier;","11","import java.util.Set;","14","","15","import hudson.maven.reporters.MavenMailer;"]}]}},"52a1a1035fa71a2e023e93c083a626898bcb0d47":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/JobTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY","core\/src\/main\/java\/hudson\/model\/RestartListener.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/queue\/ItemDeletion.java":"ADD","core\/src\/main\/java\/hudson\/model\/queue\/Tasks.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":[],"delete":["264","    @Override","265","    protected void performDelete() throws IOException, InterruptedException {","266","        \/\/ if a build is in progress. Cancel it.","267","        RunT lb = getLastBuild();","268","        if (lb != null) {","269","            Executor e = lb.getExecutor();","270","            if (e != null) {","271","                e.interrupt();","272","                \/\/ should we block until the build is cancelled?","273","            }","274","        }","275","        super.performDelete();","276","    }","277",""]}],"test\/src\/test\/java\/hudson\/model\/JobTest.java":[{"add":["34","import hudson.model.queue.QueueTaskFuture;","36","import hudson.util.TimeUnit2;","43","import java.util.concurrent.TimeUnit;","46","import org.hamcrest.Matchers;","54","import org.jvnet.hudson.test.SleepBuilder;","358","    @Issue(\"JENKINS-35160\")","359","    @Test","360","    public void interruptOnDelete() throws Exception {","361","        j.jenkins.setNumExecutors(2);","362","        Queue.getInstance().maintain();","363","        final FreeStyleProject p = j.createFreeStyleProject();","364","        p.addProperty(new ParametersDefinitionProperty(","365","                new StringParameterDefinition(\"dummy\", \"0\")));","366","        p.setConcurrentBuild(true);","367","        p.getBuildersList().add(new SleepBuilder(30000));  \/\/ we want the uninterrupted job to run for long time","368","        FreeStyleBuild build1 = p.scheduleBuild2(0).getStartCondition().get();","369","        FreeStyleBuild build2 = p.scheduleBuild2(0).getStartCondition().get();","370","        QueueTaskFuture<FreeStyleBuild> build3 = p.scheduleBuild2(0);","371","        long start = System.nanoTime();","372","        p.delete();","373","        long end = System.nanoTime();","374","        assertThat(end - start, Matchers.lessThan(TimeUnit.SECONDS.toNanos(1)));","375","        assertThat(build1.getResult(), Matchers.is(Result.ABORTED));","376","        assertThat(build2.getResult(), Matchers.is(Result.ABORTED));","377","        assertThat(build3.isCancelled(), Matchers.is(true));","378","    }","379",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["35","import hudson.model.queue.Tasks;","36","import hudson.model.queue.WorkUnit;","45","import java.util.Iterator;","46","import java.util.LinkedHashMap;","47","import java.util.Map;","48","import java.util.concurrent.TimeUnit;","51","import jenkins.model.queue.ItemDeletion;","88","import static hudson.model.queue.Executables.getParentOf;","587","        boolean responsibleForAbortingBuilds = !ItemDeletion.contains(this);","588","        boolean ownsRegistration = ItemDeletion.register(this);","589","        if (!ownsRegistration && ItemDeletion.isRegistered(this)) {","590","            \/\/ we are not the owning thread and somebody else is concurrently deleting this exact item","591","            throw new Failure(Messages.AbstractItem_BeingDeleted(getPronoun()));","592","        }","593","        try {","594","            \/\/ if a build is in progress. Cancel it.","595","            if (responsibleForAbortingBuilds || ownsRegistration) {","596","                Queue queue = Queue.getInstance();","597","                if (this instanceof Queue.Task) {","598","                    \/\/ clear any items in the queue so they do not get picked up","599","                    queue.cancel((Queue.Task) this);","600","                }","601","                \/\/ now cancel any child items - this happens after ItemDeletion registration, so we can use a snapshot","602","                for (Queue.Item i : queue.getItems()) {","603","                    Item item = Tasks.getItemOf(i.task);","604","                    while (item != null) {","605","                        if (item == this) {","606","                            queue.cancel(i);","607","                            break;","608","                        }","609","                        if (item.getParent() instanceof Item) {","610","                            item = (Item) item.getParent();","611","                        } else {","612","                            break;","613","                        }","614","                    }","615","                }","616","                \/\/ interrupt any builds in progress (and this should be a recursive test so that folders do not pay","617","                \/\/ the 15 second delay for every child item). This happens after queue cancellation, so will be","618","                \/\/ a complete set of builds in flight","619","                Map<Executor, Queue.Executable> buildsInProgress = new LinkedHashMap<>();","620","                for (Computer c : Jenkins.getInstance().getComputers()) {","621","                    for (Executor e : c.getAllExecutors()) {","622","                        WorkUnit workUnit = e.getCurrentWorkUnit();","623","                        if (workUnit != null) {","624","                            Item item = Tasks.getItemOf(getParentOf(workUnit.getExecutable()));","625","                            if (item != null) {","626","                                while (item != null) {","627","                                    if (item == this) {","628","                                        buildsInProgress.put(e, e.getCurrentExecutable());","629","                                        e.interrupt(Result.ABORTED);","630","                                        break;","631","                                    }","632","                                    if (item.getParent() instanceof Item) {","633","                                        item = (Item) item.getParent();","634","                                    } else {","635","                                        break;","636","                                    }","637","                                }","638","                            }","639","                        }","640","                    }","641","                }","642","                if (!buildsInProgress.isEmpty()) {","643","                    \/\/ give them 15 seconds or so to respond to the interrupt","644","                    long expiration = System.nanoTime() + TimeUnit.SECONDS.toNanos(15);","645","                    \/\/ comparison with executor.getCurrentExecutable() == computation currently should always be true","646","                    \/\/ as we no longer recycle Executors, but safer to future-proof in case we ever revisit recycling","647","                    while (!buildsInProgress.isEmpty() && expiration - System.nanoTime() > 0L) {","648","                        \/\/ we know that ItemDeletion will prevent any new builds in the queue","649","                        \/\/ ItemDeletion happens-before Queue.cancel so we know that the Queue will stay clear","650","                        \/\/ Queue.cancel happens-before collecting the buildsInProgress list","651","                        \/\/ thus buildsInProgress contains the complete set we need to interrupt and wait for","652","                        for (Iterator<Map.Entry<Executor, Queue.Executable>> iterator =","653","                             buildsInProgress.entrySet().iterator();","654","                             iterator.hasNext(); ) {","655","                            Map.Entry<Executor, Queue.Executable> entry = iterator.next();","656","                            \/\/ comparison with executor.getCurrentExecutable() == executable currently should always be","657","                            \/\/ true as we no longer recycle Executors, but safer to future-proof in case we ever","658","                            \/\/ revisit recycling.","659","                            if (!entry.getKey().isAlive()","660","                                    || entry.getValue() != entry.getKey().getCurrentExecutable()) {","661","                                iterator.remove();","662","                            }","663","                            \/\/ I don't know why, but we have to keep interrupting","664","                            entry.getKey().interrupt(Result.ABORTED);","665","                        }","666","                        Thread.sleep(50L);","667","                    }","668","                    if (!buildsInProgress.isEmpty()) {","669","                        throw new Failure(Messages.AbstractItem_FailureToStopBuilds(","670","                                buildsInProgress.size(), getFullDisplayName()","671","                        ));","672","                    }","673","                }","674","            }","675","            synchronized (this) { \/\/ could just make performDelete synchronized but overriders might not honor that","676","                performDelete();","677","            } \/\/ JENKINS-19446: leave synch block, but JENKINS-22001: still notify synchronously","678","        } finally {","679","            if (ownsRegistration) {","680","                ItemDeletion.deregister(this);","681","            }","682","        }"],"delete":["579","        synchronized (this) { \/\/ could just make performDelete synchronized but overriders might not honor that","580","            performDelete();","581","        } \/\/ JENKINS-19446: leave synch block, but JENKINS-22001: still notify synchronously"]}],"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["34","AbstractItem.BeingDeleted={0} is currently being deleted","35","AbstractItem.FailureToStopBuilds=Failed to interrupt and stop {0,choice,1#{0,number,integer} build|1<{0,number,integer} \\","36","  builds} of {1}"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/RestartListener.java":[{"add":["57","                    for (Executor e : c.getAllExecutors()) {"],"delete":["57","                    for (Executor e : c.getExecutors()) {","58","                        if (blocksRestart(e)) {","59","                            return false;","60","                        }","61","                    }","62","                    for (Executor e : c.getOneOffExecutors()) {"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["974","     * Gets the read-only snapshot view of all {@link Executor} instances including {@linkplain OneOffExecutor}s.","975","     *","976","     * @return the read-only snapshot view of all {@link Executor} instances including {@linkplain OneOffExecutor}s.","977","     * @since TODO","978","     *\/","979","    public List<Executor> getAllExecutors() {","980","        List<Executor> result = new ArrayList<>(executors.size() + oneOffExecutors.size());","981","        result.addAll(executors);","982","        result.addAll(oneOffExecutors);","983","        return result;","984","    }","985","","986","    \/**"],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/queue\/ItemDeletion.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/queue\/Tasks.java":[{"add":["25","import hudson.model.Queue;","29","import javax.annotation.CheckForNull;","38","import static hudson.model.queue.Executables.getParentOf;","39","","73","     * Gets the {@link hudson.model.Item} most closely associated with the supplied {@link SubTask}.","74","     * @param t the {@link SubTask}.","75","     * @return the {@link hudson.model.Item} associated with the {@link SubTask} or {@code null} if this","76","     * {@link SubTask} is not associated with an {@link hudson.model.Item}","77","     * @since TODO","78","     *\/","79","    @CheckForNull","80","    public static hudson.model.Item getItemOf(@Nonnull SubTask t) {","81","        \/\/ TODO move to default method on SubTask once code level is Java 8","82","        Queue.Task p = getOwnerTaskOf(t);","83","        while (!(p instanceof hudson.model.Item)) {","84","            Queue.Task o = getOwnerTaskOf(p);","85","            if (o == p) {","86","                break;","87","            }","88","            p = o;","89","        }","90","        return p instanceof hudson.model.Item ? (hudson.model.Item)p : null;","91","    }","92","","93","    \/**"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["943","            for (Executor executor : computer.getAllExecutors()) {"],"delete":["943","            for (Executor executor : computer.getExecutors()) {","944","                if (executor.getCurrentExecutable() == executable) {","945","                    return executor;","946","                }","947","            }","948","            for (Executor executor : computer.getOneOffExecutors()) {"]}]}},"211f6b56055b5ded7e124634046508d8d5e22180":{"changes":{"core\/src\/main\/java\/hudson\/scm\/ChangeLogSet.java":"MODIFY","core\/src\/test\/java\/hudson\/MarkupTextTest.java":"MODIFY","test\/src\/test\/java\/hudson\/console\/ConsoleAnnotatorTest.java":"MODIFY","core\/src\/main\/java\/hudson\/AbstractMarkupText.java":"MODIFY","core\/src\/main\/java\/hudson\/console\/ConsoleAnnotationOutputStream.java":"MODIFY","core\/src\/main\/java\/hudson\/MarkupText.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/ChangeLogSet.java":[{"add":["170","            MarkupText markup = new MarkupText(getMsg());"],"delete":["170","            MarkupText markup = new MarkupText(getMsgEscaped());"]}],"core\/src\/test\/java\/hudson\/MarkupTextTest.java":[{"add":["87","    public void testEscape() {","88","        MarkupText text = new MarkupText(\"&&&\");","89","        assertEquals(\"&amp;&amp;&amp;\",text.toString());","90","","91","        text.addMarkup(1,\"<foo>\");","92","        text.addMarkup(2,\"&nbsp;\");","93","        assertEquals(\"&amp;<foo>&amp;&nbsp;&amp;\",text.toString());","94","    }","95",""],"delete":[]}],"test\/src\/test\/java\/hudson\/console\/ConsoleAnnotatorTest.java":[{"add":["12","import org.jvnet.hudson.test.Bug;","265","","266","","267","    \/**","268","     * Makes sure '<', '&', are escaped.","269","     *\/","270","    @Bug(5952)","271","    public void testEscape() throws Exception {","272","        FreeStyleProject p = createFreeStyleProject();","273","        p.getBuildersList().add(new TestBuilder() {","274","            @Override","275","            public boolean perform(AbstractBuild<?, ?> build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {","276","                listener.getLogger().println(\"<b>&amp;<\/b>\");","277","                return true;","278","            }","279","        });","280","","281","        FreeStyleBuild b = buildAndAssertSuccess(p);","282","        HtmlPage html = createWebClient().getPage(b, \"console\");","283","        String text = html.asText();","284","        System.out.println(text);","285","        assertTrue(text.contains(\"<b>&amp;<\/b>\"));","286","        assertTrue(b.getLog().contains(\"<b>&amp;<\/b>\"));","287","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/AbstractMarkupText.java":[{"add":["47","     * any markup, nor any escape."],"delete":["47","     * any markup."]}],"core\/src\/main\/java\/hudson\/console\/ConsoleAnnotationOutputStream.java":[{"add":["145","        out.write(mt.toString()); \/\/ this perform escapes"],"delete":["145","        out.write(mt.toString());"]}],"core\/src\/main\/java\/hudson\/MarkupText.java":[{"add":["205","    \/**","206","     *","207","     * @param text","208","     *      Plain text. This shouldn't include any markup nor escape. Those are done later in {@link #toString()}.","209","     *\/","248","            return Util.escape(text);    \/\/ the most common case","251","","253","        int copied = 0; \/\/ # of chars already copied from text to buf","254","","256","            if (copied<tag.pos) {","257","                buf.append(Util.escape(text.substring(copied,tag.pos)));","258","                copied = tag.pos;","259","            }","260","            buf.append(tag.markup);","262","        if (copied<text.length())","263","            buf.append(Util.escape(text.substring(copied,text.length())));"],"delete":["243","            return text;    \/\/ the most common case","245","        \/\/ somewhat inefficient implementation, if there are a lot of mark up and text is large.","248","        buf.append(text);","249","        int offset = 0;     \/\/ remember the # of chars inserted.","251","            buf.insert(tag.pos+offset,tag.markup);","252","            offset += tag.markup.length();"]}]}},"79c0bbf76680c8491e601be76d062299b7170971":{"changes":{"core\/src\/main\/java\/hudson\/triggers\/Trigger.java":"MODIFY","core\/src\/test\/java\/hudson\/triggers\/TimerTriggerTest.java":"ADD","core\/src\/main\/java\/hudson\/triggers\/TimerTrigger.java":"MODIFY","core\/src\/test\/java\/hudson\/triggers\/SCMTriggerTest.java":"ADD","core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/triggers\/Trigger.java":[{"add":["4"," *               2015 Kanstantsin Shautsou","5"," *","152","    @CheckForNull"],"delete":["4"," * "]}],"core\/src\/test\/java\/hudson\/triggers\/TimerTriggerTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/triggers\/TimerTrigger.java":[{"add":["4"," *               2015 Kanstantsin Shautsou","55","        if (job == null) {","56","            return;","57","        }","58",""],"delete":[]}],"core\/src\/test\/java\/hudson\/triggers\/SCMTriggerTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":[{"add":["4"," *               2015 Kanstantsin Shautsou","27","import com.google.common.base.Preconditions;","121","        if (job == null) {","122","            return;","123","        }","124","","136","        if (job == null) {","137","            return;","138","        }","139","","164","        if (job == null) {","165","            return Collections.emptyList();","166","        }","167","","473","            this(null);","477","            Preconditions.checkNotNull(job, \"Runner can't be instantiated when job is null\");","478","","550","            if (job == null) {","551","                return;","552","            }","553",""],"delete":["459","            additionalActions = new Action[0];"]}]}},"4204d22496a77c2ccc0bb9f959592a01e27fb54d":{"changes":{"core\/src\/test\/java\/hudson\/EnvVarsTest.java":"MODIFY","core\/src\/main\/java\/hudson\/EnvVars.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/EnvVarsTest.java":[{"add":["25","import hudson.EnvVars.OverrideOrderCalculator;","28","import java.util.Arrays;","30","import java.util.Iterator;","31","import java.util.List;","32","import java.util.Map;","46","    ","47","    public void testOverrideExpandingAll() throws Exception {","48","        EnvVars env = new EnvVars();","49","        env.put(\"PATH\", \"orig\");","50","        env.put(\"A\", \"Value1\");","51","        ","52","        EnvVars overrides = new EnvVars();","53","        overrides.put(\"PATH\", \"append\" + Platform.current().pathSeparator + \"${PATH}\");","54","        overrides.put(\"B\", \"${A}Value2\");","55","        overrides.put(\"C\", \"${B}${D}\");","56","        overrides.put(\"D\", \"${E}\");","57","        overrides.put(\"E\", \"Value3\");","58","        overrides.put(\"PATH+TEST\", \"another\");","59","        ","60","        env.overrideExpandingAll(overrides);","61","        ","62","        assertEquals(\"Value1Value2Value3\", env.get(\"C\"));","63","        assertEquals(\"another\" + Platform.current().pathSeparator + \"append\" + Platform.current().pathSeparator + \"orig\", env.get(\"PATH\"));","64","    }","65","    ","66","    public void testOverrideOrderCalculatorSimple() {","67","        EnvVars env = new EnvVars();","68","        EnvVars overrides = new EnvVars();","69","        overrides.put(\"A\", \"NoReference\");","70","        overrides.put(\"A+B\", \"NoReference\");","71","        overrides.put(\"B\", \"Refer1${A}\");","72","        overrides.put(\"C\", \"Refer2${B}\");","73","        overrides.put(\"D\", \"Refer3${B}${Nosuch}\");","74","        ","75","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides);","76","        assertEquals(0, calc.getRefereeNum(\"A\"));","77","        assertEquals(0, calc.getRefereeNum(\"A+B\"));","78","        assertEquals(0, calc.getRefereeNum(\"Nosuch\"));","79","        assertEquals(1, calc.getRefereeNum(\"B\"));","80","        assertEquals(2, calc.getRefereeNum(\"C\"));","81","        assertEquals(3, calc.getRefereeNum(\"D\"));","82","        ","83","        List<Map.Entry<String,String>> order = calc.getOrderedVariables();","84","        assertEquals(5, order.size());","85","        assertEquals(\"A\", order.get(0).getKey());","86","        assertEquals(\"B\", order.get(1).getKey());","87","        assertEquals(\"C\", order.get(2).getKey());","88","        assertEquals(\"D\", order.get(3).getKey());","89","        assertEquals(\"A+B\", order.get(4).getKey());","90","    }","91","    ","92","    public void testOverrideOrderCalculatorInOrder() {","93","        EnvVars env = new EnvVars();","94","        EnvVars overrides = new EnvVars();","95","        overrides.put(\"A\", \"NoReference\");","96","        overrides.put(\"B\", \"${A}\");","97","        overrides.put(\"C\", \"${B}\"); \/\/ refers A, B","98","        overrides.put(\"D\", \"${E}\"); \/\/ refers A, B, C, E","99","        overrides.put(\"E\", \"${C}\"); \/\/ refers A, B, C","100","        ","101","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides) {","102","            @Override","103","            protected Iterator<String> rawKeyIterator() {","104","                \/\/ should process in this order.","105","                return Arrays.asList(\"A\", \"B\", \"C\", \"D\", \"E\", \"F\").iterator();","106","            }","107","        };","108","        assertEquals(0, calc.getRefereeNum(\"A\"));","109","        assertEquals(1, calc.getRefereeNum(\"B\"));","110","        assertEquals(2, calc.getRefereeNum(\"C\"));","111","        assertEquals(4, calc.getRefereeNum(\"D\"));","112","        assertEquals(3, calc.getRefereeNum(\"E\"));","113","    }","114","    ","115","    public void testOverrideOrderCalculatorMultiple() {","116","        EnvVars env = new EnvVars();","117","        EnvVars overrides = new EnvVars();","118","        overrides.put(\"A\", \"Noreference\");","119","        overrides.put(\"B\", \"${A}\");","120","        overrides.put(\"C\", \"${A}${B}\");","121","        ","122","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides);","123","        assertEquals(0, calc.getRefereeNum(\"A\"));","124","        assertEquals(1, calc.getRefereeNum(\"B\"));","125","        assertEquals(2, calc.getRefereeNum(\"C\"));","126","    }","127","    ","128","    public void testOverrideOrderCalculatorSelfReference() {","129","        EnvVars env = new EnvVars();","130","        EnvVars overrides = new EnvVars();","131","        overrides.put(\"PATH\", \"some;${PATH}\");","132","        ","133","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides);","134","        assertEquals(1, calc.getRefereeNum(\"PATH\"));","135","    }","136","    ","137","    public void testOverrideOrderCalculatorCyclic() {","138","        EnvVars env = new EnvVars();","139","        EnvVars overrides = new EnvVars();","140","        overrides.put(\"A\", \"${B}\");","141","        overrides.put(\"B\", \"${C}\");","142","        overrides.put(\"C\", \"${A}\");","143","        ","144","        OverrideOrderCalculator calc = new OverrideOrderCalculator(env, overrides);","145","        assertEquals(3, calc.getRefereeNum(\"A\"));","146","        assertEquals(3, calc.getRefereeNum(\"B\"));","147","        assertEquals(3, calc.getRefereeNum(\"C\"));","148","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/EnvVars.java":[{"add":["28","import hudson.util.VariableResolver;","32","import java.util.ArrayList;","33","import java.util.Collections;","34","import java.util.Comparator;","35","import java.util.Iterator;","36","import java.util.List;","38","import java.util.Set;","41","import java.util.TreeSet;","159","     * Calculates the order to override variables.","160","     * ","161","     * We should override variables in a following order:","162","     * <ol>","163","     *   <li>variables that does not contain variable expressions.<\/li>","164","     *   <li>variables that refers variables overridden in 1.<\/li>","165","     *   <li>variables that refers variables overridden in 2.<\/li>","166","     *   <li>...<\/li>","167","     *   <li>(last) variables contains '+' (as PATH+MAVEN)<\/li>","168","     * <\/ol>","169","     * ","170","     * This class orders variables in a following way:","171","     * <ol>","172","     *   <li>scan each overriding variables and list all referred variables (includes indirect references).<\/li>","173","     *   <li>sort variables with a number of referring variables (ascending order).<\/li>","174","     * <\/ol>","175","     *\/","176","    public static class OverrideOrderCalculator {","177","        \/**","178","         * Extract variables referred directly from a variable.","179","         *\/","180","        private static class TraceResolver implements VariableResolver<String> {","181","            private final Comparator<? super String> comparator;","182","            public Set<String> referredVariables;","183","            ","184","            public TraceResolver(Comparator<? super String> comparator) {","185","                this.comparator = comparator;","186","                clear();","187","            }","188","            ","189","            public void clear() {","190","                referredVariables = new TreeSet<String>(comparator);","191","            }","192","            ","193","            public String resolve(String name) {","194","                referredVariables.add(name);","195","                return \"\";","196","            }","197","        }","198","        ","199","        private final Comparator<? super String> comparator;","200","        ","201","        private final Map<String,String> overrides;","202","        \/**","203","         * set of variables that a variable is REFERRING.","204","         * When A=${B}, refereeSetMap.get(\"A\").contains(\"B\").","205","         * Also contains indirect references, when A=${B}, B=${C},","206","         * refereeSetMap.get(\"A\").contains(\"C\").","207","         *\/","208","        private Map<String, Set<String>> refereeSetMap;","209","        ","210","        \/**","211","         * set of variables that a variable is REFERRED BY.","212","         * When A=${B}, referrerSetMap.get(\"B\").contains(\"A\").","213","         * Also contains indirect references, when A=${B}, B=${C},","214","         * referrerSetMap.get(\"C\").contains(\"A\").","215","         *\/","216","        private Map<String, Set<String>> referrerSetMap;","217","        ","218","        public OverrideOrderCalculator(EnvVars target, Map<String,String> overrides) {","219","            comparator = target.comparator();","220","            this.overrides = overrides;","221","            refereeSetMap = new TreeMap<String, Set<String>>(comparator);","222","            referrerSetMap = new TreeMap<String, Set<String>>(comparator);","223","            scan();","224","        }","225","        ","226","        \/**","227","         * Return an iterator for keys of overriding variables.","228","         * ","229","         * Scan variables in this order.","230","         * This is only provided for testing purpose to control scanning order.","231","         * ","232","         * @return an iterator for keys of overriding variables","233","         *\/","234","        protected Iterator<String> rawKeyIterator() {","235","            return overrides.keySet().iterator();","236","        }","237","        ","238","        public Set<String> getRefereeSet(String variable) {","239","            return refereeSetMap.get(variable);","240","        }","241","        ","242","        public int getRefereeNum(String variable) {","243","            if (refereeSetMap.containsKey(variable)) {","244","                return refereeSetMap.get(variable).size();","245","            }","246","            return 0;","247","        }","248","        ","249","        public List<Map.Entry<String,String>> getOrderedVariables() {","250","            List<Map.Entry<String,String>> varList = new ArrayList<Map.Entry<String,String>>(overrides.entrySet());","251","            Collections.sort(varList, new Comparator<Map.Entry<String,String>>() {","252","                @Override","253","                public int compare(Map.Entry<String, String> o1, Map.Entry<String, String> o2) {","254","                    String key1 = o1.getKey();","255","                    String key2 = o2.getKey();","256","                    if (key1.indexOf('+') > -1) {","257","                        if (key2.indexOf('+') > -1) {","258","                            \/\/ ABC+FOO == XYZ+BAR","259","                            return 0;","260","                        }","261","                        \/\/ ABC+FOO > BAR","262","                        return 1;","263","                    }","264","                    ","265","                    if (key2.indexOf('+') > -1) {","266","                        \/\/ FOO < ABC+BAR","267","                        return -1;","268","                    }","269","                    ","270","                    \/\/ depends on the number of variables each variable refers.","271","                    return getRefereeNum(key1) - getRefereeNum(key2);","272","                }","273","            });","274","            return varList;","275","        }","276","        ","277","        \/**","278","         * Scan all variables and list all referring variables.","279","         *\/","280","        public void scan() {","281","            TraceResolver resolver = new TraceResolver(comparator);","282","            ","283","            Iterator<String> referrerIterator  = rawKeyIterator();","284","            while (referrerIterator.hasNext()) {","285","                String currentVar = referrerIterator.next();","286","                if (currentVar.indexOf('+') > 0) {","287","                    \/\/ XYZ+AAA variables should be always processed in last.","288","                    continue;","289","                }","290","                resolver.clear();","291","                Util.replaceMacro(overrides.get(currentVar), resolver);","292","                ","293","                \/\/ Variables directly referred from the current scanning variable.","294","                Set<String> refereeSet = resolver.referredVariables;","295","                ","296","                if (refereeSet.isEmpty()) {","297","                    \/\/ nothing to do if this variables does not refer other variables.","298","                    continue;","299","                }","300","                ","301","                \/\/ Find indirect referred variables:","302","                \/\/   A=${B}","303","                \/\/   CurrentVar=${A}","304","                \/\/   -> CurrentVar refers B.","305","                Set<String> indirectRefereeSet = new TreeSet<String>(comparator);","306","                for (String referee: refereeSet) {","307","                    if (refereeSetMap.containsKey(referee)) {","308","                        indirectRefereeSet.addAll(refereeSetMap.get(referee));","309","                    }","310","                }","311","                ","312","                \/\/ now contains variables referred both directly and indirectly.","313","                refereeSet.addAll(indirectRefereeSet);","314","                ","315","                \/\/ Variables refers the current scanning variable.","316","                \/\/ this contains both direct and indirect reference.","317","                Set<String> referrerSet = referrerSetMap.get(currentVar);","318","                ","319","                \/\/ what I have to do:","320","                \/\/ 1. Create a link between the current scanning variable and referred variables.","321","                \/\/     1-a. register the current variable as a referrer of referred variables.","322","                \/\/     1-b. register referred variables as a referee of the current variable.","323","                \/\/ 2. Create links between referring variables and referred variables.","324","                \/\/     2-a. register referring variables as referrers of referred variables.","325","                \/\/     2-b. register referred variables as referees of referring variables.","326","                \/\/ ","327","                \/\/ Links between referring variables and the current scanning variable","328","                \/\/ is already created from referring variables.","329","                for (String referee: refereeSet) {","330","                    if (!referrerSetMap.containsKey(referee)) {","331","                        referrerSetMap.put(referee, new TreeSet<String>(comparator));","332","                    }","333","                    \/\/ 1-a. register the current variable as a referrer of referred variables.","334","                    referrerSetMap.get(referee).add(currentVar);","335","                    \/\/ 2-b. register referred variables as referees of referring variables.","336","                    if (referrerSet != null) {","337","                        referrerSetMap.get(referee).addAll(referrerSet);","338","                    }","339","                }","340","                ","341","                if (!refereeSetMap.containsKey(currentVar)) {","342","                    refereeSetMap.put(currentVar, new TreeSet<String>(comparator));","343","                }","344","                \/\/ 1-b. register referred variables as a referee of the current variable.","345","                refereeSetMap.get(currentVar).addAll(refereeSet);","346","                ","347","                if (referrerSet != null) {","348","                    for (String referer: referrerSet) {","349","                        \/\/ 2-b. register referred variables as referees of referring variables.","350","                        \/\/ For referrer refers the current scanning variable,","351","                        \/\/ refereeSetMap.get(referer) always exists.","352","                        refereeSetMap.get(referer).addAll(refereeSet);","353","                    }","354","                }","355","            }","356","        }","357","    }","358","    ","359","","360","    \/**","361","     * Overrides all values in the map by the given map. Expressions in values will be expanded.","362","     * See {@link #override(String, String)}.","363","     * @return this","364","     *\/","365","    public EnvVars overrideExpandingAll(Map<String,String> all) {","366","        for (Map.Entry<String, String> e : new OverrideOrderCalculator(this, all).getOrderedVariables()) {","367","            override(e.getKey(), expand(e.getValue()));","368","        }","369","        return this;","370","    }","371","","372","    \/**"],"delete":[]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["1089","        m.overrideExpandingAll(overrides);"],"delete":["1089","        \/\/ first add all new values and then eventually expand them as values can refer other newly added values (see JENKINS-19488)","1090","        for (Map.Entry<String,String> o : overrides.entrySet())","1091","            if(m.get(o.getKey()) == null)","1092","                m.put(o.getKey(), o.getValue());","1093","        for (Map.Entry<String,String> o : overrides.entrySet()) ","1094","            m.override(o.getKey(),m.expand(o.getValue()));"]}]}},"6bfb732d1e156fce33f01c3ff633b957cda6337f":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/MailSender.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/MailSender.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi,","4"," * Bruce Chapman, Daniel Dyer, Jean-Baptiste Quenot","223","            if (m!=null) {","224","                buf.append(m);","225","                if (!m.endsWith(\"\\n\")) {","226","                    buf.append('\\n');","227","                }"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Bruce Chapman, Daniel Dyer, Jean-Baptiste Quenot","222","            buf.append(m);","223","            if (!m.endsWith(\"\\n\")) {","224","                buf.append('\\n');"]}]}},"c405ae701c4bca18f7b4edc6e5cd3bc053b7ee60":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","pom.xml":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["25","import com.google.common.io.NullOutputStream;","42","import hudson.remoting.CommandTransport;","65","import org.kohsuke.accmod.restrictions.Beta;","77","import javax.annotation.Nonnull;","426","     * Creates a {@link Channel} from the given Channel Builder and Command Transport.","427","     * This method can be used to allow {@link ComputerLauncher}s to create channels not based on I\/O streams.","428","     *","429","     * @param cb","430","     *      Channel Builder.","431","     *      To print launch logs this channel builder should have a Header Stream defined","432","     *      (see {@link ChannelBuilder#getHeaderStream()}) in this argument or by one of {@link ChannelConfigurator}s.","433","     * @param commandTransport","434","     *      Command Transport","435","     * @param listener","436","     *      Gets a notification when the channel closes, to perform clean up. Can be {@code null}.","437","     *      By the time this method is called, the cause of the termination is reported to the user,","438","     *      so the implementation of the listener doesn't need to do that again.","439","     * @since TODO","440","     *\/","441","    @Restricted(Beta.class)","442","    public void setChannel(@Nonnull ChannelBuilder cb,","443","                           @Nonnull CommandTransport commandTransport,","444","                           @CheckForNull Channel.Listener listener) throws IOException, InterruptedException {","445","        for (ChannelConfigurator cc : ChannelConfigurator.all()) {","446","            cc.onChannelBuilding(cb,this);","447","        }","448","","449","        OutputStream headerStream = cb.getHeaderStream();","450","        if (headerStream == null) {","451","            LOGGER.log(Level.WARNING, \"No header stream defined when setting channel for computer {0}. \" +","452","                    \"Launch log won't be printed\", this);","453","            headerStream = new NullOutputStream();","454","        }","455","        Channel channel = cb.build(commandTransport);","456","        setChannel(channel, headerStream, listener);","457","    }","458","","459","    \/**"],"delete":[]}],"pom.xml":[{"add":["108","    <remoting.version>3.21<\/remoting.version>"],"delete":["108","    <remoting.version>3.20<\/remoting.version>"]}]}},"947c4131906b8023eb94f30e7392d8438379477d":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/MailAddressResolver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/MailAddressResolver.java":[{"add":["33","import java.util.logging.Logger;","80","        LOGGER.fine(\"Resolving e-mail address for \\\"\"+u+\"\\\" ID=\"+u.getId());","81","","84","            if(email!=null) {","85","                LOGGER.fine(r+\" resolved \"+u.getId()+\" to \"+email);","86","                return email;","87","            }","93","            return extractedAddress;","147","","148","    private static final Logger LOGGER = Logger.getLogger(MailAddressResolver.class.getName());"],"delete":["81","            if(email!=null) return email;","87","                return extractedAddress;"]}]}},"d4fc73a7aa4dd4af16b6132fe837c8cc84d0bd5e":{"changes":{"core\/src\/main\/resources\/lib\/layout\/breadcrumbBar_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index_fr.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/layout\/breadcrumbBar_fr.properties":[{"add":["22","DISABLE\\ AUTO\\ REFRESH=D\\u00E9sactiver le rafra\\u00EEchissement automatique"],"delete":["22","DISABLE\\ AUTO\\ REFRESH=Desactiver le rafraichissement automatique"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index_fr.properties":[{"add":["37","Took=A dur\\u00E9"],"delete":["37","Took=A dur\\u00E9e"]}]}},"db1f805d68a1aaf8e2d6d1c96cb006fc1dd4c087":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":"MODIFY","core\/src\/test\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMapTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":[{"add":["552","            return -o1.compareTo(o2);"],"delete":["552","            return o2 - o1;"]}],"core\/src\/test\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMapTest.java":[{"add":["134","    @Issue(\"JENKINS-26690\")","135","    @Test public void headMap() {","136","        assertEquals(\"[]\", a.headMap(Integer.MAX_VALUE).keySet().toString());","137","        assertEquals(\"[]\", a.headMap(6).keySet().toString());","138","        assertEquals(\"[]\", a.headMap(5).keySet().toString());","139","        assertEquals(\"[5]\", a.headMap(4).keySet().toString());","140","        assertEquals(\"[5]\", a.headMap(3).keySet().toString());","141","        assertEquals(\"[5, 3]\", a.headMap(2).keySet().toString());","142","        assertEquals(\"[5, 3]\", a.headMap(1).keySet().toString());","143","        assertEquals(\"[5, 3, 1]\", a.headMap(0).keySet().toString());","144","        assertEquals(\"[5, 3, 1]\", a.headMap(-1).keySet().toString());","145","        assertEquals(\"[5, 3, 1]\", a.headMap(-2).keySet().toString()); \/\/ this failed","146","        assertEquals(\"[5, 3, 1]\", a.headMap(Integer.MIN_VALUE).keySet().toString());","147","    }","148",""],"delete":["42","import org.jvnet.hudson.test.Issue;"]}]}},"ba2900b27dba97c70d2bdbce043b752907ea7ea3":{"changes":{"core\/src\/test\/java\/jenkins\/xml\/XMLUtilsTest.java":"MODIFY"},"diff":{"core\/src\/test\/java\/jenkins\/xml\/XMLUtilsTest.java":[{"add":["128","            XMLUtils.parse(stringReader);","131","            assertThat(e.getMessage(), containsString(\"\\\"http:\/\/apache.org\/xml\/features\/disallow-doctype-decl\\\"\"));"],"delete":["44","import org.w3c.dom.Document;","129","            Document doc = XMLUtils.parse(stringReader);","132","            assertThat(e.getMessage(), containsString(\"DOCTYPE is disallowed\"));"]}]}},"563388f13058d7376dd133e509c84d6c7fa895c9":{"changes":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_it.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_cs.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_es.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_zh_TW.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_da.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_nl.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_zh_CN.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_lv.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_ru.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_it.properties":[{"add":["25","UpgradeCompleteRestartNotSupported=Aggiornamento a Jenkins {0} completato, in attesa di riavvio."],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message.jelly":[{"add":["31","        <j:invokeStatic var=\"lifecycle\" className=\"hudson.lifecycle.Lifecycle\" method=\"get\" \/>","32","        <j:choose>","33","          <j:when test=\"${lifecycle.canRestart()}\">","34","            ${%UpgradeComplete(ucData.core.version,rootURL)}","35","          <\/j:when>","36","          <j:otherwise>","37","            ${%UpgradeCompleteRestartNotSupported(ucData.core.version)}","38","          <\/j:otherwise>","39","        <\/j:choose>"],"delete":["31","        ${%UpgradeComplete(ucData.core.version,rootURL)}"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_cs.properties":[{"add":["25","UpgradeCompleteRestartNotSupported=Upgrade na Jenkinse {0} je hotov, \\u010Dek\\u00E1 na restart."],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_de.properties":[{"add":["22","UpgradeComplete=Aktualisierung auf Jenkins {0} abgeschlossen. <a href=\"{1}\/safeRestart\">Neustart von Jenkins<\/a> erforderlich.","23","UpgradeCompleteRestartNotSupported=Aktualisierung auf Jenkins {0} abgeschlossen. Neustart von Jenkins erforderlich."],"delete":["22","UpgradeComplete=Aktualisierung auf Jenkins {0} abgeschlossen. <a href=\"{1}\/safeRestart\">Neustart von Jenkins<\/a> erforderlich.\t"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_es.properties":[{"add":["24","UpgradeComplete=La actualizacin a Jenkins {0} se ha completado, esperando para <a href=\"{1}\/safeRestart\">reiniciar<\/a>.","25","UpgradeCompleteRestartNotSupported=La actualizacin a Jenkins {0} se ha completado, esperando para reiniciar."],"delete":["24","UpgradeComplete=La actualizacin a Jenkins {0} se ha completado, esperando para reiniciar."]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_zh_TW.properties":[{"add":["24","UpgradeCompleteRestartNotSupported=Jenkins {0} \\u5347\\u7248\\u5b8c\\u6210\\uff0c\\u7b49\\u5019\\u91cd\\u65b0\\u555f\\u52d5\\u3002"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message.properties":[{"add":["25","UpgradeCompleteRestartNotSupported=Upgrade to Jenkins {0} is complete, awaiting restart."],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_da.properties":[{"add":["22","UpgradeComplete=Opdatering til Jenkins {0} er fuldf\\u00f8rt, afventer <a href=\"{1}\/safeRestart\">genstart<\/a>.","23","UpgradeCompleteRestartNotSupported=Opdatering til Jenkins {0} er fuldf\\u00f8rt, afventer genstart."],"delete":["22","UpgradeComplete=Opdatering til Jenkins {0} er fuldf\\u00f8rt, afventer genstart."]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_nl.properties":[{"add":["24","UpgradeComplete=Upgrade naar Jenkins {0} is volledig; aan het wachten op <a href=\"{1}\/safeRestart\">herstart<\/a>.","25","UpgradeCompleteRestartNotSupported=Upgrade naar Jenkins {0} is volledig; aan het wachten op herstart."],"delete":["24","UpgradeComplete=Upgrade naar Jenkins {0} is volledig; aan het wachten op herstart."]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_zh_CN.properties":[{"add":["5","UpgradeCompleteRestartNotSupported=Jenkins {0} \\u7248\\u672C\\u5347\\u7EA7\\u5DF2\\u5B8C\\u6210,\\u7B49\\u5F85\\u91CD\\u542F\\u4E2D."],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_lv.properties":[{"add":["25","UpgradeCompleteRestartNotSupported=Atjaunin\\u0101s\\u0101na uz Jenkins {0} ir pabeigta; gaidu p\\u0101rstart\\u0113\\u0161anos."],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_pt_BR.properties":[{"add":["23","UpgradeComplete=Atualiza\\u00e7\\u00e3o do Jenkins {0} completa, aguardando <a href=\"{1}\/safeRestart\">reiniciar<\/a>.","24","UpgradeCompleteRestartNotSupported=Atualiza\\u00e7\\u00e3o do Jenkins {0} completa, aguardando reiniciar."],"delete":["23","UpgradeComplete=Atualiza\\u00e7\\u00e3o do Jenkins {0} completa, aguardando reiniciar."]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_fr.properties":[{"add":["26","UpgradeCompleteRestartNotSupported=La mise \\u00E0 jour de Jenkins en {0} est termin\\u00E9e, en attente de red\\u00E9marrage."],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_ru.properties":[{"add":["25","UpgradeCompleteRestartNotSupported=\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0434\\u043E Jenkins {0} \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\\u043E, \\u043E\\u0436\\u0438\\u0434\\u0430\\u0435\\u0442 \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438."],"delete":[]}]}},"48b909dbf03b4ab712d474596d3ea4a215209192":{"changes":{"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/systemInfo.jelly":"MODIFY","test\/src\/test\/java\/hudson\/cli\/ComputerStateTest.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/systemInfo.jelly":[{"add":["46","          <j:when test=\"${it.channel != null}\">","61","<\/j:jelly>"],"delete":["46","          <j:when test=\"${it.online}\">","61","<\/j:jelly>"]}],"test\/src\/test\/java\/hudson\/cli\/ComputerStateTest.java":[{"add":["27","import static org.hamcrest.MatcherAssert.assertThat;","28","import static org.hamcrest.Matchers.containsString;","29","import static org.hamcrest.Matchers.empty;","32","import static org.hamcrest.Matchers.not;","33","","38","import hudson.slaves.DumbSlave;","44","import org.jvnet.hudson.test.JenkinsRule.WebClient;","45","","46","import com.gargoylesoftware.htmlunit.ElementNotFoundException;","47","import com.gargoylesoftware.htmlunit.html.HtmlPage;","125","","126","    @Test","127","    public void testUiForConnected() throws Exception {","128","        DumbSlave slave = j.createOnlineSlave();","129","        Computer computer = slave.toComputer();","130","","131","        WebClient wc = j.createWebClient();","132","        assertConnected(wc, slave);","133","","134","        computer.setTemporarilyOffline(true, null);","135","        assertTrue(computer.isTemporarilyOffline());","136","        assertConnected(wc, slave);","137","","138","        slave.toComputer().disconnect(null);","139","","140","        HtmlPage page = wc.getPage(slave);","141","","142","        assertLinkDoesNotExist(page, \"Disconnect\");","143","","144","        assertLinkDoesNotExist(page, \"Script Console\");","145","        HtmlPage script = wc.getPage(slave, \"script\");","146","        assertThat(script.getByXPath(\"\/\/form[@action='script']\"), empty());","147","","148","        assertLinkDoesNotExist(page, \"System Information\");","149","        HtmlPage info = wc.getPage(slave, \"systemInfo\");","150","        assertThat(info.asText(), not(containsString(\"Environment Variables\")));","151","    }","152","","153","    private void assertConnected(WebClient wc, DumbSlave slave) throws Exception {","154","        HtmlPage main = wc.getPage(slave);","155","        main.getAnchorByText(\"Disconnect\");","156","","157","        main.getAnchorByText(\"Script Console\");","158","        HtmlPage script = wc.getPage(slave, \"script\");","159","        assertThat(script.getByXPath(\"\/\/form[@action='script']\"), not(empty()));","160","","161","        main.getAnchorByText(\"System Information\");","162","        HtmlPage info = wc.getPage(slave, \"systemInfo\");","163","        assertThat(info.asText(), containsString(\"Environment Variables\"));","164","    }","165","","166","    private void assertLinkDoesNotExist(HtmlPage page, String text) {","167","        try {","168","            page.getAnchorByText(text);","169","            fail(text + \" link should not exist\");","170","        } catch (ElementNotFoundException _) { \/*expected*\/ }","171","    }"],"delete":["33","import hudson.model.User;","34","import hudson.security.ACL;"]}]}},"37c5656f2cf969bbce8f1f0e0ff6a0462f348a8e":{"changes":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":[{"add":["49","import jenkins.model.Jenkins","50","import org.junit.Assert;","59","import org.kohsuke.args4j.CmdLineException","592","    @Issue(\"JENKINS-30742\")","593","    public void testResolveForCLI() {","594","        try {","595","            AbstractProject not_found = AbstractProject.resolveForCLI(\"never_created\");","596","            fail(\"Exception should occur before!\");","597","        } catch (CmdLineException e) {","598","            assert e.getMessage().contentEquals(\"No such job \\u2018never_created\\u2019 exists.\");","599","        }","600","","601","        AbstractProject project = jenkins.createProject(FreeStyleProject.class, \"never_created\");","602","        try {","603","            AbstractProject not_found = AbstractProject.resolveForCLI(\"never_created1\");","604","            fail(\"Exception should occur before!\");","605","        } catch (CmdLineException e) {","606","            assert e.getMessage().contentEquals(\"No such job \\u2018never_created1\\u2019 exists. Perhaps you meant \\u2018never_created\\u2019?\")","607","        }","608","","609","    }","610",""],"delete":["49","import jenkins.model.Jenkins;"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["2250","        if (item==null) {","2251","            AbstractProject project = AbstractProject.findNearest(name);","2252","            throw new CmdLineException(null, project == null ? Messages.AbstractItem_NoSuchJobExistsWithoutSuggestion(name)","2253","                    : Messages.AbstractItem_NoSuchJobExists(name, project.getFullName()));","2254","        }"],"delete":["2250","        if (item==null)","2251","            throw new CmdLineException(null,Messages.AbstractItem_NoSuchJobExists(name,AbstractProject.findNearest(name).getFullName()));"]}]}},"51b86c90458d747637d944353bea257af4d5ec9d":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/UserRequest.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/ProxyException.java":"MODIFY","remoting\/src\/test\/java\/hudson\/remoting\/NonSerializableExceptionTest.java":"ADD"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/UserRequest.java":[{"add":["105","                    response = _serialize(e, channel);","118","    private byte[] _serialize(Object o, Channel localChannel) throws IOException {","124","        } finally {","125","            Channel.setCurrent(old);","126","        }","127","    }","128","","129","    private byte[] serialize(Object o, Channel localChannel) throws IOException {","130","        try {","131","            return _serialize(o,localChannel);"],"delete":["105","                    response = serialize(e, channel);","118","    private byte[] serialize(Object o, Channel localChannel) throws IOException {","128","        } finally {","129","            Channel.setCurrent(old);"]}],"remoting\/src\/main\/java\/hudson\/remoting\/ProxyException.java":[{"add":["43","            initCause(new ProxyException(cause.getCause()));","44","    }","45","","46","    \/**","47","     * {@link ProxyException} all the way down.","48","     *\/","49","    @Override","50","    public ProxyException getCause() {","51","        return (ProxyException)super.getCause();"],"delete":["43","            initCause(new ProxyException(getCause()));"]}],"remoting\/src\/test\/java\/hudson\/remoting\/NonSerializableExceptionTest.java":[{"add":[],"delete":[]}]}},"67cc565c1bb92291f4ebc86b7c175ca66321a986":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["285","                out, null, getEnvVars());"],"delete":["285","                out, getProject().getParent().getModuleRoot(), getEnvVars());"]}]}},"5bbf6acc587035947f6ca5490c6fbe0111dd9f7c":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["459","            if(ch==' ') {","460","                \/\/ All spaces in a block of consecutive spaces are converted to","461","                \/\/ non-breaking space (&nbsp;) except for the last one.  This allows","462","                \/\/ significant whitespace to be retained without prohibiting wrapping.","463","                char nextCh = i+1 < text.length() ? text.charAt(i+1) : 0;","464","                buf.append(nextCh==' ' ? \"&nbsp;\" : \" \");","465","            }","466","            else"],"delete":[]}]}},"a372afff946a83bb38efb0aad110142a69407297":{"changes":{"core\/src\/main\/java\/jenkins\/slaves\/JnlpSlaveAgentProtocol.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/CliProtocol2.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/JnlpSlaveAgentProtocol2.java":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/JnlpSlaveAgentProtocol3.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/ClientAuthenticationCacheTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY","test\/src\/test\/java\/hudson\/security\/CliAuthenticationTest.java":"MODIFY","pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/cli\/CliProtocol.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/slaves\/JnlpSlaveAgentProtocol.java":[{"add":["78","        return true;"],"delete":["78","        return OPT_IN;","106","","107","    \/**","108","     * A\/B test turning off this protocol by default.","109","     *\/","110","    private static final boolean OPT_IN;","111","","112","    static {","113","        byte hash = Util.fromHexString(Jenkins.getInstance().getLegacyInstanceId())[0];","114","        OPT_IN = (hash % 10) == 0;","115","    }"]}],"core\/src\/main\/java\/hudson\/cli\/CliProtocol2.java":[{"add":["37","        return true;"],"delete":["37","        return false;"]}],"test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":[{"add":["3","","4","import hudson.ExtensionList;","26","import java.util.HashSet;","28","import java.util.Set;","42","","43","import org.junit.Before;","70","    @Before","71","    public void setUp() {","72","        Set<String> agentProtocols = new HashSet<>(j.jenkins.getAgentProtocols());","73","        agentProtocols.add(ExtensionList.lookupSingleton(CliProtocol2.class).getName());","74","        j.jenkins.setAgentProtocols(agentProtocols);","75","    }","76",""],"delete":[]}],"core\/src\/main\/java\/jenkins\/slaves\/JnlpSlaveAgentProtocol2.java":[{"add":["52","        return true;"],"delete":["52","        return false;"]}],"core\/src\/main\/java\/jenkins\/slaves\/JnlpSlaveAgentProtocol3.java":[{"add":["50","        return true ;","55","        return handler.isEnabled() ? handler.getName() : null;"],"delete":["50","        return !ENABLED;","55","        \/\/ we only want to force the protocol off for users that have explicitly banned it via system property","56","        \/\/ everyone on the A\/B test will just have the opt-in flag toggled","57","        \/\/ TODO strip all this out and hardcode OptIn==TRUE once JENKINS-36871 is merged","58","        return forceEnabled != Boolean.FALSE ? handler.getName() : null;","81","    \/**","82","     * Flag to control the activation of JNLP3 protocol.","83","     *","84","     * <p>","85","     * Once this will be on by default, the flag and this field will disappear. The system property is","86","     * an escape hatch for those who hit any issues and those who are trying this out.","87","     *\/","88","    @Restricted(NoExternalUse.class)","89","    @SuppressFBWarnings(value = \"MS_SHOULD_BE_REFACTORED_TO_BE_FINAL\",","90","            justification = \"Part of the administrative API for System Groovy scripts.\")","91","    public static boolean ENABLED;","92","    private static final Boolean forceEnabled;","93","","94","    static {","95","        forceEnabled = SystemProperties.optBoolean(JnlpSlaveAgentProtocol3.class.getName() + \".enabled\");","96","        if (forceEnabled != null) {","97","            ENABLED = forceEnabled;","98","        } else {","99","            byte hash = Util.fromHexString(Jenkins.getActiveInstance().getLegacyInstanceId())[0];","100","            ENABLED = (hash % 10) == 0;","101","        }","102","    }"]}],"test\/src\/test\/java\/hudson\/cli\/ClientAuthenticationCacheTest.java":[{"add":["27","","28","import hudson.ExtensionList;","36","import java.util.HashSet;","38","import java.util.Set;","45","","46","import org.junit.Before;","67","    @Before","68","    public void setUp() {","69","        Set<String> agentProtocols = new HashSet<>(r.jenkins.getAgentProtocols());","70","        agentProtocols.add(ExtensionList.lookupSingleton(CliProtocol2.class).getName());","71","        r.jenkins.setAgentProtocols(agentProtocols);","72","    }","73",""],"delete":[]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":[],"delete":["135","","136","                    \/\/ Disable old Non-Encrypted protocols ()","137","                    HashSet<String> newProtocols = new HashSet<>(jenkins.getAgentProtocols());","138","                    newProtocols.removeAll(Arrays.asList(","139","                            \"JNLP2-connect\", \"JNLP-connect\", \"CLI-connect\"   ","140","                    ));","141","                    jenkins.setAgentProtocols(newProtocols);"]}],"test\/src\/test\/java\/hudson\/security\/CliAuthenticationTest.java":[{"add":["3","import hudson.ExtensionList;","6","import hudson.cli.CliProtocol2;","30","import java.util.HashSet;","31","import java.util.Set;","52","    @Before","53","    public void setUp() {","54","        Set<String> agentProtocols = new HashSet<>(j.jenkins.getAgentProtocols());","55","        agentProtocols.add(ExtensionList.lookupSingleton(CliProtocol2.class).getName());","56","       j.jenkins.setAgentProtocols(agentProtocols);","57","    }","58",""],"delete":[]}],"pom.xml":[{"add":["110","    <remoting.minimum.supported.version>3.4<\/remoting.minimum.supported.version>"],"delete":["110","    <remoting.minimum.supported.version>2.60<\/remoting.minimum.supported.version>"]}],"core\/src\/main\/java\/hudson\/cli\/CliProtocol.java":[{"add":["41","        return true;"],"delete":["41","        return OPT_IN;","111","","112","    \/**","113","     * A\/B test turning off this protocol by default.","114","     *\/","115","    private static final boolean OPT_IN;","116","","117","    static {","118","        byte hash = Util.fromHexString(Jenkins.getInstance().getLegacyInstanceId())[0];","119","        OPT_IN = (hash % 10) == 0;","120","    }"]}]}},"69ca99297b8832cb1e6288d7e5d58a5bf80e3d0b":{"changes":{"core\/src\/main\/java\/hudson\/EnvVars.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/JDK.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/EnvVars.java":[{"add":["3","import java.util.HashMap;","4","import java.util.Map.Entry;","5","import java.io.File;","9"," *","10"," * <p>","11"," * In Hudson, often we need to build up \"environment variable overrides\"","12"," * on master, then to execute the process on slaves. This causes a problem","13"," * when working with variables like <tt>PATH<\/tt>. So to make this work,","14"," * we introduce a special convention <tt>PATH+FOO<\/tt> &mdash; all entries","15"," * that starts with <tt>PATH+<\/tt> are merged and prepended to the inherited","16"," * <tt>PATH<\/tt> variable, on the process where a new process is executed. ","20","public class EnvVars extends HashMap<String,String> {","21","","22","    public EnvVars() {","23","    }","24","","25","    public EnvVars(Map<String,String> m) {","26","        super(m);","27","    }","28","","29","    \/**","30","     * Overrides the current entry by the given entry.","31","     *","32","     * <p>","33","     * Handles <tt>PATH+XYZ<\/tt> notation.","34","     *\/","35","    public void override(String key, String value) {","36","        if(value==null || value.length()==0) {","37","            remove(key);","38","            return;","39","        }","40","","41","        int idx = key.indexOf('+');","42","        if(idx>0) {","43","            String realKey = key.substring(0,idx);","44","            String v = get(realKey);","45","            if(v==null) v=value;","46","            else        v=value+File.pathSeparatorChar+v;","47","            put(realKey,value);","48","            return;","49","        }","50","","51","        put(key,value);","52","    }","53","","54","    public void overrideAll(Map<String,String> all) {","55","        for (Map.Entry<String, String> e : all.entrySet()) {","56","            override(e.getKey(),e.getValue());","57","        }","58","    }","59",""],"delete":["9","public class EnvVars {"]}],"core\/src\/main\/java\/hudson\/model\/JDK.java":[{"add":["63","        \/\/ see EnvVars javadoc for why this adss PATH.","64","        env.put(\"PATH+JDK\",getBinDir().getPath());","65",""],"delete":["2","import hudson.EnvVars;","3","","65","        String path = env.get(\"PATH\");","66","        if(path==null)","67","            path = EnvVars.masterEnvVars.get(\"PATH\");","68","        ","69","        if(path==null)","70","            path = getBinDir().getPath();","71","        else","72","            path = getBinDir().getPath()+File.pathSeparator+path;","73","        env.put(\"PATH\",path);"]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["294","    private static Map<String,String> inherit(String[] env) {","295","        EnvVars m = new EnvVars(EnvVars.masterEnvVars);","296","        for (String e : env) {","297","            int index = e.indexOf('=');","298","            m.override(e.substring(0,index), e.substring(index+1));","299","        }","300","        return m;","301","    }","302","","303","    \/**","304","     * Expands the list of environment variables by inheriting current env variables.","305","     *\/","307","        EnvVars m = new EnvVars(EnvVars.masterEnvVars);","308","        m.overrideAll(overrides);"],"delete":["20","import java.util.HashMap;","194","","195","        \/**","196","         * Expands the list of environment variables by inheriting current env variables.","197","         *\/","198","        private Map<String,String> inherit(String[] env) {","199","            Map<String,String> m = new HashMap<String,String>(EnvVars.masterEnvVars);","200","            for (String e : env) {","201","                int index = e.indexOf('=');","202","                String key = e.substring(0,index);","203","                String value = e.substring(index+1);","204","                if(value.length()==0)","205","                    m.remove(key);","206","                else","207","                    m.put(key,value);","208","            }","209","            return m;","210","        }","313","        Map<String,String> m = new HashMap<String,String>(EnvVars.masterEnvVars);","314","        m.putAll(overrides);"]}]}},"137c90cc612ddb3a51d050be298dcd2e0ae86a4c":{"changes":{"core\/src\/main\/java\/hudson\/cli\/CommandDuringBuild.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/groovy\/hudson\/cli\/SetBuildParameterCommandTest.groovy":"MODIFY","core\/src\/main\/java\/hudson\/cli\/SetBuildResultCommand.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/SetBuildParameterCommand.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/CommandDuringBuild.java":[{"add":["69","                if (!r.isBuilding()) {","70","                    throw new CmdLineException(r + \" is not currently being built\");","71","                }"],"delete":[]}],"changelog.html":[{"add":["66","  <li class=\"bug\">","67","    Improving security of <code>set-build-parameter<\/code> and <code>set-build-result<\/code> CLI commands.","68","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-24080\">issue 24080<\/a>)"],"delete":[]}],"test\/src\/test\/groovy\/hudson\/cli\/SetBuildParameterCommandTest.groovy":[{"add":["6","import hudson.model.Result","46","","47","        p.buildersList.add(new Shell(\"BUILD_NUMBER=1 java -jar cli.jar set-build-parameter a b\"));","48","        def b2 = j.assertBuildStatus(Result.FAILURE, p.scheduleBuild2(0).get());","49","        r = [:];","50","        b.getAction(ParametersAction.class).parameters.each { v -> r[v.name]=v.value }","51","        assert r.equals([\"a\":\"x\", \"b\":\"y\"]);"],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/SetBuildResultCommand.java":[{"add":["50","        r.checkPermission(Run.UPDATE);"],"delete":["50","        r.getParent().checkPermission(Item.BUILD);"]}],"core\/src\/main\/java\/hudson\/cli\/SetBuildParameterCommand.java":[{"add":["34","        r.checkPermission(Run.UPDATE);"],"delete":[]}]}},"6f9a833f9236b33406843cba57b765036ad4b334":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["498","      <version>1.25<\/version>"],"delete":["498","      <version>1.24<\/version>"]}]}},"5c8cc45900bf8d78058cecd471840bdbc88215d3":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/DumbSlave\/configure-entries.jelly":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["696","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^(\\d+|)$\/,\"Not an integer\"); },","697","    \"INPUT.number-required\" : function(e) { registerRegexpValidator(e,\/^\\-?(\\d+)$\/,\"Not an integer\"); },","698","","699","    \"INPUT.non-negative-number-required\" : function(e) {","702","","704","        registerRegexpValidator(e,\/^(\\d*[1-9]\\d*|)$\/,\"Not a positive integer\");","705","    },","706","    \"INPUT.positive-number-required\" : function(e) {"],"delete":["696","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^\\-?(\\d+)$\/,\"Not an integer\"); },","697","    \"INPUT.non-negative-number\" : function(e) {"]}],"core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":[{"add":["5","    f.number(clazz:\"non-negative-number-required\", min:0, step:1)"],"delete":["5","    f.number(clazz:\"non-negative-number\", min:0, step:1)"]}],"core\/src\/main\/resources\/hudson\/slaves\/DumbSlave\/configure-entries.jelly":[{"add":["35","    <f:number clazz=\"positive-number-required\" min=\"1\" step=\"1\" default=\"1\"\/>"],"delete":["35","    <f:number clazz=\"positive-number\" min=\"1\" step=\"1\" default=\"1\"\/>"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":[{"add":["44","          <f:number clazz=\"non-negative-number-required\" min=\"0\" step=\"1\"\/>"],"delete":["44","          <f:number clazz=\"non-negative-number\" min=\"0\" step=\"1\"\/>"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["69","import org.apache.commons.lang.StringUtils;","1476","        if (StringUtils.isBlank(nExecutors) || Integer.parseInt(nExecutors)<=0) {"],"delete":["1475","        if (Integer.parseInt(nExecutors)<=0) {"]}]}},"fbb54532d50a14c64a3de6a75d4cc5aa95a8d7c7":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["47","  <li class=bug>","48","    M2 and M3 builds behave differently when tests fail.","49","    (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8415\">issue 8415<\/a>)"],"delete":[]}]}},"d86825620225520194ac49a69ea1e7039e31145f":{"changes":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["1216","                final String administrativeMonitorId = getClass().getName() + \".tcpBind\";","1220","                    AdministrativeMonitor toBeRemoved = null;","1221","                    ExtensionList<AdministrativeMonitor> all = AdministrativeMonitor.all();","1222","                    for (AdministrativeMonitor am : all) {","1224","                            toBeRemoved = am;","1225","                            break;","1228","                    all.remove(toBeRemoved);"],"delete":["1216","                String administrativeMonitorId = getClass().getName() + \".tcpBind\";","1220","                    for (Iterator<AdministrativeMonitor> it = AdministrativeMonitor.all().iterator(); it.hasNext(); ) {","1221","                        AdministrativeMonitor am = it.next();","1223","                            it.remove();"]}]}},"71c5fa5bbb27566aee36604ed562aca547f3c5a6":{"changes":{"core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":[{"add":["353","            rsp.serveFile(req, baseFile.open(), lastModified, -1, length, \"plain.txt\");","369","                rsp.serveFile(req, baseFile.open(), lastModified, -1, length, baseFile.getName());"],"delete":["348","        InputStream in = baseFile.open();","354","            rsp.serveFile(req, in, lastModified, -1, length, \"plain.txt\");","370","                rsp.serveFile(req, in, lastModified, -1, length, baseFile.getName());"]}]}},"c154d431f055799f36d7f782c16836b8a56aaced":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/MultiClassLoaderSerializer.java":"MODIFY","core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/Capability.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/RemoteClassLoader.java":"MODIFY","remoting\/src\/test\/java\/hudson\/remoting\/ChannelTest.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/MultiClassLoaderSerializer.java":[{"add":["18"," * multiple classloaders.","19"," *","20"," * <p>","21"," * To pass around ClassLoaders, this class uses OID instead of {@link IClassLoader}, since doing so","22"," * can results in recursive class resolution that may end up with NPE in ObjectInputStream.defaultReadFields like","23"," * described in the comment from huybrechts in HUDSON-4293.","45","                writeInt(TAG_SYSTEMCLASSLOADER);","52","                if (cl instanceof RemoteClassLoader) {","53","                    int oid = ((RemoteClassLoader) cl).getOid(channel);","54","                    if (oid>=0) {","55","                        \/\/ this classloader came from where we are sending this classloader to.","56","                        writeInt(TAG_LOCAL_CLASSLOADER);","57","                        writeInt(oid);","58","                        return;","59","                    }","60","                }","61","","62","                \/\/ tell the receiving side that they need to import a new classloader","63","                writeInt(TAG_EXPORTED_CLASSLOADER);","64","                writeInt(RemoteClassLoader.exportId(cl,channel));","65","            } else {\/\/ reference to a classloader that's already written","86","            ClassLoader cl;","89","            case TAG_SYSTEMCLASSLOADER:","92","            case TAG_LOCAL_CLASSLOADER:","93","                cl = ((RemoteClassLoader.ClassLoaderProxy)channel.getExportedObject(readInt())).cl;","94","                classLoaders.add(cl);","95","                return cl;","96","","97","            case TAG_EXPORTED_CLASSLOADER:","98","                cl = channel.importedClassLoaders.get(readInt());","99","                classLoaders.add(cl);","128","","129","    \/**","130","     * Indicates that the class being sent should be loaded from the system classloader.","131","     *\/","132","    private static final int TAG_SYSTEMCLASSLOADER = -3;","133","    \/**","134","     * Indicates that the class being sent originates from the sender side. The sender exports this classloader","135","     * and sends its OID in the following int. The receiver will import this classloader to resolve the class.","136","     *\/","137","    private static final int TAG_EXPORTED_CLASSLOADER = -2;","138","    \/**","139","     * Indicates that the class being sent originally came from the receiver. The following int indicates","140","     * the OID of the classloader exported from the receiver, which the sender used.","141","     *\/","142","    private static final int TAG_LOCAL_CLASSLOADER = -1;"],"delete":["18"," * multiple classloaders. ","40","                writeInt(-2);","47","                writeInt(-1);","48","                writeObject(RemoteClassLoader.export(cl,channel));","49","            } else {","72","            case -2:","74","            case -1:","75","                \/\/ fill the entry with some value in preparation of recursive readObject below.","76","                \/\/ this is actually only necessary for classLoader[0].","77","                classLoaders.add(Channel.class.getClassLoader());","79","                ClassLoader cl = channel.importedClassLoaders.get((IClassLoader) readObject());","80","                classLoaders.set(classLoaders.size()-1,cl);"]}],"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":[{"add":["410","","411","        @Override","412","        protected URL findResource(String name) {","413","            for (Dependency dep : dependencies) {","414","                PluginWrapper p = pluginManager.getPlugin(dep.shortName);","415","                if(p!=null) {","416","                    URL url = p.classLoader.getResource(name);","417","                    if (url!=null)","418","                        return url;","419","                }","420","            }","421","","422","            return null;","423","        }"],"delete":[]}],"remoting\/src\/main\/java\/hudson\/remoting\/Capability.java":[{"add":["35","        this(MASK_MULTI_CLASSLOADER);","45","        return (mask&MASK_MULTI_CLASSLOADER)!=0;","72","    \/**","73","     * This was used briefly to indicate the use of {@link MultiClassLoaderSerializer}, but","74","     * that was disabled (see HUDSON-4293) in Sep 2009. AFAIK no released version of Hudson","75","     * exposed it, but since then the wire format of {@link MultiClassLoaderSerializer} has evolved","76","     * in an incompatible way.","77","     * <p>","78","     * So just to be on the safe side, I assigned a different bit to indicate this feature {@link #MASK_MULTI_CLASSLOADER},","79","     * so that even if there are remoting.jar out there that advertizes this bit, we won't be using","80","     * the new {@link MultiClassLoaderSerializer} code.","81","     * <p>","82","     * If we ever use up all 64bits of long, we can probably come back and reuse this bit, as by then","83","     * hopefully any such remoting.jar deployment is long gone. ","84","     *\/","85","    private static final long MASK_UNUSED1 = 1L;","86","    \/**","87","     * Bit that indicates the use of {@link MultiClassLoaderSerializer}.","88","     *\/","89","    private static final long MASK_MULTI_CLASSLOADER = 2L;","90",""],"delete":["35","        this(0);","45","        return (mask&1)!=0;"]}],"remoting\/src\/main\/java\/hudson\/remoting\/RemoteClassLoader.java":[{"add":["91","    \/**","92","     * If this {@link RemoteClassLoader} represents a classloader from the specified channel,","93","     * return its exported OID. Otherwise return -1.","94","     *\/","95","    \/*package*\/ int getOid(Channel channel) {","96","        return RemoteInvocationHandler.unwrap(proxy,channel);","97","    }","98","","107","            if (channel.remoteCapability.supportsMultiClassLoaderRPC()) {","108","                \/*","109","                    In multi-classloader setup, RemoteClassLoaders do not retain the relationships among the original classloaders,","110","                    so each RemoteClassLoader ends up loading classes on its own without delegating to other RemoteClassLoaders.","112","                    See the classloader X\/Y examples in HUDSON-5048 for the depiction of the problem.","114","                    So instead, we find the right RemoteClassLoader to load the class on per class basis.","115","                    The communication is optimized for the single classloader use, by always returning the class file image","116","                    along with the reference to the initiating ClassLoader (if the initiating ClassLoader has already loaded this class,","117","                    then the class file image is wasted.)","118","                 *\/","119","                long startTime = System.nanoTime();","120","                ClassFile cf = proxy.fetch2(name);","121","                channel.classLoadingTime.addAndGet(System.nanoTime()-startTime);","122","                channel.classLoadingCount.incrementAndGet();","123","","124","                ClassLoader cl = channel.importedClassLoaders.get(cf.classLoader);","125","                if (cl instanceof RemoteClassLoader) {","126","                    RemoteClassLoader rcl = (RemoteClassLoader) cl;","127","                    Class<?> c = rcl.findLoadedClass(name);","128","                    if (c==null)","129","                        c = rcl.loadClassFile(name,cf.classImage);","130","                    return c;","131","                } else {","132","                    return cl.loadClass(name);","133","                }","134","            } else {","135","                long startTime = System.nanoTime();","136","                byte[] bytes = proxy.fetch(name);","137","                channel.classLoadingTime.addAndGet(System.nanoTime()-startTime);","138","                channel.classLoadingCount.incrementAndGet();","139","","140","                return loadClassFile(name, bytes);","141","            }","145","    private Class<?> loadClassFile(String name, byte[] bytes) {","146","        \/\/ define package","147","        definePackage(name);","148","","149","        return defineClass(name, bytes, 0, bytes.length);","150","    }","151","","275","    static class ClassFile implements Serializable {","276","        \/**","277","         * oid of the classloader that should load this class.","278","         *\/","279","        final int classLoader;","280","        final byte[] classImage;","281","","282","        ClassFile(int classLoader, byte[] classImage) {","283","            this.classLoader = classLoader;","284","            this.classImage = classImage;","285","        }","286","","287","        private static final long serialVersionUID = 1L;","288","    }","289","","296","        ClassFile fetch2(String className) throws ClassNotFoundException;","310","        return local.export(IClassLoader.class, new ClassLoaderProxy(cl,local), false);","317","        return local.export(new ClassLoaderProxy(cl,local), false);","321","        final ClassLoader cl;","322","        final Channel channel;","324","        public ClassLoaderProxy(ClassLoader cl, Channel channel) {","326","            this.channel = channel;","345","        public ClassFile fetch2(String className) throws ClassNotFoundException {","346","            ClassLoader ecl = cl.loadClass(className).getClassLoader();","347","","348","            try {","349","                return new ClassFile(","350","                        exportId(ecl,channel),","351","                        readFully(ecl.getResourceAsStream(className.replace('.', '\/') + \".class\")));","352","            } catch (IOException e) {","353","                throw new ClassNotFoundException();","354","            }","355","        }","424","        public ClassFile fetch2(String className) throws ClassNotFoundException {","425","            return proxy.fetch2(className);","426","        }","427",""],"delete":["99","            long startTime = System.nanoTime();","100","            byte[] bytes = proxy.fetch(name);","101","            channel.classLoadingTime.addAndGet(System.nanoTime()-startTime);","102","            channel.classLoadingCount.incrementAndGet();","104","            \/\/ define package","105","            definePackage(name);","107","            return defineClass(name, bytes, 0, bytes.length);","253","        return local.export(IClassLoader.class, new ClassLoaderProxy(cl), false);","260","        return local.export(new ClassLoaderProxy(cl));","264","        private final ClassLoader cl;","266","        public ClassLoaderProxy(ClassLoader cl) {"]}],"remoting\/src\/test\/java\/hudson\/remoting\/ChannelTest.java":[{"add":["7","        assertTrue(channel.remoteCapability.supportsMultiClassLoaderRPC());"],"delete":["7","        \/\/ for now this is disabled","8","        assertTrue(!channel.remoteCapability.supportsMultiClassLoaderRPC());"]}]}},"1d9bbfa02f10a115c72197fb95cb63324a65b12a":{"changes":{"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/setupWizardConfigureInstance.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/setupWizardConfigureInstance.jelly":[{"add":["108","              \/\/ will let the trailing slash in the rootUrl ","109","              var iframeRelativeUrl = 'setupWizard\/setupWizardConfigureInstance';"],"delete":["108","              var iframeRelativeUrl = '\/setupWizard\/setupWizardConfigureInstance';"]}]}},"7697bdb4f57d974546ec4c7e95e87fc8f2ad7f1a":{"changes":{"core\/src\/main\/java\/jenkins\/model\/UnlabeledLoadStatistics.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/UnlabeledLoadStatistics.java":[{"add":["86","        return j.getQueue().strictCountBuildableItemsFor(null); "],"delete":["86","        ","87","        int result = 0;","88","        final List<Queue.BuildableItem> buildableItems = j.getQueue().getBuildableItems();","89","        for (Queue.BuildableItem item : buildableItems) {","90","            for (SubTask st : Tasks.getSubTasksOf(item.task)) {","91","                    if (item.getAssignedLabelFor(st) == null)","92","                        result++;","93","            }","94","        }","95","        return result; "]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["945","     * @param l Label to be checked. If null, any label will be accepted.","946","     *    If you want to count {@link BuildableItem}s without assigned labels,","947","     *    use {@link #strictCountBuildableItemsFor(hudson.model.Label)}.","963","    ","964","    \/**","965","     * How many {@link BuildableItem}s are assigned for the given label?","966","     * <p\/>","967","     * The implementation is quite similar to {@link #countBuildableItemsFor(hudson.model.Label)},","968","     * but it has another behavior for null parameters.","969","     * @param l Label to be checked. If null, only jobs without assigned labels","970","     *      will be taken into the account.","971","     * @return Number of {@link BuildableItem}s for the specified label.","972","     * @since TODO","973","     *\/","974","    public @Nonnegative int strictCountBuildableItemsFor(@CheckForNull Label l) {","975","        Snapshot _snapshot = this.snapshot;","976","        int r = 0;","977","        for (BuildableItem bi : _snapshot.buildables)","978","            for (SubTask st : bi.task.getSubTasks())","979","                if (bi.getAssignedLabelFor(st) == l)","980","                    r++;","981","        for (BuildableItem bi : _snapshot.pendings)","982","            for (SubTask st : bi.task.getSubTasks())","983","                if (bi.getAssignedLabelFor(st) == l)","984","                    r++;","985","        return r;","986","    }"],"delete":["945","     * @param l Label to be checked. If null, any label will be accepted"]}]}},"b3225944d127412a21e9763394bd90a1c870adcf":{"changes":{"core\/src\/main\/java\/hudson\/model\/Descriptor.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/DescriptorTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Descriptor.java":[{"add":[],"delete":["31","import hudson.init.Initializer;","65","import java.util.Stack;","989","","990","    \/**","991","     * Register a global {@link BindInterceptor} that uses {@link Descriptor#newInstance(StaplerRequest, JSONObject)}","992","     * for instantiation","993","     *\/","994","    @Initializer","995","    public static void initGlobalBindInterceptor() {","996","        boolean newInstance = WebApp.get(Jenkins.getInstance().servletContext).bindInterceptors.add(new BindInterceptor() {","997","            final class Input {","998","                final Class type;","999","                final JSONObject json;","1000","","1001","                private Input(Class type, JSONObject json) {","1002","                    this.type = type;","1003","                    this.json = json;","1004","                }","1005","","1006","                @Override","1007","                public boolean equals(Object o) {","1008","                    if (this == o) return true;","1009","                    if (o == null || getClass() != o.getClass()) return false;","1010","","1011","                    Input rhs = (Input) o;","1012","                    return json==rhs.json && type==rhs.type;","1013","","1014","                }","1015","","1016","                @Override","1017","                public int hashCode() {","1018","                    return 31*type.hashCode() + json.hashCode();","1019","                }","1020","            }","1021","","1022","            private final ThreadLocal<Stack<Input>> inputs = new ThreadLocal<Stack<Input>>() {","1023","                protected Stack<Input> initialValue() {","1024","                    return new Stack<Input>();","1025","                }","1026","            };","1027","","1028","            @Override","1029","            public Object instantiate(Class actualType, JSONObject json) {","1030","                if (Describable.class.isAssignableFrom(actualType)) {","1031","                    Descriptor d = Jenkins.getInstance().getDescriptor(actualType);","1032","                    if (d != null) {","1033","                        try {","1034","                            \/\/ only when Descriptor.newInstance is overridden","1035","                            Method m = d.getClass().getMethod(\"newInstance\", StaplerRequest.class, JSONObject.class);","1036","                            if (m.getDeclaringClass() != Descriptor.class) {","1037","                                Input newFrame = new Input(actualType,json);","1038","                                if (!inputs.get().contains(newFrame)) {","1039","                                    \/\/ prevent infinite recursion in case Descriptor.newInstance calls right back into","1040","                                    \/\/ bindJSON","1041","                                    inputs.get().push(newFrame);","1042","                                    try {","1043","                                        StaplerRequest req = Stapler.getCurrentRequest();","1044","                                        if (req != null)","1045","                                            return d.newInstance(req, json);","1046","                                    } finally {","1047","                                        inputs.get().pop();","1048","                                    }","1049","                                }","1050","                            }","1051","                        } catch (NoSuchMethodException e) {","1052","                            throw new AssertionError(e);    \/\/ this can't happen because Descriptor defines such a method","1053","                        } catch (FormException e) {","1054","                            throw new IllegalArgumentException(e);","1055","                        }","1056","                    }","1057","                }","1058","                return DEFAULT;","1059","            }","1060","        });","1061","    }"]}],"test\/src\/test\/java\/hudson\/model\/DescriptorTest.java":[{"add":[],"delete":["29","","30","import net.sf.json.JSONObject;","35","import org.jvnet.hudson.test.TestExtension;","36","import org.kohsuke.stapler.Stapler;","37","import org.kohsuke.stapler.StaplerRequest;","38","","39","import java.util.concurrent.Callable;","60","    \/**","61","     * Make sure Descriptor.newInstance gets invoked.","62","     *\/","63","    @Bug(18629) @Test","64","    public void callDescriptor_newInstance() throws Exception {","65","        rule.executeOnServer(new Callable<Object>() {","66","            @Override","67","            public Object call() throws Exception {","68","                DataBoundBean v = Stapler.getCurrentRequest().bindJSON(DataBoundBean.class, new JSONObject());","69","                assertEquals(5,v.x);","70","                return null;","71","            }","72","        });","73","    }","74","","75","    public static class DataBoundBean extends AbstractDescribableImpl<DataBoundBean> {","76","        int x;","77","","78","        \/\/ not @DataBoundConstructor","79","        public DataBoundBean(int x) {","80","            this.x = x;","81","        }","82","","83","        @TestExtension","84","        public static class DescriptorImpl extends Descriptor<DataBoundBean> {","85","            @Override","86","            public String getDisplayName() {","87","                return \"\";","88","            }","89","","90","            @Override","91","            public DataBoundBean newInstance(StaplerRequest req, JSONObject formData) throws FormException {","92","                return new DataBoundBean(5);","93","            }","94","        }","95","","96","    }","97",""]}]}},"934e9d336b7fb1fb41506fdd525ac98acbf91240":{"changes":{"core\/src\/main\/java\/hudson\/lifecycle\/WindowsServiceLifecycle.java":"MODIFY","core\/src\/main\/java\/hudson\/lifecycle\/WindowsInstallerLink.java":"MODIFY","msi\/jenkins.wxs":"MODIFY","core\/src\/main\/resources\/windows-service\/jenkins.exe.config":"ADD","msi\/build.sh":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/os\/windows\/ManagedWindowsServiceLauncher.java":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/lifecycle\/WindowsServiceLifecycle.java":[{"add":["52","        updateJenkinsExeIfNeeded();","56","     * If <tt>jenkins.exe<\/tt> is old compared to our copy,","58","     * we can only do it when Jenkins restarts next time.)","60","    private void updateJenkinsExeIfNeeded() {","85","            LOGGER.log(Level.SEVERE, \"Failed to replace jenkins.exe\",e);"],"delete":["52","        updateHudsonExeIfNeeded();","56","     * If <tt>hudson.exe<\/tt> is old compared to our copy,","58","     * we can only do it when Hudson restarts next time.)","60","    private void updateHudsonExeIfNeeded() {","85","            LOGGER.log(Level.SEVERE, \"Failed to replace hudson.exe\",e);"]}],"core\/src\/main\/java\/hudson\/lifecycle\/WindowsInstallerLink.java":[{"add":["129","            copy(req, rsp, dir, getClass().getResource(\"\/windows-service\/jenkins.exe\"),         \"jenkins.exe\");","130","            copy(req, rsp, dir, getClass().getResource(\"\/windows-service\/jenkins.exe.config\"),  \"jenkins.exe.config\");","131","            copy(req, rsp, dir, getClass().getResource(\"\/windows-service\/jenkins.xml\"),         \"jenkins.xml\");"],"delete":["129","            copy(req, rsp, dir, getClass().getResource(\"\/windows-service\/jenkins.exe\"), \"jenkins.exe\");","130","            copy(req, rsp, dir, getClass().getResource(\"\/windows-service\/jenkins.xml\"), \"jenkins.xml\");"]}],"msi\/jenkins.wxs":[{"add":["15","                <File Name=\"jenkins.exe.config\" Source='tmp\/jenkins.exe.config' DiskId='1' \/>"],"delete":[]}],"core\/src\/main\/resources\/windows-service\/jenkins.exe.config":[{"add":[],"delete":[]}],"msi\/build.sh":[{"add":["12","unzip -p tmp\/core.jar windows-service\/jenkins.exe        > tmp\/jenkins.exe","13","unzip -p tmp\/core.jar windows-service\/jenkins.exe.config > tmp\/jenkins.exe.config","14","unzip -p tmp\/core.jar windows-service\/jenkins.xml        > tmp\/jenkins.xm_"],"delete":["12","unzip -p tmp\/core.jar windows-service\/jenkins.exe > tmp\/jenkins.exe","13","unzip -p tmp\/core.jar windows-service\/jenkins.xml > tmp\/jenkins.xm_"]}],"changelog.html":[{"add":["78","  <li class=bug>","79","    Disabled Authenticode verification for Windows services.","80","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15596\">issue 15596<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/os\/windows\/ManagedWindowsServiceLauncher.java":[{"add":["301","                copyStreamAndClose(getClass().getResource(\"\/windows-service\/jenkins.exe.config\").openStream(), new SmbFile(remoteRoot,\"jenkins-slave.exe.config\").getOutputStream());","302",""],"delete":[]}],"war\/pom.xml":[{"add":["127","      <version>1.2<\/version>"],"delete":["127","      <version>1.1<\/version>"]}]}},"fe9f676028773df181f0b9ec823b3cdd08d5cf3d":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/RunList.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["614","        return getBuilds().limit(100);"],"delete":["614","        return getBuilds().newBuilds();"]}],"core\/src\/main\/java\/hudson\/util\/RunList.java":[{"add":["223","    public RunList<R> limit(final int n) {","224","        return limit(new CountingPredicate<R>() {","225","            public boolean apply(int index, R input) {","226","                return index<n;","227","            }","228","        });","229","    }","230",""],"delete":[]}],"changelog.html":[{"add":["58","    an in-progress build was dropped from JSON API when lazy-loading was introduced.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15583\">issue 15583<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"841e36e4bef04475d3afb3b601b23360c54ed1e6":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Ant.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/ArgumentListBuilder.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Ant.java":[{"add":["158","","159","            \/\/ on Windows, proper double quote handling requires extra surrounding quote.","160","            \/\/ so we need to convert the entire argument list once into a string,","161","            \/\/ then build the new list so that by the time JVM invokes CreateProcess win32 API,","162","            \/\/ it puts additional double-quote. See issue #1007","163","            \/\/ the 'addQuoted' is necessary because Process implementation for Windows (at least in Sun JVM)","164","            \/\/ is too clever to avoid putting a quote around it if the argument begins with \"","165","            \/\/ see \"cmd \/?\" for more about how cmd.exe handles quotation.","166","            args = new ArgumentListBuilder().add(\"cmd.exe\",\"\/C\").addQuoted(args.toStringWithQuote());"],"delete":["157","            args.prepend(\"cmd.exe\",\"\/C\");"]}],"core\/src\/main\/java\/hudson\/util\/ArgumentListBuilder.java":[{"add":["83","","84","    public String toStringWithQuote() {","85","        StringBuilder buf = new StringBuilder();","86","        for (String arg : args) {","87","            if(buf.length()>0)  buf.append(' ');","88","","89","            if(arg.indexOf(' ')>=0 || arg.length()==0)","90","                buf.append('\"').append(arg).append('\"');","91","            else","92","                buf.append(arg);","93","        }","94","        return buf.toString();","95","    }"],"delete":[]}]}},"044c4ad122652f98d82417abefc8b9598130e841":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/DirectoryBrowserSupport\/dir.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/artifacts-index.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","core\/src\/test\/java\/hudson\/UtilTest.java":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/artifactList.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["36","import java.nio.CharBuffer;","37","import java.nio.charset.CharacterCodingException;","38","import java.nio.charset.CharsetEncoder;","559","     * @deprecated Only escapes non-ASCII but leaves other URL-unsafe characters.","560","     * Util.rawEncode should generally be used instead, though be careful to pass only","561","     * a single path component to that method (it will encode \/, but this method does not).","563","    @Deprecated","598","     * Encode a single path component for use in an HTTP URL.","599","     * Escapes all non-ASCII, general unsafe (space and \"#%<>[\\]^`{|}~)","600","     * and HTTP special characters (\/;:?) as specified in RFC1738,","601","     * plus backslash (Windows path separator).","602","     * Note that slash(\/) is encoded, so the given string should be a","603","     * single path component used in constructing a URL.","604","     * Method name inspired by PHP's rawencode.","605","     *\/","606","    public static String rawEncode(String s) {","607","        boolean escaped = false;","608","        StringBuilder out = null;","609","        CharsetEncoder enc = null;","610","        CharBuffer buf = null;","611","        char c;","612","        for (int i = 0, m = s.length(); i < m; i++) {","613","            c = s.charAt(i);","614","            if ((c<64 || c>90) && (c<97 || c>122) && (c<38 || c>57 || c==47)","615","                    && c!=61 && c!=36 && c!=33 && c!=95) {","616","                if (!escaped) {","617","                    out = new StringBuilder(i + (m - i) * 3);","618","                    out.append(s.substring(0, i));","619","                    enc = Charset.forName(\"UTF-8\").newEncoder();","620","                    buf = CharBuffer.allocate(1);","621","                    escaped = true;","622","                }","623","                \/\/ 1 char -> UTF8","624","                buf.put(0,c);","625","                buf.rewind();","626","                try {","627","                    for (byte b : enc.encode(buf).array()) {","628","                        out.append('%');","629","                        out.append(toDigit((b >> 4) & 0xF));","630","                        out.append(toDigit(b & 0xF));","631","                    }","632","                } catch (CharacterCodingException ex) { }","633","            } else if (escaped) {","634","                out.append(c);","635","            }","636","        }","637","        return escaped ? out.toString() : s;","638","    }","639","","640","    private static char toDigit(int n) {","641","        return (char)(n < 10 ? '0' + n : 'A' + n - 10);","642","    }","643","","644","    \/**","652","     * Escapes HTML unsafe characters like &lt;, &amp; to the respective character entities."],"delete":["598","     * Escapes HTML unsafe characters like &lt;, &amp;to the respective character entities.","641","    private static char toDigit(int n) {","642","        char ch = Character.forDigit(n,16);","643","        if(ch>='a')     ch = (char)(ch-'a'+'A');","644","        return ch;","645","    }","646",""]}],"core\/src\/main\/resources\/hudson\/model\/DirectoryBrowserSupport\/dir.jelly":[{"add":["11","              <a href=\"${p.href}\">${h.xmlEscape(p.title)}<\/a>","36","                          <a href=\"${t.href}\">${h.xmlEscape(t.title)}<\/a>","39","                          ${h.xmlEscape(t.title)}","56","                        <a href=\"${x.href}\/*view*\/\">${%view}<\/a>"],"delete":["11","              <a href=\"${p.href}\">${p.title}<\/a>","36","                          <a href=\"${t.href}\">${t.title}<\/a>","39","                          ${t.title}","56","                        <a href=\"${x.href}\/*view*\/\">view<\/a>"]}],"core\/src\/main\/resources\/hudson\/model\/Run\/artifacts-index.jelly":[{"add":["5","\t\t  ${%Build Artifacts}","9","\t\t    <li><a href=\"artifact\/${f.href}\">${h.xmlEscape(f.displayPath)}<\/a><\/li>","14","<\/j:jelly>"],"delete":["5","\t\t  Build Artifacts","9","\t\t    <li><a href=\"artifact\/${f}\">${f}<\/a><\/li>","14","<\/j:jelly>"]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["568","        for (String child : children) {","573","                addArtifacts(sub, path + child + '\/', pathHref + Util.rawEncode(child) + '\/', r);","575","                r.add(new Artifact(path + child, pathHref + Util.rawEncode(child)));","577","        }"],"delete":["47","import java.net.URLEncoder;","569","        for (String child : children) try {","574","                addArtifacts(sub, path + child + '\/', pathHref + URLEncoder.encode(child,\"UTF-8\") + '\/', r);","576","                r.add(new Artifact(path + child, pathHref + URLEncoder.encode(child,\"UTF-8\")));","578","        } catch (UnsupportedEncodingException e) { \/* Won't happen as UTF-8 is hardcoded *\/ }"]}],"core\/src\/test\/java\/hudson\/UtilTest.java":[{"add":["70","     * Test the rawEncode() method.","71","     *\/","72","    public void testRawEncode() {","73","        String[] data = {  \/\/ Alternating raw,encoded","74","            \"abcdefghijklmnopqrstuvwxyz\", \"abcdefghijklmnopqrstuvwxyz\",","75","            \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\", \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\",","76","            \"01234567890!@$&*()-_=+',.\", \"01234567890!@$&*()-_=+',.\",","77","            \" \\\"#%\/:;<>?\", \"%20%22%23%25%2F%3A%3B%3C%3E%3F\",","78","            \"[\\\\]^`{|}~\", \"%5B%5C%5D%5E%60%7B%7C%7D%7E\",","79","            \"d\\u00E9velopp\\u00E9s\", \"d%C3%A9%00velopp%C3%A9%00s\",","80","        };","81","        for (int i = 0; i < data.length; i += 2) {","82","            assertEquals(\"test \" + i, data[i + 1], Util.rawEncode(data[i]));","83","        }","84","    }","85","","86","    \/**"],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/artifactList.jelly":[{"add":["16","                      <a href=\"${baseURL}artifact\/${f.href}\">${h.xmlEscape(f.displayPath)}<\/a>"],"delete":["16","\t              <a href=\"${baseURL}artifact\/${f.href}\">${f.displayPath}<\/a>"]}],"core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":[{"add":["381","                    Path p = new Path(Util.rawEncode(f.getName()),f.getName(),f.isDirectory(),f.length(), f.canRead());","388","                        String relPath = Util.rawEncode(f.getName());","399","                            relPath += '\/'+Util.rawEncode(f.getName());","466","            href.append(Util.rawEncode(filePath.getName()));"],"delete":["19","import java.net.URLEncoder;","382","                    Path p = new Path(URLEncoder.encode(f.getName(),\"UTF-8\"),f.getName(),f.isDirectory(),f.length(), f.canRead());","389","                        String relPath = URLEncoder.encode(f.getName(),\"UTF-8\");","400","                            relPath += '\/'+URLEncoder.encode(f.getName(),\"UTF-8\");","467","            href.append(URLEncoder.encode(filePath.getName(),\"UTF-8\"));"]}]}},"ad172c76628b2b0d6065e2039c2980dbfb36ae39":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["52","import java.util.HashMap;","477","        \/**","478","         * Dependencies of this plugin.","479","         *\/","480","        public final Map<String,String> dependencies = new HashMap<String,String>();","481","        ","491","            for(Object jo : o.getJSONArray(\"dependencies\")) {","492","                JSONObject depObj = (JSONObject) jo;","493","                \/\/ Make sure there's a name attribute, that that name isn't maven-plugin - we ignore that one -","494","                \/\/ and that the optional value isn't true.","495","                if (get(depObj,\"name\")!=null","496","                    && !get(depObj,\"name\").equals(\"maven-plugin\")","497","                    && get(depObj,\"optional\").equals(\"false\")) {","498","                    dependencies.put(get(depObj,\"name\"), get(depObj,\"version\"));","499","                }","500","                ","501","            }","502","","546","        \/**","547","         * Returns a list of dependent plugins which need to be installed or upgraded for this plugin to work.","548","         *\/","549","        public List<Plugin> getNeededDependencies() {","550","            List<Plugin> deps = new ArrayList<Plugin>();","551","","552","            for(Map.Entry<String,String> e : (Set<Map.Entry<String,String>>)dependencies.entrySet()) {","553","                Plugin depPlugin = getPlugin(e.getKey());","554","                ","555","                \/\/ Is the plugin installed already? If not, add it.","556","                if (depPlugin.getInstalled()==null) {","557","                    deps.add(depPlugin);","558","                }","559","                \/\/ If the dependency plugin is installed, is the version we depend on newer than","560","                \/\/ what's installed? If so, upgrade.","561","                else if (Plugin.isNewerThan(e.getValue(), depPlugin.getInstalled().getVersion())) {","562","                    deps.add(depPlugin);","563","                }","564","            }","565","","566","            return deps;","567","        }","568","        ","591","            for (Plugin dep : getNeededDependencies()) {","592","                LOGGER.log(Level.WARNING, \"Adding dependent install of \" + dep.name + \" for plugin \" + name);","593","                dep.deploy();","594","            }"],"delete":[]}]}},"7b38b7c5e9acb1a742adc026956334516093748b":{"changes":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":[{"add":["59","import hudson.os.PosixAPI;","589","        if(!Functions.isWindows()) {","590","            PosixAPI.jnr().chmod(new File(mvnHome, \"bin\/mvn\").getPath(), 0755);","591","        }","614","            if(!Functions.isWindows()) {","615","                PosixAPI.jnr().chmod(new File(antHome,\"apache-ant-1.8.1\/bin\/ant\").getPath(),0755);","616","            }","1980","                PosixAPI.jnr().unsetenv(\"MAVEN_OPTS\");","1981","                PosixAPI.jnr().unsetenv(\"MAVEN_DEBUG_OPTS\");"],"delete":["84","import hudson.util.jna.GNUCLibrary;","589","        if(!Functions.isWindows())","590","            GNUCLibrary.LIBC.chmod(new File(mvnHome, \"bin\/mvn\").getPath(),0755);","613","            if(!Functions.isWindows())","614","                GNUCLibrary.LIBC.chmod(new File(antHome,\"apache-ant-1.8.1\/bin\/ant\").getPath(),0755);","1978","                GNUCLibrary.LIBC.unsetenv(\"MAVEN_OPTS\");","1979","                GNUCLibrary.LIBC.unsetenv(\"MAVEN_DEBUG_OPTS\");"]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["29","import hudson.os.PosixAPI;","1434","     * Run chmod via jnr-posix","1439","        PosixAPI.jnr().chmod(f.getAbsolutePath(),mask);"],"delete":["50","import static hudson.util.jna.GNUCLibrary.LIBC;","1434","     * Run chmod via libc if we can, otherwise fall back to Ant.","1439","        try {","1440","            if(LIBC.chmod(f.getAbsolutePath(),mask)!=0) {","1441","                throw new IOException(\"Failed to chmod \"+f+\" : \"+LIBC.strerror(Native.getLastError()));","1442","            }","1443","        } catch(NoClassDefFoundError e) {  \/\/ cf. https:\/\/groups.google.com\/group\/hudson-dev\/browse_thread\/thread\/6d16c3e8ea0dbc9?hl=fr","1444","            _chmodAnt(f, mask);","1445","        } catch(UnsatisfiedLinkError e2) { \/\/ HUDSON-8155: use Ant's chmod task on non-GNU C systems","1446","            _chmodAnt(f, mask);","1447","        }","1448","    }","1449","","1450","    private static void _chmodAnt(File f, int mask) {","1451","        if (!CHMOD_WARNED) { \/\/ only warn this once to avoid flooding the log","1452","            CHMOD_WARNED = true;","1453","            LOGGER.warning(\"GNU C Library not available: Using Ant's chmod task instead.\");","1454","        }","1455","        Chmod chmodTask = new Chmod();","1456","        chmodTask.setProject(new Project());","1457","        chmodTask.setFile(f);","1458","        chmodTask.setPerm(Integer.toOctalString(mask));","1459","        chmodTask.execute();"]}]}},"ca61e0e1812427ab3ce2921efd783f460d68846b":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config.jelly":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/JUnitResultArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config.jelly":[{"add":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Tom Huybrechts,","4","Richard Hierlmeier","31","\t<f:entry field=\"keepLongStdio\" title=\"\">","32","\t\t<f:checkbox name=\"keepLongStdio\" checked=\"${instance.keepLongStdio}\"\/>","33","\t\t<label class=\"attach-previous\">${%Retain long standard output\/error}<\/label>"],"delete":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Tom Huybrechts","30","        <f:entry field=\"keepLongStdio\" title=\"\">","31","            <f:checkbox\/>","32","            <label class=\"attach-previous\">${%Retain long standard output\/error}<\/label>"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/JUnitResultArchiver.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Martin Eigenbrodt,","4"," * Tom Huybrechts, Yahoo!, Inc., Richard Hierlmeier","122","        return new JUnitParser(isKeepLongStdio()).parse(expandedTestResults, build, launcher, listener);","125","    @Override","220","\t * @return the keepLongStdio","221","\t *\/","222","\tpublic boolean isKeepLongStdio() {","223","\t\treturn keepLongStdio;","224","\t}","225","","226","\t\/**"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Martin Eigenbrodt, Tom Huybrechts, Yahoo!, Inc.","121","        return new JUnitParser(keepLongStdio).parse(expandedTestResults, build, launcher, listener);","225",""]}]}},"a3008af7c7047e3cf4541f7cf5342daae000d48f":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["695","            } catch (Throwable e) {","813","            if (pw!=null && pw.isBundled()) try {","814","                SecurityContextHolder.getContext().setAuthentication(ACL.SYSTEM);","816","            } finally {","817","                SecurityContextHolder.clearContext();","818","            }"],"delete":["695","            } catch (IOException e) {","813","            if (pw!=null && pw.isBundled())"]}]}},"36c1d4e0ac8459c482b120287942e1d4164c961e":{"changes":{"core\/src\/main\/resources\/hudson\/model\/DirectoryBrowserSupport\/dir.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/DirectoryBrowserSupport\/dir.jelly":[{"add":["89","                    <a href=\"${backPath}${pattern!=''?pattern+'\/':''}*zip*\/${dir.name}.zip\">"],"delete":["89","                    <a href=\"${backPath}${pattern}*zip*\/${dir.name}.zip\">"]}]}},"4a71b011613f8e8c5a31b6b4dee66de43aa4f4dc":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["74","import org.acegisecurity.Authentication;","220","","221","                ACL.impersonate(ACL.SYSTEM);    \/\/ background activity should run like a super user","222",""],"delete":[]}],"changelog.html":[{"add":["58","    Slave launch thread should have the background activitiy credential.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15578\">issue 15578<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"e8efc96f3d4ce3ed6dc121661423ad4a2892e2b2":{"changes":{"core\/src\/test\/java\/hudson\/model\/RunTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/model\/RunTest.java":[{"add":["31","import java.util.Set;","33","import java.util.TreeSet;","215","","216","    @Test","217","    public void compareRunsFromSameJobWithDifferentNumbers() throws Exception {","218","        final ItemGroup group = Mockito.mock(ItemGroup.class);","219","        final Job j = Mockito.mock(Job.class);","220","","221","        Mockito.when(j.getParent()).thenReturn(group);","222","        Mockito.when(group.getFullName()).thenReturn(\"j\");","223","        Mockito.when(j.assignBuildNumber()).thenReturn(1, 2);","224","","225","        Run r1 = new Run(j) {};","226","        Run r2 = new Run(j) {};","227","","228","        final Set<Run> treeSet = new TreeSet<>();","229","        treeSet.add(r1);","230","        treeSet.add(r2);","231","","232","        assertTrue(r1.compareTo(r2) < 0);","233","        assertTrue(treeSet.size() == 2);","234","    }","235","","236","    @Issue(\"JENKINS-42319\")","237","    @Test","238","    public void compareRunsFromDifferentParentsWithSameNumber() throws Exception {","239","        final ItemGroup group1 = Mockito.mock(ItemGroup.class);","240","        final ItemGroup group2 = Mockito.mock(ItemGroup.class);","241","        final Job j1 = Mockito.mock(Job.class);","242","        final Job j2 = Mockito.mock(Job.class);","243","        Mockito.when(j1.getParent()).thenReturn(group1);","244","        Mockito.when(j2.getParent()).thenReturn(group2);","245","        Mockito.when(group1.getFullName()).thenReturn(\"g1\");","246","        Mockito.when(group2.getFullName()).thenReturn(\"g2\");","247","        Mockito.when(j1.assignBuildNumber()).thenReturn(1);","248","        Mockito.when(j2.assignBuildNumber()).thenReturn(1);","249","","250","        Run r1 = new Run(j1) {};","251","        Run r2 = new Run(j2) {};","252","","253","        final Set<Run> treeSet = new TreeSet<>();","254","        treeSet.add(r1);","255","        treeSet.add(r2);","256","","257","        assertTrue(r1.compareTo(r2) != 0);","258","        assertTrue(treeSet.size() == 2);","259","    }"],"delete":["27","import hudson.model.Run.Artifact;"]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["415","     * If numbers are equal order based on names of parent projects.","418","        final int res = this.number - that.number;","419","        if (res == 0)","420","            return this.getParent().getFullName().compareTo(that.getParent().getFullName());","421","","422","        return res;"],"delete":["417","        return this.number - that.number;"]}]}},"14a37dba5b09a7f90ead4b115968c7e642f392ad":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["59","import java.io.FilterOutputStream;","1468","        \/\/ Prevent jelly from flushing stream so Content-Length header can be added afterwards","1469","        FilterOutputStream out = new FilterOutputStream(rsp.getCompressedOutputStream(req)) {","1470","            @Override public void flush() { }","1471","            @Override public void write(byte[] b, int off, int len) throws IOException {","1472","                out.write(b,off,len);","1473","            }","1474","        };","1475","        IOUtils.copy(getLogReader(), out);","1476","        out.flush();","1477","        out.close();"],"delete":["1467","        IOUtils.copy(getLogReader(),rsp.getCompressedOutputStream(req));"]}]}},"1b706c194a44a4b49b6d8260fc8ded0a3f9fca06":{"changes":{"debian\/debian\/jenkins.postinst":"MODIFY"},"diff":{"debian\/debian\/jenkins.postinst":[{"add":["27","        # Create jenkins group and user if they don't exist.","30","        if ! getent group \"$JENKINS_GROUP\" > \/dev\/null; then","31","            addgroup --system --quiet \"$JENKINS_GROUP\"","32","        fi","33","        if ! id \"$JENKINS_USER\" >\/dev\/null 2>&1 ; then","34","            adduser --system --quiet --home \/var\/lib\/jenkins --no-create-home \\","35","                --ingroup \"$JENKINS_GROUP\" --disabled-password --shell \/bin\/bash \\","36","                --gecos 'Jenkins' \\","37","                \"$JENKINS_USER\"","38","        fi","39",""],"delete":["27","        # Create jenkins user if it doesn't exist.","30","        addgroup --system --quiet $JENKINS_GROUP","31","        adduser --system --quiet --home \/var\/lib\/jenkins --no-create-home \\","32","            --ingroup $JENKINS_GROUP --disabled-password --shell \/bin\/bash \\","33","            --gecos 'Jenkins' \\","34","            $JENKINS_USER","35","\t"]}]}},"12689f0c306028c933d35a326b4a6afaeaba00a5":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["141","    public void rename(String newName) throws ParseException, FormException {","144","        if(owner.getView(newName)!=null)","145","            throw new FormException(Messages.Hudson_ViewAlreadyExists(newName),\"name\");"],"delete":["141","    public void rename(String newName) throws ParseException {"]}]}},"b02b14764d0be6c0e41e9dc12e1d97d9300154b2":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["626","                <enforceBytecodeVersion>","627","                  <maxJdkVersion>1.6<\/maxJdkVersion>","628","                <\/enforceBytecodeVersion>","633","        <dependencies>","634","          <dependency>","635","            <groupId>org.codehaus.mojo<\/groupId>","636","            <artifactId>extra-enforcer-rules<\/artifactId>","637","            <version>1.0-alpha-4<\/version>","638","          <\/dependency>","639","        <\/dependencies>"],"delete":[]}]}},"ad1c316ee05851cb9a79afa3d6551cbde09206af":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/buildProgressBar_nb_NO.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/buildProgressBar_nb_NO.properties":[{"add":["22","text=Startet for {0} siden<br> Ansl\\u00E5tt gjenst\\u00E5ende tid: {1}"],"delete":["22","text=Startet for {0] siden<br> Ansl\\u00E5tt gjenst\\u00E5ende tid: {1}"]}]}},"8e5e71386fb98e0e0b417e0242ae38a722b8e332":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["1202","     * @param defaultValue Default value. It may be immutable or not, depending on the implementation.","1230","    \/**","1231","     *","1232","     * @param l list to check.","1233","     * @param <T>","1234","     *     Type of the list.","1235","     * @return","1236","     *     {@code l} if l is not {@code null}.","1237","     *     An empty <b>immutable list<\/b> if l is {@code null}.","1238","     *\/","1244","    \/**","1245","     *","1246","     * @param l set to check.","1247","     * @param <T>","1248","     *     Type of the set.","1249","     * @return","1250","     *     {@code l} if l is not {@code null}.","1251","     *     An empty <b>immutable set<\/b> if l is {@code null}.","1252","     *\/","1258","    \/**","1259","     *","1260","     * @param l collection to check.","1261","     * @param <T>","1262","     *     Type of the collection.","1263","     * @return","1264","     *     {@code l} if l is not {@code null}.","1265","     *     An empty <b>immutable set<\/b> if l is {@code null}.","1266","     *\/","1272","    \/**","1273","     *","1274","     * @param l iterable to check.","1275","     * @param <T>","1276","     *     Type of the iterable.","1277","     * @return","1278","     *     {@code l} if l is not {@code null}.","1279","     *     An empty <b>immutable set<\/b> if l is {@code null}.","1280","     *\/"],"delete":[]}]}},"bfa2dad035cddde7fc55f19ba99a33cae10a9b61":{"changes":{"war\/resources\/WEB-INF\/web.xml":"MODIFY"},"diff":{"war\/resources\/WEB-INF\/web.xml":[{"add":["43","    <url-pattern>\/*<\/url-pattern>"],"delete":["43","    <url-pattern>\/<\/url-pattern>"]}]}},"a65fe00bde76a32767c8b3fe3fb41c3561f4b95a":{"changes":{"war\/resources\/WEB-INF\/security\/SecurityFilters.groovy":"MODIFY"},"diff":{"war\/resources\/WEB-INF\/security\/SecurityFilters.groovy":[{"add":["17","import hudson.security.HttpSessionContextIntegrationFilter2","39","        bean(HttpSessionContextIntegrationFilter2) {"],"delete":["11","import org.acegisecurity.context.HttpSessionContextIntegrationFilter","39","        bean(HttpSessionContextIntegrationFilter) {"]}]}},"a63b50f4dfbbb6a042765be8f26d7f76810a1cd4":{"changes":{"core\/src\/test\/java\/hudson\/model\/ActionableTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Actionable.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/model\/ActionableTest.java":[{"add":["26","import java.util.ArrayList;","33","import java.util.List;","34","","35","import org.junit.Assert;","37","import org.jvnet.hudson.test.Issue;","55","    static class ActionableOverride extends Actionable {","56","        ArrayList<Action> specialActions = new ArrayList<Action>();","57","","58","        @Override","59","        public String getDisplayName() {","60","            return \"nope\";","61","        }","62","","63","        @Override","64","        public String getSearchUrl() {","65","            return \"morenope\";","66","        }","67","","68","        @Override","69","        public List<Action> getActions() {","70","            return specialActions;","71","        }","72","    }","73","","74","    @SuppressWarnings(\"deprecation\")","75","    @Issue(\"JENKINS-39555\")","76","    @Test","77","    public void testExtensionOverrides() throws Exception {","78","        ActionableOverride myOverridden = new ActionableOverride();","79","        InvisibleAction invis = new InvisibleAction() {","80","        };","81","        myOverridden.addAction(invis);","82","        Assert.assertArrayEquals(new Object[]{invis}, myOverridden.specialActions.toArray());","83","        Assert.assertArrayEquals(new Object[]{invis}, myOverridden.getActions().toArray());","84","","85","        myOverridden.getActions().remove(invis);","86","        Assert.assertArrayEquals(new Object[]{}, myOverridden.specialActions.toArray());","87","        Assert.assertArrayEquals(new Object[]{}, myOverridden.getActions().toArray());","88","","89","        myOverridden.addAction(invis);","90","        myOverridden.removeAction(invis);","91","        Assert.assertArrayEquals(new Object[]{}, myOverridden.specialActions.toArray());","92","        Assert.assertArrayEquals(new Object[]{}, myOverridden.getActions().toArray());","93","","94","        InvisibleAction invis2 = new InvisibleAction() {};","95","        myOverridden.addOrReplaceAction(invis2);","96","        Assert.assertArrayEquals(new Object[]{invis2}, myOverridden.specialActions.toArray());","97","        Assert.assertArrayEquals(new Object[]{invis2}, myOverridden.getActions().toArray());","98","","99","        myOverridden.addOrReplaceAction(invis);","100","        myOverridden.addOrReplaceAction(invis);","101","        Assert.assertArrayEquals(new Object[]{invis2, invis}, myOverridden.specialActions.toArray());","102","        Assert.assertArrayEquals(new Object[]{invis2, invis}, myOverridden.getActions().toArray());","103","    }","104",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Actionable.java":[{"add":["78","        synchronized (this) {","79","            if(actions == null) {","80","                actions = new CopyOnWriteArrayList<Action>();","82","            return actions;","133","        getActions().add(a);","178","        List<Action> current = getActions();","213","        return getActions().removeAll(Collections.singleton(a));","237","        List<Action> current = getActions();","272","        List<Action> current = getActions();"],"delete":["38","import javax.annotation.concurrent.NotThreadSafe;","79","        return getOrCreateActions();","80","    }","81","","82","    \/**","83","     * We need to handle the initialization of the actions list in Actionable so that child classes that override","84","     * getActions() for historical reasons do not have to override the manipulation methods: {@link #addAction(Action)},","85","     * {@link #replaceAction(Action)}, {@link #removeAction(Action)}, etc.","86","     * @return the CopyOnWriteArrayList of persisted actions.","87","     *\/","88","    private CopyOnWriteArrayList<Action> getOrCreateActions() {","89","        if(actions == null) {","90","            synchronized (this) {","91","                if(actions == null) {","92","                    actions = new CopyOnWriteArrayList<Action>();","93","                }","96","        return actions;","139","     *","140","     * The default implementation is mostly equivalent to the call chain {@code getActions().add(a)}.","148","        getOrCreateActions().add(a);","193","        List<Action> current = getOrCreateActions();","228","        return getOrCreateActions().removeAll(Collections.singleton(a));","252","        List<Action> current = getOrCreateActions();","287","        List<Action> current = getOrCreateActions();"]}]}},"ee447af7e8e283ff50032532a571766f810ea061":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/editDescription.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/editDescription.jelly":[{"add":["35","            <!-- JENKINS-37360: Since Jenkins has a description (system message), prevent that from showing here.","36","             Instead, use primary view's, as Jenkins's cannot be edited anyway (see Jenkins#submitDescription) -->","37","            <f:textarea name=\"description\" value=\"${it == app ? it.primaryView.description : it.description}\""],"delete":["35","            <f:textarea name=\"description\" value=\"${it.description}\""]}]}},"56c6aa32273df43ba1d5cec375e256cc40c07f6e":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/local_repo\/PerJobLocalRepositoryLocator.java":"MODIFY","changelog.html":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY","test\/src\/test\/java\/hudson\/maven\/MavenProjectTest.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/local_repo\/PerJobLocalRepositoryLocator.java":[{"add":["5","import hudson.maven.MavenBuild;","6","import hudson.maven.MavenModuleSetBuild;","21","        if (build instanceof MavenBuild) {","22","            MavenModuleSetBuild parentBuild = ((MavenBuild) build).getModuleSetBuild();","23","            if (parentBuild != null) {","24","                build = parentBuild;","25","            }","26","        }","27","        FilePath ws = build.getWorkspace();","28","        if (ws == null) {","29","            return null;","30","        }","31","        return ws.child(\".repository\");"],"delete":["19","        \/\/ XXX should this use ((MavenBuild) build).getParentBuild().getWorkspace() when instanceof MavenBuild?","20","        return build.getWorkspace().child(\".repository\");"]}],"changelog.html":[{"add":["67","    \"Local to the workspace\" repository locator does not work when building one module in isolation.","68","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17331\">issue 17331<\/a>)","69","  <li class=bug>"],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["76","import javax.annotation.CheckForNull;","156","    public @CheckForNull MavenModuleSetBuild getParentBuild() {","177","    public @CheckForNull MavenModuleSetBuild getModuleSetBuild() {"],"delete":["155","    public MavenModuleSetBuild getParentBuild() {","176","    public MavenModuleSetBuild getModuleSetBuild() {"]}],"test\/src\/test\/java\/hudson\/maven\/MavenProjectTest.java":[{"add":["25","import hudson.maven.local_repo.PerJobLocalRepositoryLocator;","77","        project.setLocalRepository(new PerJobLocalRepositoryLocator());"],"delete":["25","import hudson.maven.local_repo.PerExecutorLocalRepositoryLocator;","77","        \/\/ PerJobLocalRepositoryLocator does not work, since the repo for a module is distinct from that of the set","78","        project.setLocalRepository(new PerExecutorLocalRepositoryLocator());"]}]}},"9757c4b68a26d16622c62a6d9292933368dc3628":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["628","      <version>1.14<\/version>"],"delete":["628","      <version>1.13<\/version>"]}]}},"6168fba02dbd6100f17540a00bbe8c6094dafd9c":{"changes":{"test\/src\/test\/resources\/hudson\/tasks\/junit\/junit-report-6700.xml":"ADD"},"diff":{"test\/src\/test\/resources\/hudson\/tasks\/junit\/junit-report-6700.xml":[{"add":[],"delete":[]}]}},"193855d1fb82e980e93f0c9ce3c15c459d448fab":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/Messages_sr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_da.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_nl.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_pt_BR.properties":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_ru.properties":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_it.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_ja.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_bg.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_es.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Messages_zh_TW.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/Messages_sr.properties":[{"add":[],"delete":["12","ArtifactArchiver.FailedToArchive=\\u041D\\u0435\\u0443\\u0441\\u043F\\u0440\\u0435\\u0448\\u043D\\u043E \\u0430\\u0440\\u0445\\u0438\\u0432\\u0438\\u0440\\u0430\\u045A\\u0435 \\u0430\\u0440\\u0442\\u0435\\u0444\\u0430\\u043A\\u0442\\u0438: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_tr.properties":[{"add":[],"delete":["30","ArtifactArchiver.FailedToArchive=Artefakt ar\\u015fivleme ba\\u015far\\u0131s\\u0131z oldu\\: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_da.properties":[{"add":[],"delete":["59","ArtifactArchiver.FailedToArchive=Fejlede under arkivering af artifakter: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_fr.properties":[{"add":[],"delete":["31","ArtifactArchiver.FailedToArchive=Echec lors de l''archivage des artefacts: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_nl.properties":[{"add":[],"delete":["30","ArtifactArchiver.FailedToArchive=Fout bij het archiveren van de artefacten: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_pt_BR.properties":[{"add":[],"delete":["30","ArtifactArchiver.FailedToArchive=Falha ao arquivar os artefatos: {0}"]}],"core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":[{"add":["217","    public void perform(Run<?,?> build, FilePath ws, Launcher launcher, TaskListener listener) throws IOException, InterruptedException {","219","            throw new AbortException(Messages.ArtifactArchiver_NoIncludes());","242","                    \tString msg = ws.validateAntFileMask(artifacts, FilePath.VALIDATE_ANT_FILE_MASK_BOUND, caseSensitive);","243","                        if (msg != null) {","244","                            listener.getLogger().println(msg);","245","                        }","247","                        Functions.printStackTrace(e, listener.getLogger());","249","                    if (allowEmptyArchive) {","250","                        listener.getLogger().println(Messages.ArtifactArchiver_NoMatchFound(artifacts));","251","                    } else {","252","                        throw new AbortException(Messages.ArtifactArchiver_NoMatchFound(artifacts));","253","                    }","254","                } else {","255","                    \/\/ If a freestyle build failed, do not complain that there was no matching artifact:","256","                    \/\/ the build probably did not even get to the point where it produces artifacts.","257","                    \/\/ For Pipeline, the program ought not be *trying* to archive anything after a failure,","258","                    \/\/ but anyway most likely result == null above so we would not be here."],"delete":["216","    private void listenerWarnOrError(TaskListener listener, String message) {","217","    \tif (allowEmptyArchive) {","218","    \t\tlistener.getLogger().println(String.format(\"WARN: %s\", message));","219","    \t} else {","220","    \t\tlistener.error(message);","221","    \t}","222","    }","223","","225","    public void perform(Run<?,?> build, FilePath ws, Launcher launcher, TaskListener listener) throws InterruptedException, AbortException {","227","            listener.error(Messages.ArtifactArchiver_NoIncludes());","228","            build.setResult(Result.FAILURE);","229","            return;","251","                    \/\/ If the build failed, don't complain that there was no matching artifact.","252","                    \/\/ The build probably didn't even get to the point where it produces artifacts. ","253","                    listenerWarnOrError(listener, Messages.ArtifactArchiver_NoMatchFound(artifacts));","254","                    String msg = null;","256","                    \tmsg = ws.validateAntFileMask(artifacts, FilePath.VALIDATE_ANT_FILE_MASK_BOUND, caseSensitive);","258","                    \tlistenerWarnOrError(listener, e.getMessage());","260","                    if(msg!=null)","261","                        listenerWarnOrError(listener, msg);","262","                }","263","                if (!allowEmptyArchive) {","264","                \tbuild.setResult(Result.FAILURE);","270","        } catch (IOException e) {","271","            Util.displayIOException(e,listener);","272","            Functions.printStackTrace(e, listener.error(Messages.ArtifactArchiver_FailedToArchive(artifacts)));","273","            build.setResult(Result.FAILURE);"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_ru.properties":[{"add":[],"delete":["30","ArtifactArchiver.FailedToArchive=\\u041d\\u0435 \\u0443\\u0434\\u0430\\u043b\\u043e\\u0441\\u044c \\u0437\\u0430\\u0430\\u0440\\u0445\\u0438\\u0432\\u0438\\u0440\\u043e\\u0432\\u0430\\u0442\\u044c \\u0430\\u0440\\u0442\\u0435\\u0444\\u0430\\u043a\\u0442\\u044b\\: {0}"]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["2440","    public @CheckForNull String validateAntFileMask(final String fileMasks, final int bound, final boolean caseSensitive) throws IOException, InterruptedException {"],"delete":["2440","    public String validateAntFileMask(final String fileMasks, final int bound, final boolean caseSensitive) throws IOException, InterruptedException {"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages.properties":[{"add":[],"delete":["33","ArtifactArchiver.FailedToArchive=Failed to archive artifacts: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_it.properties":[{"add":[],"delete":["37","ArtifactArchiver.FailedToArchive=Archiviazione degli artefatti non riuscita: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_ja.properties":[{"add":[],"delete":["32","ArtifactArchiver.FailedToArchive=\\u6210\\u679c\\u7269\\u306e\\u4fdd\\u5b58\\u306e\\u5931\\u6557\\u3057\\u307e\\u3057\\u305f"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_bg.properties":[{"add":[],"delete":["43","ArtifactArchiver.FailedToArchive=\\","44"," \\u041d\\u0435\\u0443\\u0441\\u043f\\u0435\\u0448\\u043d\\u043e \\u0430\\u0440\\u0445\\u0438\\u0432\\u0438\\u0440\\u0430\\u043d\\u0435 \\u043d\\u0430 \\u0430\\u0440\\u0442\\u0435\\u0444\\u0430\\u043a\\u0442\\u0438: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_es.properties":[{"add":[],"delete":["32","ArtifactArchiver.FailedToArchive=Error al guardar los archivos generados: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_de.properties":[{"add":[],"delete":["32","ArtifactArchiver.FailedToArchive=Artefakte konnten nicht archiviert werden: {0}"]}],"core\/src\/main\/resources\/hudson\/tasks\/Messages_zh_TW.properties":[{"add":[],"delete":["32","ArtifactArchiver.FailedToArchive=\\u7121\\u6cd5\\u5c01\\u5b58\\u6210\\u54c1: {0}"]}]}},"edf06f08f4559c9361eee9d38266460e962a68cf":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["43","   (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8445\">issue 8445<\/a>)","44","  <li class=bug> M3 builds doesn't have a colorized console","45","   (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8411\">issue 8411<\/a>)    "],"delete":["43","   (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8445\">issue 8445<\/a>) "]}]}},"c49420e622facb8cc98e5f4447c0fc8ad6660990":{"changes":{"core\/src\/main\/java\/hudson\/model\/LoadStatistics.java":"MODIFY","test\/pom.xml":"MODIFY","test\/src\/test\/java\/hudson\/model\/LabelLoadStatisticsQueueLengthTest.java":"ADD","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/LoadStatistics.java":[{"add":["232","                if(bi.getAssignedLabel()==l)"],"delete":["232","                if(bi.task.getAssignedLabel()==l)"]}],"test\/pom.xml":[{"add":["248","                <include>hudson\/model\/LabelLoadStatisticsQueueLengthTest.java<\/include>","295","                \t<exclude>hudson\/model\/LabelLoadStatisticsQueueLengthTest.java<\/exclude>"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/LabelLoadStatisticsQueueLengthTest.java":[{"add":[],"delete":[]}],"changelog.html":[{"add":["69","  <li class=\"bug\">","70","    Label's Load Statistics queue length based on label assigned to job rather than to item in build queue.","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15576\">issue 15576<\/a>)"],"delete":[]}]}},"cb3990a4d6094260bea4571e7079fd0e3949047f":{"changes":{"core\/src\/main\/java\/jenkins\/FilePathFilter.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/Security218CliTest.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","test\/src\/test\/java\/hudson\/bugs\/JnlpAccessWithSecuredHudsonTest.java":"MODIFY","pom.xml":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/StandardOutputSwapper.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/FilePathFilter.java":[{"add":["104","     * or {@code null} if none is needed."],"delete":["104","     * or null if none is needed."]}],"core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":[{"add":["135","            \/\/ No sense in setting up channel pinger if the channel is being closed","136","            setUpPingForChannel(getOpenChannelOrFail(), null, pingTimeoutSeconds, pingIntervalSeconds, false);"],"delete":["135","            setUpPingForChannel(Channel.current(), null, pingTimeoutSeconds, pingIntervalSeconds, false);"]}],"test\/src\/test\/java\/jenkins\/security\/Security218CliTest.java":[{"add":["241","                getChannelOrFail().call(new Callable<String, Exception>() {"],"delete":["241","                Channel.current().call(new Callable<String, Exception>() {"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["869","            Channel.currentOrFail().setProperty(\"slave\",Boolean.TRUE); \/\/ indicate that this side of the channel is the slave side."],"delete":["869","            Channel.current().setProperty(\"slave\",Boolean.TRUE); \/\/ indicate that this side of the channel is the slave side."]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["1291","            final Channel channel = getOpenChannelOrFail();","1301","            return channel.export(RemoteProcess.class,new RemoteProcess() {","1307","                        Channel taskChannel = null;","1309","                            \/\/ Sync IO will fail automatically if the channel is being closed, no need to use getOpenChannelOrFail()","1310","                            taskChannel = Channel.currentOrFail();","1311","                            taskChannel.syncIO();","1314","                            LOGGER.log(Level.INFO, \"Failed to synchronize IO streams on the channel \" + taskChannel, t);"],"delete":["1300","            return Channel.current().export(RemoteProcess.class,new RemoteProcess() {","1307","                            Channel.current().syncIO();"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["1428","            final Channel ch = getChannelOrFail();","1430","            try (PrintWriter pw = new PrintWriter(sw)) {","1431","                ch.dumpExportTable(pw);","1432","            }"],"delete":["1429","            PrintWriter pw = new PrintWriter(sw);","1430","            Channel.current().dumpExportTable(pw);","1431","            pw.close();"]}],"test\/src\/test\/java\/hudson\/bugs\/JnlpAccessWithSecuredHudsonTest.java":[{"add":["156","            return getChannelOrFail().call(new ScriptLoader(path));"],"delete":["156","            return Channel.current().call(new ScriptLoader(path));"]}],"pom.xml":[{"add":["177","        <version>3.15<\/version>"],"delete":["177","        <version>3.14<\/version>"]}],"core\/src\/main\/java\/jenkins\/slaves\/StandardOutputSwapper.java":[{"add":["41","            Channel c = getOpenChannelOrFail();"],"delete":["41","","42","            Channel c = Channel.current();","43",""]}]}},"4af464a624ee88d479a77f401be9d4f10ffaa791":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":[{"add":["375","                this.failedSince = prev.getFailedSince();"],"delete":["375","                this.failedSince = prev.failedSince;"]}]}},"2823fd5fd861af9c55e7f7b9dcb543b67fdb4bea":{"changes":{"core\/src\/main\/resources\/hudson\/atom.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/rss20.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/atom.jelly":[{"add":["25","        <title>${h.xmlEscape(adapter.getEntryTitle(e))}<\/title>","26","        <link rel=\"alternate\" type=\"text\/html\" href=\"${rootURL}\/${h.encode(adapter.getEntryUrl(e))}\"\/>"],"delete":["25","        <title>${adapter.getEntryTitle(e)}<\/title>","26","        <link rel=\"alternate\" type=\"text\/html\" href=\"${rootURL}\/${adapter.getEntryUrl(e)}\"\/>"]}],"core\/src\/main\/resources\/hudson\/rss20.jelly":[{"add":["14","          <title>${h.xmlEscape(adapter.getEntryTitle(e))}<\/title>","15","          <link>${rootURL}\/${h.encode(adapter.getEntryUrl(e))}<\/link>"],"delete":["14","          <title>${adapter.getEntryTitle(e)}<\/title>","15","          <link>${rootURL}\/${adapter.getEntryUrl(e)}<\/link>"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["580","                    return \"#\"+item.getBuild().number+' '+item.e.getMsg()+\" (\"+item.e.getAuthor()+\")\";"],"delete":["580","                    return '#'+item.getBuild().number+' '+item.e.getMsg()+\" (\"+item.e.getAuthor()+\")\";"]}]}},"1aaf1be3e293648059d4a85d6cd6d6d19b96699f":{"changes":{"core\/src\/main\/java\/hudson\/security\/BasicAuthenticationFilter.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/ContainerAuthentication.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/BasicAuthenticationFilter.java":[{"add":["108","                SecurityContextHolder.getContext().setAuthentication(ContainerAuthentication.create(req));"],"delete":["108","                SecurityContextHolder.getContext().setAuthentication(new ContainerAuthentication(req));"]}],"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["3035","            a = ANONYMOUS;","3612","    \/**","3613","     * {@link Authentication} object that represents the anonymous user.","3614","     * Because Acegi creates its own {@link AnonymousAuthenticationToken} instances, the code must not","3615","     * expect the singleton semantics. This is just a convenient instance.","3616","     *","3617","     * @since 1.343","3618","     *\/","3619","    public static final Authentication ANONYMOUS = new AnonymousAuthenticationToken(","3620","            \"anonymous\",\"anonymous\",new GrantedAuthority[]{new GrantedAuthorityImpl(\"anonymous\")});","3621",""],"delete":["3035","            a = new AnonymousAuthenticationToken(\"anonymous\",\"anonymous\",new GrantedAuthority[]{new GrantedAuthorityImpl(\"anonymous\")});"]}],"core\/src\/main\/java\/hudson\/security\/ContainerAuthentication.java":[{"add":["29","import javax.servlet.ServletRequest;","48","    private final Principal principal;","51","    public static Authentication create(HttpServletRequest request) {","52","        Principal p = request.getUserPrincipal();","53","        if (p!=null)","54","            return new ContainerAuthentication(request);","55","        return Hudson.ANONYMOUS;","56","    }","57","","58","    \/**","59","     * Servlet container can tie a {@link ServletRequest} to the request handling thread,","60","     * so we need to capture all the information upfront to allow {@link Authentication}","61","     * to be passed to other threads, like update center does. See HUDSON-5382. ","62","     *","63","     * @deprecated as of 1.343","64","     *      Use {@link #create(HttpServletRequest)} instead. Will be eventually converted into a private method.","65","     *\/","67","        this.principal = request.getUserPrincipal();","68","","69","        \/\/ Servlet API doesn't provide a way to list up all roles the current user","70","        \/\/ has, so we need to ask AuthorizationStrategy what roles it is going to check against.","71","        List<GrantedAuthority> l = new ArrayList<GrantedAuthority>();","72","        for( String g : Hudson.getInstance().getAuthorizationStrategy().getGroups()) {","73","            if(request.isUserInRole(g))","74","                l.add(new GrantedAuthorityImpl(g));","75","        }","76","        l.add(SecurityRealm.AUTHENTICATED_AUTHORITY);","77","        authorities = l.toArray(new GrantedAuthority[l.size()]);","93","        return principal.getName();"],"delete":["47","    private final HttpServletRequest request;","51","        this.request = request;","55","        if(authorities==null) {","56","            \/\/ Servlet API doesn't provide a way to list up all roles the current user","57","            \/\/ has, so we need to ask AuthorizationStrategy what roles it is going to check against.","58","            List<GrantedAuthority> l = new ArrayList<GrantedAuthority>();","59","            for( String g : Hudson.getInstance().getAuthorizationStrategy().getGroups()) {","60","                if(request.isUserInRole(g))","61","                    l.add(new GrantedAuthorityImpl(g));","62","            }","63","            l.add(SecurityRealm.AUTHENTICATED_AUTHORITY);","64","            authorities = l.toArray(new GrantedAuthority[l.size()]);","65","        }","78","        return request.getUserPrincipal().getName();"]}]}},"3ddef512b21b336e2911598ad3f62def62cb0e18":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["1382","                if (remaining>0 && \/* this logic breaks tests of polling *\/!Functions.getIsUnitTest()) {"],"delete":["1382","                if (remaining>0) {"]}]}},"45cf21d2e65252eb0c86e0573b1a22eb78f90c5a":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ViewJob.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":[{"add":["93","    private volatile boolean fullyLoaded;"],"delete":["93","    private boolean fullyLoaded;"]}],"core\/src\/main\/java\/hudson\/model\/ViewJob.java":[{"add":["62","    protected transient volatile \/*almost final*\/ RunMap<RunT> runs = new RunMap<>(null, null);","64","    private transient volatile boolean notLoaded = true;"],"delete":["62","    protected transient \/*almost final*\/ RunMap<RunT> runs = new RunMap<>();","64","    private transient boolean notLoaded = true;"]}]}},"fd4ccc106f603edfa5818befca271f1400bdbf96":{"changes":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":[{"add":["229","                args.add(\"\/s\",\"\/v\/qn REBOOT=ReallySuppress INSTALLDIR=\\\"\"+ expectedLocation +\"\\\" \/L \\\"\"+logFile+\"\\\"\");","232","                args.add(\"\/s\",\"\/v\",\"\/qn\",\"\/L\",\"\\\"\"+logFile+\"\\\"\",\"REBOOT=ReallySuppress\",\"INSTALLDIR=\\\"\"+ expectedLocation+\"\\\"\");"],"delete":["229","                args.add(\"\/s\",\"\/v\/qn REBOOT=ReallySuppress INSTALLDIR=\\\\\\\"\"+ expectedLocation +\"\\\\\\\" \/L \\\\\\\"\"+logFile+\"\\\\\\\"\");","232","                args.add(\"\/s\",\"\/v\",\"\/qn\",\"\/L\",\"\\\\\\\"\"+logFile+\"\\\\\\\"\",\"REBOOT=ReallySuppress\",\"INSTALLDIR=\\\\\\\"\"+ expectedLocation+\"\\\\\\\"\");"]}]}},"402da21baea77234bc2f5d14b7b8128f9acb5611":{"changes":{"core\/src\/main\/java\/hudson\/Proc.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Proc.java":[{"add":["85","            if(env!=null) {","86","                Map<String, String> m = pb.environment();","87","                m.clear();","88","                for (String e : env) {","89","                    int idx = e.indexOf('=');","90","                    m.put(e.substring(0,idx),e.substring(idx+1,e.length()));","91","                }"],"delete":["85","            Map<String, String> m = pb.environment();","86","            m.clear();","87","            for (String e : env) {","88","                int idx = e.indexOf('=');","89","                m.put(e.substring(0,idx),e.substring(idx+1,e.length()));"]}]}},"4816ff2ec5a1f9522d129d483bd49914f81f331c":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SubversionChangeLogBuilder.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SubversionChangeLogBuilder.java":[{"add":["83","        return path.act(new GetUrlForPath(createAuthenticationProvider()));","132","    private static class GetUrlForPath implements FileCallable<String> {","133","        private final ISVNAuthenticationProvider authProvider;","134","","135","        public GetUrlForPath(ISVNAuthenticationProvider authProvider) {","136","            this.authProvider = authProvider;","137","        }","138","","139","        public String invoke(File p, VirtualChannel channel) throws IOException {","140","            SVNWCClient svnwc = SubversionSCM.createSvnClientManager(authProvider).getWCClient();","141","","142","            SVNInfo info;","143","            try {","144","                info = svnwc.doInfo(p, SVNRevision.WORKING);","145","                return info.getURL().toDecodedString();","146","            } catch (SVNException e) {","147","                e.printStackTrace();","148","                return null;","149","            }","150","        }","151","","152","        private static final long serialVersionUID = 1L;","153","    }"],"delete":["83","    \tfinal ISVNAuthenticationProvider authProvider = createAuthenticationProvider();","84","    \treturn path.act(new FileCallable<String>() {","85","            public String invoke(File p, VirtualChannel channel) throws IOException {","86","                SVNWCClient svnwc = SubversionSCM.createSvnClientManager(authProvider).getWCClient();","87","","88","                SVNInfo info;","89","\t\t\t\ttry {","90","\t\t\t\t\tinfo = svnwc.doInfo(p, SVNRevision.WORKING);","91","\t                return info.getURL().toDecodedString();","92","\t\t\t\t} catch (SVNException e) {","93","\t\t\t\t\te.printStackTrace();","94","\t\t\t\t\treturn null;","95","\t\t\t\t}","96","            }","97","        });"]}]}},"c6398a1d6ba60552bedd04fb3aab8508726d3466":{"changes":{"core\/src\/main\/resources\/lib\/form\/repeatableDeleteButton.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/repeatableDeleteButton.jelly":[{"add":["34","  <input type=\"button\" value=\"${attrs.value ?: '%Delete'}\" title=\"${attrs.value ?: '%Delete'}\" class=\"repeatable-delete danger\" \/>"],"delete":["34","  <input type=\"button\" value=\"${attrs.value ?: '%Delete'}\" class=\"repeatable-delete danger\" \/>"]}]}},"33573ca2bdaf7dbe8db841e0d09663b2c4abb85e":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["447","        return n==null ? RetentionStrategy.INSTANCE : n.getRetentionStrategy();"],"delete":["447","        return n==null ? null : n.getRetentionStrategy();"]}],"changelog.html":[{"add":["48","  <li class=bug>","49","    Fixed an NPE in ComputerRetentionWork","50","    (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-3696\">issue 3696<\/a>)"],"delete":[]}]}},"b67272e7261cd588e2bb51ad8759584a9b3ffa49":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"changelog.html":[{"add":["61","  <li class='major bug'>","62","    Download tool installations directly from the slave when possible, since this is much faster than going through the master.","63","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17330\">issue 17330<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["495","    private static void unzip(File dir, InputStream in) throws IOException {","498","            \/\/ XXX why does this not simply use ZipInputStream?","507","    static private void unzip(File dir, File zipFile) throws IOException {","727","            if (isRemote()) {","728","                \/\/ First try to download from the slave machine.","729","                try {","730","                    act(new Unpack(archive));","731","                    timestamp.touch(sourceTimestamp);","732","                    return true;","733","                } catch (IOException x) {","734","                    if (listener != null) {","735","                        x.printStackTrace(listener.error(\"Failed to download \" + archive + \" from slave; will retry from master\"));","736","                    }","737","                }","738","            }","739","","759","    private static final class Unpack implements FileCallable<Void> {","760","        private final URL archive;","761","        Unpack(URL archive) {","762","            this.archive = archive;","763","        }","764","        @Override public Void invoke(File dir, VirtualChannel channel) throws IOException, InterruptedException {","765","            InputStream in = archive.openStream();","766","            try {","767","                CountingInputStream cis = new CountingInputStream(in);","768","                try {","769","                    if (archive.toExternalForm().endsWith(\".zip\")) {","770","                        unzip(dir, cis);","771","                    } else {","772","                        readFromTar(\"input stream\", dir, GZIP.extract(cis));","773","                    }","774","                } catch (IOException x) {","775","                    throw new IOException2(String.format(\"Failed to unpack %s (%d bytes read)\", archive, cis.getByteCount()), x);","776","                }","777","            } finally {","778","                in.close();","779","            }","780","            return null;","781","        }","782","    }","783",""],"delete":["495","    private void unzip(File dir, InputStream in) throws IOException {","506","    private void unzip(File dir, File zipFile) throws IOException {"]}]}},"79b624f2c1cf566b56237934ea11187d72229a28":{"changes":{"war\/src\/main\/webapp\/scripts\/yui\/button\/button-debug.js":"MODIFY","war\/src\/main\/webapp\/scripts\/yui\/button\/button-min.js":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/yui\/button\/button-debug.js":[{"add":["2719","                    In Firefox, dispatching a \"submit\" event still submits the form,","2720","                    so there is no need to call the \"submit\" method.","2721","                    This might change in the future though:","2722","                    https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=1370630","2723","                    In the mean time, we should not make a redundant call to \"submit\",","2724","                    because it leads to the form being submitted twice in some cases:","2725","                    https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-58296","2726","                    TODO: once we know the exact Firefox version which will change this","2727","                    behavior, we should add a \"UA.gecko >= XX\" condition and call \"submit\".","2730","                if ((UA.ie || UA.webkit) && bSubmitForm) {"],"delete":["2721","                if ((UA.ie || UA.webkit || UA.gecko) && bSubmitForm) {"]}],"war\/src\/main\/webapp\/scripts\/yui\/button\/button-min.js":[{"add":["8","}if(this._activationKeyPressed){m.on(document,\"keyup\",this._onDocumentKeyUp,null,this)}c=null;this.fireEvent(\"blur\",n)},_onDocumentKeyUp:function(n){if(this._isActivationKey(m.getCharCode(n))){this._activationKeyPressed=false;m.removeListener(document,\"keyup\",this._onDocumentKeyUp)}},_onKeyDown:function(o){var n=this._menu;if(this.get(\"type\")==\"split\"&&this._isSplitButtonOptionKey(o)){this.fireEvent(\"option\",o)}else{if(this._isActivationKey(m.getCharCode(o))){if(this.get(\"type\")==\"menu\"){this._showMenu(o)}else{this._activationKeyPressed=true;this.addStateCSSClasses(\"active\")}}}if(n&&n.cfg.getProperty(\"visible\")&&m.getCharCode(o)==27){n.hide();this.focus()}},_onKeyUp:function(n){var o;if(this._isActivationKey(m.getCharCode(n))){o=this.get(\"type\");if(o==\"checkbox\"||o==\"radio\"){this.set(\"checked\",!(this.get(\"checked\")))}this._activationKeyPressed=false;if(this.get(\"type\")!=\"menu\"){this.removeStateCSSClasses(\"active\")}}},_onClick:function(p){var r=this.get(\"type\"),q,n,o;switch(r){case\"submit\":if(p.returnValue!==false){this.submitForm()}break;case\"reset\":q=this.getForm();if(q){q.reset()}break;case\"split\":if(this._nOptionRegionX>0&&(m.getPageX(p)>this._nOptionRegionX)){o=false}else{this._hideMenu();n=this.get(\"srcelement\");if(n&&n.type==\"submit\"&&p.returnValue!==false){this.submitForm()}}break}return o},_onDblClick:function(o){var n=true;if(this.get(\"type\")==\"split\"&&m.getPageX(o)>this._nOptionRegionX){n=false}return n},_onAppendTo:function(n){i.later(0,this,this._addListenersToForm)},_onFormReset:function(o){var p=this.get(\"type\"),n=this._menu;if(p==\"checkbox\"||p==\"radio\"){this.resetValue(\"checked\")}if(j&&n&&(n instanceof j)){this.resetValue(\"selectedMenuItem\")}},_onFormSubmit:function(n){this.createHiddenFields()},_onDocumentMouseDown:function(r){var o=m.getTarget(r),q=this.get(\"element\"),p=this._menu.element;function n(t){var v,s,u;if(!t){return true}for(v=0,s=t.length;v<s;v++){u=t[v].element;if(o==u||g.isAncestor(u,o)){return true}if(t[v]&&t[v].getSubmenus){if(n(t[v].getSubmenus())){return true}}}return false}if(o!=q&&!g.isAncestor(q,o)&&o!=p&&!g.isAncestor(p,o)){if(this._menu&&this._menu.getSubmenus){if(!n(this._menu.getSubmenus())){return}}this._hideMenu();if(l.ie&&(l.ie<9)&&o.focus){o.setActive()}m.removeListener(document,\"mousedown\",this._onDocumentMouseDown)}},_onOption:function(n){if(this.hasClass(this.CLASS_NAME_PREFIX+\"split-button-activeoption\")){this._hideMenu();this._bOptionPressed=false}else{this._showMenu(n);this._bOptionPressed=true}},_onMenuShow:function(n){m.on(document,\"mousedown\",this._onDocumentMouseDown,null,this);var o=(this.get(\"type\")==\"split\")?\"activeoption\":\"active\";this.addStateCSSClasses(o)},_onMenuHide:function(n){var o=(this.get(\"type\")==\"split\")?\"activeoption\":\"active\";this.removeStateCSSClasses(o);if(this.get(\"type\")==\"split\"){this._bOptionPressed=false}},_onMenuKeyDown:function(p,o){var n=o[0];if(m.getCharCode(n)==27){this.focus();if(this.get(\"type\")==\"split\"){this._bOptionPressed=false}}},_onMenuRender:function(p){var s=this.get(\"element\"),o=s.parentNode,n=this._menu,r=n.element,q=n.srcElement,t;if(o!=r.parentNode){o.appendChild(r)}this._renderedMenu=true;if(q&&q.nodeName.toLowerCase()===\"select\"&&q.value){t=n.getItem(q.selectedIndex);this.set(\"selectedMenuItem\",t,true);this._onSelectedMenuItemChange({newValue:t})}},_onMenuClick:function(o,n){var q=n[1],p;if(q){this.set(\"selectedMenuItem\",q);p=this.get(\"srcelement\");if(p&&p.type==\"submit\"){this.submitForm()}this._hideMenu()}},_onSelectedMenuItemChange:function(o){var p=o.prevValue,q=o.newValue,n=this.CLASS_NAME_PREFIX;if(p){g.removeClass(p.element,(n+\"button-selectedmenuitem\"))}if(q){g.addClass(q.element,(n+\"button-selectedmenuitem\"))}},_onLabelClick:function(n){this.focus();var o=this.get(\"type\");if(o==\"radio\"||o==\"checkbox\"){this.set(\"checked\",(!this.get(\"checked\")))}},createButtonElement:function(n){var p=this.NODE_NAME,o=document.createElement(p);o.innerHTML=\"<\"+p+' class=\"first-child\">'+(n==\"link\"?\"<a><\/a>\":'<button type=\"button\"><\/button>')+\"<\/\"+p+\">\";return o},addStateCSSClasses:function(o){var p=this.get(\"type\"),n=this.CLASS_NAME_PREFIX;if(i.isString(o)){if(o!=\"activeoption\"&&o!=\"hoveroption\"){this.addClass(n+this.CSS_CLASS_NAME+(\"-\"+o))}this.addClass(n+p+(\"-button-\"+o))}},removeStateCSSClasses:function(o){var p=this.get(\"type\"),n=this.CLASS_NAME_PREFIX;if(i.isString(o)){this.removeClass(n+this.CSS_CLASS_NAME+(\"-\"+o));this.removeClass(n+p+(\"-button-\"+o))}},createHiddenFields:function(){this.removeHiddenFields();var v=this.getForm(),z,o,s,x,y,t,u,n,r,w,p,q=false;if(v&&!this.get(\"disabled\")){o=this.get(\"type\");s=(o==\"checkbox\"||o==\"radio\");if((s&&this.get(\"checked\"))||(e==this)){YAHOO.log(\"Creating hidden field.\",\"info\",this.toString());z=f((s?o:\"hidden\"),this.get(\"name\"),this.get(\"value\"),this.get(\"checked\"));if(z){if(s){z.style.display=\"none\"}v.appendChild(z)}}x=this._menu;if(j&&x&&(x instanceof j)){YAHOO.log(\"Creating hidden field for menu.\",\"info\",this.toString());y=this.get(\"selectedMenuItem\");p=x.srcElement;q=(p&&p.nodeName.toUpperCase()==\"SELECT\");if(y){u=(y.value===null||y.value===\"\")?y.cfg.getProperty(\"text\"):y.value;t=this.get(\"name\");if(q){w=p.name}else{if(t){w=(t+\"_options\")}}if(u&&w){n=f(\"hidden\",w,u);v.appendChild(n)}}else{if(q){n=v.appendChild(p)}}}if(z&&n){this._hiddenFields=[z,n]}else{if(!z&&n){this._hiddenFields=n}else{if(z&&!n){this._hiddenFields=z}}}r=this._hiddenFields}return r},removeHiddenFields:function(){var q=this._hiddenFields,o,p;function n(r){if(g.inDocument(r)){r.parentNode.removeChild(r)}}if(q){if(i.isArray(q)){o=q.length;if(o>0){p=o-1;do{n(q[p])}while(p--)}}else{n(q)}this._hiddenFields=null}},submitForm:function(){var q=this.getForm(),p=this.get(\"srcelement\"),o=false,n;if(q){if(this.get(\"type\")==\"submit\"||(p&&p.type==\"submit\")){e=this}if(l.ie&&(l.ie<9)){o=q.fireEvent(\"onsubmit\")}else{n=document.createEvent(\"HTMLEvents\");n.initEvent(\"submit\",true,true);o=q.dispatchEvent(n)}if((l.ie||l.webkit)&&o){q.submit()}}return o},init:function(p,D){var v=D.type==\"link\"?\"a\":\"button\",A=D.srcelement,s=p.getElementsByTagName(v)[0],u;"],"delete":["8","}if(this._activationKeyPressed){m.on(document,\"keyup\",this._onDocumentKeyUp,null,this)}c=null;this.fireEvent(\"blur\",n)},_onDocumentKeyUp:function(n){if(this._isActivationKey(m.getCharCode(n))){this._activationKeyPressed=false;m.removeListener(document,\"keyup\",this._onDocumentKeyUp)}},_onKeyDown:function(o){var n=this._menu;if(this.get(\"type\")==\"split\"&&this._isSplitButtonOptionKey(o)){this.fireEvent(\"option\",o)}else{if(this._isActivationKey(m.getCharCode(o))){if(this.get(\"type\")==\"menu\"){this._showMenu(o)}else{this._activationKeyPressed=true;this.addStateCSSClasses(\"active\")}}}if(n&&n.cfg.getProperty(\"visible\")&&m.getCharCode(o)==27){n.hide();this.focus()}},_onKeyUp:function(n){var o;if(this._isActivationKey(m.getCharCode(n))){o=this.get(\"type\");if(o==\"checkbox\"||o==\"radio\"){this.set(\"checked\",!(this.get(\"checked\")))}this._activationKeyPressed=false;if(this.get(\"type\")!=\"menu\"){this.removeStateCSSClasses(\"active\")}}},_onClick:function(p){var r=this.get(\"type\"),q,n,o;switch(r){case\"submit\":if(p.returnValue!==false){this.submitForm()}break;case\"reset\":q=this.getForm();if(q){q.reset()}break;case\"split\":if(this._nOptionRegionX>0&&(m.getPageX(p)>this._nOptionRegionX)){o=false}else{this._hideMenu();n=this.get(\"srcelement\");if(n&&n.type==\"submit\"&&p.returnValue!==false){this.submitForm()}}break}return o},_onDblClick:function(o){var n=true;if(this.get(\"type\")==\"split\"&&m.getPageX(o)>this._nOptionRegionX){n=false}return n},_onAppendTo:function(n){i.later(0,this,this._addListenersToForm)},_onFormReset:function(o){var p=this.get(\"type\"),n=this._menu;if(p==\"checkbox\"||p==\"radio\"){this.resetValue(\"checked\")}if(j&&n&&(n instanceof j)){this.resetValue(\"selectedMenuItem\")}},_onFormSubmit:function(n){this.createHiddenFields()},_onDocumentMouseDown:function(r){var o=m.getTarget(r),q=this.get(\"element\"),p=this._menu.element;function n(t){var v,s,u;if(!t){return true}for(v=0,s=t.length;v<s;v++){u=t[v].element;if(o==u||g.isAncestor(u,o)){return true}if(t[v]&&t[v].getSubmenus){if(n(t[v].getSubmenus())){return true}}}return false}if(o!=q&&!g.isAncestor(q,o)&&o!=p&&!g.isAncestor(p,o)){if(this._menu&&this._menu.getSubmenus){if(!n(this._menu.getSubmenus())){return}}this._hideMenu();if(l.ie&&(l.ie<9)&&o.focus){o.setActive()}m.removeListener(document,\"mousedown\",this._onDocumentMouseDown)}},_onOption:function(n){if(this.hasClass(this.CLASS_NAME_PREFIX+\"split-button-activeoption\")){this._hideMenu();this._bOptionPressed=false}else{this._showMenu(n);this._bOptionPressed=true}},_onMenuShow:function(n){m.on(document,\"mousedown\",this._onDocumentMouseDown,null,this);var o=(this.get(\"type\")==\"split\")?\"activeoption\":\"active\";this.addStateCSSClasses(o)},_onMenuHide:function(n){var o=(this.get(\"type\")==\"split\")?\"activeoption\":\"active\";this.removeStateCSSClasses(o);if(this.get(\"type\")==\"split\"){this._bOptionPressed=false}},_onMenuKeyDown:function(p,o){var n=o[0];if(m.getCharCode(n)==27){this.focus();if(this.get(\"type\")==\"split\"){this._bOptionPressed=false}}},_onMenuRender:function(p){var s=this.get(\"element\"),o=s.parentNode,n=this._menu,r=n.element,q=n.srcElement,t;if(o!=r.parentNode){o.appendChild(r)}this._renderedMenu=true;if(q&&q.nodeName.toLowerCase()===\"select\"&&q.value){t=n.getItem(q.selectedIndex);this.set(\"selectedMenuItem\",t,true);this._onSelectedMenuItemChange({newValue:t})}},_onMenuClick:function(o,n){var q=n[1],p;if(q){this.set(\"selectedMenuItem\",q);p=this.get(\"srcelement\");if(p&&p.type==\"submit\"){this.submitForm()}this._hideMenu()}},_onSelectedMenuItemChange:function(o){var p=o.prevValue,q=o.newValue,n=this.CLASS_NAME_PREFIX;if(p){g.removeClass(p.element,(n+\"button-selectedmenuitem\"))}if(q){g.addClass(q.element,(n+\"button-selectedmenuitem\"))}},_onLabelClick:function(n){this.focus();var o=this.get(\"type\");if(o==\"radio\"||o==\"checkbox\"){this.set(\"checked\",(!this.get(\"checked\")))}},createButtonElement:function(n){var p=this.NODE_NAME,o=document.createElement(p);o.innerHTML=\"<\"+p+' class=\"first-child\">'+(n==\"link\"?\"<a><\/a>\":'<button type=\"button\"><\/button>')+\"<\/\"+p+\">\";return o},addStateCSSClasses:function(o){var p=this.get(\"type\"),n=this.CLASS_NAME_PREFIX;if(i.isString(o)){if(o!=\"activeoption\"&&o!=\"hoveroption\"){this.addClass(n+this.CSS_CLASS_NAME+(\"-\"+o))}this.addClass(n+p+(\"-button-\"+o))}},removeStateCSSClasses:function(o){var p=this.get(\"type\"),n=this.CLASS_NAME_PREFIX;if(i.isString(o)){this.removeClass(n+this.CSS_CLASS_NAME+(\"-\"+o));this.removeClass(n+p+(\"-button-\"+o))}},createHiddenFields:function(){this.removeHiddenFields();var v=this.getForm(),z,o,s,x,y,t,u,n,r,w,p,q=false;if(v&&!this.get(\"disabled\")){o=this.get(\"type\");s=(o==\"checkbox\"||o==\"radio\");if((s&&this.get(\"checked\"))||(e==this)){YAHOO.log(\"Creating hidden field.\",\"info\",this.toString());z=f((s?o:\"hidden\"),this.get(\"name\"),this.get(\"value\"),this.get(\"checked\"));if(z){if(s){z.style.display=\"none\"}v.appendChild(z)}}x=this._menu;if(j&&x&&(x instanceof j)){YAHOO.log(\"Creating hidden field for menu.\",\"info\",this.toString());y=this.get(\"selectedMenuItem\");p=x.srcElement;q=(p&&p.nodeName.toUpperCase()==\"SELECT\");if(y){u=(y.value===null||y.value===\"\")?y.cfg.getProperty(\"text\"):y.value;t=this.get(\"name\");if(q){w=p.name}else{if(t){w=(t+\"_options\")}}if(u&&w){n=f(\"hidden\",w,u);v.appendChild(n)}}else{if(q){n=v.appendChild(p)}}}if(z&&n){this._hiddenFields=[z,n]}else{if(!z&&n){this._hiddenFields=n}else{if(z&&!n){this._hiddenFields=z}}}r=this._hiddenFields}return r},removeHiddenFields:function(){var q=this._hiddenFields,o,p;function n(r){if(g.inDocument(r)){r.parentNode.removeChild(r)}}if(q){if(i.isArray(q)){o=q.length;if(o>0){p=o-1;do{n(q[p])}while(p--)}}else{n(q)}this._hiddenFields=null}},submitForm:function(){var q=this.getForm(),p=this.get(\"srcelement\"),o=false,n;if(q){if(this.get(\"type\")==\"submit\"||(p&&p.type==\"submit\")){e=this}if(l.ie&&(l.ie<9)){o=q.fireEvent(\"onsubmit\")}else{n=document.createEvent(\"HTMLEvents\");n.initEvent(\"submit\",true,true);o=q.dispatchEvent(n)}if((l.ie||l.webkit||l.gecko)&&o){q.submit()}}return o},init:function(p,D){var v=D.type==\"link\"?\"a\":\"button\",A=D.srcelement,s=p.getElementsByTagName(v)[0],u;"]}]}},"3e3a4136038812671f45bf92f79e8ce7ad9b2362":{"changes":{"core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":[{"add":["94","            return new RunParameterDefinition(getName(), getProjectName(), value.getRunId(), getDescription(), getFilter());"],"delete":["94","            return new RunParameterDefinition(getName(), value.getRunId(), getDescription(), getFilter());"]}]}},"57a59c535e4bcd546eed037385eaaa5d86e1e50b":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SCM.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Builder.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/AuthorizationStrategy.java":"MODIFY","core\/src\/main\/java\/hudson\/views\/ListViewColumn.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","core\/src\/main\/java\/hudson\/tools\/ToolInstallerDescriptor.java":"MODIFY","core\/src\/main\/java\/hudson\/node_monitors\/NodeMonitor.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/Cloud.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/DescriptorList.java":"MODIFY","core\/src\/main\/java\/hudson\/Functions.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UserProperty.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/SecurityRealm.java":"MODIFY","core\/src\/main\/java\/hudson\/tools\/ToolInstallation.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ParameterDefinition.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/NodeDescriptor.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Publisher.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/BuildWrapper.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Items.java":"MODIFY","core\/src\/main\/java\/hudson\/FileSystemProvisioner.java":"MODIFY","core\/src\/main\/java\/hudson\/DescriptorExtensionList.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/TestDataPublisher.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/csrf\/CrumbIssuer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SCM.java":[{"add":["548","        return Hudson.getInstance().<SCM,SCMDescriptor<?>>getDescriptorList(SCM.class);"],"delete":["548","        return Hudson.getInstance().getDescriptorList(SCM.class);"]}],"core\/src\/main\/java\/hudson\/tasks\/Builder.java":[{"add":["74","        return Hudson.getInstance().<Builder,Descriptor<Builder>>getDescriptorList(Builder.class);"],"delete":["28","import hudson.model.Action;","32","import hudson.model.Project;","36","import java.util.Collection;","77","        return Hudson.getInstance().getDescriptorList(Builder.class);"]}],"core\/src\/main\/java\/hudson\/security\/AuthorizationStrategy.java":[{"add":["172","        return Hudson.getInstance().<AuthorizationStrategy,Descriptor<AuthorizationStrategy>>getDescriptorList(AuthorizationStrategy.class);"],"delete":["172","        return Hudson.getInstance().getDescriptorList(AuthorizationStrategy.class);"]}],"core\/src\/main\/java\/hudson\/views\/ListViewColumn.java":[{"add":["72","        return Hudson.getInstance().<ListViewColumn, Descriptor<ListViewColumn>>getDescriptorList(ListViewColumn.class);"],"delete":["26","import hudson.Extension;","73","        return Hudson.getInstance().getDescriptorList(ListViewColumn.class);"]}],"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["651","        return Hudson.getInstance().<View,ViewDescriptor>getDescriptorList(View.class);"],"delete":["651","        return Hudson.getInstance().getDescriptorList(View.class);"]}],"core\/src\/main\/java\/hudson\/tools\/ToolInstallerDescriptor.java":[{"add":["50","        return Hudson.getInstance().<ToolInstaller,ToolInstallerDescriptor<?>>getDescriptorList(ToolInstaller.class);"],"delete":["50","        return Hudson.getInstance().getDescriptorList(ToolInstaller.class);"]}],"core\/src\/main\/java\/hudson\/node_monitors\/NodeMonitor.java":[{"add":["143","        return Hudson.getInstance().<NodeMonitor,Descriptor<NodeMonitor>>getDescriptorList(NodeMonitor.class);"],"delete":["26","import hudson.Functions;","30","import hudson.scm.RepositoryBrowser;","39","import java.util.logging.Level;","40","import java.util.logging.Logger;","42","import java.io.Serializable;","148","        return Hudson.getInstance().getDescriptorList(NodeMonitor.class);"]}],"core\/src\/main\/java\/hudson\/slaves\/Cloud.java":[{"add":["139","        return Hudson.getInstance().<Cloud,Descriptor<Cloud>>getDescriptorList(Cloud.class);"],"delete":["139","        return Hudson.getInstance().getDescriptorList(Cloud.class);"]}],"core\/src\/main\/java\/hudson\/util\/DescriptorList.java":[{"add":["144","            return Hudson.getInstance().<T,Descriptor<T>>getDescriptorList(type);"],"delete":["144","            return Hudson.getInstance().getDescriptorList(type);"]}],"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["659","        return Hudson.getInstance().<ComputerLauncher,Descriptor<ComputerLauncher>>getDescriptorList(ComputerLauncher.class);"],"delete":["659","        return Hudson.getInstance().getDescriptorList(ComputerLauncher.class);"]}],"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["241","        columns.rebuildHetero(req, req.getSubmittedForm(), ListViewColumn.all(), \"columns\");"],"delete":["54","import java.util.Iterator;","242","        columns.rebuildHetero(req, req.getSubmittedForm(), Hudson.getInstance().getDescriptorList(ListViewColumn.class), \"columns\");"]}],"core\/src\/main\/java\/hudson\/model\/UserProperty.java":[{"add":["73","        return Hudson.getInstance().<UserProperty,UserPropertyDescriptor>getDescriptorList(UserProperty.class);"],"delete":["73","        return Hudson.getInstance().getDescriptorList(UserProperty.class);"]}],"core\/src\/main\/java\/hudson\/security\/SecurityRealm.java":[{"add":["500","        return Hudson.getInstance().<SecurityRealm,Descriptor<SecurityRealm>>getDescriptorList(SecurityRealm.class);"],"delete":["500","        return Hudson.getInstance().getDescriptorList(SecurityRealm.class);"]}],"core\/src\/main\/java\/hudson\/tools\/ToolInstallation.java":[{"add":["182","        return Hudson.getInstance().<ToolInstallation,ToolDescriptor<?>>getDescriptorList(ToolInstallation.class);"],"delete":["182","        return Hudson.getInstance().getDescriptorList(ToolInstallation.class);"]}],"core\/src\/main\/java\/hudson\/model\/ParameterDefinition.java":[{"add":["179","        return Hudson.getInstance().<ParameterDefinition,ParameterDescriptor>getDescriptorList(ParameterDefinition.class);"],"delete":["29","import hudson.cli.BuildCommand;","180","        return Hudson.getInstance().getDescriptorList(ParameterDefinition.class);"]}],"core\/src\/main\/java\/hudson\/slaves\/NodeDescriptor.java":[{"add":["88","        return Hudson.getInstance().<Node,NodeDescriptor>getDescriptorList(Node.class);"],"delete":["31","import hudson.Extension;","89","        return Hudson.getInstance().getDescriptorList(Node.class);"]}],"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["350","            return (DescriptorExtensionList) DescriptorExtensionList.create(Hudson.this,key);"],"delete":["350","            return DescriptorExtensionList.create(Hudson.this,key);"]}],"core\/src\/main\/java\/hudson\/tasks\/Publisher.java":[{"add":["171","        return Hudson.getInstance().<Publisher,Descriptor<Publisher>>getDescriptorList(Publisher.class);"],"delete":["28","import hudson.Launcher;","36","import hudson.model.AbstractBuild;","173","        return Hudson.getInstance().getDescriptorList(Publisher.class);"]}],"core\/src\/main\/java\/hudson\/tasks\/BuildWrapper.java":[{"add":["211","        return Hudson.getInstance().<BuildWrapper,Descriptor<BuildWrapper>>getDescriptorList(BuildWrapper.class);"],"delete":["211","        return Hudson.getInstance().getDescriptorList(BuildWrapper.class);"]}],"core\/src\/main\/java\/hudson\/model\/Items.java":[{"add":["61","        return Hudson.getInstance().<TopLevelItem,TopLevelItemDescriptor>getDescriptorList(TopLevelItem.class);"],"delete":["61","        return Hudson.getInstance().getDescriptorList(TopLevelItem.class);"]}],"core\/src\/main\/java\/hudson\/FileSystemProvisioner.java":[{"add":["188","        return Hudson.getInstance().<FileSystemProvisioner,FileSystemProvisionerDescriptor>getDescriptorList(FileSystemProvisioner.class);"],"delete":["188","        return Hudson.getInstance().getDescriptorList(FileSystemProvisioner.class);"]}],"core\/src\/main\/java\/hudson\/DescriptorExtensionList.java":[{"add":["69","    @SuppressWarnings({\"unchecked\", \"rawtypes\"}) \/\/ cannot use generic signature because it \"overrides\" method from ExtensionList","70","    public static \/*<T extends Describable<T>,D extends Descriptor<T>>*\/","71","    DescriptorExtensionList\/*<T,D>*\/ create(Hudson hudson, Class\/*<T>*\/ describableType) {","72","        if (describableType == Publisher.class) {","73","            return new DescriptorExtensionListImpl(hudson);","74","        }","75","        return new DescriptorExtensionList\/*<T,D>*\/(hudson,describableType);"],"delete":["31","import hudson.util.CopyOnWriteList;","70","    public static <T extends Describable<T>,D extends Descriptor<T>>","71","    DescriptorExtensionList<T,D> create(Hudson hudson, Class<T> describableType) {","72","        if(describableType==(Class)Publisher.class) \/\/ javac or IntelliJ compiler complains if I don't have this cast","73","            return (DescriptorExtensionList)new DescriptorExtensionListImpl(hudson);","74","        return new DescriptorExtensionList<T,D>(hudson,describableType);"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/TestDataPublisher.java":[{"add":["57","\t\treturn Hudson.getInstance().<TestDataPublisher, Descriptor<TestDataPublisher>>getDescriptorList(TestDataPublisher.class);"],"delete":["57","\t\treturn Hudson.getInstance().getDescriptorList(TestDataPublisher.class);"]}],"core\/src\/main\/java\/hudson\/security\/csrf\/CrumbIssuer.java":[{"add":["148","        return Hudson.getInstance().<CrumbIssuer, Descriptor<CrumbIssuer>>getDescriptorList(CrumbIssuer.class);"],"delete":["148","        return Hudson.getInstance().getDescriptorList(CrumbIssuer.class);"]}]}}}