{"f1c65de9f05ff0ba5c5192981934446128ee8403":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractItem\/_api.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["675","            delete();","676","            rsp.setStatus(204);"],"delete":["675","            doDoDelete(req,rsp);"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractItem\/_api.jelly":[{"add":["35","        To programmatically delete this job, do HTTP DELETE to <a href=\"..\/\">this URL<\/a>."],"delete":["35","        To programmatically delete this job, do HTTP POST to <a href=\"..\/doDelete\">this URL<\/a>."]}]}},"8f42eae7cbaae5625e278185609c69a9e2de6d34":{"changes":{"core\/src\/main\/resources\/hudson\/ProxyConfiguration\/config.groovy":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/ProxyConfiguration\/config.groovy":[{"add":["24","                     method:\"validateProxy\", with:\"testUrl,name,port,userName,secretPassword,noProxyHost\")"],"delete":["24","                     method:\"validateProxy\", with:\"testUrl,name,port,userName,password,noProxyHost\")"]}]}},"a325eea024242306eba700b0aa1da7a2b1dc7cd0":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["47","              <value>${basedir}\/work<\/value>"],"delete":["47","              <value>work<\/value>"]}]}},"688e81cbc38690c67e73729b1d48e1d1bea8acab":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/RemoteClassLoader.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/Channel.java":"MODIFY","changelog.html":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/ExportTable.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/RemoteClassLoader.java":[{"add":["354","    public static void pin(ClassLoader cl, Channel local) {","355","        if (cl instanceof RemoteClassLoader) {","356","            \/\/ check if this is a remote classloader from the channel","357","            final RemoteClassLoader rcl = (RemoteClassLoader) cl;","358","            int oid = RemoteInvocationHandler.unwrap(rcl.proxy, local);","359","            if(oid!=-1) return;","360","        }","361","        local.pin(new ClassLoaderProxy(cl,local));","362","    }","363",""],"delete":[]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["338","        \/\/ reference counting problem is known to happen, such as JENKINS-9017, and so as a preventive measure","339","        \/\/ we pin the base classloader so that it'll never get GCed. When this classloader gets released,","340","        \/\/ it'll have a catastrophic impact on the communication.","341","        channel.pinClassLoader(getClass().getClassLoader());","342",""],"delete":[]}],"remoting\/src\/main\/java\/hudson\/remoting\/Channel.java":[{"add":["515","        \/\/ proxy will unexport this instance when it's GC-ed on the remote machine, so don't unexport on our side automatically at the end of a call.","516","        final int id = export(instance,false);","517","        return RemoteInvocationHandler.wrap(null, id, type, userProxy, exportedObjects.isRecording());","537","     * Increase reference count so much to effectively prevent de-allocation.","538","     *","539","     * @see ExportTable.Entry#pin()","540","     *\/","541","    public void pin(Object instance) {","542","        exportedObjects.pin(instance);","543","    }","544","","545","    \/**","546","     * {@linkplain #pin(Object) Pin down} the exported classloader.","547","     *\/","548","    public void pinClassLoader(ClassLoader cl) {","549","        RemoteClassLoader.pin(cl,this);","550","    }","551","","552","    \/**"],"delete":["515","        \/\/ proxy will unexport this instance when it's GC-ed on the remote machine.","516","        final int id = export(instance);","517","        return RemoteInvocationHandler.wrap(null,id,type,userProxy,exportedObjects.isRecording());"]}],"changelog.html":[{"add":["60","  <li class=bug>","61","    Fixed a <tt>ClassCastException<\/tt> caused by multiple loading of the same class in different classloaders.","62","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9017\">issue 9017<\/a>)"],"delete":[]}],"remoting\/src\/main\/java\/hudson\/remoting\/ExportTable.java":[{"add":["78","        \/**","79","         * Increase reference count so much to effectively prevent de-allocation.","80","         * If the reference counting is correct, we just need to increment by one,","81","         * but this makes it safer even in case of some reference counting errors","82","         * (and we can still detect the problem by comparing the reference count with the magic value.","83","         *\/","84","        void pin() {","85","            referenceCount += Integer.MAX_VALUE\/2;","86","        }","87","","166","        e.addRef();","176","    \/*package*\/ synchronized void pin(T t) {","177","        Entry e = reverse.get(t);","178","        if(e==null)","179","            e = new Entry(t);","180","        e.pin();","181","    }","182",""],"delete":["69","            addRef();","157","        else","158","            e.addRef();"]}]}},"eb3e288d6e761109c20cf479c80dfb4c69801dbe":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/buildCaption.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/buildCaption.jelly":[{"add":["46","\t  <img src=\"${imagesURL}\/48x48\/${it.buildStatusUrl}\" width=\"48\" height=\"48\" alt=\"${it.iconColor.description}\" tooltip=\"${it.iconColor.description}\" \/>"],"delete":["46","\t  <img src=\"buildStatus\" width=\"48\" height=\"48\" alt=\"${it.iconColor.description}\" tooltip=\"${it.iconColor.description}\" \/>"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Build Status page continues to show flashing \"building\" icons after build completion.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13217\">issue 13217<\/a>)  "],"delete":[]}]}},"37e7856b017fcf700d314086a709f00601edef00":{"changes":{"core\/src\/main\/java\/jenkins\/model\/ParameterizedJobMixIn.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/ParameterizedJobMixIn.java":[{"add":["179","        if (!asJob().isBuildable()) {","180","            throw HttpResponses.error(SC_INTERNAL_SERVER_ERROR, new IOException(asJob().getFullName() + \" is not buildable\"));","181","        }","182",""],"delete":["194","        if (!asJob().isBuildable()) {","195","            throw HttpResponses.error(SC_INTERNAL_SERVER_ERROR, new IOException(asJob().getFullName() + \" is not buildable\"));","196","        }"]}]}},"fa1c03b0d8b56702ca3aafcaa0c3defe8dae5250":{"changes":{"core\/src\/main\/java\/hudson\/PluginWrapper.java":"MODIFY","core\/src\/test\/java\/hudson\/PluginWrapperTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/PluginWrapper.java":[{"add":["211","            String version = s.substring(idx+1);","212","","214","            String[] osgiProperties = version.split(\"[;]\");","222","            if (isOptional) {","223","                this.version = osgiProperties[0];","224","            } else {","225","                this.version = version;","226","            }"],"delete":["211","            this.version = s.substring(idx+1);","212","            ","214","            String[] osgiProperties = s.split(\";\");"]}],"core\/src\/test\/java\/hudson\/PluginWrapperTest.java":[{"add":[],"delete":[]}]}},"010866ba90fb7af074c5c447c1bd5143f60c00e2":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/jna\/Kernel32Utils.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["321","            try {","322","                return Kernel32Utils.isJunctionOrSymlink(file);","323","            } catch (UnsupportedOperationException e) {","324","                \/\/ fall through","325","            } catch (LinkageError e) {","326","                \/\/ fall through","327","            }"],"delete":["321","          return Kernel32Utils.isJunctionOrSymlink(file);"]}],"core\/src\/main\/java\/hudson\/util\/jna\/Kernel32Utils.java":[{"add":["79","        return (file.exists() && (Kernel32.FILE_ATTRIBUTE_REPARSE_POINT & getWin32FileAttributes(file)) != 0);"],"delete":["79","        try {","80","            return (file.exists() && (Kernel32.FILE_ATTRIBUTE_REPARSE_POINT & getWin32FileAttributes(file)) != 0);","81","        } catch (UnsupportedOperationException e) {","82","            return false;","83","        } catch (LinkageError e) {","84","            return false;","85","        }"]}],"changelog.html":[{"add":["57","  <li class='major bug'>","58","    JNA-related linkage errors on Windows not handled gracefully.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15466\">issue 15466<\/a>)"],"delete":[]}]}},"89d9c21e44f8d4eebb183f676badf5f242ab6ea8":{"changes":{"core\/src\/main\/java\/hudson\/util\/StreamTaskListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/StreamTaskListener.java":[{"add":["162","        return charset != null ? charset : Charset.defaultCharset();"],"delete":["162","        return charset;"]}]}},"c490e884bcb73b6c2c3b3e7f9ced3c0a36c4e279":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["1100","        } catch(NoClassDefFoundError e) {  \/\/ cf. https:\/\/groups.google.com\/group\/hudson-dev\/browse_thread\/thread\/6d16c3e8ea0dbc9?hl=fr","1101","            _chmodAnt(f, mask);","1102","        } catch(UnsatisfiedLinkError e2) { \/\/ HUDSON-8155: use Ant's chmod task on non-GNU C systems","1103","            _chmodAnt(f, mask);","1107","    private static void _chmodAnt(File f, int mask) {","1108","        if (!CHMOD_WARNED) { \/\/ only warn this once to avoid flooding the log","1109","            CHMOD_WARNED = true;","1110","            LOGGER.warning(\"GNU C Library not available: Using Ant's chmod task instead.\");","1111","        }","1112","        Chmod chmodTask = new Chmod();","1113","        chmodTask.setProject(new Project());","1114","        chmodTask.setFile(f);","1115","        chmodTask.setPerm(Integer.toOctalString(mask));","1116","        chmodTask.execute();","1117","    }","1118",""],"delete":["1100","        } catch(UnsatisfiedLinkError e) { \/\/ HUDSON-8155: use Ant's chmod task on non-GNU C systems","1101","            if (!CHMOD_WARNED) {\/\/ only warn this once to avoid flooding the log","1102","                CHMOD_WARNED = true;","1103","                LOGGER.warning(\"GNU C Library not available: Using Ant's chmod task instead.\");","1104","            }","1105","            Chmod chmodTask = new Chmod();","1106","            chmodTask.setProject(new Project());","1107","            chmodTask.setFile(f);","1108","            chmodTask.setPerm(Integer.toOctalString(mask));","1109","            chmodTask.execute();"]}]}},"196e8506b5b22de9a010a9f2f843c8832f33c0c0":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["157","            \/\/ From the old Hudson, or doCreateItem. Create this file now.","193","        if (nextBuildNumber == 0) { \/\/ #3361","194","            nextBuildNumber = 1;","195","        }"],"delete":["157","            \/\/ this must be the old Hudson. create this file now."]}]}},"5c1fd7d60351dfbade6f76e8811c636b3d92f055":{"changes":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/JDKInstaller.java":[{"add":["479","                    \/* Oracle switched from old to new, and then back to old. This code should work for either.","480","                     * Old Login flow:","481","                     * 1. \/mysso\/signon.jsp: Form for username + password: Submit actions is:","482","                     * 2. \/oam\/server\/sso\/auth_cred_submit: Returns a 302 to:","483","                     * 3. https:\/\/edelivery.oracle.com\/osso_login_success: Returns a 302 to the download.","484","                     * New Login flow:","492","                    if (m.getURI().getPath().contains(\"\/loginAuth.do\")) {","494","                            Thread.sleep(2000);","530","                        if (n.equals(\"userid\") || n.equals(\"ssousername\"))","532","                        if (n.equals(\"pass\") || n.equals(\"password\")) {"],"delete":["479","                    \/* Login flow:","487","                    if (m.getURI().getPath().contains(\"\/loginAuth.do\")) { \/\/ You are redirected to this page immediately after logging in.","489","                            Thread.sleep(2000); \/\/ Oracle website waits 2 seconds after logging in before redirecting.","525","                        if (n.equals(\"userid\"))","527","                        if (n.equals(\"pass\")) {"]}]}},"6450647d64b423528431d112b3ca57b7488ce4a8":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["243","        return rel.startsWith(\"\/\") || DRIVE_PATTERN.matcher(rel).matches() || UNC_PATTERN.matcher(rel).matches();","247","            UNC_PATTERN = Pattern.compile(\"^\\\\\\\\\\\\\\\\.*\"),"],"delete":["243","        return rel.startsWith(\"\/\") || DRIVE_PATTERN.matcher(rel).matches();"]}]}},"9503a53865bf19dc5ebb85e6997499b1af71e581":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["278","      <version>1.69<\/version>"],"delete":["278","      <version>1.68<\/version>"]}]}},"ea9a126536b24f917c3c6b3b14c5500e19a117c1":{"changes":{"core\/src\/main\/java\/hudson\/model\/Descriptor.java":"MODIFY","core\/src\/main\/resources\/lib\/form\/hetero-list.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Project.java":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/project\/config-builders.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Descriptor.java":[{"add":["282","     * Finds a descriptor from a collection by its class name.","284","    public static <T extends Descriptor> T find(Collection<? extends T> list, String className) {","286","            if(d.getClass().getName().equals(className))"],"delete":["282","     * Finds a descriptor from a collection by its display name.","284","    public static <T extends Descriptor> T find(Collection<? extends T> list, String displayName) {","286","            if(d.getDisplayName().equals(displayName))"]}],"core\/src\/main\/resources\/lib\/form\/hetero-list.jelly":[{"add":["13","   hasHeader:     for each item, add a caption from descriptor.getDisplayName()","14","","15"," See Descriptor.newInstancesFromHeteroList for how to parse the submission.","25","        <input type=\"hidden\" name=\"kind\" value=\"${descriptor.class.name}\" \/>","27","          <j:if test=\"${attrs.hasHeader}\">","28","            <f:block><b>${descriptor.displayName}<\/b><\/f:block>","29","          <\/j:if>","46","          <input type=\"hidden\" name=\"kind\" value=\"${descriptor.class.name}\" \/>","48","            <j:if test=\"${attrs.hasHeader}\">","49","              <f:block><b>${descriptor.displayName}<\/b><\/f:block>","50","            <\/j:if>"],"delete":["22","        <input type=\"hidden\" name=\"kind\" value=\"${descriptor.displayName}\" \/>","40","          <input type=\"hidden\" name=\"kind\" value=\"${descriptor.displayName}\" \/>"]}],"core\/src\/main\/java\/hudson\/model\/Project.java":[{"add":["4","import hudson.StructuredForm;","24","import java.util.Collections;","75","    public List<Builder> getBuildersList() {","76","        return Collections.unmodifiableList(builders);","77","    }","78","","155","        builders = Descriptor.newInstancesFromHeteroList(req,","156","                StructuredForm.get(req), \"builder\", BuildStep.BUILDERS);"],"delete":["149","        builders = buildDescribable(req, BuildStepDescriptor.filter(BuildStep.BUILDERS, getClass()), \"builder\");"]}],"core\/src\/main\/resources\/lib\/hudson\/project\/config-builders.jelly":[{"add":["5","  <!--f:descriptorList title=\"${%Build}\"","8","                    varName=\"builder\" \/-->","9","","10","  <f:section title=\"${%Build}\">","11","    <f:block>","12","      <f:hetero-list name=\"builder\" hasHeader=\"true\"","13","                     descriptors=\"${h.getBuilderDescriptors(it)}\"","14","                     items=\"${it.buildersList}\"","15","                     addCaption=\"${%Add build step}\"\/>","16","    <\/f:block>","17","  <\/f:section>"],"delete":["5","  <f:descriptorList title=\"${%Build}\"","8","                    varName=\"builder\" \/>"]}]}},"93467c3f4bc74172b41543eea13e6771916d435a":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/BatchFileTest.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Shell.java":"MODIFY","test\/src\/test\/resources\/hudson\/tasks\/BatchFileTest\/canLoadUnstableReturnFromDisk.zip":"ADD","core\/src\/main\/java\/hudson\/tasks\/BatchFile.java":"MODIFY","test\/src\/test\/resources\/hudson\/tasks\/ShellTest\/canLoadUnstableReturnFromDisk.zip":"ADD","test\/src\/test\/java\/hudson\/tasks\/ShellTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/BatchFileTest.java":[{"add":["2","import static org.junit.Assert.assertEquals;","19","import org.jvnet.hudson.test.recipes.LocalData;","152","","153","    @Issue(\"JENKINS-40894\")","154","    @Test","155","    @LocalData","156","    public void canLoadUnstableReturnFromDisk() throws Exception {","157","        FreeStyleProject p = (FreeStyleProject) rule.jenkins.getItemByFullName(\"batch\");","158","        BatchFile batchFile = (BatchFile) p.getBuildersList().get(0);","159","        assertEquals(\"unstable return\", Integer.valueOf(1), batchFile.getUnstableReturn());","160","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/Shell.java":[{"add":["127","        Shell shell = new Shell(command);","128","        shell.setUnstableReturn(unstableReturn);","129","        return shell;"],"delete":["127","        return new Shell(command);"]}],"test\/src\/test\/resources\/hudson\/tasks\/BatchFileTest\/canLoadUnstableReturnFromDisk.zip":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/BatchFile.java":[{"add":["83","        BatchFile batch = new BatchFile(command);","84","        batch.setUnstableReturn(unstableReturn);","85","        return batch;"],"delete":["83","        return new BatchFile(command);"]}],"test\/src\/test\/resources\/hudson\/tasks\/ShellTest\/canLoadUnstableReturnFromDisk.zip":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/tasks\/ShellTest.java":[{"add":["29","import org.jvnet.hudson.test.recipes.LocalData;","193","    @Issue(\"JENKINS-40894\")","194","    @Test","195","    @LocalData","196","    public void canLoadUnstableReturnFromDisk() throws Exception {","197","        FreeStyleProject p = (FreeStyleProject) rule.jenkins.getItemByFullName(\"test\");","198","        Shell shell = (Shell) p.getBuildersList().get(0);","199","        assertEquals(\"unstable return\", Integer.valueOf(1), shell.getUnstableReturn());","200","    }","201",""],"delete":[]}]}},"5b3990e5e30630b9a2950fa846ef3e906c86d743":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["582","        value = Util.fixEmptyAndTrim(value);","583","        if (value == null) {","584","            return FormValidation.ok();","585","        }"],"delete":[]}]}},"dc384ef0d75050736500695a9346c4e5ba7f2d65":{"changes":{"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/config.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/config.jelly":[{"add":["27","    <f:textarea field=\"scmpoll_spec\" checkUrl=\"'descriptorByName\/hudson.triggers.TimerTrigger\/checkSpec?value='+encodeURIComponent(this.value)\"\/>"],"delete":["27","    <f:textarea field=\"scmpoll_spec\" checkUrl=\"'${rootURL}\/trigger\/TimerTrigger\/check?value='+encodeURIComponent(this.value)\"\/>"]}]}},"4e48eaa05ca3a76fcb0e1eee307fd20f222079bc":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/Shell\/config.groovy":"MODIFY","core\/src\/main\/resources\/lib\/form\/textarea\/textarea.js":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/Shell\/config.groovy":[{"add":["27","    f.textarea(name: \"command\", value: instance?.command, class: \"fixed-width\", 'codemirror-mode': 'shell', 'codemirror-config': \"mode: 'text\/x-sh'\")"],"delete":["27","    \/\/ TODO JENKINS-23151 'codemirror-mode': 'shell' is broken","28","    f.textarea(name: \"command\", value: instance?.command, class: \"fixed-width\")"]}],"core\/src\/main\/resources\/lib\/form\/textarea\/textarea.js":[{"add":["12","        var config = e.getAttribute(\"codemirror-config\");","13","        config += (config ? \", \" : \" \") + \"onBlur: function(editor){editor.save()}\";"],"delete":["12","        var config = e.getAttribute(\"codemirror-config\") || \"\";"]}]}},"0859573721a5f1c0c225d46c898e23e683ec3550":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessKillingVeto.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessKillingVeto.java":[{"add":["25","import hudson.ExtensionList;\r","35","import jenkins.util.JenkinsJVM;\r","77","        if (JenkinsJVM.isJenkinsJVM()) {\r","78","            return _all();\r","79","        }\r","80","        return Collections.emptyList();\r","81","    }\r","82","\r","83","    \/**\r","84","     * As classloading is lazy, the classes referenced in this method will not be resolved\r","85","     * until the first time the method is invoked, so we use this method to guard access to Jenkins JVM only classes.\r","86","     *\r","87","     * @return All ProcessKillingVeto extensions currently registered.\r","88","     *\/\r","89","    private static List<ProcessKillingVeto> _all() {\r","90","        return ExtensionList.lookup(ProcessKillingVeto.class);\r"],"delete":["34","import jenkins.model.Jenkins;\r","76","        \/\/ check if we are a thread running on the master JVM or a thread running in a remote JVM\r","77","        Jenkins jenkins = Jenkins.getInstanceOrNull();\r","78","        if (jenkins == null)\r","79","            return Collections.emptyList(); \/\/ we are remote, no body gets to veto\r","80","        return jenkins.getExtensionList(ProcessKillingVeto.class);\r"]}]}},"01b8ed8c71dee97d661bd5bf4b8e4bc5ecd636ae":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","core\/src\/filter\/resources\/jenkins\/slaves\/remoting-info.properties":"MODIFY","pom.xml":"MODIFY","core\/src\/main\/java\/jenkins\/security\/MasterToSlaveCallable.java":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/StandardOutputSwapper.java":"MODIFY","test\/src\/test\/java\/jenkins\/slaves\/OldRemotingAgentTest.java":"MODIFY","test\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/RemotingVersionInfo.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","core\/src\/test\/java\/jenkins\/slaves\/RemotingVersionInfoTest.java":"MODIFY","core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["870","                getChannelOrFail().setProperty(\"slave\",Boolean.TRUE); \/\/ indicate that this side of the channel is the slave side."],"delete":["46","import hudson.util.IOUtils;","871","                _getChannelOrFail().setProperty(\"slave\",Boolean.TRUE); \/\/ indicate that this side of the channel is the slave side."]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["1426","            final Channel ch = getChannelOrFail();"],"delete":["34","import hudson.cli.declarative.CLIMethod;","87","import org.kohsuke.args4j.Option;","1428","            final Channel ch = _getChannelOrFail();"]}],"core\/src\/filter\/resources\/jenkins\/slaves\/remoting-info.properties":[{"add":["4","# Minimum Remoting version on external agents which is supported by the core","5","remoting.minimum.supported.version=${remoting.minimum.supported.version}"],"delete":["4","# Minimal Remoting version on external agents which is supported by the core","5","remoting.minimal.supported.version=${remoting.minimal.supported.version}"]}],"pom.xml":[{"add":["106","    <!-- Minimum Remoting version, which is tested for API compatibility -->","108","    <remoting.minimum.supported.version>2.60<\/remoting.minimum.supported.version>"],"delete":["106","    <!-- Minimal Remoting version, which is tested for API compatibility -->","108","    <remoting.minimal.supported.version>2.60<\/remoting.minimal.supported.version>"]}],"core\/src\/main\/java\/jenkins\/security\/MasterToSlaveCallable.java":[{"add":["25","    \/\/TODO: remove once Minimum supported Remoting version is 3.15 or above","26","    @Override","27","    public Channel getChannelOrFail() throws ChannelClosedException {","35","    \/\/TODO: remove once Callable#getOpenChannelOrFail() once Minimaumsupported Remoting version is 3.15 or above","36","    @Override","37","    public Channel getOpenChannelOrFail() throws ChannelClosedException {","38","        final Channel ch = getChannelOrFail();","39","        if (ch.isClosingOrClosed()) { \/\/ TODO: Since Remoting 2.33, we still need to explicitly declare minimum Remoting version"],"delete":["9","import javax.annotation.Nonnull;","10","","27","    \/\/TODO: replace by Callable#getChannelOrFail() once Minimal supported Remoting version is 3.15 or above","28","    @Restricted(NoExternalUse.class)","29","    protected static Channel _getChannelOrFail() throws ChannelClosedException {","37","    \/\/TODO: replace by Callable#getOpenChannelOrFail() once Minimal supported Remoting version is 3.15 or above","38","    @Restricted(NoExternalUse.class)","39","    protected static Channel _getOpenChannelOrFail() throws ChannelClosedException {","40","        final Channel ch = _getChannelOrFail();","41","        if (ch.isClosingOrClosed()) { \/\/ TODO: Since Remoting 2.33, we still need to explicitly declare minimal Remoting version"]}],"core\/src\/main\/java\/jenkins\/slaves\/StandardOutputSwapper.java":[{"add":["41","            Channel c = getOpenChannelOrFail();"],"delete":["41","            Channel c = _getOpenChannelOrFail();"]}],"test\/src\/test\/java\/jenkins\/slaves\/OldRemotingAgentTest.java":[{"add":["71","        FileUtils.copyURLToFile(OldRemotingAgentTest.class.getResource(\"\/old-remoting\/remoting-minimal-supported.jar\"), agentJar);","82","                equalTo(RemotingVersionInfo.getMinimumSupportedVersion().toString()));","123","                \/\/TODO: make the API visible for testing?","124","                throw new AssertionError(\"Cannot invoke monitor \" + monitor + \", no monitor(Computer.class) method in the Descriptor. It will be ignored. \", ex);"],"delete":["46","import javax.annotation.CheckForNull;","72","        FileUtils.copyURLToFile(getClass().getResource(\"\/old-remoting\/remoting-minimal-supported.jar\"), agentJar);","83","                equalTo(RemotingVersionInfo.getMinimalSupportedVersion().toString()));","124","                System.out.println(\"Cannot invoke monitor \" + monitor + \", no monitor(Computer.class) method in the Descriptor. It will be ignored. \" + ex.getMessage());","125","                return;"]}],"test\/pom.xml":[{"add":["241","                  <version>${remoting.minimum.supported.version}<\/version>"],"delete":["241","                  <version>${remoting.minimal.supported.version}<\/version>"]}],"core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":[{"add":["136","            setUpPingForChannel(getOpenChannelOrFail(), null, pingTimeoutSeconds, pingIntervalSeconds, false);"],"delete":["136","            setUpPingForChannel(_getOpenChannelOrFail(), null, pingTimeoutSeconds, pingIntervalSeconds, false);"]}],"core\/src\/main\/java\/jenkins\/slaves\/RemotingVersionInfo.java":[{"add":["39"," * Provides information about Remoting versions used within the core.","52","    private static VersionNumber MINIMUM_SUPPORTED_VERSION;","67","        MINIMUM_SUPPORTED_VERSION = tryExtractVersion(props, \"remoting.minimum.supported.version\");","99","    public static VersionNumber getMinimumSupportedVersion() {","100","        return MINIMUM_SUPPORTED_VERSION;"],"delete":["39"," * Provides information about Remoting versions used withing the core.","41"," * @since TODO","53","    private static VersionNumber MINIMAL_SUPPORTED_VERSION;","68","        MINIMAL_SUPPORTED_VERSION = tryExtractVersion(props, \"remoting.minimal.supported.version\");","100","    public static VersionNumber getMinimalSupportedVersion() {","101","        return MINIMAL_SUPPORTED_VERSION;"]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["1290","            final Channel channel = getOpenChannelOrFail();"],"delete":["46","import javax.annotation.concurrent.GuardedBy;","1291","            final Channel channel = _getOpenChannelOrFail();"]}],"core\/src\/test\/java\/jenkins\/slaves\/RemotingVersionInfoTest.java":[{"add":["42","    public void shouldLoadMinimumSupportedVersionByDefault() {","43","        assertThat(\"Remoting Minimum supported version is not defined\",","44","                RemotingVersionInfo.getMinimumSupportedVersion(), notNullValue());"],"delete":["42","    public void shouldLoadMinimalSupportedVersionByDefault() {","43","        assertThat(\"Remoting Minimal supported version is not defined\",","44","                RemotingVersionInfo.getMinimalSupportedVersion(), notNullValue());"]}],"core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":[{"add":["292","                \/\/TODO: expose version about minimum supported Remoting version (JENKINS-48766)"],"delete":["292","                \/\/TODO: expose version about minimal supported Remoting version (JENKINS-48766)"]}]}},"931fa176e811878e0bd06e6007036f5e8651c917":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/junit\/JUnitParser.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages.properties":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/junit\/JUnitParser.java":[{"add":["82","        FilePath workspace = build.getWorkspace();","83","        if (workspace == null) {","84","            throw new AbortException(Messages.JUnitParser_no_workspace_found(build));","85","        }","86","        return workspace.act(new ParseResultCallable(testResultLocations, buildTime, timeOnMaster, keepLongStdio));"],"delete":["82","        TestResult testResult = build.getWorkspace().act( new ParseResultCallable(testResultLocations, buildTime, timeOnMaster, keepLongStdio));","83","        return testResult;        "]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/Messages.properties":[{"add":["32","JUnitParser.no_workspace_found=No workspace found for {0}"],"delete":[]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    <code>NullPointerException<\/code> from <code>JUnitParser.parse<\/code>.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14507\">issue 14507<\/a>)"],"delete":["57","  <li class=>"]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["90","import javax.annotation.CheckForNull;","252","    public final @CheckForNull FilePath getWorkspace() {"],"delete":["251","    public final FilePath getWorkspace() {"]}]}},"38fffda5ea7b614bc88073ebd4eaf62d58e7af84":{"changes":{"core\/src\/main\/java\/hudson\/model\/labels\/LabelAtom.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/labels\/LabelAtom.java":[{"add":["131","    @Exported","132","    public List<LabelAtomProperty> getPropertiesList() {","133","        return properties.toList();","134","    }","135",""],"delete":["127","    @Exported"]}]}},"b76e7bf9988ebf5b3b7e2c5e588d5ce6dbde957e":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":"MODIFY","core\/src\/test\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMapTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/lazy\/LazyLoadRunMapEntrySet.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":[{"add":["587","        entrySet.clearCache();","588","","746","        entrySet.clearCache();","747",""],"delete":[]}],"core\/src\/test\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMapTest.java":[{"add":["416","    @Issue(\"JENKINS-25655\")","417","    @Test public void entrySetChanges() {","418","        assertEquals(3, a.entrySet().size());","419","        a.put(new Build(7, \"D\"));","420","        assertEquals(4, a.entrySet().size());","421","    }","422",""],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/lazy\/LazyLoadRunMapEntrySet.java":[{"add":["34","    synchronized void clearCache() {","35","        all = null;","36","    }","37",""],"delete":[]}]}},"dbb100da58a084fb0a6ce129d3f2b7ad827e87ee":{"changes":{"core\/src\/main\/resources\/lib\/form\/repeatable\/repeatable.js":"MODIFY","war\/src\/main\/webapp\/scripts\/behavior.js":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/repeatable\/repeatable.js":[{"add":[],"delete":["20","        if (this.container.tag != null) {","21","            return;","22","        }"]}],"war\/src\/main\/webapp\/scripts\/behavior.js":[{"add":["67","        var behaviorsBySelector = {};","71","                    var behavior = sheet[selector];","72","                    var behaviors = behaviorsBySelector[selector];","73","                    if (behaviors == null) {","74","                        behaviors = [];","75","                        behaviorsBySelector[selector] = behaviors;","76","                    }","77","                    if (behaviors.indexOf(behavior.toString()) == -1) {","78","                        behaviors.push(behavior.toString());","79","                        var list = findElementsBySelector(n,selector,includeSelf);","80","                        if (list.length>0)  \/\/ just to simplify setting of a breakpoint.","81","                            list._each(sheet[selector]);","82","                    }"],"delete":["70","                    var list = findElementsBySelector(n,selector,includeSelf);","71","                    if (list.length>0)  \/\/ just to simplify setting of a breakpoint.","72","                        list._each(sheet[selector]);"]}],"changelog.html":[{"add":["59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14434\">issue 14434<\/a> and <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14495\">issue 14495<\/a>)"],"delete":["59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14434\">issue 14434<\/a> and <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14514\">issue 14514<\/a>)"]}]}},"da7debde9121fd74472e24772dc44026cb2db030":{"changes":{"core\/src\/main\/resources\/hudson\/logging\/LogRecorderManager\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/logging\/LogRecorderManager\/index.jelly":[{"add":["34","      <t:help href=\"https:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Logging\" \/>"],"delete":["34","      <t:help href=\"http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Log+Recorders\" \/>"]}]}},"be7a97ee32b57dcb27b8fd6c908ebbe451220902":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/FingerprinterTest.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Fingerprinter.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/FingerprinterTest.java":[{"add":["26","import com.google.common.collect.ImmutableMap;","27","import com.google.common.collect.ImmutableSet;","28","import hudson.Launcher;","34","import hudson.model.*;","43","","44","import static org.hamcrest.Matchers.hasSize;","49","import org.hamcrest.Matchers;","114","    private static class FingerprintAddingBuilder extends Builder {","115","        @Override","116","        public boolean perform(AbstractBuild<?, ?> build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {","117","            build.addAction(new Fingerprinter.FingerprintAction(build, ImmutableMap.of(singleFiles2[0], \"fakefingerprint\")));","118","            return true;","119","        }","120","    }","121","","122","    @Test public void presentFingerprintActionIsReused() throws Exception {","123","        FreeStyleProject project = createFreeStyleProjectWithFingerprints(singleContents, singleFiles);","124","        project.getBuildersList().add(new FingerprintAddingBuilder());","125","","126","        FreeStyleBuild build = j.buildAndAssertSuccess(project);","127","","128","        assertThat(build.getActions(Fingerprinter.FingerprintAction.class), hasSize(1));","129","","130","        Fingerprinter.FingerprintAction action = build.getAction(Fingerprinter.FingerprintAction.class);","131","        assertEquals(action.getRecords().keySet(), ImmutableSet.of(singleFiles2[0], singleFiles[0]));","132","    }","133",""],"delete":["31","import hudson.model.AbstractProject;","32","import hudson.model.Fingerprint;","33","import hudson.model.FingerprintCleanupThread;","34","import hudson.model.FreeStyleBuild;","35","import hudson.model.FreeStyleProject;","36","import hudson.model.Result;"]}],"core\/src\/main\/java\/hudson\/tasks\/Fingerprinter.java":[{"add":["134","            FingerprintAction fingerprintAction = build.getAction(FingerprintAction.class);","135","            if (fingerprintAction != null) {","136","                fingerprintAction.add(record);","137","            } else {","138","                build.addAction(new FingerprintAction(build,record));","139","            }"],"delete":["134","            build.addAction(new FingerprintAction(build,record));"]}],"changelog.html":[{"add":["84","  <li class=bug>","85","    Existing Fingerprint Action is reused and not added a second time.","86","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17606\">issue 19832<\/a>)"],"delete":[]}]}},"b4fe626f73acaa3d52453543752709261994635a":{"changes":{"core\/src\/test\/java\/hudson\/FilePathTest.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/FilePathTest.java":[{"add":["45","import org.apache.tools.ant.Project;","46","import org.apache.tools.ant.taskdefs.Chmod;","319","    ","320","    \/**","321","     * Tests that permissions are kept when using {@link FilePath#copyToWithPermission(FilePath)}.","322","     * Also tries to check that a problem with setting the last-modified date on Windows doesn't fail the whole copy","323","     * - well at least when running this test on a Windows OS. See JENKINS-11073","324","     *\/","325","    public void testCopyToWithPermission() throws IOException, InterruptedException {","326","        File tmp = Util.createTempDir();","327","        try {","328","            File child = new File(tmp,\"child\");","329","            FilePath childP = new FilePath(child);","330","            childP.touch(4711);","331","            ","332","            Chmod chmodTask = new Chmod();","333","            chmodTask.setProject(new Project());","334","            chmodTask.setFile(child);","335","            chmodTask.setPerm(\"0400\");","336","            chmodTask.execute();","337","            ","338","            FilePath copy = new FilePath(british,tmp.getPath()).child(\"copy\");","339","            childP.copyToWithPermission(copy);","340","            ","341","            assertEquals(childP.mode(),copy.mode());","342","            if (!Functions.isWindows()) {","343","                assertEquals(childP.lastModified(),copy.lastModified());","344","            }","345","            ","346","            \/\/ JENKINS-11073:","347","            \/\/ Windows seems to have random failures when setting the timestamp on newly generated","348","            \/\/ files. So test that:","349","            for (int i=0; i<100; i++) {","350","                copy = new FilePath(british,tmp.getPath()).child(\"copy\"+i);","351","                childP.copyToWithPermission(copy);","352","            }","353","        } finally {","354","            Util.deleteRecursive(tmp);","355","        }","356","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["1070","    ","1071","    private void setLastModifiedIfPossible(final long timestamp) throws IOException, InterruptedException {","1072","        String message = act(new FileCallable<String>() {","1073","            private static final long serialVersionUID = -828220335793641630L;","1074","            public String invoke(File f, VirtualChannel channel) throws IOException {","1075","                if(!f.setLastModified(timestamp)) {","1076","                    if (Functions.isWindows()) {","1077","                        \/\/ On Windows this seems to fail often. See JENKINS-11073","1078","                        \/\/ Therefore don't fail, but just log a warning","1079","                        return \"Failed to set the timestamp of \"+f+\" to \"+timestamp;","1080","                    } else {","1081","                        throw new IOException(\"Failed to set the timestamp of \"+f+\" to \"+timestamp);","1082","                    }","1083","                }","1084","                return null;","1085","            }","1086","        });","1087","","1088","        if (message!=null) {","1089","            LOGGER.warning(message);","1090","        }","1091","    }","1448","        target.setLastModifiedIfPossible(lastModified());"],"delete":["1426","        ","1427","        try {","1428","            target.touch(lastModified());","1429","        } catch (IOException e) {","1430","            \/\/ On Windows this seems to fail often. See JENKINS-11073","1431","            if (!target.isUnix()) {","1432","                LOGGER.warning(\"Failed to set timestamp on \" + target.getRemote());","1433","            } else { \/\/ rethrow","1434","                throw new IOException2(e);","1435","            }","1436","        }"]}]}},"83c332c542c5ad5ab404e0d28bb6291aaf239e71":{"changes":{"core\/src\/main\/java\/hudson\/scm\/browsers\/Sventon.java":"MODIFY","core\/src\/main\/resources\/hudson\/scm\/browsers\/Sventon2\/config_nl.properties":"ADD","core\/src\/main\/resources\/hudson\/scm\/browsers\/Sventon2\/config.jelly":"ADD","core\/src\/main\/resources\/hudson\/scm\/browsers\/Sventon2\/config_ja.properties":"ADD","core\/src\/main\/java\/hudson\/scm\/browsers\/Sventon2.java":"ADD","core\/src\/main\/resources\/hudson\/scm\/browsers\/Sventon2\/config_fr.properties":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/scm\/browsers\/Sventon.java":[{"add":["25","import hudson.Extension;","27","import hudson.model.Descriptor;","29","import hudson.scm.EditType;","36","import org.kohsuke.stapler.AncestorInPath;","47"," * {@link RepositoryBrowser} for Sventon 1.x.","53","     * The URL of the Sventon 1.x repository.","65","    \/**","66","     * The charset to use when encoding paths in an URI (specified in RFC 3986).","67","     *\/","68","    private static final String URL_CHARSET = \"UTF-8\";","69","","77","        this.repositoryInstance = repositoryInstance == null ? \"\" : repositoryInstance;","90","                repositoryInstance,r,r,r,URLEncoder.encode(getPath(path), URL_CHARSET)));","99","                repositoryInstance,r,URLEncoder.encode(getPath(path), URL_CHARSET)));","121","            return \"Sventon 1.x\";","127","        public FormValidation doCheckUrl(@AncestorInPath AbstractProject project,","128","                                         @QueryParameter(fixEmpty=true) final String value)","129","                throws IOException, ServletException {","140","                        if (findText(open(new URL(v)),\"sventon 1\")) {","142","                        } else if (findText(open(new URL(v)),\"sventon\")) {","143","                            return FormValidation.error(\"This is a valid Sventon URL but it doesn't look like Sventon 1.x\");","144","                        } else{"],"delete":["25","import hudson.model.Descriptor;","32","import hudson.scm.EditType;","35","import hudson.Extension;","38","import org.kohsuke.stapler.AncestorInPath;","47"," * {@link RepositoryBrowser} for Sventon.","53","     * The URL of the Sventon repository.","72","        this.repositoryInstance = repositoryInstance;","76","        if(repositoryInstance==null)","77","            return \"\";  \/\/ compatibility","87","                repositoryInstance,r,r,r,URLEncoder.encode(getPath(path))));","96","                repositoryInstance,r,URLEncoder.encode(getPath(path))));","118","            return \"Sventon\";","124","        public FormValidation doCheckUrl(@AncestorInPath AbstractProject project, @QueryParameter(fixEmpty=true) final String value) throws IOException, ServletException {","135","                        if(findText(open(new URL(v)),\"sventon\")) {","137","                        } else {"]}],"core\/src\/main\/resources\/hudson\/scm\/browsers\/Sventon2\/config_nl.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/scm\/browsers\/Sventon2\/config.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/scm\/browsers\/Sventon2\/config_ja.properties":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/scm\/browsers\/Sventon2.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/scm\/browsers\/Sventon2\/config_fr.properties":[{"add":[],"delete":[]}]}},"207f4c582ea04812d5bcc712b71da28e44e07c59":{"changes":{"core\/src\/main\/java\/hudson\/model\/DownloadService.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DownloadService.java":[{"add":["41","import org.kohsuke.stapler.StaplerResponse;","203","        public void doPostBack(StaplerRequest req, StaplerResponse rsp) throws IOException {","210","            rsp.setContentType(\"text\/plain\");  \/\/ So browser won't try to parse response"],"delete":["202","        public void doPostBack(StaplerRequest req) throws IOException {"]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["136","    public void doPostBack(StaplerRequest req, StaplerResponse rsp) throws IOException, GeneralSecurityException {","152","        rsp.setContentType(\"text\/plain\");  \/\/ So browser won't try to parse response"],"delete":["136","    public void doPostBack(StaplerRequest req) throws IOException, GeneralSecurityException {"]}]}},"3661cefad43380e31bbe4a343948cbcc1440c6c4":{"changes":{"core\/src\/test\/java\/hudson\/model\/AbstractItemTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","test-pom\/pom.xml":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/model\/AbstractItemTest.java":[{"add":["7","import static org.junit.Assert.fail;","9","import java.io.IOException;","13","import org.jvnet.hudson.test.Issue;","96","","97","    private class NameNotEditableItem extends AbstractItem {","98","","99","        protected NameNotEditableItem(ItemGroup parent, String name){","100","            super(parent, name);","101","        }","102","","103","        @Override","104","        public Collection<? extends Job> getAllJobs() {","105","            return null;","106","        }","107","","108","        @Override","109","        public boolean isNameEditable() {","110","            return false; \/\/so far it's the default value, but it's good to be explicit for test.","111","        }","112","    }","113","","114","    @Test","115","    @Issue(\"JENKINS-58571\")","116","    public void renameMethodShouldThrowExceptionWhenNotIsNameEditable() {","117","","118","        \/\/GIVEN","119","        NameNotEditableItem item = new NameNotEditableItem(null,\"NameNotEditableItem\");","120","","121","        \/\/WHEN","122","        try {","123","            item.renameTo(\"NewName\");","124","            fail(\"An item with isNameEditable false must throw exception when trying to rename it.\");","125","        } catch (IOException e) {","126","","127","            \/\/THEN","128","            assertEquals(e.getMessage(),\"Trying to rename an item that does not support this operation.\");","129","            assertEquals(\"NameNotEditableItem\",item.getName());","130","        }","131","    }","132","","133","    @Test","134","    @Issue(\"JENKINS-58571\")","135","    public void doConfirmRenameMustThrowFormFailureWhenNotIsNameEditable() throws IOException {","136","","137","        \/\/GIVEN","138","        NameNotEditableItem item = new NameNotEditableItem(null,\"NameNotEditableItem\");","139","","140","        \/\/WHEN","141","        try {","142","            item.doConfirmRename(\"MyNewName\");","143","            fail(\"An item with isNameEditable false must throw exception when trying to call doConfirmRename.\");","144","        } catch (Failure f) {","145","","146","            \/\/THEN","147","            assertEquals(f.getMessage(),\"Trying to rename an item that does not support this operation.\");","148","            assertEquals(\"NameNotEditableItem\",item.getName());","149","        }","150","    }","151",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["277","","278","        if (!isNameEditable()) {","279","            return FormValidation.error(\"Trying to rename an item that does not support this operation.\");","280","        }","281","","358","","359","        if (!isNameEditable()) {","360","            throw new IOException(\"Trying to rename an item that does not support this operation.\");","361","        }","362",""],"delete":[]}],"test-pom\/pom.xml":[{"add":["66","      <version>2.55<\/version>"],"delete":["66","      <version>2.54<\/version>"]}]}},"0a05b428764d44b93049bf7b965bcbc748314b50":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SubversionSCM.java":"MODIFY","core\/src\/main\/java\/hudson\/scm\/SCM.java":"MODIFY","core\/src\/main\/java\/hudson\/scm\/NullSCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SubversionSCM.java":[{"add":["118","        boolean changelogFileCreated = false;","119","","132","            \/\/ TODO: this seems to clobber previously recorded changes when there are multiple modules","135","            changelogFileCreated = true;","154","        if(!changelogFileCreated)","155","            createEmptyChangeLog(changelogFile, listener, \"log\");","156",""],"delete":[]}],"core\/src\/main\/java\/hudson\/scm\/SCM.java":[{"add":["64","     *      When there's no change, this file should contain an empty entry.","65","     *      See {@link AbstractCVSFamilySCM#createEmptyChangeLog(File, BuildListener, String)}."],"delete":[]}],"core\/src\/main\/java\/hudson\/scm\/NullSCM.java":[{"add":["21","public class NullSCM extends AbstractCVSFamilySCM \/*to reuse createEmptyChangeLog*\/ {","28","        return createEmptyChangeLog(changeLogFile, listener, \"log\");"],"delete":["21","public class NullSCM implements SCM {","28","        return true;"]}]}},"fcd226c7f554cef625e76893c96096b9640a9a85":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Hudson\/noJob.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Hudson\/noJob.jelly":[{"add":["4","  Welcome to Hudson!","5","  <j:choose xmlns:j=\"jelly:core\">","6","    <!-- Only show the create new jobs link to those users that have permission to use it. -->","7","    <j:when test=\"${h.hasPermission(it.CREATE)}\">","8","      Please <a href=\"newJob\">create new jobs<\/a> to get started.","9","    <\/j:when>","10","    <j:otherwise>","11","      <!-- Offer anonymous users the chance to login, then they can create jobs. -->","12","      <j:if test=\"${h.isAnonymous()}\">","13","        <a style=\"color:inherit\" href=\"${rootURL}\/${app.securityRealm.loginUrl}?from=${request.requestURI}\">Login<\/a>","14","        to create new jobs.","15","      <\/j:if>","16","      <!-- Also offer them the opportunity to sign-up for an account, if this facility is available. -->","17","      <j:if test=\"${it.securityRealm.allowsSignup()}\">","18","        If you don't already have an account, you can","19","        <a style=\"color:inherit\" href=\"signup\">sign-up<\/a> now.","20","      <\/j:if>","21","    <\/j:otherwise>","22","  <\/j:choose>","23",""],"delete":["4","  Welcome to Hudson! Please <a href=\"newJob\">create new jobs<\/a> to get started."]}]}},"5fea6cb52c8a5f6323f1744ad20dbaa66d92e6ba":{"changes":{"core\/src\/main\/java\/hudson\/diagnosis\/OldDataMonitor.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/diagnosis\/OldDataMonitor.java":[{"add":["86","    public Map<Saveable,VersionRange> getData() {","87","        Map<SaveableReference,VersionRange> _data;","88","        synchronized (this) {","89","            _data = new HashMap<SaveableReference,VersionRange>(this.data);","90","        }","92","        for (Map.Entry<SaveableReference,VersionRange> entry : _data.entrySet()) {"],"delete":["86","    public synchronized Map<Saveable,VersionRange> getData() {","88","        for (Map.Entry<SaveableReference,VersionRange> entry : data.entrySet()) {"]}],"changelog.html":[{"add":["60","  <li class=bug>","61","    Deadlock in <code>OldDataMonitor<\/code>.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-24358\">issue 24358<\/a>)"],"delete":[]}]}},"4ffb95d11be4bcc8c4a27d0704c0626ac8de8a25":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/ArtifactArchiverTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/ArtifactArchiverTest.java":[{"add":["42","import java.util.Comparator;","45","import hudson.model.Run;","320","    @Test ","321","    @Issue(\"JENKINS-55049\")","322","    public void lengthOfArtifactIsCorrect_eventForInvalidSymlink() throws Exception {","323","        FreeStyleProject p = j.createFreeStyleProject();","324","        p.getBuildersList().add(new TestBuilder() {","325","            @Override public boolean perform(AbstractBuild<?,?> build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {","326","                FilePath ws = build.getWorkspace();","327","                if (ws == null) {","328","                    return false;","329","                }","330","                FilePath dir = ws.child(\"dir\");","331","                dir.mkdirs();","332","                dir.child(\"existant\").write(\"contents\", null);","333","                dir.child(\"_toExistant\").symlinkTo(\"existant\", listener);","334","                dir.child(\"_nonexistant\").symlinkTo(\"nonexistant\", listener);","335","                return true;","336","            }","337","        });","338","        ArtifactArchiver aa = new ArtifactArchiver(\"dir\/**\");","339","        aa.setAllowEmptyArchive(true);","340","        p.getPublishersList().add(aa);","341","        FreeStyleBuild b = j.assertBuildStatusSuccess(p.scheduleBuild2(0));","342","        FilePath ws = b.getWorkspace();","343","        assertNotNull(ws);","344","        List<FreeStyleBuild.Artifact> artifacts = b.getArtifacts();","345","        assertEquals(3, artifacts.size());","346","        artifacts.sort(Comparator.comparing(Run.Artifact::getFileName));","347","        ","348","        \/\/ invalid symlink => size of 0","349","        FreeStyleBuild.Artifact artifact = artifacts.get(0);","350","        assertEquals(\"dir\/_nonexistant\", artifact.relativePath);","351","        assertEquals(0, artifact.getFileSize());","352","        assertEquals(\"\", artifact.getLength());","353","    ","354","        \/\/ valid symlink => same size of the target, 8","355","        artifact = artifacts.get(1);","356","        assertEquals(\"dir\/_toExistant\", artifact.relativePath);","357","        assertEquals(8, artifact.getFileSize());","358","        assertEquals(\"8\", artifact.getLength());","359","    ","360","        \/\/ existant => size of 8","361","        artifact = artifacts.get(2);","362","        assertEquals(\"dir\/existant\", artifact.relativePath);","363","        assertEquals(8, artifact.getFileSize());","364","        assertEquals(\"8\", artifact.getLength());","365","    }","366",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["1396","            try {","1397","                return Long.decode(length);","1398","            }","1399","            catch (NumberFormatException e) {","1400","                LOGGER.log(FINE, \"Cannot determine file size of the artifact {0}. The length {1} is not a valid long value\", new Object[] {this, length});","1401","                return 0;","1402","            }"],"delete":["1396","            return Long.decode(length);"]}]}},"461940f49a243ab4fff23870ea0437e8acf9c250":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["2424","            return entry.getDisplayName()+\" (\"+entry.getBuildStatusSummary().message+\")\";"],"delete":["2424","            return entry+\" (\"+entry.getBuildStatusSummary().message+\")\";"]}]}},"5d13c21b07031596de36e5dd22d1f1c38985f610":{"changes":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY","core\/src\/main\/resources\/hudson\/rss20.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/User.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","core\/src\/main\/java\/hudson\/FeedAdapter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["11","import hudson.ProxyConfiguration;","34","import hudson.security.AccessControlled;","46","import hudson.slaves.ComputerListener;","47","import hudson.slaves.RetentionStrategy;","116","import java.util.Iterator;","123","import java.util.Timer;","1944","","1945","            public String getEntryAuthor(LogRecord entry) {","1946","                return Mailer.DESCRIPTOR.getAdminAddress();","1947","            }"],"delete":["16","import hudson.ProxyConfiguration;","17","import hudson.slaves.RetentionStrategy;","18","import hudson.slaves.ComputerListener;","47","import hudson.security.AccessControlled;","124","import java.util.Iterator;","125","import java.util.Timer;"]}],"core\/src\/main\/resources\/hudson\/rss20.jelly":[{"add":["17","          <author>${adapter.getEntryAuthor(e)}<\/author>"],"delete":["17","          <author>users@hudson.dev.java.net (Hudson Server)<\/author>"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["11","import hudson.remoting.AsyncFutureImpl;","21","import hudson.tasks.BuildTrigger;","22","import hudson.tasks.Mailer;","23","import hudson.tasks.Publisher;","29","import hudson.util.EditDistance;","1061","","1062","                public String getEntryAuthor(FeedItem entry) {","1063","                    return Mailer.DESCRIPTOR.getAdminAddress();","1064","                }"],"delete":["6","import hudson.remoting.AsyncFutureImpl;","20","import hudson.tasks.BuildTrigger;","21","import hudson.tasks.Publisher;","27","import hudson.util.EditDistance;","53","import java.util.concurrent.Callable;","54","import java.util.concurrent.FutureTask;"]}],"core\/src\/main\/java\/hudson\/model\/User.java":[{"add":["7","import hudson.tasks.Mailer;","462","","463","        public String getEntryAuthor(Run entry) {","464","            return Mailer.DESCRIPTOR.getAdminAddress();","465","        }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["22","import hudson.tasks.Mailer;","1232","","1233","        public String getEntryAuthor(Run entry) {","1234","            return Mailer.DESCRIPTOR.getAdminAddress();","1235","        }"],"delete":[]}],"core\/src\/main\/java\/hudson\/FeedAdapter.java":[{"add":["40","","41","    \/**","42","     * Author of this entry.","43","     *\/","44","    String getEntryAuthor(E entry);"],"delete":[]}]}},"52abfad941f1d4a33548b9d84e765be7d869e7ae":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["106","    <remoting.version>3.19<\/remoting.version>"],"delete":["106","    <remoting.version>3.19-20180320.212209-2<\/remoting.version> <!-- TODO https:\/\/github.com\/jenkinsci\/remoting\/pull\/263 -->"]}]}},"d0f5c2b074ab0776bf9605ccbdbe0475c72c1041":{"changes":{"war\/src\/main\/js\/templates\/welcomePanel.hbs":"MODIFY","war\/src\/main\/js\/templates\/pluginSelectionPanel.hbs":"MODIFY","war\/src\/main\/js\/pluginSetupWizardGui.js":"MODIFY"},"diff":{"war\/src\/main\/js\/templates\/welcomePanel.hbs":[{"add":["0","<div class=\"modal-header closeable\">"],"delete":["0","<div class=\"modal-header\">"]}],"war\/src\/main\/js\/templates\/pluginSelectionPanel.hbs":[{"add":["0","<div class=\"modal-header closeable\">"],"delete":["0","<div class=\"modal-header\">"]}],"war\/src\/main\/js\/pluginSetupWizardGui.js":[{"add":["209","\t\t\t\tif($modalHeader.length > 0 && $modalHeader.is('.closeable')) {","817","\t\t'.close': skipFirstUser,"],"delete":["209","\t\t\t\tif($modalHeader.length > 0) {","817","\t\t'.close': closeInstaller,"]}]}},"29dc1d5fa8e684e27034f717eb820ff53cdb14ea":{"changes":{"test\/src\/test\/java\/hudson\/model\/UserPropertyTest.java":"ADD","test\/src\/test\/resources\/hudson\/model\/UserPropertyTest\/UserProperty2\/config.jelly":"ADD","test\/src\/test\/resources\/hudson\/model\/UserPropertyTest\/UserProperty1\/config.jelly":"ADD","core\/src\/main\/java\/hudson\/model\/User.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/UserPropertyTest.java":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/UserPropertyTest\/UserProperty2\/config.jelly":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/UserPropertyTest\/UserProperty1\/config.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/User.java":[{"add":["457","            if (p!=null)","458","                props.add(p);"],"delete":["457","            props.add(p);"]}],"changelog.html":[{"add":["63","    Fixed a bug in persisting user configuration that causes NPE in some plugins","64","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9062\">issue 9062<\/a>)","65","  <li class=bug>"],"delete":[]}]}},"7056ba34fbc96791dd110c6384a4271e0022a06d":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["197","        <version>11.0.1<\/version>"],"delete":["197","        <version>12.0-rc1<\/version>"]}]}},"1ca9c880fd64e2c8c4985ea027d6d4079edc1df6":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/DownloadJob\/Skipped\/status.jelly":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":[],"delete":["1872","                \/\/throw new Skipped(); \/\/ TODO set skipped once we have a status indicator for it"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/DownloadJob\/Skipped\/status.jelly":[{"add":[],"delete":[]}]}},"3f43b4c3adb285cc3539638f2ff099c0b81f969b":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["112","      <version>1.9.2<\/version>"],"delete":["112","      <version>1.9.1<\/version>"]}]}},"193173f5597ca02a5ce73a2e34343f77493025dc":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/Maven2Builder.java":"MODIFY","test\/src\/test\/java\/hudson\/maven\/MavenBuildSurefireFailedTest.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/Maven3Builder.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuilder.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/TestFailureDetector.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/Maven2Builder.java":[{"add":["27","import hudson.maven.reporters.TestFailureDetector;","39","import java.util.concurrent.atomic.AtomicBoolean;","60","    private final AtomicBoolean hasTestFailures = new AtomicBoolean();","155","        for (MavenReporter r : reporters.get(name)){","156","            if(!r.postExecute(proxy,project,mojoInfo,listener,exception)) {","158","            } else if (r instanceof TestFailureDetector) {","159","                if(((TestFailureDetector) r).hasTestFailures()) {","160","                    hasTestFailures.compareAndSet(false, true);","161","                }","162","            }","163","        }","176","    @Override","177","    public boolean hasBuildFailures() {","178","        return hasTestFailures.get();","179","    }    "],"delete":["58","","153","        for (MavenReporter r : reporters.get(name))","154","            if(!r.postExecute(proxy,project,mojoInfo,listener,exception))","168","    "]}],"test\/src\/test\/java\/hudson\/maven\/MavenBuildSurefireFailedTest.java":[{"add":["54","        m.setGoals( \"test\" );","58","        m.addPostBuilder(new Shell(\"no-valid-command\"));","62","    @Bug(14102)","63","    public void testMaven2SkipPostBuilder() throws Exception {","64","        configureDefaultMaven();","65","        MavenModuleSet m = createMavenProject();","66","        m.setGoals( \"test\" );","67","        m.setScm(new ExtractResourceSCM(getClass().getResource(\"maven-multimodule-unit-failure.zip\")));","68","        \/\/ run dummy command only if build state is SUCCESS","69","        m.setRunPostStepsIfResult(Result.SUCCESS);","70","        m.addPostBuilder(new Shell(\"no-valid-command\"));        ","71","        assertBuildStatus(Result.UNSTABLE, m.scheduleBuild2(0).get());","72","    }    "],"delete":["54","        m.setGoals( \"test -Dmaven.test.failure.ignore=false\" );","58","        m.addPostBuilder(new Shell(\"no-command\"));"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/Maven3Builder.java":[{"add":["438","                        if(((TestFailureDetector) mavenReporter).hasTestFailures()) {"],"delete":["438","                        TestFailureDetector detector = (TestFailureDetector) mavenReporter;","439","                        if(detector.hasTestFailures()) {","440","                            System.out.println(\"+++++++>>>>\"+mavenReporter.getClass());","442","                        }else{","443","                            System.out.println(\"------->>>>\"+mavenReporter.getClass());"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuilder.java":[{"add":["45","import java.util.concurrent.atomic.AtomicBoolean;","46","","173","            if(r==0){","174","                if(a.hasBuildFailures()){","175","                    return Result.UNSTABLE;","176","                }","177","                return Result.SUCCESS;","178","            }","182","                if(a.hasBuildFailures()){","183","                    return Result.UNSTABLE;","184","                }","276","        private final AtomicBoolean hasTestFailures = new AtomicBoolean();","321","            if(listener.hasBuildFailures())","322","                hasTestFailures.compareAndSet(false, true);","343","        ","344","        public boolean hasBuildFailures() {","345","            return hasTestFailures.get();","346","        }","370","","371","    public abstract boolean hasBuildFailures();"],"delete":["171","            if(r==0)    return Result.SUCCESS;"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["29","import hudson.maven.reporters.TestFailureDetector;","74","import java.util.concurrent.atomic.AtomicBoolean;","300","        private final AtomicBoolean hasTestFailures = new AtomicBoolean();","355","            for (MavenReporter r : reporters.get(moduleName)){","356","                if(!r.postExecute(buildProxy,project,info,listener,exception)) {","358","                } else if (r instanceof TestFailureDetector) {","359","                    if(((TestFailureDetector) r).hasTestFailures()) {","360","                        hasTestFailures.compareAndSet(false, true);","361","                    }","362","                }","363","            }","387","        @Override","388","        public boolean hasBuildFailures() {","389","            return hasTestFailures.get();","390","        }","391","        "],"delete":["352","            for (MavenReporter r : reporters.get(moduleName))","353","                if(!r.postExecute(buildProxy,project,info,listener,exception))"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/TestFailureDetector.java":[{"add":["16","     * @return <code>true<\/code> if there are test failures"],"delete":["16","     * @return <code>true<\/code> if there ar test failures"]}]}},"511a533d15c070ac4c0f9a510dd78f0619581b77":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/buildCaption.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/console.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/changes.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/statusIcon.jelly":"ADD","core\/src\/main\/resources\/lib\/hudson\/progressiveText.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/buildCaption.jelly":[{"add":["26","    <%@attribute name=\"autorefresh\" required=\"false\" description=\"Whether to reload this component automatically using AJAX\" %>","48","        <script>","49","          (function(autorefresh){","50","            function updateBuildCaptionIcon(){","51","              new Ajax.Request(\"statusIcon\",{","52","                method: \"get\",","53","                onComplete: function(rsp,_) {","54","                  var isBuilding = rsp.getResponseHeader(\"X-Building\");","55","                  if (isBuilding == \"true\") {","56","                    setTimeout(updateBuildCaptionIcon, 5000)","57","                  } else {","58","                    var progressBar = document.querySelector(\".build-caption-progress-container\");","59","                    if (progressBar) {","60","                      progressBar.style.display = \"none\";","61","                    }","62","                  }","63","                  document.querySelector(\".build-caption .icon-xlg\").outerHTML = rsp.responseText;","64","                }","65","              });","66","            }","67","","68","            window.addEventListener(\"load\", function(){","69","              if (autorefresh) {","70","                updateBuildCaptionIcon()","71","              }","72","              Event.observe(window, \"jenkins:consoleFinished\", updateBuildCaptionIcon);","73","            });","74","","75","          })(${autorefresh});","76","        <\/script>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Run\/console.jelly":[{"add":["58","          <t:progressiveText href=\"logText\/progressiveHtml\" idref=\"out\" spinner=\"spinner\"","59","               startOffset=\"${offset}\" onFinishEvent=\"jenkins:consoleFinished\"\/>"],"delete":["58","          <t:progressiveText href=\"logText\/progressiveHtml\" idref=\"out\" spinner=\"spinner\" startOffset=\"${offset}\" \/>"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/changes.jelly":[{"add":["32","      <t:buildCaption autorefresh=\"true\">${%Changes}<\/t:buildCaption>"],"delete":["32","      <t:buildCaption>${%Changes}<\/t:buildCaption>"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index.jelly":[{"add":["49","      <t:buildCaption autorefresh=\"true\">"],"delete":["49","      <t:buildCaption>"]}],"core\/src\/main\/resources\/hudson\/model\/Run\/statusIcon.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/progressiveText.jelly":[{"add":["33","\t<%@attribute name=\"onFinishEvent\" required=\"false\" description=\"JS custom event to be fired when progress is finished\" %>","52","\t    function fetchNext(e,href,onFinishEvent) {","57","          new Ajax.Request(href,{","58","              method: \"post\",","59","              parameters: {\"start\":e.fetchedBytes},","60","              requestHeaders: headers,","61","              onComplete: function(rsp,_) {","82","              if(rsp.getResponseHeader(\"X-More-Data\")==\"true\") {","83","                setTimeout(function(){fetchNext(e,href,onFinishEvent);},1000);","84","              } else {","85","              <j:if test=\"${spinner!=null}\">","86","                $$(\"${spinner}\").style.display = \"none\";","87","              <\/j:if>","88","                if (onFinishEvent) {","89","                  Event.fire(window, onFinishEvent);","90","                }","91","              }","92","            }","93","          });","94","        }","95","      <\/j:if>","96","      $$(\"${idref}\").fetchedBytes = ${empty(startOffset)?0:startOffset};","97","      fetchNext($$(\"${idref}\"),\"${href}\",\"${empty(onFinishEvent)?\"\":onFinishEvent}\");","98","    <\/script>"],"delete":["51","\t    function fetchNext(e,href) {","56","\t      new Ajax.Request(href,{","57","\t          method: \"post\",","58","\t          parameters: {\"start\":e.fetchedBytes},","59","            requestHeaders: headers,","60","\t          onComplete: function(rsp,_) {","81","\t            if(rsp.getResponseHeader(\"X-More-Data\")==\"true\")","82","\t              setTimeout(function(){fetchNext(e,href);},1000);","83","\t          <j:if test=\"${spinner!=null}\">","84","\t            else","85","\t              $$(\"${spinner}\").style.display = \"none\";","86","\t          <\/j:if>","87","\t          }","88","\t      });","89","\t    }","90","\t  <\/j:if>","91","\t  $$(\"${idref}\").fetchedBytes = ${empty(startOffset)?0:startOffset};","92","\t  fetchNext($$(\"${idref}\"),\"${href}\");","93","\t<\/script>"]}]}},"521af2ea3ec00dd6d05734fcb9cc8ddb5bacca25":{"changes":{"war\/resources\/scripts\/hudson-behavior.js":"MODIFY"},"diff":{"war\/resources\/scripts\/hudson-behavior.js":[{"add":["730","                td.removeAttribute(\"field-disabled\");","732","                td.setAttribute(\"field-disabled\",\"true\");","1052","                if(e.getAttribute(\"field-disabled\")!=null)"],"delete":["730","                td.removeAttribute(\"disabled\");","732","                td.setAttribute(\"disabled\",\"true\");","1052","                if(e.getAttribute(\"disabled\")!=null)"]}]}},"fb832b76a380f34541652904869ba34311928ca7":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/ComputerRetentionWork.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/ComputerRetentionWork.java":[{"add":["65","                final long waitInMins = Math.max(1, Math.min(60, c.getRetentionStrategy().check(c)));"],"delete":["65","                final long waitInMins = Math.min(1, Math.max(60, c.getRetentionStrategy().check(c)));"]}]}},"769aa6ec829e9fb79b40c11710699f850a0f9e86":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/MailerTest.java":"ADD"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/MailerTest.java":[{"add":[],"delete":[]}]}},"45573ce6a358ee91dedbb7920165c0fb2690234c":{"changes":{"test\/src\/test\/java\/jenkins\/model\/NodesTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Nodes.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/model\/NodesTest.java":[{"add":["26","import hudson.ExtensionList;","36","import org.jvnet.hudson.test.TestExtension;","40","import static org.junit.Assert.*;","88","        ListenerImpl l = ExtensionList.lookupSingleton(ListenerImpl.class);","89","        assertEquals(0, l.deleted);","90","        assertEquals(1, l.updated);","91","        assertEquals(1, l.created);","92","    }","93","    @TestExtension(\"addNodeShouldReplaceExistingNode\")","94","    public static final class ListenerImpl extends NodeListener {","95","        int deleted, updated, created;","96","        @Override","97","        protected void onDeleted(Node node) {","98","            deleted++;","99","        }","100","        @Override","101","        protected void onUpdated(Node oldOne, Node newOne) {","102","            assertNotSame(oldOne, newOne);","103","            updated++;","104","        }","105","        @Override","106","        protected void onCreated(Node node) {","107","            created++;","108","        }"],"delete":["35","","39","import static org.junit.Assert.assertThat;","40","import static org.junit.Assert.assertNull;","41","import static org.junit.Assert.assertNotNull;","42","import static org.junit.Assert.fail;"]}],"core\/src\/main\/java\/jenkins\/model\/Nodes.java":[{"add":["54","import java.util.concurrent.atomic.AtomicReference;","133","            AtomicReference<Node> old = new AtomicReference<>();","137","                    old.set(nodes.put(node.getNodeName(), node));","158","            if (old.get() != null) {","159","                NodeListener.fireOnUpdated(old.get(), node);","160","            } else {","161","                NodeListener.fireOnCreated(node);","162","            }","217","            \/\/ TODO should this fireOnUpdated?"],"delete":["48","import java.util.Iterator;","136","                    nodes.put(node.getNodeName(), node);","157","            NodeListener.fireOnCreated(node);"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["2086","     * If a node of the same name already exists then that node will be replaced."],"delete":[]}]}},"f67476c3b9ac2f3bfd17a1bb59f1c000a8857d5a":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["60","  <li class=bug>","61","    Broken link in help text of HTTP Proxy Configuration","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11051\">issue 11051<\/a>)","63","  <li class=bug>","64","    Broken help button for Log Recorders","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11052\">issue 11052<\/a>)"],"delete":[]}]}},"f9d2bb7f621d494b1aa5ff402910d78d3dfa5f7d":{"changes":{"core\/src\/main\/java\/hudson\/scm\/CVSChangeLogSet.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/CVSChangeLogSet.java":[{"add":["83","            if(!log.isComplete()) {","84","                r.remove(log);","85","                continue;","86","            }","113","         * Returns true if all the fields that are supposed to be non-null is present.","114","         * This is used to make sure the XML file was correct.","115","         *\/","116","        public boolean isComplete() {","117","            return date!=null && time!=null && msg!=null;","118","        }","119","","120","        \/**"],"delete":[]}]}},"04c87d8d99668125b2794b9d78047011de6c52ca":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/lazy\/BuildReferenceMapAdapter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":[{"add":["125","         * Stores the build ID to build number for builds that we already know.","126","         *","127","         * If we have known load failure of the given ID, we record that in the map","128","         * by using the null value (not to be confused with a non-null {@link BuildReference}","129","         * with null referent, which just means the record was GCed.)","491","            BuildReference<R> ref = snapshot.byId.get(id);","492","            if (ref==null)      return null;    \/\/ known failure","493","            R v = unwrap(ref);","494","            if (v!=null)        return v;       \/\/ already in memory","495","            \/\/ otherwise fall through to load","620","        R v = load(new File(dir, id), editInPlace);","621","        if (v==null && editInPlace!=null) {","622","            \/\/ remember the failure.","623","            \/\/ if editInPlace==null, we can create a new copy for this, but not sure if it's worth doing,","624","            \/\/ given that we also update idOnDisk anyway.","625","            editInPlace.byId.put(id,null);","626","        }","627","        return v;"],"delete":["125","         * Stores the build ID to build number for builds that we already know","487","            return unwrap(snapshot.byId.get(id));","612","        return load(new File(dir,id),editInPlace);"]}],"core\/src\/main\/java\/jenkins\/model\/lazy\/BuildReferenceMapAdapter.java":[{"add":["351","            if (v==null)","352","                return null;"],"delete":["351","            if (v==null)    return null;"]}]}},"9b0c8d236257ec32b052875921bd22e3f9ac7416":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["702","      <version>3.3.0-jenkins-1<\/version>"],"delete":["702","      <version>3.2.4<\/version>"]}],"changelog.html":[{"add":["62","  <li class=bug>","63","    PAM authentication wasn't working with Ubuntu 11.04","64","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9486\">issue 9486<\/a>)"],"delete":[]}]}},"e6685a700c2c7e34f6cbd2c9ad474b2c201919f4":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Maven.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Maven.java":[{"add":["355","\t\t\t\t\tif(Util.fixEmptyAndTrim(installation.getName()) == null) {"],"delete":["355","\t\t\t\t\tif(Util.fixEmptyAndTrim(installation.getName()) == null || Util.fixEmptyAndTrim(installation.getHome()) == null) {"]}]}},"4a2aed891c0f8f7b55d191d451155d36882b8d9c":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/Engine.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/Engine.java":[{"add":["172","            String[] tokens = tunnel.split(\":\",3);"],"delete":["172","            String[] tokens = tunnel.split(\":\");"]}]}},"09f9010efd6811a14abe834f00b87dd3260147ef":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["101","      <version>5.9<\/version>"],"delete":["101","      <version>5.8<\/version>"]}]}},"d9b23a2dc20d7be8d3bec6ce317ff65688f95c76":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/main.jelly":"MODIFY"},"diff":{"changelog.html":[{"add":["85","  <li class=bug>","86","    \"Disable Project\" button breaks Free style project pages.","87","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15887\">issue 15887<\/a>)","88","    "],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/main.jelly":[{"add":["32","  <p:projectActionFloatingBox \/>","33","  "],"delete":["27","  <p:projectActionFloatingBox \/>"]}]}},"7054610887aca4f6d82e56ea8a6c77dc21967e25":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["141","import java.io.NotSerializableException;","2989","        Channel target = _getChannelForSerialization();","2998","    private Channel _getChannelForSerialization() {","2999","        try {","3000","            return getChannelForSerialization();","3001","        } catch (NotSerializableException x) {","3002","            LOGGER.log(Level.WARNING, \"A FilePath object is being serialized when it should not be, indicating a bug in a plugin. See https:\/\/jenkins.io\/redirect\/filepath-serialization for details.\", x);","3003","            return null;","3004","        }","3005","    }","3006","","3008","        Channel channel = _getChannelForSerialization();"],"delete":["2988","        Channel target = getChannelForSerialization();","2998","        Channel channel = getChannelForSerialization();"]}]}},"19a8a5a0e4dea0edba59770e4f63c62f3d1fd070":{"changes":{"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/systemInfo.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/sidepanel2.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/systemInfo.jelly":[{"add":["36","      <h1>","37","        <img src=\"${imagesURL}\/48x48\/${it.icon}\" width=\"48\" height=\"48\" alt=\"\"\/>","38","        ${it.caption} ${%System Information}","39","        <j:if test=\"${!empty(it.node.nodeDescription)}\">","40","          <span style=\"font-size:smaller\">(${it.node.nodeDescription})<\/span>","41","        <\/j:if>","42","      <\/h1>","43","","44","      <l:hasPermission permission=\"${it.CONNECT}\">","45","        <j:choose>","46","          <j:when test=\"${it.online}\">","47","            <h2>${it.oSDescription} slave, version ${it.slaveVersion}<\/h2>","48","","49","            <j:forEach var=\"instance\" items=\"${it.systemInfoExtensions}\">","50","              <h1>${instance.displayName}<\/h1>","51","              <st:include page=\"systemInfo\" from=\"${instance}\"\/>","52","            <\/j:forEach>","53","          <\/j:when>","54","          <j:otherwise>","55","            ${%System Information is unavailable when slave is offline.}","56","          <\/j:otherwise>","57","        <\/j:choose>"],"delete":["35","      <l:hasPermission permission=\"${it.CONNECT}\">","36","        <h1>${it.oSDescription} slave, version ${it.slaveVersion}<\/h1>","38","        <j:forEach var=\"instance\" items=\"${it.systemInfoExtensions}\">","39","          <h1>${instance.displayName}<\/h1>","40","          <st:include page=\"systemInfo\" from=\"${instance}\"\/>","41","        <\/j:forEach>"]}],"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/sidepanel2.jelly":[{"add":["28","    <l:task icon=\"images\/24x24\/computer.png\" href=\"systemInfo\" title=\"${%System Information}\" permission=\"${it.CONNECT}\"\/>"],"delete":["27","  <l:task icon=\"images\/24x24\/computer.png\" href=\"systemInfo\" title=\"${%System Information}\" permission=\"${it.CONNECT}\"\/>"]}]}},"02d0531add35154d051de71398aefb58b9295a3f":{"changes":{"core\/src\/main\/resources\/lib\/form\/section_.js":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/section_.js":[{"add":["40","             * Recursively visit elements and find all visible section headers that are not inside f:repeatable elements.","48","                function isVisible(elem) {","49","                    return !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects && elem.getClientRects().length );","50","                }","51","","54","                        if (e.className==\"section-header\" && isVisible(e)) {","57","                            \/\/ The next line seems to be unnecessary, as there are no children inside the section header itself.","58","                            \/\/ So this code will always returns a flat list of section headers.","60","                        } else if (!e.classList.contains(\"repeated-container\")) {"],"delete":["40","             * Recursively visit elements and find all section headers.","50","                        if (e.className==\"section-header\") {","54","                        } else {"]}]}},"412da254f2bbac386e9ab736684140cf107a3ffd":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":"MODIFY","core\/src\/test\/java\/jenkins\/util\/java\/JavaUtilsTest.java":"ADD","core\/src\/main\/java\/jenkins\/util\/java\/JavaUtils.java":"ADD","core\/src\/main\/java\/hudson\/slaves\/JNLPLauncher.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":[{"add":["42","import jenkins.util.java.JavaUtils;","855","                if (JavaUtils.isRunningWithPostJava8()) {"],"delete":["854","                if (isPostJava8()) { \/\/ Java 9+","909","","910","        \/\/ Java 9 uses new version format","911","        private static boolean isPostJava8() {","912","            String javaVersion = System.getProperty(\"java.version\");","913","            return !javaVersion.startsWith(\"1.\");","914","        }"]}],"core\/src\/test\/java\/jenkins\/util\/java\/JavaUtilsTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/util\/java\/JavaUtils.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/slaves\/JNLPLauncher.java":[{"add":["36","import jenkins.util.java.JavaUtils;","237","        return !JavaUtils.isRunningWithPostJava8();"],"delete":["236","        return System.getProperty(\"java.version\", \"1.8\").startsWith(\"1.8\");"]}]}},"d2d2815df5e83ab2dbd35cf75fa4fe54ee24d9f5":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/buildLink.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/buildLink.jelly":[{"add":["17","\t        <a href=\"${rootURL}\/${job.url}\">${jobName}<\/a>","18","          #<!-- -->${number}"],"delete":["17","\t        ${jobName_}#<!-- -->${number}"]}]}},"ead38e0d23c0a7d0d9416deffe08b8738df89bb1":{"changes":{"core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY","test\/src\/test\/java\/hudson\/search\/SearchTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["31","import hudson.search.CollectionSearchIndex;","32","import hudson.search.SearchIndexBuilder;","172","","173","","174","     public List<TopLevelItem> getItems() {","175","        return getItems(this.recurse);","176","     }","177","","178","","182","     *","186","     * @param recurse {@code false} not to recurse in ItemGroups","187","     * true to recurse in ItemGroups","189","     private List<TopLevelItem> getItems(boolean recurse) {","229","    @Override","230","    public SearchIndexBuilder makeSearchIndex() {","231","        SearchIndexBuilder sib = new SearchIndexBuilder().addAllAnnotations(this);","232","        sib.add(new CollectionSearchIndex<TopLevelItem>() {\/\/ for jobs in the view","233","            protected TopLevelItem get(String key) { return getItem(key); }","234","            protected Collection<TopLevelItem> all() { return getItems(); }","235","            @Override","236","            protected String getName(TopLevelItem o) {","237","                \/\/ return the name instead of the display for suggestion searching","238","                return o.getName();","239","            }","240","        });","241","        \/\/ add the display name for each item in the search index","242","        addDisplayNamesToSearchIndex(sib, getItems(true));","243","        return sib;","244","    }","245",""],"delete":["170","    ","178","    @Override","179","    public List<TopLevelItem> getItems() {"]}],"test\/src\/test\/java\/hudson\/search\/SearchTest.java":[{"add":["456","","457","    @Issue(\"JENKINS-35459\")","458","    @Test","459","    public void testProjectNameInAListView() throws Exception {","460","        MockFolder myMockFolder = j.createFolder(\"folder\");","461","        FreeStyleProject freeStyleProject = myMockFolder.createProject(FreeStyleProject.class, \"myJob\");","462","","463","        ListView listView = new ListView(\"ListView\", j.jenkins);","464","        listView.setRecurse(true);","465","        listView.add(myMockFolder);","466","        listView.add(freeStyleProject);","467","","468","        j.jenkins.addView(listView);","469","        j.jenkins.setPrimaryView(listView);","470","","471","        assertEquals(2, j.jenkins.getPrimaryView().getAllItems().size());","472","","473","        WebClient wc = j.createWebClient();","474","        Page result = wc.goTo(\"search\/suggest?query=\" + freeStyleProject.getName(), \"application\/json\");","475","","476","        assertNotNull(result);","477","        j.assertGoodStatus(result);","478","","479","        String content = result.getWebResponse().getContentAsString();","480","        JSONObject jsonContent = (JSONObject)JSONSerializer.toJSON(content);","481","        assertNotNull(jsonContent);","482","        JSONArray jsonArray = jsonContent.getJSONArray(\"suggestions\");","483","        assertNotNull(jsonArray);","484","","485","        assertEquals(2, jsonArray.size());","486","","487","        Page searchResult = wc.goTo(\"search?q=\" + myMockFolder.getName() + \"%2F\" + freeStyleProject.getName());","488","","489","        assertNotNull(searchResult);","490","        j.assertGoodStatus(searchResult);","491","","492","        URL resultUrl = searchResult.getUrl();","493","        assertTrue(resultUrl.toString().equals(j.getInstance().getRootUrl() + freeStyleProject.getUrl()));","494","    }"],"delete":[]}]}},"2472685f7c0a57898fff97c38c64088cafa38970":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":[{"add":["373","        if(rootPOM!=null && rootPOM.equals(\"pom.xml\"))   rootPOM=null;   \/\/ normalization"],"delete":["373","        if(rootPOM.equals(\"pom.xml\"))   rootPOM=null;   \/\/ normalization"]}]}},"c87676decd7fef7829961944fc30b0581236f5a6":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Job\/buildTimeTrend.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["624","        ChartUtil.generateGraph(req,rsp,chart,500,400);"],"delete":["624","        ChartUtil.generateGraph(req,rsp,chart,500,200);"]}],"core\/src\/main\/resources\/hudson\/model\/Job\/buildTimeTrend.jelly":[{"add":["6","        <img src=\"buildTimeGraph\" width=\"500\" height=\"400\"\/>"],"delete":["6","        <img src=\"buildTimeGraph\" width=\"500\" height=\"200\"\/>"]}]}},"7540d09f449e5ecb486e4eb1cba8293a4bb36d37":{"changes":{"core\/src\/main\/resources\/windows-service\/jenkins.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/windows-service\/jenkins.xml":[{"add":["25","  Windows service definition for Jenkins\r","27","  To uninstall, run \"jenkins.exe stop\" to stop the service, then \"jenkins.exe uninstall\" to uninstall the service.\r","36","    if you'd like to run Jenkins with a specific version of Java, specify a full path to java.exe.\r"],"delete":["25","  Windows service definition for Hudson\r","27","  To uninstall, run \"hudson.exe stop\" to stop the service, then \"hudson.exe uninstall\" to uninstall the service.\r","36","    if you'd like to run Hudson with a specific version of Java, specify a full path to java.exe.\r"]}],"changelog.html":[{"add":["70","  <li class=bug>","71","    jenkins.xml explains how to use hudson.exe for Windows","72","    <(a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9470\">issue 9470<\/a>)"],"delete":[]}]}},"2fe6c8c9476f82eca518763cb596864a4649b454":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/sidepanel.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["210","     * Doesn't start with '\/' but ends with '\/' (except returns","211","     * empty string when this is the default view).","214","        return isDefault() ? \"\" : getViewUrl();","215","    }","216","","217","    \/**","218","     * Same as {@link #getUrl()} except this returns a view\/{name} path","219","     * even for the default view.","220","     *\/","221","    public String getViewUrl() {"],"delete":["210","     * Doesn't start with '\/' but ends with '\/'. (except when this is","211","     * Hudson, ","214","        if(isDefault())   return \"\";"]}],"core\/src\/main\/resources\/hudson\/model\/View\/sidepanel.jelly":[{"add":["36","      <l:task icon=\"images\/24x24\/new-package.gif\" href=\"${rootURL}\/${it.viewUrl}newJob\" title=\"${%New Job}\" permission=\"${it.itemCreatePermission}\" \/>","44","        <l:task icon=\"images\/24x24\/gear.gif\" href=\"${rootURL}\/${it.viewUrl}configure\" title=\"${%Edit View}\" permission=\"${it.CONFIGURE}\" \/>","66","<\/j:jelly>"],"delete":["36","      <l:task icon=\"images\/24x24\/new-package.gif\" href=\"${rootURL}\/${it.url}newJob\" title=\"${%New Job}\" permission=\"${it.itemCreatePermission}\" \/>","44","        <l:task icon=\"images\/24x24\/gear.gif\" href=\"${rootURL}\/${it.url}configure\" title=\"${%Edit View}\"  permission=\"${it.CONFIGURE}\" \/>","66","<\/j:jelly>"]}]}},"85bfd2ae45d9ac0702851758f35b969eb0913bdf":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Build\/index.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Build.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Build\/index.jelly":[{"add":["47","          <j:choose>","48","            <j:when test=\"${it.hasChangeSetComputed()}\">","49","              <st:include it=\"${set}\" page=\"digest.jelly\" \/>","51","              <!-- dependency changes -->","52","              <j:set var=\"depChanges\" value=\"${it.getDependencyChanges(it.previousBuild)}\"\/>","53","              <j:if test=\"${!empty(depChanges)}\">","54","                Changes in dependency","55","                <ol>","56","                  <j:forEach var=\"dep\" items=\"${depChanges.values()}\">","57","                    <li>","58","                      <a href=\"${rootURL}\/${dep.project.url}\">${dep.project.displayName}<\/a>","59","                      <st:nbsp\/>","60","                      <a href=\"${rootURL}\/${dep.from.url}\">","61","                        <img src=\"${rootURL}\/images\/16x16\/${dep.from.buildStatusUrl}\" \/>${dep.from.displayName}<\/a>","63","                      &#x2192; <!-- right arrow -->","65","                      <a href=\"${rootURL}\/${dep.to.url}\">","66","                        <img src=\"${rootURL}\/images\/16x16\/${dep.to.buildStatusUrl}\" \/>${dep.to.displayName}<\/a>","68","                      (<a href=\"${rootURL}\/${dep.project.url}changes?from=${dep.fromId}&amp;to=${dep.toId}\">detail<\/a>)","69","                    <\/li>","70","                  <\/j:forEach>","71","                <\/ol>","72","              <\/j:if>","73","            <\/j:when>","74","            <j:otherwise>","75","              Not yet determined","76","            <\/j:otherwise>","77","          <\/j:choose>"],"delete":["47","          <st:include it=\"${set}\" page=\"digest.jelly\" \/>","49","          <!-- dependency changes -->","50","          <j:set var=\"depChanges\" value=\"${it.getDependencyChanges(it.previousBuild)}\"\/>","51","          <j:if test=\"${!empty(depChanges)}\">","52","            Changes in dependency","53","            <ol>","54","              <j:forEach var=\"dep\" items=\"${depChanges.values()}\">","55","                <li>","56","                  <a href=\"${rootURL}\/${dep.project.url}\">${dep.project.displayName}<\/a>","57","                  <st:nbsp\/>","58","                  <a href=\"${rootURL}\/${dep.from.url}\">","59","                    <img src=\"${rootURL}\/images\/16x16\/${dep.from.buildStatusUrl}\" \/>${dep.from.displayName}<\/a>","61","                  &#x2192; <!-- right arrow -->","63","                  <a href=\"${rootURL}\/${dep.to.url}\">","64","                    <img src=\"${rootURL}\/images\/16x16\/${dep.to.buildStatusUrl}\" \/>${dep.to.displayName}<\/a>","66","                  (<a href=\"${rootURL}\/${dep.project.url}changes?from=${dep.fromId}&amp;to=${dep.toId}\">detail<\/a>)","67","                <\/li>","68","              <\/j:forEach>","69","            <\/ol>","70","          <\/j:if>"]}],"core\/src\/main\/java\/hudson\/model\/Build.java":[{"add":["108","    \/**","109","     * Returns true if the changelog is already computed.","110","     *\/","111","    public boolean hasChangeSetComputed() {","112","        File changelogFile = new File(getRootDir(), \"changelog.xml\");","113","        return changelogFile.exists();","114","    }","115",""],"delete":[]}]}},"a1e4f83c8140b9a365ddad9b1ffe20cc1f52b245":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/jnlp\/Main.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/jnlp\/Main.java":[{"add":["66","                throw new CmdLineException(\"two arguments required, but got \"+m.args);"],"delete":["66","                throw new CmdLineException(\"two arguments required\");"]}]}},"0af98fe7163a821710f8be0dbc11086d4acd8bf2":{"changes":{"test\/src\/test\/java\/hudson\/util\/HudsonIsRestartingTest.java":"ADD","\/dev\/null":"DELETE","test\/src\/test\/java\/hudson\/util\/HudsonIsLoadingTest.java":"ADD"},"diff":{"test\/src\/test\/java\/hudson\/util\/HudsonIsRestartingTest.java":[{"add":[],"delete":[]}],"\/dev\/null":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/util\/HudsonIsLoadingTest.java":[{"add":[],"delete":[]}]}},"f8ac5cada7dee692a74e7a17b32bb64afe717314":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=bug>","58","    Saving the update center list after the metadata has been fetched results in ","59","    the metadata being persisted twice","60","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15889\">issue 15889<\/a>)"],"delete":["57","  <li class=>","135","    ","136",""]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["108","    private transient Data data;"],"delete":["108","    private Data data;"]}]}},"2472b1d8fc306e02c2470ea2185da43776aa1ec5":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Build\/index.jelly":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/test\/AbstractTestResultAction.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Build\/index.jelly":[{"add":["35","              <j:when test=\"${tr.totalCount==0}\">","36","                (no tests)","37","              <\/j:when>","42","                (1 failure ${tr.failureDiffString})","45","                (${tr.failCount} failures ${tr.failureDiffString})"],"delete":["39","                (1 failure)","42","                (${tr.failCount} failures)"]}],"core\/src\/main\/java\/hudson\/tasks\/test\/AbstractTestResultAction.java":[{"add":["10","import hudson.Functions;","54","    \/**","55","     * Gets the diff string of failures.","56","     *\/","57","    public final String getFailureDiffString() {","58","        T prev = getPreviousResult();","59","        if(prev==null)  return \"\";  \/\/ no record","60","","61","        return \" \/ \"+Functions.getDiffString(this.getFailCount()-prev.getFailCount());","62","    }","63","","76","    \/**","77","     * Gets the test result of the previous build, if it's recorded, or null.","78","     *\/"],"delete":[]}]}},"c6b54ff4bebe91d73a5afbe62fcd6db347e0f55d":{"changes":{"war\/src\/main\/webapp\/env-vars_ja.html":"MODIFY"},"diff":{"war\/src\/main\/webapp\/env-vars_ja.html":[{"add":["28","    <dt>NODE_NAME<\/dt>","29","    <dd>??????????????????????????????\"master\"?<\/dd>","30","","31","    <dt>NODE_LABELS<\/dt>","32","    <dd>????????????????????????)?<dd>","33","    ","47","    <dt>BUILD_URL<\/dt>"],"delete":["41","<dt>BUILD_URL<\/dt>"]}]}},"388c4b5e6ba52037cae117c5c69f9f4156d41401":{"changes":{"core\/src\/main\/java\/jenkins\/model\/RunIdMigrator.java":"MODIFY","core\/src\/test\/java\/jenkins\/model\/RunIdMigratorTest.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/RunIdMigrator.java":[{"add":["204","            } catch (NumberFormatException x) {","205","                LOGGER.log(FINE, \"ignoring nonnumeric entry {0}\", name);","206","                continue;","207","            }","209","                if (Util.isSymlink(kid)) {","210","                    LOGGER.log(FINE, \"deleting build number symlink {0} ? {1}\", new Object[] {name, Util.resolveSymlink(kid)});","211","                } else if (kid.isDirectory()) {","212","                    LOGGER.log(FINE, \"ignoring build directory {0}\", name);","215","                    LOGGER.log(WARNING, \"need to delete anomalous file entry {0}\", name);","217","                Util.deleteFile(kid);"],"delete":["202","            boolean numeric = false;","205","                numeric = true;","206","            } catch (NumberFormatException x) {}","208","                String link = Util.resolveSymlink(kid);","209","                if (link == null && numeric && kid.isFile()) { \/\/ legacy Windows format","210","                    link = FileUtils.readFileToString(kid);","211","                } else if (link == null) {","212","                    if (numeric) {","213","                        if (kid.isDirectory()) {","214","                            LOGGER.log(FINE, \"skipping deletion of directory {0}\", name);","215","                        } else {","216","                            LOGGER.log(WARNING, \"need to delete non-symlink numeric directory entry {0}\", name);","217","                            Util.deleteFile(kid);","218","                        }","219","                    }","221","                }","222","                if (numeric) {","223","                    LOGGER.log(FINE, \"deleting build number symlink {0} ? {1}\", new Object[] {name, link});","224","                    Util.deleteFile(kid);","226","                    LOGGER.log(FINE, \"skipping other symlink {0} ? {1}\", new Object[] {name, link});"]}],"core\/src\/test\/java\/jenkins\/model\/RunIdMigratorTest.java":[{"add":[],"delete":["44","import org.jvnet.hudson.test.Issue;","131","    @Issue(\"JENKINS-26519\")","132","    @Test public void windowsQuasiLinks() throws Exception {","133","        write(\"2014-01-02_03-04-05\/build.xml\", \"<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <number>99<\/number>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>\");","134","        write(\"99\", \"2014-01-02_03-04-05\");","135","        write(\"lastFailedBuild\", \"-1\");","136","        write(\"lastSuccessfulBuild\", \"99\");","137","        assertEquals(\"{2014-01-02_03-04-05={build.xml='<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <number>99<\/number>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>'}, 99='2014-01-02_03-04-05', lastFailedBuild='-1', lastSuccessfulBuild='99'}\", summarize());","138","        assertTrue(migrator.migrate(dir, null));","139","        assertEquals(\"{99={build.xml='<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <id>2014-01-02_03-04-05<\/id>\\n  <timestamp>1388649845000<\/timestamp>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>'}, lastFailedBuild='-1', lastSuccessfulBuild='99', legacyIds='2014-01-02_03-04-05 99\\n'}\", summarize());","140","        assertEquals(99, migrator.findNumber(\"2014-01-02_03-04-05\"));","141","    }","142",""]}],"changelog.html":[{"add":["57","  <li class='major bug'>","58","    Build format change migrator in 1.597 did not work on some Windows systems.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-26519\">issue 26519<\/a>)"],"delete":["83","  <li class='major bug'>","84","    Build format change migrator in 1.597 did not work on some Windows systems.","85","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-26519\">issue 26519<\/a>)"]}]}},"33afbcc87f783e4b2ea79ef1a77e9bbef6e6b837":{"changes":{"test\/src\/test\/java\/hudson\/cli\/RunRangeCommandTest.java":"ADD","core\/src\/main\/java\/hudson\/cli\/ListChangesCommand.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/RunRangeCommand2Test.java":"ADD","core\/src\/main\/java\/hudson\/cli\/AbstractBuildRangeCommand.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/ConsoleCommand.java":"MODIFY","\/dev\/null":"DELETE","core\/src\/main\/java\/hudson\/cli\/RunRangeCommand.java":"ADD","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/ReloadJobCommand.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/SetBuildDisplayNameCommand.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/ReloadJobCommandTest.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/DeleteBuildsCommand.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/BuildCommand.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/SetBuildDescriptionCommand.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/RunRangeCommandTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/ListChangesCommand.java":[{"add":["3","import hudson.model.Run;","7","import jenkins.scm.RunWithSCM;","16","import org.kohsuke.accmod.Restricted;","17","import org.kohsuke.accmod.restrictions.DoNotUse;","24","@Restricted(DoNotUse.class) \/\/ command implementation only","26","public class ListChangesCommand extends RunRangeCommand {","45","    protected int act(List<Run<?, ?>> builds) throws IOException {","52","            for (Run<?, ?> build : builds) {","53","                if (build instanceof RunWithSCM) {","54","                    w.println(\"<build number='\" + build.getNumber() + \"'>\");","55","                    for (ChangeLogSet<?> cs : ((RunWithSCM<?, ?>) build).getChangeSets()) {","56","                        Model p = new ModelBuilder().get(cs.getClass());","57","                        p.writeTo(cs, Flavor.XML.createDataWriter(cs, w));","58","                    }","59","                    w.println(\"<\/build>\");","60","                }","66","            for (Run<?, ?> build : builds) {","67","                if (build instanceof RunWithSCM) {","68","                    for (ChangeLogSet<?> cs : ((RunWithSCM<?, ?>) build).getChangeSets()) {","69","                        for (Entry e : cs) {","70","                            stdout.printf(\"%s,%s%n\",","71","                                    QuotedStringTokenizer.quote(e.getAuthor().getId()),","72","                                    QuotedStringTokenizer.quote(e.getMsg()));","73","                        }","74","                    }","79","            for (Run<?, ?> build : builds) {","80","                if (build instanceof RunWithSCM) {","81","                    for (ChangeLogSet<?> cs : ((RunWithSCM<?, ?>) build).getChangeSets()) {","82","                        for (Entry e : cs) {","83","                            stdout.printf(\"%s\\t%s%n\", e.getAuthor(), e.getMsg());","84","                            for (String p : e.getAffectedPaths()) {","85","                                stdout.println(\"  \" + p);","86","                            }","87","                        }","88","                    }"],"delete":["3","import hudson.model.AbstractBuild;","22","public class ListChangesCommand extends AbstractBuildRangeCommand {","41","    protected int act(List<AbstractBuild<?, ?>> builds) throws IOException {","48","            for (AbstractBuild build : builds) {","49","                w.println(\"<build number='\"+build.getNumber()+\"'>\");","50","                ChangeLogSet<?> cs = build.getChangeSet();","51","                Model p = new ModelBuilder().get(cs.getClass());","52","                p.writeTo(cs,Flavor.XML.createDataWriter(cs,w));","53","                w.println(\"<\/build>\");","59","            for (AbstractBuild build : builds) {","60","                ChangeLogSet<?> cs = build.getChangeSet();","61","                for (Entry e : cs) {","62","                    stdout.printf(\"%s,%s%n\",","63","                            QuotedStringTokenizer.quote(e.getAuthor().getId()),","64","                            QuotedStringTokenizer.quote(e.getMsg()));","69","            for (AbstractBuild build : builds) {","70","                ChangeLogSet<?> cs = build.getChangeSet();","71","                for (Entry e : cs) {","72","                    stdout.printf(\"%s\\t%s%n\",e.getAuthor(),e.getMsg());","73","                    for (String p : e.getAffectedPaths())","74","                        stdout.println(\"  \"+p);"]}],"test\/src\/test\/java\/hudson\/cli\/RunRangeCommand2Test.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/AbstractBuildRangeCommand.java":[{"add":["14"," * @deprecated rather use {@link RunRangeCommand}","16","@Deprecated"],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/ConsoleCommand.java":[{"add":["5","import hudson.model.Job;","7","import hudson.model.Run;","31","    public Job<?,?> job;","45","        Run<?,?> run;","56","                run = p.resolve(job);","96","    private long seek(Run<?, ?> run) throws IOException {"],"delete":["4","import hudson.model.AbstractBuild;","5","import hudson.model.AbstractProject;","31","    public AbstractProject<?,?> job;","45","        AbstractBuild<?,?> run;","56","                run = (AbstractBuild)p.resolve(job);","96","    private long seek(AbstractBuild<?, ?> run) throws IOException {"]}],"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/RunRangeCommand.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["852","            @Argument(required=true,metaVar=\"NAME\",usage=\"Item name\") String name) throws CmdLineException {","856","            AbstractItem project = Items.findNearest(AbstractItem.class, name, Jenkins.getInstance());"],"delete":["852","            @Argument(required=true,metaVar=\"NAME\",usage=\"Job name\") String name) throws CmdLineException {","856","            AbstractProject project = AbstractProject.findNearest(name); \/\/ TODO should be Items.findNearest"]}],"core\/src\/main\/java\/hudson\/cli\/ReloadJobCommand.java":[{"add":["31","import hudson.model.Items;","32","import hudson.model.TopLevelItem;","81","                    AbstractItem project = Items.findNearest(AbstractItem.class, job_s, jenkins);","83","                        \"No such item \\u2018\" + job_s + \"\\u2019 exists.\" :","84","                        String.format(\"No such item \\u2018%s\\u2019 exists. Perhaps you meant \\u2018%s\\u2019?\","],"delete":["71","                \/\/ TODO: JENKINS-30786","80","                    \/\/ TODO: JENKINS-30785","81","                    AbstractProject project = AbstractProject.findNearest(job_s);","83","                        \"No such job \\u2018\" + job_s + \"\\u2019 exists.\" :","84","                        String.format(\"No such job \\u2018%s\\u2019 exists. Perhaps you meant \\u2018%s\\u2019?\","]}],"core\/src\/main\/java\/hudson\/cli\/SetBuildDisplayNameCommand.java":[{"add":["3","import hudson.model.Job;","20","    public transient Job<?, ?> job;"],"delete":["3","import hudson.model.AbstractProject;","20","    public transient AbstractProject<?, ?> job;"]}],"test\/src\/test\/java\/hudson\/cli\/ReloadJobCommandTest.java":[{"add":["93","        assertThat(result.stderr(), containsString(\"ERROR: No such item \u2018aProject\u2019 exists.\"));","123","        assertThat(result.stderr(), containsString(\"ERROR: No such item \u2018never_created\u2019 exists.\"));","135","        assertThat(result.stderr(), containsString(\"ERROR: No such item \u2018never_created1\u2019 exists. Perhaps you meant \u2018never_created\u2019?\"));","184","        assertThat(result.stderr(), containsString(\"never_created: No such item \u2018never_created\u2019 exists.\"));","210","        assertThat(result.stderr(), containsString(\"never_created: No such item \u2018never_created\u2019 exists.\"));","236","        assertThat(result.stderr(), containsString(\"never_created: No such item \u2018never_created\u2019 exists.\"));","262","        assertThat(result.stderr(), containsString(\"never_created1: No such item \u2018never_created1\u2019 exists.\"));","263","        assertThat(result.stderr(), containsString(\"never_created2: No such item \u2018never_created2\u2019 exists.\"));"],"delete":["93","        assertThat(result.stderr(), containsString(\"ERROR: No such job \\u2018aProject\\u2019 exists.\"));","123","        assertThat(result.stderr(), containsString(\"ERROR: No such job \\u2018never_created\\u2019 exists.\"));","135","        assertThat(result.stderr(), containsString(\"ERROR: No such job \\u2018never_created1\\u2019 exists. Perhaps you meant \\u2018never_created\\u2019?\"));","184","        assertThat(result.stderr(), containsString(\"never_created: No such job \\u2018never_created\\u2019 exists.\"));","210","        assertThat(result.stderr(), containsString(\"never_created: No such job \\u2018never_created\\u2019 exists.\"));","236","        assertThat(result.stderr(), containsString(\"never_created: No such job \\u2018never_created\\u2019 exists.\"));","262","        assertThat(result.stderr(), containsString(\"never_created1: No such job \\u2018never_created1\\u2019 exists.\"));","263","        assertThat(result.stderr(), containsString(\"never_created2: No such job \\u2018never_created2\\u2019 exists.\"));"]}],"core\/src\/main\/java\/hudson\/cli\/DeleteBuildsCommand.java":[{"add":["32","import org.kohsuke.accmod.Restricted;","33","import org.kohsuke.accmod.restrictions.DoNotUse;","40","@Restricted(DoNotUse.class) \/\/ command implementation only","42","public class DeleteBuildsCommand extends RunRangeCommand {","56","    protected int act(List<Run<?, ?>> builds) throws IOException {","61","        for (Run<?, ?> build : builds) {"],"delete":["26","import hudson.model.AbstractBuild;","40","public class DeleteBuildsCommand extends AbstractBuildRangeCommand {","54","    protected int act(List<AbstractBuild<?, ?>> builds) throws IOException {","59","        for (AbstractBuild build : builds) {"]}],"core\/src\/main\/java\/hudson\/cli\/BuildCommand.java":[{"add":[],"delete":["27","import hudson.model.AbstractProject;"]}],"core\/src\/main\/java\/hudson\/cli\/SetBuildDescriptionCommand.java":[{"add":["3","import hudson.model.Job;","20","    public transient Job<?,?> job;"],"delete":["3","import hudson.model.AbstractProject;","20","    public transient AbstractProject<?,?> job;"]}]}},"8a2d2de2a346fa79c16cceadf38e90b1dc06ee36":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["136","      <version>1.8<\/version>"],"delete":["136","      <version>1.7<\/version>"]}]}},"281487de8761ec198e921a377ca8a39963216ed7":{"changes":{"core\/src\/main\/java\/hudson\/model\/JobParameterDefinition.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/StringParameterDefinition.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/FileParameterDefinition.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ParameterDefinition.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/JobParameterDefinition.java":[{"add":["44","\t@Override","45","\tpublic ParameterValue createValue(StaplerRequest req) {","46","\t\tthrow new UnsupportedOperationException();","47","\t}","48",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["5","import java.util.Map;","6","","7","import javax.servlet.ServletException;","62","        ","82","    ","83","    public void buildWithParameters(StaplerRequest req, StaplerResponse rsp) throws IOException {","84","        List<ParameterValue> values = new ArrayList<ParameterValue>();","85","        for (ParameterDefinition d: parameterDefinitions) {","86","        \tParameterValue value = d.createValue(req);","87","        \tif (value != null) {","88","        \t\tvalues.add(value);","89","        \t} else {","90","        \t\tthrow new IllegalArgumentException(\"Parameter \" + d.getName() + \" was missing.\");","91","        \t}","92","        }","93","","94","    \tHudson.getInstance().getQueue().add(","95","                new ParameterizedProjectTask(owner, values), 0);","96","","97","        \/\/ send the user back to the job top page.","98","        rsp.sendRedirect(\".\");","99","    }"],"delete":["12","import javax.servlet.ServletException;","13","","61",""]}],"core\/src\/main\/java\/hudson\/model\/StringParameterDefinition.java":[{"add":["61","\t@Override","62","\tpublic ParameterValue createValue(StaplerRequest req) {","63","        String[] value = req.getParameterValues(getName());","64","        if (value == null) {","65","        \treturn getDefaultParameterValue();","66","        } else if (value.length != 1) {","67","        \tthrow new IllegalArgumentException(\"Illegal number of parameter values for \" + getName() + \": \" + value.length);","68","        } else ","69","        \treturn new StringParameterValue(getName(), value[0]);","70","\t}","71",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/FileParameterDefinition.java":[{"add":["48","","49","\t@Override","50","\tpublic ParameterValue createValue(StaplerRequest req) {","51","\t\tthrow new UnsupportedOperationException();","52","\t}"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["971","    ","972","    \/**","973","     * Supports build trigger with parameters via an HTTP GET or POST.","974","     * Currently only String parameters are supported.","975","     *\/","976","    public void doBuildWithParameters(StaplerRequest req, StaplerResponse rsp) throws IOException {","977","        BuildAuthorizationToken.checkPermission(this, authToken, req, rsp);","978","","979","        ParametersDefinitionProperty pp = getProperty(ParametersDefinitionProperty.class);","980","        if (pp != null) {","981","            pp.buildWithParameters(req,rsp);","982","            return;","983","        } else {","984","        \tthrow new IllegalStateException(\"This build is not parameterized!\");","985","        }","986","    \t","987","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/RunParameterDefinition.java":[{"add":["44","\t@Override","45","\tpublic ParameterValue createValue(StaplerRequest req) {","46","\t\tthrow new UnsupportedOperationException();","47","\t}","48",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ParameterDefinition.java":[{"add":["82","    \/**","83","     * Create a parameter value from a form submission","84","     * @param req","85","     * @param jo","86","     * @return","87","     *\/","91","     * Create a parameter value from a GET (with query string) or POST.","92","     * If no value is available in the request, it returns a default value if possible, or null.","93","     * @param req","94","     * @return","95","     *\/","96","    public abstract ParameterValue createValue(StaplerRequest req);","97","","98","    \/**"],"delete":[]}]}},"590d32f20c72180fdcc2c39791b3d464157b6640":{"changes":{"war\/resources\/help\/security\/private-realm.html":"MODIFY"},"diff":{"war\/resources\/help\/security\/private-realm.html":[{"add":["1","  Use <a href=\"people\">Hudson's own user list<\/a> for authentication,"],"delete":["1","  Use <a href=\"users\">Hudson's own user list<\/a> for authentication,"]}]}},"b73bb3d0af419dd653b743b4c0b8458c965396e1":{"changes":{"core\/src\/main\/resources\/lib\/form\/link.jelly":"ADD","core\/src\/main\/resources\/lib\/form\/link\/link.js":"ADD","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/manage.jelly":"MODIFY","core\/src\/main\/java\/jenkins\/management\/ShutdownLink.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ManagementLink.java":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/queue.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/link.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/form\/link\/link.js":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/manage.jelly":[{"add":["45","              <f:link href=\"${_href}\" post=\"${post}\">${title}<\/f:link>","88","            <local:feature icon=\"${icon}\"      href=\"${m.urlName}\"   title=\"${m.displayName}\" requiresConfirmation=\"${m.requiresConfirmation}\" post=\"${m.requiresPOST}\">"],"delete":["45","              <a href=\"${_href}\">${title}<\/a>","88","            <local:feature icon=\"${icon}\"      href=\"${m.urlName}\"   title=\"${m.displayName}\" requiresConfirmation=\"${m.requiresConfirmation}\">"]}],"core\/src\/main\/java\/jenkins\/management\/ShutdownLink.java":[{"add":["54","","55","    @Override","56","    public boolean getRequiresPOST() {","57","        return true;","58","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ManagementLink.java":[{"add":["114","","115","    \/**","116","     * Define if the rendered link will use the default GET method or POST.","117","     * @return true if POST must be used","118","     * @see RequirePOST","119","     * @since TODO","120","     *\/","121","    public boolean getRequiresPOST() {","122","        return false;","123","    }"],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/queue.jelly":[{"add":["53","            <f:link href=\"${rootURL}\/cancelQuietDown\" post=\"true\">(${%cancel})<\/f:link>"],"delete":["53","            <a href=\"${rootURL}\/cancelQuietDown\">(${%cancel})<\/a>"]}]}},"2aad40296f49860f2cad8f7b64a71a3eb3eb11b6":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/UserRequest.java":"MODIFY","changelog.html":"MODIFY","remoting\/src\/test\/java\/hudson\/remoting\/ChannelTest.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/UserRequest.java":[{"add":["100","                } catch (RuntimeException e) {","101","                    \/\/ if the error is during deserialization, throw it in one of the types Channel.call will","102","                    \/\/ capture its call site stack trace. See ","103","                    throw new Error(\"Failed to deserialize the Callable object.\",e);"],"delete":[]}],"changelog.html":[{"add":["92","  <li class=rfe>","93","    Improved the error diagnostics when a remote method call fails to deserialize.","94","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9050\">issue 9050<\/a>)"],"delete":[]}],"remoting\/src\/test\/java\/hudson\/remoting\/ChannelTest.java":[{"add":["2","import org.jvnet.hudson.test.Bug;","3","","4","import java.io.IOException;","5","import java.io.ObjectInputStream;","6","","14","","15","    @Bug(9050)","16","    public void testFailureInDeserialization() throws Exception {","17","        try {","18","            channel.call(new CallableImpl());","19","            fail();","20","        } catch (IOException e) {","21","            e.printStackTrace();","22","            assertEquals(\"foobar\",e.getCause().getCause().getMessage());","23","            assertTrue(e.getCause().getCause() instanceof ClassCastException);","24","        }","25","    }","26","","27","    private static class CallableImpl implements Callable<Object,IOException> {","28","        public Object call() throws IOException {","29","            return null;","30","        }","31","","32","        private void readObject(ObjectInputStream ois) throws IOException, ClassNotFoundException {","33","            throw new ClassCastException(\"foobar\");","34","        }","35","    }"],"delete":[]}]}},"dda099c19a7a015d9c2fc655754dbb07b1b39455":{"changes":{"core\/src\/main\/resources\/lib\/form\/apply\/apply.js":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/apply\/apply.js":[{"add":["31","            target = Element('iframe', {id: id, name: id, style: 'height:100%; width:100%'});","79","});"],"delete":["31","            target = document.createElement(\"iframe\");","32","            target.setAttribute(\"id\",id);","33","            target.setAttribute(\"name\",id);","34","            target.setAttribute(\"style\",\"height:100%; width:100%\");","82","});"]}],"changelog.html":[{"add":["58","    <i>Apply<\/i> buttons did not work in Internet Explorer in compatibility mode.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19826\">issue 19826<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"3880e00190a7432ad6aa53186fdb62154d3218a0":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=bug>","58","    Custom workspace option did not work under some conditions.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-25221\">issue 25221<\/a>)"],"delete":["57","  <li class=>"]}]}},"8cce8dd0ba4be23e39f32d7267564275895d8a79":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["71","  <li class=\"rfe\">","72","    Avoid post-build depoy to Maven repository in release build","73","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12397\">issue 12397<\/a>)    "],"delete":[]}]}},"6974d2b7593e3eef3a7fd28117b58382c3368189":{"changes":{"war\/src\/main\/js\/api\/pluginManager.js":"MODIFY","war\/src\/main\/js\/pluginSetupWizardGui.js":"MODIFY","core\/src\/main\/resources\/jenkins\/install\/pluginSetupWizard.properties":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","war\/src\/main\/js\/templates\/successPanel.hbs":"MODIFY"},"diff":{"war\/src\/main\/js\/api\/pluginManager.js":[{"add":["176"," * Skip failed plugins, continue","177"," *\/","178","exports.installPluginsDone = function(handler) {","179","\tjenkins.post('\/pluginManager\/installPluginsDone', {}, function() {","180","\t\thandler();","181","\t}, {","182","\t\ttimeout: pluginManagerErrorTimeoutMillis,","183","\t\terror: function(xhr, textStatus, errorThrown) {","184","\t\t\thandler.call({ isError: true, message: errorThrown });","185","\t\t}","186","\t});","187","}","188","","189","\/**"],"delete":[]}],"war\/src\/main\/js\/pluginSetupWizardGui.js":[{"add":["112","\tvar pluginSuccessPanel = require('.\/templates\/successPanel.hbs');","244","\tvar failedPluginNames = [];","254","\tvar setFailureStatus = function(plugData) {","255","\t\tvar plugFailIdx = failedPluginNames.indexOf(plugData.name);","256","\t\tif(\/.*Fail.*\/.test(plugData.installStatus)) {","257","\t\t\tif(plugFailIdx < 0) {","258","\t\t\t\tfailedPluginNames.push(plugData.name);","259","\t\t\t}","260","\t\t} else if(plugFailIdx > 0) {","261","\t\t\tfailedPluginNames = failedPluginNames.slice(plugFailIdx,1);","262","\t\t}","263","\t};","350","\t\t\/\/ check for installing plugins that failed","351","\t\tif(failedPluginNames.length > 0) {","352","\t\t\tsetPanel(pluginSuccessPanel, { installingPlugins : installingPlugins, failedPlugins: true });","353","\t\t\treturn;","354","\t\t}","355","\t\t","416","\t\t\t\t\tsetFailureStatus(j);","417","","462","\t\t\t\t\tshowInstallProgress('CREATE_ADMIN_USER'); \/\/ this temporary, changed in another PR","766","\t\/\/ push failed plugins to retry","767","\tvar retryFailedPlugins = function() {","768","\t\tvar failedPlugins = failedPluginNames;","769","\t\tfailedPluginNames = [];","770","\t\tinstallPlugins(failedPlugins);","771","\t};","772","\t","773","\t\/\/ continue with failed plugins","774","\tvar continueWithFailedPlugins = function() {","775","\t\tpluginManager.installPluginsDone(function(){","776","\t\t\tpluginManager.installStatus(handleGenericError(function(data) {","777","\t\t\t\tfailedPluginNames = [];","778","\t\t\t\tshowInstallProgress(data.state);","779","\t\t\t}));","780","\t\t});","781","\t};","782","\t","862","\t\t'.retry-failed-plugins': retryFailedPlugins,","863","\t\t'.continue-with-failed-plugins': continueWithFailedPlugins,","896","\t\t\t\t\t\t\t\tvar j = jobs[i];","899","\t\t\t\t\t\t\t\tif (j.correlationId) {","900","\t\t\t\t\t\t\t\t\tselectedPluginNames.push(j.name);","902","\t\t\t\t\t\t\t\tsetFailureStatus(j)","904","\t\t\t\t\t\t\tshowInstallProgress(data.state);"],"delete":["442","\t\t\t\t\tsetupFirstUser();","859","\t\t\t\t\t\t\t\tif (jobs[i].correlationId) {","860","\t\t\t\t\t\t\t\t\tselectedPluginNames.push(jobs[i].name);","863","\t\t\t\t\t\tshowInstallProgress(data.state);"]}],"core\/src\/main\/resources\/jenkins\/install\/pluginSetupWizard.properties":[{"add":["52","installWizard_pluginInstallFailure_title=Installation Failures","53","installWizard_pluginInstallFailure_message=Some plugins failed to install properly, you may retry installing them or continue \\","54","with the failed plugins","55","installWizard_continue=Continue"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["138","     * Read timeout when downloading plugins, defaults to 1 minute","139","     *\/","140","    private static final int PLUGIN_DOWNLOAD_READ_TIMEOUT = Integer.getInteger(UpdateCenter.class.getName()+\".pluginDownloadReadTimeoutSeconds\", 60) * 1000;","141","","142","    \/**","1011","                \/\/JENKINS-34174 - set timeout for downloads, may hang indefinitely","1012","                \/\/ particularly noticeable during 2.0 install when downloading","1013","                \/\/ many plugins","1014","                con.setReadTimeout(PLUGIN_DOWNLOAD_READ_TIMEOUT);","1015","                "],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["38","import hudson.model.UpdateCenter.DownloadJob;","39","import hudson.model.UpdateCenter.InstallationJob;","1059","    ","1060","    \/**","1061","     * Called to progress status beyond installing plugins, e.g. if ","1062","     * there were failures that prevented installation from naturally proceeding","1063","     *\/","1064","    @RequirePOST","1065","    @Restricted(DoNotUse.class) \/\/ WebOnly","1066","    public void doInstallPluginsDone() {","1067","        Jenkins j = Jenkins.getInstance();","1068","        j.checkPermission(Jenkins.ADMINISTER);","1069","        if(InstallState.INITIAL_PLUGINS_INSTALLING.equals(j.getInstallState())) {","1070","            Jenkins.getInstance().setInstallState(InstallState.INITIAL_PLUGINS_INSTALLING.getNextState());","1071","        }","1072","    }","1200","                    final boolean failures[] = { false };","1203","                            updateCenter.persistInstallStatus();","1205","                            failures[0] = false;","1210","                                UpdateCenter.UpdateCenterJob job = jobFuture.get();","1211","                                if(job instanceof InstallationJob && ((InstallationJob)job).status instanceof DownloadJob.Failure) {","1212","                                    failures[0] = true;","1213","                                }","1215","                        } catch (Exception e) {","1220","                    updateCenter.persistInstallStatus();","1221","                    if(!failures[0]) {","1222","                        jenkins.setInstallState(InstallState.INITIAL_PLUGINS_INSTALLING.getNextState());","1223","                    }"],"delete":["1186","\t\t\t\tupdateCenter.persistInstallStatus();","1193","                        } catch (InterruptedException e) {","1198","\t\t\tupdateCenter.persistInstallStatus();","1199","                    jenkins.setInstallState(InstallState.INITIAL_PLUGINS_INSTALLING.getNextState());"]}],"war\/src\/main\/js\/templates\/successPanel.hbs":[{"add":["1","    <h4 class=\"modal-title\">{{translations.installWizard_welcomePanel_title}}<\/h4>","4","    <div class=\"jumbotron welcome-panel success-panel\">","5","        <h1>{{translations.installWizard_pluginInstallFailure_title}}<\/h1>","7","        {{#if failedPlugins}}","8","        <p>{{translations.installWizard_pluginInstallFailure_message}}<\/p>","9","        <button type=\"button\" class=\"btn btn-primary retry-failed-plugins\">","10","            {{translations.installWizard_retry}}","11","        <\/button>","12","        {{\/if}}","13","    <\/div>","15","    <div class=\"selected-plugin-progress success-panel\">","16","        {{#each installingPlugins}}","17","        <div class=\"selected-plugin {{installStatus}}\" data-name=\"{{id name}}\">{{title}}<\/div>","18","        {{\/each}}","19","    <\/div>","20","<\/div>","21","<div class=\"modal-footer\">","22","\t{{#if failedPlugins}}","23","    <button type=\"button\" class=\"btn btn-link continue-with-failed-plugins\">","24","        {{translations.installWizard_continue}}","25","    <\/button>","26","    <button type=\"button\" class=\"btn btn-primary retry-failed-plugins\">","27","        {{translations.installWizard_retry}}","28","    <\/button>","29","    {{else}}","30","    <button type=\"button\" class=\"btn btn-primary continue-with-failed-plugins\">","31","        {{translations.installWizard_continue}}","32","    <\/button>","33","    {{\/if}}"],"delete":["1","\t<h4 class=\"modal-title\">{{translations.installWizard_pluginsInstalled_title}}<\/h4>","4","\t<div class=\"jumbotron welcome-panel success-panel\">","5","\t\t<h1>{{translations.installWizard_pluginsInstalled_banner}}<\/h1>","7","\t\t{{#if restartRequired}}","8","\t\t<p>{{translations.installWizard_installComplete_message}} {{translations.installWizard_installComplete_restartRequiredMessage}}<\/p>","9","\t\t<button type=\"button\" class=\"btn btn-primary install-done-restart\">","10","\t\t\t{{translations.installWizard_installComplete_restartLabel}}","11","\t\t<\/button>","12","\t\t{{else}}","13","\t\t<p>{{translations.installWizard_installComplete_message}}<\/p>","14","\t\t<button type=\"button\" class=\"btn btn-primary install-done\">","15","\t\t\t{{translations.installWizard_installComplete_finishButtonLabel}}","16","\t\t<\/button>","17","\t\t{{\/if}}","18","\t<\/div>","20","\t<div class=\"selected-plugin-progress success-panel\">","21","\t\t{{#each installingPlugins}}","22","\t\t<div class=\"selected-plugin {{installStatus}}\" data-name=\"{{id name}}\">{{title}}<\/div>","23","\t\t{{\/each}}","24","\t<\/div>"]}]}},"2152cf478e26e01b90be8c818cfe3bb628b32263":{"changes":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":"MODIFY","changelog.html":"MODIFY","test\/src\/main\/java\/org\/jvnet\/hudson\/test\/JenkinsRule.java":"MODIFY"},"diff":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":[{"add":["562","        \/\/ defined in jenkins-test-harness POM, but not plugins; TODO should not use relative paths as we do not know what CWD is","563","        File buildDirectory = new File(System.getProperty(\"buildDirectory\", \"target\"));","564","        File mvnHome = new File(buildDirectory, mavenVersion);","565","        if (mvnHome.exists()) {","566","            MavenInstallation mavenInstallation = new MavenInstallation(\"default\", mvnHome.getAbsolutePath(), NO_PROPERTIES);","583","        LOGGER.warning(\"Extracting a copy of Maven bundled in the test harness into \" + mvnHome + \". \" +","587","        mvn.unzip(new FilePath(buildDirectory));","590","            GNUCLibrary.LIBC.chmod(new File(mvnHome, \"bin\/mvn\").getPath(),0755);","593","                mvnHome.getAbsolutePath(), NO_PROPERTIES);"],"delete":["562","        \/\/ see maven-junit-plugin systemProperties: buildDirectory -> ${project.build.directory} (so no reason to be null ;-) )","563","        String buildDirectory = System.getProperty( \"buildDirectory\", \".\/target\/classes\/\" );","564","        File mavenAlreadyInstalled = new File(buildDirectory, mavenVersion);","565","        if (mavenAlreadyInstalled.exists()) {","566","            MavenInstallation mavenInstallation = new MavenInstallation(\"default\",mavenAlreadyInstalled.getAbsolutePath(), NO_PROPERTIES);","583","        LOGGER.warning(\"Extracting a copy of Maven bundled in the test harness. \" +","587","        File mvnHome =  new File(buildDirectory);","588","        mvn.unzip(new FilePath(mvnHome));","591","            GNUCLibrary.LIBC.chmod(new File(mvnHome,mavenVersion+\"\/bin\/mvn\").getPath(),0755);","594","                new File(mvnHome,mavenVersion).getAbsolutePath(), NO_PROPERTIES);"]}],"changelog.html":[{"add":["73","    Test harness was packing copies of Maven into plugin archives under some conditions.","74","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18918\">issue 18918<\/a>)","75","  <li class=bug>"],"delete":[]}],"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/JenkinsRule.java":[{"add":["624","        File buildDirectory = new File(System.getProperty(\"buildDirectory\", \"target\")); \/\/ TODO relative path","625","        File mvnHome = new File(buildDirectory, mavenVersion);","626","        if (mvnHome.exists()) {","627","            Maven.MavenInstallation mavenInstallation = new Maven.MavenInstallation(\"default\", mvnHome.getAbsolutePath(), NO_PROPERTIES);","644","        LOGGER.warning(\"Extracting a copy of Maven bundled in the test harness into \" + mvnHome + \". \" +","648","        mvn.unzip(new FilePath(buildDirectory));","651","            GNUCLibrary.LIBC.chmod(new File(mvnHome, \"bin\/mvn\").getPath(),0755);","654","                mvnHome.getAbsolutePath(), NO_PROPERTIES);"],"delete":["624","        \/\/ does it exists in the buildDirectory see maven-junit-plugin systemProperties","625","        \/\/ buildDirectory -> ${project.build.directory} (so no reason to be null ;-) )","626","        String buildDirectory = System.getProperty( \"buildDirectory\", \".\/target\/classes\/\" );","627","        File mavenAlreadyInstalled = new File(buildDirectory, mavenVersion);","628","        if (mavenAlreadyInstalled.exists()) {","629","            Maven.MavenInstallation","630","                    mavenInstallation = new Maven.MavenInstallation(\"default\",mavenAlreadyInstalled.getAbsolutePath(), NO_PROPERTIES);","647","        LOGGER.warning(\"Extracting a copy of Maven bundled in the test harness. \" +","651","        File mvnHome =  new File(buildDirectory);\/\/createTmpDir();","652","        mvn.unzip(new FilePath(mvnHome));","655","            GNUCLibrary.LIBC.chmod(new File(mvnHome,mavenVersion+\"\/bin\/mvn\").getPath(),0755);","658","                new File(mvnHome,mavenVersion).getAbsolutePath(), NO_PROPERTIES);"]}]}},"e85e51a1dd01df13f1f7ae4cf00d87e13cabff90":{"changes":{"core\/src\/main\/java\/hudson\/security\/HudsonPrivateSecurityRealm.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/HudsonPrivateSecurityRealm.java":[{"add":["221","        req.setCharacterEncoding(\"UTF-8\");","222",""],"delete":[]}]}},"1c8ed8e672feda211a99cfe4ded20f98777f63a7":{"changes":{"core\/src\/main\/java\/hudson\/model\/Actionable.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Actionable.java":[{"add":["76","        \/\/this double checked synchronization is only safe if the field 'actions' is volatile","77","        if (actions == null) {","78","            synchronized (this) {","79","                if (actions == null) {","80","                    actions = new CopyOnWriteArrayList<Action>();","81","                }","84","        return actions;"],"delete":["76","        synchronized (this) {","77","            if(actions == null) {","78","                actions = new CopyOnWriteArrayList<Action>();","80","            return actions;"]}]}},"1e5e53a5fbf1e40ba637f1b21214e0fb8a0bee8b":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["95","      <version>3.3<\/version>"],"delete":["95","      <version>3.2<\/version>"]}]}},"1330a8770b1ff43be05f385aa9eca52504aaadcd":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Hudson\/accessDenied.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Hudson\/accessDenied.jelly":[{"add":["10","      <j:if test=\"${h.isAnonymous()}\">","11","        <div style=\"margin: 2em;\">","12","          <!-- login form -->","13","          <form action=\"j_security_check\" method=\"post\" style=\"text-size:smaller\">","14","            <table>","15","              <tr>","16","                <td>User:<\/td>","17","                <td><input type=\"text\" name=\"j_username\" id=\"j_username\" \/><\/td>","18","              <\/tr>","19","              <tr>","20","                <td>Password<\/td>","21","                <td><input type=\"password\" name=\"j_password\" \/><\/td>","22","              <\/tr>","23","            <\/table>","24","            <f:submit value=\"login\" \/>","25","            <script>","26","              $('j_username').focus();","27","            <\/script>","28","          <\/form>","29","        <\/div>","30","      <\/j:if>"],"delete":["10","      <div style=\"margin: 2em;\">","11","        <!-- login form -->","12","        <form action=\"j_security_check\" method=\"post\" style=\"text-size:smaller\">","13","          <table>","14","            <tr>","15","              <td>User:<\/td>","16","              <td><input type=\"text\" name=\"j_username\" id=\"j_username\" \/><\/td>","17","            <\/tr>","18","            <tr>","19","              <td>Password<\/td>","20","              <td><input type=\"password\" name=\"j_password\" \/><\/td>","21","            <\/tr>","22","          <\/table>","23","          <f:submit value=\"login\" \/>","24","          <script>","25","            $('j_username').focus();","26","          <\/script>","27","        <\/form>","28","      <\/div>"]}]}},"f8caf67bed19193277c8f71b86112f502d6bf877":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["41","    <stapler.version>1.246<\/stapler.version>"],"delete":["41","    <stapler.version>1.243<\/stapler.version>"]}]}},"1fe92556c20feee48022ed0c586a4ec479ae232d":{"changes":{"war\/src\/main\/js\/util\/jenkins.js":"MODIFY","war\/src\/main\/js\/pluginSetupWizardGui.js":"MODIFY","war\/src\/main\/js\/upgradeWizard.js":"MODIFY"},"diff":{"war\/src\/main\/js\/util\/jenkins.js":[{"add":["195","","197","","198","\t\t\/* globals Proxy: true *\/","199","\t\tif('undefined' !== typeof Proxy) {","201","\t\t\t\tget: function(target, property) {"],"delete":["195","\t\t","197","\t\t","198","\t\tif('undefined' !== typeof(Proxy)) {","200","\t\t\t\tget: function(target, property, receiver) {"]}],"war\/src\/main\/js\/pluginSetupWizardGui.js":[{"add":["429","\tvar showInstallProgress = function() {","527","\t\t\t\tif(complete < total || data.state === 'INITIAL_PLUGINS_INSTALLING') {","797","\t\t\tif(JSON.parse(data).status === 'ok') {","952","\t\/* globals setupWizardExtensions: true *\/","953","\tif ('undefined' !== typeof(setupWizardExtensions)) {"],"delete":["429","\tvar showInstallProgress = function(state) {","527","\t\t\t\tif(complete < total || data.state == 'INITIAL_PLUGINS_INSTALLING') {","797","\t\t\tif(JSON.parse(data).status == 'ok') {","952","\tif ('undefined' != typeof(setupWizardExtensions)) {"]}],"war\/src\/main\/js\/upgradeWizard.js":[{"add":["0","\/* globals onSetupWizardInitialized: true *\/","4","","8","","17",""],"delete":["1","\tvar $ = wizard.$; \/\/ jQuery","4","\t","8","\t","17","\t"]}]}},"81d51294886a69cb78c827b6a487b92e9c8163c1":{"changes":{"opensuse\/SOURCES\/jenkins.init.in":"MODIFY","opensuse\/SPECS\/jenkins.spec":"MODIFY","opensuse\/SOURCES\/jenkins.sysconfig.in":"MODIFY"},"diff":{"opensuse\/SOURCES\/jenkins.init.in":[{"add":["90","[ -z \"$JENKINS_INIT_SHELL\" -o -x \"$JENKINS_INIT_SHELL\" ] || { echo \"JENKINS_INIT_SHELL does not refer to a shell: $JENKINS_INIT_SHELL\";","91","        if [ \"$1\" = \"stop\" ]; then exit 0;","92","        else exit 6; fi; }","93","","101","                if [ -x \"$JENKINS_INIT_SHELL\" ]; then","102","                       startproc -n $JENKINS_NICE -s -e -l \/var\/log\/jenkins.rc -p \"$JENKINS_PID_FILE\" -t 1 \/bin\/su -l -s \"$JENKINS_INIT_SHELL\" -c \"$JAVA_CMD $PARAMS &\" \"$JENKINS_USER\"","103","                else","104","                       HOME=$JENKINS_HOME startproc -n $JENKINS_NICE -s -e -l \/var\/log\/jenkins.rc -u \"$JENKINS_USER\" -p \"$JENKINS_PID_FILE\" $JAVA_CMD $PARAMS ","105","                fi"],"delete":["97","                HOME=$JENKINS_HOME startproc -n $JENKINS_NICE -s -l \/var\/log\/jenkins.rc -u \"$JENKINS_USER\" -p \"$JENKINS_PID_FILE\" $JAVA_CMD $PARAMS "]}],"opensuse\/SPECS\/jenkins.spec":[{"add":["8","Release:\t1.2"],"delete":["8","Release:\t1.1"]}],"opensuse\/SOURCES\/jenkins.sysconfig.in":[{"add":["12","## Default:     \"\/bin\/bash\"","13","## ServiceRestart: jenkins","14","#","15","# Shell used to initialize the Jenkins server's environment.","16","# Setting this option to the path of a shell executable allows ","17","# initialization of the Jenkins server environment using","18","# standard shell startup scripts.","19","# Disabling this option causes the Jenkins server to be run","20","# with a minimal environment.","21","#","22","JENKINS_INIT_SHELL=\"\/bin\/bash\"","23","","24","## Type:        string"],"delete":[]}]}},"c98a380ed41e65fc4010388de85b78d928fcdb7d":{"changes":{"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/entry.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/entry.jelly":[{"add":["38","    <tr class=\"${h.ifThenElse(build.building,'transitive',null)}\">"],"delete":["38","    <tr>"]}]}},"fc6137873956ef1645dccd1ff3688dbf42dff7d5":{"changes":{"core\/src\/main\/resources\/jenkins\/security\/whitelisted-classes.txt":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/security\/whitelisted-classes.txt":[{"add":["177","# TODO remove (also XStream2.BlacklistedTypesConverter.JRUBY_PROXY) when Ruby Runtime is fixed","178","# Related PRs:","179","#   - https:\/\/github.com\/jenkinsci\/ruby-runtime-plugin\/pull\/5,","180","#   - https:\/\/github.com\/jenkinsci\/ruby-runtime-plugin\/pull\/6","181","#","182","# oleg-nenashev in PR#6 we are trying to get help from last maintainers due to the plugin codebase splitbrain.","183","#               It is required to fix JENKINS-50616 in a proper way for 2.107.x","191","org.jruby.RubyNil"],"delete":["177","# TODO remove (also XStream2.BlacklistedTypesConverter.JRUBY_PROXY) when https:\/\/github.com\/jenkinsci\/ruby-runtime-plugin\/pull\/5 is widely adopted"]}]}},"97369edb7d70c9652813f4acc5073b3017867e18":{"changes":{"core\/src\/main\/java\/jenkins\/security\/UserDetailsCache.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/UserDetailsCache.java":[{"add":["72","            if (EXPIRE_AFTER_WRITE_SEC <= 0) {","73","                \/\/The property could also be set to a negative value","74","                EXPIRE_AFTER_WRITE_SEC = (int)TimeUnit.MINUTES.toSeconds(2);","75","            }","174","                    existanceCache.put(this.idOrFullName, Boolean.FALSE);","178","                existanceCache.put(this.idOrFullName, Boolean.TRUE);","181","                existanceCache.put(this.idOrFullName, Boolean.FALSE);"],"delete":["170","                    existanceCache.put(this.idOrFullName, false);","174","                existanceCache.put(this.idOrFullName, true);","177","                existanceCache.put(this.idOrFullName, false);"]}]}},"11ab9be6ef12e6b4b961809131fc72da86af6d72":{"changes":{"test\/src\/test\/java\/hudson\/LauncherTest.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/LauncherTest.java":[{"add":["25","import hudson.model.AbstractBuild;","26","import hudson.model.AbstractProject;","29","import hudson.model.Node;","33","import hudson.model.TaskListener;","35","import hudson.tasks.BuildStepDescriptor;","36","import hudson.tasks.Builder;","39","import java.io.IOException;","95","    @Issue(\"JENKINS-23027\")","96","    @Test public void quiet() throws Exception {","97","        Slave s = rule.createSlave();","98","        boolean windows = Functions.isWindows();","99","        FreeStyleProject p = rule.createFreeStyleProject();","100","        p.getBuildersList().add(windows ? new BatchFile(\"echo printed text\") : new Shell(\"echo printed text\"));","101","        for (Node n : new Node[] {rule.jenkins, s}) {","102","            rule.assertLogContains(windows ? \"cmd \/c\" : \"sh -xe\", runOn(p, n));","103","        }","104","        p.getBuildersList().clear(); \/\/ TODO .replace does not seem to work","105","        p.getBuildersList().add(windows ? new QuietBatchFile(\"echo printed text\") : new QuietShell(\"echo printed text\"));","106","        for (Node n : new Node[] {rule.jenkins, s}) {","107","            rule.assertLogNotContains(windows ? \"cmd \/c\" : \"sh -xe\", runOn(p, n));","108","        }","109","    }","110","    private FreeStyleBuild runOn(FreeStyleProject p, Node n) throws Exception {","111","        p.setAssignedNode(n);","112","        FreeStyleBuild b = rule.buildAndAssertSuccess(p);","113","        rule.assertLogContains(\"printed text\", b);","114","        return b;","115","    }","116","    private static final class QuietLauncher extends Launcher.DecoratedLauncher {","117","        QuietLauncher(Launcher inner) {","118","            super(inner);","119","        }","120","        @Override public Proc launch(ProcStarter starter) throws IOException {","121","            return super.launch(starter.quiet(true));","122","        }","123","    }","124","    private static final class QuietShell extends Shell {","125","        QuietShell(String command) {","126","            super(command);","127","        }","128","        @Override public boolean perform(AbstractBuild<?,?> build, Launcher launcher, TaskListener listener) throws InterruptedException {","129","            return super.perform(build, new QuietLauncher(launcher), listener);","130","        }","131","        @Extension public static final class DescriptorImpl extends Shell.DescriptorImpl {","132","            @Override public String getDisplayName() {","133","                return \"QuietShell\";","134","            }","135","        }","136","    }","137","    private static final class QuietBatchFile extends BatchFile {","138","        QuietBatchFile(String command) {","139","            super(command);","140","        }","141","        @Override public boolean perform(AbstractBuild<?,?> build, Launcher launcher, TaskListener listener) throws InterruptedException {","142","            return super.perform(build, new QuietLauncher(launcher), listener);","143","        }","144","        @Extension public static final class DescriptorImpl extends BuildStepDescriptor<Builder> {","145","            @Override public String getDisplayName() {","146","                return \"QuietBatchFile\";","147","            }","148","            @SuppressWarnings(\"rawtypes\")","149","            @Override public boolean isApplicable(Class<? extends AbstractProject> jobType) {","150","                return true;","151","            }","152","        }","153","    }","154",""],"delete":[]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["148","        private boolean quiet;","215","        \/**","216","         * Allows {@link #maskedPrintCommandLine(List, boolean[], FilePath)} to be suppressed from {@link hudson.Launcher.LocalLauncher#launch(hudson.Launcher.ProcStarter)}.","217","         * Useful when the actual command being printed is noisy and unreadable and the caller would rather print diagnostic information in a customized way.","218","         * @param quiet to suppress printing the command line when starting the process; false to keep default behavior of printing","219","         * @return this","220","         * @since 1.576","221","         *\/","222","        public ProcStarter quiet(boolean quiet) {","223","            this.quiet = quiet;","224","            return this;","225","        }","226","","227","        \/**","228","         * @since 1.576","229","         *\/","230","        public boolean quiet() {","231","            return quiet;","232","        }","233","","393","            ProcStarter rhs = new ProcStarter().cmds(commands).pwd(pwd).masks(masks).stdin(stdin).stdout(stdout).stderr(stderr).envs(envs).quiet(quiet);","790","            if (!ps.quiet) {","791","                maskedPrintCommandLine(ps.commands, ps.masks, ps.pwd);","792","            }","914","                return new ProcImpl(getChannel().call(new RemoteLaunchCallable(ps.commands, ps.masks, ps.envs, in, ps.reverseStdin, out, ps.reverseStdout, err, ps.reverseStderr, ps.quiet, workDir, listener)));","1109","        private final boolean quiet;","1111","        RemoteLaunchCallable(List<String> cmd, boolean[] masks, String[] env, InputStream in, boolean reverseStdin, OutputStream out, boolean reverseStdout, OutputStream err, boolean reverseStderr, boolean quiet, String workDir, TaskListener listener) {","1123","            this.quiet = quiet;","1128","            ps.cmds(cmd).masks(masks).envs(env).stdin(in).stdout(out).stderr(err).quiet(quiet);"],"delete":["373","            ProcStarter rhs = new ProcStarter().cmds(commands).pwd(pwd).masks(masks).stdin(stdin).stdout(stdout).stderr(stderr).envs(envs);","770","            maskedPrintCommandLine(ps.commands, ps.masks, ps.pwd);","892","                return new ProcImpl(getChannel().call(new RemoteLaunchCallable(ps.commands, ps.masks, ps.envs, in, ps.reverseStdin, out, ps.reverseStdout, err, ps.reverseStderr, workDir, listener)));","1088","        RemoteLaunchCallable(List<String> cmd, boolean[] masks, String[] env, InputStream in, boolean reverseStdin, OutputStream out, boolean reverseStdout, OutputStream err, boolean reverseStderr, String workDir, TaskListener listener) {","1104","            ps.cmds(cmd).masks(masks).envs(env).stdin(in).stdout(out).stderr(err);"]}],"changelog.html":[{"add":["79","    API to launch processes without printing the command line.","80","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-23027\">issue 23027<\/a>)","81","  <li class=\"rfe\">"],"delete":[]}]}},"ee38d15b1e7b36336675923135f48194216c3c1d":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SCM.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY","test\/src\/test\/java\/hudson\/scm\/ScmTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SCM.java":[{"add":["418","     *      this exception will cause the build to be aborted."],"delete":["418","     *      this exception will cause the build to fail."]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["70","import java.io.InterruptedIOException;","580","                    } catch (InterruptedIOException e) {","581","                        throw (InterruptedException)new InterruptedException().initCause(e);"],"delete":["559","            try {","591","            } catch (InterruptedException e) {","592","                listener.getLogger().println(Messages.AbstractProject_ScmAborted());","593","                LOGGER.log(Level.INFO, AbstractBuild.this + \" aborted\", e);","594","                throw new RunnerAbortedException();","595","            }"]}],"test\/src\/test\/java\/hudson\/scm\/ScmTest.java":[{"add":["25","import java.io.File;","26","import java.io.IOException;","27","import java.util.concurrent.ExecutionException;","28","","30","import hudson.Launcher;","31","import hudson.model.AbstractBuild;","33","import hudson.model.BuildListener;","34","import hudson.model.FreeStyleBuild;","37","import hudson.model.Result;","38","","68","    ","69","    @Bug(4605)","70","    public void testAbortDuringCheckoutMarksBuildAsAborted() throws IOException, InterruptedException, ExecutionException {","71","        FreeStyleProject p = createFreeStyleProject();","72","        p.setScm(new NullSCM() {","73","            @Override","74","            public boolean checkout(AbstractBuild<?, ?> build,","75","                    Launcher launcher, FilePath remoteDir,","76","                    BuildListener listener, File changeLogFile)","77","                    throws IOException, InterruptedException {","78","                throw new InterruptedException();","79","            }","80","            ","81","            private Object writeReplace() { \/\/ don't really care about save","82","                return new NullSCM();","83","            }","84","        });","85","        ","86","        FreeStyleBuild build = p.scheduleBuild2(0).get();","87","        assertEquals(Result.ABORTED, build.getResult());","88","    }"],"delete":[]}]}},"7089a81862f9a5eb422c53654d277089de9b08ef":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/summary.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/test\/MetaTabulatedResult\/body.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/summary.jelly":[{"add":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Tom Huybrechts","27","  <st:contentType value=\"text\/plain\"\/>","28","  <j:choose>","39","  <\/j:choose>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Tom Huybrechts","27","\t<j:choose>","38","\t<\/j:choose>"]}],"core\/src\/main\/resources\/hudson\/tasks\/test\/MetaTabulatedResult\/body.jelly":[{"add":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman, Tom Huybrechts, Yahoo!, Inc.","59","\t\t\t\tonclick=\"javascript:showStackTrace('test-${h.jsStringEscape(f.fullName)}','${f.getRelativePathFrom(it)}\/summary')\">&gt;&gt;&gt;<\/a>","61","\t\t\t\tonclick=\"javascript:hideStackTrace('test-${h.jsStringEscape(f.fullName)}')\">&lt;&lt;&lt;<\/a>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman, Tom Huybrechts, Yahoo!, Inc.","59","\t\t\t\tonclick='javascript:showStackTrace(\"test-${f.fullName}\",\"${f.getRelativePathFrom(it)}\/summary\")'>&gt;&gt;&gt;<\/a>","61","\t\t\t\tonclick='javascript:hideStackTrace(\"test-${f.fullName}\")'>&lt;&lt;&lt;<\/a>"]}]}},"63c2f6c5d7d154a3a0f58c54f04f9b1a25ea5385":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["498","      <version>1.24<\/version>"],"delete":["498","      <version>1.22<\/version>"]}]}},"d35dfcb24fb2272076f863780fdc3de93d0ec04b":{"changes":{"\/dev\/null":"DELETE","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","test\/src\/test\/java\/hudson\/slaves\/CloudTest.java":"ADD"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["30","import hudson.slaves.Cloud;","1723","    \/\/ This permission was historically scoped to this class albeit declared in Cloud. While deserializing, Jenkins loads","1724","    \/\/ the scope class to make sure the permission is initialized and registered. since Cloud class is used rather seldom,","1725","    \/\/ it might appear the permission does not exist. Referencing the permission from here to make sure it gets loaded.","1726","    private static final @Deprecated Permission CLOUD_PROVISION = Cloud.PROVISION;","1727",""],"delete":[]}],"test\/src\/test\/java\/hudson\/slaves\/CloudTest.java":[{"add":[],"delete":[]}]}},"0000211df74765f35902028508ba104102d379d2":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/LogRotatorTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/LogRotatorTest.java":[{"add":["25","import static org.hamcrest.Matchers.is;","29","import static org.junit.Assert.assertThat;","36","import hudson.model.FreeStyleBuild;","40","import hudson.model.queue.QueueTaskFuture;","42","","43","import java.io.IOException;","46","import java.util.concurrent.TimeUnit;","47","import java.util.concurrent.TimeoutException;","48","import java.util.logging.Level;","49","import java.util.logging.Logger;","56","import org.jvnet.hudson.test.TestBuilder;","149","    ","150","    @Test","151","    @Issue(\"JENKINS-27836\")","152","    public void artifactsRetainedWhileBuilding() throws Exception {","153","        j.getInstance().setNumExecutors(3);","154","        FreeStyleProject p = j.createFreeStyleProject();","155","        p.setBuildDiscarder(new LogRotator(-1, 3, -1, 1));","156","        StallBuilder sync = new StallBuilder();","157","        p.getBuildersList().replaceBy(Arrays.asList(new CreateArtifact(), sync));","158","        p.setConcurrentBuild(true);","159","        QueueTaskFuture<FreeStyleBuild> futureRun1 = p.scheduleBuild2(0);","160","        FreeStyleBuild run1 = futureRun1.waitForStart();","161","        sync.waitFor(run1.getNumber(), 1, TimeUnit.SECONDS);","162","        QueueTaskFuture<FreeStyleBuild> futureRun2 = p.scheduleBuild2(0);","163","        FreeStyleBuild run2 = futureRun2.waitForStart();","164","        sync.waitFor(run2.getNumber(), 1, TimeUnit.SECONDS);","165","        QueueTaskFuture<FreeStyleBuild> futureRun3 = p.scheduleBuild2(0);","166","        FreeStyleBuild run3 = futureRun3.waitForStart();","167","        sync.waitFor(run3.getNumber(), 1, TimeUnit.SECONDS);","168","        assertThat(\"we haven't released run1's guard\", run1.isBuilding(), is(true));","169","        assertThat(\"we haven't released run2's guard\", run2.isBuilding(), is(true));","170","        assertThat(\"we haven't released run3's guard\", run3.isBuilding(), is(true));","171","        assertThat(\"we have artifacts in run1\", run1.getHasArtifacts(), is(true));","172","        assertThat(\"we have artifacts in run2\", run2.getHasArtifacts(), is(true));","173","        assertThat(\"we have artifacts in run3\", run3.getHasArtifacts(), is(true));","174","        sync.release(run1.getNumber());","175","        futureRun1.get();","176","        assertThat(\"we have released run1's guard\", run1.isBuilding(), is(false));","177","        assertThat(\"we haven't released run2's guard\", run2.isBuilding(), is(true));","178","        assertThat(\"we haven't released run3's guard\", run3.isBuilding(), is(true));","179","        assertThat(\"run1 is last stable build\", p.getLastStableBuild(), is(run1));","180","        assertThat(\"run1 is last successful build\", p.getLastSuccessfulBuild(), is(run1));","181","        assertThat(\"we have artifacts in run1\", run1.getHasArtifacts(), is(true));","182","        assertThat(\"CRITICAL ASSERTION: we have artifacts in run2\", run2.getHasArtifacts(), is(true)); ","183","        assertThat(\"we have artifacts in run3\", run3.getHasArtifacts(), is(true));","184","        sync.release(run2.getNumber());","185","        futureRun2.get();","186","        assertThat(\"we have released run2's guard\", run2.isBuilding(), is(false));","187","        assertThat(\"we haven't released run3's guard\", run3.isBuilding(), is(true));","188","        assertThat(\"we have no artifacts in run1\", run1.getHasArtifacts(), is(false));","189","        assertThat(\"run2 is last stable build\", p.getLastStableBuild(), is(run2));","190","        assertThat(\"run2 is last successful build\", p.getLastSuccessfulBuild(), is(run2));","191","        assertThat(\"we have artifacts in run2\", run2.getHasArtifacts(), is(true));","192","        assertThat(\"we have artifacts in run3\", run3.getHasArtifacts(), is(true));","193","        sync.release(run3.getNumber());","194","        futureRun3.get();","195","        assertThat(\"we have released run3's guard\", run3.isBuilding(), is(false));","196","        assertThat(\"we have no artifacts in run1\", run1.getHasArtifacts(), is(false));","197","        assertThat(\"we have no artifacts in run2\", run2.getHasArtifacts(), is(false));","198","        assertThat(\"run3 is last stable build\", p.getLastStableBuild(), is(run3));","199","        assertThat(\"run3 is last successful build\", p.getLastSuccessfulBuild(), is(run3));","200","        assertThat(\"we have artifacts in run3\", run3.getHasArtifacts(), is(true));","201","    }","229","    ","230","    static class StallBuilder extends TestBuilder {","231","        ","232","        private int syncBuildNumber;","233","        ","234","        private final Object syncLock = new Object();","235","        ","236","        private int waitBuildNumber;","237","        ","238","        private final Object waitLock = new Object();","239","        ","240","        private final ArtifactArchiver archiver = new ArtifactArchiver(\"f\");","241","","242","        public @Override boolean perform(AbstractBuild<?,?> build, Launcher launcher, BuildListener listener)","243","                throws IOException, InterruptedException {","244","            archiver.perform(build, launcher, listener);","245","            Logger.getAnonymousLogger().log(Level.INFO, \"Building #{0}\", build.getNumber());","246","            synchronized (waitLock) {","247","                if (waitBuildNumber < build.getNumber()) {","248","                    waitBuildNumber = build.getNumber();","249","                    waitLock.notifyAll();","250","                }","251","            }","252","            Logger.getAnonymousLogger().log(Level.INFO, \"Waiting #{0}\", build.getNumber());","253","            synchronized (syncLock) {","254","                while (build.getNumber() > syncBuildNumber) {","255","                    try {","256","                        syncLock.wait(10);","257","                    } catch (InterruptedException e) {","258","                        e.printStackTrace(listener.fatalError(\"Interrupted: %s\", e.getMessage()));","259","                        return false;","260","                    }","261","                }","262","            }","263","            Logger.getAnonymousLogger().log(Level.INFO, \"Done #{0}\", build.getNumber());","264","            return true;","265","        }","266","        ","267","        public void release(int upToBuildNumber) {","268","            synchronized (syncLock) {","269","                if (syncBuildNumber < upToBuildNumber) {","270","                    Logger.getAnonymousLogger().log(Level.INFO, \"Signal #{0}\", upToBuildNumber);","271","                    syncBuildNumber = upToBuildNumber;","272","                    syncLock.notifyAll();","273","                }","274","            }","275","        }","276","        ","277","        public void waitFor(int buildNumber, long timeout, TimeUnit units) throws TimeoutException,","278","                InterruptedException {","279","            long giveUp = System.nanoTime() + units.toNanos(timeout);","280","            synchronized (waitLock) {","281","                while (waitBuildNumber < buildNumber) {","282","                    long remaining = giveUp - System.nanoTime();","283","                    if (remaining < 0) {","284","                        throw new TimeoutException();","285","                    }","286","                    waitLock.wait(remaining\/1000000L, (int)(remaining%1000000L));","287","                }","288","            }","289","        }","290","","291","        public BuildStepMonitor getRequiredMonitorService() {","292","            return BuildStepMonitor.NONE;","293","        }","294","","295","    }"],"delete":[]}]}},"5f4fdb0b7d5c2cbfd6699fb53cde2fbe2fa260cc":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["69","  <li class=bug>","70","    NOT_BUILT &amp; other build status are reported inconsistently","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11013\">issue 11013<\/a>)"],"delete":[]}]}},"680649f6b5ee8d565645c0e3727fe731a40c5a92":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"changelog.html":[{"add":["58","  <li class=bug>","59","    Detect bugs relating to short <code>Descriptor<\/code> names early.","60","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14995\">issue 14995<\/a> continued)"],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["1069","     * @throws IllegalArgumentException if a short name was passed which matches multiple IDs (fail fast)","1071","    @SuppressWarnings({\"unchecked\", \"rawtypes\"}) \/\/ too late to fix","1074","        Iterable<Descriptor> descriptors = Iterators.sequence(getExtensionList(Descriptor.class), DescriptorExtensionList.listLegacyInstances());","1075","        for (Descriptor d : descriptors) {","1076","            if (d.getId().equals(id)) {","1078","            }","1080","        Descriptor candidate = null;","1081","        for (Descriptor d : descriptors) {","1082","            String name = d.getId();","1083","            if (name.substring(name.lastIndexOf('.') + 1).equals(id)) {","1084","                if (candidate == null) {","1085","                    candidate = d;","1086","                } else {","1087","                    throw new IllegalArgumentException(id + \" is ambiguous; matches both \" + name + \" and \" + candidate.getId());","1088","                }","1089","            }","1090","        }","1091","        return candidate;"],"delete":["1072","        for( Descriptor d : Iterators.sequence(getExtensionList(Descriptor.class),DescriptorExtensionList.listLegacyInstances()) ) {","1073","            String name = d.getId();","1074","            if(name.equals(id))","1076","            if(name.substring(name.lastIndexOf('.')+1).equals(id))","1077","                return d;","1079","        return null;"]}]}},"f6ac62bfba80093b9cf3957b5055fcce2a15002a":{"changes":{"core\/src\/main\/resources\/hudson\/model\/BuildTimelineWidget\/control.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/BuildTimelineWidget\/control.jelly":[{"add":["41","    var tz = ${(tz.rawOffset + tz.DSTSavings) \/ 3600000};"],"delete":["41","    var tz = ${tz.rawOffset \/ 3600000};"]}]}},"e53bbec6c1a576e70ac75a1d71dc6325069ad4d8":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["117","        for (File child : files)","118","            deleteRecursive(child);"],"delete":["117","        for (File child : files) {","118","            if (child.isDirectory())","119","                deleteContentsRecursive(child);","120","            deleteFile(child);","121","        }"]}]}},"a85572daaec0569f2ec1d441f7ebe2ba513cebba":{"changes":{"core\/src\/main\/java\/hudson\/triggers\/Trigger.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/triggers\/Trigger.java":[{"add":["28","import java.util.Date;","138","            while(new Date().getTime()-cal.getTimeInMillis()>1000) {","139","                LOGGER.fine(\"cron checking \"+cal.getTime().toLocaleString());","141","                try {","142","                    checkTriggers(cal);","143","                } catch (Throwable e) {","144","                    LOGGER.log(Level.WARNING,\"Cron thread throw an exception\",e);","145","                    \/\/ bug in the code. Don't let the thread die.","146","                    e.printStackTrace();","147","                }","148","","149","                cal.add(Calendar.MINUTE,1);"],"delete":["137","            LOGGER.fine(\"cron checking \"+cal.getTime().toLocaleString());","139","            try {","140","                checkTriggers(cal);","141","            } catch (Throwable e) {","142","                LOGGER.log(Level.WARNING,\"Cron thread throw an exception\",e);","143","                \/\/ bug in the code. Don't let the thread die.","144","                e.printStackTrace();","146","","147","            cal.add(Calendar.MINUTE,1);"]}]}},"bcd0b2c72bf8c55b7d4997e142954c149b7d4faa":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["172","        <version>3.14<\/version>"],"delete":["172","        <version>3.13<\/version>"]}]}},"b0a39275cc85b2a3d94ecfba77b1349f86780d09":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/SurefireArchiver.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/SurefireArchiver.java":[{"add":[],"delete":["141","                \/\/allow gc to free some memory","142","                result = null;"]}]}},"3bb39bbf1c1066570ef8a5a0c265befe6b0aec38":{"changes":{"core\/src\/test\/java\/hudson\/model\/RunTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/model\/RunTest.java":[{"add":["27","import hudson.model.Run.Artifact;","28","import java.io.File;","29","import java.io.PrintWriter;","37","import org.junit.Rule;","39","import org.junit.rules.TemporaryFolder;","41","import org.mockito.Mockito;","42","","46","    @Rule public TemporaryFolder tmp = new TemporaryFolder();","47","","139","","140","    @Issue(\"JENKINS-27441\")","141","    @Test","142","    public void getLogReturnsAnEmptyListWhenCalledWith0() throws Exception {","143","        Job j = Mockito.mock(Job.class);","144","        File tempBuildDir = tmp.newFolder();","145","        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);","146","        Run r = new Run(j, 0) {};","147","        File f = r.getLogFile();","148","        f.getParentFile().mkdirs();","149","        PrintWriter w = new PrintWriter(f, \"utf-8\");","150","        w.println(\"dummy\");","151","        w.close();","152","        List<String> logLines = r.getLog(0);","153","        assertTrue(logLines.isEmpty());","154","    }","155",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["1935","        if (maxLines == 0) {","1936","            return logLines;","1937","        }"],"delete":[]}]}},"bb2f8b1bc2471f5b0cf8423bde295ae5813aae99":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/CommandInterpreter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/CommandInterpreter.java":[{"add":["36","                script = ws.createTextTempFile(\"hudson\", getFileExtension(), getContents(), false);"],"delete":["36","                script = ws.createTextTempFile(\"hudson\", getFileExtension(), getContents());"]}]}},"1e9c93a248cd2bfd92fb147d363f193c5dd341b0":{"changes":{"core\/src\/main\/resources\/hudson\/model\/View\/sidepanel_sr.properties":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/View\/sidepanel_sr.properties":[{"add":["22","NewJob=Novo {0}"],"delete":["22","NewJob=Novo {0)"]}],"changelog.html":[{"add":["63","  <li class=\"bug\">","64","    Updated typo in Serbian translation.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13695\">issue 13695<\/a>)"],"delete":[]}]}},"c893750531442c93359f724cabc8909b0bd8ba59":{"changes":{"core\/src\/main\/java\/hudson\/os\/solaris\/ZFSInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/os\/solaris\/ZFSInstaller.java":[{"add":["90","        if(!System.getProperty(\"os.name\").equals(\"SunOS\") || disabled)","426","","427","    \/**","428","     * Escape hatch in case JNI calls fatally crash, like in HUDSON-3733.","429","     *\/","430","    public static boolean disabled = Boolean.getBoolean(ZFSInstaller.class.getName()+\".disabled\");"],"delete":["90","        if(!System.getProperty(\"os.name\").equals(\"SunOS\"))"]}]}},"2c6bf3ad55ac3f5471434899e8ee0916f6606e76":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModule.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModule.java":[{"add":["14","import hudson.model.Job;","76","        disabled = false;"],"delete":["13","import hudson.model.Job;","14","import hudson.model.Node;"]}]}},"29df1717c941eeefd7734a39ce321216bec6eb46":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/EnvVarsInConfigTasksTest.java":"MODIFY","test\/src\/test\/java\/hudson\/tasks\/MavenTest.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Maven.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Maven\/config.jelly":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/EnvVarsInConfigTasksTest.java":[{"add":["147","\t\t\t\t\t      new Maven(\"test\", \"varMaven\", \"pom.xml${\"\r","148","\t\t\t\t\t\t\t+ DUMMY_LOCATION_VARNAME + \"}\", \"\", \"\",\r","149","\t\t\t\t\t\t\tfalse));\r"],"delete":["147","\t\t\t\tnew Maven(\"test\", \"varMaven\", \"pom.xml${\"\r","148","\t\t\t\t\t\t+ DUMMY_LOCATION_VARNAME + \"}\", \"\", \"\"));\r"]}],"test\/src\/test\/java\/hudson\/tasks\/MavenTest.java":[{"add":["67","        p.getBuildersList().add(new Maven(\"a\", null, \"b.pom\", \"c=d\", \"-e\", true));","82","\tassertTrue(m.usesPrivateRepository());"],"delete":["67","        p.getBuildersList().add(new Maven(\"a\", null, \"b.pom\", \"c=d\", \"-e\"));"]}],"core\/src\/main\/java\/hudson\/tasks\/Maven.java":[{"add":["100","    \/**","101","     * If true, the build will use its own local Maven repository","102","     * via \"-Dmaven.repo.local=...\".","103","     * <p>","104","     * This would consume additional disk space, but provides isolation with other builds on the same machine,","105","     * such as mixing SNAPSHOTS. Maven also doesn't try to coordinate the concurrent access to Maven repositories","106","     * from multiple Maven process, so this helps there too.","107","     *","108","     * Identical to logic used in maven-plugin.","109","     *","110","     * @since 1.322","111","     *\/","112","    public boolean usePrivateRepository = false;","113","","118","        this(targets,name,null,null,null,false);","122","    public Maven(String targets,String name, String pom, String properties, String jvmOptions, boolean usePrivateRepository) {","128","\tthis.usePrivateRepository = usePrivateRepository;","135","    public void setUsePrivateRepository(boolean usePrivateRepository) {","136","        this.usePrivateRepository = usePrivateRepository;","137","    }","138","","139","    public boolean usesPrivateRepository() {","140","        return usePrivateRepository;","141","    }","142","","246","\t    if(usesPrivateRepository())","247","\t\targs.add(\"-Dmaven.repo.local=\"+build.getWorkspace().child(\".repository\"));"],"delete":["104","        this(targets,name,null,null,null);","108","    public Maven(String targets,String name, String pom, String properties, String jvmOptions) {"]}],"core\/src\/main\/resources\/hudson\/tasks\/Maven\/config.jelly":[{"add":["48","    <f:entry field=\"usePrivateRepository\" title=\"${%Use private Maven repository}\" help=\"\/plugin\/maven-plugin\/private-repository.html\">","49","      <f:checkbox checked=\"${it.usesPrivateRepository()}\" \/>","50","    <\/f:entry>"],"delete":[]}]}},"6aba618e208c7bca2df8872721e7f7efe5b1cb45":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/test\/AggregatedTestResultPublisher\/TestResultAction\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/test\/AggregatedTestResultPublisher\/TestResultAction\/index.jelly":[{"add":["59","              <a href=\"${rootURL}\/${i.url}\">${i.fullDisplayName}<\/a>"],"delete":["59","              <a href=\"${rootURL}${i.url}\">${i.fullDisplayName}<\/a>"]}]}},"f1a26582c1b25c470989d19b25378cff5c6d2497":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/BuildTrigger.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["1617","                if (buildTrigger.getChildJobs(ap).contains(this))"],"delete":["1617","                if (buildTrigger.getChildProjects(ap).contains(this))"]}],"core\/src\/main\/java\/hudson\/tasks\/BuildTrigger.java":[{"add":["61","import javax.annotation.Nonnull;","64","import jenkins.model.ParameterizedJobMixIn;","155","    \/** @deprecated use {@link #getChildJobs} *\/","156","    @Deprecated","161","    @Deprecated","166","    @SuppressWarnings(\"unchecked\")","167","    @Nonnull","168","    public List<Job<?, ?>> getChildJobs(@Nonnull AbstractProject<?, ?> owner) {","169","        return Items.fromNameList(owner.getParent(), childProjects, (Class<Job<?, ?>>) (Class) Job.class);","170","    }","171","","177","     * @deprecated apparently unused","179","    @Deprecated","196","        List<Job<?, ?>> jobs = new ArrayList<>();","197","        for (Job<?, ?> job : getChildJobs(build.getProject())) {","198","            if (job instanceof AbstractProject) {","199","                continue; \/\/ taken care of by DependencyGraph","200","            }","201","            jobs.add(job);","202","        }","203","        if (!jobs.isEmpty() && build.getResult().isBetterOrEqualTo(threshold)) {","204","            PrintStream logger = listener.getLogger();","205","            for (Job<?, ?> downstream : jobs) {","206","                if (Jenkins.getInstance().getItemByFullName(downstream.getFullName()) != downstream) {","207","                    LOGGER.log(Level.WARNING, \"Running as {0} cannot even see {1} for trigger from {2}\", new Object[] {Jenkins.getAuthentication().getName(), downstream, build.getParent()});","208","                    continue;","209","                }","210","                if (!downstream.hasPermission(Item.BUILD)) {","211","                    listener.getLogger().println(Messages.BuildTrigger_you_have_no_permission_to_build_(ModelHyperlinkNote.encodeTo(downstream)));","212","                    continue;","213","                }","214","                if (!(downstream instanceof ParameterizedJobMixIn.ParameterizedJob)) {","215","                    logger.println(Messages.BuildTrigger_NotBuildable(ModelHyperlinkNote.encodeTo(downstream)));","216","                    continue;","217","                }","218","                ParameterizedJobMixIn.ParameterizedJob<?, ?> pj = (ParameterizedJobMixIn.ParameterizedJob) downstream;","219","                if (pj.isDisabled()) {","220","                    logger.println(Messages.BuildTrigger_Disabled(ModelHyperlinkNote.encodeTo(downstream)));","221","                    continue;","222","                }","223","                if (!downstream.isBuildable()) { \/\/ some other reason; no API to retrieve cause","224","                    logger.println(Messages.BuildTrigger_NotBuildable(ModelHyperlinkNote.encodeTo(downstream)));","225","                    continue;","226","                }","227","                boolean scheduled = pj.scheduleBuild(pj.getQuietPeriod(), new UpstreamCause((Run) build));","228","                if (Jenkins.getInstance().getItemByFullName(downstream.getFullName()) == downstream) {","229","                    String name = ModelHyperlinkNote.encodeTo(downstream);","230","                    if (scheduled) {","231","                        logger.println(Messages.BuildTrigger_Triggering(name));","232","                    } else {","233","                        logger.println(Messages.BuildTrigger_InQueue(name));","234","                    }","235","                }","236","            }","237","        }","326","        for (AbstractProject p : getChildProjects(owner)) \/\/ only care about AbstractProject here","437","                        Job<?, ?> nearest = Items.findNearest(Job.class, projectName, project.getParent());","441","                    if(!(item instanceof ParameterizedJobMixIn.ParameterizedJob))"],"delete":["166","     * Checks if this trigger has the exact same set of children as the given list.","272","        for (AbstractProject p : getChildProjects(owner))","383","                        AbstractProject nearest = AbstractProject.findNearest(projectName,project.getParent());","387","                    if(!(item instanceof AbstractProject))"]}]}},"62a5dddb3c2b00c4602a504ffefd65320cf81915":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["182","        <version>2.62.2<\/version>"],"delete":["182","        <version>2.62<\/version>"]}]}},"0f0c2a7d00c22dc9946c18b20e7f576a20cf8a86":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Run\/KeepLogBuildBadge\/badge.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Run\/KeepLogBuildBadge\/badge.jelly":[{"add":["25","<l:icon class=\"icon-lock icon-sm\" tooltip=\"${%Keep this build forever}:&lt;br\/&gt;${build.whyKeepLog}\" xmlns:l=\"\/lib\/layout\"\/>"],"delete":["25","<l:icon class=\"icon-lock icon-sm\" tooltip=\"${%Keep this build forever}\" xmlns:l=\"\/lib\/layout\"\/>"]}]}},"c7e0b7fd49ddeaf503218503e30915ef4d3cc99e":{"changes":{"debian\/debian\/control":"MODIFY"},"diff":{"debian\/debian\/control":[{"add":["10","Depends: ${shlibs:Depends}, ${misc:Depends}, daemon, adduser, java-virtual-machine, java2-runtime, psmisc"],"delete":["10","Depends: ${shlibs:Depends}, ${misc:Depends}, daemon, adduser, java-virtual-machine, java2-runtime"]}]}},"1623160e6b2f0af1e5e119630c3db648142a653f":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/resources\/hudson\/cli\/Messages.properties":"MODIFY","core\/src\/main\/java\/hudson\/cli\/BuildCommand.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["256","    public synchronized boolean isHoldOffBuildUntilSave() {"],"delete":["256","    protected synchronized boolean isHoldOffBuildUntilSave() {"]}],"core\/src\/main\/resources\/hudson\/cli\/Messages.properties":[{"add":["59","BuildCommand.CLICause.CannotBuildDisabled=\\","60","Cannot build {0} because it is disabled.","61","BuildCommand.CLICause.CannotBuildConfigNotSaved=\\","62","Cannot build {0} because its configuration has not been saved.","63","BuildCommand.CLICause.CannotBuildUnknownReasons=\\","64","Cannot build {0} for unknown reasons."],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/BuildCommand.java":[{"add":["133","        if (!job.isBuildable()) {","134","            String msg = Messages.BuildCommand_CLICause_CannotBuildUnknownReasons(job.getFullDisplayName());","135","            if (job.isDisabled()) {","136","                msg = Messages.BuildCommand_CLICause_CannotBuildDisabled(job.getFullDisplayName());","137","            } else if (job.isHoldOffBuildUntilSave()){","138","                msg = Messages.BuildCommand_CLICause_CannotBuildConfigNotSaved(job.getFullDisplayName());","139","            }","140","            stderr.println(msg);","141","            return -1;","142","        }","144","        QueueTaskFuture<? extends AbstractBuild> f = job.scheduleBuild2(0, new CLICause(Jenkins.getAuthentication().getName()), a);","145","        "],"delete":["133","        QueueTaskFuture<? extends AbstractBuild> f = job.scheduleBuild2(0, new CLICause(Jenkins.getAuthentication().getName()), a);"]}]}},"6a275901d07b69461d6613911b770ee8118b48b7":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","war\/src\/main\/less\/modules\/page-header.less":"MODIFY","core\/src\/main\/resources\/lib\/layout\/pageHeader.jelly":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["2399","        \/\/ copy font style of box to sizer","2400","        var ds = sizer.style;","2401","        ds.fontFamily = getStyle(box, \"fontFamily\");","2402","        ds.fontSize = getStyle(box, \"fontSize\");","2403","        ds.fontStyle = getStyle(box, \"fontStyle\");","2404","        ds.fontWeight = getStyle(box, \"fontWeight\");","2410","        var cssWidth, offsetWidth = sizer.offsetWidth;","2411","        if (offsetWidth > 0) {","2412","            cssWidth = offsetWidth + \"px\";","2413","        } else { \/\/ sizer hidden on small screen, make sure resizing looks OK","2414","            cssWidth =  getStyle(sizer, \"minWidth\");","2415","        }","2417","        comp.firstChild.style.minWidth = \"calc(60px + \" + cssWidth + \")\";","2425","    box.addEventListener(\"input\", updatePos);"],"delete":["2397","    var minW  = $(\"search-box-minWidth\");","2400","        \/\/ make sure all three components have the same font settings","2401","        function copyFontStyle(s,d) {","2402","            var ds = d.style;","2403","            ds.fontFamily = getStyle(s,\"fontFamily\");","2404","            ds.fontSize = getStyle(s,\"fontSize\");","2405","            ds.fontStyle = getStyle(s,\"fontStyle\");","2406","            ds.fontWeight = getStyle(s,\"fontWeight\");","2407","        }","2408","","2409","        copyFontStyle(box,sizer);","2410","        copyFontStyle(box,minW);","2415","        function max(a,b) { if(a>b) return a; else return b; }","2416","","2418","        var w = max(sizer.offsetWidth,minW.offsetWidth);","2420","        comp.style.width = ","2421","        comp.firstChild.style.width = (w+60)+\"px\";","2429","    box.onkeyup = updatePos;"]}],"war\/src\/main\/less\/modules\/page-header.less":[{"add":["206","    white-space: nowrap;","210","    overflow: hidden;","211","    text-overflow: ellipsis;","222","    min-width: 15rem;","223","    max-width: calc(100vw - 500px);"],"delete":["206","    white-space:nowrap;","207","","218","#search-box-minWidth {","219","    position:absolute;","220","    visibility: hidden;","221","    width:15rem;","222","}","223",""]}],"core\/src\/main\/resources\/lib\/layout\/pageHeader.jelly":[{"add":[],"delete":["49","                <!-- this div determines the minimum width -->","50","                <div id=\"search-box-minWidth\"\/>"]}]}},"9054e2211ed62dac944b745099b0361d3962e4ba":{"changes":{"core\/src\/main\/java\/hudson\/model\/ProxyView.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ProxyView.java":[{"add":["94","    public TopLevelItem getItem(String name) {","95","        return getProxiedView().getItem(name);","96","    }","97","","98","    @Override"],"delete":[]}]}},"7322f0c40fa405fa8d71b583bd54bbd503e7e7ea":{"changes":{"test\/src\/test\/java\/jenkins\/model\/ParameterizedJobMixInTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/model\/ParameterizedJobMixInTest.java":[{"add":["27","import hudson.model.Queue;","69","        final int projectQuietPeriodInSeconds = 50;","70","","76","        long triggerTime = System.currentTimeMillis();","78","        Queue.Item item = Jenkins.get().getQueue().getItem(1);","79","        Assert.assertTrue(item instanceof Queue.WaitingItem);","80","        Assert.assertTrue(item.task instanceof FreeStyleProject);","81","","82","        Queue.WaitingItem waitingItem = (Queue.WaitingItem) item;","83","        Assert.assertTrue((waitingItem.timestamp.getTimeInMillis() - triggerTime) > 45000);","84","","85","        Jenkins.get().getQueue().doCancelItem(1);"],"delete":["68","        final int projectQuietPeriodInSeconds = 10;","69","        final int projectQuietPeriodInMillis = projectQuietPeriodInSeconds * 1000;","70","        final int timeToExecuteProject = 5000; \/\/ Time to finish the execution of the job","77","        Assert.assertEquals(0, project.getBuilds().size());","78","        Thread.sleep(projectQuietPeriodInMillis \/ 2);","79","        Assert.assertEquals(0, project.getBuilds().size());","80","        Thread.sleep(projectQuietPeriodInMillis \/ 2 + timeToExecuteProject);","81","        Assert.assertEquals(1, project.getBuilds().size());"]}]}},"04a874ac9572245314208fdeea485383d621fcf6":{"changes":{"test\/src\/test\/java\/hudson\/cli\/DeleteNodeCommandTest.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/DeleteNodeCommand.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/DeleteNodeCommandTest.java":[{"add":["50","        command = new CLICommandInvoker(j, \"delete-node\");"],"delete":["50","        command = new CLICommandInvoker(j, new DeleteNodeCommand());"]}],"core\/src\/main\/java\/hudson\/cli\/DeleteNodeCommand.java":[{"add":["31","import java.nio.file.AccessDeniedException;","80","                node.toComputer().doDoDelete();","81","            } catch (AccessDeniedException e) {","82","                stderr.println(e.getMessage());","83","                errorOccurred = true;","84","                \/\/noinspection UnnecessaryContinue","85","                continue;"],"delete":["79","                try {","80","                    node.checkPermission(Computer.DELETE);","81","                } catch (Exception e) {","82","                    stderr.println(e.getMessage());","83","                    errorOccurred = true;","84","                    continue;","85","                }","86","","87","                jenkins.removeNode(node);"]}]}},"2425a2f7bbd7ef13f55fc8c4c38deb3146f93875":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["105","      <version>1.13<\/version>"],"delete":["105","      <version>1.12<\/version>"]}]}},"a114c693bc61c564232e78c9fffb5de1ef946ea8":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractCIBase.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/executors.jelly":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractCIBase.java":[{"add":["32","import jenkins.model.Jenkins;","119","            \/\/ we always need Computer for the master as a fallback in case there's no other Computer.","120","            if(n.getNumExecutors()>0 || n==Jenkins.getInstance()) {"],"delete":["118","            if(n.getNumExecutors()>0) {"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["136","        assert slave.getNumExecutors()!=0 : \"Computer created with 0 executors\";"],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":[{"add":["107","","108","      <tr>","109","        <th class=\"pane\">#<\/th>","110","        <th class=\"pane\" colspan=\"2\">","111","          <div style=\"margin-right:19px\">","112","            ${%Status}","113","          <\/div>","114","        <\/th>","115","      <\/tr>","116","","119","          <j:if test=\"${computers.size() gt 1 and (c.executors.size()!=0 or c.oneOffExecutors.size()!=0)}\">","120","            <th class=\"pane\" colspan=\"3\">","121","              <local:computerCaption title=\"${c.displayName}\" \/>","122","            <\/th>","123","          <\/j:if>"],"delete":["109","          <j:choose>","110","            <j:when test=\"${c.node==app or computers.size()==1}\">","111","              <th class=\"pane\">#<\/th>","112","              <th class=\"pane\" colspan=\"2\">","113","                <div style=\"margin-right:19px\">","114","                <j:choose>","115","                  <j:when test=\"${empty(app.slaves) or computers.size()==1}\">","116","                    ${%Status}","117","                  <\/j:when>","118","                  <j:otherwise>","119","                    <local:computerCaption title=\"${%Master}\" \/>","120","                  <\/j:otherwise>","121","                <\/j:choose>","122","                <\/div>","123","              <\/th>","124","            <\/j:when>","125","            <j:otherwise>","126","              <th class=\"pane\" colspan=\"3\">","127","                <local:computerCaption title=\"${c.displayName}\" \/>","128","              <\/th>","129","            <\/j:otherwise>","130","          <\/j:choose>"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Flyweight tasks should execute on the master if there's no static","59","    executors available.","60","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7291\">issue 7291<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["34","import hudson.model.Queue.FlyweightTask;","114"," * you won't have a {@link Computer} object for it (except for the master node,","115"," * which always get its {@link Computer} in case we have no static executors and","116"," * we need to run a {@link FlyweightTask} - see JENKINS-7291 for more discussion.)","821","     *","822","     * @since 1.509","824","    protected boolean isAlive() {"],"delete":["113"," * you won't have a {@link Computer} object for it.","166","        assert node.getNumExecutors()!=0 : \"Computer created with 0 executors\";","820","    private boolean isAlive() {"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["68","import hudson.model.Queue.FlyweightTask;","3763","         * Will always keep this guy alive so that it can function as a fallback to","3764","         * execute {@link FlyweightTask}s. See JENKINS-7291.","3765","         *\/","3766","        @Override","3767","        protected boolean isAlive() {","3768","            return true;","3769","        }","3770","","3771","        \/**"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["41","import hudson.matrix.LabelAxis;","42","import hudson.matrix.MatrixRun;","43","import hudson.slaves.DummyCloudImpl;","44","import hudson.slaves.NodeProvisioner;","65","import java.util.Arrays;","66","import java.util.Collections;","69","import java.util.concurrent.TimeUnit;","70","import java.util.concurrent.TimeoutException;","299","    private int INITIALDELAY;","300","    private int RECURRENCEPERIOD;","301","    @Override protected void setUp() throws Exception {","302","        INITIALDELAY = NodeProvisioner.NodeProvisionerInvoker.INITIALDELAY;","303","        NodeProvisioner.NodeProvisionerInvoker.INITIALDELAY = 0;","304","        RECURRENCEPERIOD = NodeProvisioner.NodeProvisionerInvoker.RECURRENCEPERIOD;","305","        NodeProvisioner.NodeProvisionerInvoker.RECURRENCEPERIOD = 10;","306","        super.setUp();","307","    }","308","    @Override protected void tearDown() throws Exception {","309","        super.tearDown();","310","        NodeProvisioner.NodeProvisionerInvoker.INITIALDELAY = INITIALDELAY;","311","        NodeProvisioner.NodeProvisionerInvoker.RECURRENCEPERIOD = RECURRENCEPERIOD;","312","    }","313","    @Bug(7291)","314","    public void testFlyweightTasksWithoutMasterExecutors() throws Exception {","315","        DummyCloudImpl cloud = new DummyCloudImpl(this, 0);","316","        cloud.label = jenkins.getLabel(\"remote\");","317","        jenkins.clouds.add(cloud);","318","        jenkins.setNumExecutors(0);","319","        jenkins.setNodes(Collections.<Node>emptyList());","320","        MatrixProject m = createMatrixProject();","321","        m.setAxes(new AxisList(new LabelAxis(\"label\", Arrays.asList(\"remote\"))));","322","        MatrixBuild build;","323","        try {","324","            build = m.scheduleBuild2(0).get(60, TimeUnit.SECONDS);","325","        } catch (TimeoutException x) {","326","            throw new AssertionError(jenkins.getQueue().getApproximateItemsQuickly().toString(), x);","327","        }","328","        assertBuildStatusSuccess(build);","329","        assertEquals(\"\", build.getBuiltOnStr());","330","        List<MatrixRun> runs = build.getRuns();","331","        assertEquals(1, runs.size());","332","        assertEquals(\"slave0\", runs.get(0).getBuiltOnStr());","333","    }","334",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["1060","            \/\/ Even if master is configured with zero executors, we may need to run a flyweight task like MatrixProject on it.","1061","            hash.add(h, Math.max(h.getNumExecutors()*100, 1));","1063","                hash.add(n, n.getNumExecutors()*100);","1460","            return getClass().getName() + ':' + task + ':' + getWhy();"],"delete":["1060","            hash.add(h, h.getNumExecutors()*100);","1062","                hash.add(n,n.getNumExecutors()*100);","1459","            return getClass().getName()+':'+task.toString();"]}]}},"2e1a115243f22ea3438916f47aed48f5e490e684":{"changes":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":[{"add":["52","            \/\/ record main artifact (if packaging is POM, this doesn't exist)","69","            build.executeAsync(new BuildCallable<Void,IOException>() {","70","                public Void call(MavenBuild build) throws IOException, InterruptedException {","71","                    MavenArtifactRecord mar = new MavenArtifactRecord(build,pomArtifact,mainArtifact,attachedArtifacts);","72","                    build.addAction(mar);","74","                    mar.recordFingerprints();","76","                    \/\/ install files on the master","77","                    if(installed) {\/\/ TODO: find out how to install files on the master","78","                        try {","79","                            mar.install(listener);","80","                        } catch (MavenEmbedderException e) {","81","                            e.printStackTrace(listener.error(hudson.maven.reporters.Messages.MavenArtifactArchiver_FailedToInstallToMaster()));","82","                            build.setResult(Result.FAILURE);","83","                        } catch (ComponentLookupException e) {","84","                            e.printStackTrace(listener.error(Messages.MavenArtifactArchiver_FailedToInstallToMaster()));","85","                            build.setResult(Result.FAILURE);","86","                        } catch (ArtifactInstallationException e) {","87","                            e.printStackTrace(listener.error(Messages.MavenArtifactArchiver_FailedToInstallToMaster()));","88","                            build.setResult(Result.FAILURE);","91","","92","                    return null;","93","                }","94","            });"],"delete":["52","            \/\/ record main artifact","69","            if(mainArtifact!=null || !attachedArtifacts.isEmpty()) {","70","                build.executeAsync(new BuildCallable<Void,IOException>() {","71","                    public Void call(MavenBuild build) throws IOException, InterruptedException {","72","                        MavenArtifactRecord mar = new MavenArtifactRecord(build,pomArtifact,mainArtifact,attachedArtifacts);","73","                        build.addAction(mar);","75","                        mar.recordFingerprints();","77","                        \/\/ install files on the master","78","                        if(installed) {\/\/ TODO: find out how to install files on the master","79","                            try {","80","                                mar.install(listener);","81","                            } catch (MavenEmbedderException e) {","82","                                e.printStackTrace(listener.error(hudson.maven.reporters.Messages.MavenArtifactArchiver_FailedToInstallToMaster()));","83","                                build.setResult(Result.FAILURE);","84","                            } catch (ComponentLookupException e) {","85","                                e.printStackTrace(listener.error(Messages.MavenArtifactArchiver_FailedToInstallToMaster()));","86","                                build.setResult(Result.FAILURE);","87","                            } catch (ArtifactInstallationException e) {","88","                                e.printStackTrace(listener.error(Messages.MavenArtifactArchiver_FailedToInstallToMaster()));","89","                                build.setResult(Result.FAILURE);","90","                            }","92","","93","                        return null;","95","                });","96","            }"]}]}},"a17bd1cbfa674f4050bbf5dc1ca7d4721d7e9302":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/login_lv.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/login_lv.properties":[{"add":["23","Remember\\ me\\ on\\ this\\ computer=Atcer\\u0113ties mani uz \\u0161\\u012B datora","26","signUp=Piesl\\u0113dzies izmantojot formu zem\\u0101k vai <a href=\"signup\">izveido jaunu kontu<\/a>."],"delete":["23","Remember\\ me\\ on\\ this\\ computer=Atcer\\u0113ties manu uz \\u0161\\u012B datora"]}]}},"af20a4dc2b8f96642d948d9d2ed57c9ea65ef0f6":{"changes":{"war\/resources\/help\/tasks\/junit\/report_nl.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_es.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_ja.properties":"MODIFY","war\/resources\/help\/tasks\/junit\/report_fr.html":"MODIFY","war\/resources\/help\/tasks\/junit\/report_ru.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_es.properties":"MODIFY","war\/resources\/help\/tasks\/junit\/report_ja.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_nl.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_tr.properties":"MODIFY","war\/resources\/help\/tasks\/junit\/report_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_nl.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_ja.properties":"MODIFY","war\/resources\/help\/tasks\/junit\/report.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_de.properties":"MODIFY","war\/resources\/help\/tasks\/junit\/report_de.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_ru.properties":"MODIFY","war\/resources\/help\/tasks\/junit\/report_pt_BR.html":"MODIFY"},"diff":{"war\/resources\/help\/tasks\/junit\/report_nl.html":[{"add":["10","  pad naar de Junit XML bestanden, volgens de <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">","16","  gelijkaardigs aan <a href=\"http:\/\/hudson-ci.org\/screenshots\/5.png\">het volgende<\/a> moeten zien.","17","<\/div>"],"delete":["10","  pad naar de Junit XML bestanden, volgens de <a href=\"http:\/\/ant.apache.org\/manual\/CoreTypes\/fileset.html\">","16","  gelijkaardigs aan <a href=\"https:\/\/hudson.dev.java.net\/screenshots\/5.png\">het volgende<\/a> moeten zien.","17","<\/div>"]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_fr.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","24","     Voir le format exact des <a href=\"{0}\">@includes des filesets Ants<\/a>. \\","25","     Le r\\u00E9pertoire de base est le <a href=\"ws\/\">r\\u00E9pertoire de travail (workspace)<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","24","     Voir le format exact des <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''> \\","25","     @includes des filesets Ants<\/a>. \\","26","     Le r\\u00E9pertoire de base est le <a href=''ws\/''>r\\u00E9pertoire de travail (workspace)<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_pt_BR.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Reginaldo L. Russinholi","23","     Veja o <a href=\"{0}\">Fileset @includes do Ant<\/a> para o formato exato. \\","24","     O diret\\u00F3rio base \\u00E9 <a href=\"ws\/\">o workspace<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Reginaldo L. Russinholi","23","     Veja <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''> \\","24","     o Fileset @includes do Ant<\/a> para o formato exato. \\","25","     O diret\\u00F3rio base \\u00E9 <a href=''ws\/''>o workspace<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_de.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Simon Wiest","25","  Das genaue Format k\\u00F6nnen Sie der <a href=\"{0}\"> \\","26","  Spezifikation f\\u00FCr @includes eines Ant-Filesets<\/a> entnehmen. \\","27","  Das Ausgangsverzeichnis ist der <a href=\"ws\/\">Arbeitsbereich<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Simon Wiest","25","  Das genaue Format k\\u00F6nnen Sie <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''> \\","26","  der Spezifikation f\\u00FCr @includes eines Ant-Filesets<\/a> entnehmen. \\","27","  Das Ausgangsverzeichnis ist der <a href=''ws\/''>Arbeitsbereich<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_es.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","23","  <a href=\"{0}\">El atributo ''@includes'' de la etiqueta ''fileset'' <\/a> \\","25","  El directorio base para la etiqueta ''fileset'' es el directorio <a href=\"ws\/\">ra\\u00EDz<\/a> del proyecto "],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","23","  <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''>El atributo ''@includes'' de la etiqueta ''fileset'' <\/a> \\","25","  El directorio base para la etiqueta ''fileset'' es el directorio <a href=''ws\/''>ra\\u00EDz<\/a> del proyecto "]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_ja.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi","24","<a href=\"{0}\">Ant\\u306e\\u30d5\\u30a1\\u30a4\\u30eb\\u30bb\\u30c3\\u30c8includes\\u5c5e\\u6027\\u306e\\u66f8\\u5f0f<\/a>\\u306b\\u5f93\\u3063\\u3066\\u30d3\\u30eb\\u30c9\\u304b\\u3089\\u751f\\u6210\\u3055\\u308c\\u308bXML\\u30ec\\u30dd\\u30fc\\u30c8\\u30d5\\u30a1\\u30a4\\u30eb\\u7fa4\\u3092\\u6307\\u5b9a\\u3057\\u307e\\u3059\\uff08\\u4f8b\\uff1amyproject\/target\/test-reports\/*.xml\\uff09\\u3002<a href=\"ws\/\">\\u30ef\\u30fc\\u30af\\u30b9\\u30da\\u30fc\\u30b9\\u30eb\\u30fc\\u30c8<\/a>\\u304b\\u3089\\u306e\\u76f8\\u5bfe\\u30d1\\u30b9\\u3067\\u3059\\u3002"],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","24","<a href='http:\/\/ant.apache.org\/manual\/Types\/fileset.html'>Ant\\u306e\\u30d5\\u30a1\\u30a4\\u30eb\\u30bb\\u30c3\\u30c8includes\\u5c5e\\u6027\\u306e\\u66f8\\u5f0f<\/a>\\u306b\\u5f93\\u3063\\u3066\\u30d3\\u30eb\\u30c9\\u304b\\u3089\\u751f\\u6210\\u3055\\u308c\\u308bXML\\u30ec\\u30dd\\u30fc\\u30c8\\u30d5\\u30a1\\u30a4\\u30eb\\u7fa4\\u3092\\u6307\\u5b9a\\u3057\\u307e\\u3059\\uff08\\u4f8b\\uff1amyproject\/target\/test-reports\/*.xml\\uff09\\u3002<a href='ws\/'>\\u30ef\\u30fc\\u30af\\u30b9\\u30da\\u30fc\\u30b9\\u30eb\\u30fc\\u30c8<\/a>\\u304b\\u3089\\u306e\\u76f8\\u5bfe\\u30d1\\u30b9\\u3067\\u3059\\u3002"]}],"war\/resources\/help\/tasks\/junit\/report_fr.html":[{"add":["12","  <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">","21","  <a href=\"http:\/\/hudson-ci.org\/screenshots\/5.png\">comme a<\/a>.","22","<\/div>"],"delete":["12","  <a href=\"http:\/\/ant.apache.org\/manual\/CoreTypes\/fileset.html\">","21","  <a href=\"https:\/\/hudson.dev.java.net\/screenshots\/5.png\">comme a<\/a>.","22","<\/div>"]}],"war\/resources\/help\/tasks\/junit\/report_ru.html":[{"add":["8","  <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">?????????? Ant<\/a>,","13","  ???-?? ????? <a href=\"http:\/\/hudson-ci.org\/screenshots\/5.png\">?????<\/a>.","14","<\/div>"],"delete":["8","  <a href=\"http:\/\/ant.apache.org\/manual\/CoreTypes\/fileset.html\">?????????? Ant<\/a>,","13","  ???-?? ????? <a href=\"https:\/\/hudson.dev.java.net\/screenshots\/5.png\">?????<\/a>.","14","<\/div>"]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","23","     See the <a href=\"{0}\">@includes of Ant fileset<\/a> for the exact format. \\","24","     The base directory is <a href=\"ws\/\">the workspace<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","23","     See <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''> \\","24","     the @includes of Ant fileset<\/a> for the exact format. \\","25","     The base directory is <a href=''ws\/''>the workspace<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_fr.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","24","Une configuration du type <a href=\"{0}\">Fileset ''includes''<\/a> \\","27","Le r\\u00E9pertoire de base (basedir) du fileset est <a href=\"ws\/\">la racine du workspace<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","24","Une configuration du type <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''>Fileset ''includes''<\/a> \\","27","Le r\\u00E9pertoire de base (basedir) du fileset est <a href=''ws\/''>la racine du workspace<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_tr.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Oguz Dag","23","#description=a\\u00e7\\u0131klama"],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Oguz Dag","23","description=a\\u00e7\\u0131klama"]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_es.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","23","     Echa un vistazo al <a href=\"{0}\"> \\","25","     El directorio base es <a href=\"ws\/\">el workspace<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","23","     Echa un vistazo al  <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''> \\","25","     El directorio base es <a href=''ws\/''>el workspace<\/a>."]}],"war\/resources\/help\/tasks\/junit\/report_ja.html":[{"add":["8","  <a href=\"http:\/\/www.jajakarta.org\/ant\/ant-1.6.1\/docs\/ja\/manual\/Types\/fileset.html\">Ant?glob????<\/a>?","14","  <a href=\"http:\/\/hudson-ci.org\/screenshots\/5.png\">??<\/a>??????????????","15","<\/div>"],"delete":["8","  <a href=\"http:\/\/www.jajakarta.org\/ant\/ant-1.6.1\/docs\/ja\/manual\/CoreTypes\/fileset.html\">Ant?glob????<\/a>?","14","  <a href=\"https:\/\/hudson.dev.java.net\/screenshots\/5.png\">??<\/a>??????????????","15","<\/div>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_nl.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:sorokh","23","<a href=\"{0}\">Fileset ''includes''<\/a> \\","25","such as ''myproject\/target\/test-reports\/*.xml''. \\","26","Basedir of the fileset is <a href=\"ws\/\">the workspace root<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:sorokh","23","<a href='http:\/\/ant.apache.org\/manual\/Types\/fileset.html'>Fileset 'includes'<\/a> \\","25","such as 'myproject\/target\/test-reports\/*.xml'. \\","26","Basedir of the fileset is <a href='ws\/'>the workspace root<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config.jelly":[{"add":["26","    description=\"${%description('http:\/\/ant.apache.org\/manual\/Types\/fileset.html')}\">"],"delete":["26","    description=\"${%description}\">"]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_tr.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Oguz Dag","23","#description=a\\u00e7\\u0131klama"],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Oguz Dag","23","description=a\\u00e7\\u0131klama"]}],"war\/resources\/help\/tasks\/junit\/report_tr.html":[{"add":["9","  daha sonra <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">Ant'&#305;n fileset sentaks&#305;nda<\/a>","15","  Bir ka&#231; test &#231;al&#305;&#351;t&#305;r&#305;p, test sonu&#231;lar&#305;n&#305; ald&#305;&#287;&#305;n&#305;zda, <a href=\"http:\/\/hudson-ci.org\/screenshots\/5.png\">bu linkteki<\/a>","17","<\/div>"],"delete":["9","  daha sonra <a href=\"http:\/\/ant.apache.org\/manual\/CoreTypes\/fileset.html\">Ant'&#305;n fileset sentaks&#305;nda<\/a>","15","  Bir ka&#231; test &#231;al&#305;&#351;t&#305;r&#305;p, test sonu&#231;lar&#305;n&#305; ald&#305;&#287;&#305;n&#305;zda, <a href=\"https:\/\/hudson.dev.java.net\/screenshots\/5.png\">bu linkteki<\/a>","17","<\/div>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","23","<a href=\"{0}\">Fileset ''includes''<\/a> \\","26","Basedir of the fileset is <a href=\"ws\/\">the workspace root<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant","23","<a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''>Fileset ''includes''<\/a> \\","26","Basedir of the fileset is <a href=''ws\/''>the workspace root<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_ru.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Mike Salnikov","24","     \\u041f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435 \\u0441\\u043c\\u043e\\u0442\\u0440\\u0438\\u0442\\u0435 <a href=\"{0}\"> \\","26","     \\u0411\\u0430\\u0437\\u043e\\u0432\\u043e\\u0439 \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0435\\u0439 \\u0434\\u043b\\u044f \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d\\u043e\\u0432 \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f <a href=\"ws\/\">\\u0440\\u0430\\u0431\\u043e\\u0447\\u0430\\u044f \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u044f<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Mike Salnikov","24","     \\u041f\\u043e\\u0434\\u0440\\u043e\\u0431\\u043d\\u0435\\u0435 \\u0441\\u043c\\u043e\\u0442\\u0440\\u0438\\u0442\\u0435 <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''> \\","26","     \\u0411\\u0430\\u0437\\u043e\\u0432\\u043e\\u0439 \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0435\\u0439 \\u0434\\u043b\\u044f \\u0448\\u0430\\u0431\\u043b\\u043e\\u043d\\u043e\\u0432 \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f <a href=''ws\/''>\\u0440\\u0430\\u0431\\u043e\\u0447\\u0430\\u044f \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u044f<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_nl.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:sorokh","24","     Zie de <a href=\"{0}\">@includes mogelijkheid van Ant bestandsbundels<\/a> voor het correcte \\","26","     De basisfolder is <a href=\"ws\/\">de werkplaats<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:sorokh","24","     Zie <a href='http:\/\/ant.apache.org\/manual\/Types\/fileset.html'> \\","25","     de @includes mogelijkheid van Ant bestandsbundels<\/a> voor het correcte \\","27","     De basisfolder is <a href='ws\/'>de werkplaats<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config_ja.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Seiji Sogabe","23","description=\\u8a18\\u9332\\u3057\\u305f\\u3044\\u30d5\\u30a1\\u30a4\\u30eb\\u306e\\u30d1\\u30bf\\u30fc\\u30f3\\u3092<a href=\"{0}\">Ant fileset includes\\u5c5e\\u6027<\/a>\\u306e\\u66f8\\u5f0f\\u3067\\uff08\\u30d9\\u30fc\\u30b9\\u30c7\\u30a3\\u30ec\\u30af\\u30c8\\u30ea\\u306f<a href=\"ws\/\">\\u30ef\\u30fc\\u30af\\u30b9\\u30da\\u30fc\\u30b9\\u30eb\\u30fc\\u30c8<\/a>\\uff09\\u3002\\u4f8b\\uff1amodule\/dist\/**\/*.zip"],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Seiji Sogabe","23","description=\\u8a18\\u9332\\u3057\\u305f\\u3044\\u30d5\\u30a1\\u30a4\\u30eb\\u306e\\u30d1\\u30bf\\u30fc\\u30f3\\u3092<a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">Ant fileset includes\\u5c5e\\u6027<\/a>\\u306e\\u66f8\\u5f0f\\u3067\\uff08\\u30d9\\u30fc\\u30b9\\u30c7\\u30a3\\u30ec\\u30af\\u30c8\\u30ea\\u306f<a href=\"ws\/\">\\u30ef\\u30fc\\u30af\\u30b9\\u30da\\u30fc\\u30b9\\u30eb\\u30fc\\u30c8<\/a>\\uff09\\u3002\\u4f8b\\uff1amodule\/dist\/**\/*.zip"]}],"war\/resources\/help\/tasks\/junit\/report.html":[{"add":["8","  specify the path to JUnit XML files in the","9","  <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">Ant glob syntax<\/a>,","15","  something like <a href=\"http:\/\/hudson-ci.org\/screenshots\/5.png\">this<\/a>.","16","<\/div>"],"delete":["8","  specify the path to JUnit XML files in","9","  <a href=\"http:\/\/ant.apache.org\/manual\/CoreTypes\/fileset.html\">the Ant glob syntax<\/a>,","15","  something like <a href=\"https:\/\/hudson.dev.java.net\/screenshots\/5.png\">this<\/a>.","16","<\/div>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_de.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Simon Wiest","25","  Das genaue Format k\\u00F6nnen Sie <a href=\"{0}\"> \\","27","  Das Ausgangsverzeichnis ist der <a href=\"ws\/\">Arbeitsbereich<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Simon Wiest","25","  Das genaue Format k\\u00F6nnen Sie <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''> \\","27","  Das Ausgangsverzeichnis ist der <a href=''ws\/''>Arbeitsbereich<\/a>."]}],"war\/resources\/help\/tasks\/junit\/report_de.html":[{"add":["11","  in der <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">Ant glob-Syntax<\/a>,","18","  <a href=\"http:\/\/hudson-ci.org\/screenshots\/5.png\"> diese<\/a> sehen.","19","<\/div>"],"delete":["11","  in der <a href=\"http:\/\/ant.apache.org\/manual\/CoreTypes\/fileset.html\">Ant glob-Syntax<\/a>,","18","  <a href=\"https:\/\/hudson.dev.java.net\/screenshots\/5.png\"> diese<\/a> sehen.","19","<\/div>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config.jelly":[{"add":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Tom Huybrechts","26","\t<f:entry title=\"${%Test report XMLs}\" field=\"testResults\"","27","\t\tdescription=\"${%description('http:\/\/ant.apache.org\/manual\/Types\/fileset.html')}\">","51","<\/j:jelly>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Tom Huybrechts","26","\t<f:entry title=\"${%Test report XMLs}\" description=\"${%description}\"","27","\t\tfield=\"testResults\">","51","<\/j:jelly>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_pt_BR.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Reginaldo L. Russinholi","23","A configura\\u00E7\\u00E3o <a href=\"{0}\">Fileset ''includes''<\/a> \\","26","O diret\\u00F3rio base do fileset \\u00E9 <a href=\"ws\/\">a ra\\u00EDz do workspace<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Reginaldo L. Russinholi","23","A configura\\u00E7\\u00E3o <a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''>Fileset ''includes''<\/a> \\","26","O diret\\u00F3rio base do fileset \\u00E9 <a href=''ws\/''>a ra\\u00EDz do workspace<\/a>."]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config_ru.properties":[{"add":["2","# Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Mike Salnikov","24","<a href=\"{0}\">\\u041d\\u0430\\u0431\\u043e\\u0440 \\u0444\\u0430\\u0439\\u043b\\u043e\\u0432 ''includes''<\/a> \\","27","\\u041a\\u043e\\u0440\\u043d\\u0435\\u0432\\u043e\\u0439 \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0435\\u0439 \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f <a href=\"ws\/\">\\u0441\\u0431\\u043e\\u0440\\u043e\\u0447\\u043d\\u0430\\u044f \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u044f<\/a>."],"delete":["2","# Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Mike Salnikov","24","<a href=''http:\/\/ant.apache.org\/manual\/Types\/fileset.html''>\\u041d\\u0430\\u0431\\u043e\\u0440 \\u0444\\u0430\\u0439\\u043b\\u043e\\u0432 ''includes''<\/a> \\","27","\\u041a\\u043e\\u0440\\u043d\\u0435\\u0432\\u043e\\u0439 \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u0435\\u0439 \\u044f\\u0432\\u043b\\u044f\\u0435\\u0442\\u0441\\u044f <a href=''ws\/''>\\u0441\\u0431\\u043e\\u0440\\u043e\\u0447\\u043d\\u0430\\u044f \\u0434\\u0438\\u0440\\u0435\\u043a\\u0442\\u043e\\u0440\\u0438\\u044f<\/a>."]}],"war\/resources\/help\/tasks\/junit\/report_pt_BR.html":[{"add":["9","  <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">na sintaxe do glbulo do Ant <\/a>,","15","  algo como <a href=\"http:\/\/hudson-ci.org\/screenshots\/5.png\">isto<\/a>.","16","<\/div>"],"delete":["9","  <a href=\"http:\/\/ant.apache.org\/manual\/CoreTypes\/fileset.html\">na sintaxe do glbulo do Ant <\/a>,","15","  algo como <a href=\"https:\/\/hudson.dev.java.net\/screenshots\/5.png\">isto<\/a>.","16","<\/div>"]}]}},"8cad899ee2eb0b05a063f575df91a87d32ade792":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenProcessFactory.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["4","import hudson.FilePath;","253","                    FilePath pom = project.getModuleRoot().child(project.getRootPOM());","257","                        new MavenProcessFactory(project,launcher,envVars,pom.getParent()));","260","                    margs.add(\"-B\").add(\"-f\", pom.getRemote());"],"delete":["255","                        new MavenProcessFactory(project,launcher,envVars));","258","                    margs.add(\"-B\").add(\"-f\",project.getModuleRoot().child(project.getRootPOM()).getRemote());"]}],"core\/src\/main\/java\/hudson\/maven\/MavenProcessFactory.java":[{"add":["43","    \/**","44","     * Optional working directory. Because of the process reuse, we can't always guarantee","45","     * that the returned Maven process has this as the working directory. But for the","46","     * aggregator style build, the process reuse is disabled, so in practice this always works.","47","     *","48","     * Also, Maven is supposed to work correctly regardless of the process current directory,","49","     * so a good behaving maven project shouldn't rely on the current project.","50","     *\/","51","    private final FilePath workDir;","52","","53","    MavenProcessFactory(MavenModuleSet mms, Launcher launcher, Map<String, String> envVars, FilePath workDir) {","57","        this.workDir = workDir;","68","                out, workDir, envVars);"],"delete":["43","    MavenProcessFactory(MavenModuleSet mms, Launcher launcher, Map<String, String> envVars) {","57","                out, null, envVars);"]}],"core\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["348","                new MavenProcessFactory(getParent().getParent(),launcher,envVars,null));"],"delete":["348","                new MavenProcessFactory(getParent().getParent(),launcher,envVars));"]}]}},"5eada311c640663a2dbe40c69a7257e80be9ffca":{"changes":{"core\/src\/main\/java\/hudson\/model\/ComputerSet.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ComputerSet.java":[{"add":["49","import java.util.ArrayList;","391","                List<NodeMonitor> sanitized = new ArrayList<NodeMonitor>();","392","                for (NodeMonitor nm : persisted) {","393","                    try {","394","                        nm.getDescriptor();","395","                        sanitized.add(nm);","396","                    } catch (Throwable e) {","397","                        \/\/ the descriptor didn't load? see JENKINS-15869","398","                    }","399","                }","400","                r.replaceBy(sanitized);"],"delete":["390","                r.replaceBy(persisted.toList());"]}]}},"40f69795a07eb300781b8370dc60ccd19a4508d7":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Job\/buildTimeTrend.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Job\/buildTimeTrend.jelly":[{"add":["29","                  <t:node value=\"${r.builtOn}\"\/>"],"delete":["29","                  <t:node value=\"${t.builtOn}\"\/>"]}]}},"032501dcdfe7a06cbb745786dc0a49b3a6188257":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/ballColorTd.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/ballColorTd.jelly":[{"add":["46","      <j:if test=\"${iconSizeClass==null}\">","47","        <j:choose>","48","          <j:when test=\"${attrs.iconSize!=null}\">","49","            <j:set var=\"iconSizeClass\" value=\"${icons.toNormalizedIconSizeClass(attrs.iconSize)}\"\/>","50","          <\/j:when>","51","          <j:when test=\"${iconSize!=null}\">","52","            <j:set var=\"iconSizeClass\" value=\"${icons.toNormalizedIconSizeClass(iconSize)}\" \/>","53","          <\/j:when>","54","        <\/j:choose>"],"delete":["46","      <j:if test=\"${iconSizeClass==null and attrs.iconSize!=null}\">","47","        <j:set var=\"iconSizeClass\" value=\"${icons.toNormalizedIconSizeClass(attrs.iconSize)}\"\/>"]}]}},"6c04293d45567833d5c37316ec162d44a2249bf4":{"changes":{"core\/src\/main\/java\/hudson\/security\/HudsonPrivateSecurityRealm.java":"MODIFY","test\/src\/test\/java\/hudson\/security\/HudsonPrivateSecurityRealmTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/HudsonPrivateSecurityRealm.java":[{"add":["43","import jenkins.security.SecurityListener;","261","        SecurityListener.fireLoggedIn(u.getId());","262",""],"delete":[]}],"test\/src\/test\/java\/hudson\/security\/HudsonPrivateSecurityRealmTest.java":[{"add":["27","import com.gargoylesoftware.htmlunit.HttpMethod;","28","import com.gargoylesoftware.htmlunit.WebRequest;","29","import com.gargoylesoftware.htmlunit.html.HtmlForm;","31","import com.gargoylesoftware.htmlunit.util.NameValuePair;","33","import hudson.ExtensionList;","40","import java.net.URL;","41","import java.util.ArrayList;","42","import java.util.Arrays;","44","import java.util.List;","45","","51","","52","import jenkins.security.SecurityListener;","53","import org.apache.commons.lang.StringUtils;","54","import org.junit.Before;","60","import org.jvnet.hudson.test.TestExtension;","64","import javax.annotation.Nonnull;","65","","71","    private SpySecurityListenerImpl spySecurityListener;","72","","73","    @Before","74","    public void linkExtension() throws Exception {","75","        spySecurityListener = ExtensionList.lookup(SecurityListener.class).get(SpySecurityListenerImpl.class);","76","    }","77","","285","    @Issue(\"JENKINS-48383\")","286","    @Test","287","    public void selfRegistrationTriggerLoggedIn() throws Exception {","288","        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(true, false, null);","289","        j.jenkins.setSecurityRealm(securityRealm);","290","        j.jenkins.setCrumbIssuer(null);","291","","292","        assertTrue(spySecurityListener.loggedInUsernames.isEmpty());","293","","294","        createFirstAccount(\"admin\");","295","        assertTrue(spySecurityListener.loggedInUsernames.get(0).equals(\"admin\"));","296","","297","        createAccountByAdmin(\"alice\");","298","        \/\/ no new event in such case","299","        assertTrue(spySecurityListener.loggedInUsernames.isEmpty());","300","","301","        selfRegistration(\"bob\");","302","        assertTrue(spySecurityListener.loggedInUsernames.get(0).equals(\"bob\"));","303","    }","304","","305","    private void createFirstAccount(String login) throws Exception {","306","        assertNull(User.getById(login, false));","307","","308","        JenkinsRule.WebClient wc = j.createWebClient();","309","","310","        HudsonPrivateSecurityRealm.SignupInfo info = new HudsonPrivateSecurityRealm.SignupInfo();","311","        info.username = login;","312","        info.password1 = login;","313","        info.password2 = login;","314","        info.fullname = StringUtils.capitalize(login);","315","","316","        WebRequest request = new WebRequest(new URL(wc.getContextPath() + \"securityRealm\/createFirstAccount\"), HttpMethod.POST);","317","        request.setRequestParameters(Arrays.asList(","318","                new NameValuePair(\"username\", login),","319","                new NameValuePair(\"password1\", login),","320","                new NameValuePair(\"password2\", login),","321","                new NameValuePair(\"fullname\", StringUtils.capitalize(login)),","322","                new NameValuePair(\"email\", login + \"@\" + login + \".com\")","323","        ));","324","","325","        HtmlPage p = wc.getPage(request);","326","        assertEquals(200, p.getWebResponse().getStatusCode());","327","        assertTrue(p.getDocumentElement().getElementsByAttribute(\"div\", \"class\", \"error\").isEmpty());","328","","329","        assertNotNull(User.getById(login, false));","330","    }","331","","332","    private void createAccountByAdmin(String login) throws Exception {","333","        \/\/ user should not exist before","334","        assertNull(User.getById(login, false));","335","","336","        JenkinsRule.WebClient wc = j.createWebClient();","337","        wc.login(\"admin\");","338","","339","        spySecurityListener.loggedInUsernames.clear();","340","","341","        HtmlPage page = wc.goTo(\"securityRealm\/addUser\");","342","        HtmlForm form = page.getForms().stream()","343","                .filter(htmlForm -> htmlForm.getActionAttribute().endsWith(\"\/securityRealm\/createAccountByAdmin\"))","344","                .findFirst()","345","                .orElseThrow(() -> new AssertionError(\"Form must be present\"));","346","","347","        form.getInputByName(\"username\").setValueAttribute(login);","348","        form.getInputByName(\"password1\").setValueAttribute(login);","349","        form.getInputByName(\"password2\").setValueAttribute(login);","350","        form.getInputByName(\"fullname\").setValueAttribute(StringUtils.capitalize(login));","351","        form.getInputByName(\"email\").setValueAttribute(login + \"@\" + login + \".com\");","352","","353","        HtmlPage p = j.submit(form);","354","        assertEquals(200, p.getWebResponse().getStatusCode());","355","        assertTrue(p.getDocumentElement().getElementsByAttribute(\"div\", \"class\", \"error\").isEmpty());","356","","357","        assertNotNull(User.getById(login, false));","358","    }","359","","360","    private void selfRegistration(String login) throws Exception {","361","        \/\/ user should not exist before","362","        assertNull(User.getById(login, false));","363","","364","        JenkinsRule.WebClient wc = j.createWebClient();","365","        SignupPage signup = new SignupPage(wc.goTo(\"signup\"));","366","        signup.enterUsername(login);","367","        signup.enterPassword(login);","368","        signup.enterFullName(StringUtils.capitalize(login));","369","        signup.enterEmail(login + \"@\" + login + \".com\");","370","","371","        HtmlPage p = signup.submit(j);","372","        assertEquals(200, p.getWebResponse().getStatusCode());","373","        assertTrue(p.getDocumentElement().getElementsByAttribute(\"div\", \"class\", \"error\").isEmpty());","374","","375","        assertNotNull(User.getById(login, false));","376","    }","377","","378","    @TestExtension","379","    public static class SpySecurityListenerImpl extends SecurityListener {","380","        private List<String> loggedInUsernames = new ArrayList<>();","381","","382","        @Override","383","        protected void loggedIn(@Nonnull String username) {","384","            loggedInUsernames.add(username);","385","        }","386","    }"],"delete":[]}]}},"be1e2bea7e647146920b1f6649687a6b1cca94ed":{"changes":{"test\/src\/test\/java\/hudson\/util\/FormValidationTest.java":"ADD","core\/src\/main\/java\/hudson\/util\/DOSToUnixPathHelper.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/util\/FormValidationTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/util\/DOSToUnixPathHelper.java":[{"add":["67","                    if (checkPrefix(_dir + File.separator + exe, helper))"],"delete":["67","                    if (checkPrefix(_dir + File.pathSeparator + exe, helper))"]}]}},"97f4b5590b87a67e49f8046355a84e59b34b67ab":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["514","      <version>1.6<\/version>"],"delete":["514","      <version>1.5<\/version>"]}]}},"d688c154907d17e75ea31067c8fc2525aa679584":{"changes":{"test\/src\/test\/java\/hudson\/tasks\/MavenTest.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Maven.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/tasks\/MavenTest.java":[{"add":["25","import com.gargoylesoftware.htmlunit.html.HtmlButton;","26","import com.gargoylesoftware.htmlunit.html.HtmlForm;","27","import com.gargoylesoftware.htmlunit.html.HtmlPage;","28","import hudson.EnvVars;","30","import hudson.model.Cause.LegacyCodeCause;","31","import hudson.model.FreeStyleBuild;","33","import hudson.model.JDK;","34","import hudson.model.ParametersAction;","35","import hudson.model.ParametersDefinitionProperty;","36","import hudson.model.PasswordParameterDefinition;","37","import hudson.model.Result;","38","import hudson.model.StringParameterDefinition;","39","import hudson.model.StringParameterValue;","40","import hudson.slaves.EnvironmentVariablesNodeProperty;","41","import hudson.slaves.EnvironmentVariablesNodeProperty.Entry;","42","import hudson.tasks.Maven.MavenInstallation;","43","import hudson.tasks.Maven.MavenInstallation.DescriptorImpl;","44","import hudson.tasks.Maven.MavenInstaller;","45","import hudson.tools.InstallSourceProperty;","46","import hudson.tools.ToolProperty;","47","import hudson.tools.ToolPropertyDescriptor;","48","import hudson.util.DescribableList;","57","import org.jvnet.hudson.test.Issue;","61","import javax.xml.transform.Source;","62","import javax.xml.transform.stream.StreamSource;","63","import java.util.Collections;","64","","65","import static org.junit.Assert.*;","66","","356","","357","    @Issue(\"JENKINS-34138\")","358","    @Test public void checkMavenInstallationEquals() throws Exception {","359","        MavenInstallation maven = ToolInstallations.configureMaven3();","360","        MavenInstallation maven2 = ToolInstallations.configureMaven3();","361","        assertEquals(maven.hashCode(), maven2.hashCode());","362","        assertTrue(maven.equals(maven2));","363","    }","364","","365","    @Issue(\"JENKINS-34138\")","366","    @Test public void checkMavenInstallationNotEquals() throws Exception {","367","        MavenInstallation maven3 = ToolInstallations.configureMaven3();","368","        MavenInstallation maven2 = ToolInstallations.configureDefaultMaven();","369","        assertNotEquals(maven3.hashCode(), maven2.hashCode());","370","        assertFalse(maven3.equals(maven2));","371","    }"],"delete":["32","import hudson.model.JDK;","33","import hudson.model.ParametersDefinitionProperty;","34","import hudson.model.Result;","35","import hudson.model.StringParameterDefinition;","36","import hudson.model.ParametersAction;","37","import hudson.model.StringParameterValue;","38","import hudson.model.Cause.LegacyCodeCause;","39","import hudson.slaves.EnvironmentVariablesNodeProperty;","40","import hudson.slaves.EnvironmentVariablesNodeProperty.Entry;","41","import hudson.tasks.Maven.MavenInstallation;","42","import hudson.tasks.Maven.MavenInstaller;","43","import hudson.tasks.Maven.MavenInstallation.DescriptorImpl;","44","import hudson.tools.ToolProperty;","45","import hudson.tools.ToolPropertyDescriptor;","46","import hudson.tools.InstallSourceProperty;","47","import hudson.util.DescribableList;","48","","49","import java.util.Collections;","50","","51","import javax.xml.transform.Source;","52","import javax.xml.transform.stream.StreamSource;","53","","54","import com.gargoylesoftware.htmlunit.html.HtmlForm;","55","import com.gargoylesoftware.htmlunit.html.HtmlPage;","56","import com.gargoylesoftware.htmlunit.html.HtmlButton;","57","import hudson.EnvVars;","58","import hudson.model.FreeStyleBuild;","59","import hudson.model.PasswordParameterDefinition;","60","import org.jvnet.hudson.test.Issue;","61","import static org.junit.Assert.*;","62",""]}],"core\/src\/main\/java\/hudson\/tasks\/Maven.java":[{"add":["711","","712","        @Override","713","        public boolean equals(final Object o) {","714","            if (this == o) return true;","715","            if (o == null || getClass() != o.getClass()) return false;","716","","717","            final MavenInstallation that = (MavenInstallation) o;","718","","719","            if (getHome() != null ? !getHome().equals(that.getHome()) : that.getHome() != null) return false;","720","            if (getName() != null ? !getName().equals(that.getName()) : that.getName() != null) return false;","721","            return true;","722","        }","723","","724","        @Override","725","        public int hashCode() {","726","            int result = getHome() != null ? getHome().hashCode() : 0;","727","            result = 31 * result + (getName() != null ? getName().hashCode() : 0);","728","            \/\/result = 31 * result + (getProperties() != null ? getProperties().hashCode() : 0);","729","            return result;","730","        }","731",""],"delete":[]}]}},"ef588be4f264b5ba285110f472f031e2bd771c71":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["183","        <version>3.3<\/version>"],"delete":["183","        <version>3.2<\/version>"]}]}},"3aca8358062b8b0961fe0fc53429d29e88c03fee":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/BuildTrigger.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/BuildTrigger.java":[{"add":["179","    \/**","180","     * Correct broken data gracefully (#1537)","181","     *\/","182","    private Object readResolve() {","183","        if(childProjects==null)","184","            return childProjects=\"\";","185","        return this;","186","    }","187",""],"delete":[]}]}},"277539081be9a67cd72056342c11160ceb44dfda":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/LogRotator.java":"MODIFY","war\/resources\/help\/project-config\/log-rotation.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/ArtifactArchiver\/config.jelly":"MODIFY","test\/src\/test\/java\/hudson\/tasks\/ArtifactArchiverTest.java":"ADD","war\/resources\/help\/tasks\/artifactArchiver\/latestOnly.html":"ADD","test\/src\/test\/java\/hudson\/tasks\/LogRotatorTest.java":"ADD","core\/src\/main\/resources\/hudson\/tasks\/ArtifactArchiver\/config.properties":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/LogRotator.java":[{"add":["80","        Run lstb = job.getLastStableBuild();","85","                if(!builds[i].isKeepLog() && builds[i]!=lsb && builds[i]!=lstb)","95","                if(r.getTimestamp().before(cal) && !r.isKeepLog() && r!=lsb && r!=lstb)"],"delete":["84","                if(!builds[i].isKeepLog() && builds[i]!=lsb)","94","                if(r.getTimestamp().before(cal) && !r.isKeepLog() && r!=lsb)"]}],"war\/resources\/help\/project-config\/log-rotation.html":[{"add":["17","  The last stable and last successful build are always kept as well."],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/ArtifactArchiver\/config.jelly":[{"add":["33","    <f:entry title=\"\" help=\"\/help\/tasks\/artifactArchiver\/latestOnly.html\">"],"delete":["33","    <f:entry title=\"\">"]}],"test\/src\/test\/java\/hudson\/tasks\/ArtifactArchiverTest.java":[{"add":[],"delete":[]}],"war\/resources\/help\/tasks\/artifactArchiver\/latestOnly.html":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/tasks\/LogRotatorTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/ArtifactArchiver\/config.properties":[{"add":["22","lastBuildOnly=Discard all but the last successful\/stable artifact to save disk space"],"delete":["22","lastBuildOnly=Discard all but the last successful artifact to save disk space"]}],"core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":[{"add":["119","        return true;","120","    }","122","","123","    public @Override boolean prebuild(AbstractBuild<?, ?> build, BuildListener listener) {","124","        if(latestOnly) {","125","            AbstractBuild<?,?> b = build.getProject().getLastCompletedBuild();","126","            Result bestResultSoFar = Result.NOT_BUILT;","127","            while(b!=null) {","128","                if (b.getResult().isBetterThan(bestResultSoFar)) {","129","                    bestResultSoFar = b.getResult();","130","                } else {","142","                b = b.getPreviousBuild();"],"delete":["119","        if(latestOnly) {","120","            AbstractBuild<?,?> b = p.getLastSuccessfulBuild();","121","            if(b!=null) {","122","                while(true) {","123","                    b = b.getPreviousBuild();","124","                    if(b==null)     break;","139",""]}]}},"a44b31ddbd8beb8d8bf863190f9eb0cf720228fc":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SubversionUpdateEventHandler.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SubversionUpdateEventHandler.java":[{"add":["189","        if(Thread.interrupted())"],"delete":["189","        if(Thread.currentThread().isInterrupted())"]}]}},"890001ba9522f2eb94c152597f4cd20122d535b1":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["72","  <li class=bug>","73","    Rotation of slave agent launch logs is broken for Windows masters.","74","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15408\">issue 15408<\/a>)"],"delete":["165","  <li class=bug>","166","    Rotation of slave agent launch logs is broken for Windows masters.","167","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15408\">issue 15408<\/a>)"]}]}},"c99fc315dddf707dba3a2dea6a048bd76dce4c2e":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":"MODIFY"},"diff":{"changelog.html":[{"add":["67","  <li class=bug>","68","    Fixed a bug in LDAP default root DN inference.","69","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8152\">issue 8152<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":[{"add":["327","            if(a!=null && a.get()!=null) \/\/ this entry is available on Active Directory. See http:\/\/msdn2.microsoft.com\/en-us\/library\/ms684291(VS.85).aspx","328","                return a.get().toString();"],"delete":["327","            if(a!=null) \/\/ this entry is available on Active Directory. See http:\/\/msdn2.microsoft.com\/en-us\/library\/ms684291(VS.85).aspx","328","                return a.toString();"]}]}},"263d587cc3c5c854867a90d60a7e19112ab81f44":{"changes":{"core\/src\/main\/java\/hudson\/util\/SequentialExecutionQueue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/SequentialExecutionQueue.java":[{"add":["32","    private final Set<QueueEntry> inProgress = new HashSet<QueueEntry>();","87","        Set<Runnable> items = new HashSet<Runnable>();","88","        for (QueueEntry entry : inProgress) {","89","            items.add(entry.item);","90","        }","91","        return items;"],"delete":["32","    private final Set<Runnable> inProgress = new HashSet<Runnable>();","87","        return new HashSet<Runnable>(inProgress);"]}]}},"68669be9e75f6536846b984b837b07aeba7bb9d3":{"changes":{"core\/src\/main\/java\/hudson\/matrix\/MatrixProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/matrix\/MatrixProject.java":[{"add":["294","    @Override","295","    public Collection<? extends Job> getAllJobs() {","296","        Set<Job> jobs = new HashSet<Job>(getItems());","297","        jobs.add(this);","298","        return jobs;","299","    }","300",""],"delete":[]}]}},"027d7c682b2d5c5d947a2798a0817871169df4f2":{"changes":{"core\/src\/main\/java\/hudson\/ProxyConfiguration.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ProxyConfiguration.java":[{"add":["112","    private transient Authenticator authenticator;","113","","114","    private transient boolean authCacheSeeded;","115","","135","        this.testUrl = Util.fixEmptyAndTrim(testUrl);","136","        authenticator = new Authenticator() {","137","            @Override","138","            public PasswordAuthentication getPasswordAuthentication() {","139","                String userName = getUserName();","140","                if (getRequestorType() == RequestorType.PROXY && userName != null) {","141","                    return new PasswordAuthentication(userName, getPassword().toCharArray());","142","                }","143","                return null;","144","            }","145","        };","250","            Proxy proxy = p.createProxy(url.getHost());","251","            con = url.openConnection(proxy);","254","                Authenticator.setDefault(p.authenticator);","255","                p.jenkins48775workaround(proxy, url);","272","        if (p == null)","275","        Proxy proxy = p.createProxy(url.getHost());","276","        InputStream is = new RetryableHttpStream(url, proxy);","279","            Authenticator.setDefault(p.authenticator);","280","            p.jenkins48775workaround(proxy, url);","286","    \/**","287","     * If the first URL we try to access with a HTTP proxy is HTTPS then the authentication cache will not have been","288","     * pre-populated, so we try to access at least one HTTP URL before the very first HTTPS url.","289","     * @param proxy","290","     * @param url the actual URL being opened.","291","     *\/","292","    private void jenkins48775workaround(Proxy proxy, URL url) {","293","        if (\"https\".equals(url.getProtocol()) && !authCacheSeeded && proxy != Proxy.NO_PROXY) {","294","            HttpURLConnection preAuth = null;","295","            try {","296","                \/\/ We do not care if there is anything at this URL, all we care is that it is using the proxy","297","                preAuth = (HttpURLConnection) new URL(\"http\", url.getHost(), -1, \"\/\").openConnection(proxy);","298","                preAuth.setRequestMethod(\"HEAD\");","299","                preAuth.connect();","300","            } catch (IOException e) {","301","                \/\/ ignore, this is just a probe we don't care at all","302","            } finally {","303","                if (preAuth != null) {","304","                    preAuth.disconnect();","305","                }","306","            }","307","            authCacheSeeded = true;","308","        } else if (\"https\".equals(url.getProtocol())){","309","            \/\/ if we access any http url using a proxy then the auth cache will have been seeded","310","            authCacheSeeded = authCacheSeeded || proxy != Proxy.NO_PROXY;","311","        }","312","    }","313",""],"delete":["131","        this.testUrl =Util.fixEmptyAndTrim(testUrl);","236","            con = url.openConnection(p.createProxy(url.getHost()));","239","                Authenticator.setDefault(new Authenticator() {","240","                    @Override","241","                    public PasswordAuthentication getPasswordAuthentication() {","242","                        if (getRequestorType()!=RequestorType.PROXY)    return null;","243","                        return new PasswordAuthentication(p.getUserName(),","244","                                p.getPassword().toCharArray());","245","                    }","246","                });","263","        if (p == null) ","266","        InputStream is = new RetryableHttpStream(url, p.createProxy(url.getHost()));","269","            Authenticator.setDefault(new Authenticator() {","270","","271","                @Override","272","                public PasswordAuthentication getPasswordAuthentication() {","273","                    if (getRequestorType() != RequestorType.PROXY) {","274","                        return null;","275","                    }","276","                    return new PasswordAuthentication(p.getUserName(), p.getPassword().toCharArray());","277","                }","278","            });"]}]}},"de4f28558a63381c6f53648aa89960c89eb6c7c0":{"changes":{"test\/src\/test\/java\/hudson\/cli\/ReloadConfigurationCommandTest.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/ReloadConfigurationCommand.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/JenkinsReloadFailed.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/ReloadConfigurationCommandTest.java":[{"add":[],"delete":["175","","176","        \/\/ reload-configuration is performed in a separate thread","177","        \/\/ we have to wait until it finishes","178","        while (!(j.jenkins.servletContext.getAttribute(\"app\") instanceof Jenkins)) {","179","            System.out.println(\"Jenkins reload operation is performing, sleeping 1s...\");","180","            Thread.sleep(1000);","181","        }"]}],"core\/src\/main\/java\/hudson\/cli\/ReloadConfigurationCommand.java":[{"add":["27","import hudson.util.HudsonIsLoading;","28","import hudson.util.JenkinsReloadFailed;","30","import org.kohsuke.stapler.WebApp;","48","        Jenkins j = Jenkins.getInstance();","49","        \/\/ Or perhaps simpler to inline the thread body of doReload?","50","        j.doReload();","51","        Object app;","52","        while ((app = WebApp.get(j.servletContext).getApp()) instanceof HudsonIsLoading) {","53","            Thread.sleep(100);","54","        }","55","        if (app instanceof Jenkins) {","56","            return 0;","57","        } else if (app instanceof JenkinsReloadFailed) {","58","            Throwable t = ((JenkinsReloadFailed) app).cause;","59","            if (t instanceof Exception) {","60","                throw (Exception) t;","61","            } else {","62","                throw new RuntimeException(t);","63","            }","64","        } else {","65","            stderr.println(\"Unexpected status \" + app);","66","            return 1; \/\/ could throw JenkinsReloadFailed.cause if it were not deprecated","67","        }"],"delete":["45","        Jenkins.getActiveInstance().doReload();","46","        return 0;"]}],"core\/src\/main\/java\/hudson\/util\/JenkinsReloadFailed.java":[{"add":["11","    @Restricted(NoExternalUse.class)"],"delete":["11","    @Restricted(NoExternalUse.class) @Deprecated"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["3990","        WebApp.get(servletContext).setApp(new HudsonIsLoading());","4029","        WebApp.get(servletContext).setApp(this);"],"delete":["3990","        servletContext.setAttribute(\"app\", new HudsonIsLoading());","4029","        servletContext.setAttribute(\"app\", this);"]}]}},"b264fa6e6af6df94db8d9eef86a2a650af125079":{"changes":{"core\/src\/main\/java\/hudson\/model\/ViewDescriptor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ViewDescriptor.java":[{"add":["29","import org.kohsuke.accmod.Restricted;","30","import org.kohsuke.accmod.restrictions.DoNotUse;","76","    @Restricted(DoNotUse.class)"],"delete":["70","    @Deprecated","71","    public AutoCompletionCandidates doAutoCompleteCopyNewItemFrom(final String prefix) {","72","        final AutoCompletionCandidates r = new AutoCompletionCandidates();","73","","74","        new ItemVisitor() {","75","            @Override","76","            public void onItemGroup(ItemGroup<?> group) {","77","                \/\/ only dig deep when the path matches what's typed.","78","                \/\/ for example, if 'foo\/bar' is typed, we want to show 'foo\/barcode'","79","                if (prefix.startsWith(group.getFullName()))","80","                    super.onItemGroup(group);","81","            }","82","","83","            @Override","84","            public void onItem(Item i) {","85","                if (i.getFullName().startsWith(prefix)) {","86","                    r.add((i.getFullName()));","87","                    super.onItem(i);","88","                }","89","            }","90","        }.onItemGroup(Jenkins.getInstance());","91","","92","        return r;","93","    }","94",""]}]}},"a7324c9ff342787291a9098135cd73392bd14eca":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["58","    NPE when requesting http:\/\/server\/job\/TEST-START\/description and the description is empty","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10182\">issue 10182<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"08d4da203037c41e6c067f56400080ec4f93122d":{"changes":{"core\/src\/main\/java\/hudson\/scm\/browsers\/ViewSVN.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/browsers\/ViewSVN.java":[{"add":["53","        return new URL(url,\".\"+param().add(\"view=rev\").add(\"rev=\"+changeSet.getRevision()));"],"delete":["53","        return new URL(url,\".\"+param().add(\"view=rev\").add(\"revision=\"+changeSet.getRevision()));"]}]}},"d849df46fad72c3fe65703afb2e59e4af003ff60":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/buildProgressBar.jelly":"MODIFY","war\/resources\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Job\/buildHistoryEntries.jelly":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/progressBar.jelly":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/queue.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/buildProgressBar.jelly":[{"add":["7","  <t:progressBar tooltip=\"Started ${build.timestampString} ago&lt;br&gt; Estimated remaining time: ${build.executor.estimatedRemainingTime}\"","8","                 pos=\"${build.executor.progress}\" href=\"${rootURL}\/${build.url}console\"\/>"],"delete":["7","  <j:set var=\"id\" value=\"${h.generateId()}\"\/>","8","  <t:progressBar id=\"${id}\" pos=\"${build.executor.progress}\" href=\"${rootURL}\/${build.url}console\"\/>","9","  <t:tooltip id=\"${id}\">Started ${build.timestampString} ago&lt;br> Estimated remaining time: ${build.executor.estimatedRemainingTime}<\/t:tooltip>"]}],"war\/resources\/scripts\/hudson-behavior.js":[{"add":["65","\/\/ shared tooltip object","66","var tooltip;","74","  \"BODY\" : function(e) {","75","      tooltip = new YAHOO.widget.Tooltip(\"tt\",{context:[]});","76","  },","77","","201","    },","202","","203","    \/\/ hook up tooltip","204","    \"[tooltip]\" : function(e) {","205","        \/\/ copied from YAHOO.widget.Tooltip.prototype.configContext to efficiently add a new element","206","        var event = YAHOO.util.Event;","207","        event.addListener(e, \"mouseover\", tooltip.onContextMouseOver, tooltip);","208","        event.addListener(e, \"mousemove\", tooltip.onContextMouseMove, tooltip);","209","        event.addListener(e, \"mouseout\", tooltip.onContextMouseOut, tooltip);","210","        e.title = e.getAttribute(\"tooltip\");","356","                var node = div.firstChild;","357","                p.insertBefore(node, next);","358","                Behaviour.applySubtree(node);"],"delete":["340","                p.insertBefore(div.firstChild, next);","388","\/\/ create a tooltip that applies to the element of the specified ID.","389","\/\/ @param text","390","\/\/    HTML text of the tooltip","391","function makeTooltip(id,text) {","392","    new YAHOO.widget.Tooltip(\"tooltip-\"+id, {","393","      context:id,","394","      text:text,","395","      showDelay:500 } );","396","}","397",""]}],"core\/src\/main\/resources\/hudson\/model\/Job\/buildHistoryEntries.jelly":[{"add":["21","      <td nowrap=\"nowrap\" tooltip=\"${pending.why}\">"],"delete":["21","      <td nowrap=\"nowrap\">","23","        <t:tooltip id=\"${id}\">${pending.why}<\/t:tooltip>"]}],"core\/src\/main\/resources\/lib\/hudson\/progressBar.jelly":[{"add":["12","    <j:if test=\"${attrs.tooltip!=null}\">","13","      <x:attribute name=\"tooltip\">${tooltip}<\/x:attribute>","14","    <\/j:if>"],"delete":[]}],"core\/src\/main\/resources\/lib\/hudson\/queue.jelly":[{"add":["31","            <td class=\"pane\" width=\"100%\" tooltip=\"${item.why}\">"],"delete":["31","            <j:set var=\"id\" value=\"${h.generateId()}\"\/>","32","            <td class=\"pane\" width=\"100%\" id=\"${id}\">","36","              <t:tooltip id=\"${id}\">${item.why}<\/t:tooltip>"]}]}},"a900b488b527a25009e3536bc94e945f5fbfe4ad":{"changes":{"core\/src\/test\/java\/hudson\/FunctionsTest.java":"MODIFY","core\/src\/main\/java\/hudson\/Functions.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/FunctionsTest.java":[{"add":["39","import java.util.logging.Level;","40","import java.util.logging.LogRecord;","297","","298","    @Bug(20800)","299","    @Test public void printLogRecordHtml() throws Exception {","300","        LogRecord lr = new LogRecord(Level.INFO, \"Bad input <xml\/>\");","301","        lr.setLoggerName(\"test\");","302","        assertEquals(\"Bad input &lt;xml\/>\\n\", Functions.printLogRecordHtml(lr, null)[3]);","303","    }","304",""],"delete":[]}],"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["447","    @Restricted(NoExternalUse.class)","454","        newParts[3] = Util.xmlEscape(newParts[3]);"],"delete":["137","import org.apache.commons.jelly.JellyException;","146","import org.kohsuke.stapler.MetaClass;","150","import org.kohsuke.stapler.WebApp;","152","import org.kohsuke.stapler.jelly.JellyClassTearOff;","158","import org.kohsuke.accmod.restrictions.DoNotUse;","452","    @Restricted(DoNotUse.class)"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    HTML metacharacters not escaped in log messages.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-20800\">issue 20800<\/a>)"],"delete":["57","  <li class=>"]}]}},"7ab167542adcc1123ce479d4e27501a14b31f32d":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Project\/noWorkspace.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Project\/noWorkspace.jelly":[{"add":["30","        <a href=\"${rootURL}\/${it.url}build\">Run a build<\/a> to have Hudson create a workspace."],"delete":["30","        <a href=\"build\">Run a build<\/a> to have Hudson create a workspace."]}]}},"c2314a9087c09fffa877726b7ce87c0c5b6e1953":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Build.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["613","            buildEnvironments = null;"],"delete":["481","                        buildEnvironments = null;"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["570","            buildEnvironments = null;"],"delete":["557","                buildEnvironments = null;"]}],"core\/src\/main\/java\/hudson\/model\/Build.java":[{"add":["168","            buildEnvironments = null;"],"delete":["148","                buildEnvironments = null;"]}]}},"0e7169603463004beb84c8e4adf72215a4003a89":{"changes":{"core\/src\/main\/java\/hudson\/node_monitors\/DiskSpaceMonitor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/node_monitors\/DiskSpaceMonitor.java":[{"add":["62","            try {","63","                return f.getUsableSpace();","64","            } catch (LinkageError e) {","65","                \/\/ pre-mustang","66","                return null;","67","            }"],"delete":["6","import hudson.model.Descriptor;","63","            return f.getUsableSpace();"]}]}},"c18bb84df15f0ddb2851442c03b9d8d02e0d2d9e":{"changes":{"core\/src\/test\/java\/hudson\/FilePathSEC904Test.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/FilePathSEC904Test.java":[{"add":["139","        assertTrue(workspaceFolder.isDescendant(\"a\/..\/a\/a.txt\"));","140","        assertTrue(workspaceFolder.isDescendant(\"b\/..\/a\/a.txt\"));","142","        assertTrue(workspaceFolder.isDescendant(\".\/b\"));","144","        assertTrue(workspaceFolder.isDescendant(\"b\/_a\/..\/a\/a.txt\"));","199","        assertTrue(workspaceFolder.isDescendant(\"b\\\\_a\\\\a.txt\"));","200","        assertTrue(workspaceFolder.isDescendant(\"b\\\\_a\\\\..\/a\/a.txt\"));","201","        assertTrue(workspaceFolder.isDescendant(\"b\\\\_a\\\\..\\\\a\\\\a.txt\"));","202","        assertTrue(workspaceFolder.isDescendant(\".\\\\b\\\\_a\\\\..\\\\a\\\\a.txt\"));","203","        assertTrue(workspaceFolder.isDescendant(\"b\/_a\/..\/a\/a.txt\"));","204","        assertTrue(workspaceFolder.isDescendant(\".\/b\/_a\/..\/a\/a.txt\"));"],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["3324","                String childUsingFullPathAbs = childUsingFullPath.toAbsolutePath().toString();","3325","                String directChildAbs = directChild.toAbsolutePath().toString();","3326","","3327","                if (childUsingFullPathAbs.length() == directChildAbs.length()) {","3328","                    remainingPath = \"\";","3329","                } else {","3330","                    \/\/ +1 to avoid the last slash","3331","                    remainingPath = childUsingFullPathAbs.substring(directChildAbs.length() + 1);","3332","                }"],"delete":["3324","                Path rel = directChild.toAbsolutePath().relativize(childUsingFullPath.toAbsolutePath());","3325","                remainingPath = rel.toString();"]}]}},"f46e44bbafb6de5c1757f63b8e3447a4743686ec":{"changes":{"test\/src\/test\/groovy\/hudson\/matrix\/MatrixProjectTest.groovy":"MODIFY","core\/src\/main\/java\/hudson\/Functions.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/matrix\/LabelAxis.java":"MODIFY","core\/src\/main\/resources\/hudson\/matrix\/LabelAxis\/config.jelly":"MODIFY"},"diff":{"test\/src\/test\/groovy\/hudson\/matrix\/MatrixProjectTest.groovy":[{"add":["281","","282","    @Bug(9009)","283","    void testTrickyNodeName() {","284","        def names = [ createSlave(\"Sean's Workstation\",null,null), createSlave(\"John\\\"s Workstation\",null,null) ]*.nodeName;","285","        def p = createMatrixProject();","286","        p.setAxes(new AxisList([new LabelAxis(\"label\",names)]));","287","        configRoundtrip(p);","288","","289","        LabelAxis a = p.axes.find(\"label\");","290","        assertEquals(a.values as Set,names as Set);","291","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["540","    public static String htmlAttributeEscape(String text) {","541","        StringBuilder buf = new StringBuilder(text.length()+64);","542","        for( int i=0; i<text.length(); i++ ) {","543","            char ch = text.charAt(i);","544","            if(ch=='<')","545","                buf.append(\"&lt;\");","546","            else","547","            if(ch=='>')","548","                buf.append(\"&gt;\");","549","            else","550","            if(ch=='&')","551","                buf.append(\"&amp;\");","552","            else","553","            if(ch=='\"')","554","                buf.append(\"&quot;\");","555","            else","556","            if(ch=='\\'')","557","                buf.append(\"&#39;\");","558","            else","559","                buf.append(ch);","560","        }","561","        return buf.toString();","562","    }","563",""],"delete":[]}],"changelog.html":[{"add":["69","  <li class=bug>","70","    Fixed a bug in handling ' and \" in matrix build label axis","71","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9009\">issue 9009<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/matrix\/LabelAxis.java":[{"add":["26","import hudson.Functions;","27","import hudson.Util;","29","import hudson.model.labels.LabelAtom;","32","import java.text.MessageFormat;","51","    @Override","52","    public String getValueString() {","53","        return Util.join(getValues(),\"\/\");","54","    }","55","","71","","72","        private String jsstr(String body, Object... args) {","73","            return '\\\"'+Functions.jsStringEscape(String.format(body,args))+'\\\"';","74","        }","75","","76","        public String buildLabelCheckBox(LabelAtom la, LabelAxis instance) {","77","            return jsstr(\"<input type='checkbox' name='values' json='%s' \",","78","                        Functions.htmlAttributeEscape(la.getName()))","79","                   +String.format(\"+has(%s)+\",jsstr(la.getName()))","80","                   +jsstr(\"\/><label class='attach-previous'>%s (%s)<\/label>\",","81","                        la.getName(),la.getDescription());","82","            \/\/ '${h.jsStringEscape('<input type=\"checkbox\" name=\"values\" json=\"'+h.htmlAttributeEscape(l.name)+'\" ')}'+has(\"${h.jsStringEscape(l.name)}\")+'${h.jsStringEscape('\/><label class=\"attach-previous\">'+l.name+' ('+l.description+')<\/label>')}'","83","        }"],"delete":[]}],"core\/src\/main\/resources\/hudson\/matrix\/LabelAxis\/config.jelly":[{"add":["37","        var values = (e.getAttribute(\"values\") || \"\").split(\"\/\");","42","          new YAHOO.widget.TextNode(<j:out value=\"${descriptor.buildLabelCheckBox(l,instance)}\"\/>, ${l.isSelfLabel()?'machines':'labels'}, false);"],"delete":["37","        var values = (e.getAttribute(\"values\") || \"\").split(\/[ \\n]\/);","42","          new YAHOO.widget.TextNode('&lt;input type=\"checkbox\" name=\"values\" json=\"${l.name}\" '+has(\"${l.name}\")+'\/&gt;&lt;label class=\"attach-previous\"&gt;${h.jsStringEscape(l.name)} (${h.jsStringEscape(l.description)})&lt;\/label&gt;', ${l.isSelfLabel()?'machines':'labels'}, false);"]}]}},"0b01182b8dc4aaaf7edba2bbf047b4594441ea35":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["1265","                if (workspaceOffline(lb)) {","1328","    ","1329","    private boolean workspaceOffline(R build) throws IOException, InterruptedException {","1330","        FilePath ws = build.getWorkspace();","1331","        if (ws==null || !ws.exists()) {","1332","            return true;","1333","        }","1334","        ","1335","        Node builtOn = build.getBuiltOn();","1336","        if (builtOn == null) { \/\/ node built-on doesn't exist anymore","1337","            return true;","1338","        }","1339","        ","1340","        if (builtOn.toComputer() == null) { \/\/ node still exists, but has 0 executors - o.s.l.t.","1341","            return true;","1342","        }","1343","        ","1344","        return false;","1345","    }"],"delete":["1265","                if (ws==null || !ws.exists()) {"]}],"changelog.html":[{"add":["71","  <li class=bug>","72","    Fix NPE if node of last build isn't available anymore while polling for SCM changes.","73","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9003\">issue 9003 <\/a>)"],"delete":[]}]}},"1d249b98fb2a70f31b27849898e5d50dd5b018a4":{"changes":{"core\/src\/test\/resources\/hudson\/tasks\/junit\/JENKINS-13214\/27449.xml":"ADD","core\/src\/test\/resources\/hudson\/tasks\/junit\/JENKINS-13214\/27540.xml":"ADD","core\/src\/test\/resources\/hudson\/tasks\/junit\/JENKINS-13214\/29734.xml":"ADD","changelog.html":"MODIFY","core\/src\/test\/java\/hudson\/tasks\/junit\/TestResultTest.java":"MODIFY"},"diff":{"core\/src\/test\/resources\/hudson\/tasks\/junit\/JENKINS-13214\/27449.xml":[{"add":[],"delete":[]}],"core\/src\/test\/resources\/hudson\/tasks\/junit\/JENKINS-13214\/27540.xml":[{"add":[],"delete":[]}],"core\/src\/test\/resources\/hudson\/tasks\/junit\/JENKINS-13214\/29734.xml":[{"add":[],"delete":[]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Fixed: tests with the same name are no longer counted correctly.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13214\">issue 13214<\/a>)","60","    Note that this reopens the bug:","61","    <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12457\">issue 12457<\/a>"],"delete":[]}],"core\/src\/test\/java\/hudson\/tasks\/junit\/TestResultTest.java":[{"add":["28","","30","import java.io.IOException;","37","import org.jvnet.hudson.test.Bug;","38","","39","import com.thoughtworks.xstream.XStream;","40","","42"," * Tests the JUnit result XML file parsing in {@link TestResult}.","101","    ","102","    \/**","103","     * When test methods are parametrized, they can occur multiple times in the testresults XMLs.","104","     * Test that these are counted correctly.","105","     *\/","106","    @Bug(13214)","107","    public void testDuplicateTestMethods() throws IOException, URISyntaxException {","108","        TestResult testResult = new TestResult();","109","        testResult.parse(getDataFile(\"JENKINS-13214\/27449.xml\"));","110","        testResult.parse(getDataFile(\"JENKINS-13214\/27540.xml\"));","111","        testResult.parse(getDataFile(\"JENKINS-13214\/29734.xml\"));","112","        testResult.tally();","113","        ","114","        \/\/ Ideally the suites should be merged as they are logically the same, but that doesn't work, yet","115","        \/\/ See also JENKINS-12457","116","\/\/        Collection<SuiteResult> suites = testResult.getSuites();","117","\/\/        assertEquals(\"Wrong number of test suites\", 1, suites.size());","118","        ","119","","120","        assertEquals(\"Wrong number of test cases\", 3, testResult.getTotalCount());","121","    }"],"delete":["25","import com.thoughtworks.xstream.XStream;"]}]}},"5f1a706201b4d8507dd56e65c65963213d178c60":{"changes":{"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":[{"add":["26","import org.apache.commons.io.IOUtils;","682","        OutputStream o = null;","687","            final OutputStream out = o = new RemoteOutputStream(new FileOutputStream(changelogFile));","725","                    BufferedOutputStream bufferedOutput = new BufferedOutputStream(out);","726","                    task.setDeststream(bufferedOutput);","754","                    } finally {","755","                        bufferedOutput.close();","784","        } finally {","785","            IOUtils.closeQuietly(o);"],"delete":["685","            final OutputStream out = new RemoteOutputStream(new FileOutputStream(changelogFile));","723","                    task.setDeststream(new BufferedOutputStream(out));"]}]}},"2a5786f21b18d58a18d59b0962152b7de801399c":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":[{"add":["56","     * Name of the top-level module. Null until the root module is determined.","283","        if(rootModule==null)    return null;"],"delete":["56","     * Name of the top-level module."]}]}},"257cc238fb89843531b72d387c78b6851d9d1f0c":{"changes":{"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/slave-agent.jnlp.jelly":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","test\/src\/test\/java\/hudson\/slaves\/JNLPLauncherTest.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/slave-agent.jnlp.jelly":[{"add":["48","      <j:set var=\"launcher\" value=\"${it.delegatedLauncher}\"\/>","49","","54","            <j2se version=\"1.8+\" java-vm-args=\"${launcher.vmargs} -Xdebug -Xrunjdwp:transport=dt_socket,server=y,address=${port}\" \/>","57","            <j2se version=\"1.8+\" java-vm-args=\"${launcher.vmargs}\"\/>","66","        <j:if test=\"${launcher.tunnel!=null}\">","68","          <argument>${launcher.tunnel}<\/argument>","70","        <j:if test=\"${not launcher.workDirSettings.disabled}\">","73","            <j:when test=\"${launcher.workDirSettings.useAgentRootDir}\">","77","              <argument>${launcher.workDirSettings.workDirPath}<\/argument>","81","          <argument>${launcher.workDirSettings.internalDir}<\/argument>","82","          <j:if test=\"${launcher.workDirSettings.failIfWorkDirIsMissing}\">"],"delete":["52","            <j2se version=\"1.8+\" java-vm-args=\"${it.launcher.vmargs} -Xdebug -Xrunjdwp:transport=dt_socket,server=y,address=${port}\" \/>","55","            <j2se version=\"1.8+\" java-vm-args=\"${it.launcher.vmargs}\"\/>","64","        <j:if test=\"${it.launcher.tunnel!=null}\">","66","          <argument>${it.launcher.tunnel}<\/argument>","68","        <j:if test=\"${not it.launcher.workDirSettings.disabled}\">","71","            <j:when test=\"${it.launcher.workDirSettings.useAgentRootDir}\">","75","              <argument>${it.launcher.workDirSettings.workDirPath}<\/argument>","79","          <argument>${it.launcher.workDirSettings.internalDir}<\/argument>","80","          <j:if test=\"${it.launcher.workDirSettings.failIfWorkDirIsMissing}\">"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["236","    \/**","237","     * Return the {@code ComputerLauncher} for this SlaveComputer.","238","     * @since 1.312","239","     *\/","244","    \/**","245","     * Return the {@code ComputerLauncher} for this SlaveComputer, strips off","246","     * any {@code DelegatingComputerLauncher}s or {@code ComputerLauncherFilter}s.","247","     * @since 2.83","248","     *\/","249","    public ComputerLauncher getDelegatedLauncher() {","250","        ComputerLauncher l = launcher;","251","        while (true) {","252","            if (l instanceof DelegatingComputerLauncher) {","253","                l = ((DelegatingComputerLauncher) l).getLauncher();","254","            } else if (l instanceof ComputerLauncherFilter) {","255","                l = ((ComputerLauncherFilter) l).getCore();","256","            } else {","257","                break;","258","            }","259","        }","260","        return l;","261","    }","262",""],"delete":[]}],"test\/src\/test\/java\/hudson\/slaves\/JNLPLauncherTest.java":[{"add":["34","import hudson.slaves.DelegatingComputerLauncher;","38","import jenkins.slaves.RemotingWorkDirSettings;","156","    @Test","157","    @Issue(\"JENKINS-47056\")","158","    public void testDelegatingComputerLauncher() throws Exception {","159","        Assume.assumeFalse(\"Skipping JNLPLauncherTest.testDelegatingComputerLauncher because we are running headless\", GraphicsEnvironment.isHeadless());","160","        File workDir = tmpDir.newFolder(\"workDir\");","161","","162","        ComputerLauncher launcher = new JNLPLauncher(\"\", \"\", new RemotingWorkDirSettings(false, workDir.getAbsolutePath(), \"internalDir\", false));","163","        launcher = new DelegatingComputerLauncherImpl(launcher);","164","        Computer c = addTestSlave(launcher);","165","        launchJnlpAndVerify(c, buildJnlpArgs(c));","166","        assertTrue(\"Remoting work dir should have been created\", new File(workDir, \"internalDir\").exists());","167","    }","168","","169","    @Test","170","    @Issue(\"JENKINS-47056\")","171","    public void testComputerLauncherFilter() throws Exception {","172","        Assume.assumeFalse(\"Skipping JNLPLauncherTest.testComputerLauncherFilter because we are running headless\", GraphicsEnvironment.isHeadless());","173","        File workDir = tmpDir.newFolder(\"workDir\");","174","","175","        ComputerLauncher launcher = new JNLPLauncher(\"\", \"\", new RemotingWorkDirSettings(false, workDir.getAbsolutePath(), \"internalDir\", false));","176","        launcher = new ComputerLauncherFilterImpl(launcher);","177","        Computer c = addTestSlave(launcher);","178","        launchJnlpAndVerify(c, buildJnlpArgs(c));","179","        assertTrue(\"Remoting work dir should have been created\", new File(workDir, \"internalDir\").exists());","180","    }","181","","193","    private static class DelegatingComputerLauncherImpl extends DelegatingComputerLauncher {","194","        public DelegatingComputerLauncherImpl(ComputerLauncher launcher) {","195","            super(launcher);","196","        }","197","    }","198","","199","    private static class ComputerLauncherFilterImpl extends ComputerLauncherFilter {","200","        public ComputerLauncherFilterImpl(ComputerLauncher launcher) {","201","            super(launcher);","202","        }","203","    }","204","","211","        args.add(\"-nosecurity\",\"-jnlp\", j.getURL() + \"computer\/\"+c.getName()+\"\/slave-agent.jnlp\");","255","     * Adds a JNLP {@link Slave} to the system and returns it.","257","    private Computer addTestSlave(boolean enableWorkDir) throws Exception {","258","        return addTestSlave(new JNLPLauncher(enableWorkDir));","264","    private Computer addTestSlave(ComputerLauncher launcher) throws Exception {","268","                launcher, RetentionStrategy.INSTANCE, new ArrayList<NodeProperty<?>>()));"],"delete":["171","        args.add(\"-nosecurity\",\"-jnlp\", getJnlpLink(c));","215","     * Determines the link to the .jnlp file.","217","    private String getJnlpLink(Computer c) throws Exception {","218","        HtmlPage p = j.createWebClient().goTo(\"computer\/\"+c.getName()+\"\/\");","219","        String href = ((HtmlAnchor) p.getElementById(\"jnlp-link\")).getHrefAttribute();","220","        href = new URL(new URL(p.getUrl().toExternalForm()),href).toExternalForm();","221","        return href;","227","    private Computer addTestSlave(boolean enableWorkDir) throws Exception {","231","                new JNLPLauncher(enableWorkDir), RetentionStrategy.INSTANCE, new ArrayList<NodeProperty<?>>()));"]}]}},"176ec80ce299fc6286a5acbe56e76661a2461869":{"changes":{"core\/src\/main\/java\/hudson\/security\/WhoAmI.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/WhoAmI.java":[{"add":["64","            return new String[0];","69","        return (String[]) authorities.toArray(new String[authorities.size()]);"],"delete":["64","            return (String[]) authorities.toArray();","69","        return (String[]) authorities.toArray(new String[0]);"]}]}},"240c381bb867873da8dc4984acc199b243aea48e":{"changes":{"core\/src\/test\/java\/hudson\/scheduler\/CronTabEventualityTest.java":"ADD"},"diff":{"core\/src\/test\/java\/hudson\/scheduler\/CronTabEventualityTest.java":[{"add":[],"delete":[]}]}},"02e05ec8ef444c7d74bf12f95caae83c3b44f682":{"changes":{"changelog.html":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class='major bug'>","58","    \"Monitor External Job\" broken since 1.468.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14107\">issue 14107<\/a>)"],"delete":[]}],"war\/pom.xml":[{"add":["288","                  <version>1.1<\/version>"],"delete":["288","                  <version>1.0<\/version>"]}]}},"d3575548bbd39acdbc0f73533f9078d59828b428":{"changes":{"core\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/security\/AccessDeniedHandlerImpl.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/resources\/lib\/layout\/layout.jelly":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["44","    <stapler.version>1.212<\/stapler.version>"],"delete":["44","    <stapler.version>1.211<\/stapler.version>"]}],"core\/src\/main\/java\/hudson\/security\/AccessDeniedHandlerImpl.java":[{"add":["29","import org.kohsuke.stapler.WebApp;","56","        WebApp.get(Jenkins.getInstance().servletContext).getSomeStapler()","57","                .invoke(req,rsp, Jenkins.getInstance(), \"\/accessDenied\");"],"delete":["54","        Stapler stapler = new Stapler();","55","        stapler.init(new ServletConfig() {","56","            public String getServletName() {","57","                return \"Stapler\";","58","            }","60","            public ServletContext getServletContext() {","61","                return Jenkins.getInstance().servletContext;","62","            }","63","","64","            public String getInitParameter(String name) {","65","                return null;","66","            }","67","","68","            public Enumeration getInitParameterNames() {","69","                return new Vector().elements();","70","            }","71","        });","72","","73","        stapler.invoke(req,rsp, Jenkins.getInstance(),\"\/accessDenied\");"]}],"changelog.html":[{"add":["58","    Access denied error results in ERR_CONTENT_DECODING_FAILED on most browsers, masking the root cause.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15437\">issue 15437<\/a>)","60","  <li class=bug>"],"delete":[]}],"core\/src\/main\/resources\/lib\/layout\/layout.jelly":[{"add":["55","<st:setHeader name=\"Expires\" value=\"0\" \/>","56","<st:setHeader name=\"Cache-Control\" value=\"no-cache,must-revalidate\" \/>","57","<st:setHeader name=\"X-Hudson-Theme\" value=\"default\" \/>","73","    <st:setHeader name=\"X-Hudson\" value=\"1.395\"\/>","74","    <st:setHeader name=\"X-Jenkins\" value=\"${servletContext.getAttribute('version')}\"\/>","75","    <st:setHeader name=\"X-Jenkins-Session\" value=\"${app.SESSION_HASH}\"\/>","78","      <st:setHeader name=\"X-Hudson-CLI-Port\" value=\"${app.tcpSlaveAgentListener.port}\"\/>","79","      <st:setHeader name=\"X-Jenkins-CLI-Port\" value=\"${app.tcpSlaveAgentListener.port}\"\/>","80","      <st:setHeader name=\"X-Jenkins-CLI2-Port\" value=\"${app.tcpSlaveAgentListener.port}\"\/>","81","      <st:setHeader name=\"X-Jenkins-CLI-Host\" value=\"${app.tcpSlaveAgentListener.CLI_HOST_NAME}\"\/>"],"delete":["55","<st:header name=\"Expires\" value=\"0\" \/>","56","<st:header name=\"Cache-Control\" value=\"no-cache,must-revalidate\" \/>","57","<st:header name=\"X-Hudson-Theme\" value=\"default\" \/>","73","    <st:header name=\"X-Hudson\" value=\"1.395\"\/>","74","    <st:header name=\"X-Jenkins\" value=\"${servletContext.getAttribute('version')}\"\/>","75","    <st:header name=\"X-Jenkins-Session\" value=\"${app.SESSION_HASH}\"\/>","78","      <st:header name=\"X-Hudson-CLI-Port\" value=\"${app.tcpSlaveAgentListener.port}\"\/>","79","      <st:header name=\"X-Jenkins-CLI-Port\" value=\"${app.tcpSlaveAgentListener.port}\"\/>","80","      <st:header name=\"X-Jenkins-CLI2-Port\" value=\"${app.tcpSlaveAgentListener.port}\"\/>","81","      <st:header name=\"X-Jenkins-CLI-Host\" value=\"${app.tcpSlaveAgentListener.CLI_HOST_NAME}\"\/>"]}]}},"ac3cd3eb217485666596b6f5f4180dbb5d4be099":{"changes":{"core\/src\/main\/java\/hudson\/cli\/ClientAuthenticationCache.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/ClientAuthenticationCacheTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/ClientAuthenticationCache.java":[{"add":["40","    ","112","        Jenkins j = Jenkins.getActiveInstance();","113","        String url = j.getRootUrl();","115","        ","116","        LOGGER.log(Level.WARNING, \"The instance is not configured using a rootUrl, the key that represents your instance will not be stable\");","117","        return j.getLegacyInstanceId();"],"delete":["40","","112","        String url = Jenkins.getActiveInstance().getRootUrl();","114","        return Secret.fromString(\"key\").getEncryptedValue();"]}],"test\/src\/test\/java\/hudson\/cli\/ClientAuthenticationCacheTest.java":[{"add":["114","        assertEquals(r.jenkins.getLegacyInstanceId(), key);","115","    }","116","    ","117","    @Test","118","    @Issue(\"JENKINS-47426\")","119","    public void getPropertyKey_mustBeEquivalentOverTime() throws Exception {","120","        ClientAuthenticationCache cache = new ClientAuthenticationCache(null);","121","","122","        String key1 = cache.getPropertyKey();","123","        String key2 = cache.getPropertyKey();","124","","125","        assertEquals(\"Two calls to the getPropertyKey() must be equivalent over time, with rootUrl\", key1, key2);","126","","127","        JenkinsLocationConfiguration.get().setUrl(null);","128","","129","        key1 = cache.getPropertyKey();","130","        key2 = cache.getPropertyKey();","131","","132","        assertEquals(\"Two calls to the getPropertyKey() must be equivalent over time, without rootUrl\", key1, key2);"],"delete":["114","        assertTrue(key, Secret.decrypt(key) != null);"]}]}},"b8dcc0c083b24722d421515e49f0b37cf6b627e4":{"changes":{"core\/src\/main\/java\/hudson\/matrix\/MatrixRun.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/FreeStyleBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/WorkspaceList.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/FreeStyleProjectTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/FreeStyleProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/matrix\/MatrixRun.java":[{"add":["27","import hudson.slaves.WorkspaceList.Lease;","132","        protected Lease decideWorkspace(Node n, WorkspaceList wsl) throws InterruptedException, IOException {"],"delete":["131","        protected FilePath decideWorkspace(Node n, WorkspaceList wsl) throws InterruptedException, IOException {"]}],"core\/src\/main\/java\/hudson\/model\/FreeStyleBuild.java":[{"add":["27","import hudson.slaves.WorkspaceList.Lease;","51","        protected Lease decideWorkspace(Node n, WorkspaceList wsl) throws IOException, InterruptedException {","54","                \/\/ we allow custom workspaces to be concurrently used between jobs.","55","                return Lease.creadDummyLease(n.createPath(customWorkspace));"],"delete":["50","        protected FilePath decideWorkspace(Node n, WorkspaceList wsl) throws IOException, InterruptedException {","53","                return n.createPath(customWorkspace);"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["953","                    WorkspaceList.Lease lease = l.acquire(ws, !concurrentBuild);","958","                        lease.release();"],"delete":["953","                    l.acquire(ws,!concurrentBuild);","958","                        l.release(ws);"]}],"core\/src\/main\/java\/hudson\/slaves\/WorkspaceList.java":[{"add":["30","import java.util.HashMap;","31","import java.util.Map;","33","import java.util.logging.Logger;","87","    \/**","88","     * Represents a leased workspace that needs to be returned later.","89","     *\/","90","    public static abstract class Lease {","91","        public final FilePath path;","92","","93","        protected Lease(FilePath path) {","94","            this.path = path;","95","        }","96","","97","        \/**","98","         * Releases this lease.","99","         *\/","100","        public abstract void release();","101","","102","        \/**","103","         * Creates a dummy {@link Lease} object that does no-op in the release.","104","         *\/","105","        public static Lease creadDummyLease(FilePath p) {","106","            return new Lease(p) {","107","                public void release() {","108","                    \/\/ noop","109","                }","110","            };","111","        }","112","    }","113","","122","    public synchronized Lease allocate(FilePath base) throws InterruptedException {","135","    public synchronized Lease record(FilePath p) {","140","        return lease(p);","146","    private synchronized void _release(FilePath p) {","159","    public synchronized Lease acquire(FilePath p) throws InterruptedException {","170","    public synchronized Lease acquire(FilePath p, boolean quick) throws InterruptedException {","175","        return lease(p);","176","    }","177","","178","    \/**","179","     * Wraps a path into a valid lease.","180","     *\/","181","    private Lease lease(FilePath p) {","182","        return new Lease(p) {","183","            public void release() {","184","                _release(path);","185","            }","186","        };"],"delete":["26","import hudson.Util;","30","import java.util.HashSet;","31","import java.util.Set;","32","import java.util.Map;","33","import java.util.HashMap;","35","import java.util.logging.Logger;","98","    public synchronized FilePath allocate(FilePath base) throws InterruptedException {","111","    public synchronized FilePath record(FilePath p) {","116","        return p;","122","    public synchronized void release(FilePath p) {","135","    public synchronized FilePath acquire(FilePath p) throws InterruptedException {","146","    public synchronized FilePath acquire(FilePath p, boolean quick) throws InterruptedException {","151","        return p;"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["29","import hudson.slaves.WorkspaceList.Lease;","480","        protected Lease decideWorkspace(Node n, WorkspaceList wsl) throws InterruptedException, IOException {"],"delete":["479","        protected FilePath decideWorkspace(Node n, WorkspaceList wsl) throws InterruptedException, IOException {"]}],"test\/src\/test\/java\/hudson\/model\/FreeStyleProjectTest.java":[{"add":["33","import java.io.File;","96","","97","    \/**","98","     * Custom workspace and concurrent build had a bad interaction.","99","     *\/","100","    @Bug(4206)","101","    public void testCustomWorkspaceAllocation() throws Exception {","102","        FreeStyleProject f = createFreeStyleProject();","103","        File d = createTmpDir();","104","        f.setCustomWorkspace(d.getPath());","105","        assertBuildStatusSuccess(f.scheduleBuild2(0).get());","106","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["31","import hudson.slaves.WorkspaceList.Lease;","319","        protected Lease decideWorkspace(Node n, WorkspaceList wsl) throws InterruptedException, IOException {","334","            final Lease lease = decideWorkspace(node,Computer.currentComputer().getWorkspaceList());","337","                workspace = lease.path.getRemote();","338","                node.getFileSystemProvisioner().prepareWorkspace(AbstractBuild.this,lease.path,listener);","365","                lease.release();"],"delete":["318","        protected FilePath decideWorkspace(Node n, WorkspaceList wsl) throws InterruptedException, IOException {","333","            final FilePath ws = decideWorkspace(node,Computer.currentComputer().getWorkspaceList());","336","                workspace = ws.getRemote();","337","                node.getFileSystemProvisioner().prepareWorkspace(AbstractBuild.this,ws,listener);","364","                Computer.currentComputer().getWorkspaceList().release(ws);"]}],"core\/src\/main\/java\/hudson\/model\/FreeStyleProject.java":[{"add":["43","     * See {@link #setCustomWorkspace(String)}.","67","    \/**","68","     * User-specified workspace directory, or null if it's up to Hudson.","69","     *","70","     * <p>","71","     * Normally a free-style project uses the workspace location assigned by its parent container,","72","     * but sometimes people have builds that have hard-coded paths (which can be only built in","73","     * certain locations. see http:\/\/www.nabble.com\/Customize-Workspace-directory-tt17194310.html for","74","     * one such discussion.)","75","     *","76","     * <p>","77","     * This is not {@link File} because it may have to hold a path representation on another OS.","78","     *","79","     * @since 1.320","80","     *\/","81","    public void setCustomWorkspace(String customWorkspace) throws IOException {","82","        this.customWorkspace= customWorkspace;","83","        save();","84","    }","85",""],"delete":["43","     * User-specified workspace directory, or null if it's up to Hudson.","44","     *","45","     * <p>","46","     * Normally a free-style project uses the workspace location assigned by its parent container,","47","     * but sometimes people have builds that have hard-coded paths (which can be only built in","48","     * certain locations. see http:\/\/www.nabble.com\/Customize-Workspace-directory-tt17194310.html for","49","     * one such discussion.)","50","     *","51","     * <p>","52","     * This is not {@link File} because it may have to hold a path representation on another OS."]}]}},"bdc91654f68145759c1331ab3875b4311386fde8":{"changes":{"test\/src\/test\/java\/hudson\/model\/UserTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/UserTest.java":[{"add":["47","import static org.junit.Assume.*;","230","        assumeFalse(\"was not a problem on a case-insensitive FS to begin with\", new File(j.jenkins.getRootDir(), \"users\/bob\").isDirectory());","235","        assertEquals(\"[bob]\", Arrays.toString(new File(j.jenkins.getRootDir(), \"users\").list()));"],"delete":["233","","234","        \/\/ users\/Bob is what exists in migration.zip, so lowercasing dir list to make sure the test","235","        \/\/ is not case sensitive.","236","        assertEquals(\"[bob]\", Arrays.toString(new File(j.jenkins.getRootDir(), \"users\").list()).toLowerCase());"]}]}},"7aef24d4542738ce309122ea05a3d194e842c8d8":{"changes":{"core\/src\/main\/resources\/hudson\/util\/Messages_es.properties":"MODIFY","core\/src\/main\/resources\/hudson\/util\/Messages.properties":"MODIFY","core\/src\/main\/java\/hudson\/util\/Retrier.java":"ADD","core\/src\/main\/resources\/hudson\/PluginManager\/check.jelly":"MODIFY","core\/src\/test\/java\/hudson\/util\/RetrierTest.java":"ADD","core\/src\/main\/resources\/hudson\/Messages_es.properties":"MODIFY","test\/src\/test\/java\/hudson\/PluginManagerCheckUpdateCenterTest.java":"ADD","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","core\/src\/main\/resources\/hudson\/Messages.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/util\/Messages_es.properties":[{"add":["25","ClockDifference.Failed=Comprobaci\\u00F3n fallida","29","","30","Retrier.Attempt=Intento #{0} para hacer la acci\\u00F3n {1}","31","Retrier.AttemptFailed=El intento #{0} para hacer la acci\\u00F3n {1} fall\\u00F3","32","Retrier.Sleeping=Durmiendo por {0} millisegundos antes de un nuevo intento para la acci\\u00F3n {1}","33","Retrier.Interruption=Los intentos de hacer la acci\\u00F3n {0} han sido interrumpidos","34","Retrier.NoSuccess=Se intent\\u00F3 la acci\\u00F3n {0} por {1} vez(ces) sin \\u00E9xito","35","Retrier.Success=Realizada la acci\\u00F3n {0} con \\u00E9xito en el intento #{1}","36","Retrier.ExceptionThrown=El intento #{0} de hacer la acci\\u00F3n {1} lanz\\u00F3 una excepci\\u00F3n no permitida, relanzando","37","Retrier.ExceptionFailed=El intento #{0} de hacer la acci\\u00F3n {1} fall\\u00F3 con una excepci\\u00F3n permitida:","38","Retrier.CallingListener=Llamando al listener de la excepci\\u00F3n permitida ''{0}'' en el intento #{1} para hacer la acci\\u00F3n {2}"],"delete":["25","ClockDifference.Failed=Comprobacin fallida"]}],"core\/src\/main\/resources\/hudson\/util\/Messages.properties":[{"add":["30","","31","Retrier.Attempt=Attempt #{0} to do the action {1}","32","Retrier.AttemptFailed=The attempt #{0} to do the action {1} failed","33","Retrier.Sleeping=Sleeping for {0} milliseconds before a new attempt for the action {1}","34","Retrier.Interruption=The attempts to do the action {0} have been interrupted","35","Retrier.NoSuccess=Attempted the action {0} for {1} time(s) with no success","36","Retrier.Success=Performed the action {0} successfully at the attempt #{1}","37","Retrier.ExceptionThrown=The attempt #{0} to do the action {1} threw a non-allowed exception, re-throwing","38","Retrier.ExceptionFailed=The attempt #{0} to do the action {1} failed with an allowed exception:","39","Retrier.CallingListener=Calling the listener of the allowed exception ''{0}'' at the attempt #{1} to do the action {2}"],"delete":[]}],"core\/src\/main\/java\/hudson\/util\/Retrier.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/PluginManager\/check.jelly":[{"add":["31","  <j:if test=\"${app.pluginManager.lastErrorCheckUpdateCenters != null}\">","32","    <div class=\"error\">","33","      ${app.pluginManager.lastErrorCheckUpdateCenters}","34","    <\/div>","35","  <\/j:if>"],"delete":["31",""]}],"core\/src\/test\/java\/hudson\/util\/RetrierTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/Messages_es.properties":[{"add":["25","  ''{0}'' no coincide con nada, pero ''{1}'' s\\u00ED. Quizas es lo que quieres decir.","26","FilePath.validateAntFileMask.portionMatchAndSuggest=''{0}'' no coincide con nada aunque ''{1}'' s\\u00ED existe","31","FilePath.validateRelativePath.wildcardNotAllowed=No se permiten caracteres comod\\u00EDn.","41","Util.day   ={0} {0,choice,0#d\\u00EDas|1#d\\u00EDa|1<d\\u00EDas}","43","Util.year  ={0} A\\u00F1o","49","FilePath.TildaDoesntWork=El caracter ''~'' s\\u00F3lo est\\u00E1 soportado en UNIX.","53","PluginManager.PluginDoesntSupportDynamicLoad.RestartRequired=El plugin {0} no soporta la carga din\\u00E1mica, por lo que es necesario reiniciar Jenkins para que los cambios tengan efecto","54","PluginManager.PortNotANumber=El puerto no es un n\\u00FAmero","55","AboutJenkins.Description=Eche un vistazo a la informaci\\u00F3n sobre la versi\\u00F3n y la licencia.","56","PluginManager.PortNotInRange=El puerto no est\\u00E1 en el rango de {0} hasta {1}","58","PluginWrapper.Plugin.Has.Dependant=El plugin {0} tiene, al menos, un plugin dependiente ({1}) y la estrategia de deshabilitaci\\u00F3n es {2}, as\\u00ED que no puede ser deshabilitado","61","PluginManager.CheckUpdateServerError=Hubo errores comprobando los servidores de actualizaciones: {0}","62","PluginManager.UpdateSiteError=Error comprobando los servidores de actualizaciones en {0} intento(s). La \\u00FAltima excepci\\u00F3n fue: {1}","63","PluginManager.UpdateSiteChangeLogLevel=Cambie el nivel de log a WARNING o menos para ver el mensaje de error de cada intento","64","PluginManager.UnexpectedException=Excepci\\u00F3n no esperada en el proceso de reintentos chequeando los servidores de actualizaciones"],"delete":["25","  ''{0}'' no coincide con nada, pero ''{1}'' s. Quizas es lo que quieres decir.","26","FilePath.validateAntFileMask.portionMatchAndSuggest=''{0}'' no coincide con nada aunque ''{1}'' s existe","31","FilePath.validateRelativePath.wildcardNotAllowed=No se permiten caracteres comodn.","41","Util.day   ={0} {0,choice,0#das|1#da|1<das}","43","Util.year  ={0} Ao","49","FilePath.TildaDoesntWork=El caracter ''~'' slo est soportado en UNIX.","53","PluginManager.PluginDoesntSupportDynamicLoad.RestartRequired=El plugin {0} no soporta la carga dinmica, por lo que es necesario reiniciar Jenkins para que los cambios tengan efecto","54","PluginManager.PortNotANumber=El puerto no es un nmero","55","AboutJenkins.Description=Eche un vistazo a la informacin sobre la versin y la licencia.","56","PluginManager.PortNotInRange=El puerto no est en el rango de {0} hasta {1}","58","PluginWrapper.Plugin.Has.Dependant=El plugin {0} tiene, al menos, un plugin dependiente ({1}) y la estrategia de deshabilitacin es {2}, as que no puede ser deshabilitado"]}],"test\/src\/test\/java\/hudson\/PluginManagerCheckUpdateCenterTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["51","import hudson.util.Retrier;","180","    private static final Logger LOGGER = Logger.getLogger(PluginManager.class.getName());","181","","182","    \/**","183","     * Time elapsed between retries to check the updates sites. It's kind of constant, but let it so for tests","184","     *\/","185","    \/* private final *\/ static int CHECK_UPDATE_SLEEP_TIME_MILLIS;","186","","187","    \/**","188","     * Number of attempts to check the updates sites. It's kind of constant, but let it so for tests","189","     *\/","190","    \/* private final *\/ static int CHECK_UPDATE_ATTEMPTS;","191","","192","    static {","193","        try {","194","            \/\/ Secure initialization","195","            CHECK_UPDATE_SLEEP_TIME_MILLIS = SystemProperties.getInteger(PluginManager.class.getName() + \".checkUpdateSleepTimeMillis\", 1000);","196","            CHECK_UPDATE_ATTEMPTS = SystemProperties.getInteger(PluginManager.class.getName() + \".CHECK_UPDATE_ATTEMPTS\", 1);","197","        } catch(Exception e) {","198","            LOGGER.warning(String.format(\"There was an error initializing the PluginManager. Exception: %s\", e));","199","        } finally {","200","            CHECK_UPDATE_ATTEMPTS = CHECK_UPDATE_ATTEMPTS > 0 ? CHECK_UPDATE_ATTEMPTS : 1;","201","            CHECK_UPDATE_SLEEP_TIME_MILLIS = CHECK_UPDATE_SLEEP_TIME_MILLIS > 0 ? CHECK_UPDATE_SLEEP_TIME_MILLIS : 1000;","202","        }","203","    }","204","","295","     * Hold the status of the last try to check update centers. Consumed from the check.jelly to show an","296","     * error message if the last attempt failed.","297","     *\/","298","    private String lastErrorCheckUpdateCenters = null;","299","","300","    \/**","1688","","1689","        \/\/ We'll check the update servers with a try-retry mechanism. The retrier is built with a builder","1690","        Retrier<FormValidation> updateServerRetrier = new Retrier.Builder<>(","1691","                \/\/ the action to perform","1692","                this::checkUpdatesServer,","1693","","1694","                \/\/ the way we know whether this attempt was right or wrong","1695","                (currentAttempt, result) -> result.kind == FormValidation.Kind.OK,","1696","","1697","                \/\/ the action name we are trying to perform","1698","                \"check updates server\")","1699","","1700","                \/\/ the number of attempts to try","1701","                .withAttempts(CHECK_UPDATE_ATTEMPTS)","1702","","1703","                \/\/ the delay between attempts","1704","                .withDelay(CHECK_UPDATE_SLEEP_TIME_MILLIS)","1705","","1706","                \/\/ whatever exception raised is considered as a fail attempt (all exceptions), not a failure","1707","                .withDuringActionExceptions(new Class[] {Exception.class})","1708","","1709","                \/\/ what we do with a failed attempt due to an allowed exception, return an FormValidation.error with the message","1710","                .withDuringActionExceptionListener( (attempt, e) -> FormValidation.errorWithMarkup(e.getClass().getSimpleName() + \": \" + e.getLocalizedMessage()))","1711","","1712","                \/\/ lets get our retrier object","1713","                .build();","1714","","1716","            \/\/ Begin the process","1717","            FormValidation result = updateServerRetrier.start();","1718","","1719","            \/\/ Check how it went","1720","            if (!FormValidation.Kind.OK.equals(result.kind)) {","1721","                LOGGER.log(Level.SEVERE, Messages.PluginManager_UpdateSiteError(CHECK_UPDATE_ATTEMPTS, result.getMessage()));","1722","                if (CHECK_UPDATE_ATTEMPTS > 1 && !Logger.getLogger(Retrier.class.getName()).isLoggable(Level.WARNING)) {","1723","                    LOGGER.log(Level.SEVERE, Messages.PluginManager_UpdateSiteChangeLogLevel(Retrier.class.getName()));","1725","","1726","                lastErrorCheckUpdateCenters = Messages.PluginManager_CheckUpdateServerError(result.getMessage());","1727","            } else {","1728","                lastErrorCheckUpdateCenters = null;","1730","","1731","        } catch (Exception e) {","1732","            \/\/ It's never going to be reached because we declared all Exceptions in the withDuringActionExceptions, so","1733","            \/\/ whatever exception is considered a expected failed attempt and the retries continue","1734","            LOGGER.log(Level.WARNING, Messages.PluginManager_UnexpectedException(), e);","1735","","1736","            \/\/ In order to leave this method as it was, rethrow as IOException","1737","            throw new IOException(e);","1739","","1740","        \/\/ Stay in the same page in any case","1741","        return HttpResponses.forwardToPreviousPage();","1742","    }","1743","","1744","    private FormValidation checkUpdatesServer() throws Exception {","1745","        for (UpdateSite site : Jenkins.get().getUpdateCenter().getSites()) {","1746","            FormValidation v = site.updateDirectlyNow(DownloadService.signatureCheck);","1747","            if (v.kind != FormValidation.Kind.OK) {","1748","                \/\/ Stop with an error","1749","                return v;","1750","            }","1751","        }","1752","        for (DownloadService.Downloadable d : DownloadService.Downloadable.all()) {","1753","            FormValidation v = d.updateNow();","1754","            if (v.kind != FormValidation.Kind.OK) {","1755","                \/\/ Stop with an error","1756","                return v;","1757","            }","1758","        }","1759","        return FormValidation.ok();","1760","    }","1761","","1762","    \/**","1763","     * Returns the last error raised during the update sites checking.","1764","     * @return the last error message","1765","     *\/","1766","    public String getLastErrorCheckUpdateCenters() {","1767","        return lastErrorCheckUpdateCenters;"],"delete":["1657","            for (UpdateSite site : Jenkins.getInstance().getUpdateCenter().getSites()) {","1658","                FormValidation v = site.updateDirectlyNow(DownloadService.signatureCheck);","1659","                if (v.kind != FormValidation.Kind.OK) {","1660","                    \/\/ TODO crude but enough for now","1661","                    return v;","1664","            for (DownloadService.Downloadable d : DownloadService.Downloadable.all()) {","1665","                FormValidation v = d.updateNow();","1666","                if (v.kind != FormValidation.Kind.OK) {","1667","                    return v;","1668","                }","1669","            }","1670","            return HttpResponses.forwardToPreviousPage();","1671","        } catch(RuntimeException ex) {","1672","            throw new IOException(\"Unhandled exception during updates server check\", ex);","1992","","1993","    private static final Logger LOGGER = Logger.getLogger(PluginManager.class.getName());","1994",""]}],"core\/src\/main\/resources\/hudson\/Messages.properties":[{"add":["65","PluginManager.CheckUpdateServerError=There were errors checking the update sites: {0}","66","PluginManager.UpdateSiteError=Error checking update sites for {0} attempt(s). Last exception was: {1}","67","PluginManager.UpdateSiteChangeLogLevel=Change the log level of {0} logger to WARNING or below to see more information and the error message of every attempt","68","PluginManager.UnexpectedException=Unexpected exception going through the retrying process of checking update servers"],"delete":[]}]}},"c718516adfddeb10cbf616ce37c619cc6bbafd53":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["181","        <version>2.60<\/version>"],"delete":["181","        <version>2.59<\/version>"]}]}},"a22c190b4a2e21acf193bc3494bead8b06160721":{"changes":{"core\/src\/main\/resources\/hudson\/model\/ListView\/configure-entries_de.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/ListView\/configure-entries_de.properties":[{"add":["1","Use\\ a\\ regular\\ expression\\ to\\ include\\ jobs\\ into\\ the\\ view=Regulren Ausdruck verwenden, um Jobs fr diese Ansicht auszuwhlen.","2","Regular\\ expression=Regulrer Ausdruck"],"delete":["1","Use\\ a\\ regular\\ expression\\ to\\ include\\ jobs\\ into\\ the\\ view=Regul?ren Ausdruck verwenden, um Jobs f?r diese Ansicht auszuw?hlen.","2","Regular\\ expression=Regul?rer Ausdruck"]}]}},"5dd7b2fe84147cca1dc980c163bd9b075a15e669":{"changes":{"core\/src\/main\/java\/hudson\/security\/AuthorizationMatrixProperty.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/AuthorizationMatrixProperty.java":[{"add":["151","\t\t\treturn null;\r"],"delete":["151","\t\t\treturn false;\r"]}]}},"9a239081e945f9b1d3076bec59266d01f0857f47":{"changes":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["433","    private volatile List<JDK> jdks = new ArrayList<JDK>();","1665","    public List<JDK> getJDKs() {","1678","    public void setJDKs(Collection<? extends JDK> jdks) {"],"delete":["433","    private List<JDK> jdks = new ArrayList<JDK>();","1665","    public synchronized List<JDK> getJDKs() {","1678","    public synchronized void setJDKs(Collection<? extends JDK> jdks) {"]}]}},"30ab4481f286a5c33499489dfcb9b3df6587ff38":{"changes":{"test\/src\/test\/java\/jenkins\/install\/SetupWizardRestartTest.java":"ADD","core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/PluginServletFilter.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/InstallState.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/install\/SetupWizardRestartTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":[{"add":[],"delete":["94","        if (Main.isDevelopmentMode) LOGGER.info(\"Install state transitioning from: \" + prior + \" to: \" + next);"]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["78","    public SetupWizard() {","79","        checkFilter();","80","    }","81","","169","","177","","178","    private void setUpFilter() {","179","        try {","180","            if (!PluginServletFilter.hasFilter(FORCE_SETUP_WIZARD_FILTER)) {","181","                PluginServletFilter.addFilter(FORCE_SETUP_WIZARD_FILTER);","182","            }","183","        } catch (ServletException e) {","184","            throw new RuntimeException(\"Unable to add PluginServletFilter for the SetupWizard\", e);","185","        }","186","    }","187","","188","    private void tearDownFilter() {","189","        try {","190","            if (PluginServletFilter.hasFilter(FORCE_SETUP_WIZARD_FILTER)) {","191","                PluginServletFilter.removeFilter(FORCE_SETUP_WIZARD_FILTER);","192","            }","193","        } catch (ServletException e) {","194","            throw new RuntimeException(\"Unable to remove PluginServletFilter for the SetupWizard\", e);","195","        }","196","    }","197","","201","    @SuppressWarnings(\"unused\") \/\/ used by jelly","204","            return !Jenkins.getInstance().getInstallState().isSetupComplete()","517","","518","    \/**","519","     * Called upon install state update.","520","     * @param state the new install state.","521","     * @since FIXME","522","     *\/","523","    public void onInstallStateUpdate(InstallState state) {","524","        if (state.isSetupComplete()) {","525","            tearDownFilter();","526","        } else {","527","            setUpFilter();","528","        }","529","    }","530","","531","    \/**","532","     * Returns whether the setup wizard filter is currently registered.","533","     * @since FIXME","534","     *\/","535","    public boolean hasSetupWizardFilter() {","536","        return PluginServletFilter.hasFilter(FORCE_SETUP_WIZARD_FILTER);","537","    }","538","","574","","575","    \/**","576","     * Sets up the Setup Wizard filter if the current state requires it.","577","     *\/","578","    private void checkFilter() {","579","        if (!Jenkins.getInstance().getInstallState().isSetupComplete()) {","580","            setUpFilter();","581","        }","582","    }"],"delete":["66","import org.jenkinsci.remoting.engine.JnlpProtocol4Handler;","87","     * Used to determine if this was a new install (vs. an upgrade, restart, or otherwise)","88","     *\/","89","    private static boolean isUsingSecurityToken = false;","90","","91","    \/**","170","            ","171","            try {","172","                PluginServletFilter.addFilter(FORCE_SETUP_WIZARD_FILTER);","173","                \/\/ if we're not using security defaults, we should not show the security token screen","174","                \/\/ users will likely be sent to a login screen instead","175","                isUsingSecurityToken = isUsingSecurityDefaults();","176","            } catch (ServletException e) {","177","                throw new RuntimeException(\"Unable to add PluginServletFilter for the SetupWizard\", e);","178","            }","180","        ","188","    ","194","            return isUsingSecurityToken \/\/ only ever show the unlock page if using the security token","195","                    && !Jenkins.getInstance().getInstallState().isSetupComplete()","489","        PluginServletFilter.removeFilter(FORCE_SETUP_WIZARD_FILTER);","490","        isUsingSecurityToken = false; \/\/ this should not be considered new anymore","510","    "]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["330","    private InstallState installState;","926","            getInstallState().initializeState();","1035","        LOGGER.log(Main.isDevelopmentMode ? Level.INFO : Level.FINE, \"Install state transitioning from: {0} to : {1}\", new Object[] { prior, installState });","1036","        if (!newState.equals(prior)) {","1037","            getSetupWizard().onInstallStateUpdate(newState);","1040","        saveQuietly();"],"delete":["330","    private transient InstallState installState = InstallState.UNKNOWN;","926","            InstallUtil.proceedToNextStateFrom(InstallState.UNKNOWN);","1035","        if (!prior.equals(newState)) {"]}],"core\/src\/main\/java\/hudson\/util\/PluginServletFilter.java":[{"add":["115","    \/**","116","     * Checks whether the given filter is already registered in the chain.","117","     * @param filter the filter to check.","118","     * @return true if the filter is already registered in the chain.","119","     * @since FIXME","120","     *\/","121","    public static boolean hasFilter(Filter filter) {","122","        Jenkins j = Jenkins.getInstanceOrNull();","123","        PluginServletFilter container = null;","124","        if(j != null) {","125","            container = getInstance(j.servletContext);","126","        }","127","        if (j == null || container == null) {","128","            return LEGACY.contains(filter);","129","        } else {","130","            return container.list.contains(filter);","131","        }","132","    }","133",""],"delete":[]}],"core\/src\/main\/java\/jenkins\/install\/InstallState.java":[{"add":["51","    public static final InstallState UNKNOWN = new InstallState(\"UNKNOWN\", true) {","52","        @Override","53","        public void initializeState() {","54","            InstallUtil.proceedToNextStateFrom(this);","55","        }","56","    };","101","","113","","123",""],"delete":["51","    public static final InstallState UNKNOWN = new InstallState(\"UNKNOWN\", true);","96","    ","108","            ","118","    "]}]}},"a88920aab7b1e35c24b4adb7a297bd04d35ed9a3":{"changes":{"core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Node.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["511","        getNode().setTemporaryOfflineCause(offlineCause);","566","        if (this.temporarilyOffline) {","567","            \/\/ When we get a new node, push our current temp offline","568","            \/\/ status to it (as the status is not carried across","569","            \/\/ configuration changes that recreate the node).","570","            \/\/ Since this is also called the very first time this","571","            \/\/ Computer is created, avoid pushing an empty status","572","            \/\/ as that could overwrite any status that the Node","573","            \/\/ brought along from its persisted config data.","574","            node.setTemporaryOfflineCause(this.offlineCause);","575","        }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Node.java":[{"add":["27","import hudson.Extension;","40","import hudson.slaves.ComputerListener;","44","import hudson.slaves.OfflineCause;","56","import java.util.logging.Logger;","74","","75","    private static final Logger LOGGER = Logger.getLogger(Node.class.getName());","76","","175","     * Let Nodes be aware of the lifecycle of their own {@link Computer}.","176","     *\/","177","    @Extension","178","    public static class InternalComputerListener extends ComputerListener {","179","        @Override","180","        public void onOnline(Computer c, TaskListener listener) {","181","            Node node = c.getNode();","182","","183","            \/\/ At startup, we need to restore any previously in-effect temp offline cause.","184","            \/\/ We wait until the computer is started rather than getting the data to it sooner","185","            \/\/ so that the normal computer start up processing works as expected.","186","            if (node.temporaryOfflineCause != null && node.temporaryOfflineCause != c.getOfflineCause()) {","187","                c.setTemporarilyOffline(true, node.temporaryOfflineCause);","188","            }","189","        }","190","    }","191","","192","    private OfflineCause temporaryOfflineCause;","193","","194","    \/**","195","     * Enable a {@link Computer} to inform its node when it is taken","196","     * temporarily offline.","197","     *\/","198","    void setTemporaryOfflineCause(OfflineCause cause) {","199","        try {","200","            if (temporaryOfflineCause != cause) {","201","                temporaryOfflineCause = cause;","202","                Hudson.getInstance().save(); \/\/ Gotta be a better way to do this","203","            }","204","        } catch (java.io.IOException e) {","205","            LOGGER.warning(\"Unable to complete save, temporary offline status will not be persisted: \" + e.getMessage());","206","        }","207","    }","208","","209","    \/**"],"delete":[]}]}},"3edde0268336c01806614c86dc891295b78c56ed":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["595","                Label label = getAssignedLabel();","596","                if(label!=null && label.isSelfLabel()) {"],"delete":["595","                if(getAssignedLabel().isSelfLabel()) {"]}]}},"8b8231108fb5930bab5c7e2f20685c9a9d237749":{"changes":{"core\/src\/main\/java\/hudson\/util\/SecretRewriter.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/SecretRewriter.java":[{"add":["78","        AtomicFileWriter w = new AtomicFileWriter(f, \"UTF-8\");","80","            PrintWriter out = new PrintWriter(new BufferedWriter(w));","82","            boolean modified = false; \/\/ did we actually change anything?","83","            try {","84","                FileInputStream fin = new FileInputStream(f);","86","                    BufferedReader r = new BufferedReader(new InputStreamReader(fin, \"UTF-8\"));","112","                    fin.close();","115","                out.close();","117","","118","            if (modified) {","119","                if (backup!=null) {","120","                    backup.getParentFile().mkdirs();","121","                    FileUtils.copyFile(f,backup);","122","                }","123","                w.commit();","124","            }","125","            return modified;","127","            w.abort();"],"delete":["78","        FileInputStream fin = new FileInputStream(f);","80","            BufferedReader r = new BufferedReader(new InputStreamReader(fin, \"UTF-8\"));","81","            AtomicFileWriter w = new AtomicFileWriter(f, \"UTF-8\");","82","            try {","83","                PrintWriter out = new PrintWriter(new BufferedWriter(w));","85","                boolean modified = false; \/\/ did we actually change anything?","112","                    out.close();","114","","115","                if (modified) {","116","                    if (backup!=null) {","117","                        backup.getParentFile().mkdirs();","118","                        FileUtils.copyFile(f,backup);","119","                    }","120","                    w.commit();","121","                }","122","                return modified;","124","                w.abort();","127","            fin.close();"]}],"changelog.html":[{"add":["68","  <li class='major bug'>","69","    Rekeying operation (from SECURITY-49 fix in 1.498) failed on Windows.","70","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16319\">issue 16319<\/a>)"],"delete":[]}]}},"cd33cdd8b73240b165cda665d1c4413be7b93d66":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"changelog.html":[{"add":["66","  <li class=bug>","67","    Improved class loading performance when using Groovy.","68","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-24309\">issue 24309<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["437","        synchronized (((UberClassLoader) uberClassLoader).loaded) {","438","            ((UberClassLoader) uberClassLoader).loaded.clear();","439","        }","1020","        \/** Cache of loaded, or known to be unloadable, classes. *\/","1021","        private final Map<String,Class<?>> loaded = new HashMap<String,Class<?>>();","1040","            if (name.startsWith(\"SimpleTemplateScript\")) { \/\/ cf. groovy.text.SimpleTemplateEngine","1041","                throw new ClassNotFoundException(\"ignoring \" + name);","1042","            }","1043","            synchronized (loaded) {","1044","                if (loaded.containsKey(name)) {","1045","                    Class<?> c = loaded.get(name);","1046","                    if (c != null) {","1047","                        return c;","1048","                    } else {","1049","                        throw new ClassNotFoundException(\"cached miss for \" + name);","1050","                    }","1051","                }","1052","            }","1057","                        if (c != null) {","1058","                            synchronized (loaded) {","1059","                                loaded.put(name, c);","1060","                            }","1061","                            return c;","1062","                        }","1064","                        c = ClassLoaderReflectionToolkit._findClass(p.classLoader, name);","1065","                        synchronized (loaded) {","1066","                            loaded.put(name, c);","1067","                        }","1068","                        return c;","1082","            synchronized (loaded) {","1083","                loaded.put(name, null);","1084","            }"],"delete":["1039","                        if (c!=null)    return c;","1041","                        return ClassLoaderReflectionToolkit._findClass(p.classLoader, name);"]}]}},"fa6bb598672d172a9c9f63b35d50ef02f683e1ea":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["1709","        env.put(\"HUDSON_SERVER_COOKIE\",Util.getDigestOf(\"ServerID:\"+Hudson.getInstance().getSecretKey()));"],"delete":["1709","        env.put(\"HUDSON_COOKIE\",Util.getDigestOf(\"ServerID:\"+Hudson.getInstance().getSecretKey()));"]}]}},"d63b7025c40207b18c6544674bd785cfc8b8631f":{"changes":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Slave.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["744","    \/*package*\/ Computer getComputer(Node n) {","745","        return computers.get(n);","746","    }","747","","768","        return getComputer(this);"],"delete":["764","        return getComputer(\"\");"]}],"core\/src\/main\/java\/hudson\/model\/Slave.java":[{"add":["561","        return (ComputerImpl)Hudson.getInstance().getComputer(this);"],"delete":["561","        return (ComputerImpl)Hudson.getInstance().getComputer(getNodeName());"]}]}},"2522ffcb7da066cf52445c3c3a9eedcc0d55fcc2":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY","changelog.html":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["1071",".build-row-cell .pane.build-name .display-name {","1072","  margin-left: 20px;","1073","}","1074",""],"delete":["1071",".build-row-cell .pane.build-name .display-name,"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Regression in build-history causing ball to not open console","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-28704\">issue 28704<\/a>) "],"delete":["57","  <li class=>"]}]}},"73d9aca0cdfc3b3ecadf6b3fe17c2e31526656f2":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/rssBar_it.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/rssBar_it.properties":[{"add":["22","Legend=Legenda"],"delete":["22","Legend=Leggenda"]}]}},"137374bf911c2ee194d43196696615b2b9a494b5":{"changes":{"core\/src\/main\/resources\/hudson\/scm\/SubversionSCM\/DescriptorImpl\/url-help.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/scm\/SubversionSCM\/DescriptorImpl\/url-help.properties":[{"add":["8"," click <a href=\"{0}\/scm\/SubversionSCM\/enterCredential\">this link<\/a> and specify different credential.","12","  one module. If you have multiple modules checked out, use the \\","13","  <a href=\"http:\/\/www.manpagez.com\/man\/1\/svnversion\/\">svnversion command<\/a>."],"delete":["8"," click <a href=\"{0}\/\/scm\/SubversionSCM\/enterCredential\">this link<\/a> and specify different credential.","12","  one module. If you have multiple modules checked out, use \\","13","  <a href=\"http:\/\/www.manpagez.com\/man\/1\/svnversion\/\">the svnversion command<\/a>."]}]}},"ef1ad6ca29c313fa0b4bc6f5dcd8344046221049":{"changes":{"maven-plugin\/pom.xml":"MODIFY","changelog.html":"MODIFY","pom.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"maven-plugin\/pom.xml":[{"add":["330","        <exclusion><!-- jcl-over-slf4j version needs to match with slf4j-api version, which makes this fragile. let's not try to intercept jcl calls -->"],"delete":["49","    <slf4jVersion>1.6.2<\/slf4jVersion> <!-- < 1.6.x version didn't specify the license (MIT) -->","57","  <dependencyManagement>","58","    <dependencies>","59","      <!-- SLF4J is used by wagon-webdav-jackrabbit dep --> ","60","      <dependency>","61","        <groupId>org.slf4j<\/groupId>","62","        <artifactId>slf4j-api<\/artifactId>","63","        <version>${slf4jVersion}<\/version>","64","      <\/dependency>","65","      <dependency>","66","        <groupId>org.slf4j<\/groupId>","67","        <artifactId>slf4j-nop<\/artifactId>","68","        <version>${slf4jVersion}<\/version>","69","      <\/dependency>","70","      <dependency>","71","        <groupId>org.slf4j<\/groupId>","72","        <artifactId>slf4j-jdk14<\/artifactId>","73","        <version>${slf4jVersion}<\/version>","74","      <\/dependency>","75","      <dependency>","76","        <groupId>org.slf4j<\/groupId>","77","        <artifactId>jcl-over-slf4j<\/artifactId>","78","        <version>${slf4jVersion}<\/version>","79","      <\/dependency>","80","    <\/dependencies>","81","  <\/dependencyManagement>","356","        <exclusion><!-- bundling binding creates a problem with app servers that use different versions of slf4j -->"]}],"changelog.html":[{"add":["68","    Bundled slf4j binding to avoid classloader contraint violation in JBoss","69","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12334\">issue 12334<\/a>,","70","     <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12446\">issue 12446<\/a>,","71","     <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12650\">issue 12650<\/a>)","72","  <li class=\"bug\">"],"delete":[]}],"pom.xml":[{"add":["91","    <slf4jVersion>1.6.2<\/slf4jVersion> <!-- < 1.6.x version didn't specify the license (MIT) -->","208","      <!-- SLF4J used in maven-plugin and core -->","209","      <dependency>","210","        <groupId>org.slf4j<\/groupId>","211","        <artifactId>slf4j-api<\/artifactId>","212","        <version>${slf4jVersion}<\/version>","213","      <\/dependency>","214","      <dependency>","215","        <groupId>org.slf4j<\/groupId>","216","        <artifactId>slf4j-nop<\/artifactId>","217","        <version>${slf4jVersion}<\/version>","218","      <\/dependency>","219","      <dependency>","220","        <groupId>org.slf4j<\/groupId>","221","        <artifactId>slf4j-jdk14<\/artifactId>","222","        <version>${slf4jVersion}<\/version>","223","      <\/dependency>","224","      <dependency>","225","        <groupId>org.slf4j<\/groupId>","226","        <artifactId>jcl-over-slf4j<\/artifactId>","227","        <version>${slf4jVersion}<\/version>","228","      <\/dependency>"],"delete":[]}],"war\/pom.xml":[{"add":["119","    <dependency>","120","      <!--","121","        We bundle slf4j binding since we got some components (sshd for example)","122","        that uses slf4j.","123","","124","        The problem with not shipping any binding in the war is that if the","125","        servlet container does use slf4j in itself, then we got a classloader","126","        constraint violation (see JENKINS-12334) as we try to load StaticLoggerBinder","127","        which resides in the binding jar (this jar would be from container implementation,","128","        which relies on slf4j api in the container, when we have our own slf4j API jar","129","        statically depending on the binding jar.)","130","","131","        We also get tickets like JENKINS-12650 for not reporting logs at all","132","        (although this is a non-fatal problem.)","133","","134","        The downside of adding a jar is that we can potentially get \"multiple binding jar\"","135","        warning like http:\/\/www.slf4j.org\/codes.html, but that's at least non-fatal.","136","      -->","137","      <groupId>org.slf4j<\/groupId>","138","      <artifactId>slf4j-jdk14<\/artifactId>","139","    <\/dependency>","140","","143","","144","    <!--dependency"],"delete":["121","    <!--dependency>"]}]}},"3853b3813967bd3d46e4dde7741eb97fa628345c":{"changes":{"core\/src\/main\/java\/hudson\/model\/User.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/User.java":[{"add":["434","        return getOrCreate(id, fullName, create, getUnsanitizedLegacyConfigFileFor(id));","435","    }","436","","437","    private static @Nullable User getOrCreate(@Nonnull String id, @Nonnull String fullName, boolean create, File unsanitizedLegacyConfigFile) {","454","                    LOGGER.log(Level.INFO, \"Migrated user record from {0} to {1}\", new Object[] {unsanitizedLegacyConfigFile, configFile});","458","                            String.format(\"Failed to migrate user record from %s to %s\", unsanitizedLegacyConfigFile, configFile),","1021","                    File configFile = new File(subdir, \"config.xml\");","1022","                    if (configFile.exists()) {","1024","                        getOrCreate(name, \/* <init> calls load(), probably clobbering this anyway *\/name, true, configFile);"],"delete":["444","        if (u == null && !configFile.isFile() && !configFile.getParentFile().isDirectory()) {","445","            \/\/ check for legacy users and migrate if safe to do so.","446","            File[] legacy = getLegacyConfigFilesFor(id);","447","            if (legacy != null && legacy.length > 0) {","448","                for (File legacyUserDir : legacy) {","449","                    final XmlFile legacyXml = new XmlFile(XSTREAM, new File(legacyUserDir, \"config.xml\"));","450","                    try {","451","                        Object o = legacyXml.read();","452","                        if (o instanceof User) {","453","                            if (idStrategy().equals(id, legacyUserDir.getName()) && !idStrategy().filenameOf(legacyUserDir.getName())","454","                                    .equals(legacyUserDir.getName())) {","455","                                if (legacyUserDir.renameTo(configFile.getParentFile())) {","456","                                    LOGGER.log(Level.INFO, \"Migrated user record from {0} to {1}\", new Object[] {legacyUserDir, configFile.getParentFile()});","457","                                } else {","458","                                    LOGGER.log(Level.WARNING, \"Failed to migrate user record from {0} to {1}\",","459","                                            new Object[]{legacyUserDir, configFile.getParentFile()});","460","                                }","461","                                break;","462","                            }","463","                        } else {","464","                            LOGGER.log(Level.FINE, \"Unexpected object loaded from {0}: {1}\",","465","                                    new Object[]{ legacyUserDir, o });","466","                        }","467","                    } catch (IOException e) {","468","                        LOGGER.log(Level.FINE, String.format(\"Exception trying to load user from %s: %s\",","469","                                new Object[]{ legacyUserDir, e.getMessage() }), e);","470","                    }","471","                }","472","            }","473","        }","474","","475","        File unsanitizedLegacyConfigFile = getUnsanitizedLegacyConfigFileFor(id);","482","                    LOGGER.log(Level.INFO, \"Migrated unsafe user record from {0} to {1}\", new Object[] {unsanitizedLegacyConfigFile, configFile});","486","                            String.format(\"Failed to migrate user record from %s to %s, see SECURITY-499 for more information\", idStrategy().legacyFilenameOf(id), idStrategy().filenameOf(id)),","729","    private static final File[] getLegacyConfigFilesFor(final String id) {","730","        return getRootDir().listFiles(new FileFilter() {","731","            @Override","732","            public boolean accept(File pathname) {","733","                return pathname.isDirectory() && new File(pathname, \"config.xml\").isFile() && idStrategy().equals(","734","                        pathname.getName(), id);","735","            }","736","        });","737","    }","738","","1059","                    if (new File(subdir, \"config.xml\").exists()) {","1061","                        getOrCreate(name, \/* <init> calls load(), probably clobbering this anyway *\/name, true);"]}]}},"23d5cf97cf4325eb7a0f1f10f7e852bdda5c8b63":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["956","        if (r != null) {","957","            return r.getBuildsOverThreshold(numberOfBuilds, threshold);","958","        }","959","        return new ArrayList<>(numberOfBuilds);"],"delete":["956","        return r.getBuildsOverThreshold(numberOfBuilds, threshold);"]}]}},"2592e07728b79c417387e2c97aca71c8b61da279":{"changes":{"core\/src\/main\/java\/hudson\/util\/Protector.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/Protector.java":[{"add":["21","    private static final String ALGORITHM = \"DES\";","22","","25","            Cipher cipher = Cipher.getInstance(ALGORITHM);","37","            Cipher cipher = Cipher.getInstance(ALGORITHM);","51","            DES_KEY = KeyGenerator.getInstance(ALGORITHM).generateKey();"],"delete":["23","            Cipher cipher = Cipher.getInstance(\"3DES\");","35","            Cipher cipher = Cipher.getInstance(\"3DES\");","49","            DES_KEY = KeyGenerator.getInstance(\"3DES\").generateKey();"]}]}},"07e40ca9113f4a43c962c37249c89ad55d21a3f1":{"changes":{"core\/src\/main\/resources\/hudson\/slaves\/DumbSlave\/configure-entries.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/slaves\/DumbSlave\/configure-entries.jelly":[{"add":["24","  <f:slave-mode name=\"mode\" node=\"${it}\" \/>"],"delete":["24","  <f:slave-mode name=\"mode\" node=\"${s}\" \/>"]}]}},"90337f06087ae0ff23f39310a5e07a2775d3d230":{"changes":{"core\/src\/main\/resources\/hudson\/slaves\/ComputerLauncher\/main.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/slaves\/ComputerLauncher\/main.jelly":[{"add":["35","          <form method=\"post\" action=\"launchSlaveAgent\">","43","          <form method=\"post\" action=\"launchSlaveAgent\">"],"delete":["35","          <form method=\"get\" action=\"launchSlaveAgent\">","43","          <form method=\"get\" action=\"launchSlaveAgent\">"]}]}},"a06c2a4b1141ea5e101399629f78a318eda58180":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":[{"add":["36","      <a href=\"${rootURL}\/${c.url}\" class=\"model-link inside\"><l:icon class=\"${c.iconClassName} icon-sm\" alt=\"${altText}\"\/><st:nbsp\/>${title}<\/a>"],"delete":["36","      <a href=\"${rootURL}\/${c.url}\" class=\"model-link inside\"><l:icon class=\"icon-computer${c.offline?'-x':''} icon-sm\" alt=\"${altText}\"\/><st:nbsp\/>${title}<\/a>"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["70","import org.jenkins.ui.icon.Icon;","71","import org.jenkins.ui.icon.IconSet;","725","    \/**","726","     * Returns the icon for this computer.","727","     * \t ","728","     * It is both the recommended and default implementation to serve different icons based on {@link #isOffline}","729","     * ","730","     * @see #getIconClassName()","731","     *\/","740","    \/**","741","     * Returns the class name that will be used to lookup the icon.","742","     * ","743","     * This class name will be added as a class tag to the html img tags where the icon should","744","     * show up followed by a size specifier given by {@link Icon#toNormalizedIconSizeClass(String)}","745","     * The conversion of class tag to src tag is registered through {@link IconSet#addIcon(Icon)}","746","     * ","747","     * It is both the recommended and default implementation to serve different icons based on {@link #isOffline}","748","     * ","749","     * @see #getIcon()","750","     *\/"],"delete":[]}]}},"8fc609fe0952b285d5b26a59fd5ff4c29704d33d":{"changes":{"changelog.html":"MODIFY","pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=bug>","58","    Channel reader thread can end up consuming 100% CPU","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-23471\">issue 23471<\/a>)","60","  <li class=bug>","61","    CancelledKeyException can cause all JNLP slaves to disconnect (and the problem remains until restart)","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-24050\">issue 24050<\/a>)"],"delete":["57","  <li class=>"]}],"pom.xml":[{"add":["175","        <version>2.45<\/version>"],"delete":["175","        <version>2.44<\/version>"]}]}},"ea65aad5c2a324798871557fa8eb4b644f5aec2e":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SubversionSCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SubversionSCM.java":[{"add":["334","            if (!repositoryLocationsExist() && build.getProject().getLastSuccessfulBuild()!=null) {","336","                \/\/ but only do so if there was at least some successful build,","337","                \/\/ to make sure that initial configuration error won't disable the build. see issue #1567"],"delete":["334","            if (!repositoryLocationsExist()) {"]}]}},"25acdd8850ba949d42417febe735dc518e29db80":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_da.properties":"MODIFY","core\/src\/main\/java\/hudson\/Functions.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_lv.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_ja.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_zh_TW.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_es.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_fr.properties":[{"add":["26","range.label=de #{0}  #{1}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_tr.properties":[{"add":["26","range.label=#{0}'dan #{1}'a"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_da.properties":[{"add":["25","range.label=fra #{0} til #{1}"],"delete":[]}],"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["542","    \/**","543","     * Creates a sub map by using the given range (upper end inclusive).","544","     *\/","545","    @Restricted(NoExternalUse.class)","546","    public static <V> SortedMap<Integer,V> filterExcludingFrom(SortedMap<Integer,V> map, String from, String to) {","547","        if(from==null && to==null)      return map;","548","        if(to==null)","549","            return map.headMap(Integer.parseInt(from));","550","        if(from==null)","551","            return map.tailMap(Integer.parseInt(to));","552","","553","        return map.subMap(Integer.parseInt(to),Integer.parseInt(from));","554","    }","555",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes.properties":[{"add":["23","from.label=since #{0}","24","to.label=up to #{0}","25","range.label=between #{0} and #{1}"],"delete":["23","from.label=from #{0}","24","to.label=to #{0}"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_lv.properties":[{"add":["25","range.label=no #{0} l\\u012Bdz #{1}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_ja.properties":[{"add":["25","to.label=#{0} \\u307e\\u3067","26","range.label=#{0} \\u304b\\u3089 #{1} \\u307e\\u3067"],"delete":["25","to.label=#{0} \\u307e\\u3067"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_de.properties":[{"add":["24","from.label=seit #{0}","26","range.label=zwischen #{0} und #{1}"],"delete":["24","from.label=von #{0}"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_zh_TW.properties":[{"add":["27","range.label=\\u5f9e #{0} \\u5230 #{1}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_es.properties":[{"add":["25","range.label=desde #{0} hasta #{1}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_pt_BR.properties":[{"add":["27","range.label=de #{0} para #{1}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes_ru.properties":[{"add":["25","range.label=\\u0441 #{0} \\u0434\\u043E #{1}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/changes.jelly":[{"add":["38","        <j:choose>","39","          <j:when test=\"${from!=null and to!=null}\">","40","            ${%range.label(from, to)}","41","          <\/j:when>","42","          <j:otherwise>","43","            <j:if test=\"${from!=null}\">${%from.label(from)}<\/j:if>","44","            <j:if test=\"${to!=null}\">${%to.label(to)}<\/j:if>","45","          <\/j:otherwise>","46","        <\/j:choose>","48","      <j:set var=\"builds\" value=\"${h.filterExcludingFrom(it.buildsAsMap,from,to).values()}\" \/>"],"delete":["38","        <j:if test=\"${from!=null}\">${%from.label(from)}<\/j:if>","39","        <j:if test=\"${to!=null}\">&#160;${%to.label(to)}<\/j:if>","41","      <j:set var=\"builds\" value=\"${h.filter(it.buildsAsMap,from,to).values()}\" \/>"]}]}},"72d80b49f269b7928e22c092eb82a95797e6c376":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/DumbSlave.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/DumbSlave.java":[{"add":["68","            \"slave\", \"agent\" \/*because this is in effect the canonical slave type*\/})"],"delete":["68","            \"slave\"\/*because this is in effect the canonical slave type*\/})"]}]}},"018f9875ca58230afc4eb52ac66b3195f00128ef":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["169","        <version>3.12<\/version>"],"delete":["169","        <version>3.11<\/version>"]}]}},"888b9d368373fce964057cc119aee164f9f037a0":{"changes":{"test\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"test\/pom.xml":[{"add":["258","    <\/profile>    "],"delete":["258","    <\/profile>"]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["1018","    "],"delete":["1018",""]}],"changelog.html":[{"add":["79","    Email fails when sending to multiple recipients if _any_ of them are in error","80","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9006\">issue 9006<\/a>)","81","  <li class=bug>"],"delete":[]}]}},"1910deec90ec7841b74e9c17dfd5121d4d44757c":{"changes":{"core\/src\/main\/java\/hudson\/Functions.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["692","        StringBuilder buf = new StringBuilder(Stapler.getCurrentRequest().getContextPath());"],"delete":["692","        StringBuilder buf = new StringBuilder();"]}]}},"df1139d291d48681cb12ca6f8d96fae68c2d8b55":{"changes":{"core\/src\/main\/java\/hudson\/model\/Cause.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Cause.java":[{"add":["90","\t\t\treturn Messages.Cause_UpstreamCause_ShortDescription(upstreamProject, Integer.toString(upstreamBuild));"],"delete":["90","\t\t\treturn Messages.Cause_UpstreamCause_ShortDescription(upstreamProject, upstreamBuild);"]}]}},"a78f1d3246cfdbee96820d5629dbb8676a3ca19a":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["692","     * The method will ignore the disable command if {@link #supportsMakeDisabled()}","693","     * returns false. The enable command will be executed in any case.","694","     * @param b true - disable, false - enable ","698","        if (b && !supportsMakeDisabled()) return; \/\/ do nothing if the disabling is unsupported"],"delete":[]}]}},"7e5063937c31ee33de29254f1f13f5d4aa0d6174":{"changes":{"test\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","core\/pom.xml":"MODIFY","cli\/pom.xml":"MODIFY","debian\/debian\/changelog":"MODIFY","changelog.html":"MODIFY","pom.xml":"MODIFY","plugins\/pom.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"test\/pom.xml":[{"add":["30","    <version>1.605-SNAPSHOT<\/version>"],"delete":["30","    <version>1.604-SNAPSHOT<\/version>"]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["218","        String oldName = this.name;","219","        String oldFullName = getFullName();","327","        ItemListener.fireLocationChange(this, oldFullName);"],"delete":["250","","251","                String oldName = this.name;","252","                String oldFullName = getFullName();","326","","327","                ItemListener.fireLocationChange(this, oldFullName);"]}],"core\/pom.xml":[{"add":["31","    <version>1.605-SNAPSHOT<\/version>"],"delete":["31","    <version>1.604-SNAPSHOT<\/version>"]}],"cli\/pom.xml":[{"add":["7","    <version>1.605-SNAPSHOT<\/version>"],"delete":["7","    <version>1.604-SNAPSHOT<\/version>"]}],"debian\/debian\/changelog":[{"add":["0","jenkins (1.604) unstable; urgency=low","1","","2","  * See http:\/\/jenkins-ci.org\/changelog for more details.","3","","4"," -- Kohsuke Kawaguchi <kk@kohsuke.org>  Sun, 15 Mar 2015 12:22:07 -0700","5",""],"delete":[]}],"changelog.html":[{"add":["60","<h3><a name=v1.604>What's new in 1.604<\/a> (2015\/03\/15)<\/h3>","65","  <li class=bug>","66","    Avoid deadlock when using build-monitor-plugin.","67","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-27183\">issue 27183<\/a>)","68","  <li class=rfe>","69","    As security hardening, mark \"remember me\" cookie as HTTP only","70","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-27277\">issue 27277<\/a>)","71","  <li class=\"rfe\">","72","    Show displayName in build remote API.","73","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-26723\">issue 26723<\/a>)","74","<\/ul>","75","<h3><a name=v1.602>What's new in 1.602<\/a> (2015\/03\/08)<\/h3>","76","<ul class=image>","77","  <li class=\"rfe\">","78","    Show Check Now button also on Available and Updates tabs of plugin manager.","79","    (<a href=\"https:\/\/github.com\/jenkinsci\/jenkins\/pull\/1593\">PR 1593<\/a>)","92","  <li class=bug>","93","    Robustness improvement when setting up Archive Artifacts programmatically.","94","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-25779\">issue 25779<\/a>)"],"delete":["60","","61","<!-- these changes are controlled by the release process. DO NOT MODIFY -->","62","<div id=\"rc\" style=\"display:none;\"><!--=BEGIN=-->","63","<h3><a name=v1.603>What's new in 1.603<\/a> <!--=DATE=--><\/h3>","66","    As security hardening, mark \"remember me\" cookie as HTTP only","67","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-27277\">issue 27277<\/a>)","68","<\/ul>","69","<\/div><!--=END=-->","70","<h3><a name=v1.602>What's new in 1.602<\/a> (2015\/03\/08)<\/h3>","71","<ul class=image>","72","  <li class=\"major bug\">","73","    Regression with environment variables in 1.600.","74","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-27188\">issue 27188<\/a>)","75","  <li class=\"major bug\">","76","    Errors with concurrent matrix builds since 1.597.","77","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-26739\">issue 26739<\/a>)","78","  <li class=\"rfe\">","79","    Show displayName in build remote API.","80","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-26723\">issue 26723<\/a>)","81","  <li class=rfe>"]}],"pom.xml":[{"add":["35","  <version>1.605-SNAPSHOT<\/version>"],"delete":["35","  <version>1.604-SNAPSHOT<\/version>"]}],"plugins\/pom.xml":[{"add":["14","  <version>1.605-SNAPSHOT<\/version>","43","      <version>1.605-SNAPSHOT<\/version>","49","      <version>1.605-SNAPSHOT<\/version>","55","      <version>1.605-SNAPSHOT<\/version>"],"delete":["14","  <version>1.604-SNAPSHOT<\/version>","43","      <version>1.604-SNAPSHOT<\/version>","49","      <version>1.604-SNAPSHOT<\/version>","55","      <version>1.604-SNAPSHOT<\/version>"]}],"war\/pom.xml":[{"add":["30","    <version>1.605-SNAPSHOT<\/version>"],"delete":["30","    <version>1.604-SNAPSHOT<\/version>"]}]}},"8d23041d4b785947dee1bc02f54a41d86b59bdda":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/queue\/CompositeCauseOfBlockage\/summary.jelly":"ADD","test\/src\/test\/java\/hudson\/slaves\/NodeCanTakeTaskTest.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY","core\/src\/main\/java\/hudson\/model\/queue\/CauseOfBlockage.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Node.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/queue\/QueueTaskDispatcherTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/queue\/CompositeCauseOfBlockage.java":"ADD"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/queue\/CompositeCauseOfBlockage\/summary.jelly":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/slaves\/NodeCanTakeTaskTest.java":[{"add":["26","import hudson.model.FreeStyleBuild;","27","import hudson.model.FreeStyleProject;","28","import hudson.model.Node;","29","import hudson.model.Queue;","30","import hudson.model.Queue.BuildableItem;","31","import hudson.model.Result;","32","import hudson.model.Slave;","33","import hudson.model.queue.CauseOfBlockage;","38","import static org.junit.Assert.*;","39","import org.junit.Rule;","40","import org.junit.Test;","41","import org.jvnet.hudson.test.Issue;","42","import org.jvnet.hudson.test.JenkinsRule;","43","import org.jvnet.hudson.test.SleepBuilder;","45","public class NodeCanTakeTaskTest {","47","    @Rule","48","    public JenkinsRule r = new JenkinsRule();","50","    @Issue({\"JENKINS-6598\", \"JENKINS-38514\"})","51","    @Test","52","    public void takeBlockedByProperty() throws Exception {","54","        r.jenkins.setNumExecutors(0);","55","        Slave slave = r.createSlave();","56","        FreeStyleProject project = r.createFreeStyleProject();","60","        r.assertBuildStatus(Result.SUCCESS, build.get(20, TimeUnit.SECONDS));","70","            List<BuildableItem> buildables = r.jenkins.getQueue().getBuildableItems();","77","            assertEquals(\"rejecting everything\", item.getCauseOfBlockage().getShortDescription());","83","        public CauseOfBlockage canTake(BuildableItem item) {","84","            return new CauseOfBlockage() {","85","                @Override","86","                public String getShortDescription() {","87","                    return \"rejecting everything\";","88","                }","89","            };","92","","93","    @Test","94","    public void becauseNodeIsBusy() throws Exception {","95","        Slave slave = r.createSlave();","96","        FreeStyleProject project = r.createFreeStyleProject();","97","        project.setAssignedNode(slave);","98","        project.setConcurrentBuild(true);","99","        project.getBuildersList().add(new SleepBuilder(Long.MAX_VALUE));","100","        project.scheduleBuild2(0).waitForStart(); \/\/ consume the one executor","101","        project.scheduleBuild2(0); \/\/ now try to reschedule","102","        Queue.Item item;","103","        while ((item = r.jenkins.getQueue().getItem(project)) == null || !item.isBuildable()) {","104","            Thread.sleep(100);","105","        }","106","        assertEquals(hudson.model.Messages.Queue_WaitingForNextAvailableExecutorOn(slave.getDisplayName()), item.getWhy());","107","    }","108",""],"delete":["26","import static org.junit.Assert.assertEquals;","27","import static org.junit.Assert.assertNotNull;","28","","34","import hudson.model.FreeStyleBuild;","35","import hudson.model.FreeStyleProject;","36","import hudson.model.Messages;","37","import hudson.model.Node;","38","import hudson.model.Result;","39","import hudson.model.Queue.BuildableItem;","40","import hudson.model.Queue.Task;","41","import hudson.model.Slave;","42","import hudson.model.queue.CauseOfBlockage;","44","import org.jvnet.hudson.test.HudsonTestCase;","46","public class NodeCanTakeTaskTest extends HudsonTestCase {","47","    @Override","48","    protected void setUp() throws Exception {","49","        super.setUp();","50","","52","        jenkins.setNumExecutors(0);","53","    }","54","","55","    public void testTakeBlockedByProperty() throws Exception {","56","        Slave slave = createSlave();","57","        FreeStyleProject project = createFreeStyleProject();","61","        assertBuildStatus(Result.SUCCESS, build.get(20, TimeUnit.SECONDS));","71","            List<BuildableItem> buildables = jenkins.getQueue().getBuildableItems();","78","            assertEquals(Messages.Queue_WaitingForNextAvailableExecutor(), item.getCauseOfBlockage().getShortDescription());","84","        public CauseOfBlockage canTake(Task task) {","85","            return CauseOfBlockage.fromMessage(null);"]}],"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["196","Queue.node_has_been_removed_from_configuration={0} has been removed from configuration","197","Queue.executor_slot_already_in_use=Executor slot already in use","339","Node.LackingBuildPermission={0} lacks permission to run on {1}"],"delete":["337","Node.LackingBuildPermission={0} doesn\\u2019t have a permission to run on {1}"]}],"core\/src\/main\/java\/hudson\/model\/queue\/CauseOfBlockage.java":[{"add":["3","import hudson.model.Computer;","10","import javax.annotation.Nonnull;","46","    public static CauseOfBlockage fromMessage(@Nonnull final Localizable l) {","47","        l.getKey(); \/\/ null check","49","            @Override","110","     * Build is blocked because a node (or its retention strategy) is not accepting tasks.","111","     * @since FIXME","112","     *\/","113","    public static final class BecauseNodeIsNotAcceptingTasks extends CauseOfBlockage implements NeedsMoreExecutor {","114","","115","        public final Node node;","116","","117","        public BecauseNodeIsNotAcceptingTasks(Node node) {","118","            this.node = node;","119","        }","120","","121","        @Override","122","        public String getShortDescription() {","123","            Computer computer = node.toComputer();","124","            String name = computer != null ? computer.getDisplayName() : node.getDisplayName();","125","            return Messages.Node_BecauseNodeIsNotAcceptingTasks(name);","126","        }","127","","128","        @Override","129","        public void print(TaskListener listener) {","130","            listener.getLogger().println(","131","                Messages.Node_BecauseNodeIsNotAcceptingTasks(ModelHyperlinkNote.encodeTo(node)));","132","        }","133","","134","    }","135","","136","    \/**"],"delete":["44","    public static CauseOfBlockage fromMessage(final Localizable l) {"]}],"core\/src\/main\/java\/hudson\/model\/Node.java":[{"add":["374","            return CauseOfBlockage.fromMessage(Messages._Node_LabelMissing(getDisplayName(), l));   \/\/ the task needs to be executed on label that this node doesn't have.","383","                return CauseOfBlockage.fromMessage(Messages._Node_BecauseNodeIsReserved(getDisplayName()));   \/\/ this node is reserved for tasks that are tied to it","390","            return CauseOfBlockage.fromMessage(Messages._Node_LackingBuildPermission(identity.getName(), getDisplayName()));","401","            return new CauseOfBlockage.BecauseNodeIsNotAcceptingTasks(this);"],"delete":["374","            return CauseOfBlockage.fromMessage(Messages._Node_LabelMissing(getNodeName(),l));   \/\/ the task needs to be executed on label that this node doesn't have.","383","                return CauseOfBlockage.fromMessage(Messages._Node_BecauseNodeIsReserved(getNodeName()));   \/\/ this node is reserved for tasks that are tied to it","390","            return CauseOfBlockage.fromMessage(Messages._Node_LackingBuildPermission(identity.getName(),getNodeName()));","401","            return CauseOfBlockage.fromMessage(Messages._Node_BecauseNodeIsNotAcceptingTasks(getNodeName()));"]}],"test\/src\/test\/java\/hudson\/model\/queue\/QueueTaskDispatcherTest.java":[{"add":["3","import hudson.model.Node;","4","import hudson.model.Queue;","6","import hudson.model.TaskListener;","7","import hudson.util.StreamTaskListener;","8","import java.io.StringWriter;","9","import java.util.logging.Level;","10","import static org.hamcrest.Matchers.containsString;","11","import static org.junit.Assert.*;","12","import org.junit.Rule;","13","import org.junit.Test;","14","import org.jvnet.hudson.test.Issue;","15","import org.jvnet.hudson.test.JenkinsRule;","16","import org.jvnet.hudson.test.LoggerRule;","19","public class QueueTaskDispatcherTest {","21","    @Rule","22","    public JenkinsRule r = new JenkinsRule();","24","    @Rule","25","    public LoggerRule logging = new LoggerRule().record(Queue.class, Level.ALL);","26","","27","    @Test","28","    public void canRunBlockageIsDisplayed() throws Exception {","29","        FreeStyleProject project = r.createFreeStyleProject();","30","        r.jenkins.getQueue().schedule(project);","31","","32","        Item item = r.jenkins.getQueue().getItem(project);","35","            item = r.jenkins.getQueue().getItem(project);","41","    @TestExtension(\"canRunBlockageIsDisplayed\")","53","","54","    @Issue(\"JENKINS-38514\")","55","    @Test","56","    public void canTakeBlockageIsDisplayed() throws Exception {","57","        FreeStyleProject project = r.createFreeStyleProject();","58","        r.jenkins.getQueue().schedule(project);","59","        Queue.Item item;","60","        while (true) {","61","            item = r.jenkins.getQueue().getItem(project);","62","            if (item.isBuildable()) {","63","                break;","64","            }","65","            Thread.sleep(100);","66","        }","67","        CauseOfBlockage cob = item.getCauseOfBlockage();","68","        assertNotNull(cob);","69","        assertThat(cob.getShortDescription(), containsString(\"blocked by canTake\"));","70","        StringWriter w = new StringWriter();","71","        TaskListener l = new StreamTaskListener(w);","72","        cob.print(l);","73","        l.getLogger().flush();","74","        assertThat(w.toString(), containsString(\"blocked by canTake\"));","75","    }","76","","77","    @TestExtension(\"canTakeBlockageIsDisplayed\")","78","    public static class AnotherQueueTaskDispatcher extends QueueTaskDispatcher {","79","        @Override","80","        public CauseOfBlockage canTake(Node node, Queue.BuildableItem item) {","81","            return new CauseOfBlockage() {","82","                @Override","83","                public String getShortDescription() {","84","                    return \"blocked by canTake\";","85","                }","86","            };","87","        }","88","    }","89",""],"delete":["4","","5","import org.jvnet.hudson.test.HudsonTestCase;","8","public class QueueTaskDispatcherTest extends HudsonTestCase {","10","    @SuppressWarnings(\"deprecation\")","11","    public void testCanRunBlockageIsDisplayed() throws Exception {","12","        FreeStyleProject project = createFreeStyleProject();","13","        jenkins.getQueue().schedule(project);","15","        Item item = jenkins.getQueue().getItem(project);","18","            item = jenkins.getQueue().getItem(project);","24","    @TestExtension"]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["63","import hudson.security.ACL;","128","import jenkins.model.queue.CompositeCauseOfBlockage;","222","    public static class JobOffer extends MappingWorksheet.ExecutorSlot {","249","         * @deprecated discards information; prefer {@link #getCauseOfBlockage}","251","        @Deprecated","253","            return getCauseOfBlockage(item) == null;","254","        }","255","","256","        \/**","257","         * Checks whether the {@link Executor} represented by this object is capable of executing the given task.","258","         * @return a reason why it cannot, or null if it could","259","         * @since FIXME","260","         *\/","261","        public @CheckForNull CauseOfBlockage getCauseOfBlockage(BuildableItem item) {","263","            if (node == null) {","264","                return CauseOfBlockage.fromMessage(Messages._Queue_node_has_been_removed_from_configuration(executor.getOwner().getDisplayName()));","265","            }","266","            CauseOfBlockage reason = node.canTake(item);","267","            if (reason != null) {","268","                return reason;","269","            }","270","            for (QueueTaskDispatcher d : QueueTaskDispatcher.all()) {","271","                reason = d.canTake(node, item);","272","                if (reason != null) {","273","                    return reason;","274","                }","275","            }","276","            \/\/ inlining isAvailable:","277","            if (workUnit != null) { \/\/ unlikely in practice (should not have even found this executor if so)","278","                return CauseOfBlockage.fromMessage(Messages._Queue_executor_slot_already_in_use());","279","            }","280","            if (executor.getOwner().isOffline()) {","281","                return new CauseOfBlockage.BecauseNodeIsOffline(node);","282","            }","283","            if (!executor.getOwner().isAcceptingTasks()) { \/\/ Node.canTake (above) does not consider RetentionStrategy.isAcceptingTasks","284","                return new CauseOfBlockage.BecauseNodeIsNotAcceptingTasks(node);","285","            }","286","            return null;","1548","                    List<JobOffer> candidates = new ArrayList<>(parked.size());","1549","                    List<CauseOfBlockage> reasons = new ArrayList<>(parked.size());","1551","                        CauseOfBlockage reason = j.getCauseOfBlockage(p);","1552","                        if (reason == null) {","1555","                                    new Object[]{j, taskDisplayName});","1557","                        } else {","1558","                            LOGGER.log(Level.FINEST, \"{0} rejected {1}: {2}\", new Object[] {j, taskDisplayName, reason});","1559","                            reasons.add(reason);","1571","                        p.transientCausesOfBlockage = reasons.isEmpty() ? null : reasons;","2498","        \/**","2499","         * Reasons why the last call to {@link #maintain} left this buildable (but not blocked or executing).","2500","         * May be null but not empty.","2501","         *\/","2502","        private transient volatile @CheckForNull List<CauseOfBlockage> transientCausesOfBlockage;","2503","","2517","            List<CauseOfBlockage> causesOfBlockage = transientCausesOfBlockage;","2518","","2530","                    if (causesOfBlockage != null && label.getIdleExecutors() > 0) {","2531","                        return new CompositeCauseOfBlockage(causesOfBlockage);","2532","                    }","2536","            } else if (causesOfBlockage != null && new ComputerSet().getIdleExecutors() > 0) {","2537","                return new CompositeCauseOfBlockage(causesOfBlockage);"],"delete":["124","import jenkins.util.SystemProperties;","221","    public class JobOffer extends MappingWorksheet.ExecutorSlot {","248","         * Verifies that the {@link Executor} represented by this object is capable of executing the given task.","252","            if (node==null)     return false;   \/\/ this executor is about to die","253","","254","            if(node.canTake(item)!=null)","255","                return false;   \/\/ this node is not able to take the task","256","","257","            for (QueueTaskDispatcher d : QueueTaskDispatcher.all())","258","                if (d.canTake(node,item)!=null)","259","                    return false;","260","","261","            return isAvailable();","1523","                    List<JobOffer> candidates = new ArrayList<JobOffer>(parked.size());","1525","                        if (j.canTake(p)) {","1528","                                    new Object[]{j.executor.getDisplayName(), taskDisplayName});"]}],"core\/src\/main\/java\/jenkins\/model\/queue\/CompositeCauseOfBlockage.java":[{"add":[],"delete":[]}]}},"92ccc8dff78dcc8c303483403a5708a83c1bfdfe":{"changes":{"core\/src\/main\/java\/hudson\/security\/HudsonAuthenticationEntryPoint.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/HudsonAuthenticationEntryPoint.java":[{"add":["6","import javax.servlet.ServletOutputStream;","13","import java.io.OutputStreamWriter;","14","import java.io.PrintWriter;","54","            PrintWriter out;","55","            try {","56","                ServletOutputStream sout = rsp.getOutputStream();","57","                out = new PrintWriter(new OutputStreamWriter(sout));","58","            } catch (IllegalStateException e) {","59","                out = rsp.getWriter();","60","            }","61","            out.printf(","69","            out.flush();"],"delete":["51","            rsp.getWriter().printf("]}]}},"2995c2869d5bdde84dd83976e5df1b63091acbf0":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["60","  <li class=bug>","61","    Deadlock during Maven builds Parsing POM step","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15846\">issue 15846<\/a>)"],"delete":[]}]}},"c210a6d2d844f567e58ef87212639d15ebeb5f30":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/Engine.java":"MODIFY","core\/src\/main\/java\/hudson\/lifecycle\/WindowsSlaveInstaller.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/Engine.java":[{"add":["47","     * URL that points to Hudson's tcp slage agent listener, like <tt>http:\/\/myhost\/hudson\/<\/tt>","51","     * Note that this URL <b>DOES NOT<\/b> have \"tcpSlaveAgentListener\" in it."],"delete":["47","     * URL that points to Hudson's tcp slage agent listener, like <tt>http:\/\/myhost\/hudson\/tcpSlaveAgentListener\/<\/tt>","51","     * Note that this URL also has \"tcpSlaveAgentListener\" in it."]}],"core\/src\/main\/java\/hudson\/lifecycle\/WindowsSlaveInstaller.java":[{"add":["95","            URL jnlp = new URL(engine.getHudsonUrl(),\"computer\/\"+engine.slaveName+\"\/slave-agent.jnlp\");","100","            URL slaveJar = new URL(engine.getHudsonUrl(),\"jnlpJars\/remoting.jar\");"],"delete":["95","            URL jnlp = new URL(engine.getHudsonUrl(),\"..\/computer\/\"+engine.slaveName+\"\/slave-agent.jnlp\");","100","            URL slaveJar = new URL(engine.getHudsonUrl(),\"..\/jnlpJars\/remoting.jar\");"]}]}},"08542cad7524ba4838922622889700e4dd7c2ce1":{"changes":{"core\/src\/main\/java\/hudson\/model\/TaskAction.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/TaskAction.java":[{"add":["62","     * Gets the permission object that represents the permission (against {@link #getACL}) to perform this task.","63","     * Generally your implementation of {@link #getIconFileName} should return null if {@code !getACL().hasPermission(getPermission())}.","68","     * Gets the {@link ACL} against which {@link #getPermission} is checked.","73","     * @inheritDoc","74","     * @see #getPermission","75","     *\/","76","    @Override public abstract String getIconFileName();","77","","78","    \/**"],"delete":["62","     * Gets the permission object that represents the permission to perform this task.","67","     * Gets the {@link ACL} against which the permissions are checked."]}]}},"3bf9d42287e4cf85aa3969b14f315e283b3feb4a":{"changes":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":[{"add":["116","\/\/        new Exception().fillInStackTrace().printStackTrace();"],"delete":["116","        new Exception().fillInStackTrace().printStackTrace();"]}]}},"0e6cf43ebbb1da617e86d0cbb4e8423aa72c26a2":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/editableDescription.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/editDescription.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/editableDescription.jelly":[{"add":["12","      <div align=\"right\"><a href=\"editDescription\" onclick=\"${h.ifThenElse(h.isAutoRefresh(request), null, 'return replaceDescription();')}\">"],"delete":["12","      <div align=\"right\"><a href=\"editDescription\" onclick=\"return replaceDescription();\">"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/editDescription.jelly":[{"add":["4","  <l:layout title=\"${it.displayName}\" norefresh=\"true\">"],"delete":["4","  <l:layout title=\"${it.displayName}\">"]}]}},"b21827b34a781a2d22f9953bb29b880a87b215b2":{"changes":{"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_zh_TW.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_fr.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_de.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_pt_BR.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_ru.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_zh_CN.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_ja.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_tr.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_zh_TW.html":[{"add":["1","  ?? <a href=\"..\/asynchPeople\">Jenkins ????????<\/a>?????????????"],"delete":["1","  ?? <a href=\"asynchPeople\">Jenkins ????????<\/a>?????????????"]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_fr.html":[{"add":["1","  Utilise la <a href=\"..\/asynchPeople\">liste des utilisateurs gre par Jenkins<\/a>"],"delete":["1","  Utilise la <a href=\"asynchPeople\">liste des utilisateurs gre par Jenkins<\/a>"]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_de.html":[{"add":["1","  Verwenden Sie <a href=\"..\/asynchPeople\">Jenkins' Benutzerverzeichnis<\/a> zur"],"delete":["1","  Verwenden Sie <a href=\"asynchPeople\">Jenkins' Benutzerverzeichnis<\/a> zur"]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_pt_BR.html":[{"add":["1","  Usa <a href=\"..\/asynchPeople\">a pr&#243;pria lista de usu&#225;rios do Jenkins<\/a> para fazer a autentica&#231;&#227;o,"],"delete":["1","  Usa <a href=\"asynchPeople\">a pr&#243;pria lista de usu&#225;rios do Jenkins<\/a> para fazer a autentica&#231;&#227;o,"]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help.html":[{"add":["1","  Use <a href=\"..\/asynchPeople\">Jenkins's own user list<\/a> for authentication,","2","  instead of delegating that to an external system."],"delete":["1","  Use <a href=\"asynchPeople\">Jenkins's own user list<\/a> for authentication,","2","  instead of delegating that to the external system."]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_ru.html":[{"add":["1","  ???????????? <a href=\"..\/asynchPeople\">??????????? ?????? ?????????????<\/a> ???"],"delete":["1","  ???????????? <a href=\"asynchPeople\">??????????? ?????? ?????????????<\/a> ???"]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_zh_CN.html":[{"add":["1","  ??<a href=\"..\/asynchPeople\">Hudson???????<\/a>??,\r"],"delete":["1","  ??<a href=\"asynchPeople\">Hudson???????<\/a>??,\r"]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_ja.html":[{"add":["1","  ???????????????<a href=\"..\/asynchPeople\">Jenkins??????????<\/a>??????????"],"delete":["1","  ???????????????<a href=\"asynchPeople\">Jenkins??????????<\/a>??????????"]}],"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/help_tr.html":[{"add":["1","  Yetkilendirmeyi d&#305;&#351; sisteme vermek yerine, <a href=\"..\/asynchPeople\">Hudson'&#305;n kendi kullan&#305;c&#305; listesi<\/a>'ni"],"delete":["1","  Yetkilendirmeyi d&#305;&#351; sisteme vermek yerine, <a href=\"asynchPeople\">Hudson'&#305;n kendi kullan&#305;c&#305; listesi<\/a>'ni"]}]}},"a45ecf45ee8571aae7a0273784971afeeefb6e3c":{"changes":{"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/index.jelly":[{"add":["63","              new Ajax.Request(\"${it.baseUrl}\/buildHistory\/all\",{"],"delete":["63","              new Ajax.Request(\"${it.baseUrl}\/buildHistory\/all\/\",{"]}]}},"cb3990a4d6094260bea4571e7079fd0e3949047f":{"changes":{"core\/src\/main\/java\/jenkins\/FilePathFilter.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/Security218CliTest.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","test\/src\/test\/java\/hudson\/bugs\/JnlpAccessWithSecuredHudsonTest.java":"MODIFY","pom.xml":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/StandardOutputSwapper.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/FilePathFilter.java":[{"add":["104","     * or {@code null} if none is needed."],"delete":["104","     * or null if none is needed."]}],"core\/src\/main\/java\/hudson\/slaves\/ChannelPinger.java":[{"add":["135","            \/\/ No sense in setting up channel pinger if the channel is being closed","136","            setUpPingForChannel(getOpenChannelOrFail(), null, pingTimeoutSeconds, pingIntervalSeconds, false);"],"delete":["135","            setUpPingForChannel(Channel.current(), null, pingTimeoutSeconds, pingIntervalSeconds, false);"]}],"test\/src\/test\/java\/jenkins\/security\/Security218CliTest.java":[{"add":["241","                getChannelOrFail().call(new Callable<String, Exception>() {"],"delete":["241","                Channel.current().call(new Callable<String, Exception>() {"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["869","            Channel.currentOrFail().setProperty(\"slave\",Boolean.TRUE); \/\/ indicate that this side of the channel is the slave side."],"delete":["869","            Channel.current().setProperty(\"slave\",Boolean.TRUE); \/\/ indicate that this side of the channel is the slave side."]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["1291","            final Channel channel = getOpenChannelOrFail();","1301","            return channel.export(RemoteProcess.class,new RemoteProcess() {","1307","                        Channel taskChannel = null;","1309","                            \/\/ Sync IO will fail automatically if the channel is being closed, no need to use getOpenChannelOrFail()","1310","                            taskChannel = Channel.currentOrFail();","1311","                            taskChannel.syncIO();","1314","                            LOGGER.log(Level.INFO, \"Failed to synchronize IO streams on the channel \" + taskChannel, t);"],"delete":["1300","            return Channel.current().export(RemoteProcess.class,new RemoteProcess() {","1307","                            Channel.current().syncIO();"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["1428","            final Channel ch = getChannelOrFail();","1430","            try (PrintWriter pw = new PrintWriter(sw)) {","1431","                ch.dumpExportTable(pw);","1432","            }"],"delete":["1429","            PrintWriter pw = new PrintWriter(sw);","1430","            Channel.current().dumpExportTable(pw);","1431","            pw.close();"]}],"test\/src\/test\/java\/hudson\/bugs\/JnlpAccessWithSecuredHudsonTest.java":[{"add":["156","            return getChannelOrFail().call(new ScriptLoader(path));"],"delete":["156","            return Channel.current().call(new ScriptLoader(path));"]}],"pom.xml":[{"add":["177","        <version>3.15<\/version>"],"delete":["177","        <version>3.14<\/version>"]}],"core\/src\/main\/java\/jenkins\/slaves\/StandardOutputSwapper.java":[{"add":["41","            Channel c = getOpenChannelOrFail();"],"delete":["41","","42","            Channel c = Channel.current();","43",""]}]}},"3daa6a97b02635d672e7646e83edb93abf50db06":{"changes":{"core\/src\/main\/resources\/lib\/layout\/task.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/layout\/task.jelly":[{"add":["118","      <j:set var=\"icon\" value=\"${rootURL}${icon.startsWith('\/images\/') || icon.startsWith('\/plugin\/') ? h.resourcePath : ''}${icon}\"\/>"],"delete":["118","      <j:set var=\"icon\" value=\"${rootURL}${icon.startsWith('images\/') || icon.startsWith('plugin\/') ? h.resourcePath : ''}${icon}\"\/>"]}]}},"7514e8c6ce35283da4a8bb4422fe885350fc8681":{"changes":{"test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["52","import hudson.tasks.BuildTrigger;","94","import org.jvnet.hudson.test.SleepBuilder;","711","    ","712","    @Issue(\"JENKINS-27871\")","713","    @Test public void testBlockBuildWhenUpstreamBuildingLock() throws Exception {","714","        final String prefix = \"JENKINS-27871\";","715","        r.getInstance().setNumExecutors(4);","716","        r.getInstance().save();","717","        ","718","        final FreeStyleProject projectA = r.createFreeStyleProject(prefix+\"A\");","719","        projectA.getBuildersList().add(new SleepBuilder(5000));","720","        ","721","        final FreeStyleProject projectB = r.createFreeStyleProject(prefix+\"B\");","722","        projectB.getBuildersList().add(new SleepBuilder(10000));     ","723","        projectB.setBlockBuildWhenUpstreamBuilding(true);","724","        ","725","        final FreeStyleProject projectC = r.createFreeStyleProject(prefix+\"C\");","726","        projectC.getBuildersList().add(new SleepBuilder(10000));","727","        projectC.setBlockBuildWhenUpstreamBuilding(true);","728","        ","729","        projectA.getPublishersList().add(new BuildTrigger(Arrays.asList(projectB), Result.SUCCESS));","730","        projectB.getPublishersList().add(new BuildTrigger(Arrays.asList(projectC), Result.SUCCESS));","731","        ","732","        final QueueTaskFuture<FreeStyleBuild> taskA = projectA.scheduleBuild2(0, new TimerTriggerCause());","733","        Thread.sleep(1000);","734","        final QueueTaskFuture<FreeStyleBuild> taskB = projectB.scheduleBuild2(0, new TimerTriggerCause());","735","        final QueueTaskFuture<FreeStyleBuild> taskC = projectC.scheduleBuild2(0, new TimerTriggerCause());","736","        ","737","        final FreeStyleBuild buildA = taskA.get(60, TimeUnit.SECONDS);       ","738","        final FreeStyleBuild buildB = taskB.get(60, TimeUnit.SECONDS);     ","739","        final FreeStyleBuild buildC = taskC.get(60, TimeUnit.SECONDS);","740","        long buildBEndTime = buildB.getStartTimeInMillis() + buildB.getDuration();","741","        assertTrue(\"Project B build should be finished before the build of project C starts. \" +","742","                \"B finished at \" + buildBEndTime + \", C started at \" + buildC.getStartTimeInMillis(), ","743","                buildC.getStartTimeInMillis() >= buildBEndTime);","744","    }"],"delete":["709",""]}]}},"761c437983ad2b08399efa5e69e848764fcff4de":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/SortedList.java":"MODIFY","changelog.html":"MODIFY","core\/src\/test\/java\/jenkins\/model\/lazy\/SortedListTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/SortedList.java":[{"add":["26","import java.util.ArrayList;","40","        this.data = new ArrayList(data);"],"delete":["39","        this.data = data;"]}],"changelog.html":[{"add":["71","  <li class=bug>","72","    Jenkins build records lazy-loading failed to load some of my jobs.","73","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15439\">issue 15439<\/a>)"],"delete":[]}],"core\/src\/test\/java\/jenkins\/model\/lazy\/SortedListTest.java":[{"add":["101","","102","    @Test","103","    public void testClone() {","104","        final int originalSize = l.size();","105","        SortedList<String> l2 = new SortedList<String>(l);","106","        assertEquals(originalSize, l2.size());","107","        assertEquals(originalSize, l.size());","108","        for (int i = 0; i < originalSize; i++) {","109","            assertEquals(l.get(i), l2.get(i));","110","        }","111","        l.remove(0);","112","        assertEquals(originalSize - 1, l.size());","113","        assertEquals(originalSize, l2.size());","114","        l2.remove(1);","115","        l2.remove(1);","116","        assertEquals(originalSize - 1, l.size());","117","        assertEquals(originalSize - 2, l2.size());","118","    }"],"delete":[]}]}},"e7466435664b7d15252b00adc6381e0d20a122af":{"changes":{"test\/src\/test\/resources\/lib\/form\/ComboBoxTest\/CompoundField\/config.jelly":"ADD","test\/src\/test\/java\/lib\/form\/ComboBoxTest.java":"ADD","core\/src\/main\/resources\/lib\/form\/combobox\/combobox.js":"MODIFY","test\/src\/test\/resources\/lib\/form\/ComboBoxTest\/CompoundFieldComboBoxBuilder\/config.jelly":"ADD"},"diff":{"test\/src\/test\/resources\/lib\/form\/ComboBoxTest\/CompoundField\/config.jelly":[{"add":[],"delete":[]}],"test\/src\/test\/java\/lib\/form\/ComboBoxTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/form\/combobox\/combobox.js":[{"add":["0","Behaviour.specify(\"INPUT.combobox2\", 'combobox', 100, function(e) {"],"delete":["0","Behaviour.specify(\"INPUT.combobox2\", 'combobox', 0, function(e) {"]}],"test\/src\/test\/resources\/lib\/form\/ComboBoxTest\/CompoundFieldComboBoxBuilder\/config.jelly":[{"add":[],"delete":[]}]}},"79afb1158372e1ea754072fbc6e0de4c4e560715":{"changes":{"debian\/debian\/control":"MODIFY"},"diff":{"debian\/debian\/control":[{"add":["10","Depends: ${shlibs:Depends}, ${misc:Depends}, daemon, adduser, psmisc, java-runtime"],"delete":["10","Depends: ${shlibs:Depends}, ${misc:Depends}, daemon, adduser, psmisc, default-jre"]}]}},"7c5da9b3c1564354958a570ea1a83d935d75a033":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/Which.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/Which.java":[{"add":["116","                    Field f = delegate.getClass().getDeclaredField(\"delegate\");","118","                    delegate = f.get(delegate);","119","                    \/\/JENKINS-5922 - workaround for CertificateReaderInputStream; JBoss 5.0.0, EAP 5.0 and EAP 5.1","121","                        f = delegate.getClass().getDeclaredField(\"is\");","122","                        f.setAccessible(true);","123","                        delegate = f.get(delegate);"],"delete":["116","                    Field f = is.getClass().getDeclaredField(\"delegate\");","118","                    delegate = f.get(is);","119","\t\t    \/\/JENKINS-5922 - workaround for CertificateReaderInputStream; JBoss 5.0.0, EAP 5.0 and EAP 5.1","121","\t\t\tf = delegate.getClass().getDeclaredField(\"is\");","122","\t\t\tf.setAccessible(true);","123","\t\t\tdelegate = f.get(delegate);"]}]}},"25ae432f206bf9cfb8d6aac817990c50fbdf1174":{"changes":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenMailer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenMailer.java":[{"add":["14","import net.sf.json.JSONObject;","15","","58","        public MavenReporter newInstance(StaplerRequest req, JSONObject formData) throws FormException {","61","            m.dontNotifyEveryUnstableBuild = req.getParameter(\"mailer_notifyEveryUnstableBuild\")==null;"],"delete":["56","        public MavenMailer newInstance(StaplerRequest req) {"]}]}},"78a42d5a4a5d545324c2d3230de6947e1ec8806e":{"changes":{"core\/src\/main\/java\/hudson\/model\/Slave.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Slave.java":[{"add":["59","import java.util.logging.Level;","60","import java.util.logging.Logger;","96","    ","97","    private static final Logger LOGGER = Logger.getLogger(Slave.class.getName());","98","    ","419","    @Nonnull","423","            listener.error(\"Issue with creating launcher for agent \" + name + \". Computer has been disconnected\");","426","            \/\/ TODO: ideally all the logic below should be inside the SlaveComputer class with proper locking to prevent race conditions, ","427","            \/\/ but so far there is no locks for setNode() hence it requires serious refactoring","428","            ","429","            \/\/ Ensure that the Computer instance still points to this node","430","            \/\/ Otherwise we may end up running the command on a wrong (reconnected) Node instance.","431","            Slave node = c.getNode();","432","            if (node != this) {","433","                String message = \"Issue with creating launcher for agent \" + name + \". Computer has been reconnected\";","434","                if (LOGGER.isLoggable(Level.WARNING)) {","435","                    LOGGER.log(Level.WARNING, message, new IllegalStateException(\"Computer has been reconnected, this Node instance cannot be used anymore\"));","436","                }","437","                return new Launcher.DummyLauncher(listener);","438","            }","439","            ","440","            \/\/ RemoteLauncher requires an active Channel instance to operate correctly","441","            final Channel channel = c.getChannel();","442","            if (channel == null) { ","443","                reportLauncerCreateError(\"The agent has not been fully initialized yet\",","444","                                         \"No remoting channel to the agent OR it has not been fully initialized yet\", listener);","445","                return new Launcher.DummyLauncher(listener);","446","            }","447","            if (channel.isClosingOrClosed()) {","448","                reportLauncerCreateError(\"The agent is being disconnected\",","449","                                         \"Remoting channel is either in the process of closing down or has closed down\", listener);","450","                return new Launcher.DummyLauncher(listener);","451","            }","452","            final Boolean isUnix = c.isUnix();","453","            if (isUnix == null) {","454","                \/\/ isUnix is always set when the channel is not null, so it should never happen","455","                reportLauncerCreateError(\"The agent has not been fully initialized yet\",","456","                                         \"Cannot determing if the agent is a Unix one, the System status request has not completed yet. \" +","457","                                         \"It is an invalid channel state, please report a bug to Jenkins if you see it.\", ","458","                                         listener);","459","                return new Launcher.DummyLauncher(listener);","460","            }","461","            ","462","            return new RemoteLauncher(listener, channel, isUnix).decorateFor(this);","463","        }","464","    }","465","    ","466","    private void reportLauncerCreateError(@Nonnull String humanReadableMsg, @CheckForNull String exceptionDetails, @Nonnull TaskListener listener) {","467","        String message = \"Issue with creating launcher for agent \" + name + \". \" + humanReadableMsg;","468","        listener.error(message);","469","        if (LOGGER.isLoggable(Level.WARNING)) {","470","            \/\/ Send stacktrace to the log as well in order to diagnose the root cause of issues like JENKINS-38527","471","            LOGGER.log(Level.WARNING, message","472","                    + \"Probably there is a race condition with Agent reconnection or disconnection, check other log entries\", ","473","                    new IllegalStateException(exceptionDetails != null ? exceptionDetails : humanReadableMsg));"],"delete":["417","            listener.error(\"Issue with creating launcher for agent \" + name + \".\");","420","            return new RemoteLauncher(listener, c.getChannel(), c.isUnix()).decorateFor(this);"]}]}},"950c1a3c326cc706345fde50f2ba0d20a56acf4a":{"changes":{"core\/src\/main\/resources\/jenkins\/management\/Messages_de.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/management\/Messages_de.properties":[{"add":["25","ReloadLink.Description=Verwirft alle Daten im Speicher und l\\u00E4dt die Konfigurationsdateien erneut aus dem Dateisystem.\\n\\","26","                       Dies ist n\\u00FCtzlich, wenn Sie Konfigurationsdateien direkt editiert haben.","29","SystemInfoLink.Description=Zeigt Umgebungsinformationen an, z.B. zur Unterst\\u00FCtzung bei der Fehlersuche.","32","ConsoleLink.Description=F\\u00FChrt ein beliebiges Skript aus zur Administration\/Fehlersuche\/Diagnose.","38","PluginsLink.Description=Plugins installieren, deinstallieren, aktivieren oder deaktivieren, welche die Funktionalit\\u00E4t von Jenkins erweitern.","40","StatisticsLink.Description=Ressourcenauslastung \\u00FCberwachen und \\u00FCberpr\\u00FCfen, ob weitere Build-Knoten sinnvoll w\\u00E4ren.","42","NodesLink.Description=Knoten hinzuf\\u00FCgen, entfernen, steuern und \\u00FCberwachen, auf denen Jenkins Jobs verteilt ausf\\u00FChren kann."],"delete":["25","ReloadLink.Description=Verwirft alle Daten im Speicher und l\\u2030dt die Konfigurationsdateien erneut aus dem Dateisystem.\\n\\","26","                       Dies ist n\\u00B8tzlich, wenn Sie Konfigurationsdateien direkt editiert haben.","29","SystemInfoLink.Description=Zeigt Umgebungsinformationen an, z.B. zur Unterst\\u00B8tzung bei der Fehlersuche.","32","ConsoleLink.Description=F\\u00B8hrt ein beliebiges Skript aus zur Administration\/Fehlersuche\/Diagnose.","38","PluginsLink.Description=Plugins installieren, deinstallieren, aktivieren oder deaktivieren, welche die Funktionalit\\u2030t von Jenkins erweitern.","40","StatisticsLink.Description=Ressourcenauslastung \\u00B8berwachen und \\u00B8berpr\\u00B8fen, ob weitere Build-Knoten sinnvoll w\\u2030ren.","42","NodesLink.Description=Knoten hinzuf\\u00B8gen, entfernen, steuern und \\u00B8berwachen, auf denen Jenkins Jobs verteilt ausf\\u00B8hren kann."]}]}},"f66e19c072a24afb6f083db9fc0124f58b9742e6":{"changes":{"core\/src\/main\/java\/hudson\/util\/jna\/Kernel32Utils.java":"MODIFY","core\/src\/test\/java\/hudson\/FilePathTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/jna\/Kernel32Utils.java":[{"add":["60","   \t\/\/ allow lookup of paths longer than MAX_PATH","61","    \t\/\/ http:\/\/msdn.microsoft.com\/en-us\/library\/aa365247(v=VS.85).aspx","62","    \tString canonicalPath = file.getCanonicalPath();","63","    \tString path = null;","64","    \tif(canonicalPath.length() < 260) {","65","    \t\t\/\/ path is short, use as-is","66","    \t\tpath = canonicalPath;","67","    \t} else if(canonicalPath.startsWith(\"\\\\\\\\\")) {","68","    \t\t\/\/ network share","69","    \t\t\/\/ \\\\server\\share --> \\\\?\\UNC\\server\\share","70","    \t\tpath = \"\\\\\\\\?\\\\UNC\\\\\" + canonicalPath.substring(2);","71","    \t} else {","72","    \t\t\/\/ prefix, canonical path should be normalized and absolute so this should work.","73","    \t\tpath = \"\\\\\\\\?\\\\\" + canonicalPath;","74","    \t}","75","      return Kernel32.INSTANCE.GetFileAttributesW(new WString(path));"],"delete":["60","      return Kernel32.INSTANCE.GetFileAttributesW(new WString(file.getCanonicalPath()));"]}],"core\/src\/test\/java\/hudson\/FilePathTest.java":[{"add":["476","   ","477","    @Bug(15418)","478","    public void testDeleteLongPathOnWindows() throws Exception {","479","        File tmp = Util.createTempDir();","480","        try {","481","            FilePath d = new FilePath(french, tmp.getPath());","482","            ","483","            \/\/ construct a very long path","484","            StringBuilder sb = new StringBuilder();","485","            while(sb.length() + tmp.getPath().length() < 260 - \"very\/\".length()) {","486","                sb.append(\"very\/\");","487","            }","488","            sb.append(\"pivot\/very\/very\/long\/path\");","489","            ","490","            FilePath longPath = d.child(sb.toString()); ","491","            longPath.mkdirs();","492","            FilePath childInLongPath = longPath.child(\"file.txt\");","493","            childInLongPath.touch(0);","494","            ","495","            File firstDirectory = new File(tmp.getAbsolutePath() + \"\/very\");","496","            Util.deleteRecursive(firstDirectory);","497","            ","498","            assertFalse(\"Could not delete directory!\", firstDirectory.exists());","499","            ","500","        } finally {","501","            Util.deleteRecursive(tmp);","502","        }","503","    }"],"delete":["476",""]}]}},"8d246cbf9de8ed1ad1ec4256f814e7b40fe0e419":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenTestDataPublisher.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenTestDataPublisher.java":[{"add":["44","import java.util.Map;","71","\t    MavenModuleSetBuild msb = (MavenModuleSetBuild) build;","72","        ","73","        Map<MavenModule, MavenBuild> moduleLastBuilds = msb.getModuleLastBuilds();","74","        ","75","        for (MavenBuild moduleBuild : moduleLastBuilds.values()) {","76","        ","77","            SurefireReport report = moduleBuild.getAction(SurefireReport.class);","78","            if (report == null) {","79","                return true;","80","            }","81","            ","82","            List<Data> data = new ArrayList<Data>();","83","            if (getTestDataPublishers() != null) {","84","                for (TestDataPublisher tdp : getTestDataPublishers()) {","85","                    Data d = tdp.getTestData(build, launcher, listener, report.getResult());","86","                    if (d != null) {","87","                        data.add(d);","88","                    }","89","                }","90","            }","91","            ","92","            if (!data.isEmpty()) {","93","                report.setData(data);","94","                moduleBuild.save();","95","            }","96","        }"],"delete":["70","\t\tSurefireReport report = build.getAction(SurefireReport.class);","71","\t\tif (report == null) {","72","\t\t\treturn true;","73","\t\t}","74","\t\t","75","\t\tList<Data> data = new ArrayList<Data>();","76","\t\tif (testDataPublishers != null) {","77","\t\t\tfor (TestDataPublisher tdp : testDataPublishers) {","78","\t\t\t\tData d = tdp.getTestData(build, launcher, listener, report.getResult());","79","\t\t\t\tif (d != null) {","80","\t\t\t\t\tdata.add(d);","81","\t\t\t\t}","82","\t\t\t}","83","\t\t}","84","\t\t","85","\t\treport.setData(data);"]}]}}}