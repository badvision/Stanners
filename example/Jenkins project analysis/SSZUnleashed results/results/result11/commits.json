{"50f14f28e55bb39dd2959040734964889c70c7cb":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/resources\/lib\/form\/textarea\/textarea.js":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=bug>","58","    Preview function for textareas using Jenkins markup did not work when CSRF protection was enabled.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17085\">issue 17085<\/a>)","83","    Revert ampersand encoding which can cause backward incompatibility issue"],"delete":["57","  <li class=>","81","    Revert ampersand encoding which can cause backwad incompatibility issue"]}],"core\/src\/main\/resources\/lib\/form\/textarea\/textarea.js":[{"add":[],"delete":["36","                method: \"POST\",","37","                requestHeaders: \"Content-Type: application\/x-www-form-urlencoded\","]}]}},"4dde24e62037439b7b73addd7cefae83a254eb3c":{"changes":{"core\/src\/main\/java\/hudson\/model\/FileParameterValue.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/FileParameterValue.java":[{"add":["61","    private transient final FileItem file;"],"delete":["61","    private final FileItem file;"]}],"changelog.html":[{"add":["58","    Using file parameters could cause build records to not load.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13536\">issue 13536<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"a7ac4b050a9c194e6db5f47e31694b48811f2496":{"changes":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["2233","            updateComputerList();"],"delete":[]}]}},"9610fe55c17853ef2f7e0eb39ce1333c6346270c":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["45","import hudson.model.Hudson.MasterComputer;","1794","\t    if(e.getOwner() instanceof MasterComputer) {","1795","\t\tenv.put(\"NODE_NAME\", \"master\");","1796","\t    } else {","1797","\t    \tenv.put(\"NODE_NAME\",e.getOwner().getName());","1798","\t    }"],"delete":["1793","            env.put(\"NODE_NAME\",e.getOwner().getName());"]}]}},"9108ab7a932883f0adeb838744c7367dadd3d9db":{"changes":{"core\/src\/main\/java\/hudson\/model\/RestartListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/RestartListener.java":[{"add":["53","            return new ComputerSet().getBusyExecutors() == 0;"],"delete":["53","            return new ComputerSet().getBusyExecutors() != 0;"]}]}},"b0832e7215613b64f12d4904f50ba1632b741573":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/AbstractMavenJavadocArchiver.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/AbstractMavenJavadocArchiver.java":[{"add":["112","            \/\/ JENKINS-9202 if project without any module","113","            if  (pom.getModules() != null &&  pom.getModules().isEmpty() && pom.isExecutionRoot() ) {","114","                build.registerAsAggregatedProjectAction(this);","115","            }","116",""],"delete":[]}]}},"f6ec318cc217671725d2a680140bf4f3d95ecbfe":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["515","    if(n) \/\/ copy the name"],"delete":["515","    if(n!=null) \/\/ copy the name"]}]}},"70613202f1177ce83e1d9d724a8b21ca9c222cd3":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["408","  border-bottom: none;"],"delete":["411","  border-bottom: 1px solid #eee;"]}]}},"67ac47af0709dde6297dffeb210b03d8b65f6033":{"changes":{"core\/src\/main\/java\/hudson\/util\/LineEndingConversion.java":"ADD","test\/src\/test\/java\/hudson\/tools\/CommandInstallerTest.java":"ADD","test\/src\/test\/java\/hudson\/tasks\/BatchFileTest.java":"ADD","core\/src\/main\/java\/hudson\/tasks\/Shell.java":"MODIFY","core\/src\/main\/java\/hudson\/tools\/AbstractCommandInstaller.java":"MODIFY","core\/src\/main\/java\/hudson\/tools\/CommandInstaller.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/BatchFile.java":"MODIFY","test\/src\/test\/java\/hudson\/tasks\/ShellTest.java":"MODIFY","test\/src\/test\/java\/hudson\/tools\/BatchCommandInstallerTest.java":"ADD","core\/src\/main\/java\/hudson\/tools\/BatchCommandInstaller.java":"MODIFY","test\/src\/test\/java\/hudson\/util\/LineEndingConversionTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/util\/LineEndingConversion.java":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/tools\/CommandInstallerTest.java":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/tasks\/BatchFileTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/Shell.java":[{"add":["34","import java.io.ObjectStreamException;","35","import hudson.util.LineEndingConversion;","54","        super(LineEndingConversion.convertEOL(command, LineEndingConversion.EOLType.Unix));","62","    private static String addLineFeedForNonASCII(String s) {","87","        return addLineFeedForNonASCII(LineEndingConversion.convertEOL(command,LineEndingConversion.EOLType.Unix));","99","    private Object readResolve() throws ObjectStreamException {","100","        return new Shell(command);","101","    }","102",""],"delete":["52","        super(fixCrLf(command));","53","    }","54","","55","    \/**","56","     * Fix CR\/LF and always make it Unix style.","57","     *\/","58","    private static String fixCrLf(String s) {","59","        \/\/ eliminate CR","60","        int idx;","61","        while((idx=s.indexOf(\"\\r\\n\"))!=-1)","62","            s = s.substring(0,idx)+s.substring(idx+1);","63","","64","        \/\/\/\/ add CR back if this is for Windows","65","        \/\/if(isWindows()) {","66","        \/\/    idx=0;","67","        \/\/    while(true) {","68","        \/\/        idx = s.indexOf('\\n',idx);","69","        \/\/        if(idx==-1) break;","70","        \/\/        s = s.substring(0,idx)+'\\r'+s.substring(idx);","71","        \/\/        idx+=2;","72","        \/\/    }","73","        \/\/}","74","        return s;","82","    private static String addCrForNonASCII(String s) {","107","        return addCrForNonASCII(fixCrLf(command));"]}],"core\/src\/main\/java\/hudson\/tools\/AbstractCommandInstaller.java":[{"add":["50","        this.command = command;"],"delete":["50","        this.command = fixCrLf(command);","86","    \/**","87","     * Fix CR\/LF and always make it Unix style.","88","     *\/","89","    \/\/TODO: replace by a Windows style","90","    private static String fixCrLf(String s) {","91","        \/\/ eliminate CR","92","        int idx;","93","        while ((idx = s.indexOf(\"\\r\\n\")) != -1) {","94","            s = s.substring(0, idx) + s.substring(idx + 1);","95","        }","96","        return s;","97","    }","98",""]}],"core\/src\/main\/java\/hudson\/tools\/CommandInstaller.java":[{"add":["28","import hudson.util.LineEndingConversion;","30","import java.io.ObjectStreamException;","40","        super(label, LineEndingConversion.convertEOL(command, LineEndingConversion.EOLType.Unix), toolHome);","54","    private Object readResolve() throws ObjectStreamException {","55","        return new CommandInstaller(getLabel(), getCommand(), getToolHome());","56","    }","57",""],"delete":["38","        super(label, command, toolHome);"]}],"core\/src\/main\/java\/hudson\/tasks\/BatchFile.java":[{"add":["28","import hudson.util.LineEndingConversion;","32","import java.io.ObjectStreamException;","42","        super(LineEndingConversion.convertEOL(command, LineEndingConversion.EOLType.Windows));","50","        return LineEndingConversion.convertEOL(command+\"\\r\\nexit %ERRORLEVEL%\",LineEndingConversion.EOLType.Windows);","57","    private Object readResolve() throws ObjectStreamException {","58","        return new BatchFile(command);","59","    }","60",""],"delete":["40","        super(command);","48","        return command+\"\\r\\nexit %ERRORLEVEL%\";"]}],"test\/src\/test\/java\/hudson\/tasks\/ShellTest.java":[{"add":["16","import org.junit.Assert;","17","import org.junit.Rule;","18","import org.junit.Test;","19","import org.jvnet.hudson.test.JenkinsRule;","20","","22"," * Tests for the Shell tasks class","23"," *","26","public class ShellTest {","27","","28","    @Rule","29","    public JenkinsRule rule = new JenkinsRule();","30","","31","    @Test","32","    public void validateShellCommandEOL() throws Exception {","33","        Shell obj = new Shell(\"echo A\\r\\necho B\\recho C\");","34","        rule.assertStringContains(obj.getCommand(), \"echo A\\necho B\\necho C\");","35","    }","36","","37","    @Test","38","    public void validateShellContents() throws Exception {","39","        Shell obj = new Shell(\"echo A\\r\\necho B\\recho C\");","40","        rule.assertStringContains(obj.getContents(), \"\\necho A\\necho B\\necho C\");","41","    }","42","","43","    @Test","50","        PretendSlave s = rule.createPretendSlave(new FakeLauncher() {","54","                rule.assertStringContains(\"\/bin\/sh\",cmds.get(0));","55","                rule.assertStringContains(\"-xe\",cmds.get(1));","56","                Assert.assertTrue(new File(cmds.get(2)).exists());","66","        FreeStyleProject p = rule.createFreeStyleProject();","70","        FreeStyleBuild b = rule.assertBuildStatusSuccess(p.scheduleBuild2(0).get());","72","        Assert.assertEquals(1,s.numLaunch);","73","        Assert.assertTrue(FileUtils.readFileToString(b.getLogFile()).contains(\"Hudson was here\"));"],"delete":["9","import org.jvnet.hudson.test.HudsonTestCase;","20","public class ShellTest extends HudsonTestCase {","27","        PretendSlave s = createPretendSlave(new FakeLauncher() {","31","                assertEquals(\"\/bin\/sh\",cmds.get(0));","32","                assertEquals(\"-xe\",cmds.get(1));","33","                assertTrue(new File(cmds.get(2)).exists());","43","        FreeStyleProject p = createFreeStyleProject();","47","        FreeStyleBuild b = assertBuildStatusSuccess(p.scheduleBuild2(0).get());","49","        assertEquals(1,s.numLaunch);","50","        assertTrue(FileUtils.readFileToString(b.getLogFile()).contains(\"Hudson was here\"));"]}],"test\/src\/test\/java\/hudson\/tools\/BatchCommandInstallerTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tools\/BatchCommandInstaller.java":[{"add":["28","import hudson.util.LineEndingConversion;","30","import java.io.ObjectStreamException;","41","        super(label, LineEndingConversion.convertEOL(command, LineEndingConversion.EOLType.Windows), toolHome);","54","","55","    private Object readResolve() throws ObjectStreamException {","56","        return new BatchCommandInstaller(getLabel(), getCommand(), getToolHome());","57","    }"],"delete":["39","        super(label, command, toolHome);"]}],"test\/src\/test\/java\/hudson\/util\/LineEndingConversionTest.java":[{"add":[],"delete":[]}]}},"a42f1812e8b1948ddca763e4623cf04f207ee005":{"changes":{"core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":[],"delete":["1601",""]}]}},"82aca6421da3c4f889d79a34197157928d5c4436":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config.jelly":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Fingerprinter.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config.properties":"ADD","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/help-defaultExcludes.groovy":"ADD","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/help-caseSensitive.html":"ADD","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/help-excludes.html":"ADD","core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/help-defaultExcludes.properties":"ADD"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config.jelly":[{"add":["28","  <f:advanced>","29","    <f:entry title=\"${%Excludes}\" field=\"excludes\">","30","      <f:textbox \/>","31","    <\/f:entry>","32","    <f:entry field=\"defaultExcludes\" >","33","      <f:checkbox title=\"${%defaultExcludes}\" default=\"true\"\/>","34","    <\/f:entry>","35","    <f:entry field=\"caseSensitive\" >","36","      <f:checkbox title=\"${%caseSensitive}\" default=\"true\"\/>","37","    <\/f:entry>","38","  <\/f:advanced>"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/Fingerprinter.java":[{"add":["61","import org.kohsuke.stapler.DataBoundSetter;","95","    \/**","96","     * Default null 'excludes' pattern as in Ant.","97","     *\/","98","    private String excludes = null;","99","","100","    \/**","101","     * Default ant exclusion","102","     *\/","103","    private Boolean defaultExcludes = true;","104","","105","    \/**","106","     * Indicate whether include and exclude patterns should be considered as case sensitive","107","     *\/","108","    private Boolean caseSensitive = true;","109","","117","    @DataBoundSetter public void setExcludes(String excludes) {","118","        this.excludes = Util.fixEmpty(excludes);","119","    }","120","","121","    @DataBoundSetter public void setDefaultExcludes(boolean defaultExcludes) {","122","        this.defaultExcludes = defaultExcludes;","123","    }","124","","125","    @DataBoundSetter public void setCaseSensitive(boolean caseSensitive) {","126","        this.caseSensitive = caseSensitive;","127","    }","128","","139","    public String getExcludes() {","140","        return excludes;","141","    }","142","","143","    public boolean getDefaultExcludes() {","144","        return defaultExcludes;","145","    }","146","","147","    public boolean getCaseSensitive() {","148","        return caseSensitive;","149","    }","150","","151","    \/**","152","     * We ensure that fields are initialized to","153","     * default values after deserialization.","154","     *\/","155","    private Object readResolve() {","156","        if(defaultExcludes == null) {","157","            defaultExcludes = true;","158","        }","159","        if(caseSensitive == null) {","160","            caseSensitive = true;","161","        }","162","        return this;","163","    }","164","","269","        private final String excludes;","270","        private final boolean defaultExcludes;","271","        private final boolean caseSensitive;","274","        FindRecords(String targets, String excludes, boolean defaultExcludes, boolean caseSensitive, long buildTimestamp) {","276","            this.excludes = excludes;","277","            this.defaultExcludes = defaultExcludes;","278","            this.caseSensitive = caseSensitive;","286","            FileSet src = Util.createFileSet(baseDir, targets, excludes);","287","            src.setDefaultexcludes(defaultExcludes);","288","            src.setCaseSensitive(caseSensitive);","314","        for (Record r : ws.act(new FindRecords(targets, excludes, defaultExcludes, caseSensitive, build.getTimeInMillis()))) {"],"delete":["217","        FindRecords(String targets, long buildTimestamp) {","226","            FileSet src = Util.createFileSet(baseDir,targets);","252","        for (Record r : ws.act(new FindRecords(targets, build.getTimeInMillis()))) {"]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/config.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/help-defaultExcludes.groovy":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/help-caseSensitive.html":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/help-excludes.html":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":[{"add":["236","                    Fingerprinter f = new Fingerprinter(artifacts);","237","                    f.setExcludes(excludes);","238","                    f.setDefaultExcludes(defaultExcludes);","239","                    f.setCaseSensitive(caseSensitive);","240","                    f.perform(build, ws, launcher, listener);"],"delete":["236","                    new Fingerprinter(artifacts).perform(build, ws, launcher, listener);"]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/help-defaultExcludes.properties":[{"add":[],"delete":[]}]}},"0e1bc560ae7f066a2fb366bc78771224df07d278":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["226","    <code>hpi:run<\/code> did not work for bundled plugins.","227","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18352\">issue 18352<\/a>)","228","  <li class=bug>"],"delete":[]}]}},"822cec62dba4f31aac03afed26b575091f774342":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["251","                        offlineCause = null;","268","                    if (channel==null && offlineCause == null) {"],"delete":["251","","268","                    if (channel==null) {"]}]}},"eb39e8d51cced45be978ad4a40de38af956d8651":{"changes":{"test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["125","import static org.hamcrest.Matchers.contains;","461","    @Issue(\"JENKINS-41127\")","462","    @Test public void flyweightTasksUnwantedConcurrency() throws Exception {","463","        Label label = r.jenkins.getSelfLabel();","464","        AtomicInteger cnt = new AtomicInteger();","465","        TestFlyweightTask task1 = new TestFlyweightTask(cnt, label);","466","        TestFlyweightTask task2 = new TestFlyweightTask(cnt, label);","467","        assertFalse(task1.isConcurrentBuild());","468","        assertFalse(task2.isConcurrentBuild());","469","        \/\/ We need to call Queue#maintain without any interleaving Queue modification to reproduce the issue.","470","        Queue.withLock(() -> {","471","            r.jenkins.getQueue().schedule2(task1, 0);","472","            r.jenkins.getQueue().maintain();","473","            Queue.Item item1 = r.jenkins.getQueue().getItem(task1);","474","            assertThat(r.jenkins.getQueue().getPendingItems(), contains(item1));","475","            r.jenkins.getQueue().schedule2(task2, 0);","476","            r.jenkins.getQueue().maintain();","477","            Queue.Item item2 = r.jenkins.getQueue().getItem(task2);","478","            \/\/ Before the fix, item1 would no longer be present in the pending items (but would","479","            \/\/ still be assigned to a live executor), and item2 would not be blocked, which would","480","            \/\/ allow the tasks to execute concurrently.","481","            assertThat(r.jenkins.getQueue().getPendingItems(), contains(item1));","482","            assertTrue(item2.isBlocked());","483","        });","484","    }","485",""],"delete":[]}]}},"b816be60000edf5d7a9d50bf893fd285f2adec1f":{"changes":{"core\/src\/test\/java\/hudson\/tasks\/test\/TestObjectTest.java":"ADD","core\/src\/main\/java\/hudson\/tasks\/test\/TestObject.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/tasks\/test\/TestObjectTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/test\/TestObject.java":[{"add":["33","","34","import org.apache.commons.lang.StringEscapeUtils;","35","import org.apache.commons.lang.StringUtils;","43","import java.net.URI;","44","import java.net.URISyntaxException;","355","        \/\/ this still seems to be a bit faster than a single replace with regexp","356","        return s.replace('\/', '_').replace('\\\\', '_').replace(':', '_').replace('?', '_').replace('#', '_');","357","        ","358","        \/\/ Note: we probably should some helpers like Commons URIEscapeUtils here to escape all invalid URL chars, but then we","359","        \/\/ still would have to escape \/, ? and so on"],"delete":["350","        \/\/ 3 replace calls is still 2-3x faster than a regex replaceAll","351","        return s.replace('\/', '_').replace('\\\\', '_').replace(':', '_');"]}],"changelog.html":[{"add":["60","  <li class=bug>","61","    Broken links to test results with '#' or '?' in the name","62","    (a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10458\">issue 10458<\/a>)"],"delete":[]}]}},"3b712af2ded342d992aed559fcce314e11bb32b7":{"changes":{"core\/src\/main\/java\/jenkins\/triggers\/ReverseBuildTrigger.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/triggers\/ReverseBuildTrigger.java":[{"add":["75","import org.kohsuke.stapler.DataBoundSetter;","94","    private Result threshold = Result.SUCCESS;","97","    public ReverseBuildTrigger(String upstreamProjects) {","109","    @DataBoundSetter","110","    public void setThreshold(Result r) {","111","        this.threshold = r;","112","    }","113",""],"delete":["93","    private final Result threshold;","96","    public ReverseBuildTrigger(String upstreamProjects, Result threshold) {","98","        this.threshold = threshold;"]}]}},"4378e878ae327a954911ae4ef84679e0060b63e2":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/slaves\/JNLPLauncherTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["334","                    cause.printStackTrace(taskListener.error(\"Connection terminated\"));","338","                closeChannel();","503","            for (ComputerListener cl : ComputerListener.all())","504","                cl.onOffline(this);"],"delete":["331","                SlaveComputer.this.channel = null;","335","                     cause.printStackTrace(taskListener.error(\"Connection terminated\"));","504","        for (ComputerListener cl : ComputerListener.all())","505","            cl.onOffline(this);"]}],"changelog.html":[{"add":["95","  <li class=bug>","96","    <tt>ComputerListener.onOffline<\/tt> was not called when the client was terminated abruptly.","97","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12680\">issue 12680<\/a>)","98","  <li class=ref>"],"delete":["95","  <li class=rfe>"]}],"test\/src\/test\/java\/hudson\/slaves\/JNLPLauncherTest.java":[{"add":["33","import hudson.model.TaskListener;","39","import org.jvnet.hudson.test.TestExtension;","41","import javax.inject.Inject;","43","import java.io.IOException;","75","        \/\/ make sure that onOffline gets called just the right number of times","76","        assertEquals(1, ComputerListener.all().get(ListenerImpl.class).offlined);","79","    @TestExtension","80","    public static class ListenerImpl extends ComputerListener {","81","        int offlined = 0;","82","","83","        @Override","84","        public void onOffline(Computer c) {","85","            offlined++;","86","            assertTrue(c.isOffline());","87","        }","88","    }","89","    ","90","    "],"delete":[]}]}},"d9840234a7fdfab77e9d4ffbe470cbf9f09e75c2":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/cc.xml.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["612","    ","613","    \/**","614","     * Returns the last completed build, if any. Otherwise null.","615","     *\/","616","    @Exported @QuickSilver","617","    public RunT getLastCompletedBuild() {","618","       RunT r = getLastBuild();","619","       while(r!=null && r.isBuilding())","620","           r=r.getPreviousBuild();","621","       return r;","622","    }"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/View\/cc.xml.jelly":[{"add":["10","      <j:set var=\"lb\" value=\"${p.lastCompletedBuild}\"\/>"],"delete":["10","      <j:set var=\"lb\" value=\"${p.lastBuild}\"\/>"]}]}},"9a2882dd704bece9b7ca51a52347dad15d79f843":{"changes":{"core\/src\/main\/java\/jenkins\/util\/AntClassLoader.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/util\/AntClassLoader.java":[{"add":["31","import org.kohsuke.accmod.Restricted;","32","import org.kohsuke.accmod.restrictions.NoExternalUse;","76","@Restricted(NoExternalUse.class)","250","        super(parent);  \/\/ KK patch for JENKINS-21579","336","        super(parent);  \/\/ KK patch for JENKINS-21579"],"delete":[]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Fixed a slow down in resource loading caused by fix to JENKINS-18677.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-21579\">issue 21579<\/a>)"],"delete":[]}]}},"c8584b9760de7f1bb25e696703102a9e9aa784dd":{"changes":{"core\/src\/main\/resources\/hudson\/security\/GlobalMatrixAuthorizationStrategy\/config.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/security\/GlobalMatrixAuthorizationStrategy\/config.jelly":[{"add":["23","    <link rel=\"stylesheet\" href=\"${rootURL}${app.VIEW_RESOURCE_PATH}\/hudson\/security\/table.css\" type=\"text\/css\" \/>"],"delete":["23","    <link rel=\"stylesheet\" href=\"${app.VIEW_RESOURCE_PATH}\/hudson\/security\/table.css\" type=\"text\/css\" \/>"]}]}},"92d6063c40c35128a629eb2a803c331f347712a1":{"changes":{"test\/src\/test\/java\/hudson\/security\/TokenBasedRememberMeServices2Test.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/security\/TokenBasedRememberMeServices2Test.java":[{"add":["34","import test.security.realm.InMemorySecurityRealm;","36","import javax.annotation.concurrent.GuardedBy;","297","    public void rememberMeToken_shouldLoadUserDetailsOnlyOnce() throws Exception {","299","        LoadUserCountingSecurityRealm realm = new LoadUserCountingSecurityRealm();","300","        realm.createAccount(\"alice\");","301","        j.jenkins.setSecurityRealm(realm);","303","        realm.verifyInvocations(1);","312","        realm.verifyInvocations(1);","316","","317","        \/\/ finally, ensure that loadUserByUsername is not being called anymore","318","        wc.goTo(\"\");","319","        assertUserConnected(wc, \"alice\");","320","        realm.verifyInvocations(0);","321","    }","322","","323","    private static class LoadUserCountingSecurityRealm extends InMemorySecurityRealm {","324","        \/\/ if this class wasn't serialized into config.xml, this could be replaced by @Spy from Mockito","325","        @GuardedBy(\"this\")","326","        private int counter = 0;","327","","328","        @Override","329","        public synchronized UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {","330","            ++counter;","331","            return super.loadUserByUsername(username);","332","        }","333","","334","        synchronized void verifyInvocations(int count) {","335","            assertEquals(count, counter);","336","            counter = 0;","337","        }"],"delete":["295","    public void rememberMeToken_shouldSetUserSeedInSession() throws Exception {","297","        j.jenkins.setSecurityRealm(j.createDummySecurityRealm());"]}]}},"6b6a69ec0d63986d82616794d5a7fcf93df14b0e":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenProcessFactory.java":"MODIFY","changelog.html":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/AbstractMavenProcessFactory.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenProcessFactory.java":[{"add":["28","import hudson.Util;","71","            if (jar.exists() && jar.digest().equals(Util.getDigestOf(MavenProcessFactory.class.getClassLoader().getResourceAsStream(\"classworlds.jar\")))) {","74","                InputStream in = MavenProcessFactory.class.getClassLoader().getResourceAsStream(\"classworlds.jar\");"],"delete":["42","import java.net.URLConnection;","71","            URLConnection conn = MavenProcessFactory.class.getClassLoader().getResource(\"classworlds.jar\").openConnection();","72","            if (jar.lastModified() > conn.getLastModified()) {","75","                InputStream in = conn.getInputStream();"]}],"changelog.html":[{"add":["63","  <li class='major bug'>","64","    Old copies of <code>maven3-agent.jar<\/code> on slaves were not being reliably updated, leading to errors.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19251\">issue 19251<\/a>)"],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/AbstractMavenProcessFactory.java":[{"add":["10","import hudson.Util;","537","        } else if (copiedJar.exists() && copiedJar.digest().equals(Util.getDigestOf(jar))) {"],"delete":["536","        } else if (copiedJar.lastModified() > jar.lastModified()) {"]}]}},"cf3aa1d90917f816da9c68bf305c21549a7c495a":{"changes":{"core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":[{"add":["199","            final OutputStream log = computer.openLogFile();","205","                        try {","206","                            log.close();","207","                        } catch (IOException e) {","208","                            e.printStackTrace(); ","209","                        }"],"delete":["199","            OutputStream log = computer.openLogFile();"]}]}},"7205da0205a67324919cb9aae024cdd45a00792b":{"changes":{"test\/src\/test\/java\/jenkins\/model\/UnlabeledLoadStatisticsTest.java":"ADD","core\/src\/main\/java\/jenkins\/model\/UnlabeledLoadStatistics.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/labels\/LabelAssignmentAction.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/model\/UnlabeledLoadStatisticsTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/UnlabeledLoadStatistics.java":[{"add":["33","import hudson.model.queue.Tasks;","37","import java.util.List;","82","        final Jenkins j = Jenkins.getInstance();","83","        if (j == null) { \/\/ Consider queue as empty when Jenkins is inactive","84","            return 0;","85","        }","86","        return j.getQueue().strictCountBuildableItemsFor(null); "],"delete":["80","        return Jenkins.getInstance().getQueue().countBuildableItemsFor(null);"]}],"core\/src\/main\/java\/hudson\/model\/labels\/LabelAssignmentAction.java":[{"add":["9","import javax.annotation.Nonnull;","38","    Label getAssignedLabel(@Nonnull SubTask task);"],"delete":["37","    Label getAssignedLabel(SubTask task);"]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["126","import javax.annotation.Nonnegative;","945","     * @param l Label to be checked. If null, any label will be accepted.","946","     *    If you want to count {@link BuildableItem}s without assigned labels,","947","     *    use {@link #strictCountBuildableItemsFor(hudson.model.Label)}.","948","     * @return Number of {@link BuildableItem}s for the specified label. ","950","    public @Nonnegative int countBuildableItemsFor(@CheckForNull Label l) {","963","    ","964","    \/**","965","     * How many {@link BuildableItem}s are assigned for the given label?","966","     * <p\/>","967","     * The implementation is quite similar to {@link #countBuildableItemsFor(hudson.model.Label)},","968","     * but it has another behavior for null parameters.","969","     * @param l Label to be checked. If null, only jobs without assigned labels","970","     *      will be taken into the account.","971","     * @return Number of {@link BuildableItem}s for the specified label.","972","     * @since TODO","973","     *\/","974","    public @Nonnegative int strictCountBuildableItemsFor(@CheckForNull Label l) {","975","        Snapshot _snapshot = this.snapshot;","976","        int r = 0;","977","        for (BuildableItem bi : _snapshot.buildables)","978","            for (SubTask st : bi.task.getSubTasks())","979","                if (bi.getAssignedLabelFor(st) == l)","980","                    r++;","981","        for (BuildableItem bi : _snapshot.pendings)","982","            for (SubTask st : bi.task.getSubTasks())","983","                if (bi.getAssignedLabelFor(st) == l)","984","                    r++;","985","        return r;","986","    }","1839","         * Test if the specified {@link SubTask} needs to be run on a node with a particular label.","1841","         * This method takes {@link LabelAssignmentAction} into account, the first","1842","         * non-null assignment will be returned. ","1843","         * Otherwise falls back to {@link SubTask#getAssignedLabel()}","1844","         * @param st {@link SubTask} to be checked.","1845","         * @return Required {@link Label}. Otherwise null, indicating it can run on anywhere.","1846","","1848","        public @CheckForNull Label getAssignedLabelFor(@Nonnull SubTask st) {"],"delete":["945","    public int countBuildableItemsFor(Label l) {","1810","         * Test if the specified {@link SubTask} needs to be run on a node with a particular label, and","1811","         * return that {@link Label}. Otherwise null, indicating it can run on anywhere.","1812","         *","1814","         * This code takes {@link LabelAssignmentAction} into account, then falls back to {@link SubTask#getAssignedLabel()}","1816","        public Label getAssignedLabelFor(SubTask st) {"]}]}},"43f1f5d100ba8dd730e5be02d182c6e9551ee9c8":{"changes":{"core\/src\/main\/resources\/hudson\/widgets\/BuildHistoryWidget\/entries.jelly":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY","core\/src\/main\/resources\/lib\/hudson\/queue.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/widgets\/BuildHistoryWidget\/entries.jelly":[{"add":["45","              <a href=\"${rootURL}\/queue\/cancelItem?id=${item.id}\">"],"delete":["45","              <a href=\"${rootURL}\/queue\/item\/${item.id}\/cancelQueue\">"]}],"changelog.html":[{"add":["58","    Avoid a 404 when canceling queue items.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14813\">issue 14813<\/a>)","60","  <li class=bug>","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7162\">issue 7162<\/a>)"],"delete":["59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7162\">issue 7162<\/a>)  "]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["104","import org.kohsuke.stapler.QueryParameter;","573","    \/**","574","     * Called from {@code queue.jelly} and {@code entries.jelly}.","575","     *\/","576","    public HttpResponse doCancelItem(@QueryParameter int id) throws IOException, ServletException {","577","        Item item = getItem(id);","578","        if (item != null) {","579","            cancel(item);","580","        } \/\/ else too late, ignore (JENKINS-14813)","581","        return HttpResponses.forwardToPreviousPage();","582","    }","583","","1376","        \/** @deprecated Use {@link #doCancelItem} instead. *\/","1377","        @Deprecated"],"delete":["1364","        \/**","1365","         * Called from queue.jelly.","1366","         *\/"]}],"core\/src\/main\/resources\/lib\/hudson\/queue.jelly":[{"add":["81","                <a href=\"${rootURL}\/queue\/cancelItem?id=${item.id}\"><img src=\"${imagesURL}\/16x16\/stop.png\" alt=\"cancel this build\" height=\"16\" width=\"16\"\/><\/a>"],"delete":["81","                <a href=\"${rootURL}\/queue\/item\/${item.id}\/cancelQueue\"><img src=\"${imagesURL}\/16x16\/stop.png\" alt=\"cancel this build\" height=\"16\" width=\"16\"\/><\/a>"]}]}},"08fe459d1219fc8f0a4cc3a7f76c42d2072b673b":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["180","        <version>2.57<\/version>"],"delete":["180","        <version>2.56<\/version>"]}]}},"a1def496830441922fc14e4dbaec9c1c8ad81610":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["108","    <remoting.version>3.23<\/remoting.version>"],"delete":["108","    <remoting.version>3.22<\/remoting.version>"]}]}},"9cb9a8f63fcab3f909288c9e95d23e68e94d5b2b":{"changes":{"war\/src\/main\/webapp\/scripts\/sortable.js":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/sortable.js":[{"add":["180","            if(dir === arrowTable.down) {\/\/ only need to reverse when it's descending"],"delete":["180","            if(dir === arrowTable.up) {\/\/ ascending"]}]}},"beb166680e9320e2aa05aa44567345fca912b570":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"changelog.html":[{"add":["58","    Tools download does not respect proxy settings","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-5271\">issue 5271<\/a>)","60","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["657","            InputStream in = archive.getProtocol().startsWith(\"http\") ? ProxyConfiguration.getInputStream(archive) : con.getInputStream();"],"delete":["657","            InputStream in = archive.getProtocol().equals(\"http\") ? ProxyConfiguration.getInputStream(archive) : con.getInputStream();"]}]}},"ff36adf0d243e2c3461045615ee654eb33665acb":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/TimeDuration.java":"MODIFY","core\/src\/test\/java\/jenkins\/util\/TimeDurationTest.java":"ADD","core\/src\/main\/java\/jenkins\/model\/ParameterizedJobMixIn.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["173","                getJob(), delay.getTimeInSeconds(), new ParametersAction(values), new CauseAction(new Cause.UserIdCause()));","201","                getJob(), delay.getTimeInSeconds(), new ParametersAction(values), ParameterizedJobMixIn.getBuildCause(getJob(), req)).getItem();"],"delete":["173","                getJob(), delay.getTime(), new ParametersAction(values), new CauseAction(new Cause.UserIdCause()));","201","                getJob(), delay.getTime(), new ParametersAction(values), ParameterizedJobMixIn.getBuildCause(getJob(), req)).getItem();"]}],"core\/src\/main\/java\/jenkins\/util\/TimeDuration.java":[{"add":["23","    \/**","24","     * Returns the duration of this instance in <em>milliseconds<\/em>.","25","     * @deprecated use {@link #getTimeInMillis()} instead.","26","     *","27","     * This method has always returned a time in milliseconds, when various callers incorrectly assumed seconds.","28","     * And this spread through the codebase. So this has been deprecated for clarity in favour of more explicitly named","29","     * methods.","30","     *\/","31","    @Deprecated","36","    \/**","37","     * Returns the duration of this instance in <em>milliseconds<\/em>.","38","     *\/","43","    \/**","44","     * Returns the duration of this instance in <em>milliseconds<\/em>.","45","     *\/","46","    public int getTimeInSeconds() {","47","        return (int) (millis \/ 1000L);","48","    }","49","","50","","55","    \/**","56","     * Creates a {@link TimeDuration} from the delay passed in parameter","57","     * @param delay the delay either in milliseconds without unit, or in seconds if suffixed by sec or secs.","58","     * @return the TimeDuration created from the delay expressed as a String.","59","     *\/","60","    @CheckForNull","61","    public static TimeDuration fromString(@CheckForNull String delay) {","62","        if (delay == null) {","64","        }","66","        long unitMultiplier = 1L;","67","        delay = delay.trim();","70","            if (delay.endsWith(\"sec\") || delay.endsWith(\"secs\")) {","71","                delay = delay.substring(0, delay.lastIndexOf(\"sec\"));","72","                delay = delay.trim();","73","                unitMultiplier = 1000L;","74","            }","75","            return new TimeDuration(Long.parseLong(delay.trim()) * unitMultiplier);"],"delete":["35","    public static @CheckForNull TimeDuration fromString(@CheckForNull String delay) {","36","        if (delay==null)","41","            if(delay.endsWith(\"sec\"))   delay=delay.substring(0,delay.length()-3);","42","            if(delay.endsWith(\"secs\"))  delay=delay.substring(0,delay.length()-4);","43","            return new TimeDuration(Long.parseLong(delay));"]}],"core\/src\/test\/java\/jenkins\/util\/TimeDurationTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/ParameterizedJobMixIn.java":[{"add":["215","        Queue.Item item = Jenkins.getInstance().getQueue().schedule2(asJob(), delay.getTimeInSeconds(), getBuildCause(asJob(), req)).getItem();"],"delete":["215","        Queue.Item item = Jenkins.getInstance().getQueue().schedule2(asJob(), delay.getTime(), getBuildCause(asJob(), req)).getItem();"]}]}},"00d27176f3a452e38bd0caafebe78c7bc2fa822f":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ListViewTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["619","    @Override public void delete() throws IOException, InterruptedException {"],"delete":["619","    @Override public synchronized void delete() throws IOException, InterruptedException {"]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["509","    public void delete() throws IOException, InterruptedException {","511","        synchronized (this) { \/\/ could just make performDelete synchronized but overriders might not honor that","512","            performDelete();","513","        } \/\/ JENKINS-19446: leave synch block, but JENKINS-22001: still notify synchronously","514","        invokeOnDeleted();","515","        Jenkins.getInstance().rebuildDependencyGraphAsync();","516","    }","518","    \/**","519","     * A pointless function to work around what appears to be a HotSpot problem. See JENKINS-5756 and bug 6933067","520","     * on BugParade for more details.","521","     *\/","522","    private void invokeOnDeleted() throws IOException {","523","        getParent().onDeleted(AbstractItem.this);"],"delete":["45","import jenkins.model.Jenkins.MasterComputer;","510","    public synchronized void delete() throws IOException, InterruptedException {","512","        performDelete();","514","        \/\/ defer the notification to avoid the lock ordering problem. See JENKINS-19446.","515","        MasterComputer.threadPoolForRemoting.submit(new java.util.concurrent.Callable<Void>() {","516","            @Override","517","            public Void call() throws Exception {","518","                invokeOnDeleted();","519","                Jenkins.getInstance().rebuildDependencyGraphAsync();","520","                return null;","521","            }","522","","523","            \/**","524","             * A pointless function to work around what appears to be a HotSpot problem. See JENKINS-5756 and bug 6933067","525","             * on BugParade for more details.","526","             *\/","527","            private void invokeOnDeleted() throws IOException {","528","                getParent().onDeleted(AbstractItem.this);","529","            }","530","        });"]}],"test\/src\/test\/java\/hudson\/model\/ListViewTest.java":[{"add":[],"delete":["130","        Thread.sleep(500); \/\/ TODO working around crappy JENKINS-19446 fix"]}]}},"5098524513883a48d07fd32d5a6f058d68adb8b8":{"changes":{"test\/src\/test\/java\/jenkins\/install\/LoadDetachedPluginsTest.java":"MODIFY","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithDependency.zip":"ADD"},"diff":{"test\/src\/test\/java\/jenkins\/install\/LoadDetachedPluginsTest.java":[{"add":["28","import hudson.Plugin;","33","import java.io.File;","48","import static org.hamcrest.Matchers.notNullValue;","86","    @Issue(\"JENKINS-48604\")","87","    @Test","88","    @LocalData","89","    public void upgradeFromJenkins2WithDependency() {","90","        VersionNumber since = new VersionNumber(\"2.0\");","91","        rr.then((JenkinsRule r) -> {","92","            List<DetachedPlugin> detachedPlugins = ClassicPluginStrategy.getDetachedPlugins(since);","93","            assertThat(\"Plugins have been detached since the pre-upgrade version\",","94","                    detachedPlugins.size(), greaterThan(1));","95","            assertThat(\"Plugins detached between the pre-upgrade version and the current version should be installed\",","96","                    getInstalledDetachedPlugins(r, detachedPlugins).size(), equalTo(detachedPlugins.size()));","97","            Plugin scriptSecurity = r.jenkins.getPlugin(\"script-security\");","98","            assertThat(\"Script-security should be installed\", scriptSecurity, notNullValue());","99","            assertThat(\"Dependencies of detached plugins should not be downgraded\",","100","                    scriptSecurity.getWrapper().getVersionNumber(), greaterThan(new VersionNumber(\"1.18.1\")));","101","            assertNoFailedPlugins(r);","102","        });","103","    }","104",""],"delete":[]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithDependency.zip":[{"add":[],"delete":[]}]}},"073bd72fc904a965eb63880f1e87d0626721b0b2":{"changes":{"core\/src\/test\/resources\/hudson\/tasks\/junit\/junit-report-nested-testsuites.xml":"ADD","core\/src\/test\/java\/hudson\/tasks\/junit\/SuiteResultTest.java":"MODIFY"},"diff":{"core\/src\/test\/resources\/hudson\/tasks\/junit\/junit-report-nested-testsuites.xml":[{"add":[],"delete":[]}],"core\/src\/test\/java\/hudson\/tasks\/junit\/SuiteResultTest.java":[{"add":["58","    ","59","    private List<SuiteResult> parseSuites(File file) throws Exception {","60","        return SuiteResult.parse(file, false);","61","    }","202","    ","203","    @Bug(6454)","204","    public void testParseNestedTestSuites() throws Exception {","205","        \/\/ A report with several nested suites","206","        \/\/ 3 of them have actual some tests - each exactly one","207","        List<SuiteResult> results = parseSuites(getDataFile(\"junit-report-nested-testsuites.xml\"));","208","        assertEquals(3, results.size());","209","        ","210","        for (SuiteResult result : results) {","211","            assertEquals(1, result.getCases().size());","212","        }","213","    }"],"delete":[]}]}},"fe1994a4efe7e2e61a931899731a00b16ecd15df":{"changes":{"war\/resources\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/java\/hudson\/model\/DownloadService.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"war\/resources\/scripts\/hudson-behavior.js":[{"add":["1580","        \/\/ send the payload back in the body. We used to send this in as a form submission, but that hits the form size check in Jetty.","1582","            contentType:\"application\/json\",","1583","            encoding:\"UTF-8\",","1584","            postBody:Object.toJSON(data),"],"delete":["1581","            parameters:{json:Object.toJSON(data)},"]}],"core\/src\/main\/java\/hudson\/model\/DownloadService.java":[{"add":["28","import hudson.util.IOUtils;","40","import org.kohsuke.stapler.StaplerRequest;","202","        public void doPostBack(StaplerRequest req) throws IOException {","205","            df.write(IOUtils.toString(req.getInputStream(),\"UTF-8\"));"],"delete":["200","        public void doPostBack(@QueryParameter String json) throws IOException {","203","            df.write(json);"]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["31","import hudson.util.IOUtils;","38","import org.kohsuke.stapler.StaplerRequest;","136","    public void doPostBack(StaplerRequest req) throws IOException, GeneralSecurityException {","138","        String json = IOUtils.toString(req.getInputStream(),\"UTF-8\");"],"delete":["134","    public void doPostBack(@QueryParameter String json) throws IOException, GeneralSecurityException {"]}]}},"370989fec12a139a96b66335185b2eb804bf298e":{"changes":{"test\/src\/test\/java\/hudson\/model\/ProjectTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/ProjectTest.java":[{"add":["98","        reload(); ","111","        assertNotNull(\"Project should have last build.\", p.getLastBuild());","112","        assertNotNull(\"Project should have transient action TransientAction.\", p.getAction(TransientAction.class));","136","        assertEquals(\"Environment should have set jdk.\", \"some_java\", var.get(\"jdk\"));","152","        assertEquals(\"Project should have Jenkins's self label.\", j.jenkins.getSelfLabel(), p.getAssignedLabel());","156","        assertEquals(\"Project should have self label of slave\", slave.getSelfLabel(), p.getAssignedLabel());","167","        assertEquals(\"Project should return name of slave.\", slave.getSelfLabel().name, p.getAssignedLabelString());","227","    ","288","        assertTrue(\"Project should schedule polling.\", p.schedulePolling());","290","        assertFalse(\"Project should not schedule polling because project is disabled.\", p.schedulePolling());","460","        project.getBuildersList().add(new Shell(\"echo helloWorld > change.log\"));","461","        j.buildAndAssertSuccess(project);","462","        j.buildAndAssertSuccess(project2);","463","        Map<Integer,Fingerprint.RangeSet> ralationship = project.getRelationship(project2);","464","        assertFalse(\"Project \" + project.getDisplayName() + \" should have relationship with \" + project2.getDisplayName(), ralationship.isEmpty());      ","466","        assertFalse(\"Relationship should not contains build 4 of project \" + project.getDisplayName() + \" because previous fingerprinted file was not change since build 3\", ralationship.keySet().contains(4));","467","        assertEquals(\"Build 2 of project \" + project2.getDisplayName() + \" should be the first build which depends on build 3 of project \" + project.getDisplayName(), 2, ralationship.get(3).min());","468","        assertEquals(\"Build 3 of project \" + project2.getDisplayName() + \" should be the last build which depends on build 3 of project \" + project.getDisplayName(), 3, ralationship.get(3).max()-1);","469","        assertEquals(\"Build 4 of project \" + project2.getDisplayName() + \" should depend only on build 5 of project \" + project.getDisplayName(), 4, ralationship.get(5).min());","470","        assertEquals(\"Build 4 of project \" + project2.getDisplayName() + \" should depend only on build 5 of project \" + project.getDisplayName(), 4, ralationship.get(5).max()-1);"],"delete":["77","import org.junit.Ignore;","99","        if(j.jenkins.servletContext.getAttribute(\"app\") instanceof HudsonIsLoading){","100","            Thread.sleep(500);","101","        } ","114","        assertTrue(\"Project should have last build.\", p.getLastBuild()!=null);","115","        assertTrue(\"Project should have transient action TransientAction.\", p.getAction(TransientAction.class)!=null);","139","        assertEquals(\"Environment should have set jdk.\", var.get(\"jdk\"), \"some_java\");","155","        assertEquals(\"Project should have Jenkins's self label.\", p.getAssignedLabel(), j.jenkins.getSelfLabel());","159","        assertEquals(\"Project should have self label of slave\", p.getAssignedLabel(), slave.getSelfLabel());","170","        assertEquals(\"Project should return name of slave.\", p.getAssignedLabelString(), slave.getSelfLabel().name);","230","","231","    @Ignore(\"TODO currently fails: Project should be buildable after save.\")","240","        p2.onCopiedFrom(p);","293","        assertTrue(\"Project should schedule pulling.\", p.schedulePolling());","295","        assertFalse(\"Project should not schedule pulling because project is disabled.\", p.schedulePolling());","448","    @Ignore(\"TODO currently fails: Relationship should contains build 4 of project project\")","466","        assertFalse(\"Project \" + project.getDisplayName() + \" should have relationship with \" + project2.getDisplayName(), project.getRelationship(project2).isEmpty());","467","        Map<Integer,Fingerprint.RangeSet> ralationship = project.getRelationship(project2);       ","469","        assertTrue(\"Relationship should contains build 4 of project \" + project.getDisplayName(), ralationship.keySet().contains(4));","470","        assertEquals(\"Build 2 of project \" + project2.getDisplayName() + \" should depend on build 3 of project \" + project.getDisplayName(), 2, ralationship.get(3).min());","471","        assertEquals(\"Build 3 of project \" + project2.getDisplayName() + \" should depend on build 3 of project \" + project.getDisplayName(), 3, ralationship.get(3).max()-1);","472","        assertEquals(\"Build 2 of project \" + project2.getDisplayName() + \" should depend on build 4 of project \" + project.getDisplayName(), 2, ralationship.get(4).min());","473","        assertEquals(\"Build 3 of project \" + project2.getDisplayName() + \" should depend on build 4 of project \" + project.getDisplayName(), 3, ralationship.get(4).max()-1);"]}]}},"6a75fe64e69c9f53757603fc849c16099dfc483a":{"changes":{"core\/src\/main\/java\/hudson\/security\/PAMSecurityRealm.java":"MODIFY","\/dev\/null":"DELETE","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/PAMSecurityRealm.java":[{"add":["68","public class PAMSecurityRealm extends AbstractPasswordBasedSecurityRealm {","78","    @Override","79","    protected UserDetails authenticate(String username, String password) throws AuthenticationException {","80","        try {","81","            UnixUser uu = new PAM(serviceName).authenticate(username, password);","83","            \/\/ I never understood why Acegi insists on keeping the password...","84","            return new User(username,\"\",true,true,true,true, toAuthorities(uu));","85","        } catch (PAMException e) {","86","            throw new BadCredentialsException(e.getMessage(),e);","90","    @Override","91","    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {","92","        if(!UnixUser.exists(username))","93","            throw new UsernameNotFoundException(\"No such Unix user: \"+username);","94","        try {","95","            UnixUser uu = new UnixUser(username);","96","            \/\/ return some dummy instance","97","            return new User(username,\"\",true,true,true,true, toAuthorities(uu));","98","        } catch (PAMException e) {","99","            throw new UsernameNotFoundException(\"Failed to load information about Unix user \"+username,e);","100","        }"],"delete":["68","public class PAMSecurityRealm extends SecurityRealm {","78","    public static class PAMAuthenticationProvider implements AuthenticationProvider {","79","        private String serviceName;","81","        public PAMAuthenticationProvider(String serviceName) {","82","            this.serviceName = serviceName;","83","        }","84","","85","        public Authentication authenticate(Authentication authentication) throws AuthenticationException {","86","            String username = authentication.getPrincipal().toString();","87","            String password = authentication.getCredentials().toString();","88","","89","            try {","90","                UnixUser u = new PAM(serviceName).authenticate(username, password);","91","                GrantedAuthority[] groups = toAuthorities(u);","92","","93","                \/\/ I never understood why Acegi insists on keeping the password...","94","                return new UsernamePasswordAuthenticationToken(username, password, groups);","95","            } catch (PAMException e) {","96","                throw new BadCredentialsException(e.getMessage(),e);","97","            }","98","        }","99","","100","        public boolean supports(Class clazz) {","101","            return true;","105","    public SecurityComponents createSecurityComponents() {","106","        Binding binding = new Binding();","107","        binding.setVariable(\"instance\", this);","108","","109","        BeanBuilder builder = new BeanBuilder();","110","        builder.parse(Jenkins.getInstance().servletContext.getResourceAsStream(\"\/WEB-INF\/security\/PAMSecurityRealm.groovy\"),binding);","111","        WebApplicationContext context = builder.createApplicationContext();","112","        return new SecurityComponents(","113","            findBean(AuthenticationManager.class, context),","114","            new UserDetailsService() {","115","                public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {","116","                    if(!UnixUser.exists(username))","117","                        throw new UsernameNotFoundException(\"No such Unix user: \"+username);","118","                    try {","119","                        UnixUser uu = new UnixUser(username);","120","                        \/\/ return some dummy instance","121","                        return new User(username,\"\",true,true,true,true, toAuthorities(uu));","122","                    } catch (PAMException e) {","123","                        throw new UsernameNotFoundException(\"Failed to load information about Unix user \"+username,e);","124","                    }","125","                }","126","            }","127","        );"]}],"\/dev\/null":[{"add":[],"delete":[]}],"changelog.html":[{"add":["66","    PAM authentication now works with CLI login mechanism.","67","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9681\">issue 9681<\/a>)","68","  <li class=rfe>"],"delete":[]}]}},"6d95e3680c8edf49c2353633dd9c1a7072440989":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"changelog.html":[{"add":["63","  <li class=bug>","64","     Channel is already closed exception during threadDump","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16193\">issue 16193<\/a>)  "],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["2795","            try {","2796","                future.put(c.getName(), RemotingDiagnostics.getThreadDumpAsync(c.getChannel()));","2797","            } catch(Exception e) {","2798","                LOGGER.info(\"Failed to get thread dump for node \" + c.getName() + \": \" + e.getMessage());","2799","            }"],"delete":["2795","            future.put(c.getName(), RemotingDiagnostics.getThreadDumpAsync(c.getChannel()));"]}]}},"1904396993dac9dd66e6bf9cf24df35c3407ff7b":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["42","import java.util.StringTokenizer;","758","     * Validates the ant file mask (like \"foo\/bar\/*.txt, zot\/*.jar\")","769","    public String validateAntFileMask(final String fileMasks) throws IOException, InterruptedException {","772","                StringTokenizer tokens = new StringTokenizer(fileMasks);","774","                OUTER:","775","                while(tokens.hasMoreTokens()) {","776","                    final String fileMask = tokens.nextToken().trim();","777","                    String previous = null;","778","                    String pattern = fileMask;","780","                    while(true) {","781","                        FileSet fs = new FileSet();","782","                        fs.setDir(dir);","783","                        fs.setIncludes(pattern);","785","                        DirectoryScanner ds = fs.getDirectoryScanner(new org.apache.tools.ant.Project());","786","","787","                        if(ds.getIncludedFilesCount()!=0 || ds.getIncludedDirsCount()!=0) {","788","                            \/\/ found a match","789","                            if(pattern.equals(fileMask))","790","                                continue OUTER;    \/\/ no error","791","                            if(previous==null)","792","                                return String.format(\"'%s' doesn't match anything, although '%s' exists\",","793","                                    fileMask, pattern );","794","                            else","795","                                return String.format(\"'%s' doesn't match anything: '%s' exists but not '%s'\",","796","                                    fileMask, pattern, previous );","797","                        }","798","","799","                        int idx = Math.max(pattern.lastIndexOf('\\\\'),pattern.lastIndexOf('\/'));","800","                        if(idx<0) {","801","                            if(pattern.equals(fileMask))","802","                                return String.format(\"'%s' doesn't match anything\", fileMask );","803","                            else","804","                                return String.format(\"'%s' doesn't match anything: even '%s' doesn't exist\",","805","                                    fileMask, pattern );","806","                        }","807","","808","                        \/\/ cut off the trailing component and try again","809","                        previous = pattern;","810","                        pattern = pattern.substring(0,idx);","813","","814","                return null; \/\/ no error"],"delete":["757","     * Validates the ant file mask (like \"foo\/bar\/*.txt\")","768","    public String validateAntFileMask(final String fileMask) throws IOException, InterruptedException {","771","                String previous = null;","772","                String pattern = fileMask;","774","                while(true) {","775","                    FileSet fs = new FileSet();","776","                    fs.setDir(dir);","777","                    fs.setIncludes(pattern);","779","                    DirectoryScanner ds = fs.getDirectoryScanner(new org.apache.tools.ant.Project());","781","                    if(ds.getIncludedFilesCount()!=0 || ds.getIncludedDirsCount()!=0) {","782","                        \/\/ found a match","783","                        if(pattern.equals(fileMask))","784","                            return null;    \/\/ no error","785","                        if(previous==null)","786","                            return String.format(\"'%s' doesn't match anything, although '%s' exists\",","787","                                fileMask, pattern );","788","                        else","789","                            return String.format(\"'%s' doesn't match anything: '%s' exists but not '%s'\",","790","                                fileMask, pattern, previous );","792","","793","                    int idx = Math.max(pattern.lastIndexOf('\\\\'),pattern.lastIndexOf('\/'));","794","                    if(idx<0) {","795","                        if(pattern.equals(fileMask))","796","                            return String.format(\"'%s' doesn't match anything\", fileMask );","797","                        else","798","                            return String.format(\"'%s' doesn't match anything: even '%s' doesn't exist\",","799","                                fileMask, pattern );","800","                    }","801","","802","                    \/\/ cut off the trailing component and try again","803","                    previous = pattern;","804","                    pattern = pattern.substring(0,idx);"]}]}},"60c64a2047ae81004d7633c8bb185db19e733ed1":{"changes":{"core\/src\/main\/resources\/lib\/form\/dropdownDescriptorSelector.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/dropdownDescriptorSelector.jelly":[{"add":["59","          <st:include from=\"${descriptor}\" page=\"${descriptor.configPage}\" optional=\"true\" \/>"],"delete":["59","          <st:include from=\"${descriptor}\" page=\"${descriptor.configPage}\" \/>"]}]}},"26b15e139c5042f4ef93658858061c670be22961":{"changes":{"changelog.html":"MODIFY","war\/src\/main\/webapp\/scripts\/sortable.js":"MODIFY"},"diff":{"changelog.html":[{"add":["69","  <li class='bug'>","70","    sort order of plugin list is not working by default.","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17039\">issue 17039<\/a>)"],"delete":[]}],"war\/src\/main\/webapp\/scripts\/sortable.js":[{"add":["65","    ts_refresh(table);"],"delete":[]}]}},"de5938b3a65ea0f33bb0be077decce0b05683cd4":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["706","            new File(rootDir, baseName + \".hpi\").delete(); \/\/ don't keep confusing legacy *.hpi"],"delete":[]}]}},"af7cd9bfeefdf25989091d7523d5bdf4119e7cd8":{"changes":{"maven-plugin\/src\/main\/resources\/hudson\/maven\/Messages_de.properties":"MODIFY","maven-plugin\/src\/main\/resources\/hudson\/maven\/reporters\/MavenAbstractArtifactRecord\/index_de.properties":"MODIFY","maven-plugin\/src\/main\/resources\/hudson\/maven\/RedeployPublisher\/config_de.properties":"MODIFY"},"diff":{"maven-plugin\/src\/main\/resources\/hudson\/maven\/Messages_de.properties":[{"add":["51","MavenRedeployer.DisplayName=In Maven-Repository verffentlichen (deploy)","54","RedeployPublisher.getDisplayName=Verffentliche Artefakte in Maven-Repository (deploy)"],"delete":["51","MavenRedeployer.DisplayName=In Maven-Repository ausbringen (deploy)","54","RedeployPublisher.getDisplayName=Bringe Artefakte in Maven-Repository aus (deploy)"]}],"maven-plugin\/src\/main\/resources\/hudson\/maven\/reporters\/MavenAbstractArtifactRecord\/index_de.properties":[{"add":["24","  in ein Maven-Repository verffentlichen.","25","Redeploy\\ Artifacts=Artefakte verffentlichen (deploy)"],"delete":["24","  in ein Maven-Repository ausbringen.","25","Redeploy\\ Artifacts=Artefakte ausbringen (deploy)"]}],"maven-plugin\/src\/main\/resources\/hudson\/maven\/RedeployPublisher\/config_de.properties":[{"add":["25","Deploy\\ even\\ if\\ the\\ build\\ is\\ unstable=Verffentlichen (deploy), auch wenn der Build instabil ist."],"delete":["25","Deploy\\ even\\ if\\ the\\ build\\ is\\ unstable=Ausbringen (deploy), auch wenn der Build instabil ist."]}]}},"07fd5fa45d4b818fc11de97ce99ab6b3423aca85":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Run\/console_he.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Run\/console_he.properties":[{"add":["24","skipSome=\\u05DE\\u05D3\\u05DC\\u05D2 {0,number,integer} \\u05E7\"\\u05D1.. <a href=\"{1}\">\\u05D3\\u05D5\"\\u05D7 \\u05DE\\u05DC\\u05D0<\/a>"],"delete":["24","skipSome=\\u05DE\\u05D3\\u05DC\\u05D2 {0,\\u05DE\\u05E1\\u05E4\\u05E8,\\u05DE\\u05E1\\u05E4\\u05E8 \\u05E9\\u05DC\\u05DD} \\u05E7\"\\u05D1.. <a href=\"{1}\">\\u05D3\\u05D5\"\\u05D7 \\u05DE\\u05DC\\u05D0<\/a>"]}]}},"04f22dc69919af26a9b90b466144b46f6a79df7c":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["550","            \/\/Token plugin not present. Ignore, this is OK.","551","            \/\/listener.error(\"Ignore Problem expanding maven opts macros \" + tokenException.getMessage());"],"delete":["550","            listener.error(\"Ignore Problem expanding maven opts macros \" + tokenException.getMessage());"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["727","            \/\/Token plugin not present. Ignore, this is OK.","728","            \/\/listener.error(\"Ignore Problem expanding maven opts macros \" + tokenException.getMessage());"],"delete":["727","            listener.error(\"Ignore Problem expanding maven opts macros \" + tokenException.getMessage());"]}]}},"916340750e5b1588248a92e7d6730c62e5978552":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["723","            return isBuilding() ? BallColor.DISABLED_ANIME : BallColor.DISABLED;"],"delete":["723","            return BallColor.DISABLED;"]}]}},"24c802535f3f97b5d6665df0149232561da392e3":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/Messages_da.properties":"ADD","core\/src\/main\/resources\/jenkins\/model\/Messages_fr.properties":"ADD","core\/src\/main\/resources\/jenkins\/model\/Messages_es.properties":"ADD","core\/src\/main\/resources\/jenkins\/model\/Messages_nl.properties":"ADD","core\/src\/main\/resources\/jenkins\/model\/Messages_ja.properties":"ADD","core\/src\/main\/resources\/jenkins\/model\/Messages_tr.properties":"ADD","changelog.html":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Messages.properties":"ADD","core\/src\/main\/resources\/jenkins\/model\/Messages_de.properties":"ADD","core\/src\/main\/resources\/jenkins\/model\/Messages_pt_BR.properties":"ADD","core\/src\/main\/resources\/jenkins\/model\/Messages_ru.properties":"ADD"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/Messages_da.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Messages_fr.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Messages_es.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Messages_nl.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Messages_ja.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Messages_tr.properties":[{"add":[],"delete":[]}],"changelog.html":[{"add":["69","  <li class=bug>","70","    Some CLI command are not available.","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10418\">issue 10418<\/a>)"],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["27","import hudson.model.Node;","28","import hudson.model.AbstractCIBase;","29","import hudson.model.AbstractProject;","30","import hudson.model.Action;","31","import hudson.model.AdministrativeMonitor;","32","import hudson.model.AllView;","33","import hudson.model.Api;","34","import hudson.model.Computer;","35","import hudson.model.ComputerSet;","36","import hudson.model.DependencyGraph;","37","import hudson.model.Describable;","38","import hudson.model.Descriptor;","39","import hudson.model.DescriptorByNameOwner;","40","import hudson.model.DirectoryBrowserSupport;","41","import hudson.model.Failure;","42","import hudson.model.Fingerprint;","43","import hudson.model.FingerprintCleanupThread;","44","import hudson.model.FingerprintMap;","45","import hudson.model.FullDuplexHttpChannel;","46","import hudson.model.Hudson;","47","import hudson.model.Item;","48","import hudson.model.ItemGroup;","49","import hudson.model.ItemGroupMixIn;","50","import hudson.model.Items;","51","import hudson.model.JDK;","52","import hudson.model.Job;","53","import hudson.model.JobPropertyDescriptor;","54","import hudson.model.Label;","55","import hudson.model.ListView;","56","import hudson.model.LoadBalancer;","57","import hudson.model.ManagementLink;","58","import hudson.model.ModifiableItemGroup;","59","import hudson.model.NoFingerprintMatch;","60","import hudson.model.Node.Mode;","61","import hudson.model.OverallLoadStatistics;","62","import hudson.model.Project;","63","import hudson.model.RestartListener;","64","import hudson.model.RootAction;","65","import hudson.model.Slave;","66","import hudson.model.TaskListener;","67","import hudson.model.TopLevelItem;","68","import hudson.model.TopLevelItemDescriptor;","69","import hudson.model.UnprotectedRootAction;","70","import hudson.model.UpdateCenter;","71","import hudson.model.User;","72","import hudson.model.View;","73","import hudson.model.ViewGroup;","74","import hudson.model.ViewGroupMixIn;","75","import hudson.model.Descriptor.FormException;","76","import hudson.model.labels.LabelAtom;","77","import hudson.model.listeners.ItemListener;","78","import hudson.model.listeners.SCMListener;","79","import hudson.model.listeners.SaveableListener;","80","import hudson.model.Queue;","81","import hudson.model.WorkspaceCleanupThread;","82",""],"delete":["67","import hudson.model.*;","68","import hudson.model.Descriptor.FormException;","69","import hudson.model.labels.LabelAtom;","70","import hudson.model.listeners.ItemListener;","71","import hudson.model.listeners.SCMListener;","72","import hudson.model.listeners.SaveableListener;"]}],"core\/src\/main\/resources\/jenkins\/model\/Messages.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Messages_de.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Messages_pt_BR.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/model\/Messages_ru.properties":[{"add":[],"delete":[]}]}},"2f7a49b7cc503606c3d9d6a472ffef37a04d6b7f":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":[{"add":["81","                          <a href=\"${rootURL}\/${exeparent.url}\"><l:breakable value=\"${exeparent.fullDisplayName}\"\/><\/a>&#160;<a href=\"${rootURL}\/${exe.url}\" class=\"model-link inside\"><l:breakable value=\"${exe.displayName}\"\/><\/a>"],"delete":["81","                          <a href=\"${rootURL}\/${exeparent.url}\"><l:breakable value=\"${exeparent.fullDisplayName}\"\/><\/a>&#160;<a href=\"${rootURL}\/${exe.url}\" class=\"model-link inside\">#${exe.number}<\/a>"]}]}},"3ae5020266f32b495787d696b067434a01866a86":{"changes":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":[{"add":["3","import hudson.maven.*;","9","import hudson.util.IOException2;","17","import org.codehaus.plexus.component.configurator.expression.ExpressionEvaluationException;","38","    private transient String finalName;","48","        \/\/ this is not the same as pom.getBuild().getFinalName() because this performs","49","        \/\/ recursive variable expansions (with those variables that are defined during build)","50","        \/\/ See https:\/\/hudson.dev.java.net\/issues\/show_bug.cgi?id=812","51","        try {","52","            this.finalName = mojo.expressionEvaluator.evaluate(\"${project.build.finalName}\").toString();","53","        } catch (ExpressionEvaluationException e) {","54","            throw new IOException2(e);","55","        }","56",""],"delete":["3","import hudson.maven.MavenBuild;","4","import hudson.maven.MavenBuildProxy;","6","import hudson.maven.MavenEmbedder;","7","import hudson.maven.MavenModule;","8","import hudson.maven.MavenReporter;","9","import hudson.maven.MavenReporterDescriptor;","10","import hudson.maven.MavenUtil;","11","import hudson.maven.MojoInfo;","124","            String finalName = pom.getBuild().getFinalName();"]}]}},"1dabc681b5e898ba03965a4d588381c850fd4c3d":{"changes":{"core\/src\/main\/java\/hudson\/org\/apache\/tools\/ant\/taskdefs\/cvslib\/ChangeLogParser.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/org\/apache\/tools\/ant\/taskdefs\/cvslib\/ChangeLogParser.java":[{"add":["195","            File repo = new File(new File(owner.getDir(), m_file).getParentFile(), \"CVS\/Repository\");"],"delete":["195","            File repo = new File(new File(owner.getDir(), m_file), \"..\/CVS\/Repository\");"]}]}},"fd43c36120d5fe6fd8734b1ad8d059ad84bf30d1":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Ant.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Ant.java":[{"add":["125","        else {","126","            if (!ai.getExists()) {","127","                listener.fatalError(Messages.Ant_ExecutableNotFound(ai.name));","128","                return false;","129","            }","131","        }"],"delete":["123","        if (!ai.getExists()) {","124","        \tlistener.fatalError(Messages.Ant_ExecutableNotFound(ai.name));","125","        \treturn false;","126","        }","129","        else","131",""]}]}},"b249c2b48521513a60df2d8486bf3e4a0abc1524":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":"MODIFY","core\/src\/main\/java\/hudson\/maven\/MavenModule.java":"MODIFY","core\/src\/main\/resources\/hudson\/maven\/MavenModuleSet\/configure-entries.jelly":"MODIFY","war\/resources\/help\/maven\/ignore-upstrem-changes.html":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":[{"add":["96","     * If true, do not automatically schedule a build when one of the project dependencies is built.","97","     * <p>","98","     * See HUDSON-1714.","99","     *\/","100","    private boolean ignoreUpstremChanges = false;","101","","102","    \/**","236","    public boolean ignoreUpstremChanges() {","237","        return ignoreUpstremChanges;","238","    }","239","","535","        JSONObject json = req.getSubmittedForm();","545","        ignoreUpstremChanges = !json.has(\"triggerByDependency\");"],"delete":["534","        JSONObject json = req.getSubmittedForm();"]}],"core\/src\/main\/java\/hudson\/maven\/MavenModule.java":[{"add":["325","        if(isDisabled() || getParent().ignoreUpstremChanges())        return;"],"delete":["325","        if(isDisabled())        return;"]}],"core\/src\/main\/resources\/hudson\/maven\/MavenModuleSet\/configure-entries.jelly":[{"add":["6","  <p:config-trigger>","7","    <!-- setting to ignore upstream changes is done as a pseudo-trigger -->","8","    <f:optionalBlock name=\"maven.triggerByDependency\"","9","        help=\"\/help\/maven\/ignore-upstrem-changes.html\"","10","        title=\"${%Build whenever a SNAPSHOT dependency is built}\"","11","        checked=\"${h.defaultToTrue(!it.ignoreUpstremChanges())}\" \/>","12","  <\/p:config-trigger>","25","    <j:if test=\"${mavens.size() gt 1}\">"],"delete":["6","  <p:config-trigger\/>","19","    <j:if test=\"${mavens.size() &gt; 1}\">"]}],"war\/resources\/help\/maven\/ignore-upstrem-changes.html":[{"add":[],"delete":[]}]}},"7066daf3ee9d75d427918b068293e5b4ebbc98cd":{"changes":{"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":[{"add":["427","                    e.printStackTrace(listener.error(\"Failed to record SCM polling for \"+job));","428","                    LOGGER.log(Level.SEVERE,\"Failed to record SCM polling for \"+job,e);","431","                    e.printStackTrace(listener.error(\"Failed to record SCM polling for \"+job));","432","                    LOGGER.log(Level.SEVERE,\"Failed to record SCM polling for \"+job,e);","438","                LOGGER.log(Level.SEVERE,\"Failed to record SCM polling for \"+job,e);"],"delete":["427","                    e.printStackTrace(listener.error(\"Failed to record SCM polling\"));","428","                    LOGGER.log(Level.SEVERE,\"Failed to record SCM polling\",e);","431","                    e.printStackTrace(listener.error(\"Failed to record SCM polling\"));","432","                    LOGGER.log(Level.SEVERE,\"Failed to record SCM polling\",e);","438","                LOGGER.log(Level.SEVERE,\"Failed to record SCM polling\",e);"]}]}},"e669d8cc85db24718b0b4838d762a7b034f5ce13":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","changelog.html":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["455","        t.responseText.evalScripts();"],"delete":[]}],"changelog.html":[{"add":["87","  <li class=bug>","88","    Label\/node tree is not visible in multi-configuration project config page","89","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9689\">issue 9689<\/a>)"],"delete":[]}]}},"85974f3ec5f22522861fe504e36dcd93e185c2dd":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputerUtil.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":[{"add":["35","import hudson.slaves.SlaveComputerUtil;","195","                VirtualChannel channelToMaster = SlaveComputerUtil.getChannelToMaster();","290","                    VirtualChannel channelToMaster = SlaveComputerUtil.getChannelToMaster();","431","                VirtualChannel channelToMaster = SlaveComputerUtil.getChannelToMaster();"],"delete":["35","import hudson.slaves.SlaveComputer;","195","                VirtualChannel channelToMaster = SlaveComputer.getChannelToMaster();","290","                    VirtualChannel channelToMaster = SlaveComputer.getChannelToMaster();","431","                VirtualChannel channelToMaster = SlaveComputer.getChannelToMaster();"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["1069","     * @deprecated Use {@link SlaveComputerUtil#getChannelToMaster()} instead.","1071","    @Deprecated","1073","        return SlaveComputerUtil.getChannelToMaster();"],"delete":["1071","        if (Jenkins.getInstanceOrNull()!=null) \/\/ check if calling thread is on master or on slave","1072","            return FilePath.localChannel;","1073","","1074","        \/\/ if this method is called from within the agent computation thread, this should work","1075","        Channel c = Channel.current();","1076","        if (c!=null && Boolean.TRUE.equals(c.getProperty(\"slave\")))","1077","            return c;","1078","","1079","        return null;"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputerUtil.java":[{"add":[],"delete":[]}]}},"6b1cc47024172238a65d45f28db84f13495d8780":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/junit\/TestResult.java":"MODIFY","changelog.html":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/SurefireArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/junit\/TestResult.java":[{"add":["180","    \/**","181","     * Collect reports from the given report files","182","     * ","183","     * @since 1.500","184","     *\/"],"delete":["180","","211","    \/**","212","     * Collect reports from the given report files","213","     * ","214","     * @since TODO","215","     *\/ ","216","    public void parse(Iterable<File> reportFiles) throws IOException {","217","        for (File reportFile : reportFiles) {","218","            parsePossiblyEmpty(reportFile);","219","        }","220","    }","221",""]}],"changelog.html":[{"add":["73","   <li class=bug>","74","     Accept any plugin with a 'test' goal as a test plugin in Maven jobs","75","     (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8334\">issue 8334<\/a>)"],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/SurefireArchiver.java":[{"add":["116","        TestMojo testMojo = getTestMojo(mojo);","304","        return getTestMojo(mojo) != null;","305","    }","306","    ","307","    private TestMojo getTestMojo(MojoInfo mojo) {","311","            return null;","319","                    return null;","323","            return null;","326","        return testMojo;"],"delete":["116","        TestMojo testMojo = TestMojo.lookup(mojo);","304","        ","308","            return false;","316","                    return false;","320","            return false;","323","        return true;"]}]}},"9ed2962f190a0ab1993f2a9e7101183b7d351cbd":{"changes":{"jnlp-agent\/pom.xml":"MODIFY"},"diff":{"jnlp-agent\/pom.xml":[{"add":[],"delete":["40","  <profiles>","41","    <profile>","42","      <id>debug<\/id>","43","      <activation>","44","        <activeByDefault>true<\/activeByDefault>","45","      <\/activation>","46","    <\/profile>","47","    <profile>","48","      <id>release<\/id>","49","      <build>","50","        <plugins>","51","          <!-- run retrotranslator only during the release, so that debug build gets faster -->","52","          <plugin>","53","            <groupId>org.codehaus.mojo<\/groupId>","54","            <artifactId>retrotranslator-maven-plugin<\/artifactId>","55","            <executions>","56","              <execution>","57","                <phase>process-classes<\/phase>","58","                <goals>","59","                  <goal>translate<\/goal>","60","                <\/goals>","61","                <configuration>","62","                  <includes>","63","                    <include>","64","                      <directory>target\/classes<\/directory>","65","                    <\/include>","66","                  <\/includes>","67","                <\/configuration>","68","              <\/execution>","69","            <\/executions>","70","          <\/plugin>","71","        <\/plugins>","72","      <\/build>","73","    <\/profile>","74","  <\/profiles>","75",""]}]}},"0ab79882978292f3751be8e0acf5ae7edb0751f1":{"changes":{"cli\/src\/main\/java\/hudson\/cli\/NoCheckTrustManager.java":"MODIFY"},"diff":{"cli\/src\/main\/java\/hudson\/cli\/NoCheckTrustManager.java":[{"add":["2","import javax.net.ssl.X509TrustManager;","9","public class NoCheckTrustManager implements X509TrustManager {"],"delete":["2","import javax.net.ssl.TrustManager;","9","public class NoCheckTrustManager implements TrustManager {"]}]}},"3f861795a510969ea6e743ed8474d3ee254c399b":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractItem\/noWorkspace.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractItem\/noWorkspace.jelly":[{"add":["51","            <li>","52","              ${%The workspace was wiped out and no build has been done since then.}","53","            <\/li>"],"delete":[]}],"changelog.html":[{"add":["65","  <li class=\"rfe\">","66","    No workspace available message includes wiped out workspace as a potential cause.","67","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10432\">issue 10432<\/a>)"],"delete":[]}]}},"a166ced28745c4160bb601728ec6b52a7e5c91b0":{"changes":{"war\/resources\/scripts\/hudson-behavior.js":"MODIFY"},"diff":{"war\/resources\/scripts\/hudson-behavior.js":[{"add":["870","        do { start = start.firstChild; } while (start && start.tagName != 'TR');","871","        if (start && start.className != 'dropdownList-start')"],"delete":["870","        do { start = start.firstChild; } while (start.tagName != 'TR');","871","        if (start.className != 'dropdownList-start')"]}]}},"814d202716a6c61c7d371c6a62755d296fe199a5":{"changes":{"test\/src\/test\/java\/hudson\/security\/ExtendedReadPermissionTest.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/Security380Test.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/ApiTokenPropertyTest.java":"MODIFY","test\/src\/test\/java\/jenkins\/model\/JenkinsTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ViewTest.java":"MODIFY","test\/src\/test\/java\/hudson\/util\/RobustReflectionConverterTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ItemsTest.java":"MODIFY","test\/src\/test\/java\/hudson\/bugs\/JnlpAccessWithSecuredHudsonTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ProjectTest.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/BasicHeaderProcessorTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/AbstractProjectTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/security\/ApiCrumbExclusion.java":"ADD","test\/src\/test\/java\/hudson\/security\/HudsonPrivateSecurityRealmTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/UserTest.java":"MODIFY","test\/src\/test\/java\/hudson\/security\/LoginTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/PasswordParameterDefinitionTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/JobTest.java":"MODIFY","test\/pom.xml":"MODIFY","\/dev\/null":"DELETE","test\/src\/test\/java\/lib\/form\/PasswordTest.java":"MODIFY","test\/src\/test\/java\/hudson\/diagnosis\/HudsonHomeDiskUsageMonitorTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/security\/BasicHeaderApiTokenAuthenticator.java":"MODIFY","test\/src\/test\/resources\/lib\/form\/PasswordTest\/SecretNotPlainText\/index.jelly":"ADD","test\/src\/test\/java\/hudson\/model\/ExecutorTest.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/ApiCrumbExclusionTest.java":"ADD"},"diff":{"test\/src\/test\/java\/hudson\/security\/ExtendedReadPermissionTest.java":[{"add":["54","        JenkinsRule.WebClient wc = r.createWebClient();","55","        wc.withBasicCredentials(\"charlie\");","56","","72","        JenkinsRule.WebClient wc = r.createWebClient();","73","        wc.withBasicCredentials(\"charlie\");","74","","87","        JenkinsRule.WebClient wc = r.createWebClient();","88","        wc.withBasicCredentials(\"bob\");","89",""],"delete":["54","        JenkinsRule.WebClient wc = r.createWebClient().login(\"charlie\",\"charlie\");","70","        JenkinsRule.WebClient wc = r.createWebClient().login(\"charlie\",\"charlie\");","83","        JenkinsRule.WebClient wc = r.createWebClient().login(\"bob\",\"bob\");"]}],"test\/src\/test\/java\/jenkins\/security\/Security380Test.java":[{"add":["69","        \/\/ return \"0\\r\\n\""],"delete":[]}],"test\/src\/test\/java\/jenkins\/security\/ApiTokenPropertyTest.java":[{"add":[],"delete":["123","        wc.addCrumb(request);"]}],"test\/src\/test\/java\/jenkins\/model\/JenkinsTest.java":[{"add":["316","","317","        wc.withBasicApiToken(User.getById(\"alice\", true));","322","        wc.getPage(req);","326","        wc.getPage(req);","328","","329","        wc.withBasicApiToken(User.getById(\"bob\", true));","331","","332","        wc.withBasicApiToken(User.getById(\"charlie\", true));","343","","345","","346","        wc.withBasicApiToken(User.getById(\"alice\", true));","349","","350","        wc.withBasicApiToken(User.getById(\"bob\", true));","357","","358","        wc.withBasicApiToken(User.getById(\"charlie\", true));","367","        WebRequest req = new WebRequest(new URL(wc.getContextPath() + \"eval\"), HttpMethod.POST);"],"delete":["316","        wc.login(\"alice\");","321","        wc.getPage(wc.addCrumb(req));","325","        wc.getPage(wc.addCrumb(req));","327","        wc.login(\"bob\");","329","        wc.login(\"charlie\");","341","        wc.login(\"alice\");","344","        wc.login(\"bob\");","351","        wc.login(\"charlie\");","360","        WebRequest req = new WebRequest(wc.createCrumbedUrl(\"eval\"), HttpMethod.POST);"]}],"test\/src\/test\/java\/hudson\/model\/ViewTest.java":[{"add":["531","        JenkinsRule.WebClient wc = j.createWebClient().withBasicCredentials(\"admin\");"],"delete":["531","        JenkinsRule.WebClient wc = j.createWebClient().login(\"admin\");"]}],"test\/src\/test\/java\/hudson\/util\/RobustReflectionConverterTest.java":[{"add":["31","import hudson.model.Items;","33","import hudson.model.JobProperty;","34","import hudson.model.JobPropertyDescriptor;","36","import hudson.model.User;","40","import java.net.URL;","85","    public static class AcceptOnlySpecificKeyword extends AbstractDescribableImpl<AcceptOnlySpecificKeyword> {","189","","190","        User test = User.getById(\"test\", true);","191","","204","            wc.withBasicApiToken(test);","205","            WebRequest req = new WebRequest(new URL(wc.getContextPath() + String.format(\"%s\/config.xml\", p.getUrl())), HttpMethod.POST);","234","            wc.withBasicApiToken(test);","235","            WebRequest req = new WebRequest(new URL(wc.getContextPath() + String.format(\"%s\/config.xml\", p.getUrl())), HttpMethod.POST);"],"delete":["29","import hudson.model.Items;","30","import hudson.model.JobProperty;","31","import hudson.model.JobPropertyDescriptor;","83","    public static class AcceptOnlySpecificKeyword extends AbstractDescribableImpl<AcceptOnlySpecificKeyword>{","187","        ","200","            wc.login(\"test\", \"test\");","201","            WebRequest req = new WebRequest(","202","                    wc.createCrumbedUrl(String.format(\"%s\/config.xml\", p.getUrl())),","203","                    HttpMethod.POST","204","            );","233","            wc.login(\"test\", \"test\");","234","            WebRequest req = new WebRequest(","235","                    wc.createCrumbedUrl(String.format(\"%s\/config.xml\", p.getUrl())),","236","                    HttpMethod.POST","237","            );"]}],"test\/src\/test\/java\/hudson\/model\/ItemsTest.java":[{"add":["47","import org.junit.Before;","126","        User.getById(\"attacker\", true);","127","","190","                WebResponse webResponse = wc.getPage(new WebRequest(new URL(wc.getContextPath() + \"createItem?name=\" + target + \"&mode=hudson.model.FreeStyleProject\"), HttpMethod.POST)).getWebResponse();","203","                WebResponse webResponse = wc.getPage(new WebRequest(new URL(wc.getContextPath() + \"createItem?name=\" + target + \"&mode=copy&from=dupe\"), HttpMethod.POST)).getWebResponse();","214","                WebRequest req = new WebRequest(new URL(wc.getContextPath() + \"createItem?name=\" + target), HttpMethod.POST);","227","                WebResponse webResponse = wc.getPage(new WebRequest(new URL(wc.getContextPath() + \"job\/dupe\/doRename?newName=\" + target), HttpMethod.POST)).getWebResponse();","280","            return r.createWebClient().withBasicApiToken(\"attacker\");"],"delete":["187","                WebResponse webResponse = wc.getPage(new WebRequest(createCrumbedUrl(r, wc, \"createItem?name=\" + target + \"&mode=hudson.model.FreeStyleProject\"), HttpMethod.POST)).getWebResponse();","200","                WebResponse webResponse = wc.getPage(new WebRequest(createCrumbedUrl(r, wc, \"createItem?name=\" + target + \"&mode=copy&from=dupe\"), HttpMethod.POST)).getWebResponse();","211","                WebRequest req = new WebRequest(createCrumbedUrl(r, wc, \"createItem?name=\" + target), HttpMethod.POST);","224","                WebResponse webResponse = wc.getPage(new WebRequest(createCrumbedUrl(r, wc, \"job\/dupe\/doRename?newName=\" + target), HttpMethod.POST)).getWebResponse();","277","            return r.createWebClient().login(\"attacker\");","278","        }","279","        \/\/ TODO replace with standard version once it is fixed to detect an existing query string","280","        private static URL createCrumbedUrl(JenkinsRule r, JenkinsRule.WebClient wc, String relativePath) throws IOException {","281","            CrumbIssuer issuer = r.jenkins.getCrumbIssuer();","282","            String crumbName = issuer.getDescriptor().getCrumbRequestField();","283","            String crumb = issuer.getCrumb(null);","284","            return new URL(wc.getContextPath() + relativePath + (relativePath.contains(\"?\") ? \"&\" : \"?\") + crumbName + \"=\" + crumb);"]}],"test\/src\/test\/java\/hudson\/bugs\/JnlpAccessWithSecuredHudsonTest.java":[{"add":["33","import hudson.model.User;","89","        HtmlPage p = wc.withBasicApiToken(User.getById(\"alice\", true)).goTo(\"computer\/test\/\");"],"delete":["88","        HtmlPage p = wc.login(\"alice\").goTo(\"computer\/test\/\");"]}],"test\/src\/test\/java\/hudson\/model\/ProjectTest.java":[{"add":["34","import java.io.Closeable;","35","import java.net.HttpURLConnection;","39","import hudson.util.Scrambler;","558","        j.jenkins.setSecurityRealm(j.createDummySecurityRealm());","559","        User user = User.getById(\"john\", true);","572","","573","        \/\/ use Basic to speedup the test, normally it's pure UI testing","574","        JenkinsRule.WebClient wc = j.createWebClient();","575","        wc.withBasicCredentials(user.getId());","576","        HtmlPage p = wc.goTo(project.getUrl() + \"delete\");","577","","578","        List<HtmlForm> forms = p.getForms();","615","","616","        JenkinsRule.WebClient wc = j.createWebClient();","617","        wc.withBasicCredentials(user.getId(), \"password\");","620","        assertEquals(p.getWebResponse().getStatusCode(), 200);","621","","647","","648","        JenkinsRule.WebClient wc = j.createWebClient();","649","        wc.withBasicCredentials(user.getId(), \"password\");","650","        HtmlPage p = wc.goTo(project.getUrl());","651","","652","        List<HtmlForm> forms = p.getForms();","685","","686","        JenkinsRule.WebClient wc = j.createWebClient();","687","        wc.withBasicCredentials(user.getId(), \"password\");","688","        HtmlPage p = wc.goTo(project.getUrl());","689","","690","        List<HtmlForm> forms = p.getForms();"],"delete":["555","        HudsonPrivateSecurityRealm realm = new HudsonPrivateSecurityRealm(false);","556","        j.jenkins.setSecurityRealm(realm); ","557","        User user = realm.createAccount(\"John Smith\", \"password\");","570","        List<HtmlForm> forms = j.createWebClient().login(user.getId(), \"password\").goTo(project.getUrl() + \"delete\").getForms();","607","        JenkinsRule.WebClient wc = j.createWebClient().login(user.getId(), \"password\");","635","        List<HtmlForm> forms = j.createWebClient().login(user.getId(), \"password\").goTo(project.getUrl()).getForms();","668","        List<HtmlForm> forms = j.createWebClient().login(user.getId(), \"password\").goTo(project.getUrl()).getForms();"]}],"test\/src\/test\/java\/jenkins\/security\/BasicHeaderProcessorTest.java":[{"add":["20","import java.nio.charset.StandardCharsets;","21","import java.util.Base64;","48","        User foo = User.getById(\"foo\", true);","49","        User.getById(\"bar\", true);","54","        makeRequestAndVerify(\"anonymous\");","59","        wc = j.createWebClient();","60","        wc.withBasicApiToken(\"foo\");","61","        makeRequestAndVerify(\"foo\");        ","65","        wc = j.createWebClient();","66","        wc.withBasicCredentials(\"foo\", \"abcd\" + foo.getProperty(ApiTokenProperty.class).getApiToken());","67","        makeRequestAndFail();","71","        wc = j.createWebClient();","72","        wc.withBasicCredentials(\"foo\");","73","        makeRequestAndVerify(\"foo\");","77","        wc = j.createWebClient();","78","        wc.withBasicCredentials(\"foo\", \"bar\");","79","        makeRequestAndFail();","82","        wc = j.createWebClient();","88","        makeRequestAndVerify(\"bar\");","93","        wc.withBasicCredentials(\"bar\");","94","        makeRequestAndVerify(\"bar\");","99","        wc.withBasicCredentials(\"foo\", \"bar\");","100","        makeRequestAndFail();","104","    private void makeRequestAndFail() throws IOException, SAXException {","105","        makeRequestWithAuthCodeAndFail(null);","108","    private void makeRequestAndVerify(String expectedLogin) throws IOException, SAXException {","109","        makeRequestWithAuthCodeAndVerify(null, expectedLogin);","119","","127","","145","    private String encode(String prefix, String userAndPass) {","146","        if (userAndPass==null) {","147","            return null;","148","        }","149","        return prefix + \" \" + Base64.getEncoder().encodeToString(userAndPass.getBytes(StandardCharsets.UTF_8));","150","    }","151","","152","    private void makeRequestWithAuthCodeAndVerify(String authCode, String expectedLogin) throws IOException, SAXException {","153","        WebRequest req = new WebRequest(new URL(j.getURL(),\"test\"));","154","        req.setEncodingType(null);","155","        if (authCode!=null)","156","            req.setAdditionalHeader(\"Authorization\", authCode);","157","        Page p = wc.getPage(req);","158","        assertEquals(expectedLogin, p.getWebResponse().getContentAsString());","159","    }","160","","161","    private void makeRequestWithAuthCodeAndFail(String authCode) throws IOException, SAXException {","162","        try {","163","            makeRequestWithAuthCodeAndVerify(authCode, \"-\");","164","            fail();","165","        } catch (FailingHttpStatusCodeException e) {","166","            assertEquals(401, e.getStatusCode());","167","        }","168","    }","169","","189","            return HttpResponses.text(u!=null ? u.getId() : \"anonymous\");"],"delete":["9","import hudson.util.Scrambler;","10","import org.junit.After;","48","        User foo = User.get(\"foo\");","49","        User bar = User.get(\"bar\");","54","        makeRequestWithAuthAndVerify(null, \"anonymous\");","59","        ApiTokenProperty t = foo.getProperty(ApiTokenProperty.class);","60","        final String token = t.getApiToken();","61","        makeRequestWithAuthAndVerify(\"foo:\"+token, \"foo\");","62","        \/\/TODO verify why there are two events \"authenticated\" that are triggered","63","        \/\/ the whole authentication process seems to be done twice","67","        makeRequestAndFail(\"foo:abcd\"+token);","71","        makeRequestWithAuthAndVerify(\"foo:foo\", \"foo\");","75","        makeRequestAndFail(\"foo:bar\");","78","","84","        makeRequestWithAuthAndVerify(null, \"bar\");","89","        makeRequestWithAuthAndVerify(\"bar:bar\", \"bar\");","94","        makeRequestAndFail(\"foo:bar\");","98","    private void makeRequestAndFail(String userAndPass) throws IOException, SAXException {","99","        makeRequestWithAuthCodeAndFail(encode(\"Basic\", userAndPass));","100","    }","101","    ","102","    private String encode(String prefix, String userAndPass) {","103","        if (userAndPass==null) {","104","            return null;","105","        }","106","        return prefix+\" \"+Scrambler.scramble(userAndPass);","109","    private void makeRequestWithAuthCodeAndFail(String authCode) throws IOException, SAXException {","110","        try {","111","            makeRequestWithAuthCodeAndVerify(authCode, \"-\");","112","            fail();","113","        } catch (FailingHttpStatusCodeException e) {","114","            assertEquals(401, e.getStatusCode());","115","        }","116","    }","117","","118","    private void makeRequestWithAuthAndVerify(String userAndPass, String username) throws IOException, SAXException {","119","        makeRequestWithAuthCodeAndVerify(encode(\"Basic\", userAndPass), username);","120","    }","121","","122","    private void makeRequestWithAuthCodeAndVerify(String authCode, String expected) throws IOException, SAXException {","123","        WebRequest req = new WebRequest(new URL(j.getURL(),\"test\"));","124","        req.setEncodingType(null);","125","        if (authCode!=null)","126","            req.setAdditionalHeader(\"Authorization\", authCode);","127","        Page p = wc.getPage(req);","128","        assertEquals(expected, p.getWebResponse().getContentAsString().trim());","138","        ","146","            ","183","            return HttpResponses.plainText(u!=null ? u.getId() : \"anonymous\");"]}],"test\/src\/test\/java\/hudson\/model\/AbstractProjectTest.java":[{"add":["631","        String api = j.createWebClient().withBasicCredentials(\"alice\").goTo(us.getUrl() + \"api\/json?pretty\", null).getWebResponse().getContentAsString();","634","        api = j.createWebClient().withBasicCredentials(\"alice\").goTo(ds.getUrl() + \"api\/json?pretty\", null).getWebResponse().getContentAsString();","637","        api = j.createWebClient().withBasicCredentials(\"bob\").goTo(us.getUrl() + \"api\/json?pretty\", null).getWebResponse().getContentAsString();","640","        api = j.createWebClient().withBasicCredentials(\"charlie\").goTo(ds.getUrl() + \"api\/json?pretty\", null).getWebResponse().getContentAsString();"],"delete":["631","        String api = j.createWebClient().login(\"alice\").goTo(us.getUrl() + \"api\/json?pretty\", null).getWebResponse().getContentAsString();","634","        api = j.createWebClient().login(\"alice\").goTo(ds.getUrl() + \"api\/json?pretty\", null).getWebResponse().getContentAsString();","637","        api = j.createWebClient().login(\"bob\").goTo(us.getUrl() + \"api\/json?pretty\", null).getWebResponse().getContentAsString();","640","        api = j.createWebClient().login(\"charlie\").goTo(ds.getUrl() + \"api\/json?pretty\", null).getWebResponse().getContentAsString();"]}],"core\/src\/main\/java\/jenkins\/security\/ApiCrumbExclusion.java":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/security\/HudsonPrivateSecurityRealmTest.java":[{"add":["93","            fail();"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/UserTest.java":[{"add":["417","        HtmlForm form = j.createWebClient().withBasicCredentials(user.getId(), \"password\").goTo(user2.getUrl() + \"\/configure\").getFormByName(\"config\");","431","        form = j.createWebClient().withBasicCredentials(user2.getId(), \"password\").goTo(user2.getUrl() + \"\/configure\").getFormByName(\"config\");"],"delete":["417","        HtmlForm form = j.createWebClient().login(user.getId(), \"password\").goTo(user2.getUrl() + \"\/configure\").getFormByName(\"config\");","431","        form = j.createWebClient().login(user2.getId(), \"password\").goTo(user2.getUrl() + \"\/configure\").getFormByName(\"config\");"]}],"test\/src\/test\/java\/hudson\/security\/LoginTest.java":[{"add":["13","import hudson.model.User;","59","        verifyNotError(wc.withBasicApiToken(User.getById(\"alice\", true)));"],"delete":["58","        verifyNotError(wc.login(\"alice\"));"]}],"test\/src\/test\/java\/hudson\/model\/PasswordParameterDefinitionTest.java":[{"add":["64","","65","        User admin = User.getById(\"admin\", true);","66","        User dev = User.getById(\"dev\", true);","67","","71","        j.submit(wc.withBasicApiToken(admin).getPage(p, \"build?delay=0sec\").getFormByName(\"parameters\"));","76","","78","        HtmlForm form = wc.withBasicApiToken(dev).getPage(p, \"build?delay=0sec\").getFormByName(\"parameters\");","86","","88","        j.submit(wc.withBasicApiToken(dev).getPage(p, \"build?delay=0sec\").getFormByName(\"parameters\"));","93","","95","        form = wc.withBasicApiToken(dev).getPage(p, \"build?delay=0sec\").getFormByName(\"parameters\");"],"delete":["67","        j.submit(wc.login(\"admin\").getPage(p, \"build?delay=0sec\").getFormByName(\"parameters\"));","73","        HtmlForm form = wc.login(\"dev\").getPage(p, \"build?delay=0sec\").getFormByName(\"parameters\");","82","        j.submit(wc.login(\"dev\").getPage(p, \"build?delay=0sec\").getFormByName(\"parameters\"));","88","        form = wc.login(\"dev\").getPage(p, \"build?delay=0sec\").getFormByName(\"parameters\");"]}],"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["945","        User alice = User.getById(\"alice\", true);","946","        User bob = User.getById(\"bob\", true);","947","        User james = User.getById(\"james\", true);","948","","950","        webClient.withBasicApiToken(bob);","965","","967","        webClient.withBasicApiToken(alice);","971","","973","        webClient.withBasicApiToken(james);","983","        r.createWebClient().withBasicApiToken(bob).goToXml(url); \/\/ OK, 200","984","        r.createWebClient().withBasicApiToken(james).assertFails(url, HttpURLConnection.HTTP_FORBIDDEN); \/\/ only DISCOVER ? AccessDeniedException","985","        r.createWebClient().withBasicApiToken(alice).assertFails(url, HttpURLConnection.HTTP_NOT_FOUND); \/\/ not even DISCOVER"],"delete":["946","        webClient.login(\"bob\", \"bob\");","962","        webClient.login(\"alice\");","967","        webClient.login(\"james\");","977","        r.createWebClient().login(\"bob\").goToXml(url); \/\/ OK, 200","978","        r.createWebClient().login(\"james\").assertFails(url, HttpURLConnection.HTTP_FORBIDDEN); \/\/ only DISCOVER ? AccessDeniedException","979","        r.createWebClient().login(\"alice\").assertFails(url, HttpURLConnection.HTTP_NOT_FOUND); \/\/ not even DISCOVER"]}],"test\/src\/test\/java\/hudson\/model\/JobTest.java":[{"add":["204","        wc.withBasicCredentials(\"joe\");  \/\/ Has Item.READ permission","218","","219","            wc.withBasicApiToken(User.getById(\"alice\", true));  \/\/ Has CONFIGURE and EXTENDED_READ permission","221","","222","            wc.withBasicApiToken(User.getById(\"bob\", true));  \/\/ Has only CONFIGURE permission (this should imply EXTENDED_READ)","224","","225","            wc.withBasicApiToken(User.getById(\"charlie\", true));  \/\/ Has only EXTENDED_READ permission"],"delete":["204","        wc.login(\"joe\");  \/\/ Has Item.READ permission","218","            wc.login(\"alice\");  \/\/ Has CONFIGURE and EXTENDED_READ permission","220","            wc.login(\"bob\");  \/\/ Has only CONFIGURE permission (this should imply EXTENDED_READ)","222","            wc.login(\"charlie\");  \/\/ Has only EXTENDED_READ permission"]}],"test\/pom.xml":[{"add":["55","      <version>2.32<\/version>"],"delete":["55","      <version>2.31<\/version>"]}],"\/dev\/null":[{"add":[],"delete":[]}],"test\/src\/test\/java\/lib\/form\/PasswordTest.java":[{"add":["31","import hudson.model.*;","46","import static org.junit.Assert.*;","47","","48","import org.junit.Rule;","49","import org.junit.Test;","59","public class PasswordTest {","61","    @Rule","62","    public JenkinsRule j = new JenkinsRule();","63","","64","    @Test","65","    public void secretNotPlainText() throws Exception {","66","        SecretNotPlainText.secret = Secret.fromString(\"secret\");","67","        HtmlPage p = j.createWebClient().goTo(\"secretNotPlainText\");","73","    @TestExtension(\"secretNotPlainText\")","74","    public static class SecretNotPlainText implements RootAction {","75","","76","        public static Secret secret;","77","","78","        @Override","79","        public String getIconFileName() {","80","            return null;","81","        }","82","","83","        @Override","84","        public String getDisplayName() {","85","            return null;","86","        }","87","","88","        @Override","89","        public String getUrlName() {","90","            return \"secretNotPlainText\";","91","        }","95","    @Test","108","            j.jenkins.setSecurityRealm(new JenkinsRule().createDummySecurityRealm());","109","            j.jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy().","116","            FreeStyleProject p = j.createFreeStyleProject(\"p\");","120","","121","            User admin = User.getById(\"admin\", true);","122","            User dev = User.getById(\"dev\", true);","123","","124","            JenkinsRule.WebClient wc = j.createWebClient();","126","            wc.withBasicApiToken(admin);","129","            j.submit(configure.getFormByName(\"config\"));","151","            FreeStyleProject pAdmin = j.jenkins.getItemByFullName(pAdminName, FreeStyleProject.class);","155","","157","            wc.withBasicApiToken(dev);","174","            assertNull(j.jenkins.getItemByFullName(pDevName, FreeStyleProject.class));","181","    @Test","184","        FreeStyleProject p = j.createFreeStyleProject(\"p\");","186","        HtmlPasswordInput field = j.createWebClient().getPage(p, \"configure\").getFormByName(\"config\").getInputByName(\"_.secret\");"],"delete":["29","import hudson.Extension;","32","import hudson.model.Describable;","33","import hudson.model.Descriptor;","34","import hudson.model.FreeStyleProject;","35","import hudson.model.Item;","36","import hudson.model.JobProperty;","37","import hudson.model.JobPropertyDescriptor;","38","import hudson.model.User;","53","import static org.junit.Assert.assertThat;","54","import org.jvnet.hudson.test.HudsonTestCase;","64","public class PasswordTest extends HudsonTestCase implements Describable<PasswordTest> {","65","    public Secret secret;","67","    public void test1() throws Exception {","68","        secret = Secret.fromString(\"secret\");","69","        HtmlPage p = createWebClient().goTo(\"self\/test1\");","75","    public DescriptorImpl getDescriptor() {","76","        return jenkins.getDescriptorByType(DescriptorImpl.class);","79","    @Extension","80","    public static final class DescriptorImpl extends Descriptor<PasswordTest> {}","81","","95","            jenkins.setSecurityRealm(new JenkinsRule().createDummySecurityRealm());","96","            jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy().","103","            FreeStyleProject p = createFreeStyleProject(\"p\");","107","            WebClient wc = createWebClient();","109","            wc.login(\"admin\");","112","            submit(configure.getFormByName(\"config\"));","134","            FreeStyleProject pAdmin = jenkins.getItemByFullName(pAdminName, FreeStyleProject.class);","139","            wc.login(\"dev\");","156","            assertNull(jenkins.getItemByFullName(pDevName, FreeStyleProject.class));","165","        FreeStyleProject p = createFreeStyleProject(\"p\");","167","        HtmlPasswordInput field = createWebClient().getPage(p, \"configure\").getFormByName(\"config\").getInputByName(\"_.secret\");"]}],"test\/src\/test\/java\/hudson\/diagnosis\/HudsonHomeDiskUsageMonitorTest.java":[{"add":["24","import java.net.URL;","73","        User bob = User.getById(\"bob\", true);","74","        User administrator = User.getById(\"administrator\", true);","75","","76","        WebRequest request = new WebRequest(new URL(wc.getContextPath() + \"administrativeMonitor\/hudsonHomeIsFull\/act\"), HttpMethod.POST);","82","        wc.withBasicApiToken(bob);","85","            fail();","91","        WebRequest requestReadOnly = new WebRequest(new URL(wc.getContextPath() + \"administrativeMonitor\/hudsonHomeIsFull\"), HttpMethod.GET);","93","            wc.getPage(requestReadOnly);","94","            fail();","99","        wc.withBasicApiToken(administrator);"],"delete":["13","import hudson.security.HudsonPrivateSecurityRealm;","14","import hudson.security.Permission;","16","import org.acegisecurity.context.SecurityContextHolder;","75","        WebRequest request = new WebRequest(wc.createCrumbedUrl(\"administrativeMonitor\/hudsonHomeIsFull\/act\"), HttpMethod.POST);","82","            wc.login(\"bob\");","90","            WebRequest getIndex = new WebRequest(wc.createCrumbedUrl(\"administrativeMonitor\/hudsonHomeIsFull\"), HttpMethod.GET);","91","            wc.getPage(getIndex);","96","        wc.login(\"administrator\");"]}],"core\/src\/main\/java\/jenkins\/security\/BasicHeaderApiTokenAuthenticator.java":[{"add":["34","            Authentication auth;","37","                auth = u.impersonate(userDetails);","48","","49","            req.setAttribute(BasicHeaderApiTokenAuthenticator.class.getName(), true);","50","            return auth;"],"delete":["36","                Authentication auth = u.impersonate(userDetails);","39","","40","                return auth;"]}],"test\/src\/test\/resources\/lib\/form\/PasswordTest\/SecretNotPlainText\/index.jelly":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/ExecutorTest.java":[{"add":["138","","139","        JenkinsRule.WebClient wc = j.createWebClient();","140","        wc.withBasicCredentials(\"has-security-clearance\");","141","        String api = wc.goTo(slave.toComputer().getUrl() + \"api\/json?pretty&depth=1\", null).getWebResponse().getContentAsString();","144","","145","        wc = j.createWebClient();","146","        wc.withBasicCredentials(\"regular-joe\");","147","        api = wc.goTo(slave.toComputer().getUrl() + \"api\/json?pretty&depth=1\", null).getWebResponse().getContentAsString();"],"delete":["138","        String api = j.createWebClient().login(\"has-security-clearance\").goTo(slave.toComputer().getUrl() + \"api\/json?pretty&depth=1\", null).getWebResponse().getContentAsString();","141","        api = j.createWebClient().login(\"regular-joe\").goTo(slave.toComputer().getUrl() + \"api\/json?pretty&depth=1\", null).getWebResponse().getContentAsString();"]}],"test\/src\/test\/java\/jenkins\/security\/ApiCrumbExclusionTest.java":[{"add":[],"delete":[]}]}},"495784745d860f7b3454915b76ae5679dbba95b3":{"changes":{"war\/src\/main\/js\/api\/plugins.js":"MODIFY"},"diff":{"war\/src\/main\/js\/api\/plugins.js":[{"add":["138","            { \"name\": \"slack\" },"],"delete":["138","            \/\/ { \"name\": \"slack\" }, \/\/ JENKINS-33571"]}]}},"723dfca37bcf3fecd33c75eaca01ce0d07014d70":{"changes":{"core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/InstallState.java":"MODIFY","core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/authenticate-security-token.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":[{"add":["190","            if (!j.getItemMap().isEmpty() || !j.getNodes().isEmpty()) {"],"delete":["52","import hudson.security.AuthorizationStrategy;","53","import hudson.security.FullControlOnceLoggedInAuthorizationStrategy;","54","import hudson.security.HudsonPrivateSecurityRealm;","55","import hudson.security.SecurityRealm;","56","import hudson.security.csrf.DefaultCrumbIssuer;","195","            if (!j.getItemMap().isEmpty() || !mayBeJenkins2SecurityDefaults(j) || !j.getNodes().isEmpty()) {","216","     * This could be an upgrade, detect a non-default security realm for the stupid case","217","     * where someone installed 1.x and did not save global config or create any items...","218","     *\/","219","    private static boolean mayBeJenkins2SecurityDefaults(Jenkins j) {","220","        \/\/ may be called before security set up first","221","        if(j.getSecurityRealm() == SecurityRealm.NO_AUTHENTICATION && !(j.getCrumbIssuer() instanceof DefaultCrumbIssuer)) { ","222","            return true;","223","        }","224","        if(j.getSecurityRealm() instanceof HudsonPrivateSecurityRealm) { \/\/ might be called after a restart, setup isn't complete","225","            HudsonPrivateSecurityRealm securityRealm = (HudsonPrivateSecurityRealm)j.getSecurityRealm();","226","            if(securityRealm.getAllUsers().size() == 1 && securityRealm.getUser(SetupWizard.initialSetupAdminUserName) != null) {","227","                AuthorizationStrategy authStrategy = j.getAuthorizationStrategy();","228","                if(authStrategy instanceof FullControlOnceLoggedInAuthorizationStrategy) {","229","                    \/\/ must have been using 2.0+ to set this, as it wasn't present in 1.x and the default is true, to _allow_ anon read","230","                    if(!((FullControlOnceLoggedInAuthorizationStrategy)authStrategy).isAllowAnonymousRead()) {","231","                        return true;","232","                    }","233","                }","234","            }","235","        }","236","        return false;","237","    }","238","","239","    \/**"]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["20","import javax.servlet.http.HttpServletResponse;","25","import org.acegisecurity.userdetails.UsernameNotFoundException;","159","                \/\/ if we're not using security defaults, we should not show the security token screen","160","                \/\/ users will likely be sent to a login screen instead","161","                isUsingSecurityToken = isUsingSecurityDefaults();","180","            return isUsingSecurityToken \/\/ only ever show the unlock page if using the security token","182","                    && isUsingSecurityDefaults();","188","","189","    \/**","190","     * Determines if the security settings seem to match the defaults. Here, we only","191","     * really care about and test for HudsonPrivateSecurityRealm and the user setup.","192","     * Other settings are irrelevant.","193","     *\/","194","    \/*package*\/ boolean isUsingSecurityDefaults() {","195","        Jenkins j = Jenkins.getInstance();","196","        if (j.getSecurityRealm() instanceof HudsonPrivateSecurityRealm) {","197","            HudsonPrivateSecurityRealm securityRealm = (HudsonPrivateSecurityRealm)j.getSecurityRealm();","198","            try {","199","                if(securityRealm.getAllUsers().size() == 1) {","200","                    HudsonPrivateSecurityRealm.Details details = securityRealm.loadUserByUsername(SetupWizard.initialSetupAdminUserName);","201","                    FilePath iapf = getInitialAdminPasswordFile();","202","                    if (iapf.exists()) {","203","                        if (details.isPasswordCorrect(iapf.readToString().trim())) {","204","                            return true;","205","                        }","206","                    }","207","                }","208","            } catch(UsernameNotFoundException | IOException | InterruptedException e) {","209","                return false; \/\/ Not initial security setup if no transitional admin user \/ password found","210","            }","211","        }","212","        return false;","213","    }","214","","488","                    Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);"],"delete":["157","                isUsingSecurityToken = true;","176","            return isUsingSecurityToken \/\/ only ever show this if using the security token","178","                    && getInitialAdminPasswordFile().exists();","184","    "]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["42","import hudson.security.ACL;","64","","65","import org.acegisecurity.Authentication;","1324","        final Authentication currentAuth = Jenkins.getAuthentication();","1354","                        ACL.impersonate(currentAuth, new Runnable() {","1355","                            @Override","1356","                            public void run() {","1357","                                InstallUtil.proceedToNextStateFrom(InstallState.INITIAL_PLUGINS_INSTALLING);","1358","                            }","1359","                        });"],"delete":["1350","                        InstallUtil.proceedToNextStateFrom(InstallState.INITIAL_PLUGINS_INSTALLING);"]}],"core\/src\/main\/java\/jenkins\/install\/InstallState.java":[{"add":["77","    public static final InstallState CREATE_ADMIN_USER = new InstallState(\"CREATE_ADMIN_USER\", false) {","78","        public void initializeState() {","79","            Jenkins j = Jenkins.getInstance();","80","            \/\/ Skip this state if not using the security defaults","81","            \/\/ e.g. in an init script set up security already","82","            if (!j.getSetupWizard().isUsingSecurityDefaults()) {","83","                InstallUtil.proceedToNextStateFrom(this);","84","            }","85","        }","86","    };"],"delete":["77","    public static final InstallState CREATE_ADMIN_USER = new InstallState(\"CREATE_ADMIN_USER\", false);"]}],"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/authenticate-security-token.jelly":[{"add":["5","        <input type=\"hidden\" name=\"from\" value=\"${request.getParameter('from')}\" \/>"],"delete":[]}]}},"23b0085f453454462542ae6e0fd67915b760ee4e":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractCIBase.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractCIBase.java":[{"add":["38","import java.util.logging.Level;","118","            try {","119","                c.setNode(n); \/\/ reuse","120","                used.add(c);","121","            } catch (RuntimeException e) {","122","                LOGGER.log(Level.WARNING, \"Error updating node \" + n.getNodeName() + \", continuing\", e);","123","            }","139","            used.add(c);"],"delete":["117","            c.setNode(n); \/\/ reuse","134","        used.add(c);"]}]}},"b09f828706c9a16b8acc4158f2161117f9359047":{"changes":{"core\/src\/test\/java\/hudson\/util\/RunListTest.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/util\/RunListTest.java":[{"add":["29","import org.jvnet.hudson.test.Bug;","30","import static org.mockito.Mockito.when;","73","    @Bug(21159)"],"delete":["25","import static org.mockito.Mockito.when;","27","","29","","31",""]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Build history widget only showed the last day of builds.","59","    (Due to JENKINS-20892, even with this fix at most 20 builds are shown.)","60","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-21159\">issue 21159<\/a>)"],"delete":[]}]}},"10dddebf7bd86e30b630038e5ebe0295f190a8de":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["44","    <stapler.version>1.195<\/stapler.version>"],"delete":["44","    <stapler.version>1.192<\/stapler.version>"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Annotation processor bugs in Stapler affecting plugin compilation.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11739\">issue 11739<\/a>)"],"delete":[]}],"war\/pom.xml":[{"add":["73","        <!-- Stapler 1.195 fails to declare this as optional, and the 1.1 version lacks a license: -->","74","        <exclusion>","75","          <artifactId>metainf-services<\/artifactId>","76","          <groupId>org.kohsuke.metainf-services<\/groupId>","77","        <\/exclusion>"],"delete":[]}]}},"b53139e0db15d1a9b8f6b8eac5b08c33ea40566b":{"changes":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":"MODIFY"},"diff":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":[{"add":[],"delete":["291","    @Bug(13502)","292","    public void testHandleBuildTrigger() {","293","        Project u = createFreeStyleProject(\"u\"),","294","                d = createFreeStyleProject(\"d\"),","295","                e = createFreeStyleProject(\"e\");","296","","297","        u.addPublisher(new BuildTrigger(\"d\", Result.SUCCESS));","298","","299","        jenkins.setSecurityRealm(createDummySecurityRealm());","300","        ProjectMatrixAuthorizationStrategy authorizations = new ProjectMatrixAuthorizationStrategy();","301","        jenkins.setAuthorizationStrategy(authorizations);","302","","303","        authorizations.add(Jenkins.ADMINISTER, \"admin\");","304","        authorizations.add(Jenkins.READ, \"user\");","305","","306","        \/\/ user can READ u and CONFIGURE e","307","        Map<Permission, Set<String>> permissions = new HashMap<Permission, Set<String>>();","308","        permissions.put(Job.READ, Collections.singleton(\"user\"));","309","        u.addProperty(new AuthorizationMatrixProperty(permissions));","310","","311","        permissions = new HashMap<Permission, Set<String>>();","312","        permissions.put(Job.CONFIGURE, Collections.singleton(\"user\"));","313","        e.addProperty(new AuthorizationMatrixProperty(permissions));","314","","315","        User user = User.get(\"user\");","316","        SecurityContext sc = ACL.impersonate(user.impersonate());","317","        try {","318","            e.convertUpstreamBuildTrigger(Collections.<AbstractProject> emptySet());","319","        } finally {","320","            SecurityContextHolder.setContext(sc);","321","        }","322","","323","        assert 1 == u.getPublishersList().size();","324","    }","325",""]}]}},"06712954c2950c64063be536cd5fa92493002935":{"changes":{"core\/src\/main\/java\/hudson\/model\/WorkspaceCleanupThread.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/WorkspaceList.java":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/CoreEnvironmentContributor\/buildEnv.properties":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/WorkspaceCleanupThread.java":[{"add":["92","                        FilePath tempDir = WorkspaceList.tempDir(ws);","93","                        if (tempDir != null) {","94","                            tempDir.deleteRecursive();","95","                        }"],"delete":["92","                        WorkspaceList.tempDir(ws).deleteRecursive();"]}],"core\/src\/main\/java\/hudson\/slaves\/WorkspaceList.java":[{"add":["38","import javax.annotation.CheckForNull;","302","     * @return a sibling directory, for example {@code \u2026\/something@tmp} for {@code \u2026\/something}, or {@code null} if {@link FilePath#getParent} is null","305","    @CheckForNull"],"delete":["301","     * @return a sibling directory, for example {@code \u2026\/something@tmp} for {@code \u2026\/something}"]}],"core\/src\/main\/resources\/jenkins\/model\/CoreEnvironmentContributor\/buildEnv.properties":[{"add":["16","  May not initially exist, so be sure to create the directory as needed (e.g., <code>mkdir -p<\/code> on Linux). \\","17","  Not defined when the regular workspace is a drive root."],"delete":["16","  May not initially exist, so be sure to create the directory as needed (e.g., <code>mkdir -p<\/code> on Linux)."]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["867","            FilePath tempDir = WorkspaceList.tempDir(ws);","868","            if (tempDir != null) {","869","                env.put(\"WORKSPACE_TMP\", tempDir.getRemote()); \/\/ JENKINS-60634","870","            }"],"delete":["867","            env.put(\"WORKSPACE_TMP\", WorkspaceList.tempDir(ws).getRemote()); \/\/ JENKINS-60634"]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["1323","     * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory.","1324","     * @return null if {@link #getParent} would have","1326","    @CheckForNull","1328","        FilePath parent = getParent();","1329","        return parent != null ? parent.child(rel) : null;","1352","    @CheckForNull"],"delete":["1323","     * Short for {@code getParent().child(rel)}. Useful for getting other files in the same directory. ","1326","        return getParent().child(rel);"]}]}},"671a0ad4d073bb8622c16d3876c2f63a0c30171a":{"changes":{"core\/src\/main\/java\/hudson\/ExtensionList.java":"MODIFY","core\/src\/main\/java\/jenkins\/security\/UpdateSiteWarningsMonitor.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/User.java":"MODIFY","core\/src\/main\/java\/jenkins\/security\/UserDetailsCache.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ExtensionList.java":[{"add":["422","     * Convenience method allowing lookup of the only instance of a given type.","423","     * Equivalent to {@code ExtensionList.lookup(Class).get(Class)} if there is one instance,","424","     * and throws an {@code IllegalStateException} otherwise.","425","     *","426","     * @param type The type to look up.","427","     * @return the singleton instance of the given type in its list.","428","     * @throws IllegalStateException if there are no instances, or more than one","429","     *","430","     * @since TODO","431","     *\/","432","    public static @Nonnull <U> U lookupSingleton(Class<U> type) {","433","        ExtensionList<U> all = lookup(type);","434","        if (all.size() != 1) {","435","            throw new IllegalStateException(\"Expected 1 instance of \" + type.getName() + \" but got \" + all.size());","436","        }","437","        return all.get(0);","438","    }","439","","440","    \/**"],"delete":[]}],"core\/src\/main\/java\/jenkins\/security\/UpdateSiteWarningsMonitor.java":[{"add":["123","        UpdateSiteWarningsConfiguration configuration = ExtensionList.lookupSingleton(UpdateSiteWarningsConfiguration.class);","157","        UpdateSiteWarningsConfiguration configuration = ExtensionList.lookupSingleton(UpdateSiteWarningsConfiguration.class);"],"delete":["123","        ExtensionList<UpdateSiteWarningsConfiguration> configurations = ExtensionList.lookup(UpdateSiteWarningsConfiguration.class);","124","        if (configurations.isEmpty()) {","125","            return Collections.emptySet();","126","        }","127","        UpdateSiteWarningsConfiguration configuration = configurations.get(0);","128","","162","        ExtensionList<UpdateSiteWarningsConfiguration> configurations = ExtensionList.lookup(UpdateSiteWarningsConfiguration.class);","163","        if (configurations.isEmpty()) {","164","            return false;","165","        }","166","","167","        UpdateSiteWarningsConfiguration configuration = configurations.get(0);","168",""]}],"core\/src\/main\/java\/hudson\/model\/User.java":[{"add":["1028","            return ExtensionList.lookupSingleton(AllUsers.class).byName;"],"delete":["1028","            ExtensionList<AllUsers> instances = ExtensionList.lookup(AllUsers.class);","1029","            if (instances.size() != 1) {","1030","                throw new IllegalStateException();","1031","            }","1032","            return instances.get(0).byName;"]}],"core\/src\/main\/java\/jenkins\/security\/UserDetailsCache.java":[{"add":["85","        return ExtensionList.lookupSingleton(UserDetailsCache.class);"],"delete":["85","        return ExtensionList.lookup(UserDetailsCache.class).get(UserDetailsCache.class);"]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["1997","        public static PluginUpdateMonitor getInstance() {","1998","            return ExtensionList.lookupSingleton(PluginUpdateMonitor.class);"],"delete":["1997","        public static final PluginUpdateMonitor getInstance() {","1998","            return ExtensionList.lookup(PluginUpdateMonitor.class).get(0);"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["3719","            ExtensionList.lookupSingleton(MasterBuildConfiguration.class).configure(req,json);","4528","        return ExtensionList.lookupSingleton(URICheckEncodingMonitor.class).doCheckURIEncoding(request);","4538","        return ExtensionList.lookupSingleton(URICheckEncodingMonitor.class).isCheckEnabled();"],"delete":["3719","            MasterBuildConfiguration mbc = MasterBuildConfiguration.all().get(MasterBuildConfiguration.class);","3720","            if (mbc!=null)","3721","                mbc.configure(req,json);","4530","        return ExtensionList.lookup(URICheckEncodingMonitor.class).get(0).doCheckURIEncoding(request);","4540","        return ExtensionList.lookup(URICheckEncodingMonitor.class).get(0).isCheckEnabled();"]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["1124","            UpdateSiteWarningsConfiguration configuration = ExtensionList.lookupSingleton(UpdateSiteWarningsConfiguration.class);"],"delete":["1124","            ExtensionList<UpdateSiteWarningsConfiguration> list = ExtensionList.lookup(UpdateSiteWarningsConfiguration.class);","1125","            if (list.size() == 0) {","1126","                return Collections.emptySet();","1127","            }","1128","","1131","            UpdateSiteWarningsConfiguration configuration = list.get(0);","1132",""]}]}},"b17951d4cf2541b529116bf6e7ae005eb647d9cc":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/_ant\/AntTargetNote.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/_ant\/AntTargetNote.java":[{"add":["46","        MarkupText.SubText t = text.findToken(Pattern.compile(\".*(?=:)\"));"],"delete":["46","        MarkupText.SubText t = text.findToken(Pattern.compile(\"^[^:]+(?=:)\"));"]}]}},"a25fda149bdf2e802c70eb90f0c77031fc415c9d":{"changes":{"core\/src\/main\/java\/hudson\/model\/DependencyGraph.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DependencyGraph.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, Martin Eigenbrodt. Seiji Sogabe","435","","436","        @Override","437","        public boolean equals(Object obj) {","438","            if (obj == null) return false;","439","            if (getClass() != obj.getClass()) return false;","440","","441","            final Dependency other = (Dependency) obj;","442","            if (this.upstream != other.upstream && (this.upstream == null || !this.upstream.equals(other.upstream))) ","443","                return false;","444","            if (this.downstream != other.downstream && (this.downstream == null || !this.downstream.equals(other.downstream))) ","445","                return false;","446","","447","            return true;","448","        }","449","","450","        @Override","451","        public int hashCode() {","452","            int hash = 7;","453","            hash = 23 * hash + (this.upstream != null ? this.upstream.hashCode() : 0);","454","            hash = 23 * hash + (this.downstream != null ? this.downstream.hashCode() : 0);","455","            return hash;","456","        }"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Martin Eigenbrodt"]}]}},"c7c05f6a49d89d0fab360d857981964f49b2320a":{"changes":{"core\/src\/test\/java\/hudson\/cli\/ListJobsCommandTest.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/cli\/ListJobsCommandTest.java":[{"add":["172","                        Arrays.asList(item.toString().split(System.getProperty(\"line.separator\")))"],"delete":["172","                        Arrays.asList(item.toString().split(\"\\n\"))"]}]}},"143581e67fbcf971bfdadf2ad42535a6912caf73":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["119","  background-color: #fff;"],"delete":[]}]}},"0f1ab580ca0846969998e93a6c1f2907103e4a6f":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/Pipe.java":"MODIFY","remoting\/src\/test\/java\/hudson\/remoting\/PipeTest.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/PipeWindow.java":"MODIFY","remoting\/src\/test\/java\/Driver8703.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/Pipe.java":[{"add":["171","            final int oidPos = channel.export(pos,false); \/\/ this gets unexported when the remote ProxyOutputStream closes."],"delete":["171","            final int oidPos = channel.export(pos);"]}],"remoting\/src\/test\/java\/hudson\/remoting\/PipeTest.java":[{"add":["38","import java.lang.Thread.UncaughtExceptionHandler;","178","        channel.syncLocalIO();","179","        \/\/ then let the writer commence"],"delete":[]}],"remoting\/src\/main\/java\/hudson\/remoting\/PipeWindow.java":[{"add":["128","        \/**","129","         * Total bytes that left our side of the channel.","130","         *\/","132","        \/**","133","         * Total bytes that the remote side acked.","134","         *\/"],"delete":[]}],"remoting\/src\/test\/java\/Driver8703.java":[{"add":["34","                        e.printStackTrace();","37","                        t.printStackTrace();"],"delete":[]}]}},"70da17ed10d55122944fabf71cc396ef427ca4a2":{"changes":{"core\/src\/main\/resources\/hudson\/triggers\/Messages_fr.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/triggers\/Messages_fr.properties":[{"add":["26","TimerTrigger.TimerTriggerCause.ShortDescription=L''\\u00e9\\u00e9ch\\u00e9ance d''une alarme p\\u00e9riodique a provoqu\\u00e9 le lancement de ce job"],"delete":["26","TimerTrigger.TimerTriggerCause.ShortDescription=L''chance d'une alarme priodique a provoqu le lancement de ce job"]}]}},"3703934476a33e7559b5e27ab1f66b309d792aec":{"changes":{"war\/src\/main\/js\/pluginSetupWizardGui.js":"MODIFY"},"diff":{"war\/src\/main\/js\/pluginSetupWizardGui.js":[{"add":["234","\tvar getInstallingPlugin = function(plugName) {","235","\t\tfor(var i = 0; i < installingPlugins.length; i++) {","236","\t\t\tvar p = installingPlugins[i];","237","\t\t\tif(p.name === plugName) {","238","\t\t\t\treturn p;","239","\t\t\t}","240","\t\t}","241","\t\treturn null;","242","\t};","279","\t\t\tvar p = availablePlugins[pluginName];","291","\t\t\/\/ Switch to the right view but function() to force update when progressPanel re-rendered","292","\t\tsetPanel(function() { return progressPanel(arguments); }, { installingPlugins : [] });","293","","868","\t\t\t\t\t\t\t\tvar j = getInstallingPlugin(plugName);"],"delete":["268","\t\tinstallingPlugins.names = [];","271","\t\t\tvar p = availablePlugins[ pluginName];","277","\t\t\t\tinstallingPlugins[plug.name] = plug;","278","\t\t\t\tinstallingPlugins.names.push(pluginName);","288","","289","\t\tsetPanel(progressPanel, { installingPlugins : installingPlugins });","861","\t\t\t\t\t\t\t\tvar j = installingPlugins[plugName];","865","\t\t\t\t\t\t\t\t\tconsole.warn('\\tInstalling plugins: ' + installingPlugins.names);\t\t\t\t\t\t\t\t\t"]}]}},"38412a94555a18ddb97fc5d9dcd78e983bb3856f":{"changes":{"core\/src\/test\/java\/hudson\/cli\/ListJobsCommandTest.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/ListJobsCommand.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/cli\/ListJobsCommandTest.java":[{"add":["4","import static org.hamcrest.CoreMatchers.containsString;","10","import hudson.matrix.MatrixConfiguration;","11","import hudson.matrix.MatrixProject;","12","import hudson.model.AbstractProject;","13","import hudson.model.Item;","14","import hudson.model.ItemGroup;","16","import hudson.model.TopLevelItemDescriptor;","22","import java.io.File;","23","import java.io.IOException;","24","import java.io.InputStream;","31","import javax.annotation.CheckForNull;","32","import javax.servlet.ServletException;","33","","35","import jenkins.model.ModifiableTopLevelItemGroup;","42","import org.kohsuke.stapler.StaplerRequest;","43","import org.kohsuke.stapler.StaplerResponse;","71","    public void failForNonexistingName() throws Exception {","73","        when(jenkins.getView(\"NoSuchViewOrItemGroup\")).thenReturn(null);","74","        when(jenkins.getItemByFullName(\"NoSuchViewOrItemGroup\")).thenReturn(null);","78","        assertThat(stderr.toString(), containsString(\"No view or item group with the given name found\"));","79","    }","80","","81","    @Test","82","    public void failForMatrixProject() throws Exception {","83","","84","        final MatrixProject matrix = mock(MatrixProject.class);","85","        final MatrixConfiguration config = mock(MatrixConfiguration.class);","86","        when(matrix.getItems()).thenReturn(Arrays.asList(config));","87","","88","        when(jenkins.getView(\"MatrixJob\")).thenReturn(null);","89","        when(jenkins.getItemByFullName(\"MatrixJob\")).thenReturn(matrix);","90","","91","        assertThat(runWith(\"MatrixJob\"), equalTo(-1));","92","        assertThat(stdout, is(empty()));","93","        assertThat(stderr.toString(), containsString(\"No view or item group with the given name found\"));","94","    }","95","","96","    @Test","97","    public void getAllJobsFromFolders() throws Exception {","98","","99","        abstract class Folder implements ModifiableTopLevelItemGroup, TopLevelItem {","100","        }","101","","102","        final Folder folder = mock(Folder.class);","103","        final Folder nestedFolder = mock(Folder.class);","104","        when(folder.getDisplayName()).thenReturn(\"Folder\");","105","        when(nestedFolder.getDisplayName()).thenReturn(\"NestedFolder\");","106","","107","        final TopLevelItem job = job(\"job\");","108","        final TopLevelItem nestedJob = job(\"nestedJob\");","109","        when(job.hasPermission(Item.READ)).thenReturn(true);","110","        when(nestedJob.hasPermission(Item.READ)).thenReturn(true);","111","        when(job.getRelativeNameFrom((ItemGroup<TopLevelItem>) folder)).thenReturn(\"job\");","112","        when(nestedJob.getRelativeNameFrom((ItemGroup<TopLevelItem>) folder)).thenReturn(\"nestedJob\");","113","","114","        when(folder.getItems()).thenReturn(Arrays.asList(nestedFolder, job));","115","        when(nestedFolder.getItems()).thenReturn(Arrays.asList(nestedJob));","116","","117","        when(jenkins.getView(\"OuterFolder\")).thenReturn(null);","118","        when(jenkins.getItemByFullName(\"OuterFolder\")).thenReturn(folder);","119","","120","        assertThat(runWith(\"OuterFolder\"), equalTo(0));","121","        assertThat(stdout, listsJobs(\"job\", \"nestedJob\"));","122","        assertThat(stderr, is(empty()));"],"delete":["55","    public void getNullForNonexistingName() throws Exception {","57","        when(jenkins.getView(null)).thenReturn(null);","58","        when(jenkins.getItemByFullName(null)).thenReturn(null);","62","        assertThat(stderr, is(not(empty())));"]}],"core\/src\/main\/java\/hudson\/cli\/ListJobsCommand.java":[{"add":["28","import hudson.model.Items;","32","import jenkins.model.ModifiableTopLevelItemGroup;","67","                if (item instanceof ModifiableTopLevelItemGroup) {","68","                    jobs = Items.getAllItems((ModifiableTopLevelItemGroup) item, TopLevelItem.class);"],"delete":["26","import java.util.LinkedHashSet;","27","","28","import java.util.Collections;","31","import hudson.model.ItemGroup;","33","import hudson.model.ViewGroup;","70","                if (item instanceof ItemGroup) {","71","                    ItemGroup itemGroup = (ItemGroup) item;","72","                    jobs = itemGroup.getItems();"]}]}},"fa47981c071bf8c11041d4f11b2be0c73ab0b270":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["49","import javax.annotation.CheckForNull;","108","    \/** @deprecated use {@link #_doBuild(StaplerRequest, StaplerResponse, TimeDuration)} *\/","109","    @Deprecated","149","    \/** @deprecated use {@link #buildWithParameters(StaplerRequest, StaplerResponse, TimeDuration)} *\/","150","    @Deprecated","155","    public void buildWithParameters(StaplerRequest req, StaplerResponse rsp, @CheckForNull TimeDuration delay) throws IOException, ServletException {"],"delete":["150","    public void buildWithParameters(StaplerRequest req, StaplerResponse rsp, TimeDuration delay) throws IOException, ServletException {"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["1814","    \/** @deprecated use {@link #doBuild(StaplerRequest, StaplerResponse, TimeDuration)} *\/","1815","    @Deprecated","1816","    public void doBuild(StaplerRequest req, StaplerResponse rsp) throws IOException, ServletException {","1817","        doBuild(req, rsp, TimeDuration.fromString(req.getParameter(\"delay\")));","1818","    }","1819","","1838","     * @deprecated as of 1.489","1871","    \/** @deprecated use {@link #doBuildWithParameters(StaplerRequest, StaplerResponse, TimeDuration)} *\/","1872","    @Deprecated","1873","    public void doBuildWithParameters(StaplerRequest req, StaplerResponse rsp) throws IOException, ServletException {","1874","        doBuildWithParameters(req, rsp, TimeDuration.fromString(req.getParameter(\"delay\")));","1875","    }","1876",""],"delete":["1832","     * @deprecated as of 1.488"]}],"changelog.html":[{"add":["60","  <li class='major bug'>","61","    Fixed API incompatibility since 1.489.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18356\">issue 18356<\/a>)"],"delete":[]}]}},"c2c5d1951cc237f6d80566e83a137a96a1c6ea1a":{"changes":{"core\/src\/main\/java\/hudson\/model\/BuildAuthorizationToken.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/BuildAuthorizationToken.java":[{"add":["69","            if (providedToken != null)","70","                throw new AccessDeniedException(Messages.BuildAuthorizationToken_InvalidTokenProvided());"],"delete":["69","            throw new AccessDeniedException(Messages.BuildAuthorizationToken_InvalidTokenProvided());"]}]}},"7ef1d37730997a06386670c343782e55fe4c029f":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/junit\/History.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/junit\/History.java":[{"add":["230","            ar.setSeriesPaint(0,ColorPalette.YELLOW); \/\/ Skips.","231","            ar.setSeriesPaint(1,ColorPalette.RED); \/\/ Failures."],"delete":["230","            ar.setSeriesPaint(0,ColorPalette.RED); \/\/ Failures.","231","            ar.setSeriesPaint(1,ColorPalette.YELLOW); \/\/ Skips."]}]}},"295bb0f888f3033b71b0046cb1d19e35b77aed76":{"changes":{"core\/src\/main\/java\/hudson\/DescriptorExtensionList.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/DescriptorExtensionList.java":[{"add":["163","        getDescriptorExtensionList().add(d);","169","        getDescriptorExtensionList().remove(o);","178","        \/\/ Get a lock for the singleton extension list to prevent deadlocks (JENKINS-55361)","179","        return getDescriptorExtensionList().getLoadLock();","192","        return _load(getDescriptorExtensionList().getComponents());","214","    private ExtensionList<Descriptor> getDescriptorExtensionList() {","215","        return ExtensionList.lookup(Descriptor.class);","216","    }","217",""],"delete":["163","        hudson.getExtensionList(Descriptor.class).add(d);","169","        hudson.getExtensionList(Descriptor.class).remove(o);","178","        return this;","191","        return _load(jenkins.getExtensionList(Descriptor.class).getComponents());"]}]}},"dd2b4a180582e4e8e6bdd8a511a457d201fce1ed":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/main.jelly":"MODIFY","test\/src\/test\/java\/hudson\/tasks\/test\/AggregatedTestResultPublisherTest.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/main.jelly":[{"add":["33","","55","      <j:if test=\"${tr.class.name != 'hudson.tasks.test.AggregatedTestResultPublisher$TestResultAction'}\">","63","    <j:forEach var=\"atr\" items=\"${it.lastCompletedBuild.actions}\">","64","      <j:if test=\"${atr!=null}\">","65","        <j:if test=\"${atr.class.name == 'hudson.tasks.test.AggregatedTestResultPublisher$TestResultAction'}\">","66","          <t:summary icon=\"clipboard.png\">","67","            <a href=\"lastCompletedBuild\/${atr.urlName}\/\" class=\"model-link inside\">${%Latest Aggregated Test Result}<\/a>","68","            <t:test-result it=\"${atr}\" \/>","69","          <\/t:summary>","70","        <\/j:if>","71","      <\/j:if>","72","    <\/j:forEach>"],"delete":["33","  ","55","      <j:if test=\"${tr.class.name != 'hudson.tasks.test.AggregatedTestResultAction'}\">","63","    <j:set var=\"atr\" value=\"${it.lastCompletedBuild.aggregatedTestResultAction}\"\/>","64","    <j:if test=\"${atr!=null}\">","65","      <t:summary icon=\"clipboard.png\">","66","        <a href=\"lastCompletedBuild\/aggregatedTestReport\/\" class=\"model-link inside\">${%Latest Aggregated Test Result}<\/a>","67","        <t:test-result it=\"${atr}\" \/>","68","      <\/t:summary>","69","    <\/j:if>"]}],"test\/src\/test\/java\/hudson\/tasks\/test\/AggregatedTestResultPublisherTest.java":[{"add":["58","                .assertHasLatestAggregatedTestResultText()","61","","83","        projectPage.getLatestAggregatedTestReportLink()","84","                .assertHasLatestAggregatedTestResultText()","85","                .assertNoTests()","86","                .follow();","94","                .assertNoTests()","95","                .follow();","110","        projectPage.getLatestAggregatedTestReportLink()","111","                .assertHasLatestAggregatedTestResultText()","112","                .assertHasTests()","113","                .follow();","133","        build(1);","134","    }","135","","136","    private void build(int numberOfDownstreamBuilds) throws Exception {","141","        assertThat(downstreamBuilds, hasSize(numberOfDownstreamBuilds));","183","            project.getBuildersList().add(new Shell(\"echo $BUILD_NUMBER \" + contents[i] + \" > \" + files[i]));"],"delete":["58","                .assertHasLatestTestResultText()","82","        projectPage.assertNoAggregatedTestReportLink();","90","                .assertNoTests();","105","        projectPage.assertNoAggregatedTestReportLink();","129","        assertThat(downstreamBuilds, hasSize(1));","171","            project.getBuildersList().add(new Shell(\"echo \" + contents[i] + \" > \" + files[i]));"]}]}},"1d2b15173c48c3a78d6b96d99f6e045f43ff07bc":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersAction.java":"MODIFY","core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/CloudSlaveRetentionStrategy.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/ConnectionActivityMonitor.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/DownloadService.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AsyncAperiodicWork.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/SystemProperties.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AsyncPeriodicWork.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/ProgressiveRendering.java":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/JnlpSlaveAgentProtocol3.java":"MODIFY","core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":"MODIFY","core\/src\/main\/java\/hudson\/ProxyConfiguration.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersAction.java":[{"add":["308","        if (SystemProperties.getBoolean(KEEP_UNDEFINED_PARAMETERS_SYSTEM_PROPERTY_NAME)) {"],"delete":["308","        if (Boolean.getBoolean(KEEP_UNDEFINED_PARAMETERS_SYSTEM_PROPERTY_NAME)) {"]}],"core\/src\/main\/java\/hudson\/Util.java":[{"add":["1656","    static int DELETION_MAX = Math.max(1, SystemProperties.getInteger(Util.class.getName() + \".maxFileDeletionRetries\", 3).intValue());","1668","    static int WAIT_BETWEEN_DELETION_RETRIES = SystemProperties.getInteger(Util.class.getName() + \".deletionRetryWait\", 100).intValue();","1692","    static boolean GC_AFTER_FAILED_DELETE = SystemProperties.getBoolean(Util.class.getName() + \".performGCOnFailedDelete\");"],"delete":["1656","    static int DELETION_MAX = Math.max(1, Integer.getInteger(Util.class.getName() + \".maxFileDeletionRetries\", 3).intValue());","1668","    static int WAIT_BETWEEN_DELETION_RETRIES = Integer.getInteger(Util.class.getName() + \".deletionRetryWait\", 100).intValue();","1692","    static boolean GC_AFTER_FAILED_DELETE = Boolean.getBoolean(Util.class.getName() + \".performGCOnFailedDelete\");"]}],"core\/src\/main\/java\/hudson\/slaves\/CloudSlaveRetentionStrategy.java":[{"add":["11","import jenkins.util.SystemProperties;","74","    public static long TIMEOUT = SystemProperties.getLong(CloudSlaveRetentionStrategy.class.getName()+\".timeout\", TimeUnit2.MINUTES.toMillis(10));"],"delete":["73","    public static long TIMEOUT = Long.getLong(CloudSlaveRetentionStrategy.class.getName()+\".timeout\", TimeUnit2.MINUTES.toMillis(10));"]}],"core\/src\/main\/java\/hudson\/slaves\/ConnectionActivityMonitor.java":[{"add":["92","    private static final long TIME_TILL_PING = SystemProperties.getLong(ConnectionActivityMonitor.class.getName()+\".timeToPing\",TimeUnit2.MINUTES.toMillis(3));","94","    private static final long FREQUENCY = SystemProperties.getLong(ConnectionActivityMonitor.class.getName()+\".frequency\",TimeUnit2.SECONDS.toMillis(10));","99","    private static final long TIMEOUT = SystemProperties.getLong(ConnectionActivityMonitor.class.getName()+\".timeToPing\",TimeUnit2.MINUTES.toMillis(4));"],"delete":["92","    private static final long TIME_TILL_PING = Long.getLong(ConnectionActivityMonitor.class.getName()+\".timeToPing\",TimeUnit2.MINUTES.toMillis(3));","94","    private static final long FREQUENCY = Long.getLong(ConnectionActivityMonitor.class.getName()+\".frequency\",TimeUnit2.SECONDS.toMillis(10));","99","    private static final long TIMEOUT = Long.getLong(ConnectionActivityMonitor.class.getName()+\".timeToPing\",TimeUnit2.MINUTES.toMillis(4));"]}],"core\/src\/main\/java\/hudson\/model\/DownloadService.java":[{"add":["491","                SystemProperties.getLong(Downloadable.class.getName()+\".defaultInterval\", DAYS.toMillis(1));"],"delete":["491","                Long.getLong(Downloadable.class.getName()+\".defaultInterval\", DAYS.toMillis(1));"]}],"core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":[{"add":["168","            if (SystemProperties.getBoolean(\"hudson.Main.development\")) {"],"delete":["168","            if (Boolean.getBoolean(\"hudson.Main.development\")) {"]}],"core\/src\/main\/java\/hudson\/model\/AsyncAperiodicWork.java":[{"add":["33","import jenkins.util.SystemProperties;","51","    private static final long LOG_ROTATE_MINUTES = SystemProperties.getLong(AsyncAperiodicWork.class.getName() +","62","    private static final long LOG_ROTATE_SIZE = SystemProperties.getLong(AsyncAperiodicWork.class.getName() + \".logRotateSize\",","94","                SystemProperties.getLong(getClass().getName()+\".logRotateMinutes\", LOG_ROTATE_MINUTES));","95","        this.logRotateSize = SystemProperties.getLong(getClass().getName() +\".logRotateSize\", LOG_ROTATE_SIZE);"],"delete":["50","    private static final long LOG_ROTATE_MINUTES = Long.getLong(AsyncAperiodicWork.class.getName() +","61","    private static final long LOG_ROTATE_SIZE = Long.getLong(AsyncAperiodicWork.class.getName() + \".logRotateSize\",","93","                Long.getLong(getClass().getName()+\".logRotateMinutes\", LOG_ROTATE_MINUTES));","94","        this.logRotateSize = Long.getLong(getClass().getName() +\".logRotateSize\", LOG_ROTATE_SIZE);"]}],"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["153","    private static final int PLUGIN_DOWNLOAD_READ_TIMEOUT = SystemProperties.getInteger(UpdateCenter.class.getName()+\".pluginDownloadReadTimeoutSeconds\", 60) * 1000;"],"delete":["153","    private static final int PLUGIN_DOWNLOAD_READ_TIMEOUT = Integer.getInteger(UpdateCenter.class.getName()+\".pluginDownloadReadTimeoutSeconds\", 60) * 1000;"]}],"core\/src\/main\/java\/jenkins\/util\/SystemProperties.java":[{"add":["251","    ","252","    \/**","253","      * Determines the long value of the system property with the","254","      * specified name.","255","      * ","256","      * This behaves just like {@link Long#getLong(java.lang.String)}, except that it","257","      * also consults the {@link ServletContext}'s \"init\" parameters.","258","      * ","259","      * @param   name property name.","260","      * @return  the {@code Long} value of the property.","261","      *\/","262","    @CheckForNull","263","    public static Long getLong(String name) {","264","        return getLong(name, null);","265","    }","266","    ","267","    \/**","268","      * Determines the integer value of the system property with the","269","      * specified name, or a default value.","270","      * ","271","      * This behaves just like <code>Long.getLong(String,Long)<\/code>, except that it","272","      * also consults the <code>ServletContext<\/code>'s \"init\" parameters. If neither exist,","273","      * return the default value. ","274","      * ","275","      * @param   name property name.","276","      * @param   def   a default value.","277","      * @return  the {@code Long} value of the property.","278","      *          If the property is missing, return the default value.","279","      *          Result may be {@code null} only if the default value is {@code null}.","280","      *\/","281","    public static Long getLong(String name, Long def) {","282","        String v = getString(name);","283","       ","284","        if (v != null) {","285","            try {","286","                return Long.decode(v);","287","            } catch (NumberFormatException e) {","288","                \/\/ Ignore, fallback to default","289","                if (LOGGER.isLoggable(Level.CONFIG)) {","290","                    LOGGER.log(Level.CONFIG, \"Property. Value is not long: {0} => {1}\", new Object[] {name, v});","291","                }","292","            }","293","        }","294","        return def;","295","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AsyncPeriodicWork.java":[{"add":["11","import jenkins.util.SystemProperties;","32","    private static final long LOG_ROTATE_MINUTES = SystemProperties.getLong(AsyncPeriodicWork.class.getName() + \".logRotateMinutes\",","43","    private static final long LOG_ROTATE_SIZE = SystemProperties.getLong(AsyncPeriodicWork.class.getName() + \".logRotateSize\", -1L);","74","                SystemProperties.getLong(getClass().getName() + \".logRotateMinutes\", LOG_ROTATE_MINUTES));","75","        this.logRotateSize = SystemProperties.getLong(getClass().getName() + \".logRotateSize\", LOG_ROTATE_SIZE);"],"delete":["31","    private static final long LOG_ROTATE_MINUTES = Long.getLong(AsyncPeriodicWork.class.getName() + \".logRotateMinutes\",","42","    private static final long LOG_ROTATE_SIZE = Long.getLong(AsyncPeriodicWork.class.getName() + \".logRotateSize\", -1L);","73","                Long.getLong(getClass().getName() + \".logRotateMinutes\", LOG_ROTATE_MINUTES));","74","        this.logRotateSize = Long.getLong(getClass().getName() + \".logRotateSize\", LOG_ROTATE_SIZE);"]}],"core\/src\/main\/java\/jenkins\/util\/ProgressiveRendering.java":[{"add":["79","    private static final Long DEBUG_SLEEP = SystemProperties.getLong(\"jenkins.util.ProgressiveRendering.DEBUG_SLEEP\");"],"delete":["79","    private static final Long DEBUG_SLEEP = Long.getLong(\"jenkins.util.ProgressiveRendering.DEBUG_SLEEP\");"]}],"core\/src\/main\/java\/jenkins\/slaves\/JnlpSlaveAgentProtocol3.java":[{"add":["24","import jenkins.util.SystemProperties;","130","        String propertyString = SystemProperties.getString(propName);","131","        if (propertyString != null)","132","            ENABLED = SystemProperties.getBoolean(propName);"],"delete":["129","        if (System.getProperties().containsKey(propName))","130","            ENABLED = Boolean.getBoolean(propName);"]}],"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":[{"add":["82","import jenkins.util.SystemProperties;","667","    public static long STARVATION_THRESHOLD = SystemProperties.getLong(SCMTrigger.class.getName()+\".starvationThreshold\", TimeUnit2.HOURS.toMillis(1));"],"delete":["666","    public static long STARVATION_THRESHOLD =Long.getLong(SCMTrigger.class.getName()+\".starvationThreshold\", TimeUnit2.HOURS.toMillis(1));"]}],"core\/src\/main\/java\/hudson\/ProxyConfiguration.java":[{"add":["52","import jenkins.util.SystemProperties;","82","    private static final int DEFAULT_CONNECT_TIMEOUT_MILLIS = SystemProperties.getInteger(\"hudson.ProxyConfiguration.DEFAULT_CONNECT_TIMEOUT_MILLIS\", 20 * 1000);"],"delete":["81","    private static final int DEFAULT_CONNECT_TIMEOUT_MILLIS = Integer.getInteger(\"hudson.ProxyConfiguration.DEFAULT_CONNECT_TIMEOUT_MILLIS\", 20 * 1000);"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["599","    private int slaveAgentPort = SystemProperties.getInteger(Jenkins.class.getName()+\".slaveAgentPort\",0);","764","            if(SystemProperties.getBoolean(Jenkins.class.getName()+\".enableExceptionOnNullInstance\")) {"],"delete":["599","    private int slaveAgentPort = Integer.getInteger(Jenkins.class.getName()+\".slaveAgentPort\",0);","764","            if(Boolean.getBoolean(Jenkins.class.getName()+\".enableExceptionOnNullInstance\")) {"]}]}},"be7cdd1e92bbb5e7ff4b3b8215f626b59ab6b9c5":{"changes":{"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":[{"add":["326","        if(explodeTime.exists() && explodeTime.lastModified()!=archive.lastModified())","347","        try {","348","            new FilePath(explodeTime).touch(archive.lastModified());","349","        } catch (InterruptedException e) {","350","            throw new AssertionError(e); \/\/ impossible","351","        }"],"delete":["326","        if(explodeTime.exists() && explodeTime.lastModified()>archive.lastModified())","347","        Util.touch(explodeTime);"]}]}},"e10e98f85408164048350b0f924b63e279624d26":{"changes":{"core\/src\/main\/resources\/jenkins\/security\/whitelisted-classes.txt":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/security\/whitelisted-classes.txt":[{"add":["104","java.util.EnumSet"],"delete":[]}]}},"abf53127974745f81b0796f7071d3e50caa6e6a8":{"changes":{"core\/src\/main\/resources\/hudson\/tools\/label.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tools\/label.jelly":[{"add":["27","        Meant to be used from config.jelly of ToolInstaller subtypes. "],"delete":["27","        Meant to be used from config.jelly of ToolInstaller subypes. "]}]}},"1752b39bb1b27fe08af9c67f2a02f02b37021491":{"changes":{"core\/src\/main\/java\/hudson\/os\/solaris\/ZFSInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/os\/solaris\/ZFSInstaller.java":[{"add":["119","        } catch (LinkageError e) {","120","            LOGGER.log(Level.WARNING, \"No ZFS available\",e);","121","            return false;"],"delete":[]}]}},"bcc86148561ad9ab4a0365ff00d28ff7ee71d57c":{"changes":{"core\/src\/test\/java\/hudson\/FunctionsTest.java":"MODIFY","core\/src\/main\/java\/hudson\/Functions.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/FunctionsTest.java":[{"add":["26","import hudson.model.Computer;","38","import static org.junit.Assert.assertEquals;","39","import org.junit.Ignore;","46","import static org.powermock.api.mockito.PowerMockito.mock;","47","import static org.powermock.api.mockito.PowerMockito.mockStatic;","48","import static org.powermock.api.mockito.PowerMockito.when;","138","    public void testGetRelativeLinkTo_JobFromComputer() throws Exception{","139","        Jenkins j = createMockJenkins();","140","        ItemGroup parent = j;","141","        String contextPath = \"\/jenkins\";","142","        StaplerRequest req = createMockRequest(contextPath);","143","        mockStatic(Stapler.class);","144","        when(Stapler.getCurrentRequest()).thenReturn(req);","145","        Computer computer = mock(Computer.class);","146","        createMockAncestors(req, createAncestor(computer, \".\"), createAncestor(j, \"..\/..\"));","147","        TopLevelItem i = createMockItem(parent, \"job\/i\/\");","148","        String result = Functions.getRelativeLinkTo(i);","149","        assertEquals(\"\/jenkins\/job\/i\/\", result);","150","    }","151","","152","    @Ignore(\"too expensive to make it correct\")","153","    @Test","154","    @PrepareForTest({Stapler.class, Jenkins.class})"],"delete":["25","import static org.junit.Assert.assertEquals;","26","import static org.powermock.api.mockito.PowerMockito.mock;","27","import static org.powermock.api.mockito.PowerMockito.mockStatic;","28","import static org.powermock.api.mockito.PowerMockito.when;","34","","41","","43",""]}],"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["1022","                if (view != null) {","1023","                    \/\/ assume p and the current page belong to the same view, so return a relative path","1024","                    \/\/ (even if they did not, View.getItem does not by default verify ownership)"],"delete":["1016","        Collection<TopLevelItem> viewItems;","1017","        if (view != null) {","1018","            viewItems = view.getItems();","1019","        } else {","1020","            viewItems = Collections.emptyList();","1021","        }","1028","                if(viewItems.contains((TopLevelItem)i)) {","1029","                    \/\/ if p and the current page belongs to the same view, then return a relative path"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Faster rendering of views containing many items.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18364\">issue 18364<\/a>)"],"delete":["57","  <li class=>"]}]}},"cd97f74333b56243363a4ad9a58a3148fb493878":{"changes":{"core\/pom.xml":"MODIFY","test\/src\/test\/java\/hudson\/maven\/MavenProjectTest.java":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["333","      <version>1.104<\/version>"],"delete":["333","      <version>1.103<\/version>","347","        <exclusion><!-- excluded until stapler revs up -->","348","              <groupId>org.kohsuke.stapler<\/groupId>","349","              <artifactId>json-lib<\/artifactId>","350","        <\/exclusion>","353","    <dependency><!-- manually specified until stapler 1.104 -->","354","      <groupId>org.kohsuke.stapler<\/groupId>","355","      <artifactId>json-lib<\/artifactId>","356","      <version>2.1-rev2<\/version>","357","    <\/dependency>"]}],"test\/src\/test\/java\/hudson\/maven\/MavenProjectTest.java":[{"add":["26","import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;\r","33","import org.xml.sax.SAXException;\r","34","\r","35","import java.io.IOException;\r","80","     * Check if the generated site is linked correctly.\r","82","    @Bug(3497)\r","88","\r","89","        \/\/ this should succeed\r","90","        HudsonTestCase.WebClient wc = new WebClient();\r","91","        wc.getPage(project,\"site\");\r","92","        try {\r","93","            wc.getPage(project,\"site\/no-such-file\");\r","94","            fail(\"should have resulted in 404\");\r","95","        } catch (FailingHttpStatusCodeException e) {\r","96","            assertEquals(404,e.getStatusCode());\r","97","        }\r"],"delete":["76","     * Attempt to reproduce #2154, but this appears to work.\r","78","    @Bug(2154)\r"]}]}},"daacb02057cd702900f986a0a6867730ece13014":{"changes":{"core\/src\/test\/java\/hudson\/MarkupTextTest.java":"MODIFY","core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/test\/java\/hudson\/console\/UrlAnnotatorTest.java":"MODIFY","core\/src\/test\/java\/hudson\/FunctionsTest.java":"MODIFY","core\/src\/test\/java\/hudson\/UtilTest.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/MarkupTextTest.java":[{"add":["98","        assertEquals(\"Line\\n2   &amp; 3\\n&lt;End&gt;\\n\", text.toString(true));","100","        assertEquals(\"Line<hr\/>\\n2   &amp; 3\\n&lt;End&gt;\\n\", text.toString(true));"],"delete":["98","        assertEquals(\"Line\\n2   &amp; 3\\n&lt;End>\\n\", text.toString(true));","100","        assertEquals(\"Line<hr\/>\\n2   &amp; 3\\n&lt;End>\\n\", text.toString(true));"]}],"core\/src\/main\/java\/hudson\/Util.java":[{"add":["902","            if(ch=='>')","903","                buf.append(\"&gt;\");","904","            else","935","            if(ch=='>')","936","                buf.append(\"&gt;\");","937","            else"],"delete":[]}],"core\/src\/test\/java\/hudson\/console\/UrlAnnotatorTest.java":[{"add":["41","        assertEquals(\"Hello &lt;foo&gt;<a href='http:\/\/foo\/'>http:\/\/foo\/<\/a>&lt;\/foo&gt; Bye\",","48","                + \"ftp:\/\/bar<\/a>\\\" or &lt;<a href='https:\/\/baz\/'>https:\/\/baz\/<\/a>&gt; or (<a \""],"delete":["41","        assertEquals(\"Hello &lt;foo><a href='http:\/\/foo\/'>http:\/\/foo\/<\/a>&lt;\/foo> Bye\",","48","                + \"ftp:\/\/bar<\/a>\\\" or &lt;<a href='https:\/\/baz\/'>https:\/\/baz\/<\/a>> or (<a \""]}],"core\/src\/test\/java\/hudson\/FunctionsTest.java":[{"add":["338","        assertEquals(\"Bad input &lt;xml\/&gt;\\n\", Functions.printLogRecordHtml(lr, null)[3]);"],"delete":["338","        assertEquals(\"Bad input &lt;xml\/>\\n\", Functions.printLogRecordHtml(lr, null)[3]);"]}],"core\/src\/test\/java\/hudson\/UtilTest.java":[{"add":["269","        assertEquals(\"&lt;a&gt;\", Util.escape(\"<a>\"));"],"delete":["269","        assertEquals(\"&lt;a>\", Util.escape(\"<a>\"));"]}]}},"8a4bedd0df9b5d642945eb601ddb99bb75e87131":{"changes":{"changelog.html":"MODIFY","pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["64","<ul class=image>","65","  <li class=bug>","66","    Fixed <tt>NoClassDefFoundError: Base64<\/tt> with the <tt>-jnlpCredentials<\/tt> option.","67","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9679\">issue 9679<\/a>)","68","<\/ul>"],"delete":["64","<!--=RC-CHANGES=-->"]}],"pom.xml":[{"add":["199","        <version>2.21<\/version>"],"delete":["199","        <version>2.20<\/version>"]}]}},"4aaf613349178ee48bc1b1a91ce3989f2ed5baf2":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["283","      <version>1.71<\/version>"],"delete":["283","      <version>1.70<\/version>"]}]}},"68a7f8e319472e680a8a329f5c9d94362bbbdc02":{"changes":{"changelog.html":"MODIFY","osx\/scripts\/postinstall-launchd":"MODIFY"},"diff":{"changelog.html":[{"add":["66","  <li class=bug>","67","    OS X installer can fail to set the file permissions correctly.","68","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11714\">issue 11714<\/a>)"],"delete":[]}],"osx\/scripts\/postinstall-launchd":[{"add":["8","find \/Users\/Shared\/Jenkins \\( -not -user daemon -or -not -group daemon \\) -print0 | xargs -0 chown daemon:daemon"],"delete":["8","find \/Users\/Shared\/Jenkins -not -user daemon -or -not -group daemon -print0 | xargs -0 chown daemon:daemon"]}]}},"f8f9462b6c4ed1c83da9fed53e88fe0b8d034890":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["193","  <li class=bug>","194","    New JSON library corrects problems such as form values starting with <code>[<\/code>.","195","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14827\">issue 14827<\/a>)"],"delete":[]}]}},"d18f3cadca8fe81b45df79be1ce7f6c3e3f62f6f":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["74","import java.util.jar.Attributes;","342","            Attributes attrs = backupWar.getManifest().getMainAttributes();","343","            String v = attrs.getValue(\"Jenkins-Version\");","344","            if (v==null)    v = attrs.getValue(\"Hudson-Version\");","345","            return v;"],"delete":["341","            return backupWar.getManifest().getMainAttributes().getValue(\"Hudson-Version\");"]}],"changelog.html":[{"add":["58","    \"Downgrade Jenkins\" incorrectly shows 1.395","59","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9656\">issue 9656<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"5b48a42fd7bb8e6137045eb0209b0616044ec36f":{"changes":{"test\/src\/test\/java\/hudson\/model\/AbstractProjectTest.java":"MODIFY","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithOlderDependency\/plugins\/script-security.jpi":"ADD","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerDependency\/jenkins.install.InstallUtil.lastExecVersion":"ADD","test\/src\/test\/java\/jenkins\/install\/LoadDetachedPluginsTest.java":"MODIFY","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/installDetachedDependencies\/example.zip":"ADD","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/installDetachedDependencies\/plugins\/example.jpi":"ADD","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerPlugin\/plugins\/command-launcher.jpi":"ADD","test\/src\/test\/java\/hudson\/model\/UsageStatisticsTest.java":"MODIFY","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerPlugin\/plugins\/script-security.jpi":"ADD","\/dev\/null":"DELETE","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerPlugin\/jenkins.install.InstallUtil.lastExecVersion":"ADD","core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":"MODIFY","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithOlderDependency\/jenkins.install.InstallUtil.lastExecVersion":"ADD","test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerDependency\/plugins\/script-security.jpi":"ADD","war\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/AbstractProjectTest.java":[{"add":[],"delete":["478","        tpm.installDetachedPlugin(\"junit\");","479","        tpm.installDetachedPlugin(\"display-url-api\");","480","        tpm.installDetachedPlugin(\"mailer\");"]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithOlderDependency\/plugins\/script-security.jpi":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerDependency\/jenkins.install.InstallUtil.lastExecVersion":[{"add":[],"delete":[]}],"test\/src\/test\/java\/jenkins\/install\/LoadDetachedPluginsTest.java":[{"add":["26","import hudson.ClassicPluginStrategy;","37","import java.util.logging.Level;","38","import java.util.stream.Collectors;","49","import static org.hamcrest.Matchers.*;","50","import static org.junit.Assert.*;","51","import org.jvnet.hudson.test.LoggerRule;","57","    @Rule public LoggerRule logging = new LoggerRule();","121","                    scriptSecurity.getWrapper().getVersionNumber(), equalTo(new VersionNumber(\"1.56\")));","163","    @Issue(\"JENKINS-55582\")","164","    @LocalData","165","    @Test","166","    public void installDetachedDependencies() {","167","        logging.record(PluginManager.class, Level.FINE).record(ClassicPluginStrategy.class, Level.FINE);","168","        rr.then(r -> {","169","            List<String> activePlugins = r.jenkins.getPluginManager().getPlugins().stream().filter(PluginWrapper::isActive).map(PluginWrapper::getShortName).collect(Collectors.toList());","170","            assertThat(\"we precreated $JENKINS_HOME\/plugins\/example.jpi so it had better be loaded\", activePlugins, hasItem(\"example\"));","171","            { \/\/ Check that it links correctly against an implied dependency from a detached plugin:","172","                Class<?> callerC = r.jenkins.pluginManager.uberClassLoader.loadClass(\"io.jenkins.plugins.example.Caller\");","173","                assertLoader(callerC, \"example\", r);","174","                Object jdkInstaller = callerC.getMethod(\"use\").invoke(null);","175","                assertLoader(jdkInstaller.getClass(), \"jdk-tool\", r);","176","            }","177","            assertThat(\"it had various implicit detached dependencies so those should have been loaded too\", activePlugins, hasSize(greaterThan(1)));","178","        });","179","    }","180","    private void assertLoader(Class<?> c, String expectedPlugin, JenkinsRule r) {","181","        PluginWrapper pw = r.jenkins.pluginManager.whichPlugin(c);","182","        assertNotNull(\"did not expect to be loading \" + c + \" from \" + c.getClassLoader(), pw);","183","        assertEquals(expectedPlugin, pw.getShortName());","184","    }","185",""],"delete":["46","import static org.hamcrest.Matchers.empty;","47","import static org.hamcrest.Matchers.equalTo;","48","import static org.hamcrest.Matchers.greaterThan;","49","import static org.hamcrest.Matchers.not;","50","import static org.hamcrest.Matchers.notNullValue;","51","import static org.junit.Assert.assertThat;","52","import static org.junit.Assert.assertTrue;","121","                    scriptSecurity.getWrapper().getVersionNumber(), equalTo(new VersionNumber(\"1.18.1\")));"]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/installDetachedDependencies\/example.zip":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/installDetachedDependencies\/plugins\/example.jpi":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["602","    void considerDetachedPlugin(String shortName) {","603","        if (new File(rootDir, shortName + \".jpi\").isFile()) {","604","            LOGGER.fine(() -> \"not considering loading a detached dependency \" + shortName + \" as it is already on disk\");","605","            return;","606","        }","607","        LOGGER.fine(() -> \"considering loading a detached dependency \" + shortName);","608","        for (String loadedFile : loadPluginsFromWar(\"\/WEB-INF\/detached-plugins\", (dir, name) -> normalisePluginName(name).equals(shortName))) {","609","            String loaded = normalisePluginName(loadedFile);","610","            File arc = new File(rootDir, loaded + \".jpi\");","611","            LOGGER.info(() -> \"Loading a detached plugin as a dependency: \" + arc);","612","            try {","613","                plugins.add(strategy.createPluginWrapper(arc));","614","            } catch (IOException e) {","615","                failedPlugins.add(new FailedPlugin(arc.getName(), e));","616","            }","617","","618","        }","619","    }","620",""],"delete":[]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerPlugin\/plugins\/command-launcher.jpi":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/UsageStatisticsTest.java":[{"add":["119","        assertThat(reported, hasItem(\"credentials\"));"],"delete":["26","import hudson.ClassicPluginStrategy;","120","        assertThat(reported, containsInAnyOrder(\"credentials\"));"]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerPlugin\/plugins\/script-security.jpi":[{"add":[],"delete":[]}],"\/dev\/null":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerPlugin\/jenkins.install.InstallUtil.lastExecVersion":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/ClassicPluginStrategy.java":[{"add":["252","    private void fix(Attributes atts, List<PluginWrapper.Dependency> optionalDependencies) {","258","","259","        for (Dependency d : DetachedPluginsUtil.getImpliedDependencies(pluginName, jenkinsVersion)) {","260","            LOGGER.fine(() -> \"implied dep \" + pluginName + \" ? \" + d.shortName);","261","            pluginManager.considerDetachedPlugin(d.shortName);","262","            optionalDependencies.add(d);","263","        }"],"delete":["252","    private static void fix(Attributes atts, List<PluginWrapper.Dependency> optionalDependencies) {","258","        ","259","        optionalDependencies.addAll(DetachedPluginsUtil.getImpliedDependencies(pluginName, jenkinsVersion));"]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithOlderDependency\/jenkins.install.InstallUtil.lastExecVersion":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/jenkins\/install\/LoadDetachedPluginsTest\/upgradeFromJenkins2WithNewerDependency\/plugins\/script-security.jpi":[{"add":[],"delete":[]}],"war\/pom.xml":[{"add":["389","                  <version>1.56<\/version>"],"delete":["389","                  <version>1.18.1<\/version>"]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["145","    private static final Set<String> warnedMissing = Collections.synchronizedSet(new HashSet<>());","1096","                    LOGGER.log(warnedMissing.add(e.getKey()) ? Level.WARNING : Level.FINE, \"Could not find dependency {0} of {1}\", new Object[] {e.getKey(), name});"],"delete":["1095","                    LOGGER.log(Level.WARNING, \"Could not find dependency {0} of {1}\", new Object[] {e.getKey(), name});"]}]}},"cf0183d1ed1e999a04a1445b2cd369b58e1268bf":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/test\/java\/hudson\/model\/JobTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["376","        EnvVars env = new EnvVars();","378","        if (node != null) {","380","            if (computer != null) {","381","                \/\/ we need to get computer environment to inherit platform details ","382","                env = computer.getEnvironment();","383","                env.putAll(computer.buildEnvironment(listener));","384","            }"],"delete":["376","        EnvVars env;","378","        if (node!=null) {","380","            env = (computer != null) ? computer.buildEnvironment(listener) : new EnvVars();                ","381","        } else {","382","            env = new EnvVars();"]}],"core\/src\/test\/java\/hudson\/model\/JobTest.java":[{"add":["2","import static org.junit.Assert.*;","4","import java.lang.reflect.Method;","5","","6","import org.hamcrest.CoreMatchers;","8","import org.junit.runner.RunWith;","9","import org.jvnet.hudson.test.Issue;","10","import org.mockito.Mockito;","11","import org.powermock.api.mockito.PowerMockito;","12","import org.powermock.core.MockRepository;","13","import org.powermock.core.classloader.annotations.PrepareForTest;","14","import org.powermock.modules.junit4.PowerMockRunner;","16","import hudson.EnvVars;","17","import hudson.Platform;","18","import hudson.util.ReflectionUtils;","19","","20","@RunWith(PowerMockRunner.class)","21","@PrepareForTest({ Node.class, Platform.class })","45","    ","46","    @Issue(\"JENKINS-14807\")","47","    @Test","48","    public void use_slave_platform_path_separator_when_contribute_path() throws Throwable {","49","        \/\/ mock environment to simulate EnvVars of slave node with different platform than master","50","        Platform slavePlatform = Platform.current() == Platform.UNIX ? Platform.WINDOWS : Platform.UNIX;","51","        PowerMockito.mockStatic(Platform.class);","52","        Mockito.when(Platform.current()).thenReturn(slavePlatform);","53","","54","        \/\/ environments are prepared after mock the Platform.current() method","55","        EnvVars emptyEnv = new EnvVars();","56","        EnvVars slaveEnv = new EnvVars(EnvVars.masterEnvVars);","57","","58","        \/\/ reset mock of Platform class","59","        MockRepository.removeClassMethodInvocationControl(Platform.class);","60","","61","        Job<?, ?> job = Mockito.mock(FreeStyleProject.class);","62","        Mockito.when(job.getEnvironment(Mockito.any(Node.class), Mockito.any(TaskListener.class))).thenCallRealMethod();","63","        Mockito.when(job.getCharacteristicEnvVars()).thenReturn(emptyEnv);","64","","65","        Computer c = Mockito.mock(Computer.class);","66","        \/\/ ensure that PATH variable exists to perform the path separator join","67","        if (!slaveEnv.containsKey(\"PATH\")) {","68","            slaveEnv.put(\"PATH\", \"\/bin\/bash\");","69","        }","70","        Mockito.when(c.getEnvironment()).thenReturn(slaveEnv);","71","        Mockito.when(c.buildEnvironment(Mockito.any(TaskListener.class))).thenReturn(emptyEnv);","72","","73","        Node node = PowerMockito.mock(Node.class);","74","        PowerMockito.doReturn(c).when(node).toComputer();","75","","76","        EnvVars env = job.getEnvironment(node, null);","77","        String path = \"\/test\";","78","        env.override(\"PATH+TEST\", path);","79","","80","        assertThat(\"The contributed PATH was not joined using the path separator defined in slave node\", \/\/","81","                env.get(\"PATH\"), \/\/","82","                CoreMatchers.containsString(path + (slavePlatform == Platform.WINDOWS ? ';' : ':')));","83","    }","84",""],"delete":["2","import static org.junit.Assert.assertEquals;"]}]}},"ba9fa3e095c39f28624a60597a195a87ccbe60b6":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["459","      <version>1.8.0<\/version>"],"delete":["459","      <version>1.8.1<\/version>"]}]}},"66c02a4cc32a22cc81311eb6b478359082924c92":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["77","  margin: 0px 0px 40px 0px;","82","  float:left;","83","  position: fixed;","84","  width: 360px;","85","  margin-left: 15px;","89","  margin-left: 370px;","114","  position: absolute;"],"delete":["80","#page-body.fixedGridLayout, .fixedGridLayout #side-panel, .fixedGridLayout #main-panel {","81","  left: 0px;","82","}","83","","84","#page-body.fixedGridLayout {","85","  position: fixed;","86","  top: 66px; \/* height of #header + #breadcrumbBar *\/","87","  bottom: 37px; \/* height of #footer-container *\/","88","  right: 0px;","89","  overflow: scroll;","90","}","91",".fixedGridLayout #side-panel, .fixedGridLayout #main-panel {","92","  position: absolute;","93","  top: 0px;","94","  bottom: 0px;","95","}","96","","98","  width: 375px;","99","  padding-left: 15px;","103","  right: 0px;","104","  margin-left: 375px;","129","  position: fixed;"]}]}},"6318b8d800abdf8b280f4e1b8ce8bf22e49242ad":{"changes":{"core\/src\/main\/java\/jenkins\/security\/DefaultConfidentialStore.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/DefaultConfidentialStore.java":[{"add":["18","import javax.crypto.BadPaddingException;","110","        } catch (IOException x) {","111","            if (x.getCause() instanceof BadPaddingException) {","112","                return null; \/\/ broken somehow","113","            } else {","114","                throw x;","115","            }"],"delete":[]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    After recent Java security updates, Jenkins would not gracefully recover from a deleted <code>secrets\/master.key<\/code>.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-25937\">issue 25937<\/a>)"],"delete":["57","  <li class=>"]}]}},"f3566d10b2585e333d6a2d5ccd23c70752f1c584":{"changes":{"core\/src\/main\/java\/hudson\/lifecycle\/UnixLifecycle.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/lifecycle\/UnixLifecycle.java":[{"add":["54","","55","            \/\/ if we are running as daemon, don't fork into background one more time during restart","56","            args.remove(\"--daemon\");"],"delete":[]}],"changelog.html":[{"add":["58","    If running as a daemon, don't daemonize one more time during restart.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11742\">issue 11742<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"50a61a2efa562aec10ed894ea1b6da1cc79557c4":{"changes":{"war\/src\/main\/webapp\/help\/system-config\/master-slave\/availability_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/numExecutors_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/description_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/homeDirectory_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/ldap\/userSearchBase_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/slave_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/help_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/description_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/maven_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/batch_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/downstream_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/systemMessage_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/cvs-browser_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/update-center\/proxy-server_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/jnlpSecurity_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/timer-format_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/update-center\/proxy-server_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/mailer\/sendToindividuals_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/mailer\/smtpAuth_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/view-config\/includeregex_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/matrix\/axes_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/usage_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/ldap\/groupSearchBase_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/help_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/ldap\/rootDN_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/triggerRemotely_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/container-realm_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/private-realm\/allow-signup_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/fingerprint\/keepDependencies_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/manual-list_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/upstream_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/no-authorization_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/enableSecurity_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/ant\/ant-opts_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/demand\/idleDelay_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/auto-aggregate_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/ldap\/server_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/user\/description_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/clock_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/timer_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/legacy-auth-strategy_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/shell\/shellexe_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/fingerprint_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/triggers\/SCMTrigger\/concurrency_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/systemMessage_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/mailer_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/ant_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/private-realm_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/quietPeriod_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/full-control-once-logged-in_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/update-center\/proxy-port_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/user\/fullName_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/javadoc-keep-all_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/view-config\/description_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/shell\/shellexe_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/ant\/ant-targets_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/ant\/ant-buildfile_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/manual-list_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/slave-agent-port_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/ldap\/managerDN_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/auto-aggregate_fr.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/jnlpSecurity_tr.html":"MODIFY","war\/src\/main\/webapp\/help\/tasks\/junit\/report_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/ant\/ant-properties_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/poll-scm_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/matrix\/jdk_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/disable_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/security\/ldap\/userSearchFilter_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/quietPeriod_pt_BR.html":"MODIFY","war\/src\/main\/webapp\/help\/project-config\/log-rotation_pt_BR.html":"MODIFY"},"diff":{"war\/src\/main\/webapp\/help\/system-config\/master-slave\/availability_fr.html":[{"add":["1","    Contrle le moment o Hudson dmarrage et arrte l'esclave.","5","            Maintenir l'esclave activ le plus longtemps possible","8","            C'est la configuration par dfaut et la plus classique.","9","            Dans ce mode, Hudson fait des tests rguliers pour conserver l'esclave","11","            Si Hudson peut dmarrer l'esclave sans l'aide de l'utilisateur et","13","            il tentera rgulirement de le relancer.","14","            Hudson ne cherchera pas  le dsactiver.","18","            Arrter et dmarrer l'esclave  des moment spcifiques","21","            Dans ce mode, Hudson conservera l'esclave activ selon les horaires configurs.","22","            Si Hudson peut dmarrer l'esclave sans l'aide de l'utilisateur et","23","            que l'esclave n'est pas disponible dans la fentre o cet","24","            il est cens tre activ,","25","            il tentera rgulirement de le relancer.","27","            Pendant la fentre o l'esclave est cens tre dsactiv, il ne le sera","28","            rellement que s'il n'a pas de job en cours.","32","            Activer l'esclave en cas ncessit et le dsactiver lorsqu'il n'est plus ncessaire","35","            Dans ce mode, si Hudson peut dmarrer l'esclave sans l'aide de l'utilisateur, il","36","            cherchera rgulirement  l'activer tant qu'il y aura des jobs en attente","37","            respectant les critres suivants&nbsp;:","39","                <li>Ils sont dans la file d'attente depuis au moins aussi longue que la priode d'attente spcifie<\/li>","40","                <li>Ils peuvent s'excuter sur cette machine<\/li>","43","            L'esclace sera dsactiv si&nbsp;:","46","                <li>L'esclave a t inactif depuis au moins la priode d'inactivit spcifie<\/li>"],"delete":["1","    Contrle le moment o Hudson dmarrage et arrte l'esclave.","5","            Maintenir l'esclave activ le plus longtemps possible","8","            C'est la configuration par dfaut et la plus classique.","9","            Dans ce mode, Hudson fait des tests rguliers pour conserver l'esclave","11","            Si Hudson peut dmarrer l'esclave sans l'aide de l'utilisateur et","13","            il tentera rgulirement de le relancer.","14","            Hudson ne cherchera pas  le dsactiver.","18","            Arrter et dmarrer l'esclave  des moment spcifiques","21","            Dans ce mode, Hudson conservera l'esclave activ selon les horaires configurs.","22","            Si Hudson peut dmarrer l'esclave sans l'aide de l'utilisateur et","23","            que l'esclave n'est pas disponible dans la fentre o cet","24","            il est cens tre activ,","25","            il tentera rgulirement de le relancer.","27","            Pendant la fentre o l'esclave est cens tre dsactiv, il ne le sera","28","            rellement que s'il n'a pas de job en cours.","32","            Activer l'esclave en cas ncessit et le dsactiver lorsqu'il n'est plus ncessaire","35","            Dans ce mode, si Hudson peut dmarrer l'esclave sans l'aide de l'utilisateur, il","36","            cherchera rgulirement  l'activer tant qu'il y aura des jobs en attente","37","            respectant les critres suivants&nbsp;:","39","                <li>Ils sont dans la file d'attente depuis au moins aussi longue que la priode d'attente spcifie<\/li>","40","                <li>Ils peuvent s'excuter sur cette machine<\/li>","43","            L'esclace sera dsactiv si&nbsp;:","46","                <li>L'esclave a t inactif depuis au moins la priode d'inactivit spcifie<\/li>"]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/numExecutors_pt_BR.html":[{"add":["1","  Isto controla o nmero de construes concorrentes que o Hudson pode executar neste slave.","3","  Um bom valor para iniciar seria o nmero de processadores da mquina.","6","  Aumentando este valor alm disso pode causar lentido na construo, mas tambm pode aumentar","7","  a capacidade total, porque permite a CPU construir um projeto enquanto uma outra construo","8","  est aguardando por operao de E\/S.","11","  Atribuir 0 a este valor  til para remover temporriamente um slave desabilitado do Hudson","12","  sem perder outras informaes de configurao."],"delete":["1","  Isto controla o nmero de construes concorrentes que o Hudson pode executar neste slave.","3","  Um bom valor para iniciar seria o nmero de processadores da mquina.","6","  Aumentando este valor alm disso pode causar lentido na construo, mas tambm pode aumentar","7","  a capacidade total, porque permite a CPU construir um projeto enquanto uma outra construo","8","  est aguardando por operao de E\/S.","11","  Atribuir 0 a este valor  til para remover temporriamente um slave desabilitado do Hudson","12","  sem perder outras informaes de configurao."]}],"war\/src\/main\/webapp\/help\/project-config\/description_pt_BR.html":[{"add":["1","  Esta descrio  colocada pgina superior do projeto tal que os visitantes possam","2","  saber sobre o que  esta tarefa. Voc pode usar qualquer tag HTML aqui."],"delete":["1","  Esta descrio  colocada pgina superior do projeto tal que os visitantes possam","2","  saber sobre o que  esta tarefa. Voc pode usar qualquer tag HTML aqui."]}],"war\/src\/main\/webapp\/help\/system-config\/homeDirectory_pt_BR.html":[{"add":["1","  O Hudson armazena todas os arquivos de dados dentro deste diretrio no sistema de arquivos.","2","  Voc pode mud-lo:","5","      Usando a ferramenta de administrao de seu continer web para definir a varivel de","8","      Definindo a varivel de ambiente <tt>HUDSON_HOME<\/tt> antes de lanar seu","9","      continer web.","11","      (No recomendado) modificando o web.xml no arquivo <tt>hudson.war<\/tt> (ou sua imagem expandida","12","      em seu continer web).","14","  Este valor no pode ser trocado equanto o Hudson estiver em execuo.","15","  Isto serve para voc ter certeza que sua configurao est fazendo efeito."],"delete":["1","  O Hudson armazena todas os arquivos de dados dentro deste diretrio no sistema de arquivos.","2","  Voc pode mud-lo:","5","      Usando a ferramenta de administrao de seu continer web para definir a varivel de","8","      Definindo a varivel de ambiente <tt>HUDSON_HOME<\/tt> antes de lanar seu","9","      continer web.","11","      (No recomendado) modificando o web.xml no arquivo <tt>hudson.war<\/tt> (ou sua imagem expandida","12","      em seu continer web).","14","  Este valor no pode ser trocado equanto o Hudson estiver em execuo.","15","  Isto serve para voc ter certeza que sua configurao est fazendo efeito."]}],"war\/src\/main\/webapp\/help\/security\/ldap\/userSearchBase_pt_BR.html":[{"add":["1","    Uma das pesquisas que o Hudson faz no LDAP  localizar o registro do usurio passando o nome do usurio.","2","    Se voc especificar um DN relativo (do DN raz) aqui, Hudson estreitar as","3","    pesquisas para a sub-rvore.","6","    Mas na prtica, os servidores LDAP mantm um extensivo ndice sobre os dados, assim especificar","7","    este campo  raramente necessrio.","10","    Se voc realmente especificar este valor, o campo normalmente parece algo como <tt>\"ou=pessoas\"<\/tt>"],"delete":["1","    Uma das pesquisas que o Hudson faz no LDAP  localizar o registro do usurio passando o nome do usurio.","2","    Se voc especificar um DN relativo (do DN raz) aqui, Hudson estreitar as","3","    pesquisas para a sub-rvore.","6","    Mas na prtica, os servidores LDAP mantm um extensivo ndice sobre os dados, assim especificar","7","    este campo  raramente necessrio.","10","    Se voc realmente especificar este valor, o campo normalmente parece algo como <tt>\"ou=pessoas\"<\/tt>"]}],"war\/src\/main\/webapp\/help\/project-config\/slave_pt_BR.html":[{"add":["1","  Algumas vezes um projeto s pode ser construdo com sucesso em um slave","2","  (ou master) em particular.  Se for assim, esta opo fora o Hudson a sempre construir este projeto","3","  em um computadore especfico.","5","  Caso contrrio, desmarque a caixa e assim o Hudson pode agendar construes nos ns","6","  disponveis, o que resulta em tempos de resposta mais rpidos.","9","  Esta opo tamm  ltil quando voc quiser ter certeza que um projeto pode","10","  ser construdo em um n particular."],"delete":["1","  Algumas vezes um projeto s pode ser construdo com sucesso em um slave","2","  (ou master) em particular.  Se for assim, esta opo fora o Hudson a sempre construir este projeto","3","  em um computadore especfico.","5","  Caso contrrio, desmarque a caixa e assim o Hudson pode agendar construes nos ns","6","  disponveis, o que resulta em tempos de resposta mais rpidos.","9","  Esta opo tamm  ltil quando voc quiser ter certeza que um projeto pode","10","  ser construdo em um n particular."]}],"war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/help_pt_BR.html":[{"add":["1","    Por causa dos testes frequentemente dominarem o tempo de execuo, uma prtica melhor do Hudson","2","    envolve dividir as execues de testes em diferentes tarefas, possivelmente em mltiplas","6","    Quando voc fizer isto, configurar a agregao de teste  uma forma conveniente de","8","    mostr-la junto a construo que ela est testando. Desta forma, as pessoas podem ver","9","    o estado todo do teste da construo rapidamente."],"delete":["1","    Por causa dos testes frequentemente dominarem o tempo de execuo, uma prtica melhor do Hudson","2","    envolve dividir as execues de testes em diferentes tarefas, possivelmente em mltiplas","6","    Quando voc fizer isto, configurar a agregao de teste  uma forma conveniente de","8","    mostr-la junto a construo que ela est testando. Desta forma, as pessoas podem ver","9","    o estado todo do teste da construo rapidamente."]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/description_pt_BR.html":[{"add":["1","  Descrio opcional deste slave. Este informao ","2","   mostrada na tela de configurao do projeto.","5","  Quando voc tiver slaves que so diferentes dos outros,  til","6","  usar este campo para explicar o que  diferente. Por exemplo, entrar","8","  sempre construir em uma mquina Windows (por exemplo, se eles precisarem de","9","  uma ferramenta de construo especfica do Windows.)"],"delete":["1","  Descrio opcional deste slave. Este informao ","2","   mostrada na tela de configurao do projeto.","5","  Quando voc tiver slaves que so diferentes dos outros,  til","6","  usar este campo para explicar o que  diferente. Por exemplo, entrar","8","  sempre construir em uma mquina Windows (por exemplo, se eles precisarem de","9","  uma ferramenta de construo especfica do Windows.)"]}],"war\/src\/main\/webapp\/help\/project-config\/maven_pt_BR.html":[{"add":["1","  Para projetos que usam Maven como sistema de construo. Isto faz o Hudson ","2","  invocar o Maven com os objetivos e opes informadas. Um cdigo de sada ","3","  diferente de zero vindo do Maven faz com que o Hudson marque a construo como uma falha.","4","  Algumas verses do Maven tm um bug onde ele no retorna o cdigo de sada corretamente.","8","  vrias variveis de ambiente<\/a> para o Maven, que voc pode acessar do Maven como \"${env.VARIABLENAME}\".","11","  As mesmas variveis podem ser usadas como argumentos na linha de comando (como se voc fosse invocar do shell).","12","  Por exemplo, voc pode especificar <tt>-DresultsFile=${WORKSPACE}\/${BUILD_TAG}.resultados.txt<\/tt>"],"delete":["1","  Para projetos que usam Maven como sistema de construo. Isto faz o Hudson ","2","  invocar o Maven com os objetivos e opes informadas. Um cdigo de sada ","3","  diferente de zero vindo do Maven faz com que o Hudson marque a construo como uma falha.","4","  Algumas verses do Maven tm um bug onde ele no retorna o cdigo de sada corretamente.","8","  vrias variveis de ambiente<\/a> para o Maven, que voc pode acessar do Maven como \"${env.VARIABLENAME}\".","11","  As mesmas variveis podem ser usadas como argumentos na linha de comando (como se voc fosse invocar do shell).","12","  Por exemplo, voc pode especificar <tt>-DresultsFile=${WORKSPACE}\/${BUILD_TAG}.resultados.txt<\/tt>"]}],"war\/src\/main\/webapp\/help\/project-config\/batch_pt_BR.html":[{"add":["2","  O script ser executado com o workspace como o diretrio atual.","4","  O texto que voc colocar na caixa de texto ser executado como um arquivo de lote (.bat), ","5","  e uma construo ser considerada falha se ao final da execuo %ERRORLEVEL% no for 0.","8","  Se voc j tem um arquivo de lote no SCM, voc pode apenas digitar o caminho para o arquivo","9","  (novamente relativo ao diretrio do workspace), e simplesmente execut-lo."],"delete":["2","  O script ser executado com o workspace como o diretrio atual.","4","  O texto que voc colocar na caixa de texto ser executado como um arquivo de lote (.bat), ","5","  e uma construo ser considerada falha se ao final da execuo %ERRORLEVEL% no for 0.","8","  Se voc j tem um arquivo de lote no SCM, voc pode apenas digitar o caminho para o arquivo","9","  (novamente relativo ao diretrio do workspace), e simplesmente execut-lo."]}],"war\/src\/main\/webapp\/help\/project-config\/downstream_pt_BR.html":[{"add":["1","  Dispara construes de outro projetos uma vez que uma construo foi completada com sucesso.","2","  Projetos mltiplos podem ser especificados usando vrgula, como \"abc, def\".","5","  Outro uso bvio  que voc pode us-lo para construir outros projetos que tenham uma dependncia","6","  no projeto atual, isto tambm pode ser til para dividir um processo de construo demorado em mltiplos","7","  estgios (tal como a parte de construo e a parte de teste)."],"delete":["1","  Dispara construes de outro projetos uma vez que uma construo foi completada com sucesso.","2","  Projetos mltiplos podem ser especificados usando vrgula, como \"abc, def\".","5","  Outro uso bvio  que voc pode us-lo para construir outros projetos que tenham uma dependncia","6","  no projeto atual, isto tambm pode ser til para dividir um processo de construo demorado em mltiplos","7","  estgios (tal como a parte de construo e a parte de teste)."]}],"war\/src\/main\/webapp\/help\/system-config\/systemMessage_pt_BR.html":[{"add":["1","  Esta mensagem ser apresentada no <a href=\".\">topo da pgina<\/a>.","2","  til para postar uma notificao global do sistema para o usurio.","3","  Pode conter marcaes HTML."],"delete":["1","  Esta mensagem ser apresentada no <a href=\".\">topo da pgina<\/a>.","2","  til para postar uma notificao global do sistema para o usurio.","3","  Pode conter marcaes HTML."]}],"war\/src\/main\/webapp\/help\/system-config\/cvs-browser_pt_BR.html":[{"add":["2","  Especifica o caminho para a aplicao web de visualizao do repositrio CVS.","3","  Definir este valor permite que o Hudson gere links das mudanas para estas pginas.","9","      A URL da pgina que mostra os detalhes sobre um arquivo particular ","10","      no repositrio.","13","    <dt>URL de comparao<\/dt>","15","      A URL da pgina que mostra detalhes sobre a comparao entre duas revises.","20","  Os seguintes caracteres de macro esto disponveis.","28","      <td>Reviso da verso antiga (para URLs de comparao)<\/td>","32","      <td>Reviso da nova verso (para URLs de comparao)<\/td>"],"delete":["2","  Especifica o caminho para a aplicao web de visualizao do repositrio CVS.","3","  Definir este valor permite que o Hudson gere links das mudanas para estas pginas.","9","      A URL da pgina que mostra os detalhes sobre um arquivo particular ","10","      no repositrio.","13","    <dt>URL de comparao<\/dt>","15","      A URL da pgina que mostra detalhes sobre a comparao entre duas revises.","20","  Os seguintes caracteres de macro esto disponveis.","28","      <td>Reviso da verso antiga (para URLs de comparao)<\/td>","32","      <td>Reviso da nova verso (para URLs de comparao)<\/td>"]}],"war\/src\/main\/webapp\/help\/update-center\/proxy-server_pt_BR.html":[{"add":["1","  Se seu servidor Hudson estiver atrs de um firewall e no tem acesso direto a internet,","2","  e se a JVM do seu servidor no estiver configurada apropriadamente","4","  para habilitar a conexo de internet, voc pode especificar o nome do servidor de proxy HTTP neste campos para permitir ao Hudson","5","  instalar plugins para voc. Note que o Hudson usa HTTPS para se comunicar com o centro de atualizao para baixar os plugins.","8","  O valor que voc colocar aqui ser atribudo a propriedade de sistema <tt>http.proxyHost<\/tt>. Deixar este campo vazio","9","  deixa esta propriedade sem atribuio, o que significa que o Hudson tentar conectar ao host externo diretamente.","12","  Se voc no est certo sobre o valor, cheque a configurao de proxy de seu browser."],"delete":["1","  Se seu servidor Hudson estiver atrs de um firewall e no tem acesso direto a internet,","2","  e se a JVM do seu servidor no estiver configurada apropriadamente","4","  para habilitar a conexo de internet, voc pode especificar o nome do servidor de proxy HTTP neste campos para permitir ao Hudson","5","  instalar plugins para voc. Note que o Hudson usa HTTPS para se comunicar com o centro de atualizao para baixar os plugins.","8","  O valor que voc colocar aqui ser atribudo a propriedade de sistema <tt>http.proxyHost<\/tt>. Deixar este campo vazio","9","  deixa esta propriedade sem atribuio, o que significa que o Hudson tentar conectar ao host externo diretamente.","12","  Se voc no est certo sobre o valor, cheque a configurao de proxy de seu browser."]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/jnlpSecurity_pt_BR.html":[{"add":["1","    Controla como Hudson permite lanamentos via JNLP.","5","            Lanar apenas a partir de \"Detalhes do Computador\". Requer Login se a ","6","            segurana estiver habilitada.","9","            <em>Esta  a configurao normal e padro.<\/em>","10","            Neste modo, Hudson fornece um link de lanamento JNLP na visualizao do computador.","11","            Se a segurana estiver habilitada, ento o link apenas estar disponvel para ","12","            usurio autenticados.","16","            Lanar da pgina inicial. Requer Login se a ","17","            segurana estiver habilitada.","20","            Neste modo, Hudson fornece um link de lanamento JNLP em na visualizao do computador e","21","            no painel lateral \"Estado do Executor de Construo\".","22","            Se a segurana estiver habilitada, ento o link apenas estar disponvel para ","23","            usurio autenticados.","27","            Lanar apenas a partir de \"Detalhes do Computador\". Nunca requer Login.","30","            Neste modo, Hudson fornece um link de lanamento JNLP na visualizao do computador.","31","            O link estar sempre disponvel mesmo quando o slave estiver desligado.","33","            <b>AVISO!<\/b> Neste modo a segurana  desabilitada.  Assim os slaves podem ser iniciados por <em>qualquer um","34","            que tenha acesso a este servidor<\/em>.  Os slaves tm a habilidade de executar cdigo arbitrrio no ","35","            master.  <b>No selecione esta opo a menos que voc esteja completamente ciente dos riscos<\/b>"],"delete":["1","    Controla como Hudson permite lanamentos via JNLP.","5","            Lanar apenas a partir de \"Detalhes do Computador\". Requer Login se a ","6","            segurana estiver habilitada.","9","            <em>Esta  a configurao normal e padro.<\/em>","10","            Neste modo, Hudson fornece um link de lanamento JNLP na visualizao do computador.","11","            Se a segurana estiver habilitada, ento o link apenas estar disponvel para ","12","            usurio autenticados.","16","            Lanar da pgina inicial. Requer Login se a ","17","            segurana estiver habilitada.","20","            Neste modo, Hudson fornece um link de lanamento JNLP em na visualizao do computador e","21","            no painel lateral \"Estado do Executor de Construo\".","22","            Se a segurana estiver habilitada, ento o link apenas estar disponvel para ","23","            usurio autenticados.","27","            Lanar apenas a partir de \"Detalhes do Computador\". Nunca requer Login.","30","            Neste modo, Hudson fornece um link de lanamento JNLP na visualizao do computador.","31","            O link estar sempre disponvel mesmo quando o slave estiver desligado.","33","            <b>AVISO!<\/b> Neste modo a segurana  desabilitada.  Assim os slaves podem ser iniciados por <em>qualquer um","34","            que tenha acesso a este servidor<\/em>.  Os slaves tm a habilidade de executar cdigo arbitrrio no ","35","            master.  <b>No selecione esta opo a menos que voc esteja completamente ciente dos riscos<\/b>"]}],"war\/src\/main\/webapp\/help\/project-config\/timer-format_pt_BR.html":[{"add":["1","  Este campo segue a sintaxe do cron (com poucas diferenas).","2","  Especificamente, cada linha consite de 5 campos separados por tabulao (TAB) ou espeao em branco:","15","      <td>O dia do ms (1-31)<\/td>","19","      <td>O ms (1-12)<\/td>","23","      <td>O dia da semana (0-7) onde 0 e 7 so Domingo.<\/td>","27","    Para especificar mltiplos valores para um campo, os seguintes operadores esto","28","    disponveis. Em ordem de precedncia,","31","    <li>'*' pode ser usado para especificar todos os valores vlidos.<\/li>","35","    <li>'A,B,...,Z' pode ser usado para especificar mltiplos valores, tal como \"0,30\" ou \"1,3,5\"<\/li>","38","    Linhas vazias e linha que comeam com '#' sero ignoradas como comentrios.","40","    Em adio, as constantes '@yearly', '@annually', '@monthly', '@weekly', '@daily', '@midnight',","41","    e '@hourly' so suportadas."],"delete":["1","  Este campo segue a sintaxe do cron (com poucas diferenas).","2","  Especificamente, cada linha consite de 5 campos separados por tabulao (TAB) ou espeao em branco:","15","      <td>O dia do ms (1-31)<\/td>","19","      <td>O ms (1-12)<\/td>","23","      <td>O dia da semana (0-7) onde 0 e 7 so Domingo.<\/td>","27","    Para especificar mltiplos valores para um campo, os seguintes operadores esto","28","    disponveis. Em ordem de precedncia,","31","    <li>'*' pode ser usado para especificar todos os valores vlidos.<\/li>","35","    <li>'A,B,...,Z' pode ser usado para especificar mltiplos valores, tal como \"0,30\" ou \"1,3,5\"<\/li>","38","    Linhas vazias e linha que comeam com '#' sero ignoradas como comentrios.","40","    Em adio, as constantes '@yearly', '@annually', '@monthly', '@weekly', '@daily', '@midnight',","41","    e '@hourly' so suportadas."]}],"war\/src\/main\/webapp\/help\/update-center\/proxy-server_fr.html":[{"add":["1","  Si votre serveur Hudson se trouve derrire un firewall, qu'il n'a pas d'accs direct  internet et","2","  que la JVM de votre serveur n'est pas configure de faon  permettre l'accs  internet (voir","3","  <a  href=\"http:\/\/java.sun.com\/j2se\/1.5.0\/docs\/guide\/net\/properties.html\">les proprits rseau du JDK pour plus d'informations<\/a>),","4","  vous pouvez spcifier le nom d'un serveur proxy HTTP pour permettre  Hudson","6","  Notez que Hudson utilise HTTPS pour communiquer avec le serveur de mise  jour pour tlcharger les plugins.","9","  La valeur place ici sera positionne dans la proprit systme <tt>http.proxyHost<\/tt>.","10","  Si ce champ est vide, la proprit ne sera pas positionne; Hudson tentera donc de se"],"delete":["1","  Si votre serveur Hudson se trouve derrire un firewall, qu'il n'a pas d'accs direct  internet et","2","  que la JVM de votre serveur n'est pas configure de faon  permettre l'accs  internet (voir","3","  <a  href=\"http:\/\/java.sun.com\/j2se\/1.5.0\/docs\/guide\/net\/properties.html\">les proprits rseau du JDK pour plus d'informations<\/a>),","4","  vous pouvez spcifier le nom d'un serveur proxy HTTP pour permettre  Hudson","6","  Notez que Hudson utilise HTTPS pour communiquer avec le serveur de mise  jour pour tlcharger les plugins.","9","  La valeur place ici sera positionne dans la proprit systme <tt>http.proxyHost<\/tt>.","10","  Si ce champ est vide, la proprit ne sera pas positionne; Hudson tentera donc de se"]}],"war\/src\/main\/webapp\/help\/tasks\/mailer\/sendToindividuals_pt_BR.html":[{"add":["1","  Se esta opo estiver marcada, o e-mail de notificao ser enviado para os indivduos que ","2","  comitaram mudanas para a costruo que falhou (assumindo que estas mudanas causaram a falha na construo).","4","  Se os endereos de e-mail tambm forem especificados na lista de destinatrios, ento ambos os indivduos","5","  bem como os endereos especificados na lista recebero e-mails. Se a lista de destinatrios","6","  estiver vazia, ento apens os indivduos recebero e-mails. "],"delete":["1","  Se esta opo estiver marcada, o e-mail de notificao ser enviado para os indivduos que ","2","  comitaram mudanas para a costruo que falhou (assumindo que estas mudanas causaram a falha na construo).","4","  Se os endereos de e-mail tambm forem especificados na lista de destinatrios, ento ambos os indivduos","5","  bem como os endereos especificados na lista recebero e-mails. Se a lista de destinatrios","6","  estiver vazia, ento apens os indivduos recebero e-mails. "]}],"war\/src\/main\/webapp\/help\/tasks\/mailer\/smtpAuth_pt_BR.html":[{"add":["1","  Usa autenticao SMTP quando enviar e-mails. Se seu ambiente requer","2","  o uso de autenticao SMTP, especifique o usurio e senha aqui."],"delete":["1","  Usa autenticao SMTP quando enviar e-mails. Se seu ambiente requer","2","  o uso de autenticao SMTP, especifique o usurio e senha aqui."]}],"war\/src\/main\/webapp\/help\/view-config\/includeregex_pt_BR.html":[{"add":["1","  Se configurada, a expresso regular ser aplicada a todos os nomes de tarefas e aquelas que se","2","  enquadrarem na expresso regular sero mostradas nesta visualizao."],"delete":["1","  Se configurada, a expresso regular ser aplicada a todos os nomes de tarefas e aquelas que se","2","  enquadrarem na expresso regular sero mostradas nesta visualizao."]}],"war\/src\/main\/webapp\/help\/matrix\/axes_pt_BR.html":[{"add":["1","  Se sua matriz de configurao precisa de eixos adicionais, voc pode especific-los aqui.","3","  Por exemplo, vamos dizer que voc est tentando executar um teste para sua aplicao de banco de dados,","4","  e voc precisa test-la com trs bancos de dados: MySQL, PostgreSQL, e Oracle. Seu","5","  script de construo est projetado tal que voc possa testar com um banco de dados particular usando","8","  Este  o conceito de um eixo. Voc pode ter uma varivel chamada \"database\",","9","  que recebe trs valores. Quando voc configur-la, Hudson executar 3 construes, cada uma com","10","  valores diferentes para a varivel \"database\" para exaustivamente cobrir ","11","  a matriz de configurao.","13","  Variveis especificadas aqui se tornam disponveis para a construo como variveis de ambiente.","14","  Em adio, para Ant e Maven, as variveis tambm so expostas como propriedades, como se","17","  Quando mltiplos eixos so especificados, todas as possveis combinaes dos eixos so construdas","18","  exaustivamente. Valores mltiplos em labels e JDKs so tratados da mesma maneira. Assim","19","  se voc especificar jdk=[JDK5,JDK6], database=[mysql,postgresql,oracle], container=[jetty,tomcat],","20","  ento cada construo consistir de 2x3x2=12 diferentes sub-construes."],"delete":["1","  Se sua matriz de configurao precisa de eixos adicionais, voc pode especific-los aqui.","3","  Por exemplo, vamos dizer que voc est tentando executar um teste para sua aplicao de banco de dados,","4","  e voc precisa test-la com trs bancos de dados: MySQL, PostgreSQL, e Oracle. Seu","5","  script de construo est projetado tal que voc possa testar com um banco de dados particular usando","8","  Este  o conceito de um eixo. Voc pode ter uma varivel chamada \"database\",","9","  que recebe trs valores. Quando voc configur-la, Hudson executar 3 construes, cada uma com","10","  valores diferentes para a varivel \"database\" para exaustivamente cobrir ","11","  a matriz de configurao.","13","  Variveis especificadas aqui se tornam disponveis para a construo como variveis de ambiente.","14","  Em adio, para Ant e Maven, as variveis tambm so expostas como propriedades, como se","17","  Quando mltiplos eixos so especificados, todas as possveis combinaes dos eixos so construdas","18","  exaustivamente. Valores mltiplos em labels e JDKs so tratados da mesma maneira. Assim","19","  se voc especificar jdk=[JDK5,JDK6], database=[mysql,postgresql,oracle], container=[jetty,tomcat],","20","  ento cada construo consistir de 2x3x2=12 diferentes sub-construes."]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/usage_pt_BR.html":[{"add":["1","  Controla como o Hudson agenda as construes nesta mquina.","5","      Utilizar este slave tanto quando possvel","8","      Esta  a configurao padro.","9","      Neste modo, o Hudson usa este slave livremente. Sempre que houver uma construo","10","      que possa ser feita usando este slave, o Hudson usar ele.","14","      Deixar esta mquina apenas para tarefas amarradas","17","      Neste modo, o Hudson apenas construir um projeto nesta mquina quando","18","      este projeto especificamente tiver este slave como o \"n associado\".","21","      Por exemplo, para executar testes de desempenho do Hudson contnuamente,","22","      voc pode usar esta configurao com o nmero de executores como sendo 1, ","24","      e que um executor no ser bloqueado","25","      por outras construes que possam ser feitas em outros slaves."],"delete":["1","  Controla como o Hudson agenda as construes nesta mquina.","5","      Utilizar este slave tanto quando possvel","8","      Esta  a configurao padro.","9","      Neste modo, o Hudson usa este slave livremente. Sempre que houver uma construo","10","      que possa ser feita usando este slave, o Hudson usar ele.","14","      Deixar esta mquina apenas para tarefas amarradas","17","      Neste modo, o Hudson apenas construir um projeto nesta mquina quando","18","      este projeto especificamente tiver este slave como o \"n associado\".","21","      Por exemplo, para executar testes de desempenho do Hudson contnuamente,","22","      voc pode usar esta configurao com o nmero de executores como sendo 1, ","24","      e que um executor no ser bloqueado","25","      por outras construes que possam ser feitas em outros slaves."]}],"war\/src\/main\/webapp\/help\/security\/ldap\/groupSearchBase_fr.html":[{"add":["5","    Ce champ dtermine la requte  lancer pour identifier l'unit organisationnelle qui contient des groupes.","6","    La requte est presque toujours <tt>\"ou=groups\"<\/tt>; dans la plupart des cas, vous devriez donc laisser","7","    ce champ vide et laisser cette requte par dfaut s'excuter."],"delete":["5","    Ce champ dtermine la requte  lancer pour identifier l'unit organisationnelle qui contient des groupes.","6","    La requte est presque toujours <tt>\"ou=groups\"<\/tt>; dans la plupart des cas, vous devriez donc laisser","7","    ce champ vide et laisser cette requte par dfaut s'excuter."]}],"war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/help_fr.html":[{"add":["1","    Parce que les tests prennent la majeure partie du temps d'excution, une","2","    bonne pratique Hudson consiste  sparer l'excution des tests dans des","3","    jobs diffrents, voire de multiples jobs.","6","    Si vous faites ainsi, demander l'aggrgation des tests est une manire","7","    pratique de collecter les rsultats des tests provenant de jobs en aval","8","    et de les afficher avec le build qu'ils ont test. De cette faon, les","9","    utilisateurs peuvent voir rapidement le statut gnral des tests d'un","10","    build donn."],"delete":["1","    Parce que les tests prennent la majeure partie du temps d'excution, une","2","    bonne pratique Hudson consiste  sparer l'excution des tests dans des","3","    jobs diffrents, voire de multiples jobs.","6","    Si vous faites ainsi, demander l'aggrgation des tests est une manire","7","    pratique de collecter les rsultats des tests provenant de jobs en aval","8","    et de les afficher avec le build qu'ils ont test. De cette faon, les","9","    utilisateurs peuvent voir rapidement le statut gnral des tests d'un","10","    build donn."]}],"war\/src\/main\/webapp\/help\/security\/ldap\/rootDN_pt_BR.html":[{"add":["1","    Para autenticar usurio e determinar os papis dados ao usurio, Hudson faz","2","    mltiplas consultas ao LDAP.","4","    Desde que uma base LDAP  conceitualmente uma grande rvore e a pesquisa  feita recursivamente,","5","    em teoria se ns pudermos inicar uma pesquisa comeando em um sub-n (como o oposto a riz), voc consegue","7","    Este campo especifica o DN de tal sub-rvore.","10","    Mas na prtica, os servidores LDAP mantm uma extensivo ndice sobre os dados, assim especificar","11","    este campo  raramente necessrio &mdash; voc deveria apenas deixar que o Hudson resolva isto","15","    Se voc realmente especificar este valor, o campo normalmente parece algo como <tt>\"dc=sun,dc=com\"<\/tt>"],"delete":["1","    Para autenticar usurio e determinar os papis dados ao usurio, Hudson faz","2","    mltiplas consultas ao LDAP.","4","    Desde que uma base LDAP  conceitualmente uma grande rvore e a pesquisa  feita recursivamente,","5","    em teoria se ns pudermos inicar uma pesquisa comeando em um sub-n (como o oposto a riz), voc consegue","7","    Este campo especifica o DN de tal sub-rvore.","10","    Mas na prtica, os servidores LDAP mantm uma extensivo ndice sobre os dados, assim especificar","11","    este campo  raramente necessrio &mdash; voc deveria apenas deixar que o Hudson resolva isto","15","    Se voc realmente especificar este valor, o campo normalmente parece algo como <tt>\"dc=sun,dc=com\"<\/tt>"]}],"war\/src\/main\/webapp\/help\/project-config\/triggerRemotely_pt_BR.html":[{"add":["1","  Habilite esta opo se voc quiser disparar novas construes","2","  acessando uma URL especial pr-definida (conveniente para scripts).","3","  <p>Um tpico exemplo","4","  para esta funcionalidade seria disparar um nova construo do","5","  script ligado ao sistema de controle de cdigo fonte, quando algum acabou de submeter","6","  uma mudana para o repositrio, ou de um script que analisa","7","  suas notificaes de email do controle de cdigo fonte.<\/p>","8","  <p>Voc precisar fornecer um sinal de autorizao na forma de","10","  disparar esta construo de projeto.<\/p>"],"delete":["1","  Habilite esta opo se voc quiser disparar novas construes","2","  acessando uma URL especial pr-definida (conveniente para scripts).","3","  <p>Um tpico exemplo","4","  para esta funcionalidade seria disparar um nova construo do","5","  script ligado ao sistema de controle de cdigo fonte, quando algum acabou de submeter","6","  uma mudana para o repositrio, ou de um script que analisa","7","  suas notificaes de email do controle de cdigo fonte.<\/p>","8","  <p>Voc precisar fornecer um sinal de autorizao na forma de","10","  disparar esta construo de projeto.<\/p>"]}],"war\/src\/main\/webapp\/help\/security\/container-realm_pt_BR.html":[{"add":["1","  Usa o continer de servlet para autenticar os usurios, conforme definido pela especificao do servlet.","2","  Isto  histricamente o que o Hudson estava fazendo at a verso 1.163. Isto  til principalmente","3","  para as seguintes situaes:","7","      Voc estava usando uma verso anterior a 1.164 e gostaria de manter seu comportamento.","10","      Voc j configurou seu continer com domnio de segurana correto e","11","      prefere que o Hudson use-o. (algumas vezes o continer oferece uma documentao melhor","12","      ou implementaes customizadas para conectar a domnio de usurios especfico.) "],"delete":["1","  Usa o continer de servlet para autenticar os usurios, conforme definido pela especificao do servlet.","2","  Isto  histricamente o que o Hudson estava fazendo at a verso 1.163. Isto  til principalmente","3","  para as seguintes situaes:","7","      Voc estava usando uma verso anterior a 1.164 e gostaria de manter seu comportamento.","10","      Voc j configurou seu continer com domnio de segurana correto e","11","      prefere que o Hudson use-o. (algumas vezes o continer oferece uma documentao melhor","12","      ou implementaes customizadas para conectar a domnio de usurios especfico.) "]}],"war\/src\/main\/webapp\/help\/security\/private-realm\/allow-signup_fr.html":[{"add":["1","  Par dfaut, Hudson permet aux utilisateurs de se crer un compte eux-mmes,  l'aide du lien \"S'inscrire\"","2","  en haut  droite de la page.","3","  Mais si vous souhaitez viter que n'importe puisse crer des comptes et si vous prfrez contrler prcisment","4","  comment les comptes utilisateurs sont crs, alors dcochez cette option.","7","  Quand la case est dcoche, une personne possdant le rle administrateur devra crer ces comptes."],"delete":["1","  Par dfaut, Hudson permet aux utilisateurs de se crer un compte eux-mmes,  l'aide du lien \"S'inscrire\"","2","  en haut  droite de la page.","3","  Mais si vous souhaitez viter que n'importe puisse crer des comptes et si vous prfrez contrler prcisment","4","  comment les comptes utilisateurs sont crs, alors dcochez cette option.","7","  Quand la case est dcoche, une personne possdant le rle administrateur devra crer ces comptes."]}],"war\/src\/main\/webapp\/help\/tasks\/fingerprint\/keepDependencies_pt_BR.html":[{"add":["1","  Se esta opo estiver habilitada, todas  <a href=\"lastSuccessfulBuild\/fingerprint\">","2","  as costrues que so referenciadas<\/a> das construes deste projet (via fingerprint)","3","  sero protegidas da rotao de log.","6","  Quando sua tarefa depende de outras tarefas no Hudson e voc ocasionalmente precisa","7","  marcar com uma tag seu workspace,  frequentemente conveniente\/necessrio tambm marcar com uma tag suas","8","  dependncias no Hudson. O problema  que a rotao de log poderia","9","  interferir nisto, desde que a construo que seu projeto est usando poderia j ter ","10","  seu log rotacionado (se houve uma poro de construes e sua dependncia), e","11","  se isto acontecer voc no ser capaz de confiavelmente marcar com uma tag suas dependncias.","14","  Esta caracterstica corrige este problema \"travando\" aquelas construes que voc depende,","15","  portanto garantindo que voc possa sempre marcar suas dependncias completas."],"delete":["1","  Se esta opo estiver habilitada, todas  <a href=\"lastSuccessfulBuild\/fingerprint\">","2","  as costrues que so referenciadas<\/a> das construes deste projet (via fingerprint)","3","  sero protegidas da rotao de log.","6","  Quando sua tarefa depende de outras tarefas no Hudson e voc ocasionalmente precisa","7","  marcar com uma tag seu workspace,  frequentemente conveniente\/necessrio tambm marcar com uma tag suas","8","  dependncias no Hudson. O problema  que a rotao de log poderia","9","  interferir nisto, desde que a construo que seu projeto est usando poderia j ter ","10","  seu log rotacionado (se houve uma poro de construes e sua dependncia), e","11","  se isto acontecer voc no ser capaz de confiavelmente marcar com uma tag suas dependncias.","14","  Esta caracterstica corrige este problema \"travando\" aquelas construes que voc depende,","15","  portanto garantindo que voc possa sempre marcar suas dependncias completas."]}],"war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/manual-list_pt_BR.html":[{"add":["1","    Especifique uma lista de nomes de tarefas manualmente aqui. Mltiplos nomes podem ser separados","2","    por vrgula, como \"<tt>foo, bar<\/tt>\""],"delete":["1","    Especifique uma lista de nomes de tarefas manualmente aqui. Mltiplos nomes podem ser separados","2","    por vrgula, como \"<tt>foo, bar<\/tt>\""]}],"war\/src\/main\/webapp\/help\/project-config\/upstream_pt_BR.html":[{"add":["2","    Configura um disparador tal que quando algum outro projeto terminar a construo,","3","    uma nova construo  agendada para este projeto. Isto  conveniente para executar","4","    um teste extensivo aps uma construo ser completada, por exemplo.","6","    Esta configurao  a viso oposta da seo \"Construir outros projetos\"","7","    em \"As Ps-construo\". Atualizar uma mudar automaticamente a outra."],"delete":["2","    Configura um disparador tal que quando algum outro projeto terminar a construo,","3","    uma nova construo  agendada para este projeto. Isto  conveniente para executar","4","    um teste extensivo aps uma construo ser completada, por exemplo.","6","    Esta configurao  a viso oposta da seo \"Construir outros projetos\"","7","    em \"As Ps-construo\". Atualizar uma mudar automaticamente a outra."]}],"war\/src\/main\/webapp\/help\/security\/no-authorization_pt_BR.html":[{"add":["1","  Nenhuma checagem de autorizao  feita. Todos obtm control total do Hudson,","2","  incluindo usurios annimos que no possuem conta.","5","  Isto  til em situaes onde voc executa o Hudson em um ambiente confivel","6","  (tal como em uma rede interna de uma empresa) e apenas quer usar a autenticao para","7","  questo de personalizao. Neste caso, se algum precisar fazer uma rpida","8","  mudana no Hudson, no ser forado a se logar."],"delete":["1","  Nenhuma checagem de autorizao  feita. Todos obtm control total do Hudson,","2","  incluindo usurios annimos que no possuem conta.","5","  Isto  til em situaes onde voc executa o Hudson em um ambiente confivel","6","  (tal como em uma rede interna de uma empresa) e apenas quer usar a autenticao para","7","  questo de personalizao. Neste caso, se algum precisar fazer uma rpida","8","  mudana no Hudson, no ser forado a se logar."]}],"war\/src\/main\/webapp\/help\/system-config\/enableSecurity_pt_BR.html":[{"add":["1","  Se habilitado, voc tem que se logar com um usurio e senha que tenha o papel \"admin\"","2","  antes de mudar a configurao ou executar uma nova construo (procure pelo link \"login\"","3","  no canto superior direito da pgina).","4","  A configurao de contas de usurios  especfica para o continer web que voc est usando.","5","  (Por exemplo, no Tomcat, por padro, ele procura por <tt>$TOMCAT_HOME\/conf\/tomcat-users.xml<\/tt>)","8","  Se voc est usando o Hudson em uma intranet (ou outro ambiente \"confivel\"),  geralmente","9","  desejvel deixar este checkbox desligado, tal que o desenvolvedor do projeto possa configurar seus prprios","10","  projetos sem incomodar voc.","13","  Se voc est expondo Hudson para a internet, voc deve ligar esta opo. O Hudson  quem lana","14","  os processos, assim um Hudson inseguro  um caminho certo para ser hackeado.","17","  Para mais informaes sobre segurana e Hudson, veja"],"delete":["1","  Se habilitado, voc tem que se logar com um usurio e senha que tenha o papel \"admin\"","2","  antes de mudar a configurao ou executar uma nova construo (procure pelo link \"login\"","3","  no canto superior direito da pgina).","4","  A configurao de contas de usurios  especfica para o continer web que voc est usando.","5","  (Por exemplo, no Tomcat, por padro, ele procura por <tt>$TOMCAT_HOME\/conf\/tomcat-users.xml<\/tt>)","8","  Se voc est usando o Hudson em uma intranet (ou outro ambiente \"confivel\"),  geralmente","9","  desejvel deixar este checkbox desligado, tal que o desenvolvedor do projeto possa configurar seus prprios","10","  projetos sem incomodar voc.","13","  Se voc est expondo Hudson para a internet, voc deve ligar esta opo. O Hudson  quem lana","14","  os processos, assim um Hudson inseguro  um caminho certo para ser hackeado.","17","  Para mais informaes sobre segurana e Hudson, veja"]}],"war\/src\/main\/webapp\/help\/ant\/ant-opts_pt_BR.html":[{"add":["1","  Se sua construo necessita de uma <a href=\"http:\/\/ant.apache.org\/manual\/running.html#envvars\">ANT_OPTS<\/a> customizadas,","2","  especifique-a aqui.  Tipicamente isto pode ser usado para especificar limites de memria para o java usar, por exemplo <code>-Xmx512m<\/code>.","3","  Note que outras opes do Ant (tal como <tt>-lib<\/tt>) deveriam ir para o campo \"Alvos Ant\".  "],"delete":["1","  Se sua construo necessita de uma <a href=\"http:\/\/ant.apache.org\/manual\/running.html#envvars\">ANT_OPTS<\/a> customizadas,","2","  especifique-a aqui.  Tipicamente isto pode ser usado para especificar limites de memria para o java usar, por exemplo <code>-Xmx512m<\/code>.","3","  Note que outras opes do Ant (tal como <tt>-lib<\/tt>) deveriam ir para o campo \"Alvos Ant\".  "]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/demand\/idleDelay_fr.html":[{"add":["1","    Le nombre de minutes d'inactivit de cet esclave avant la tentative de dconnexion."],"delete":["1","    Le nombre de minutes d'inactivit de cet esclave avant la tentative de dconnexion."]}],"war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/auto-aggregate_pt_BR.html":[{"add":["2","    todas as tarefas filhas transitivas deste projeto. Isto  conveniente","3","    quando voc no tem que list-las individualmente at a data","4","    que voc adicionou\/removeu as tarefas. Isto normalmente funciona bem, como suas ","5","    tarefas de teste so normalmente configuradas como tarefas filhas da tarefa de construo.","8","    Se por alguma razo a auto agregao no funcionar, voc pode sempre"],"delete":["2","    todas as tarefas filhas transitivas deste projeto. Isto  conveniente","3","    quando voc no tem que list-las individualmente at a data","4","    que voc adicionou\/removeu as tarefas. Isto normalmente funciona bem, como suas ","5","    tarefas de teste so normalmente configuradas como tarefas filhas da tarefa de construo.","8","    Se por alguma razo a auto agregao no funcionar, voc pode sempre"]}],"war\/src\/main\/webapp\/help\/security\/ldap\/server_pt_BR.html":[{"add":["3","    Se seu servidor LDAP usa um porta diferente da 389 (que  a padro para LDAP),","4","    voc tambm pode adicionar um nmero de porta aqui, como <tt>ldap.acme.org:1389<\/tt>"],"delete":["3","    Se seu servidor LDAP usa um porta diferente da 389 (que  a padro para LDAP),","4","    voc tambm pode adicionar um nmero de porta aqui, como <tt>ldap.acme.org:1389<\/tt>"]}],"war\/src\/main\/webapp\/help\/user\/description_pt_BR.html":[{"add":["1","  Esta descrio  colocada no topo da pgina do usurio tal que os visitantes possam","2","  saber quem voc . Voc pode usar qualquer marcao HTML aqui. Considere colocar","3","  alguns links para outras pginas relacionadas a voc."],"delete":["1","  Esta descrio  colocada no topo da pgina do usurio tal que os visitantes possam","2","  saber quem voc . Voc pode usar qualquer marcao HTML aqui. Considere colocar","3","  alguns links para outras pginas relacionadas a voc."]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/clock_pt_BR.html":[{"add":["1","  Muitos aspectos de uma construo so sensveis ao relgio, e portanto se o relgio da mquina","2","  em que o Hudson roda e o relgio da mquina slave forem significantemente diferentes, ","4","  Considere sincronizar os relgios das mquinas pelo NTP. "],"delete":["1","  Muitos aspectos de uma construo so sensveis ao relgio, e portanto se o relgio da mquina","2","  em que o Hudson roda e o relgio da mquina slave forem significantemente diferentes, ","4","  Considere sincronizar os relgios das mquinas pelo NTP. "]}],"war\/src\/main\/webapp\/help\/project-config\/timer_pt_BR.html":[{"add":["5","  Esta funcionalidade  para usar o Hudson no lugar do cron,","6","  e <b>no  ideal para projetos de software de construo contnua<\/b>.","8","  Quando as pessoas iniciam na integrao contnua, elas frequentemente so levadas","9","  a idia de construes agendadas regularmente como toda noite\/semanalmente e assim elas","10","  usam esta funcionalidade. Porm, o ponto principal da integrao contnua  iniciar","11","  uma construo to logo uma mudana seja feita, para fornecer um feedback rpido sober a mudana.","12","  Para fazer isto voc precisa","13","  <a href=\"https:\/\/hudson.dev.java.net\/build.html\">ligar a notificao de mudana do SCM ao Hudson.<\/a>.","16","  Assim, antes de usar esta funcionalidade, pare e pergunte a si mesmo se isto  o que realmente voc quer."],"delete":["5","  Esta funcionalidade  para usar o Hudson no lugar do cron,","6","  e <b>no  ideal para projetos de software de construo contnua<\/b>.","8","  Quando as pessoas iniciam na integrao contnua, elas frequentemente so levadas","9","  a idia de construes agendadas regularmente como toda noite\/semanalmente e assim elas","10","  usam esta funcionalidade. Porm, o ponto principal da integrao contnua  iniciar","11","  uma construo to logo uma mudana seja feita, para fornecer um feedback rpido sober a mudana.","12","  Para fazer isto voc precisa","13","  <a href=\"https:\/\/hudson.dev.java.net\/build.html\">ligar a notificao de mudana do SCM ao Hudson.<\/a>.","16","  Assim, antes de usar esta funcionalidade, pare e pergunte a si mesmo se isto  o que realmente voc quer."]}],"war\/src\/main\/webapp\/help\/security\/legacy-auth-strategy_pt_BR.html":[{"add":["1","  Se comporta exatamente da mesma maneira que Hudson &lt;1.164. Se voc tem o papel \"admin\",","2","  voc ter controle total sobre o sistema, e caso contrrio (incluindo usurio annimos)","3","  voc apenas ter acesso de leitura."],"delete":["1","  Se comporta exatamente da mesma maneira que Hudson &lt;1.164. Se voc tem o papel \"admin\",","2","  voc ter controle total sobre o sistema, e caso contrrio (incluindo usurio annimos)","3","  voc apenas ter acesso de leitura."]}],"war\/src\/main\/webapp\/help\/shell\/shellexe_fr.html":[{"add":["1","  En gnral, ce champ peut rester vide pour laisser Hudson","3","  Nanmoins, si votre binaire <tt>sh<\/tt> (Windows) ou <tt>\/bin\/sh<\/tt> est plac hors de votre","4","  <tt>PATH<\/tt>, spcifiez le chemin absolu vers l'excutable sh."],"delete":["1","  En gnral, ce champ peut rester vide pour laisser Hudson","3","  Nanmoins, si votre binaire <tt>sh<\/tt> (Windows) ou <tt>\/bin\/sh<\/tt> est plac hors de votre","4","  <tt>PATH<\/tt>, spcifiez le chemin absolu vers l'excutable sh."]}],"war\/src\/main\/webapp\/help\/project-config\/fingerprint_pt_BR.html":[{"add":["2","  de onde\/quando estes arquivos so produzidos e usados. Quando voc tiver projetos","3","  inter-dependntes no Hudson, isto permite que voc rapidamente encontre respostas para questes como:","7","      Eu tenho um <tt>foo.jar<\/tt> no meu HD mas qual o nmero da construo de FOO que gerou ele?","14","        Qual construo de <tt>foo.jar<\/tt>  usada na construo de BAR nmero 51?","17","        Qual construo de BAR contm minha correo de bug para o <tt>foo.jar<\/tt> de nmero 32?","23","  Para usar esta caracterstica, todos os projetos envolvidos (no apenas o projeto","24","  no qual um arquivo  produzido, mas tambm os projetos nos quais o arquivo","25","   usado) necessitam usar isto e gravar os fingerprints.","28","  Veja <a href=\"https:\/\/hudson.dev.java.net\/fingerprint.html\">esta documentao<\/a>"],"delete":["2","  de onde\/quando estes arquivos so produzidos e usados. Quando voc tiver projetos","3","  inter-dependntes no Hudson, isto permite que voc rapidamente encontre respostas para questes como:","7","      Eu tenho um <tt>foo.jar<\/tt> no meu HD mas qual o nmero da construo de FOO que gerou ele?","14","        Qual construo de <tt>foo.jar<\/tt>  usada na construo de BAR nmero 51?","17","        Qual construo de BAR contm minha correo de bug para o <tt>foo.jar<\/tt> de nmero 32?","23","  Para usar esta caracterstica, todos os projetos envolvidos (no apenas o projeto","24","  no qual um arquivo  produzido, mas tambm os projetos nos quais o arquivo","25","   usado) necessitam usar isto e gravar os fingerprints.","28","  Veja <a href=\"https:\/\/hudson.dev.java.net\/fingerprint.html\">esta documentao<\/a>"]}],"war\/src\/main\/webapp\/help\/triggers\/SCMTrigger\/concurrency_pt_BR.html":[{"add":["1","  Se voc usa a votao de SCM para disparar uma nova construo para um grande nmero de projetos,","2","  voc pode querer limitar o nmero de atividades de votao concorrentes para evitar","6","  Informando um nmero positivo indica o limite superior do nmero de votaes concorrentes.","7","  Deixar o campo vazio o tornar ilimitado."],"delete":["1","  Se voc usa a votao de SCM para disparar uma nova construo para um grande nmero de projetos,","2","  voc pode querer limitar o nmero de atividades de votao concorrentes para evitar","6","  Informando um nmero positivo indica o limite superior do nmero de votaes concorrentes.","7","  Deixar o campo vazio o tornar ilimitado."]}],"war\/src\/main\/webapp\/help\/system-config\/systemMessage_fr.html":[{"add":["1","  Ce message sera affich sur la <a href=\".\">page principale<\/a>.","2","  Utile pour afficher des informations relatives  tout le systme  l'ensemble des"],"delete":["1","  Ce message sera affich sur la <a href=\".\">page principale<\/a>.","2","  Utile pour afficher des informations relatives  tout le systme  l'ensemble des"]}],"war\/src\/main\/webapp\/help\/project-config\/mailer_pt_BR.html":[{"add":["1","  Se configurado, o Hudson enviar um e-mail para os destinatrios especificados","5","    <li>Toda construo que falha dispara um novo e-mail.","6","    <li>Uma construo feita com sucesso aps uma construo falha (ou instvel) dipara um novo e-mail,","8","    <li>Uma construo instvel aps uma construo bem sucedida dispara um novo e-mail,","9","        indicando que h uma regresso.","10","    <li>A menos que configurado, toda construo instvel dipara um novo e-mail,","11","        indicando que a regresso ainda est l.","14","  Par projetos preguiosos (lazy) onde construes instvei so a norma, Marque \"No enviar e-mail para toda construo instvel\"."],"delete":["1","  Se configurado, o Hudson enviar um e-mail para os destinatrios especificados","5","    <li>Toda construo que falha dispara um novo e-mail.","6","    <li>Uma construo feita com sucesso aps uma construo falha (ou instvel) dipara um novo e-mail,","8","    <li>Uma construo instvel aps uma construo bem sucedida dispara um novo e-mail,","9","        indicando que h uma regresso.","10","    <li>A menos que configurado, toda construo instvel dipara um novo e-mail,","11","        indicando que a regresso ainda est l.","14","  Par projetos preguiosos (lazy) onde construes instvei so a norma, Marque \"No enviar e-mail para toda construo instvel\"."]}],"war\/src\/main\/webapp\/help\/project-config\/ant_pt_BR.html":[{"add":["1","  Para projetos que usam Ant como sistema de construo. Isto faz o Hudson ","2","  invocar o Ant com os alvos e opes informadas. Qualquer cdigo de sada ","3","  diferente de zero faz com que o Hudson marque a construo como falha.","6","  variveis de ambiente<\/a> que podem ser usadas de dentro do script de construo."],"delete":["1","  Para projetos que usam Ant como sistema de construo. Isto faz o Hudson ","2","  invocar o Ant com os alvos e opes informadas. Qualquer cdigo de sada ","3","  diferente de zero faz com que o Hudson marque a construo como falha.","6","  variveis de ambiente<\/a> que podem ser usadas de dentro do script de construo."]}],"war\/src\/main\/webapp\/help\/security\/private-realm_pt_BR.html":[{"add":["1","  Usa <a href=\"people\">a prpria lista de usurios do Hudson<\/a> para fazer a autenticao,","2","  ao invs de delegar isto para um sistema externo.","3","  Isto  indicado para uma configurao simples onde voc no tem uma base","4","  de usurio em lugar algum."],"delete":["1","  Usa <a href=\"people\">a prpria lista de usurios do Hudson<\/a> para fazer a autenticao,","2","  ao invs de delegar isto para um sistema externo.","3","  Isto  indicado para uma configurao simples onde voc no tem uma base","4","  de usurio em lugar algum."]}],"war\/src\/main\/webapp\/help\/system-config\/quietPeriod_pt_BR.html":[{"add":["2","  Quando atribudo >0, uma nova construo agendada aguarda por esta quantidade de segundos","3","  antes de realmente inicar a construo. Isto  til para juntar mltiplos e-mails de notificao","4","  de mudana no CVS em um nico e-mail."],"delete":["2","  Quando atribudo >0, uma nova construo agendada aguarda por esta quantidade de segundos","3","  antes de realmente inicar a construo. Isto  til para juntar mltiplos e-mails de notificao","4","  de mudana no CVS em um nico e-mail."]}],"war\/src\/main\/webapp\/help\/security\/full-control-once-logged-in_pt_BR.html":[{"add":["1","  Neste modo, todo usurio logado obtm o controle total do Hudson. O nico usurio","2","  que no ter controle total  o usurio annimo, que apenas consegue acesso a leitura.","5","  Este modo  til para forcar usurios a logar antes de fazer alguma ao, assim","6","  voc pode manter registro de quem fez o qu. Esta configurao tambm pode ser usada","7","  numa instalao pblica do Hudson, onde voc apenas permite usurios confiveis a ter conta de usurio. "],"delete":["1","  Neste modo, todo usurio logado obtm o controle total do Hudson. O nico usurio","2","  que no ter controle total  o usurio annimo, que apenas consegue acesso a leitura.","5","  Este modo  til para forcar usurios a logar antes de fazer alguma ao, assim","6","  voc pode manter registro de quem fez o qu. Esta configurao tambm pode ser usada","7","  numa instalao pblica do Hudson, onde voc apenas permite usurios confiveis a ter conta de usurio. "]}],"war\/src\/main\/webapp\/help\/update-center\/proxy-port_fr.html":[{"add":["1","  Ce champ est le numro de port du proxy HTTP, utilis avec le nom du serveur."],"delete":["1","  Ce champ est le numro de port du proxy HTTP, utilis avec le nom du serveur."]}],"war\/src\/main\/webapp\/help\/user\/fullName_pt_BR.html":[{"add":["1","  Especifique seu nome em um formato mais amigvel, tal que as pessoas possam","2","  ver seu verdadeiro nome ao invs de seu ID. Por exemplo, \"Joo da Silva\"","3","   geralmente mais fcil para as pessoas entenderem do que \"js513\"."],"delete":["1","  Especifique seu nome em um formato mais amigvel, tal que as pessoas possam","2","  ver seu verdadeiro nome ao invs de seu ID. Por exemplo, \"Joo da Silva\"","3","   geralmente mais fcil para as pessoas entenderem do que \"js513\"."]}],"war\/src\/main\/webapp\/help\/project-config\/javadoc-keep-all_fr.html":[{"add":["1","    Si vous cochez cette option, Hudson conservera les javadocs de chaque build pass avec succs.","6","    Si vous laissez cette option dcoche, Hudson ne conservera que les derniers javadocs.","7","    Les anciens javadocs seront donc remplacs  chaque nouveau build qui passe avec succs."],"delete":["1","    Si vous cochez cette option, Hudson conservera les javadocs de chaque build pass avec succs.","6","    Si vous laissez cette option dcoche, Hudson ne conservera que les derniers javadocs.","7","    Les anciens javadocs seront donc remplacs  chaque nouveau build qui passe avec succs."]}],"war\/src\/main\/webapp\/help\/view-config\/description_pt_BR.html":[{"add":["1","  Esta mensagem ser mostrada na <a href=\".\">pgina de visualizao<\/a>.","2","  til para descrever sobre o que  esta visualizao, ou lig-la a recursos relevantes.","3","  Pode conter marcaes HTML."],"delete":["1","  Esta mensagem ser mostrada na <a href=\".\">pgina de visualizao<\/a>.","2","  til para descrever sobre o que  esta visualizao, ou lig-la a recursos relevantes.","3","  Pode conter marcaes HTML."]}],"war\/src\/main\/webapp\/help\/shell\/shellexe_pt_BR.html":[{"add":["1","  Normalmente voc deveria apenas deixar este campo vazio e deixar que o Hudson escolha o sh correto.","2","  Se seu binrio <tt>sh<\/tt> (Windows) ou <tt>\/bin\/sh<\/tt> est fora de seu <tt>PATH<\/tt>, entretanto, especifique o caminho","3","  absoluto para o executvel sh."],"delete":["1","  Normalmente voc deveria apenas deixar este campo vazio e deixar que o Hudson escolha o sh correto.","2","  Se seu binrio <tt>sh<\/tt> (Windows) ou <tt>\/bin\/sh<\/tt> est fora de seu <tt>PATH<\/tt>, entretanto, especifique o caminho","3","  absoluto para o executvel sh."]}],"war\/src\/main\/webapp\/help\/ant\/ant-targets_pt_BR.html":[{"add":["1","  Especifique a lista dos alvos Ant a serem invocados, ou deixe em branco para invocar o alvo padro do Ant","2","  especificado no script de construo. Adicionalmente, voc tambm pode usar este campo para especificar outras opes do Ant. "],"delete":["1","  Especifique a lista dos alvos Ant a serem invocados, ou deixe em branco para invocar o alvo padro do Ant","2","  especificado no script de construo. Adicionalmente, voc tambm pode usar este campo para especificar outras opes do Ant. "]}],"war\/src\/main\/webapp\/help\/ant\/ant-buildfile_pt_BR.html":[{"add":["1","  Se sua construo necessita de um <a href=\"http:\/\/ant.apache.org\/manual\/running.html#options\">-buildfile<\/a> customizado,","2","  especifique-o aqui.  Por padro o Ant usar o <code>build.xml<\/code> no diretrio raz, ","3","  esta opo pode ser usada para usar arquivos de construo com um nome diferente o em um subdiretrio."],"delete":["1","  Se sua construo necessita de um <a href=\"http:\/\/ant.apache.org\/manual\/running.html#options\">-buildfile<\/a> customizado,","2","  especifique-o aqui.  Por padro o Ant usar o <code>build.xml<\/code> no diretrio raz, ","3","  esta opo pode ser usada para usar arquivos de construo com um nome diferente o em um subdiretrio."]}],"war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/manual-list_fr.html":[{"add":["1","    Indiquez ici manuellement la liste des jobs. De multiples noms peuvent tre","2","    spars par une virgule, par exemple \"<tt>foo, bar<\/tt>\"."],"delete":["1","    Indiquez ici manuellement la liste des jobs. De multiples noms peuvent tre","2","    spars par une virgule, par exemple \"<tt>foo, bar<\/tt>\"."]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/slave-agent-port_pt_BR.html":[{"add":["1","  O Hudson usa uma porta TCP para se comunicar com os agentes slave lanados via JNLP.","2","  Normalmente esta porta  escolhida aleatriamente para evitar colises, mas isto","3","  tornaria difcil fazer a segurana do sistema. Se voc no estiver usado slaves JNLP,","4","   recomendado desabilitar esta porta TCP. Alternativamente, voc pode especificar","5","  um nmero de porta especfico tal que voc possa configurar seu firewall corretamente."],"delete":["1","  O Hudson usa uma porta TCP para se comunicar com os agentes slave lanados via JNLP.","2","  Normalmente esta porta  escolhida aleatriamente para evitar colises, mas isto","3","  tornaria difcil fazer a segurana do sistema. Se voc no estiver usado slaves JNLP,","4","   recomendado desabilitar esta porta TCP. Alternativamente, voc pode especificar","5","  um nmero de porta especfico tal que voc possa configurar seu firewall corretamente."]}],"war\/src\/main\/webapp\/help\/security\/ldap\/managerDN_pt_BR.html":[{"add":["1","  Se seu servidor LDAP no suportar <a href=\"http:\/\/www.google.com\/?q=LDAP+anonymous+bind\">binding annimo<\/a>","2","  (Em outras palavras, se seu servidor LDAP no permite uma consulta sem autenticao),","3","  ento o Hudson teria que primeiro se autenticar no servidor LDAP,","8","  embora a sequncia exata dos valores dependem da configurao do servidor LDAP.","9","  Pode ser qualquer DN vlido desde que o LDAP permita que este usurio consulte os dados.","12","  Esta configurao tambm  til quando voc estiver conectando ao Active Directory","13","  de uma mquina Unix, j o AD no permite binding annimo por padro. Mas","14","  se voc no pode resolver isto, voc tambm pode mudar as configuraes do AD para","15","  permitir binding annimo. Veja <a href=\"http:\/\/www.novell.com\/coolsolutions\/appnote\/15120.html\">este documento<\/a> para saber como."],"delete":["1","  Se seu servidor LDAP no suportar <a href=\"http:\/\/www.google.com\/?q=LDAP+anonymous+bind\">binding annimo<\/a>","2","  (Em outras palavras, se seu servidor LDAP no permite uma consulta sem autenticao),","3","  ento o Hudson teria que primeiro se autenticar no servidor LDAP,","8","  embora a sequncia exata dos valores dependem da configurao do servidor LDAP.","9","  Pode ser qualquer DN vlido desde que o LDAP permita que este usurio consulte os dados.","12","  Esta configurao tambm  til quando voc estiver conectando ao Active Directory","13","  de uma mquina Unix, j o AD no permite binding annimo por padro. Mas","14","  se voc no pode resolver isto, voc tambm pode mudar as configuraes do AD para","15","  permitir binding annimo. Veja <a href=\"http:\/\/www.novell.com\/coolsolutions\/appnote\/15120.html\">este documento<\/a> para saber como."]}],"war\/src\/main\/webapp\/help\/tasks\/aggregate-test\/auto-aggregate_fr.html":[{"add":["1","    Quand cette case est coche, Hudson aggrge simplement les tests des","3","    pas  les lister individuellement et garder cette liste  jour quand vous","4","    ajoutez ou supprimez des jobs. Gnralement, cela suffit, du moment que vos","5","    jobs de test sont configurs comme des jobs en aval du job de build principal.","8","    Si par extraordinaire l'aggrgation automatique ne marche pas, vous pouvez","9","    toujours spficier manuellement une liste de jobs  aggrger."],"delete":["1","    Quand cette case est coche, Hudson aggrge simplement les tests des","3","    pas  les lister individuellement et garder cette liste  jour quand vous","4","    ajoutez ou supprimez des jobs. Gnralement, cela suffit, du moment que vos","5","    jobs de test sont configurs comme des jobs en aval du job de build principal.","8","    Si par extraordinaire l'aggrgation automatique ne marche pas, vous pouvez","9","    toujours spficier manuellement une liste de jobs  aggrger."]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/jnlpSecurity_tr.html":[{"add":["17","            Bu modda, Hudson hem bilgisayar g&#246;r&#252;nt&#252;s&#252;nde, hem de yan paneldeki Yap&#305;land&#305;rma al&#305;&#351;t&#305;r&#305;c&#305; Stat&#252;s&#252; k&#305;sm&#305;nda"],"delete":["17","            Bu modda, Hudson hem bilgisayar g&#246;r&#252;nt&#252;s&#252;nde, hem de yan paneldeki Yap&#305;land&#305;rma al&#305;&#351;t&#305;r&#305;c&#305; Stat&#252;s&#252; k&#305;sm&#305;nda"]}],"war\/src\/main\/webapp\/help\/tasks\/junit\/report_pt_BR.html":[{"add":["1","  O Hudson entende o formato XML de relatrio de teste do JUnit (que tambm  usado pelo TestNG).","2","  Quando esta opo  configurada, o Hudson pode fornecer informaes teis sobre os resultados dos testes,","3","  tal como tendncias de resultado de teste histrico, uma interface web para visualizar  relatrios de teste, rastreamento de falhas,","7","  Usar esta caracterstica, primeiro configure sua construo para executar os testes, ento","9","  <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">na sintaxe do glbulo do Ant <\/a>,","10","  tal como <tt>**\/build\/test-reports\/*.xml<\/tt>. Tenha certeza de no incluir nenhum arquivo que","11","  no seja de relatrio neste padro.","14","  Um vez que exista algumas construes executando com resultados de teste, voc comear a ver"],"delete":["1","  O Hudson entende o formato XML de relatrio de teste do JUnit (que tambm  usado pelo TestNG).","2","  Quando esta opo  configurada, o Hudson pode fornecer informaes teis sobre os resultados dos testes,","3","  tal como tendncias de resultado de teste histrico, uma interface web para visualizar  relatrios de teste, rastreamento de falhas,","7","  Usar esta caracterstica, primeiro configure sua construo para executar os testes, ento","9","  <a href=\"http:\/\/ant.apache.org\/manual\/Types\/fileset.html\">na sintaxe do glbulo do Ant <\/a>,","10","  tal como <tt>**\/build\/test-reports\/*.xml<\/tt>. Tenha certeza de no incluir nenhum arquivo que","11","  no seja de relatrio neste padro.","14","  Um vez que exista algumas construes executando com resultados de teste, voc comear a ver"]}],"war\/src\/main\/webapp\/help\/ant\/ant-properties_pt_BR.html":[{"add":["1","  Propriedades necessrias para sua construo ant podem ser especificadas aqui (no formato do arquivo de propriedades padro):","2","  <pre># comentrio","6","  Estas propriedades so passadas para o Ant como <tt>\"-Dnome1=valor1 -Dnome2=valor2\"<\/tt>"],"delete":["1","  Propriedades necessrias para sua construo ant podem ser especificadas aqui (no formato do arquivo de propriedades padro):","2","  <pre># comentrio","6","  Estas propriedades so passadas para o Ant como <tt>\"-Dnome1=valor1 -Dnome2=valor2\"<\/tt>"]}],"war\/src\/main\/webapp\/help\/project-config\/poll-scm_pt_BR.html":[{"add":["1","  Configura o Hudson para consultar periodicamente mudanas no SCM.","4","  Note que isto vai ser uma operao custosa para o CVS, como toda consulta","6","  Considere configurar um disparador de construo peridico (\"Construir periodicamente\") para evitar esta sobrecarga, como descrito","7","  <a href=\"https:\/\/hudson.dev.java.net\/build.html\">nesta documentao<\/a>"],"delete":["1","  Configura o Hudson para consultar periodicamente mudanas no SCM.","4","  Note que isto vai ser uma operao custosa para o CVS, como toda consulta","6","  Considere configurar um disparador de construo peridico (\"Construir periodicamente\") para evitar esta sobrecarga, como descrito","7","  <a href=\"https:\/\/hudson.dev.java.net\/build.html\">nesta documentao<\/a>"]}],"war\/src\/main\/webapp\/help\/matrix\/jdk_pt_BR.html":[{"add":["1","  Especifica a(s) JDK(s) com as quais as construes so executadas. Se nenhuma for selecionada,","2","  a JDK padro  usada (sem <tt>JAVA_HOME<\/tt> explcito, e o comando <tt>java<\/tt>","3","   assumido que est no <tt>PATH<\/tt>.) Se mltiploas JDKs forem selecionadas,","4","  a matriz de configurao incluir todos as JDKs especificadas.","6","  Selecionar valores mltiplos  tipicamente til quando a tarefa for executar teste,","7","  e voc precisar executar testes em mltiplas verses diferentes de JDKs.","9","  Durante uma construo, o valor de JDK selecionado para a execuo est disponvel como o eixo \"jdK\".","10","  Veja a ajuda de \"eixos\" abaixo para mais informaes sobre como acessar o valor do eixo."],"delete":["1","  Especifica a(s) JDK(s) com as quais as construes so executadas. Se nenhuma for selecionada,","2","  a JDK padro  usada (sem <tt>JAVA_HOME<\/tt> explcito, e o comando <tt>java<\/tt>","3","   assumido que est no <tt>PATH<\/tt>.) Se mltiploas JDKs forem selecionadas,","4","  a matriz de configurao incluir todos as JDKs especificadas.","6","  Selecionar valores mltiplos  tipicamente til quando a tarefa for executar teste,","7","  e voc precisar executar testes em mltiplas verses diferentes de JDKs.","9","  Durante uma construo, o valor de JDK selecionado para a execuo est disponvel como o eixo \"jdK\".","10","  Veja a ajuda de \"eixos\" abaixo para mais informaes sobre como acessar o valor do eixo."]}],"war\/src\/main\/webapp\/help\/project-config\/disable_pt_BR.html":[{"add":["2","  Algumas vezes, voc pode querer parar temporriamente de construir um projeto. Por exemplo,","3","  talvez voc est no meio de uma grande migrao e voc sabe que as novas construes ","4","  vo falhar. Ou talvez um projeto  construdo de hora em hora mas voc sabe que o servidor","5","  de CVS ficar desligado pelas prximas 24 horas.","7","  Quando esta opo for informada, nenhuma nova construo  feita neste projeto. Isto","8","  permite que voc desabilite as novas construes sem mudar qualquer uma da cadeia","9","  de dependncia da construo ou mudar a configurao de notificao."],"delete":["2","  Algumas vezes, voc pode querer parar temporriamente de construir um projeto. Por exemplo,","3","  talvez voc est no meio de uma grande migrao e voc sabe que as novas construes ","4","  vo falhar. Ou talvez um projeto  construdo de hora em hora mas voc sabe que o servidor","5","  de CVS ficar desligado pelas prximas 24 horas.","7","  Quando esta opo for informada, nenhuma nova construo  feita neste projeto. Isto","8","  permite que voc desabilite as novas construes sem mudar qualquer uma da cadeia","9","  de dependncia da construo ou mudar a configurao de notificao."]}],"war\/src\/main\/webapp\/help\/security\/ldap\/userSearchFilter_pt_BR.html":[{"add":["1","    Uma das pesquisas que o Hudson faz no LDAP  localizar o registro do usurio passando o nome do usurio.","4","    Este determina o consulta a ser executada para identificar o registro do usurio. A consulta ","6","    assim na maioria dos casos voc deveria deixar este campo vazio.","9","    Se voc realmente especificar uma consulta diferente, especifique uma string de consulta LDAP como o marcador \"{0}\",","10","    que ser trocado pelas string do nome do usurio entrada pelo usurio."],"delete":["1","    Uma das pesquisas que o Hudson faz no LDAP  localizar o registro do usurio passando o nome do usurio.","4","    Este determina o consulta a ser executada para identificar o registro do usurio. A consulta ","6","    assim na maioria dos casos voc deveria deixar este campo vazio.","9","    Se voc realmente especificar uma consulta diferente, especifique uma string de consulta LDAP como o marcador \"{0}\",","10","    que ser trocado pelas string do nome do usurio entrada pelo usurio."]}],"war\/src\/main\/webapp\/help\/project-config\/quietPeriod_pt_BR.html":[{"add":["1","  Se informado, uma nova construo agendada aguarda estes quantos segundos informado ","2","  antes de ser realmente construda.","3","  Isto  til para:","6","      Juntar mltiplos e-mails de notificao de mudanas no CVS em um (alguns scripts","7","      de gerao de e-mail de mudana no log de CVS geram mltiplos e-mails","8","      em uma rpida sequncia quam uma submisso atravessa pelos diretrios).","11","      Se seu estilo de codificao  tal que voc submete uma mudana lgica em poucas","12","      operao de cvs\/svn, ento informar um longo perodo de silncio previniria o Hudson de","13","      constru-lo prematuramente e relatar uma falha.","16","      Suprimir construes. Se sua intalao do Hudson est muito ocupada com muitas construesi,","17","      informar um longo perodo de silncio pode reduzir o nmero de construes.","20","  Se no explcitamente informado no nvel de projeto, o valor padro do sistema todo  usado."],"delete":["1","  Se informado, uma nova construo agendada aguarda estes quantos segundos informado ","2","  antes de ser realmente construda.","3","  Isto  til para:","6","      Juntar mltiplos e-mails de notificao de mudanas no CVS em um (alguns scripts","7","      de gerao de e-mail de mudana no log de CVS geram mltiplos e-mails","8","      em uma rpida sequncia quam uma submisso atravessa pelos diretrios).","11","      Se seu estilo de codificao  tal que voc submete uma mudana lgica em poucas","12","      operao de cvs\/svn, ento informar um longo perodo de silncio previniria o Hudson de","13","      constru-lo prematuramente e relatar uma falha.","16","      Suprimir construes. Se sua intalao do Hudson est muito ocupada com muitas construesi,","17","      informar um longo perodo de silncio pode reduzir o nmero de construes.","20","  Se no explcitamente informado no nvel de projeto, o valor padro do sistema todo  usado."]}],"war\/src\/main\/webapp\/help\/project-config\/log-rotation_pt_BR.html":[{"add":["1","  Controla o consumo de disco do Hudson gerenciando quanto tempo voc gostaria de manter","2","  os registros das construes (tal como sada de console, artefatos de construo, e assim por diante.)","3","  Hudson oferece dois critrios:","7","      Dirigio a idade. Voc pode fazer o Hudson apagar um registro se ele atingir uma certa idade","10","      Dirigido a nmero. Voc pode fazer o Hudson assegurar que ele vai manter apenas at ","11","      N registros de construo. Se uma nova construo for iniciada, o registro mais velho","12","      ser simplesmente removido.","15","  Hudson tambm permite que voc marque uma construo individual como 'Manter este log para sempre', ","16","  para evitar que certas construes importantes seja descartadas automaticamente."],"delete":["1","  Controla o consumo de disco do Hudson gerenciando quanto tempo voc gostaria de manter","2","  os registros das construes (tal como sada de console, artefatos de construo, e assim por diante.)","3","  Hudson oferece dois critrios:","7","      Dirigio a idade. Voc pode fazer o Hudson apagar um registro se ele atingir uma certa idade","10","      Dirigido a nmero. Voc pode fazer o Hudson assegurar que ele vai manter apenas at ","11","      N registros de construo. Se uma nova construo for iniciada, o registro mais velho","12","      ser simplesmente removido.","15","  Hudson tambm permite que voc marque uma construo individual como 'Manter este log para sempre', ","16","  para evitar que certas construes importantes seja descartadas automaticamente."]}]}},"245ad0bdb17ebd33eca81c099e8a19a893c049e3":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["339","            if (p != null && p.getPreviousNotFailedBuild() != null) {"],"delete":["339","            if (p.getPreviousNotFailedBuild() != null) {"]}]}},"c797e28b7b2df90cec240c159200077880903271":{"changes":{"changelog.html":"MODIFY","pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class='major bug'>","58","    Fixed memory leak in the master\/slave communication.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10424\">issue 10424<\/a>)"],"delete":["57","  <li class=>"]}],"pom.xml":[{"add":["135","        <version>2.2<\/version>"],"delete":["135","        <version>2.1<\/version>"]}]}},"e382bbae1b0deefdce458eed72ce025eb91d1855":{"changes":{"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_fr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_sv_SE.properties":"ADD","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_zh_TW.properties":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_nl.properties":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_da.properties":"MODIFY","\/dev\/null":"DELETE","core\/src\/main\/java\/hudson\/node_monitors\/DiskSpaceMonitorDescriptor.java":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_cs.properties":"ADD","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_ja.properties":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_pt.properties":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages.properties":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/DiskSpaceMonitorDescriptor\/DiskSpace\/cause.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages_es.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_fr.properties":[{"add":["30","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=Espace disque insuffisant.  Seulement {0} GB restant sur {1}"],"delete":[]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_de.properties":[{"add":["31","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=Zu wenig Festplattenplatz: Nur noch {0}GB frei."],"delete":["31"," ","32"," ","33"," ","34"," "]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_sv_SE.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_zh_TW.properties":[{"add":["32","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=\\u78c1\\u789f\\u7a7a\\u9593\\u592a\\u5c11\\u3002{1} \\u4e0a\\u53ea\\u5269 {0}GB\\u3002"],"delete":[]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_nl.properties":[{"add":["24","DiskSpaceMonitor.DisplayName=Beschikbare schijfruimte","25","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=Er is te weinig vrije schijfruimte, nog maar {0} GB over."],"delete":["24","DiskSpaceMonitor.DisplayName=Beschikbare schijfruimte"]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_da.properties":[{"add":["31","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=Disk plads for lav. Kun {0}GB tilbage."],"delete":[]}],"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/node_monitors\/DiskSpaceMonitorDescriptor.java":[{"add":["72","            return Messages.DiskSpaceMonitorDescriptor_DiskSpace_FreeSpaceTooLow(getGbLeft(), path);"],"delete":["72","            return String.valueOf(size);"]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_cs.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_ja.properties":[{"add":["32","AbstractNodeMonitorDescriptor.NoDataYet=\\u30c7\\u30fc\\u30bf\\u672a\\u53d6\\u5f97","33","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=\\u30C7\\u30A3\\u30B9\\u30AF\\u5BB9\\u91CF\\u304C\\u5C11\\u306A\\u3059\\u304E\\u307E\\u3059\\u3002\\u6B8B\\u308A{0}GB\\u3067\\u3059\\u3002"],"delete":["32","AbstractNodeMonitorDescriptor.NoDataYet=\\u30c7\\u30fc\\u30bf\\u672a\\u53d6\\u5f97"]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_pt.properties":[{"add":["33","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=Espa\\u00e7o em disco est\\u00e1 acabando, apenas {0}Gb livre em {1}."],"delete":[]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages.properties":[{"add":["33","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=Disk space is too low. Only {0}GB left on {1}."],"delete":[]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_pt_BR.properties":[{"add":["41","# Disk space is too low. Only {0}GB left.","42","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=Pouco espa\\u00e7o em disco. Somente {0}GB restante."],"delete":[]}],"core\/src\/main\/resources\/hudson\/node_monitors\/DiskSpaceMonitorDescriptor\/DiskSpace\/cause.jelly":[{"add":["26","  <p class=\"error\">${it}<\/p>"],"delete":["26","  <p class=\"error\">${%blurb(it.gbLeft, it.path)}<\/p>"]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages_es.properties":[{"add":["31","DiskSpaceMonitorDescriptor.DiskSpace.FreeSpaceTooLow=El espacio en disco es muy bajo, slo quedan {0}GB."],"delete":[]}]}},"d051dc307ceec7e963960ca46d79804cb62f964d":{"changes":{"core\/src\/main\/java\/jenkins\/util\/io\/CompositeIOException.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/LogRotator.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/util\/io\/CompositeIOException.java":[{"add":["42","        exceptions.forEach(this::addSuppressed);"],"delete":["31","import java.io.PrintStream;","32","import java.io.PrintWriter;","54","    @Override","55","    public void printStackTrace(PrintStream s) {","56","        super.printStackTrace(s);","57","        for (IOException exception : exceptions) {","58","            exception.printStackTrace(s);","59","        }","60","    }","61","","62","    @Override","63","    public void printStackTrace(PrintWriter s) {","64","        super.printStackTrace(s);","65","        for (IOException exception : exceptions) {","66","            exception.printStackTrace(s);","67","        }","68","    }","69",""]}],"core\/src\/main\/java\/hudson\/tasks\/LogRotator.java":[{"add":["30","import java.util.ArrayList;","51","import jenkins.util.io.CompositeIOException;","64","    \/** @deprecated Replaced by more generic {@link CompositeIOException}. *\/","65","    @Deprecated","145","        HashMultimap<Run<?,?>, IOException> exceptionMap = HashMultimap.create();","222","            throw new CompositeIOException(msg, new ArrayList<>(exceptionMap.values()));"],"delete":["141","        HashMultimap<Run<?,?>, Exception> exceptionMap = HashMultimap.create();","218","            LOGGER.severe(msg);","219","            throw new CollatedLogRotatorException(msg, exceptionMap.values());"]}]}},"0c46701287ebfa1719c66dcdbcbba57f36c2ac59":{"changes":{"core\/src\/main\/java\/hudson\/scm\/ChangeLogSet.java":"MODIFY","test\/src\/test\/java\/hudson\/scm\/ChangeLogSetTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/scm\/ChangeLogSet.java":[{"add":["213","                    LOGGER.info(\"ChangeLogAnnotator \" + a.toString() + \" failed to annotate message '\" + getMsg() + \"'; \" + e.getMessage());","214","                } catch(Error e) {","215","                    LOGGER.severe(\"ChangeLogAnnotator \" + a.toString() + \" failed to annotate message '\" + getMsg() + \"'; \" + e.getMessage());"],"delete":["213","                    LOGGER.fine(\"ChangeLogAnnotator \" + a.toString() + \" failed to annotate message '\" + getMsg() + \"'; \" + e.getMessage());"]}],"test\/src\/test\/java\/hudson\/scm\/ChangeLogSetTest.java":[{"add":[],"delete":[]}]}},"1ef9cae2dea05eb358c3abab59ac4fa60f5fd257":{"changes":{"core\/src\/test\/java\/hudson\/cli\/ListJobsCommandTest.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/ListJobsCommand.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/cli\/ListJobsCommandTest.java":[{"add":["60","        assertThat(runWith(\"NoSuchViewOrItemGroup\"), equalTo(-1));"],"delete":["60","        \/\/ TODO: One would expect -1 here","61","        assertThat(runWith(\"NoSuchViewOrItemGroup\"), equalTo(0));"]}],"core\/src\/main\/java\/hudson\/cli\/ListJobsCommand.java":[{"add":["77","                    return -1;"],"delete":["77","                    jobs = Collections.emptyList();"]}]}},"89a0050ceaf2a50517056582d1c188052f994fd7":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/test\/java\/hudson\/util\/IsOverriddenTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["28","","36","","44","","50","","54","import java.lang.reflect.Method;","55","import java.lang.reflect.Modifier;","79","","81","","85","","1425","     * Checks if the method defined on the base type with the given arguments","1426","     * is overridden in the given derived type.","1429","        return !getMethod(base, methodName, types).equals(getMethod(derived, methodName, types));","1430","    }","1431","","1432","    private static Method getMethod(@Nonnull Class clazz, @Nonnull String methodName, @Nonnull Class... types) {","1433","        Method res = null;","1435","            res = clazz.getDeclaredMethod(methodName, types);","1436","            \/\/ private, static or final methods can not be overridden","1437","            if (res != null && (Modifier.isPrivate(res.getModifiers()) || Modifier.isFinal(res.getModifiers()) ","1438","                    || Modifier.isStatic(res.getModifiers()))) {","1439","                res = null;","1440","            }","1442","            \/\/ Method not found in clazz, let's search in superclasses","1443","            Class superclass = clazz.getSuperclass();","1444","            if (superclass != null) {","1445","                res = getMethod(superclass, methodName, types);","1446","            }","1447","        } catch (SecurityException e) {","1450","        if (res == null) {","1451","            throw new IllegalArgumentException(","1452","                    String.format(\"Method %s not found in %s (or it is private, final or static)\", methodName, clazz.getName()));","1453","        }","1454","        return res;"],"delete":["72","","1417","     * Checks if the public method defined on the base type with the given arguments","1418","     * are overridden in the given derived type.","1422","            return !base.getMethod(methodName, types).equals(","1423","                    derived.getMethod(methodName,types));"]}],"core\/src\/test\/java\/hudson\/util\/IsOverriddenTest.java":[{"add":[],"delete":[]}]}},"b6ea6c8afc6335d396c7d34038f57f5eefdb8c4a":{"changes":{"core\/src\/main\/java\/hudson\/cli\/ClientAuthenticationCache.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/ClientAuthenticationCache.java":[{"add":[],"delete":["116","        LOGGER.log(Level.WARNING, \"The instance is not configured using a rootUrl, the key that represents your instance will not be stable\");"]}]}},"76067e0af93d3681756bf290aeb1f3a1e88b1d39":{"changes":{"core\/src\/main\/resources\/lib\/layout\/layout.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/layout\/layout.jelly":[{"add":["256","            <j:if test=\"${!empty(it.api)}\">","257","               <span class=\"rest_api\"><a href=\"api\/\">REST API<\/a><\/span>","258","            <\/j:if>"],"delete":["256","            <span class=\"rest_api\"><a href=\"api\/\">REST API<\/a><\/span>"]}]}},"1ae154b16750d82c5269bece2b07d9a3bd8ef72e":{"changes":{"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["3","import java.util.Iterator;","5","import java.util.Map;","23","import hudson.model.Descriptor;","26","import hudson.model.UserPropertyDescriptor;","117","        User u = j.getUser(\"admin\");","118","        \/\/ JENKINS-33572 - without creating a new 'admin' user, auth key erroneously remained","119","        if(u != null && u.getProperty(AuthenticationKey.class) != null) {","120","            \/\/ There must be a better way of removing things...","121","            Iterator<Map.Entry<Descriptor<UserProperty>,UserProperty>> entries = u.getProperties().entrySet().iterator();","122","            while(entries.hasNext()) {","123","                Map.Entry<?, ?> entry = entries.next();","124","                if(entry.getValue() instanceof AuthenticationKey) {","125","                    entries.remove();","126","                }","127","            }","128","        }","155","        ","156","        @Override","157","        public UserPropertyDescriptor getDescriptor() {","158","            return null;","159","        }"],"delete":["21","import hudson.ExtensionList;","26","import hudson.security.PermissionAdder;"]}]}},"668ea9edd01e5bddecfc36af6248567b4d42ee5e":{"changes":{"core\/src\/main\/java\/hudson\/node_monitors\/AbstractDiskSpaceMonitor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/node_monitors\/AbstractDiskSpaceMonitor.java":[{"add":["49","                    LOGGER.info(Messages.DiskSpaceMonitor_MarkedOnline(c.getDisplayName()));","66","        \t\tLOGGER.warning(Messages.DiskSpaceMonitor_MarkedOffline(c.getDisplayName()));"],"delete":["49","                    LOGGER.info(Messages.DiskSpaceMonitor_MarkedOnline(c.getName()));","66","        \t\tLOGGER.warning(Messages.DiskSpaceMonitor_MarkedOffline(c.getName()));"]}]}},"68db55528a560b816fbd58689b75d07210592b03":{"changes":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":"MODIFY"},"diff":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/HudsonTestCase.java":[{"add":[],"delete":["509","        if(Functions.isWindows()) {","510","            \/\/ this is only needed on Windows because of the file","511","            \/\/ locking issue as described in JENKINS-12647","512","            context.setCopyWebDir(true);","513","        }"]}]}},"250ce5b22a43523a13957b3adf26bbfee23e6cce":{"changes":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","test\/src\/test\/java\/hudson\/search\/SearchTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["2243","        SearchIndexBuilder builder = super.makeSearchIndex();","2244","        if (hasPermission(ADMINISTER)) {","2245","                builder.add(\"configure\", \"config\", \"configure\")","2246","                    .add(\"manage\")","2247","                    .add(\"log\");","2248","        }","2249","        builder.add(new CollectionSearchIndex<TopLevelItem>() {","2250","                    protected SearchItem get(String key) { return getItemByFullName(key, TopLevelItem.class); }","2251","                    protected Collection<TopLevelItem> all() { return getAllItems(TopLevelItem.class); }","2252","                    @Nonnull","2253","                    @Override","2254","                    protected Iterable<TopLevelItem> allAsIterable() {","2255","                        return allItems(TopLevelItem.class);","2256","                    }","2257","                })","2258","                .add(getPrimaryView().makeSearchIndex())","2259","                .add(new CollectionSearchIndex() {\/\/ for computers","2260","                    protected Computer get(String key) { return getComputer(key); }","2261","                    protected Collection<Computer> all() { return computers.values(); }","2262","                })","2263","                .add(new CollectionSearchIndex() {\/\/ for users","2264","                    protected User get(String key) { return User.get(key,false); }","2265","                    protected Collection<User> all() { return User.getAll(); }","2266","                })","2267","                .add(new CollectionSearchIndex() {\/\/ for views","2268","                    protected View get(String key) { return getView(key); }","2269","                    protected Collection<View> all() { return views; }","2270","                });","2271","        return builder;"],"delete":["2243","        return super.makeSearchIndex()","2244","            .add(\"configure\", \"config\",\"configure\")","2245","            .add(\"manage\")","2246","            .add(\"log\")","2247","            .add(new CollectionSearchIndex<TopLevelItem>() {","2248","                protected SearchItem get(String key) { return getItemByFullName(key, TopLevelItem.class); }","2249","                protected Collection<TopLevelItem> all() { return getAllItems(TopLevelItem.class); }","2250","                @Nonnull","2251","                @Override","2252","                protected Iterable<TopLevelItem> allAsIterable() {","2253","                    return allItems(TopLevelItem.class);","2254","                }","2255","            })","2256","            .add(getPrimaryView().makeSearchIndex())","2257","            .add(new CollectionSearchIndex() {\/\/ for computers","2258","                protected Computer get(String key) { return getComputer(key); }","2259","                protected Collection<Computer> all() { return computers.values(); }","2260","            })","2261","            .add(new CollectionSearchIndex() {\/\/ for users","2262","                protected User get(String key) { return User.get(key,false); }","2263","                protected Collection<User> all() { return User.getAll(); }","2264","            })","2265","            .add(new CollectionSearchIndex() {\/\/ for views","2266","                protected View get(String key) { return getView(key); }","2267","                protected Collection<View> all() { return views; }","2268","            });"]}],"test\/src\/test\/java\/hudson\/search\/SearchTest.java":[{"add":["39","import hudson.model.User;","40","import hudson.security.ACL;","41","import hudson.security.ACLContext;","42","import jenkins.model.Jenkins;","52","import org.jvnet.hudson.test.MockAuthorizationStrategy;","397","","398","    @Test","399","    @Issue(\"JENKINS-7874\")","400","    public void adminOnlyLinksNotShownToRegularUser() {","401","        j.jenkins.setSecurityRealm(j.createDummySecurityRealm());","402","        MockAuthorizationStrategy mas = new MockAuthorizationStrategy();","403","        mas.grant(Jenkins.READ).onRoot().toEveryone();","404","        j.jenkins.setAuthorizationStrategy(mas);","405","","406","        try(ACLContext _ = ACL.as(User.get(\"alice\"))) {","407","            List<SearchItem> results = new ArrayList<>();","408","            j.jenkins.getSearchIndex().find(\"config\", results);","409","            j.jenkins.getSearchIndex().find(\"manage\", results);","410","            j.jenkins.getSearchIndex().find(\"log\", results);","411","            assertEquals(\"empty results list\", 0, results.size());","412","        }","413","    }","414",""],"delete":[]}]}},"7bba3abcf9456e5a933e2207c4d87bc58a9f2fc0":{"changes":{"maven-plugin\/pom.xml":"MODIFY"},"diff":{"maven-plugin\/pom.xml":[{"add":["48","    <wagonVersion>2.2<\/wagonVersion>"],"delete":["48","    <wagonVersion>2.1<\/wagonVersion>"]}]}},"7ca4dc47ecff4c3eb3b8041e521fc076efc42767":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":"MODIFY","test\/src\/test\/groovy\/hudson\/model\/AbstractBuildTest.groovy":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":[{"add":["725","        int n = getNumberOf(run);","726","        copy.byNumber.remove(n);","727","        SortedIntList a = new SortedIntList(numberOnDisk);","728","        a.removeValue(n);","729","        numberOnDisk = a;"],"delete":["725","        copy.byNumber.remove(getNumberOf(run));"]}],"test\/src\/test\/groovy\/hudson\/model\/AbstractBuildTest.groovy":[{"add":["40","import org.jvnet.hudson.test.Bug","124","","125","    @Bug(19920)","126","    @Test void lastBuildNextBuild() {","127","        FreeStyleProject p = j.createFreeStyleProject();","128","        AbstractBuild b1 = j.assertBuildStatusSuccess(p.scheduleBuild2(0));","129","        AbstractBuild b2 = j.assertBuildStatusSuccess(p.scheduleBuild2(0));","130","        assertEquals(b2, p.getLastBuild());","131","        b2.getNextBuild(); \/\/ force this to be initialized","132","        b2.delete();","133","        assertEquals(b1, p.getLastBuild());","134","        b1 = p.getLastBuild();","135","        assertEquals(null, b1.getNextBuild());","136","    }","137",""],"delete":[]}],"changelog.html":[{"add":["63","  <li class='major bug'>","64","    After deleting last build, next build of last build is zombie.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19920\">issue 19920<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["164","     * fields and point to {@link #selfReference} (or {@link #none}) of adjacent builds.","168","    @SuppressWarnings({\"unchecked\", \"rawtypes\"}) private static final BuildReference NONE = new BuildReference(\"NONE\", null);","169","    @SuppressWarnings(\"unchecked\") private BuildReference<R> none() {return NONE;}","170","","198","                nb.previousBuild = previousBuild;","224","                    this.previousBuild = none();","228","            if (r==none())","252","                    this.nextBuild = none();","256","            if (r==none())"],"delete":["164","     * fields and point to {@link #selfReference} of adjacent builds.","195","                \/\/ remove the oldest build","196","                if (previousBuild == selfReference) ","197","                    nb.previousBuild = nextBuild;","198","                else ","199","                    nb.previousBuild = previousBuild;","225","                    \/\/ this indicates that we know there's no previous build","226","                    \/\/ (as opposed to we don't know if\/what our previous build is.","227","                    this.previousBuild = selfReference;","231","            if (r==selfReference)","255","                    \/\/ this indicates that we know there's no next build","256","                    \/\/ (as opposed to we don't know if\/what our next build is.","257","                    this.nextBuild = selfReference;","261","            if (r==selfReference)"]}]}},"7870d1987dceeab111f7a03455035d251724d02a":{"changes":{"core\/src\/main\/resources\/hudson\/model\/BuildTimelineWidget\/control.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/BuildTimelineWidget\/control.jelly":[{"add":["37","    function doLoad() {","109","        function doResize() {","116","        }","117","        ","118","        if (window.addEventListener) { ","119","            window.addEventListener( \"resize\", doResize, false );","120","        }else if (window.attachEvent) { ","121","            window.attachEvent( \"onresize\", doResize);","122","        }else if (window.onResize) {","123","           window.onresize = doResize;","124","        }","125","        ","126","    };","127","    ","128","    if (window.addEventListener) { ","129","        window.addEventListener( \"load\", doLoad, false );","130","    }else if (window.attachEvent) { ","131","        window.attachEvent( \"onload\", doLoad );","132","    }else if (window.onLoad) {","133","           window.onload = doLoad;","134","    }"],"delete":["37","    window.addEventListener('load', function() {","109","        window.addEventListener('resize',function() {","116","        },false);","117","    },false);"]}],"changelog.html":[{"add":["69","  <li class=bug>","70","    Build history time line wasn't working for IE8.","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7403\">issue 7403<\/a>)"],"delete":[]}]}},"9013b290b75d3638203c3b112b2ef2a2cfb31dc4":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY","core\/src\/main\/resources\/lib\/layout\/layout.jelly":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["33","  padding: 0 0 40px 0;","73","#page-body.clear:after {","74","  clear: both;","75","  content: \"\";","76","  display: table;","77","}","78","","80","  padding: 15px 15px 40px 15px;","86","  padding: 15px 15px 40px 15px;","134","  padding: 11px 0;","137","  border-bottom: 1px solid #f6faf2;"],"delete":["33","  padding: 0;","34","  background: white;","35","  margin-right: auto;","36","  margin-left: auto;","77","  padding: 15px 15px 80px 15px;","83","  padding: 15px 15px 80px 15px;","131","  padding: 10px 0;"]}],"core\/src\/main\/resources\/lib\/layout\/layout.jelly":[{"add":["229","    <div id=\"page-body\" class=\"clear\">"],"delete":["229","    <div id=\"page-body\">"]}]}},"1c6498f95b91288b106613b7fdad5f106e6efd3e":{"changes":{"core\/src\/main\/java\/hudson\/model\/Failure.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Failure.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi","59","        if (node instanceof AbstractItem) \/\/ Maintain ancestors","60","            rsp.forward(Hudson.getInstance(), ((AbstractItem)node).getUrl() + \"error\", req);","61","        else","62","            rsp.forward(node instanceof AbstractModelObject ? node : Hudson.getInstance() ,\"error\", req);"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","59","        rsp.forward( node instanceof AbstractModelObject ? node : Hudson.getInstance() ,\"error\",req);"]}]}},"3adfed4b06a7f525446ea80a0164a3bf2e889d1a":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/JobTest.java":"MODIFY","core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/test\/java\/hudson\/UtilTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["31","import hudson.FilePath;","71","import java.nio.file.Files;","684","    @Restricted(NoExternalUse.class)","685","    @Extension","686","    public static class SubItemBuildsLocationImpl extends ItemListener {","687","        @Override","688","        public void onLocationChanged(Item item, String oldFullName, String newFullName) {","689","            final Jenkins jenkins = Jenkins.getInstance();","690","            if (!jenkins.isDefaultBuildDir() && item instanceof Job) {","691","                File newBuildDir = ((Job)item).getBuildDir();","692","                try {","693","                    if (!Util.isDescendant(item.getRootDir(), newBuildDir)) {","694","                        \/\/OK builds are stored somewhere outside of the item's root, so none of the other move operations has probably moved it.","695","                        \/\/So let's try even though we lack some information","696","                        String oldBuildsDir = Jenkins.expandVariablesForDirectory(jenkins.getRawBuildsDir(), oldFullName, \"<NOPE>\");","697","                        if (oldBuildsDir.contains(\"<NOPE>\")) {","698","                            LOGGER.severe(String.format(\"Builds directory for job %1$s appears to be outside of item root,\" +","699","                                    \" but somehow still containing the item root path, which is unknown. Cannot move builds from %2$s to %1$s.\", newFullName, oldFullName));","700","                        } else {","701","                            File oldDir = new File(oldBuildsDir);","702","                            if (oldDir.isDirectory()) {","703","                                try {","704","                                    FileUtils.moveDirectory(oldDir, newBuildDir);","705","                                } catch (IOException e) {","706","                                    LOGGER.log(Level.SEVERE, String.format(\"Failed to move %s to %s\", oldBuildsDir, newBuildDir.getAbsolutePath()), e);","707","                                }","708","                            }","709","                        }","710","                    }","711","                } catch (IOException e) {","712","                    LOGGER.log(Level.WARNING, \"Failed to inspect \" + item.getRootDir() + \". Builds might not be moved.\", e);","713","                }","714","            }","715","        }","716","    }","717",""],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/JobTest.java":[{"add":["33","import hudson.FilePath;","36","import hudson.tasks.ArtifactArchiver;","37","import hudson.tasks.BatchFile;","38","import hudson.tasks.Shell;","40","","41","import java.io.ByteArrayOutputStream;","42","import java.io.File;","47","import java.util.Arrays;","48","import java.util.Comparator;","61","import org.jvnet.hudson.test.MockFolder;","310","    @Issue(\"JENKINS-44657\")","311","    @Test public void testRenameWithCustomBuildsDirWithBuildsIntact() throws Exception {","312","        j.jenkins.setRawBuildsDir(\"${JENKINS_HOME}\/builds\/${ITEM_FULL_NAME}\/builds\");","313","        final FreeStyleProject p = j.createFreeStyleProject();","314","        final File oldBuildsDir = p.getBuildDir();","315","        j.buildAndAssertSuccess(p);","316","        String oldDirContent = dirContent(oldBuildsDir);","317","        p.renameTo(\"different-name\");","318","        final File newBuildDir = p.getBuildDir();","319","        assertNotNull(newBuildDir);","320","        assertNotEquals(oldBuildsDir.getAbsolutePath(), newBuildDir.getAbsolutePath());","321","        String newDirContent = dirContent(newBuildDir);","322","        assertEquals(oldDirContent, newDirContent);","323","    }","324","","325","    @Issue(\"JENKINS-44657\")","326","    @Test public void testRenameWithCustomBuildsDirWithBuildsIntactInFolder() throws Exception {","327","        j.jenkins.setRawBuildsDir(\"${JENKINS_HOME}\/builds\/${ITEM_FULL_NAME}\/builds\");","328","        final MockFolder f = j.createFolder(\"F\");","329","","330","        final FreeStyleProject p1 = f.createProject(FreeStyleProject.class, \"P1\");","331","        j.buildAndAssertSuccess(p1);","332","        File oldP1BuildsDir = p1.getBuildDir();","333","        final String oldP1DirContent = dirContent(oldP1BuildsDir);","334","        f.renameTo(\"different-name\");","335","","336","        File newP1BuildDir = p1.getBuildDir();","337","        assertNotNull(newP1BuildDir);","338","        assertNotEquals(oldP1BuildsDir.getAbsolutePath(), newP1BuildDir.getAbsolutePath());","339","        String newP1DirContent = dirContent(newP1BuildDir);","340","        assertEquals(oldP1DirContent, newP1DirContent);","341","","342","        final FreeStyleProject p2 = f.createProject(FreeStyleProject.class, \"P2\");","343","        if (Functions.isWindows()) {","344","            p2.getBuildersList().add(new BatchFile(\"echo hello > hello.txt\"));","345","        } else {","346","            p2.getBuildersList().add(new Shell(\"echo hello > hello.txt\"));","347","        }","348","        p2.getPublishersList().add(new ArtifactArchiver(\"*.txt\"));","349","        j.buildAndAssertSuccess(p2);","350","","351","        File oldP2BuildsDir = p2.getBuildDir();","352","        final String oldP2DirContent = dirContent(oldP2BuildsDir);","353","        FreeStyleBuild b2 = p2.getBuilds().getLastBuild();","354","        ByteArrayOutputStream out = new ByteArrayOutputStream();","355","        b2.getLogText().writeRawLogTo(0, out);","356","        final String oldB2Log = new String(out.toByteArray());","357","        assertTrue(b2.getArtifactManager().root().child(\"hello.txt\").exists());","358","        f.renameTo(\"something-else\");","359","","360","        \/\/P1 check again","361","        newP1BuildDir = p1.getBuildDir();","362","        assertNotNull(newP1BuildDir);","363","        assertNotEquals(oldP1BuildsDir.getAbsolutePath(), newP1BuildDir.getAbsolutePath());","364","        newP1DirContent = dirContent(newP1BuildDir);","365","        assertEquals(oldP1DirContent, newP1DirContent);","366","","367","        \/\/P2 check","368","","369","        b2 = p2.getBuilds().getLastBuild();","370","        assertNotNull(b2);","371","        out = new ByteArrayOutputStream();","372","        b2.getLogText().writeRawLogTo(0, out);","373","        final String newB2Log = new String(out.toByteArray());","374","        assertEquals(oldB2Log, newB2Log);","375","        assertTrue(b2.getArtifactManager().root().child(\"hello.txt\").exists());","376","","377","        File newP2BuildDir = p2.getBuildDir();","378","        assertNotNull(newP2BuildDir);","379","        assertNotEquals(oldP2BuildsDir.getAbsolutePath(), newP2BuildDir.getAbsolutePath());","380","        String newP2DirContent = dirContent(newP2BuildDir);","381","        assertEquals(oldP2DirContent, newP2DirContent);","382","    }","383","","384","    private String dirContent(File dir) throws IOException, InterruptedException {","385","        if (dir == null || !dir.isDirectory()) {","386","            return null;","387","        }","388","        StringBuilder str = new StringBuilder(\"\");","389","        final FilePath[] list = new FilePath(dir).list(\"**\/*\");","390","        Arrays.sort(list, Comparator.comparing(FilePath::getRemote));","391","        for (FilePath path : list) {","392","            str.append(relativePath(dir, path));","393","            str.append(' ').append(path.length()).append('\\n');","394","        }","395","        return str.toString();","396","    }","397","","398","    private String relativePath(File base, FilePath path) throws IOException, InterruptedException {","399","        if (path.absolutize().getRemote().equals(base.getAbsolutePath())) {","400","            return \"\";","401","        } else {","402","            final String s = relativePath(base, path.getParent());","403","            if (s.isEmpty()) {","404","                return path.getName();","405","            } else {","406","                return s + \"\/\" + path.getName();","407","            }","408","        }","409","    }","410",""],"delete":["43","import java.util.concurrent.TimeUnit;"]}],"core\/src\/main\/java\/hudson\/Util.java":[{"add":["570","     * A check if a file path is a descendant of a parent path","571","     * @param forParent the parent the child should be a descendant of","572","     * @param potentialChild the path to check","573","     * @return true if so","574","     * @throws IOException for invalid paths","575","     * @since FIXME","576","     * @see InvalidPathException","577","     *\/","578","    public static boolean isDescendant(File forParent, File potentialChild) throws IOException {","579","        try {","580","            Path child = potentialChild.getAbsoluteFile().toPath().normalize();","581","            Path parent = forParent.getAbsoluteFile().toPath().normalize();","582","            return child.startsWith(parent);","583","        } catch (InvalidPathException e) {","584","            throw new IOException(e);","585","        }","586","    }","587","","588","    \/**"],"delete":[]}],"core\/src\/test\/java\/hudson\/UtilTest.java":[{"add":["674","    @Test","675","    public void testIsDescendant() throws IOException {","676","        File root;","677","        File other;","678","        if (Functions.isWindows()) {","679","            root = new File(\"C:\\\\Temp\");","680","            other = new File(\"C:\\\\Windows\");","681","        } else {","682","            root = new File(\"\/tmp\");","683","            other = new File(\"\/usr\");","684","","685","        }","686","        assertTrue(Util.isDescendant(root, new File(root,\"child\")));","687","        assertTrue(Util.isDescendant(root, new File(new File(root,\"child\"), \"grandchild\")));","688","        assertFalse(Util.isDescendant(root, other));","689","        assertFalse(Util.isDescendant(root, new File(other, \"child\")));","690","","691","        assertFalse(Util.isDescendant(new File(root,\"child\"), root));","692","        assertFalse(Util.isDescendant(new File(new File(root,\"child\"), \"grandchild\"), root));","693","","694","        \/\/.. whithin root","695","        File convoluted = new File(root, \"child\");","696","        convoluted = new File(convoluted, \"..\");","697","        convoluted = new File(convoluted, \"child\");","698","        assertTrue(Util.isDescendant(root, convoluted));","699","","700","        \/\/.. going outside of root","701","        convoluted = new File(root, \"..\");","702","        convoluted = new File(convoluted, other.getName());","703","        convoluted = new File(convoluted, \"child\");","704","        assertFalse(Util.isDescendant(root, convoluted));","705","","706","        \/\/. on root","707","        assertTrue(Util.isDescendant(new File(root, \".\"), new File(root, \"child\")));","708","        \/\/. on both","709","        assertTrue(Util.isDescendant(new File(root, \".\"), new File(new File(root, \"child\"), \".\")));","710","    }","711",""],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["411","    private String buildsDir = DEFAULT_BUILDS_DIR;","2441","    \/**","2442","     * If the configured buildsDir has it's default value or has been changed.","2443","     *","2444","     * @return true if default value.","2445","     *\/","2446","    @Restricted(NoExternalUse.class)","2447","    public boolean isDefaultBuildDir() {","2448","        return DEFAULT_BUILDS_DIR.equals(buildsDir);","2449","    }","2450","","2456","    public static String expandVariablesForDirectory(String base, String itemFullName, String itemRootDir) {","5081","     * Default value of job's builds dir.","5082","     * @see #getRawBuildsDir()","5083","     *\/","5084","    private static final String DEFAULT_BUILDS_DIR = \"${ITEM_ROOTDIR}\/builds\";","5085","","5086","    \/**"],"delete":["411","    private String buildsDir = \"${ITEM_ROOTDIR}\/builds\";","2446","    static String expandVariablesForDirectory(String base, String itemFullName, String itemRootDir) {"]}]}},"564ca0b6d7f50c3b1164f3f1de8dad5c8c89a8cb":{"changes":{"core\/src\/main\/java\/jenkins\/security\/HMACConfidentialKey.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/HMACConfidentialKey.java":[{"add":["29","    private Mac mac;","67","    public synchronized byte[] mac(byte[] message) {","68","        if (mac == null) {","69","            mac = createMac();","70","        }","71","        return chop(mac.doFinal(message));"],"delete":["63","","67","    public byte[] mac(byte[] message) {","68","        return chop(createMac().doFinal(message));"]}]}},"2ea0276e7b4ea9614961a530382320c49ab626a2":{"changes":{"core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DirectoryBrowserSupport.java":[{"add":["286","            InputStream fingerprintInput = baseFile.open();","287","            try {","288","                rsp.forward(Jenkins.getInstance().getFingerprint(Util.getDigestOf(fingerprintInput)), \"\/\", req);","289","            } finally {","290","                fingerprintInput.close();","291","            }"],"delete":["286","            rsp.forward(Jenkins.getInstance().getFingerprint(Util.getDigestOf(baseFile.open())), \"\/\", req);"]}]}},"d927a0c8bea678eb6d179edd786b004bb47a18c5":{"changes":{"changelog.html":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["72","    <tt>jenkins.war<\/tt> file shouldn't be exploded into <tt>\/tmp<\/tt>","73","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-22442\">issue 22442<\/a>)","74","  <li class=bug>"],"delete":[]}],"war\/pom.xml":[{"add":["105","      <version>2.2<\/version>"],"delete":["105","      <version>2.1<\/version>"]}]}},"964e967ad98fbd5040ab75ff98f0cc8238bbd09a":{"changes":{"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["81","                iapf.touch(System.currentTimeMillis());","83","                iapf.write(randomUUID + System.lineSeparator(), \"UTF-8\");","84","                "],"delete":["81","                iapf.write(randomUUID + System.lineSeparator(), \"UTF-8\");"]}]}},"543fe070a6af952b118253df7a7c1dd1d7739f92":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTreeKiller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTreeKiller.java":[{"add":["170","            if (proc!=null)","171","                proc.destroy();"],"delete":["170","            proc.destroy();"]}]}},"a55a90d7bd8d15da436fd40df8a70c15ae682741":{"changes":{"maven-plugin\/src\/main\/webapp\/root-pom.html":"MODIFY","maven-plugin\/src\/main\/webapp\/root-pom_de.html":"MODIFY"},"diff":{"maven-plugin\/src\/main\/webapp\/root-pom.html":[{"add":["2","  than the 1st module's root directory, specify the path (relative to"],"delete":["2","  than the module root directory, specify the path (relative to"]}],"maven-plugin\/src\/main\/webapp\/root-pom_de.html":[{"add":["2","  im Stammverzeichnis des ersten Modulverzeichnisses liegt, geben Sie","3","  hier den Pfad (relativ zum Stammverzeichnis des Modulverzeichnisses) an,"],"delete":["1","    <!-- OUTDATED -->","3","  im Stammverzeichnis des Arbeitsbereiches liegt, geben Sie","4","  hier den Pfad (relativ zum Stammverzeichnis des Arbeitsbereiches) an,"]}]}},"b62ad15fef4790444af746ac4ae9149c37e89e07":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["554","        final InputStream in = new RemoteInputStream(_in, Flag.GREEDY);","720","            final InputStream in = new RemoteInputStream(_in, Flag.GREEDY);"],"delete":["554","        final InputStream in = new RemoteInputStream(_in);","720","            final InputStream in = new RemoteInputStream(_in);"]}]}},"1636cd1fcbf9406622a200eb3829e65a2166c52b":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["384","      <version>1.151<\/version>"],"delete":["384","      <version>1.150<\/version>"]}]}},"1c9631a73cdc1f66e23041054bcd00eacf3e7806":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/Fingerprint.java":"MODIFY"},"diff":{"changelog.html":[{"add":["95","    <a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8449\">issue 8449<\/a>)","96","  <li class=bug>","97","    NPE during run - fingerprint cleanup thread.","98","    <a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-6128\">issue 6128<\/a>)"],"delete":["95","    <<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8449\">issue 8449<\/a>)"]}],"core\/src\/main\/java\/hudson\/model\/Fingerprint.java":[{"add":["685","            Run firstBuild = j.getFirstBuild();","686","            if(firstBuild==null)","687","                continue;","688","","689","            int oldest = firstBuild.getNumber();"],"delete":["685","            int oldest = j.getFirstBuild().getNumber();"]}]}},"c40a60e937c48a4937b7462208645e799bbcb478":{"changes":{"core\/src\/main\/java\/hudson\/console\/ConsoleAnnotator.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/console\/ConsoleAnnotator.java":[{"add":["93","    private static final class ConsoleAnnotatorAggregator<T> extends ConsoleAnnotator<T> {","94","        List<ConsoleAnnotator<T>> list;","95","","96","        ConsoleAnnotatorAggregator(Collection list) {","97","            this.list = new ArrayList<ConsoleAnnotator<T>>(list);","98","        }","99","","100","        public ConsoleAnnotator annotate(T context, MarkupText text) {","101","            ListIterator<ConsoleAnnotator<T>> itr = list.listIterator();","102","            while (itr.hasNext()) {","103","                ConsoleAnnotator a =  itr.next();","104","                ConsoleAnnotator b = a.annotate(context,text);","105","                if (a!=b) {","106","                    if (b==null)    itr.remove();","107","                    else            itr.set(b);","108","                }","109","            }","110","","111","            switch (list.size()) {","112","                case 0:     return null;    \/\/ no more annotator left","113","                case 1:     return list.get(0); \/\/ no point in aggregating","114","                default:    return this;","115","            }","116","        }","117","    }","118","","128","        return new ConsoleAnnotatorAggregator<T>(all);"],"delete":["102","        class Aggregator extends ConsoleAnnotator<T> {","103","            List<ConsoleAnnotator<T>> list;","104","","105","            Aggregator(Collection list) {","106","                this.list = new ArrayList<ConsoleAnnotator<T>>(list);","107","            }","108","","109","            public ConsoleAnnotator annotate(T context, MarkupText text) {","110","                ListIterator<ConsoleAnnotator<T>> itr = list.listIterator();","111","                while (itr.hasNext()) {","112","                    ConsoleAnnotator a =  itr.next();","113","                    ConsoleAnnotator b = a.annotate(context,text);","114","                    if (a!=b) {","115","                        if (b==null)    itr.remove();","116","                        else            itr.set(b);","117","                    }","118","                }","119","","120","                switch (list.size()) {","121","                case 0:     return null;    \/\/ no more annotator left","122","                case 1:     return list.get(0); \/\/ no point in aggregating","123","                default:    return this;","124","                }","125","            }","126","        }","127","        return new Aggregator(all);"]}]}},"487b9455298f581600d173c45d613f5ef21f77ff":{"changes":{"changelog.html":"MODIFY","debian\/debian\/jenkins.init":"MODIFY"},"diff":{"changelog.html":[{"add":["78","  <li class=bug>","79","    Debian\/Ubuntu init script does not wait long enough during stop operation","80","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11744\">issue 11744<\/a>)"],"delete":[]}],"debian\/debian\/jenkins.init":[{"add":["149","        for n in 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20; do"],"delete":["149","        for n in 1 2 3 4 5; do"]}]}},"fbda18e3840c92df01063ff1435620d57864f951":{"changes":{"core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["712","            return new RemoteProc(getChannel().callAsync(new RemoteLaunchCallable(ps.commands, ps.envs, in, out, err, workDir, listener)));","760","        private final TaskListener listener;","762","        RemoteLaunchCallable(List<String> cmd, String[] env, InputStream in, OutputStream out, OutputStream err, String workDir, TaskListener listener) {","769","            this.listener = listener;","773","            Launcher.ProcStarter ps = new LocalLauncher(listener).launch();"],"delete":["712","            return new RemoteProc(getChannel().callAsync(new RemoteLaunchCallable(ps.commands, ps.envs, in, out, err, workDir)));","761","        RemoteLaunchCallable(List<String> cmd, String[] env, InputStream in, OutputStream out, OutputStream err, String workDir) {","771","            Launcher.ProcStarter ps = new LocalLauncher(TaskListener.NULL).launch();"]}]}},"80328483465027495c01d20ae11d743a46965c01":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/model\/ViewTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["964","        FormApply.success(\"..\/\" + Util.rawEncode(name)).generateResponse(req,rsp,this);"],"delete":["964","        FormApply.success(\"..\/\"+name).generateResponse(req,rsp,this);"]}],"changelog.html":[{"add":["63","  <li class=bug>","64","    Edit views with non-ASCII names did not work since 1.500.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18373\">issue 18373<\/a>)"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/ViewTest.java":[{"add":["37","import org.junit.Ignore;","160","","161","    @Ignore(\"verified manually in Winstone but org.mortbay.JettyResponse.sendRedirect (6.1.26) seems to mangle the location\")","162","    @Bug(18373)","163","    @Test public void unicodeName() throws Exception {","164","        HtmlForm form = j.createWebClient().goTo(\"newView\").getFormByName(\"createItem\");","165","        String name = \"I ? NY\";","166","        form.getInputByName(\"name\").setValueAttribute(name);","167","        form.getRadioButtonsByName(\"mode\").get(0).setChecked(true);","168","        j.submit(form);","169","        View view = j.jenkins.getView(name);","170","        assertNotNull(view);","171","        j.submit(j.createWebClient().getPage(view, \"configure\").getFormByName(\"viewConfig\"));","172","    }","173",""],"delete":[]}]}},"6ea426678b8e715479654e33177537d496fa2b4e":{"changes":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":["1016","                return collator.compare(lhs.getDisplayName(), rhs.getDisplayName());"],"delete":["1016","                return collator.compare(lhs, rhs);"]}]}},"957ffd30096a4309fc7da779d03086edb46e4fe3":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/LocalChannel.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/VirtualChannel.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/Channel.java":"MODIFY","core\/src\/test\/java\/hudson\/FilePathTest.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/LocalChannel.java":[{"add":["100","","101","    public void syncLocalIO() throws InterruptedException {","102","        \/\/ noop","103","    }"],"delete":[]}],"remoting\/src\/main\/java\/hudson\/remoting\/VirtualChannel.java":[{"add":["105","","106","    \/**","107","     * Blocks until all the I\/O packets sent from remote is fully locally executed, then return.","108","     *","109","     * @since 1.402","110","     *\/","111","    void syncLocalIO() throws InterruptedException;","113",""],"delete":[]}],"remoting\/src\/main\/java\/hudson\/remoting\/Channel.java":[{"add":["934","    public void syncLocalIO() throws InterruptedException {","935","        try {","936","            pipeWriter.submit(new Runnable() {","937","                public void run() {","938","                    \/\/ noop","939","                }","940","            }).get();","941","        } catch (ExecutionException e) {","942","            throw new AssertionError(e); \/\/ impossible","943","        }","944","    }","945","","948","            Channel.current().syncLocalIO();","949","            return null;"],"delete":["936","            try {","937","                return Channel.current().pipeWriter.submit(new Runnable() {","938","                    public void run() {","939","                        \/\/ noop","940","                    }","941","                }).get();","942","            } catch (ExecutionException e) {","943","                throw new AssertionError(e); \/\/ impossible","944","            }"]}],"core\/src\/test\/java\/hudson\/FilePathTest.java":[{"add":["25","import hudson.remoting.Future;","27","import hudson.util.IOException2;","31","import java.io.FileOutputStream;","32","import java.io.IOException;","33","import java.io.OutputStream;","34","import java.util.ArrayList;","35","import java.util.List;","36","import java.util.concurrent.Callable;","37","import java.util.concurrent.ExecutorService;","38","import java.util.concurrent.Executors;","40","import org.apache.commons.io.output.CountingOutputStream;","42","import org.jvnet.hudson.test.Bug;","75","    \/**","76","     * As we moved the I\/O handling to another thread, there's a race condition in","77","     * {@link FilePath#copyTo(OutputStream)} &mdash; this method can return before","78","     * all the writes are delivered to {@link OutputStream}.","79","     *","80","     * <p>","81","     * To reproduce that problem, we use a large number of threads, so that we can","82","     * maximize the chance of out-of-order execution, and make sure we are","83","     * seeing the right byte count at the end.","84","     *","85","     * Also see JENKINS-7897","86","     *\/","87","    @Bug(7871)","88","    public void testCopyTo3() throws Exception {","89","        final File tmp = File.createTempFile(\"testCopyTo3\",\"\");","90","","91","        FileOutputStream os = new FileOutputStream(tmp);","92","        final int size = 90000;","93","        byte[] buf = new byte[size];","94","        for (int i=0; i<buf.length; i++)","95","            buf[i] = (byte)(i%256);","96","        os.write(buf);","97","        os.close();","98","","99","        ExecutorService es = Executors.newFixedThreadPool(100);","100","        try {","101","            List<java.util.concurrent.Future> r = new ArrayList<java.util.concurrent.Future>();","102","            for (int i=0; i<100; i++) {","103","                r.add(es.submit(new Callable<Object>() {","104","                    public Object call() throws Exception {","105","                        class Sink extends OutputStream {","106","                            private Exception closed;","107","                            private volatile int count;","108","","109","                            private void checkNotClosed() throws IOException2 {","110","                                if (closed != null)","111","                                    throw new IOException2(closed);","112","                            }","113","","114","                            @Override","115","                            public void write(int b) throws IOException {","116","                                count++;","117","                                checkNotClosed();","118","                            }","119","","120","                            @Override","121","                            public void write(byte[] b) throws IOException {","122","                                count+=b.length;","123","                                checkNotClosed();","124","                            }","125","","126","                            @Override","127","                            public void write(byte[] b, int off, int len) throws IOException {","128","                                count+=len;","129","                                checkNotClosed();","130","                            }","131","","132","                            @Override","133","                            public void close() throws IOException {","134","                                closed = new Exception();","135","                                if (size!=count)","136","                                    fail();","137","                            }","138","                        }","139","","140","                        FilePath f = new FilePath(french, tmp.getPath());","141","                        Sink sink = new Sink();","142","                        f.copyTo(sink);","143","                        assertEquals(size,sink.count);","144","                        return null;","145","                    }","146","                }));","147","            }","148","","149","            for (java.util.concurrent.Future f : r)","150","                f.get();","151","        } finally {","152","            es.shutdown();","153","        }","154","    }","155","","156","","157",""],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["1407","","1408","        \/\/ make sure the write fully happens before we return.","1409","        if (channel!=null)","1410","            channel.syncLocalIO();"],"delete":[]}]}},"86f2da158a89c4313f2b43e33737ea603cbd52f4":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/summary.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/summary.jelly":[{"add":["7","  <j:if test=\"${attrs.icon!=null}\">"],"delete":["7","  <j:if test=\"${attrs.icon}\">"]}]}},"3c111982f656cf0493b4b2704597017d507670da":{"changes":{"core\/src\/main\/java\/hudson\/scm\/CVSChangeLogSet.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/CVSChangeLogSet.java":[{"add":["123","            for (File f : that.files)","124","                f.parent = this;"],"delete":[]}]}},"5fa7dc0b6c9ef9e7e17bd08ce2a4744529d507a5":{"changes":{"translation-tool.pl":"MODIFY"},"diff":{"translation-tool.pl":[{"add":["0","#!\/usr\/bin\/perl -w","26","# Perl script to generate missing translation keys and missing properties files,","27","# to remove unused keys, and to convert utf8 properties files to iso or ascii.","29","# 1.- It recursively looks for files in a folder, and analizes them to extract the","30","#     keys being used in the application.","36","# 5.- Finally, when --toiso=true or --toascii=true, the script is able to convert utf-8","37","#     properties files to iso or unicode hex representation is ascii.","38","#","40","# Note, while the migration to Jenkins this file will report the keys which should point","47","my ($tfiles, $tkeys, $tmissing, $tunused, $tempty, $tsame, $tnojenkins) = (0, 0, 0, 0, 0, 0, 0);","64","  } else {","77","## look for Message.properties and *.jelly files in the provided folder","108","","109","my @formatParameters = ($tfiles, $tkeys, $tdone, $pdone, $tmissing, $pmissing, $tunused, $punused, $tempty, $pempty, $tsame, $psame, $tnojenkins, $pnojenkins);","110","printf \"\\nTOTAL: Files: %d Keys: %d Done: %d(%.2f%%)\\n       Missing: %d(%.2f%%) Orphan: %d(%.2f%%) Empty: %d(%.2f%%) Same: %d(%.2f%%) NoJenkins: %d(%.2f%%)\\n\\n\", (@formatParameters);","118","   #  ofile -> output file in the current language,","155","   # calculate old keys in the file which are currently unused","164","   # calculate keys which have the same value in English","181","","182","   # Show Alerts","199","","200","   # open the editor if the user has specified it and there are changes to manage","205","","206","   # convert the language file to ISO or ASCII which are","249","         my $word = $1;","308","      unlink($back);","310","}","323","               s\/([\\xC0-\\xDF])([\\x80-\\xBF])\/sprintf('\\\\u%04x',","325","               s\/([\\xE0-\\xEF])([\\x80-\\xBF])([\\x80-\\xBF])\/sprintf('\\\\u%04x',","385","### Usage","389","","404","     - Look for Spanish files with incomplete keys in the 'main' folder,","409","     - Remove all orphaned keys from German files which are in the current file","410","        $0 --lang=de --remove .","411",""],"delete":["0","#!\/usr\/bin\/perl","26","# Perl script to generate missing translation keys and missing properties files, ","27","# to remove unused keys, and to convert utf8 properties files to iso or ascii.            ","29","# 1.- It recursively looks for files in a folder, and analizes them to extract the ","30","#     keys being used in the application. ","36","# 5.- Finally, when --toiso=true or --toascii=true, the script is able to convert utf-8 ","37","#     properties files to iso or unicode hex representation is ascii. ","38","# ","40","# Note, while the migration to Jenkins this file will report the keys which should point ","47","my ($tfiles, $tkeys, $tmissing, $tunused, $tempty, $tsame, $tnojenkins) = (0, 0, 0, 0, 0, 0);","64","  } else { ","77","## look for Message.properties and *.jelly files in the provided folder ","108","printf (\"\\nTOTAL: Files: %d Keys: %d Done: %d(%.2f\\%)\\n       Missing: %d(%.2f\\%) Orphan: %d(%.2f\\%) Empty: %d(%.2f\\%) Same: %d(%.2f\\%) NoJenkins: %d(%.2f\\%)\\n\\n\", ","109","        $tfiles, $tkeys, $tdone, $pdone,","110","        $tmissing, $pmissing, $tunused, $punused, ","111","        $tempty, $pempty, $tsame, $psame, $tnojenkins, $pnojenkins);","119","   #  ofile -> output file in the current language, ","156","   # calculate old keys in the file which are currently unused ","165","   # calculate keys which has the same value in english ","181","   ","183","   # Show Alerts   ","200","   ","201","   # open the editor if the user has especified it and there are changes to manage","206","   ","207","   # convert the language file to ISO or ACII which are","250","         my $word = $1; ","309","      unlink($back);   ","311","}      ","324","               s\/([\\xC0-\\xDF])([\\x80-\\xBF])\/sprintf('\\\\u%04x', ","326","               s\/([\\xE0-\\xEF])([\\x80-\\xBF])([\\x80-\\xBF])\/sprintf('\\\\u%04x', ","386","### Usage ","390","   ","405","     - Look for Spanish files with incomplete keys in the 'main' folder, ","410","     - Remove all orphand keys from German files which are in the current file","411","        $0 --lang=de --remove .   ","412","   "]}]}},"d2a2ec589f4728fa2cfa35371155bce7cc95a0a7":{"changes":{"core\/src\/main\/java\/hudson\/model\/Slave.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Slave.java":[{"add":["345","    \/**","346","     * Creates a launcher for the slave.","347","     *","348","     * @return","349","     *      If there is no computer it will return a {@link hudson.Launcher.DummyLauncher}, otherwise it","350","     *      will return a {@link hudson.Launcher.RemoteLauncher} instead.","351","     *\/","354","        if (c == null) {","355","            listener.error(\"Issue with creating launcher for slave \" + name + \".\");","356","            return new Launcher.DummyLauncher(listener);","357","        } else {","358","            return new RemoteLauncher(listener, c.getChannel(), c.isUnix()).decorateFor(this);","359","        }"],"delete":["347","        return new RemoteLauncher(listener, c.getChannel(), c.isUnix()).decorateFor(this);"]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["843","    public static class DummyLauncher extends Launcher {","844","","845","        public DummyLauncher(TaskListener listener) {","846","            super(listener, null);","847","        }","848","","849","        @Override","850","        public Proc launch(ProcStarter starter) throws IOException {","851","            listener.error(\"Can not call launch on a dummy launcher.\");","852","            return null;","853","        }","854","","855","        @Override","856","        public Channel launchChannel(String[] cmd, OutputStream out, FilePath workDir, Map<String, String> envVars) throws IOException, InterruptedException {","857","            listener.error(\"Can not call launchChannel on a dummy launcher.\");","858","            return null;","859","        }","860","","861","        @Override","862","        public void kill(Map<String, String> modelEnvVars) throws IOException, InterruptedException {","863","            \/\/ Kill method should do nothing.","864","        }","865","    }","866","","867",""],"delete":[]}]}},"994375f9bb5589e9e02990286712fa67a722c355":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["41","    <stapler.version>1.239<\/stapler.version>"],"delete":["41","    <stapler.version>1.240<\/stapler.version>"]}]}},"4ca5ac219388a12f947db443454085c2ab7ec3f0":{"changes":{"core\/src\/main\/java\/hudson\/node_monitors\/SwapSpaceMonitor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/node_monitors\/SwapSpaceMonitor.java":[{"add":["72","            MemoryMonitor mm;","73","            try {","74","                mm = MemoryMonitor.get();","75","            } catch (IOException e) {","76","                if(!warned) {","77","                    \/\/ report the problem just once, and avoid filling up the log with the same error. see HUDSON-2194.","78","                    warned = true;","79","                    throw e;","80","                } else {","81","                    return null;","82","                }","83","            }","84","            return new MemoryUsage2(mm.monitor());","88","","89","        private static boolean warned = false;"],"delete":["72","            return new MemoryUsage2(MemoryMonitor.get().monitor());"]}]}},"52c4ed6da03ea02cff54f7a31dad62c55d6e8c94":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["79","import java.net.HttpRetryException;","80","import java.net.HttpURLConnection;","1136","                URLConnection connection = (URLConnection) ProxyConfiguration.open(url);","1137","                connection.setConnectTimeout(20000); \/\/ JENKINS-33557 lower connection test timeout (20 sec)","1138","                connection.connect();","1139","","1140","                if(connection instanceof HttpURLConnection) {","1141","                    int responseCode = ((HttpURLConnection)connection).getResponseCode();","1142","                    if(HttpURLConnection.HTTP_OK != responseCode) {","1143","                        throw new HttpRetryException(\"Invalid response code (\" + responseCode + \") from URL: \" + url.toString(), responseCode);","1144","                    }","1145","                } else {","1146","                    Util.copyStreamAndClose(connection.getInputStream(),new NullOutputStream());","1147","                }","1330","            Future<?> internetCheck = null;","1332","                final String connectionCheckUrl = site.getConnectionCheckUrl();","1336","                    \/\/ Run the internet check in parallel","1337","                    internetCheck = updateService.submit(new Runnable() {","1338","                        @Override","1339","                        public void run() {","1340","                            try {","1341","                                config.checkConnection(ConnectionCheckJob.this, connectionCheckUrl);","1342","                            } catch (Exception e) {","1343","                                if(e.getMessage().contains(\"Connection timed out\")) {","1344","                                    \/\/ Google can't be down, so this is probably a proxy issue","1345","                                    connectionStates.put(ConnectionStatus.INTERNET, ConnectionStatus.FAILED);","1346","                                    statuses.add(Messages.UpdateCenter_Status_ConnectionFailed(connectionCheckUrl));","1347","                                    return;","1348","                                }","1349","                            }","1350","                            connectionStates.put(ConnectionStatus.INTERNET, ConnectionStatus.OK);","1352","                    });","1372","            ","1373","            if(internetCheck != null) {","1374","                try {","1375","                    \/\/ Wait for internet check to complete","1376","                    internetCheck.get();","1377","                } catch (Exception e) {","1378","                    LOGGER.log(Level.WARNING, \"Error completing internet connectivity check: \" + e.getMessage(), e);","1379","                }","1380","            }"],"delete":["1134","                Util.copyStreamAndClose(ProxyConfiguration.open(url).getInputStream(),new NullOutputStream());","1318","                String connectionCheckUrl = site.getConnectionCheckUrl();","1322","                    try {","1323","                        config.checkConnection(this, connectionCheckUrl);","1324","                    } catch (Exception e) {","1325","                        if(e.getMessage().contains(\"Connection timed out\")) {","1326","                            \/\/ Google can't be down, so this is probably a proxy issue","1327","                            connectionStates.put(ConnectionStatus.INTERNET, ConnectionStatus.FAILED);","1328","                            statuses.add(Messages.UpdateCenter_Status_ConnectionFailed(connectionCheckUrl));","1329","                            return;","1331","                    }","1332","                    connectionStates.put(ConnectionStatus.INTERNET, ConnectionStatus.OK);"]}]}},"8929990889b45a19e1f60c103dcbb17ad91bfc28":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersAction.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/StringParameterValue.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ParameterValue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersAction.java":[{"add":["29","import org.kohsuke.stapler.export.Exported;","30","import org.kohsuke.stapler.export.ExportedBean;","44","@ExportedBean","99","    @Exported(visibility=2)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/StringParameterValue.java":[{"add":["26","import org.kohsuke.stapler.export.Exported;","36","    @Exported(visibility=3)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ParameterValue.java":[{"add":["32","import org.kohsuke.stapler.export.Exported;","33","import org.kohsuke.stapler.export.ExportedBean;","62","@ExportedBean","76","    @Exported(visibility=3)"],"delete":[]}]}},"9ac2257d0a3fa86928267a82d69d55c5a4e423c1":{"changes":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/BuildWatcher.java":"ADD","test\/src\/main\/java\/org\/jvnet\/hudson\/test\/JenkinsRule.java":"MODIFY"},"diff":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/BuildWatcher.java":[{"add":[],"delete":[]}],"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/JenkinsRule.java":[{"add":["1151","     * Waits for a build to complete.","1152","     * Useful in conjunction with {@link BuildWatcher}.","1153","     * @return the same build, once done","1154","     * @since 1.607","1155","     *\/","1156","    public <R extends Run<?,?>> R waitForCompletion(R r) throws InterruptedException {","1157","        \/\/ Could be using com.jayway.awaitility:awaitility but it seems like overkill here.","1158","        while (r.isBuilding()) {","1159","            Thread.sleep(100);","1160","        }","1161","        return r;","1162","    }","1163","","1164","    \/**","1165","     * Waits for a build log to contain a specified string.","1166","     * Useful in conjunction with {@link BuildWatcher}.","1167","     * @return the same build, once it does","1168","     * @since 1.607","1169","     *\/","1170","    public <R extends Run<?,?>> R waitForMessage(String message, R r) throws IOException, InterruptedException {","1171","        while (!getLog(r).contains(message)) {","1172","            Thread.sleep(100);","1173","        }","1174","        return r;","1175","    }","1176","","1177","    \/**"],"delete":[]}]}},"92b98ba43c2637276911b241c8223a91a2191385":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":[{"add":["1064","                        throw new IllegalStateException(\"Failed to parse arguments: pid=\"+pid+\", arg0=\"+args0+\", arguments=\"+arguments+\", nargs=\"+argc+\". Please run 'ps e \"+pid+\"' and report this to https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9634\",e);"],"delete":["1064","                        throw new IllegalStateException(\"Failed to parse arguments: arg0=\"+args0+\", arguments=\"+arguments+\", nargs=\"+argc,e);"]}]}},"287b9fbc290b78b0c22f18d560373ef82f51628d":{"changes":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/body.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_ja.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_pt_BR.properties":"ADD","core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_nl.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_es.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Canceled\/status.jelly":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_de.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Running\/status.jelly":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status.jelly":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_nl.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_pt_BR.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_sv_SE.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_ja.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_fr.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status.jelly":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_it.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_da.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_fr.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/body.jelly":"MODIFY","\/dev\/null":"DELETE","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_da.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_fi.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_ca.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_es.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_nb_NO.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/row.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_de.properties":"ADD"},"diff":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/body.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_ja.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_pt_BR.properties":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["294","        synchronized (jobs) {","295","            if (!isRestartScheduled()) {","296","                Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","297","                addJob(new RestartJenkinsJob(getCoreSource()));","298","                LOGGER.info(\"Scheduling Jenkins reboot\");","299","            }","300","        }","303","    ","304","    \/**","305","     * Cancel all scheduled jenkins restarts","306","     *\/","307","    public void doCancelRestart(StaplerResponse response) throws IOException, ServletException {","308","        synchronized (jobs) {","309","            for (UpdateCenterJob job : jobs) {","310","                if (job instanceof RestartJenkinsJob) {","311","                    if (((RestartJenkinsJob) job).cancel()) {","312","                        LOGGER.info(\"Scheduled Jenkins reboot unscheduled\");","313","                    }","314","                }","315","            }","316","        }","317","        response.sendRedirect2(\".\");","318","    }","319","    ","320","    \/**","321","     * Checks if restart is scheduled","322","     * ","323","     *\/","324","    public boolean isRestartScheduled() {","325","        for (UpdateCenterJob job : getJobs()) {","326","            if (job instanceof RestartJenkinsJob) {","327","                RestartJenkinsJob.RestartJenkinsJobStatus status = ((RestartJenkinsJob) job).status;","328","                if (status instanceof RestartJenkinsJob.Pending","329","                        || status instanceof RestartJenkinsJob.Running) {","330","                    return true;","331","                }","332","            }","333","        }","334","        return false;","335","    }","756","        \/**","757","         * Unique ID that identifies this job.","758","         *\/","759","        public final int id = iota.incrementAndGet();","760","               ","761","         \/**","762","         * Immutable state of this job.","763","         *\/","764","        public volatile RestartJenkinsJobStatus status = new Pending();","765","        ","766","        \/**","767","         * Cancel job","768","         *\/     ","769","        public synchronized boolean cancel() {","770","            if (status instanceof Pending) {","771","                status = new Canceled();","772","                return true;","773","            }","774","            return false;","775","        }","776","        ","781","        public synchronized void run() {","782","            if (!(status instanceof Pending)) {","783","                return;","784","            }","785","            status = new Running();","791","                status = new Failure();","794","        ","795","        public abstract class RestartJenkinsJobStatus {","796","            ","797","            public final int id = iota.incrementAndGet();","798","   ","799","        }","800","        ","801","        public class Pending extends RestartJenkinsJobStatus {","802","            ","803","        }","804","        ","805","        public class Running extends RestartJenkinsJobStatus {","806","            ","807","        }","808","        ","809","        public class Failure extends RestartJenkinsJobStatus {","810","            ","811","        }","812","        ","813","        public class Canceled extends RestartJenkinsJobStatus {","814","            ","815","        }"],"delete":["294","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","295","        addJob(new RestartJenkinsJob(getCoreSource()));","296","        LOGGER.info(\"Scheduling Jenkings reboot\");","723","        public void run() {"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_nl.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_es.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Canceled\/status.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_de.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Running\/status.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_nl.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_pt_BR.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_sv_SE.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_ja.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_fr.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/index.jelly":[{"add":["34","    <script><![CDATA[","35","      function submitScheduleForm(el) {","36","          var form = document.getElementById(\"scheduleRestart\");","37","          form.action = el.checked ? \"safeRestart\" : \"cancelRestart\";","38","          form.submit();","39","      }","40","    ]]><\/script>","58","                          var tcell = target.cells[1];","59","                          var scell = row.cells[1];","60","                          if(scell.id!=tcell.id) {","61","                            tcell.innerHTML = scell.innerHTML;","62","                            tcell.id = scell.id;","66","                      var scheduleDiv = document.getElementById('scheduleRestartBlock');","67","                      scheduleDiv.innerHTML = div.lastChild.innerHTML;"],"delete":["34","","35","    <form method=\"post\" action=\"safeRestart\">","36","      <p class=\"warning\">","37","        ${%warning}","38","        <j:if test=\"${app.lifecycle.canRestart()}\">","39","          <f:submit value=\"${%Schedule Restart}\" \/>","40","        <\/j:if>","41","      <\/p>","42","    <\/form>","43","","61","                          if (row.id != 'restart') {","62","                            var tcell = target.cells[1];","63","                            var scell = row.cells[1];","64","                            if(scell.id!=tcell.id) {","65","                              tcell.innerHTML = scell.innerHTML;","66","                              tcell.id = scell.id;","67","                            }"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_it.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_da.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_fr.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/body.jelly":[{"add":["31","    ","37","    ","38","    <div id=\"scheduleRestartBlock\">","39","      <form method=\"post\" id=\"scheduleRestart\" action=\"\">","40","        <p class=\"info\">","41","          <j:if test=\"${app.lifecycle.canRestart()}\">","42","            <j:if test=\"${app.isQuietingDown() or it.isRestartScheduled()}\">","43","              <input id=\"scheduleRestartCheckbox\" onchange=\"submitScheduleForm(this)\" type=\"checkbox\" checked=\"checked\" \/>","44","            <\/j:if>","45","            <j:if test=\"${!app.isQuietingDown() and !it.isRestartScheduled()}\">","46","              <input id=\"scheduleRestartCheckbox\" onchange=\"submitScheduleForm(this)\" type=\"checkbox\" \/>","47","            <\/j:if>","48","          <\/j:if>","49","          <label for=\"scheduleRestartCheckbox\">","50","            ${%warning}","51","          <\/label>","52","        <\/p>","53","      <\/form>","54","    <\/div>","56","<\/j:jelly>"],"delete":["37","<\/j:jelly>"]}],"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_da.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_fi.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_ca.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Failure\/status_es.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_nb_NO.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/row.jelly":[{"add":["26","  <tr id=\"row${it.id}\">","28","    <j:set var=\"status\" value=\"${it.status}\" \/>","29","    <td id=\"status${status.id}\">","30","      <st:include it=\"${status}\" page=\"status.jelly\" \/>"],"delete":["26","  <tr id=\"restart\">","28","    <td id=\"status\"><img src=\"${imagesURL}\/24x24\/refresh.png\" alt=\"\" \/>","29","    ${%Pending}"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/RestartJenkinsJob\/Pending\/status_de.properties":[{"add":[],"delete":[]}]}},"6e8b814140ded2b865d9c6233b81a43b424cd3ac":{"changes":{"core\/src\/main\/java\/hudson\/model\/ExternalJob.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ExternalJob.java":[{"add":["62","    \/\/ keep track of the previous time we started a build","63","    private transient long lastBuildStartTime;","64","","70","    public synchronized ExternalRun newBuild() throws IOException {","71","        \/\/ make sure we don't start two builds in the same second","72","        \/\/ so the build directories will be different too","73","        long timeSinceLast = System.currentTimeMillis() - lastBuildStartTime;","74","        if (timeSinceLast < 1000) {","75","            try {","76","                Thread.sleep(1000 - timeSinceLast);","77","            } catch (InterruptedException e) {","78","            }","79","        }","80","        lastBuildStartTime = System.currentTimeMillis();","81",""],"delete":["67","    public ExternalRun newBuild() throws IOException {"]}]}},"e3ea6bda5897fd67b177c501aaf6c8216123e4e9":{"changes":{"test\/pom.xml":"MODIFY","pom.xml":"MODIFY"},"diff":{"test\/pom.xml":[{"add":[],"delete":["35","  <packaging>stapler-jar<\/packaging>"]}],"pom.xml":[{"add":["308","          <version>1.16<\/version>"],"delete":["308","          <version>1.15<\/version>"]}]}},"1072f5c1372d2884beb07c9114b9b90ce0bf037e":{"changes":{"core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["650","                \/\/ make sure to always use the shorter of the available due times","651","                if (wi.timestamp.before(due))","652","                    continue;"],"delete":["650","                if (quietPeriod <= 0) {","651","                    \/\/ the user really wants to build now, and they mean NOW.","652","                    \/\/ so let's pull in the timestamp if we can.","653","                    if (wi.timestamp.before(due))","654","                        continue;","655","                } else {","656","                    \/\/ otherwise we do the normal quiet period implementation","657","                    if (wi.timestamp.after(due))","658","                        continue;","659","                    \/\/ quiet period timer reset. start the period over again","660","                }"]}]}},"fd7e6c69d1834df753b9126f3c909b50e18bfe5f":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["155","    public static final String PREDEFINED_UPDATE_SITE_ID = \"default\";","156","","162","    public static final String ID_DEFAULT = SystemProperties.getString(UpdateCenter.class.getName()+\".defaultUpdateSiteId\", PREDEFINED_UPDATE_SITE_ID);","877","    protected UpdateSite createDefaultUpdateSite() {"],"delete":["160","    public static final String ID_DEFAULT = SystemProperties.getString(UpdateCenter.class.getName()+\".defaultUpdateSiteId\", \"default\");","161","","162","    public static final String PREDEFINED_UPDATE_SITE_ID = \"default\";","877","    public UpdateSite createDefaultUpdateSite() {"]}]}},"06be93309edb0a6aac858168141f9fca4964ec17":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["182","        <version>2.62<\/version>"],"delete":["182","        <version>2.61<\/version>"]}]}},"d08eec18dcb2291da2d576e62dc128d00829858b":{"changes":{"core\/src\/main\/java\/hudson\/util\/RobustReflectionConverter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/RobustReflectionConverter.java":[{"add":["53","import java.util.concurrent.locks.ReadWriteLock;","54","import java.util.concurrent.locks.ReentrantReadWriteLock;","58","import javax.annotation.concurrent.GuardedBy;","80","    \/** There are typically few critical fields around, but we end up looking up in this map a lot.","81","        in addition, this map is really only written to during static initialization, so we should use","82","        reader writer lock to avoid locking as much as possible.  In addition, to avoid looking up","83","        the class name (which requires calling class.getName, which may not be cached, the map is inverted","84","        with the fields as the keys.**\/","85","    private final ReadWriteLock criticalFieldsLock = new ReentrantReadWriteLock();","86","    @GuardedBy(\"criticalFieldsLock\")","87","    private final Map<String, Set<String>> criticalFields = new HashMap<String, Set<String>>();","101","        \/\/ Lock the write lock","102","        criticalFieldsLock.writeLock().lock();","103","        try {","104","            \/\/ If the class already exists, then add a new field, otherwise","105","            \/\/ create the hash map field","106","            if (!criticalFields.containsKey(field)) {","107","                criticalFields.put(field, new HashSet<String>());","108","            }","109","            criticalFields.get(field).add(clazz.getName());","110","        }","111","        finally {","112","            \/\/ Unlock","113","            criticalFieldsLock.writeLock().unlock();","114","        }","115","    }","116","    ","117","    private boolean hasCriticalField(Class<?> clazz, String field) {","118","        \/\/ Lock the write lock","119","        criticalFieldsLock.readLock().lock();","120","        try {","121","            Set<String> classesWithField = criticalFields.get(field);","122","            if (classesWithField == null) {","123","                return false;","124","            }","125","            if (!classesWithField.contains(clazz.getName())) {","126","                return false;","127","            }","128","            return true;","129","        }","130","        finally {","131","            criticalFieldsLock.readLock().unlock();","132","        }","316","                    if (hasCriticalField(concrete, fieldName)) {"],"delete":["77","    private final Set<String> criticalFields = Collections.synchronizedSet(new HashSet<String>());","91","        criticalFields.add(clazz.getName() + '#' + field);","275","                    if (criticalFields.contains(concrete.getName() + '#' + fieldName)) {"]}]}},"ef958e41f8164a7355bbecaa522e5da38112cf0a":{"changes":{"core\/src\/main\/resources\/jenkins\/security\/Messages.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/install\/platform-plugins.json":"MODIFY","core\/src\/main\/java\/jenkins\/security\/QueueItemAuthenticatorMonitor.java":"ADD","core\/src\/main\/resources\/jenkins\/security\/QueueItemAuthenticatorMonitor\/message.groovy":"ADD","core\/src\/main\/resources\/jenkins\/security\/QueueItemAuthenticatorMonitor\/message.properties":"ADD"},"diff":{"core\/src\/main\/resources\/jenkins\/security\/Messages.properties":[{"add":["31","QueueItemAuthenticatorMonitor.DisplayName=Access Control for Builds"],"delete":[]}],"core\/src\/main\/resources\/jenkins\/install\/platform-plugins.json":[{"add":["90","            { \"name\": \"active-directory\" },","91","            { \"name\": \"authorize-project\" }"],"delete":["90","            { \"name\": \"active-directory\" }"]}],"core\/src\/main\/java\/jenkins\/security\/QueueItemAuthenticatorMonitor.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/security\/QueueItemAuthenticatorMonitor\/message.groovy":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/security\/QueueItemAuthenticatorMonitor\/message.properties":[{"add":[],"delete":[]}]}},"a3354b12cfc5f554487b59f35e5a0bdbce8861a6":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/matrix\/MatrixBuild.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/Maven3Builder.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Result.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/AbortedFreeStyleBuildTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuilder.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/Build.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["45","import hudson.model.Executor;","749","                        r = Executor.currentExecutor().abortResult();","774","                return Executor.currentExecutor().abortResult();"],"delete":["748","                        r = ABORTED;","773","                return Result.ABORTED;"]}],"core\/src\/main\/java\/hudson\/matrix\/MatrixBuild.java":[{"add":["308","                return Executor.currentExecutor().abortResult();"],"delete":["308","                return Result.ABORTED;"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/Maven3Builder.java":[{"add":["29","import hudson.model.Executor;","144","                    return Executor.currentExecutor().abortResult();"],"delete":["143","                    return Result.ABORTED;"]}],"core\/src\/main\/java\/hudson\/model\/Result.java":[{"add":["67","     *","68","     * If you are catching {@link InterruptedException} and interpreting it as {@link #ABORTED},","69","     * you should check {@link Executor#abortResult()} instead (starting 1.417.)"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/AbortedFreeStyleBuildTest.java":[{"add":["27","","28","    @Bug(9203)","29","    public void testInterruptAsFailure() throws Exception {","30","        FreeStyleProject project = createFreeStyleProject();","31","        TestBuildWrapper wrapper = new TestBuildWrapper();","32","        project.getBuildWrappersList().add(wrapper);","33","        project.getBuildersList().add(new TestBuilder() {","34","            @Override","35","            public boolean perform(AbstractBuild<?, ?> build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {","36","                Executor.currentExecutor().interrupt(Result.FAILURE);","37","                throw new InterruptedException();","38","            }","39","        });","40","        Run build = project.scheduleBuild2(0).get();","41","        assertEquals(Result.FAILURE, build.getResult());","42","        assertEquals(Result.FAILURE, wrapper.buildResultInTearDown);","43","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["1390","                    result = Executor.currentExecutor().abortResult();"],"delete":["1390","                    result = Result.ABORTED;"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuilder.java":[{"add":["31","import hudson.model.Executor;","181","                    return Executor.currentExecutor().abortResult();"],"delete":["180","                    return Result.ABORTED;"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Defined a proper way to interrupt the build and mark it as a failure.","59","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9203\">issue 9203<\/a>)"],"delete":["57","  <li class=>"]}],"core\/src\/main\/java\/hudson\/model\/Build.java":[{"add":["141","                r = Executor.currentExecutor().abortResult();"],"delete":["141","                r = ABORTED;"]}],"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["84","    \/**","85","     * When the executor is interrupted, we allow the code that interrupted the thread to override the","86","     * result code it prefers.","87","     *\/","88","    private Result interruptStatus;","89","","98","    public void interrupt() {","99","        interrupt(Result.ABORTED);","100","    }","101","","102","    \/**","103","     * Interrupt the execution,","104","     * but instead of marking the build as aborted, mark it as specified result.","105","     *","106","     * @since 1.417","107","     *\/","108","    public void interrupt(Result result) {","109","        interruptStatus = result;","110","        super.interrupt();","111","    }","112","","113","    public Result abortResult() {","114","        Result r = interruptStatus;","115","        if (r==null)    r = Result.ABORTED; \/\/ this is when we programmatically throw InterruptedException instead of calling the interrupt method.","116","        return r;","117","    }","118","","119","    @Override","129","                interruptStatus = null;"],"delete":[]}]}},"1a19fb69a14ca7805f16148e03fd291ce2b48c7f":{"changes":{"war\/src\/main\/webapp\/help\/system-config\/homeDirectory.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/homeDirectory_it.html":"MODIFY"},"diff":{"war\/src\/main\/webapp\/help\/system-config\/homeDirectory.html":[{"add":["1","  <p>By default, Jenkins stores all of its data in this directory on the file","2","    system.<\/p>"],"delete":["1","  By default, Jenkins stores all of its data in this directory on the file","2","  system.","3","  <br>","4","  Under the <i>Advanced<\/i> section, you can choose to store build workspaces","5","  and build records elsewhere."]}],"war\/src\/main\/webapp\/help\/system-config\/homeDirectory_it.html":[{"add":[],"delete":["4","  Nella sezione <i>Avanzate<\/i>  possibile scegliere di salvare gli spazi di","5","  lavoro e i registri delle compilazioni in un'altra posizione."]}]}},"ebd8ff1f0d85ee80650fe6730162975f00b81c63":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/configure.jelly":"MODIFY","core\/src\/main\/java\/hudson\/Functions.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/configure.jelly":[{"add":["55","      <j:forEach var=\"descriptor\" items=\"${h.getSortedDescriptorsForGlobalConfigUnclassified()}\">"],"delete":["55","      <j:forEach var=\"descriptor\" items=\"${h.getSortedDescriptorsForGlobalConfigNoSecurity()}\">"]}],"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["784","     * @since 1.494","810","    \/**","811","     * Like {@link #getSortedDescriptorsForGlobalConfig(Predicate)} but with a constant truth predicate, to include all descriptors.","812","     *\/","817","    \/**","818","     * @deprecated This is rather meaningless.","819","     *\/","820","    @Deprecated","824","","825","    \/**","826","     * Like {@link #getSortedDescriptorsForGlobalConfig(Predicate)} but for unclassified descriptors only.","827","     * @since 1.506","828","     *\/","829","    public static Collection<Descriptor> getSortedDescriptorsForGlobalConfigUnclassified() {","830","        return getSortedDescriptorsForGlobalConfig(new Predicate<GlobalConfigurationCategory>() {","831","            public boolean apply(GlobalConfigurationCategory cat) {","832","                return cat instanceof GlobalConfigurationCategory.Unclassified;","833","            }","834","        });","835","    }"],"delete":[]}],"changelog.html":[{"add":["57","  <li class='major bug'>","58","    Saving Global Jenkins Global Config wipes out the crumb issuer settings in the Global Security Config.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17087\">issue 17087<\/a>)"],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["96","import hudson.ExtensionPoint;","113","import hudson.WebAppMain;","251","import hudson.security.BasicAuthenticationFilter;","2707","            for (Descriptor<?> d : Functions.getSortedDescriptorsForGlobalConfigUnclassified())","2891","     * @throws Failure","2912","     * @return trimmed name if valid; throws Failure if not"],"delete":["2704","            for( Descriptor<?> d : Functions.getSortedDescriptorsForGlobalConfig() )","2888","     * @throws ParseException","2909","     * @return trimmed name if valid; throws ParseException if not"]}]}},"83e0fbf0a95f24b1669ead05f5e1c68e30ab8ddc":{"changes":{"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/wizard-ui.jelly":"MODIFY","war\/src\/test\/js\/pluginSetupWizard-spec.js":"MODIFY","war\/src\/main\/js\/pluginSetupWizardGui.js":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/wizard-ui.jelly":[{"add":["3","    <j:getStatic var=\"defaultUpdateSiteId\" className=\"hudson.model.UpdateCenter\" field=\"ID_DEFAULT\"\/>","4","    var defaultUpdateSiteId = '${defaultUpdateSiteId ? defaultUpdateSiteId.replace(\"'\", \"\") : \"default\"}';"],"delete":[]}],"war\/src\/test\/js\/pluginSetupWizard-spec.js":[{"add":["11","\/* globals defaultUpdateSiteId: true *\/","12","defaultUpdateSiteId = 'default';","13",""],"delete":[]}],"war\/src\/main\/js\/pluginSetupWizardGui.js":[{"add":["1032","\t\t\/\/ check for connectivity to the configured default update site","1033","\t\t\/* globals defaultUpdateSiteId: true *\/","1034","\t\tjenkins.testConnectivity(defaultUpdateSiteId, handleGenericError(function(isConnected, isFatal, errorMessage) {"],"delete":["1032","\t\t\/\/ check for connectivity","1033","\t\t\/\/TODO: make the Update Center ID configurable","1034","\t\tvar siteId = 'default';","1035","\t\tjenkins.testConnectivity(siteId, handleGenericError(function(isConnected, isFatal, errorMessage) {"]}]}},"7f67499141f325dff9fe1ea06331b2bcc0d03003":{"changes":{"core\/src\/test\/java\/hudson\/LauncherTest.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/LauncherTest.java":[{"add":["95","    @Bug(18368)","107","    @Bug(18368)"],"delete":[]}]}},"078c442cbeb2d316f5f6acdf0c3ca7d83fe89b84":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/jna\/Kernel32Utils.java":"MODIFY","core\/pom.xml":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":[{"add":["28","import com.sun.jna.Pointer;","1444","                    if (Pointer.SIZE == 8) {"],"delete":["1443","                    if (Native.POINTER_SIZE == 8) {"]}],"core\/src\/main\/java\/hudson\/util\/jna\/Kernel32Utils.java":[{"add":["117","            return new File(buf.getString(0, true));"],"delete":["117","            return new File(buf.getWideString(0));"]}],"core\/pom.xml":[{"add":["536","      <version>4.5.2<\/version>"],"delete":["536","      <version>5.3.1<\/version>"]}]}},"63529f0f3e7ef7d2422d6b2d52e02d03e9003820":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["44","    <stapler.version>1.181<\/stapler.version>"],"delete":["44","    <stapler.version>1.180<\/stapler.version>"]}],"changelog.html":[{"add":["58","    Fixed a temporary memory spike when dealing with rapidly growing large console output and interactive monitoring.","59","  <li class=bug>","60","    Fixed a file handle leak while serving static files.","61","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12674\">issue 12674<\/a>)","62","  <li class=bug>"],"delete":[]}]}},"8872b44cc8823c2106dfc5ba9a344fd1d82e4823":{"changes":{"core\/src\/main\/java\/hudson\/node_monitors\/ResponseTimeMonitor.java":"MODIFY","core\/src\/main\/java\/hudson\/node_monitors\/AbstractAsyncNodeMonitorDescriptor.java":"MODIFY","test\/src\/test\/java\/hudson\/node_monitors\/ResponseTimeMonitorTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/node_monitors\/ResponseTimeMonitor.java":[{"add":["48","","56","            Result<Data> base = monitorDetailed();","57","            Map<Computer, Data> monitoringData = base.getMonitoringData();","58","            for (Entry<Computer, Data> e : monitoringData.entrySet()) {","61","                if (base.getSkipped().contains(c)) {","62","                    assert d == null;","63","                    continue;","64","                }","65","","80","            return monitoringData;"],"delete":["50","            if (c.getChannel() == null) {","51","                return null;","52","            }","58","            Map<Computer, Data> base = super.monitor();","59","            for (Entry<Computer, Data> e : base.entrySet()) {","76","            return base;"]}],"core\/src\/main\/java\/hudson\/node_monitors\/AbstractAsyncNodeMonitorDescriptor.java":[{"add":["8","import javax.annotation.Nonnull;","10","import java.util.ArrayList;","11","import java.util.Collection;","13","import java.util.HashSet;","14","import java.util.List;","17","import java.util.Set;","68","     *","69","     * @return Mapping from computer to monitored value. The map values can be null for several reasons, see {@link Result}","70","     * for more details.","74","        \/\/ Bridge method to offer original constrained interface.","75","        return monitorDetailed().getMonitoringData();","76","    }","77","","78","    \/**","79","     * Perform monitoring with detailed reporting.","80","     *\/","81","    protected final @Nonnull Result<T> monitorDetailed() throws InterruptedException {","83","        Set<Computer> skipped = new HashSet<>();","121","            } else {","122","                skipped.add(c);","126","        return new Result<>(data, skipped);","130","","131","    \/**","132","     * Result object for {@link AbstractAsyncNodeMonitorDescriptor#monitorDetailed()} to facilitate extending information","133","     * returned in the future.","134","     *","135","     * The {@link #getMonitoringData()} provides the results of the monitoring as {@link #monitor()} does. Note the value","136","     * in the map can be <tt>null<\/tt> for several reasons:","137","     * <ul>","138","     *     <li>The monitoring {@link Callable} returned <tt>null<\/tt> as a provisioning result.<\/li>","139","     *     <li>Creating or evaluating that callable has thrown an exception.<\/li>","140","     *     <li>The computer was not monitored as it was offline.<\/li>","141","     *     <li>The {@link AbstractAsyncNodeMonitorDescriptor#createCallable} has returned null.<\/li>","142","     * <\/ul>","143","     *","144","     * Clients can distinguishing among these states based on the additional data attached to this object. {@link #getSkipped()}","145","     * returns computers that was not monitored as they ware either offline or monitor produced <tt>null<\/tt> {@link Callable}.","146","     *\/","147","    protected static final class Result<T> {","148","        private static final long serialVersionUID = -7671448355804481216L;","149","","150","        private final @Nonnull Map<Computer, T> data;","151","        private final @Nonnull ArrayList<Computer> skipped;","152","","153","        private Result(@Nonnull Map<Computer, T> data, @Nonnull Collection<Computer> skipped) {","154","            this.data = new HashMap<>(data);","155","            this.skipped = new ArrayList<>(skipped);","156","        }","157","","158","        protected @Nonnull Map<Computer, T> getMonitoringData() {","159","            return data;","160","        }","161","","162","        \/**","163","         * Computers that ware skipped during monitoring as they either do not have a a channel (offline) or the monitor","164","         * have not produced the Callable. Computers that caused monitor to throw exception are not returned here.","165","         *\/","166","        protected @Nonnull List<Computer> getSkipped() {","167","            return skipped;","168","        }","169","    }"],"delete":["106","        return data;"]}],"test\/src\/test\/java\/hudson\/node_monitors\/ResponseTimeMonitorTest.java":[{"add":["2","import hudson.model.Computer;","3","import hudson.model.ComputerSet;","4","import hudson.model.Node;","7","import hudson.slaves.JNLPLauncher;","9","import hudson.slaves.RetentionStrategy;","16","import java.util.Collections;","17","","18","import static org.junit.Assert.assertEquals;","55","    @Test","56","    public void doNotDisconnectBeforeLaunched() throws Exception {","57","        DumbSlave slave = new DumbSlave(\"dummy\", \"dummy\", j.createTmpDir().getPath(), \"1\", Node.Mode.NORMAL, \"\", new JNLPLauncher(), RetentionStrategy.NOOP, Collections.EMPTY_LIST);","58","        j.jenkins.addNode(slave);","59","        Computer c = slave.toComputer();","60","        assertNotNull(c);","61","        OfflineCause originalOfflineCause = c.getOfflineCause();","62","","63","        ResponseTimeMonitor rtm = ComputerSet.getMonitors().get(ResponseTimeMonitor.class);","64","        for (int i = 0; i < 10; i++) {","65","            rtm.triggerUpdate().join();","66","            System.out.println(rtm.getDescriptor().get(c));","67","            assertEquals(originalOfflineCause, c.getOfflineCause());","68","        }","69","    }"],"delete":[]}]}},"b6fbebe9ea2c5e25321663e85aeceb50da88ffb6":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["529","            URLConnection con;","530","            try {","531","                con = archive.openConnection();","532","                con.connect();","533","            } catch (IOException x) {","534","                if (this.exists()) {","535","                    \/\/ Cannot connect now, so assume whatever was last unpacked is still OK.","536","                    if (listener != null) {","537","                        listener.getLogger().println(\"Skipping installation of \" + archive + \" to \" + remote + \": \" + x);","538","                    }","539","                    return false;","540","                } else {","541","                    throw x;","544","            long sourceTimestamp = con.getLastModified();","545","            FilePath timestamp = this.child(\".timestamp\");","547","            if(this.exists()) {","548","                if(timestamp.exists() && sourceTimestamp ==timestamp.lastModified())","549","                    return false;   \/\/ already up to date","550","                this.deleteContents();","551","            } else {","552","                this.mkdirs();","553","            }","555","            if(listener!=null)","556","                listener.getLogger().println(message);","558","            \/\/ for HTTP downloads, enable automatic retry for added resilience","559","            InputStream in = archive.getProtocol().equals(\"http\") ? new RetryableHttpStream(archive) : con.getInputStream();","560","            CountingInputStream cis = new CountingInputStream(in);","561","            try {","562","                if(archive.toExternalForm().endsWith(\".zip\"))","563","                    unzipFrom(cis);","564","            else","565","                untarFrom(cis,GZIP);","566","            } catch (IOException e) {","567","                throw new IOException2(String.format(\"Failed to unpack %s (%d bytes read of total %d)\",","568","                        archive,cis.getByteCount(),con.getContentLength()),e);","569","            }","570","            timestamp.touch(sourceTimestamp);","571","            return true;","573","            throw new IOException2(\"Failed to install \"+archive+\" to \"+remote,e);"],"delete":["528","        URLConnection con;","530","            con = archive.openConnection();","531","            con.connect();","532","        } catch (IOException x) {","533","            if (this.exists()) {","534","                \/\/ Cannot connect now, so assume whatever was last unpacked is still OK.","535","                if (listener != null) {","536","                    listener.getLogger().println(\"Skipping installation of \" + archive + \" to \" + remote + \": \" + x);","538","                return false;","539","            } else {","540","                throw x;","542","        }","543","        long sourceTimestamp = con.getLastModified();","544","        FilePath timestamp = this.child(\".timestamp\");","546","        if(this.exists()) {","547","            if(timestamp.exists() && sourceTimestamp ==timestamp.lastModified())","548","                return false;   \/\/ already up to date","549","            this.deleteContents();","550","        } else {","551","            this.mkdirs();","552","        }","554","        if(listener!=null)","555","            listener.getLogger().println(message);","557","        \/\/ for HTTP downloads, enable automatic retry for added resilience","558","        InputStream in = archive.getProtocol().equals(\"http\") ? new RetryableHttpStream(archive) : con.getInputStream();","559","        CountingInputStream cis = new CountingInputStream(in);","560","        try {","561","            if(archive.toExternalForm().endsWith(\".zip\"))","562","                unzipFrom(cis);","563","        else","564","            untarFrom(cis,GZIP);","566","            throw new IOException2(String.format(\"Failed to unpack %s (%d bytes read of total %d)\",","567","                    archive,cis.getByteCount(),con.getContentLength()),e);","569","        timestamp.touch(sourceTimestamp);","570","        return true;"]}]}},"d5700f8832f91339d74b6496b35730693876fa55":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","changelog.html":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["1372","            var scrollPos = Math.max(scrollDiv.scrollTop, document.documentElement.scrollTop);","1373","            var diff = currentHeight - scrollPos - height;","1381","            var currentHeight = this.getCurrentHeight();","1382","            if(document.documentElement) document.documentElement.scrollTop = currentHeight","1383","            scrollDiv.scrollTop = currentHeight;"],"delete":["1372","            var diff = currentHeight - scrollDiv.scrollTop - height;","1380","            scrollDiv.scrollTop = this.getCurrentHeight();"]}],"changelog.html":[{"add":["63","  <li class=bug>","64","    \"Tailing\" the console of an active job broken in 1.434","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11307\">issue 11307<\/a>)"],"delete":[]}]}},"84d9244520b917629e82b762eb7b7548cf5f6b9f":{"changes":{"test\/src\/test\/resources\/hudson\/model\/ListViewTest\/addJobUsingAPI\/config.xml":"ADD","core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ListViewTest.java":"MODIFY"},"diff":{"test\/src\/test\/resources\/hudson\/model\/ListViewTest\/addJobUsingAPI\/config.xml":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["321","    private boolean needToAddToCurrentView(StaplerRequest req) throws ServletException {","322","        String json = req.getParameter(\"json\");","323","        if (json != null && json.length() > 0) {","324","            \/\/ Submitted via UI","325","            JSONObject form = req.getSubmittedForm();","326","            return form.has(\"addToCurrentView\") && form.getBoolean(\"addToCurrentView\");","327","        } else {","328","            \/\/ Submitted via API","329","            return true;","330","        }","331","    }","332","","340","                if (needToAddToCurrentView(req)) {"],"delete":["324","        JSONObject form = req.getSubmittedForm();","325","        boolean addToCurrentView = form.has(\"addToCurrentView\") && form.getBoolean(\"addToCurrentView\");","330","                if (addToCurrentView) {"]}],"test\/src\/test\/java\/hudson\/model\/ListViewTest.java":[{"add":["39","import java.io.InputStream;","44","import java.util.List;","45","","49","import static org.mockito.Mockito.mock;","50","import static org.mockito.Mockito.when;","52","import javax.servlet.ReadListener;","53","import javax.servlet.ServletInputStream;","54","","55","import org.apache.commons.io.IOUtils;","58","import org.junit.rules.TestName;","64","import org.kohsuke.stapler.StaplerRequest;","65","import org.kohsuke.stapler.StaplerResponse;","72","    @Rule public TestName testName = new TestName();","73","","241","","242","    @Issue(\"JENKINS-41128\")","243","    @Test public void addJobUsingAPI() throws Exception {","244","        ListView v = new ListView(\"view\", j.jenkins);","245","        j.jenkins.addView(v);","246","        StaplerRequest req = mock(StaplerRequest.class);","247","        StaplerResponse rsp = mock(StaplerResponse.class);","248","","249","        String configXml = IOUtils.toString(getClass().getResourceAsStream(String.format(\"%s\/%s\/config.xml\", getClass().getSimpleName(), testName.getMethodName())), \"UTF-8\");","250","","251","        when(req.getMethod()).thenReturn(\"POST\");","252","        when(req.getParameter(\"name\")).thenReturn(\"job1\");","253","        when(req.getInputStream()).thenReturn(new Stream(IOUtils.toInputStream(configXml)));","254","        when(req.getContentType()).thenReturn(\"application\/xml\");","255","        v.doCreateItem(req, rsp);","256","        List<TopLevelItem> items = v.getItems();","257","        assertEquals(1, items.size());","258","        assertEquals(\"job1\", items.get(0).getName());","259","    }","260","","277","    private static class Stream extends ServletInputStream {","278","        private final InputStream inner;","279","","280","        public Stream(final InputStream inner) {","281","            this.inner = inner;","282","        }","283","","284","        @Override","285","        public int read() throws IOException {","286","            return inner.read();","287","        }","288","        @Override","289","        public boolean isFinished() {","290","            throw new UnsupportedOperationException();","291","        }","292","        @Override","293","        public boolean isReady() {","294","            throw new UnsupportedOperationException();","295","        }","296","        @Override","297","        public void setReadListener(ReadListener readListener) {","298","            throw new UnsupportedOperationException();","299","        }","300","    }","301",""],"delete":[]}]}},"a72d2a0e51eff66c5f27d3ec5f0096d4a773c214":{"changes":{"core\/src\/main\/resources\/hudson\/model\/View\/newJob_fr.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/View\/newJob_fr.properties":[{"add":["22","NewJob=Nouveau {0}"],"delete":[]}]}},"82a594f49634734b2ab1d885f96f5d9682f4ddcd":{"changes":{"core\/src\/main\/resources\/hudson\/scm\/AbstractScmTagAction\/badge.jelly":"ADD","core\/src\/main\/java\/hudson\/scm\/AbstractScmTagAction.java":"MODIFY","core\/src\/main\/java\/hudson\/scm\/SubversionTagAction.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Run\/KeepLogBuildBadge\/badge.jelly":"MODIFY","core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/scm\/AbstractScmTagAction\/badge.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/scm\/AbstractScmTagAction.java":[{"add":["4","import hudson.model.BuildBadgeAction;","23","public abstract class AbstractScmTagAction extends TaskAction implements BuildBadgeAction {","46","    \/**","47","     * This message is shown as the tool tip of the build badge icon.","48","     *\/","49","    public String getTooltip() {","50","        return null;","51","    }","52","","53","    \/**","54","     * Returns true if the build is tagged already.","55","     *\/","56","    public abstract boolean isTagged();","57",""],"delete":["22","public abstract class AbstractScmTagAction extends TaskAction {"]}],"core\/src\/main\/java\/hudson\/scm\/SubversionTagAction.java":[{"add":["85","    @Override","93","    @Override","94","    public String getTooltip() {","95","        if(isTagged())  return \"Tagged\";","96","        else            return null;","97","    }","98",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Run\/KeepLogBuildBadge\/badge.jelly":[{"add":["1","  title=\"${it.tooltip}\""],"delete":["1","  title=\"${it.whyKeepLog}\""]}],"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":[{"add":["23","import hudson.security.Permission;","24","import hudson.util.ArgumentListBuilder;","25","import hudson.util.ByteBuffer;","26","import hudson.util.ForkOutputStream;","27","import hudson.util.FormFieldValidator;","28","import hudson.util.IOException2;","1246","        @Override","1247","        public String getTooltip() {","1248","            if(tagName!=null)   return \"Tag: \"+tagName;","1249","            else                return null;","1250","        }","1251","","1252","        @Override","1253","        public boolean isTagged() {","1254","            return tagName!=null;","1255","        }","1256",""],"delete":["8","import hudson.security.Permission;","24","import hudson.util.*;","31","import org.apache.maven.project.overlay.BuildOverlay;"]}]}},"6e662a6e18a9dcc11a5cf04776322e5ce4589b3f":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["421","      <version>1.3.1-hudson-7<\/version>"],"delete":["421","      <version>1.3.1-hudson-6<\/version>"]}]}},"951db7d589996fd6777a4468099b506e3828cb9c":{"changes":{"core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["908","        return cachedHostName;"],"delete":["907","","909","        return null;"]}]}},"75e356501813f878487c5aab392b545ccd1ddaf9":{"changes":{"core\/src\/main\/java\/hudson\/model\/ChoiceParameterDefinition.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ParameterDefinition.java":"MODIFY","core\/src\/test\/java\/hudson\/model\/ChoiceParameterDefinitionTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ChoiceParameterDefinition.java":[{"add":["15","import javax.annotation.CheckForNull;","40","    public ChoiceParameterDefinition(@Nonnull String name, @Nonnull String choices, String description) {","46","    public ChoiceParameterDefinition(@Nonnull String name, @Nonnull String[] choices, String description) {","52","    private ChoiceParameterDefinition(@Nonnull String name, @Nonnull List<String> choices, String defaultValue, String description) {","132","    @CheckForNull","134","        if (defaultValue == null) {","135","            if (choices.isEmpty()) {","136","                return null;","137","            }","138","            return new StringParameterValue(getName(), choices.get(0), getDescription());","139","        }","140","        return new StringParameterValue(getName(), defaultValue, getDescription());","195","}"],"delete":["39","    public ChoiceParameterDefinition(String name, String choices, String description) {","45","    public ChoiceParameterDefinition(String name, String[] choices, String description) {","51","    private ChoiceParameterDefinition(String name, List<String> choices, String defaultValue, String description) {","132","        return new StringParameterValue(getName(), defaultValue == null ? choices.get(0) : defaultValue, getDescription());","187","}"]}],"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["202","    @CheckForNull"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ParameterDefinition.java":[{"add":["36","import javax.annotation.Nonnull;","106","    public ParameterDefinition(@Nonnull String name) {","110","    public ParameterDefinition(@Nonnull String name, String description) {","111","        \/\/Checking as pipeline does not enforce annotations","112","        if (name == null) {","113","            throw new IllegalArgumentException(\"Parameter name must be non-null\");","114","        }","136","    @Nonnull","142","    @CheckForNull","151","    @CheckForNull","162","    @Nonnull"],"delete":["105","    public ParameterDefinition(String name) {","109","    public ParameterDefinition(String name, String description) {"]}],"core\/src\/test\/java\/hudson\/model\/ChoiceParameterDefinitionTest.java":[{"add":["4","import org.jvnet.hudson.test.Issue;","8","import static org.junit.Assert.assertNull;","28","","29","    @Test","30","    @Issue(\"JENKINS-60721\")","31","    public void testNullDefaultParameter() {","32","        ChoiceParameterDefinition param = new ChoiceParameterDefinition(\"name\", new String[0], null);","33","        assertNull(param.getDefaultParameterValue());","34","    }"],"delete":[]}]}},"4b7d780dfe0d60a378ce5f9262aed8baf6bac0aa":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/JavadocArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/JavadocArchiver.java":[{"add":["55","            \/\/ if the build has failed, then there's not much point in reporting an error","56","            \/\/ saying javadoc directory doesn't exist. We want the user to focus on the real error,","57","            \/\/ which is the build failure.","58","            if(build.getResult().isWorseOrEqualTo(Result.FAILURE) && !javadoc.exists())","59","                return true;","60",""],"delete":[]}]}},"aaecf7915d607f88caa9e111d07f48883efc53b7":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Cause\/UpstreamCause\/description.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Cause\/UpstreamCause\/description.jelly":[{"add":["25","    <!-- upstreamUrl added in 1.284, so handle missing value; also JENKINS-14816 (job\/build may have been deleted) -->","26","    <span><j:out value='${it.upstreamUrl!=null and","27","                            app.getItemByFullName(it.upstreamProject)!=null and","28","                            app.getItemByFullName(it.upstreamProject).getBuildByNumber(it.upstreamBuild)!=null ?","29","                          \"%started_by_project(it.upstreamProject,it.upstreamBuild.toString(),it.upstreamUrl,rootURL)\" :","30","                          it.shortDescription}'\/><\/span>"],"delete":["25","    <!-- upstreamUrl added in 1.284, so handle missing value -->","26","    <span><j:out value='${it.upstreamUrl!=null ? \"%started_by_project(it.upstreamProject,it.upstreamBuild.toString(),it.upstreamUrl,rootURL)\" : it.shortDescription}' \/><\/span>"]}],"changelog.html":[{"add":["58","    Avoid a 404 when navigating to upstream builds.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14816\">issue 14816<\/a>)","60","  <li class=bug>"],"delete":[]}]}},"52a64c19499b05ecd21b412492074643d3636d0c":{"changes":{"core\/src\/main\/java\/hudson\/Functions.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["333","    public static void adminCheck(StaplerRequest req, StaplerResponse rsp, Object required) throws IOException, ServletException {","334","        if(required!=null && !Hudson.adminCheck(req,rsp)) {"],"delete":["333","    public static void adminCheck(StaplerRequest req, StaplerResponse rsp,boolean required) throws IOException, ServletException {","334","        if(required && !Hudson.adminCheck(req,rsp)) {"]}]}},"e1c2c970c96fa30bb1f2724ec112f2b21f9814c5":{"changes":{"core\/src\/main\/resources\/hudson\/model\/MyViewsProperty\/config.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Descriptor.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/MyViewsProperty\/newView.jelly":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/resources\/hudson\/model\/ProxyView\/configure-entries.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/MyViewsProperty\/config.jelly":[{"add":["3","Copyright (c) 2004-2011, Sun Microsystems, Inc., Tom Huybrechts, Alan Harder","27","    <f:textbox field=\"primaryViewName\" checkUrl=\"'${rootURL}\/${h.jsStringEscape(instance.url)}viewExistsCheck?value='+encodeURIComponent(this.value)+'&amp;exists=true'\"\/>","29","<\/j:jelly>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Tom Huybrechts","27","    <f:textbox field=\"primaryViewName\" checkUrl=\"'${rootURL}\/${instance.url}\/viewExistsCheck?value='+encodeURIComponent(this.value)+'&amp;exists=true'\"\/>","29","<\/j:jelly>"]}],"core\/src\/main\/java\/hudson\/model\/Descriptor.java":[{"add":["3"," * Copyright (c) 2004-2011, Sun Microsystems, Inc., Kohsuke Kawaguchi","30","import static hudson.Functions.jsStringEscape;","318","        return '\\'' + jsStringEscape(getCurrentDescriptorByNameUrl()) + \"\/'+\" + method;","329","        return '\\'' + getDescriptorUrl() + \"\/check\" + capitalizedFieldName + '\\'' + buildParameterList(method, new StringBuilder()).append(\".toString()\");"],"delete":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi","26","import hudson.ExtensionComponent;","31","import static hudson.Util.singleQuote;","319","        return singleQuote(getCurrentDescriptorByNameUrl()+'\/')+'+'+method;","330","        return singleQuote(getDescriptorUrl() +\"\/check\"+capitalizedFieldName) + buildParameterList(method, new StringBuilder()).append(\".toString()\");"]}],"core\/src\/main\/resources\/hudson\/model\/MyViewsProperty\/newView.jelly":[{"add":["3","Copyright (c) 2004-2011, Sun Microsystems, Inc., Kohsuke Kawaguchi,","4","id:cactusman, Yahoo! Inc., Tom Huybrechts, Alan Harder","37","          <f:textbox id=\"name\" name=\"name\" checkUrl=\"'${rootURL}\/${h.jsStringEscape(it.url)}viewExistsCheck?value='+encodeURIComponent(this.value)+'&amp;exists=false'\""],"delete":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman, Yahoo! Inc., Tom Huybrechts","36","          <f:textbox id=\"name\" name=\"name\" checkUrl=\"'${rootURL}\/${it.url}\/viewExistsCheck?value='+encodeURIComponent(this.value)+'&amp;exists=false'\""]}],"changelog.html":[{"add":["75","  <li class=bug>","76","    Fix javascript errors on config pages when view name or user name contains an apostrophe.","77","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-8789\">issue 8789<\/a>)"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/ProxyView\/configure-entries.jelly":[{"add":["38","            checkUrl=\"'${rootURL}\/${h.jsStringEscape(it.url)}viewExistsCheck?value='+encodeURIComponent(this.value)\" \/>"],"delete":["38","            checkUrl=\"'${rootURL}\/${it.url}\/viewExistsCheck?value='+encodeURIComponent(this.value)\" \/>"]}]}},"6d3ed4c1f43848e377d8da99c3b18201925e55e1":{"changes":{"core\/src\/main\/java\/hudson\/model\/Project.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Project.java":[{"add":["203","            for (BuildStep step : getBuildersList()) {","208","            for (BuildStep step : getPublishersList()) {","213","            for (BuildWrapper step : getBuildWrappers().values()) {","218","            for (Trigger trigger : getTriggers().values()) {"],"delete":["203","            for (BuildStep step : builders) {","208","            for (BuildStep step : publishers) {","213","            for (BuildWrapper step : buildWrappers) {","218","            for (Trigger trigger : triggers) {"]}]}},"b89b44816311b933be56b1452820ea71b7127b22":{"changes":{"core\/src\/main\/java\/hudson\/model\/queue\/CauseOfBlockage.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/queue\/CauseOfBlockage.java":[{"add":["94","            return Messages.Queue_NodeOffline(node.toComputer().getDisplayName());","130","            return Messages.Queue_WaitingForNextAvailableExecutorOn(node.toComputer().getDisplayName());"],"delete":["94","            return Messages.Queue_NodeOffline(node.getDisplayName());","130","            return Messages.Queue_WaitingForNextAvailableExecutorOn(node.getNodeName());"]}]}},"471566ddfa4e2bf9aa5ba0685020a6d233b5b010":{"changes":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":[{"add":["41","import org.acegisecurity.AuthenticationException;","311","            } catch (AuthenticationException e) {","312","                \/\/ other seemingly unexpected error.","313","                return FormValidation.error(e,\"Failed to test the validity of the user name \"+v);","326","            } catch (AuthenticationException e) {","327","                \/\/ other seemingly unexpected error.","328","                return FormValidation.error(e,\"Failed to test the validity of the group name \"+v);","339","","340","    private static final Logger LOGGER = Logger.getLogger(GlobalMatrixAuthorizationStrategy.class.getName());"],"delete":[]}]}},"f46aceaf676aa7d243bec0d7f9004130756f473a":{"changes":{"core\/src\/main\/java\/hudson\/matrix\/MatrixConfiguration.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/matrix\/MatrixConfiguration.java":[{"add":["239","    public DescribableList<BuildWrapper, Descriptor<BuildWrapper>> getBuildWrappersList() {","240","        return getParent().getBuildWrappersList();","241","    }","242","","243","    @Override"],"delete":[]}]}},"37e9b61ab55f14cab44401bf65f666069ac63842":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/BuildAuthorizationToken\/config.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["3"," * Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi,","4"," * Jean-Baptiste Quenot, Seiji Sogabe, Tom Huybrechts","148","                owner, owner.getDelay(req), new ParametersAction(values), owner.getBuildCause(req));"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Jean-Baptiste Quenot, Seiji Sogabe, Tom Huybrechts","147","                owner, owner.getDelay(req), new ParametersAction(values), new CauseAction(new Cause.UserCause()));"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["1395","        if (!isBuildable())","1396","            throw HttpResponses.error(SC_INTERNAL_SERVER_ERROR,new IOException(getFullName()+\" is not buildable\"));","1397","","1398","        Hudson.getInstance().getQueue().schedule(this, getDelay(req), getBuildCause(req));","1399","        rsp.forwardToPreviousPage(req);","1400","    }","1401","","1402","    \/**","1403","     * Computes the build cause, using RemoteCause or UserCause as appropriate.","1404","     *\/","1405","    \/*package*\/ CauseAction getBuildCause(StaplerRequest req) {","1414","        return new CauseAction(cause);"],"delete":["1403","","1404","        if (!isBuildable())","1405","            throw HttpResponses.error(SC_INTERNAL_SERVER_ERROR,new IOException(getFullName()+\" is not buildable\"));","1406","","1407","        Hudson.getInstance().getQueue().schedule(this, getDelay(req), new CauseAction(cause));","1408","        rsp.forwardToPreviousPage(req);"]}],"core\/src\/main\/resources\/hudson\/model\/BuildAuthorizationToken\/config.jelly":[{"add":["3","Copyright (c) 2004-2010, Sun Microsystems, Inc., Kohsuke Kawaguchi,","4","Eric Lefevre-Ardant, Seiji Sogabe","39","        ${%or}","40","        \/buildWithParameters?token=<tt>TOKEN_NAME<\/tt>","41","        <br\/>","42","        ${%Optionally append &lt;tt>&amp;cause=Cause+Text&lt;\/tt> to provide text that will be included in the recorded build cause.}"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Eric Lefevre-Ardant, Seiji Sogabe","38","        <br>${%Optionally append &lt;tt>&amp;cause=Cause+Text&lt;\/tt> to provide text that will be included in the recorded build cause.}<\/br>"]}]}},"36306c2f91840aa8eedcab4eae265e7799fdad12":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/summary.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/summary.jelly":[{"add":["7","  <j:if test=\"${attrs.icon}\">","8","    <tr>","9","      <td>","10","        <a href=\"${attrs.href}\">","11","          <img src=\"${rootURL}\/images\/48x48\/${icon}\" width=\"48\" height=\"48\" style=\"margin-right:1em\" \/>","12","        <\/a>","13","      <\/td>","14","      <td style=\"vertical-align:middle\">","15","        <a href=\"${h.ifThenElse(attrs.iconOnly==null,attrs.href,null)}\">","16","          <d:invokeBody \/>","17","        <\/a>","18","      <\/td>","19","    <\/tr>","20","  <\/j:if>"],"delete":["7","\t<tr>","8","\t  <td>","9","      <a href=\"${attrs.href}\">","10","        <img src=\"${rootURL}\/images\/48x48\/${icon}\" width=\"48\" height=\"48\" style=\"margin-right:1em\" \/>","11","      <\/a>","12","    <\/td>","13","\t  <td style=\"vertical-align:middle\">","14","      <a href=\"${h.ifThenElse(attrs.iconOnly==null,attrs.href,null)}\">","15","        <d:invokeBody \/>","16","      <\/a>","17","    <\/td>","18","\t<\/tr>"]}]}},"a1714c1690a1ddf387d87fee0869024c599a95fe":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/util\/jna\/RegistryKey.java":"MODIFY"},"diff":{"changelog.html":[{"add":["75","  <li class=bug>","76","    Fixed a bug in Windows registry enumeration with large data.","77","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11767\">issue 11767<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/util\/jna\/RegistryKey.java":[{"add":["261","                break;","262","            "],"delete":[]}]}},"0adf979c4a3fa630de98da8eedbc6988567a13b7":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractItem\/noWorkspace.jelly":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/model\/ProjectTest.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractItem\/noWorkspace.jelly":[{"add":["27","  <st:statusCode value=\"404\"\/>"],"delete":[]}],"changelog.html":[{"add":["57","  <li class=rfe>","58","    Missing workspace page should use 404 status code.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10450\">issue 10450<\/a>)"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/ProjectTest.java":[{"add":["90","import org.jvnet.hudson.test.Issue;","205","","206","    @Issue(\"JENKINS-10450\")","207","    @Test public void workspaceBrowsing() throws Exception {","208","        FreeStyleProject p = j.createFreeStyleProject(\"project\");","209","        p.getBuildersList().add(new Shell(\"echo ahoj > some.log\"));","210","        j.buildAndAssertSuccess(p);","211","        JenkinsRule.WebClient wc = j.createWebClient();","212","        wc.goTo(\"job\/project\/ws\/some.log\", \"text\/plain\");","213","        wc.assertFails(\"job\/project\/ws\/other.log\", 404);","214","        p.doDoWipeOutWorkspace();","215","        wc.assertFails(\"job\/project\/ws\/some.log\", 404);","216","    }"],"delete":[]}]}},"5b5040298f5fbf9d5ff7ea7fbfd34f7169e94d75":{"changes":{"test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/CLITest.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/config.jelly":"MODIFY","cli\/src\/main\/java\/hudson\/cli\/PlainCLIProtocol.java":"MODIFY","pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/JNLPLauncher.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/slave-agent.jnlp.jelly":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/DefaultJnlpSlaveReceiver.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Slave.java":"MODIFY","core\/src\/main\/resources\/hudson\/cli\/CLIAction\/example.jelly":"MODIFY","cli\/pom.xml":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/JnlpAgentReceiver.java":"MODIFY","cli\/src\/main\/java\/hudson\/cli\/CLI.java":"MODIFY","core\/src\/main\/java\/hudson\/triggers\/SafeTimerTask.java":"MODIFY","test\/src\/test\/java\/hudson\/slaves\/JNLPLauncherTest.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/systemInfo.jelly":"MODIFY","cli\/src\/main\/resources\/hudson\/cli\/client\/Messages.properties":"MODIFY","core\/src\/main\/java\/jenkins\/websocket\/WebSocketEcho.java":"ADD","test\/src\/test\/java\/jenkins\/agents\/WebSocketAgentsTest.java":"ADD","cli\/src\/test\/java\/hudson\/cli\/PlainCLIProtocolTest.java":"MODIFY","core\/src\/main\/resources\/hudson\/TcpSlaveAgentListener\/index.jelly":"MODIFY","core\/src\/main\/java\/jenkins\/websocket\/WebSocketSession.java":"ADD","core\/src\/main\/java\/jenkins\/agents\/WebSocketAgents.java":"ADD","core\/src\/main\/java\/hudson\/cli\/CLIAction.java":"MODIFY","test\/pom.xml":"MODIFY","core\/src\/main\/java\/jenkins\/websocket\/WebSockets.java":"ADD","core\/src\/main\/java\/hudson\/cli\/CLICommand.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/help-webSocket.html":"ADD","war\/pom.xml":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/main.jelly":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":[{"add":["96","        List<String> commands = Lists.newArrayList(\"java\", \"-jar\", jar.getAbsolutePath(), \"-s\", j.getURL().toString(), \/* TODO until it is the default *\/ \"-webSocket\");","135","                \"-webSocket\", \/\/ TODO as above","136","                \"-s\", j.getURL().toString().\/* just checking *\/replaceFirst(\"\/$\", \"\"), \"test-diagnostic\").","154","            \"java\", \"-jar\", jar.getAbsolutePath(), \"-s\", j.getURL().toString(),","155","                \"-webSocket\", \/\/ TODO as above","156","                \"groovysh\")."],"delete":["22","import java.util.concurrent.ExecutorService;","55","    private ExecutorService pool;","56","","89","        \/\/ If we have anonymous read access, then the situation is simpler.","100","        List<String> commands = Lists.newArrayList(\"java\", \"-jar\", jar.getAbsolutePath(), \"-s\", j.getURL().toString(), \/* not covering SSH keys in this test *\/ \"-noKeyAuth\");","139","                \"-s\", j.getURL().toString().\/* just checking *\/replaceFirst(\"\/$\", \"\"), \"-noKeyAuth\", \"test-diagnostic\").","157","            \"java\", \"-jar\", jar.getAbsolutePath(), \"-s\", j.getURL().toString(), \"-noKeyAuth\", \"groovysh\").","166","        Thread.sleep(31_000); \/\/ aggravate org.eclipse.jetty.io.IdleTimeout (cf. AbstractConnector._idleTimeout)"]}],"test\/src\/test\/java\/hudson\/cli\/CLITest.java":[{"add":["159","        doInterrupt(p, \"-webSocket\", \"-auth\", \"admin:admin\");","194","        \/\/ TODO -webSocket currently produces a stack trace","248","        for (String transport: Arrays.asList(\"-http\", \"-ssh\", \"-webSocket\")) {"],"delete":["246","        for (String transport: Arrays.asList(\"-http\", \"-ssh\")) {"]}],"core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/config.jelly":[{"add":["30","  <f:entry field=\"webSocket\">","31","    <f:checkbox title=\"${%Use WebSocket}\"\/>","32","  <\/f:entry>"],"delete":[]}],"cli\/src\/main\/java\/hudson\/cli\/PlainCLIProtocol.java":[{"add":["39","import org.apache.commons.io.input.BoundedInputStream;","79","    interface Output extends Closeable {","80","        void send(byte[] data) throws IOException;","81","    }","83","    static final class FramedOutput implements Output {","85","        private final DataOutputStream dos;","86","","87","        FramedOutput(OutputStream os) {","91","        @Override","92","        public void send(byte[] data) throws IOException {","93","            dos.writeInt(data.length - 1); \/\/ not counting the opcode","94","            dos.write(data);","95","            dos.flush();","98","        @Override","99","        public void close() throws IOException {","100","            dos.close();","101","        }","103","    }","105","    static final class FramedReader extends Thread {","106","","107","        private final EitherSide side;","108","        private final CountingInputStream cis;","109","        private final FlightRecorderInputStream flightRecorder;","110","        private final DataInputStream dis;","111","","112","        FramedReader(EitherSide side, InputStream is) {","113","            super(\"PlainCLIProtocol\"); \/\/ TODO set distinctive Thread.name","114","            this.side = side;","115","            cis = new CountingInputStream(is);","116","            flightRecorder = new FlightRecorderInputStream(cis);","117","            dis = new DataInputStream(flightRecorder);","118","        }","119","","120","        @Override","121","        public void run() {","122","            try {","123","                while (true) {","124","                    LOGGER.finest(\"reading frame\");","125","                    int framelen;","126","                    try {","127","                        framelen = dis.readInt();","128","                    } catch (EOFException x) {","129","                        side.handleClose();","130","                        break; \/\/ TODO verify that we hit EOF immediately, not partway into framelen","131","                    }","132","                    if (framelen < 0) {","133","                        throw new IOException(\"corrupt stream: negative frame length\");","134","                    }","135","                    LOGGER.finest(\"read frame length \" + framelen);","136","                    long start = cis.getByteCount();","137","                    try {","138","                        side.handle(new DataInputStream(new BoundedInputStream(dis, \/* op byte not counted *\/framelen + 1)));","139","                    } catch (ProtocolException x) {","140","                        LOGGER.log(Level.WARNING, null, x);","141","                        \/\/ but read another frame","142","                    } finally {","143","                        long actuallyRead = cis.getByteCount() - start;","144","                        long unread = framelen + 1 - actuallyRead;","145","                        if (unread > 0) {","146","                            LOGGER.warning(() -> \"Did not read \" + unread + \" bytes\");","147","                            IOUtils.skipFully(dis, unread);","151","            } catch (ClosedChannelException x) {","152","                LOGGER.log(Level.FINE, null, x);","153","                side.handleClose();","154","            } catch (IOException x) {","155","                LOGGER.log(Level.WARNING, null, flightRecorder.analyzeCrash(x, \"broken stream\"));","156","            } catch (ReadPendingException x) {","157","                \/\/ in case trick in CLIAction does not work","158","                LOGGER.log(Level.FINE, null, x);","159","                side.handleClose();","160","            } catch (RuntimeException x) {","161","                LOGGER.log(Level.WARNING, null, x);","162","                side.handleClose();","164","        }","166","    }","167","","168","    private static final class ProtocolException extends IOException {","169","        ProtocolException(String message) {","170","            super(message);","171","        }","172","    }","173","","174","    static abstract class EitherSide implements Closeable {","175","","176","        private final Output out;","177","","178","        protected EitherSide(Output out) {","179","            this.out = out;","184","        final void handle(DataInputStream dis) throws IOException {","185","            byte b = dis.readByte();","186","            if (b < 0) { \/\/ i.e., >127","187","                throw new IOException(\"corrupt stream: negative operation code\");","188","            }","189","            if (b >= Op.values().length) {","190","                throw new ProtocolException(\"unknown operation #\" + b);","191","            }","192","            Op op = Op.values()[b];","193","            LOGGER.finest(() -> \"handling frame with \" + op);","194","            if (!handle(op, dis)) {","195","                throw new ProtocolException(\"unhandled: \" + op);","196","            }","199","        protected abstract boolean handle(Op op, DataInputStream dis) throws IOException;","200","","202","            send(op, new byte[0], 0, 0);","205","        protected final synchronized void send(Op op, int v) throws IOException {","206","            ByteArrayOutputStream baos = new ByteArrayOutputStream(4);","207","            new DataOutputStream(baos).writeInt(v);","208","            send(op, baos.toByteArray());","212","            byte[] data = new byte[len + 1];","213","            data[0] = (byte) op.ordinal();","214","            System.arraycopy(chunk, off, data, 1, len);","215","            out.send(data);","247","            out.close();","254","        ServerSide(Output out) {","255","            super(out);","259","        protected final boolean handle(Op op, DataInputStream dis) throws IOException {","275","                onStdin(IOUtils.toByteArray(dis));","313","        ClientSide(Output out) {","314","            super(out);","318","        protected boolean handle(Op op, DataInputStream dis) throws IOException {","325","                onStdout(IOUtils.toByteArray(dis));","328","                onStderr(IOUtils.toByteArray(dis));","337","        \/\/ TODO more efficient to change signature to InputStream, then use IOUtils.copy"],"delete":["78","    static abstract class EitherSide implements Closeable {","80","        private final CountingInputStream cis;","81","        private final FlightRecorderInputStream flightRecorder;","82","        final DataInputStream dis;","83","        final DataOutputStream dos;","85","        protected EitherSide(InputStream is, OutputStream os) {","86","            cis = new CountingInputStream(is);","87","            flightRecorder = new FlightRecorderInputStream(cis);","88","            dis = new DataInputStream(flightRecorder);","92","        final void begin() {","93","            new Reader().start();","96","        private class Reader extends Thread {","98","            Reader() {","99","                super(\"PlainCLIProtocol\"); \/\/ TODO set distinctive Thread.name","100","            }","102","            @Override","103","            public void run() {","104","                try {","105","                    while (true) {","106","                        LOGGER.finest(\"reading frame\");","107","                        int framelen;","108","                        try {","109","                            framelen = dis.readInt();","110","                        } catch (EOFException x) {","111","                            handleClose();","112","                            break; \/\/ TODO verify that we hit EOF immediately, not partway into framelen","113","                        }","114","                        if (framelen < 0) {","115","                            throw new IOException(\"corrupt stream: negative frame length\");","116","                        }","117","                        byte b = dis.readByte();","118","                        if (b < 0) { \/\/ i.e., >127","119","                            throw new IOException(\"corrupt stream: negative operation code\");","120","                        }","121","                        if (b >= Op.values().length) {","122","                            LOGGER.log(Level.WARNING, \"unknown operation #{0}: {1}\", new Object[] {b, HexDump.toHex(flightRecorder.getRecord())});","123","                            IOUtils.skipFully(dis, framelen);","124","                            continue;","125","                        }","126","                        Op op = Op.values()[b];","127","                        long start = cis.getByteCount();","128","                        LOGGER.log(Level.FINEST, \"handling frame with {0} of length {1}\", new Object[] {op, framelen});","129","                        boolean handled = handle(op, framelen);","130","                        if (handled) {","131","                            long actuallyRead = cis.getByteCount() - start;","132","                            if (actuallyRead != framelen) {","133","                                throw new IOException(\"corrupt stream: expected to read \" + framelen + \" bytes from \" + op + \" but read \" + actuallyRead);","134","                            }","135","                        } else {","136","                            LOGGER.log(Level.WARNING, \"unexpected {0}: {1}\", new Object[] {op, HexDump.toHex(flightRecorder.getRecord())});","137","                            IOUtils.skipFully(dis, framelen);","140","                } catch (ClosedChannelException x) {","141","                    LOGGER.log(Level.FINE, null, x);","142","                    handleClose();","143","                } catch (IOException x) {","144","                    LOGGER.log(Level.WARNING, null, flightRecorder.analyzeCrash(x, \"broken stream\"));","145","                } catch (ReadPendingException x) {","146","                    \/\/ in case trick in CLIAction does not work","147","                    LOGGER.log(Level.FINE, null, x);","148","                    handleClose();","149","                } catch (RuntimeException x) {","150","                    LOGGER.log(Level.WARNING, null, x);","151","                    handleClose();","159","        protected abstract boolean handle(Op op, int framelen) throws IOException;","160","","161","        private void writeOp(Op op) throws IOException {","162","            dos.writeByte((byte) op.ordinal());","166","            dos.writeInt(0);","167","            writeOp(op);","168","            dos.flush();","171","        protected final synchronized void send(Op op, int number) throws IOException {","172","            dos.writeInt(4);","173","            writeOp(op);","174","            dos.writeInt(number);","175","            dos.flush();","179","            dos.writeInt(len);","180","            writeOp(op);","181","            dos.write(chunk, off, len);","182","            dos.flush();","195","        protected final byte[] readChunk(int framelen) throws IOException {","196","            assert Thread.currentThread() instanceof EitherSide.Reader;","197","            byte[] buf = new byte[framelen];","198","            dis.readFully(buf);","199","            return buf;","200","        }","201","","221","            dos.close();","228","        ServerSide(InputStream is, OutputStream os) {","229","            super(is, os);","233","        protected final boolean handle(Op op, int framelen) throws IOException {","234","            assert Thread.currentThread() instanceof EitherSide.Reader;","250","                onStdin(readChunk(framelen));","288","        ClientSide(InputStream is, OutputStream os) {","289","            super(is, os);","293","        protected boolean handle(Op op, int framelen) throws IOException {","294","            assert Thread.currentThread() instanceof EitherSide.Reader;","301","                onStdout(readChunk(framelen));","304","                onStderr(readChunk(framelen));"]}],"pom.xml":[{"add":["103","    <remoting.version>4.0<\/remoting.version>"],"delete":["103","    <remoting.version>3.40<\/remoting.version>"]}],"core\/src\/main\/java\/hudson\/slaves\/JNLPLauncher.java":[{"add":["30","import hudson.util.FormValidation;","37","import jenkins.websocket.WebSockets;","43","import org.kohsuke.stapler.QueryParameter;","76","    private boolean webSocket;","77","","149","    \/**","150","     * @since TODO","151","     *\/","152","    public boolean isWebSocket() {","153","        return webSocket;","154","    }","155","","156","    \/**","157","     * @since TODO","158","     *\/","159","    @DataBoundSetter","160","    public void setWebSocket(boolean webSocket) {","161","        this.webSocket = webSocket;","162","    }","163","","218","        public FormValidation doCheckWebSocket(@QueryParameter boolean webSocket, @QueryParameter String tunnel) {","219","            if (webSocket) {","220","                if (!WebSockets.isSupported()) {","221","                    return FormValidation.error(\"WebSocket support is not enabled in this Jenkins installation\");","222","                }","223","                if (Util.fixEmptyAndTrim(tunnel) != null) {","224","                    return FormValidation.error(\"Tunneling is not supported in WebSocket mode\");","225","                }","226","            } else {","227","                if (Jenkins.get().getTcpSlaveAgentListener() == null) {","228","                    return FormValidation.error(\"Either WebSocket mode is selected, or the TCP port for inbound agents must be enabled\");","229","                }","230","            }","231","            return FormValidation.ok();"],"delete":["29","import hudson.model.DescriptorVisibilityFilter;","198","    }","200","    \/**","201","     * Hides the JNLP launcher when the JNLP agent port is not enabled.","202","     *","203","     * @since 2.16","204","     *\/","205","    @Extension","206","    public static class DescriptorVisibilityFilterImpl extends DescriptorVisibilityFilter {","207","","208","        @Override","209","        public boolean filter(@CheckForNull Object context, @Nonnull Descriptor descriptor) {","210","            return descriptor.clazz != JNLPLauncher.class || Jenkins.get().getTcpSlaveAgentListener() != null;","213","        @Override","214","        public boolean filterType(@Nonnull Class<?> contextClass, @Nonnull Descriptor descriptor) {","215","            return descriptor.clazz != JNLPLauncher.class || Jenkins.get().getTcpSlaveAgentListener() != null;","216","        }"]}],"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/slave-agent.jnlp.jelly":[{"add":["65","        <j:if test=\"${launcher.webSocket}\">","66","          <argument>-webSocket<\/argument>","67","        <\/j:if>"],"delete":[]}],"core\/src\/main\/java\/jenkins\/slaves\/DefaultJnlpSlaveReceiver.java":[{"add":["115","                            new Object[]{clientName, event.getRemoteEndpointDescription(), computer.getLauncher().getClass()});","151","        logw.println(\"Inbound agent connected from \" + event.getRemoteEndpointDescription());"],"delete":["115","                            new Object[]{clientName, event.getSocket().getRemoteSocketAddress(), computer.getLauncher().getClass()});","151","        logw.println(\"Inbound agent connected from \" + event.getSocket().getInetAddress());"]}],"core\/src\/main\/java\/hudson\/model\/Slave.java":[{"add":["409","","410","            Class<?> owner = null;","412","                owner = CLI.class;","414","                owner = hudson.remoting.Launcher.class;","415","            }","416","            if (owner != null) {","417","                File jar = Which.jarFile(owner);","418","                if (jar.isFile()) {","419","                    name = \"lib\/\" + jar.getName();","421","                    URL res = findExecutableJar(jar, owner);"],"delete":["409","            ","411","                File cliJar = Which.jarFile(CLI.class);","412","                if (cliJar.isFile()) {","413","                    name = \"jenkins-cli.jar\";","414","                } else {","415","                    URL res = findExecutableJar(cliJar, CLI.class);","416","                    if (res != null) {","417","                        return res;","418","                    }","419","                }","421","                File remotingJar = Which.jarFile(hudson.remoting.Launcher.class);","422","                if (remotingJar.isFile()) {","423","                    name = \"lib\/\" + remotingJar.getName();","425","                    URL res = findExecutableJar(remotingJar, hudson.remoting.Launcher.class);"]}],"core\/src\/main\/resources\/hudson\/cli\/CLIAction\/example.jelly":[{"add":["36","  <pre id=\"example\">java -jar <a href=\"${rootURL}\/jnlpJars\/jenkins-cli.jar\" style=\"color: white\">jenkins-cli.jar<\/a> -s ${h.inferHudsonURL(request)} <j:if test=\"${it.webSocketSupported}\">-webSocket<\/j:if> ${commandArgs}<\/pre>"],"delete":["36","  <pre id=\"example\">java -jar <a href=\"${rootURL}\/jnlpJars\/jenkins-cli.jar\" style=\"color: white\">jenkins-cli.jar<\/a> -s ${h.inferHudsonURL(request)} ${commandArgs}<\/pre>"]}],"cli\/pom.xml":[{"add":["55","        <scope>provided<\/scope>","60","      <optional>true<\/optional>","65","      <optional>true<\/optional>","76","      <optional>true<\/optional>","82","      <optional>true<\/optional>","84","    <!-- ed25519 algorithm, see JENKINS-45318 -->","85","    <dependency>","86","      <groupId>net.i2p.crypto<\/groupId>","87","      <artifactId>eddsa<\/artifactId>","88","      <version>0.3.0<\/version>","89","      <optional>true<\/optional>","90","    <\/dependency>","94","      <optional>true<\/optional>","95","    <\/dependency>","96","    <dependency>","97","      <groupId>org.glassfish.tyrus.bundles<\/groupId>","98","      <artifactId>tyrus-standalone-client-jdk<\/artifactId>","99","      <version>1.12<\/version>","100","      <optional>true<\/optional>","105","      <scope>provided<\/scope>","110","      <optional>true<\/optional>","121","          <groupId>org.apache.maven.plugins<\/groupId>","122","          <artifactId>maven-shade-plugin<\/artifactId>","123","          <version>3.2.1<\/version>","124","          <executions>","125","              <execution>","126","                  <phase>package<\/phase>","127","                  <goals>","128","                      <goal>shade<\/goal>","129","                  <\/goals>","130","                  <configuration>","131","                      <createDependencyReducedPom>false<\/createDependencyReducedPom>","132","                      <relocations>","133","                          <relocation>","134","                              <pattern>javax.websocket<\/pattern>","135","                              <shadedPattern>io.jenkins.cli.shaded.javax.websocket<\/shadedPattern>","136","                          <\/relocation>","137","                          <relocation>","138","                              <pattern>org<\/pattern>","139","                              <shadedPattern>io.jenkins.cli.shaded.org<\/shadedPattern>","140","                          <\/relocation>","141","                          <relocation>","142","                              <pattern>net<\/pattern>","143","                              <shadedPattern>io.jenkins.cli.shaded.net<\/shadedPattern>","144","                          <\/relocation>","145","                      <\/relocations>","146","                      <transformers>","147","                          <transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\">","148","                              <mainClass>hudson.cli.CLI<\/mainClass>","149","                              <manifestEntries>","150","                                  <Jenkins-CLI-Version>${project.version}<\/Jenkins-CLI-Version>","151","                              <\/manifestEntries>","152","                          <\/transformer>","153","                          <transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"\/>","154","                      <\/transformers>","155","                  <\/configuration>","156","              <\/execution>","157","          <\/executions>"],"delete":["78","      <optional>true<\/optional> <!-- do not expose to core -->","80","\t<!-- ed25519 algorithm, see JENKINS-45318 -->","81","\t<dependency>","82","  \t  <groupId>net.i2p.crypto<\/groupId>","83","\t  <artifactId>eddsa<\/artifactId>","84","\t  <version>0.3.0<\/version>","85","\t<\/dependency>","89","      <optional>true<\/optional> <!-- ditto -->","94","      <optional>true<\/optional>","109","        <artifactId>maven-assembly-plugin<\/artifactId>","110","        <!-- version specified in grandparent pom -->","111","        <executions>","112","          <execution>","113","            <goals>","114","              <goal>single<\/goal>","115","            <\/goals>","116","            <phase>package<\/phase>","117","            <configuration>","118","              <descriptorRefs>","119","                <descriptorRef>jar-with-dependencies<\/descriptorRef>","120","              <\/descriptorRefs>","121","              <archive>","122","                <manifest>","123","                  <mainClass>hudson.cli.CLI<\/mainClass>","124","                <\/manifest>","125","                <manifestEntries>","126","                  <Jenkins-CLI-Version>${project.version}<\/Jenkins-CLI-Version>","127","                <\/manifestEntries>","128","              <\/archive>","129","            <\/configuration>","130","          <\/execution>","131","        <\/executions>"]}],"core\/src\/main\/java\/jenkins\/slaves\/JnlpAgentReceiver.java":[{"add":["9","import jenkins.agents.WebSocketAgents;","15"," * Receives incoming agents connecting through the likes of {@link JnlpSlaveAgentProtocol4} or {@link WebSocketAgents}."],"delete":["14"," * Receives incoming agents connecting through {@link JnlpSlaveAgentProtocol4}."]}],"cli\/src\/main\/java\/hudson\/cli\/CLI.java":[{"add":["26","import java.io.DataInputStream;","36","import java.net.URI;","39","import java.nio.ByteBuffer;","45","import java.util.Collections;","48","import java.util.Map;","54","import javax.websocket.ClientEndpointConfig;","55","import javax.websocket.Endpoint;","56","import javax.websocket.EndpointConfig;","57","import javax.websocket.Session;","60","import org.glassfish.tyrus.client.ClientManager;","61","import org.glassfish.tyrus.client.ClientProperties;","62","import org.glassfish.tyrus.container.jdk.client.JdkClientContainer;","105","    private enum Mode {HTTP, SSH, WEB_SOCKET}","115","        boolean noKeyAuth = false;","117","        \/\/ TODO perhaps allow mode to be defined by environment variable too (assuming $JENKINS_USER_ID can be used for -user)","152","            if (head.equals(\"-webSocket\")) {","153","                if (mode != null) {","154","                    printUsage(\"-webSocket clashes with previously defined mode \" + mode);","155","                    return -1;","156","                }","157","                mode = Mode.WEB_SOCKET;","158","                args = args.subList(1, args.size());","159","                continue;","160","            }","185","            \tnoKeyAuth = true;","269","            if (!noKeyAuth && !provider.hasKeys()) {","270","                provider.readFromDefaultLocations();","271","            }","279","        if (noKeyAuth) {","280","            LOGGER.warning(\"-noKeyAuth meaningful only with -ssh\");","281","        }","282","","299","        if (mode == Mode.WEB_SOCKET) {","300","            return webSocketConnection(url, args, factory);","301","        }","302","","306","    private static int webSocketConnection(String url, List<String> args, CLIConnectionFactory factory) throws Exception {","307","        LOGGER.fine(() -> \"Trying to connect to \" + url + \" via plain protocol over WebSocket\");","308","        class CLIEndpoint extends Endpoint {","309","            @Override","310","            public void onOpen(Session session, EndpointConfig config) {}","311","        }","312","        class Authenticator extends ClientEndpointConfig.Configurator {","313","            @Override","314","            public void beforeRequest(Map<String, List<String>> headers) {","315","                if (factory.authorization != null) {","316","                    headers.put(\"Authorization\", Collections.singletonList(factory.authorization));","317","                }","318","            }","319","        }","320","        ClientManager client = ClientManager.createClient(JdkClientContainer.class.getName()); \/\/ ~ ContainerProvider.getWebSocketContainer()","321","        client.getProperties().put(ClientProperties.REDIRECT_ENABLED, true); \/\/ https:\/\/tyrus-project.github.io\/documentation\/1.13.1\/index\/tyrus-proprietary-config.html#d0e1775","322","        Session session = client.connectToServer(new CLIEndpoint(), ClientEndpointConfig.Builder.create().configurator(new Authenticator()).build(), URI.create(url.replaceFirst(\"^http\", \"ws\") + \"cli\/ws\"));","323","        PlainCLIProtocol.Output out = new PlainCLIProtocol.Output() {","324","            @Override","325","            public void send(byte[] data) throws IOException {","326","                session.getBasicRemote().sendBinary(ByteBuffer.wrap(data));","327","            }","328","            @Override","329","            public void close() throws IOException {","330","                session.close();","331","            }","332","        };","333","        try (ClientSideImpl connection = new ClientSideImpl(out)) {","334","            session.addMessageHandler(InputStream.class, is -> {","335","                try {","336","                    connection.handle(new DataInputStream(is));","337","                } catch (IOException x) {","338","                    LOGGER.log(Level.WARNING, null, x);","339","                }","340","            });","341","            connection.start(args);","342","            return connection.exit();","343","        }","344","    }","345","","349","        try (final ClientSideImpl connection = new ClientSideImpl(new PlainCLIProtocol.FramedOutput(streams.getOutputStream()))) {","350","            connection.start(args);","351","            InputStream is = streams.getInputStream();","352","            if (is.read() != 0) { \/\/ cf. FullDuplexHttpService","353","                throw new IOException(\"expected to see initial zero byte; perhaps you are connecting to an old server which does not support -http?\");","355","            new PlainCLIProtocol.FramedReader(connection, is).start();","372","            return connection.exit();","376","    private static final class ClientSideImpl extends PlainCLIProtocol.ClientSide {","377","","378","        volatile boolean complete;","379","        private int exit = -1;","380","","381","        ClientSideImpl(PlainCLIProtocol.Output out) {","382","            super(out);","383","        }","384","","385","        void start(List<String> args) throws IOException {","386","            for (String arg : args) {","387","                sendArg(arg);","388","            }","389","            sendEncoding(Charset.defaultCharset().name());","390","            sendLocale(Locale.getDefault().toString());","391","            sendStart();","392","            new Thread(\"input reader\") {","393","                @Override","394","                public void run() {","395","                    try {","396","                        final OutputStream stdin = streamStdin();","397","                        int c;","398","                        \/\/ TODO check available to avoid sending lots of one-byte frames","399","                        while (!complete && (c = System.in.read()) != -1) {","400","                           stdin.write(c);","401","                        }","402","                        sendEndStdin();","403","                    } catch (IOException x) {","404","                        LOGGER.log(Level.WARNING, null, x);","405","                    }","406","                }","407","            }.start();","408","        }","409","","410","        @Override","411","        protected synchronized void onExit(int code) {","412","            this.exit = code;","413","            finished();","414","        }","415","","416","        @Override","417","        protected void onStdout(byte[] chunk) throws IOException {","418","            System.out.write(chunk);","419","        }","420","","421","        @Override","422","        protected void onStderr(byte[] chunk) throws IOException {","423","            System.err.write(chunk);","424","        }","425","","426","        @Override","427","        protected void handleClose() {","428","            finished();","429","        }","430","","431","        private synchronized void finished() {","432","            complete = true;","433","            notifyAll();","434","        }","435","","436","        synchronized int exit() throws InterruptedException {","437","            while (!complete) {","438","                wait();","439","            }","440","            return exit;","441","        }","442","","443","    }","444",""],"delete":["93","    private enum Mode {HTTP, SSH}","103","        boolean tryLoadPKey = true;","163","            \ttryLoadPKey = false;","231","        if (tryLoadPKey && !provider.hasKeys())","232","            provider.readFromDefaultLocations();","233","","279","        class ClientSideImpl extends PlainCLIProtocol.ClientSide {","280","            boolean complete;","281","            int exit = -1;","282","            ClientSideImpl(InputStream is, OutputStream os) throws IOException {","283","                super(is, os);","284","                if (is.read() != 0) { \/\/ cf. FullDuplexHttpService","285","                    throw new IOException(\"expected to see initial zero byte; perhaps you are connecting to an old server which does not support -http?\");","286","                }","288","            @Override","289","            protected void onExit(int code) {","290","                this.exit = code;","291","                finished();","292","            }","293","            @Override","294","            protected void onStdout(byte[] chunk) throws IOException {","295","                System.out.write(chunk);","296","            }","297","            @Override","298","            protected void onStderr(byte[] chunk) throws IOException {","299","                System.err.write(chunk);","300","            }","301","            @Override","302","            protected void handleClose() {","303","                finished();","304","            }","305","            private synchronized void finished() {","306","                complete = true;","307","                notifyAll();","308","            }","309","        }","310","        try (final ClientSideImpl connection = new ClientSideImpl(streams.getInputStream(), streams.getOutputStream())) {","311","            for (String arg : args) {","312","                connection.sendArg(arg);","313","            }","314","            connection.sendEncoding(Charset.defaultCharset().name());","315","            connection.sendLocale(Locale.getDefault().toString());","316","            connection.sendStart();","317","            connection.begin();","318","            new Thread(\"input reader\") {","319","                @Override","320","                public void run() {","321","                    try {","322","                        final OutputStream stdin = connection.streamStdin();","323","                        int c;","324","                        while (!connection.complete && (c = System.in.read()) != -1) {","325","                           stdin.write(c);","326","                        }","327","                        connection.sendEndStdin();","328","                    } catch (IOException x) {","329","                        LOGGER.log(Level.WARNING, null, x);","330","                    }","331","                }","332","            }.start();","349","            synchronized (connection) {","350","                while (!connection.complete) {","351","                    connection.wait();","352","                }","353","            }","354","            return connection.exit;"]}],"core\/src\/main\/java\/hudson\/triggers\/SafeTimerTask.java":[{"add":["53","     * Lambda-friendly means of creating a task.","54","     * @since TODO","55","     *\/","56","    public static SafeTimerTask of(ExceptionRunnable r) {","57","        return new SafeTimerTask() {","58","            @Override","59","            protected void doRun() throws Exception {","60","                r.run();","61","            }","62","        };","63","    }","64","    \/**","65","     * @see #of","66","     * @since TODO","67","     *\/","68","    @FunctionalInterface","69","    public interface ExceptionRunnable {","70","        void run() throws Exception;","71","    }","72","","73","    \/**"],"delete":[]}],"test\/src\/test\/java\/hudson\/slaves\/JNLPLauncherTest.java":[{"add":["58","import java.util.logging.Level;","62","import org.jvnet.hudson.test.LoggerRule;","73","    @Rule public TemporaryFolder tmpDir = new TemporaryFolder();","74","","75","    @Rule public LoggerRule logging = new LoggerRule().record(Slave.class, Level.FINE);"],"delete":["71","    @Rule public TemporaryFolder tmpDir = new TemporaryFolder(); "]}],"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/systemInfo.jelly":[{"add":["47","            <h2>${it.oSDescription} agent, version ${it.slaveVersion}<\/h2>"],"delete":["47","            <h2>${it.oSDescription} slave, version ${it.slaveVersion}<\/h2>"]}],"cli\/src\/main\/resources\/hudson\/cli\/client\/Messages.properties":[{"add":["5","  \\ -webSocket          : like -http but using WebSocket (works better with most reverse proxies)\\n\\"],"delete":[]}],"core\/src\/main\/java\/jenkins\/websocket\/WebSocketEcho.java":[{"add":[],"delete":[]}],"test\/src\/test\/java\/jenkins\/agents\/WebSocketAgentsTest.java":[{"add":[],"delete":[]}],"cli\/src\/test\/java\/hudson\/cli\/PlainCLIProtocolTest.java":[{"add":["29","import java.io.DataOutputStream;","47","                super(new PlainCLIProtocol.FramedOutput(upload));","68","                DataOutputStream dos = new DataOutputStream(upload);","79","                super(new PlainCLIProtocol.FramedOutput(download));","114","                DataOutputStream dos = new DataOutputStream(download);","122","        new PlainCLIProtocol.FramedReader(client, new PipedInputStream(download)).start();","123","        new PlainCLIProtocol.FramedReader(server, new PipedInputStream(upload)).start();"],"delete":["46","                super(new PipedInputStream(download), upload);","77","                super(new PipedInputStream(upload), download);","119","        client.begin();","120","        server.begin();"]}],"core\/src\/main\/resources\/hudson\/TcpSlaveAgentListener\/index.jelly":[{"add":["42","  <j:getStatic var=\"rmvh\" className=\"hudson.remoting.Engine\" field=\"REMOTING_MINIMUM_VERSION_HEADER\"\/>","43","  <st:header name=\"${rmvh}\" value=\"${app.tcpSlaveAgentListener.remotingMinimumVersion}\"\/>"],"delete":["42","  <st:header name=\"X-Remoting-Minimum-Version\" value=\"${app.tcpSlaveAgentListener.remotingMinimumVersion}\"\/>"]}],"core\/src\/main\/java\/jenkins\/websocket\/WebSocketSession.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/agents\/WebSocketAgents.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/CLIAction.java":[{"add":["45","import java.io.ByteArrayInputStream;","46","import java.io.DataInputStream;","52","import java.nio.ByteBuffer;","61","import jenkins.websocket.WebSocketSession;","62","import jenkins.websocket.WebSockets;","63","import org.acegisecurity.Authentication;","64","import org.kohsuke.stapler.HttpResponse;","108","    \/** for Jelly *\/","109","    public boolean isWebSocketSupported() {","110","        return WebSockets.isSupported();","111","    }","112","","113","    \/**","114","     * WebSocket endpoint.","115","     *\/","116","    public HttpResponse doWs() {","117","        if (!WebSockets.isSupported()) {","118","            return HttpResponses.notFound();","119","        }","120","        Authentication authentication = Jenkins.getAuthentication();","121","        return WebSockets.upgrade(new WebSocketSession() {","122","            ServerSideImpl connection;","123","            class OutputImpl implements PlainCLIProtocol.Output {","124","                @Override","125","                public void send(byte[] data) throws IOException {","126","                    sendBinary(ByteBuffer.wrap(data));","127","                }","128","                @Override","129","                public void close() throws IOException {","130","                    doClose();","131","                }","132","            }","133","            private void doClose() {","134","                close();","135","            }","136","            @Override","137","            protected void opened() {","138","                try {","139","                    connection = new ServerSideImpl(new OutputImpl(), authentication);","140","                } catch (IOException x) {","141","                    error(x);","142","                    return;","143","                }","144","                new Thread(() -> {","145","                    try {","146","                        try {","147","                            connection.run();","148","                        } finally {","149","                            connection.close();","150","                        }","151","                    } catch (Exception x) {","152","                        error(x);","153","                    }","154","                }, \"CLI handler for \" + authentication.getName()).start();","155","            }","156","            @Override","157","            protected void binary(byte[] payload, int offset, int len) {","158","                try {","159","                    connection.handle(new DataInputStream(new ByteArrayInputStream(payload, offset, len)));","160","                } catch (IOException x) {","161","                    error(x);","162","                }","163","            }","164","            @Override","165","            protected void error(Throwable cause) {","166","                LOGGER.log(Level.WARNING, null, cause);","167","            }","168","            @Override","169","            protected void closed(int statusCode, String reason) {","170","                LOGGER.fine(() -> \"closed: \" + statusCode + \": \" + reason);","171","                connection.handleClose();","172","            }","173","        });","174","    }","175","","192","    class ServerSideImpl extends PlainCLIProtocol.ServerSide {","193","        private Thread runningThread;","194","        private boolean ready;","195","        private final List<String> args = new ArrayList<>();","196","        private Locale locale = Locale.getDefault();","197","        private Charset encoding = Charset.defaultCharset();","198","        private final PipedInputStream stdin = new PipedInputStream();","199","        private final PipedOutputStream stdinMatch = new PipedOutputStream();","200","        private final Authentication authentication;","201","        ServerSideImpl(PlainCLIProtocol.Output out, Authentication authentication) throws IOException {","202","            super(out);","203","            stdinMatch.connect(stdin);","204","            this.authentication = authentication;","205","        }","206","        @Override","207","        protected void onArg(String text) {","208","            args.add(text);","209","        }","210","        @Override","211","        protected void onLocale(String text) {","212","            for (Locale _locale : Locale.getAvailableLocales()) {","213","                if (_locale.toString().equals(text)) {","214","                    locale = _locale;","215","                    return;","216","                }","217","            }","218","            LOGGER.log(Level.WARNING, \"unknown client locale {0}\", text);","219","        }","220","        @Override","221","        protected void onEncoding(String text) {","222","            try {","223","                encoding = Charset.forName(text);","224","            } catch (UnsupportedCharsetException x) {","225","                LOGGER.log(Level.WARNING, \"unknown client charset {0}\", text);","226","            }","227","        }","228","        @Override","229","        protected void onStart() {","230","            ready();","231","        }","232","        @Override","233","        protected void onStdin(byte[] chunk) throws IOException {","234","            stdinMatch.write(chunk);","235","        }","236","        @Override","237","        protected void onEndStdin() throws IOException {","238","            stdinMatch.close();","239","        }","240","        @Override","241","        protected void handleClose() {","242","            ready();","243","            if (runningThread != null) {","244","                runningThread.interrupt();","245","            }","246","        }","247","        private synchronized void ready() {","248","            ready = true;","249","            notifyAll();","250","        }","251","        void run() throws IOException, InterruptedException {","252","            synchronized (this) {","253","                while (!ready) {","254","                    wait();","255","                }","256","            }","257","            PrintStream stdout = new PrintStream(streamStdout(), false, encoding.name());","258","            PrintStream stderr = new PrintStream(streamStderr(), true, encoding.name());","259","            if (args.isEmpty()) {","260","                stderr.println(\"Connection closed before arguments received\");","261","                sendExit(2);","262","                return;","263","            }","264","            String commandName = args.get(0);","265","            CLICommand command = CLICommand.clone(commandName);","266","            if (command == null) {","267","                stderr.println(\"No such command \" + commandName);","268","                sendExit(2);","269","                return;","270","            }","271","            command.setTransportAuth(authentication);","272","            command.setClientCharset(encoding);","273","            CLICommand orig = CLICommand.setCurrent(command);","274","            try {","275","                runningThread = Thread.currentThread();","276","                int exit = command.main(args.subList(1, args.size()), locale, stdin, stdout, stderr);","277","                stdout.flush();","278","                sendExit(exit);","279","                try { \/\/ seems to avoid ReadPendingException from Jetty","280","                    Thread.sleep(1000);","281","                } catch (InterruptedException x) {","282","                    \/\/ expected; ignore","283","                }","284","            } finally {","285","                CLICommand.setCurrent(orig);","286","                runningThread = null;","287","            }","288","        }","289","    }","290","","305","                    try (ServerSideImpl connection = new ServerSideImpl(new PlainCLIProtocol.FramedOutput(download), Jenkins.getAuthentication())) {","306","                        new PlainCLIProtocol.FramedReader(connection, upload).start();","307","                        connection.run();"],"delete":["55","import java.util.concurrent.atomic.AtomicReference;","132","                    final AtomicReference<Thread> runningThread = new AtomicReference<>();","133","                    class ServerSideImpl extends PlainCLIProtocol.ServerSide {","134","                        boolean ready;","135","                        List<String> args = new ArrayList<>();","136","                        Locale locale = Locale.getDefault();","137","                        Charset encoding = Charset.defaultCharset();","138","                        final PipedInputStream stdin = new PipedInputStream();","139","                        final PipedOutputStream stdinMatch = new PipedOutputStream();","140","                        ServerSideImpl(InputStream is, OutputStream os) throws IOException {","141","                            super(is, os);","142","                            stdinMatch.connect(stdin);","143","                        }","144","                        @Override","145","                        protected void onArg(String text) {","146","                            args.add(text);","147","                        }","148","                        @Override","149","                        protected void onLocale(String text) {","150","                            for (Locale _locale : Locale.getAvailableLocales()) {","151","                                if (_locale.toString().equals(text)) {","152","                                    locale = _locale;","153","                                    return;","154","                                }","155","                            }","156","                            LOGGER.log(Level.WARNING, \"unknown client locale {0}\", text);","157","                        }","158","                        @Override","159","                        protected void onEncoding(String text) {","160","                            try {","161","                                encoding = Charset.forName(text);","162","                            } catch (UnsupportedCharsetException x) {","163","                                LOGGER.log(Level.WARNING, \"unknown client charset {0}\", text);","164","                            }","165","                        }","166","                        @Override","167","                        protected void onStart() {","168","                            ready();","169","                        }","170","                        @Override","171","                        protected void onStdin(byte[] chunk) throws IOException {","172","                            stdinMatch.write(chunk);","173","                        }","174","                        @Override","175","                        protected void onEndStdin() throws IOException {","176","                            stdinMatch.close();","177","                        }","178","                        @Override","179","                        protected void handleClose() {","180","                            ready();","181","                            Thread t = runningThread.get();","182","                            if (t != null) {","183","                                t.interrupt();","184","                            }","185","                        }","186","                        private synchronized void ready() {","187","                            ready = true;","188","                            notifyAll();","189","                        }","190","                    }","191","                    try (ServerSideImpl connection = new ServerSideImpl(upload, download)) {","192","                        connection.begin();","193","                        synchronized (connection) {","194","                            while (!connection.ready) {","195","                                connection.wait();","196","                            }","197","                        }","198","                        PrintStream stdout = new PrintStream(connection.streamStdout(), false, connection.encoding.name());","199","                        PrintStream stderr = new PrintStream(connection.streamStderr(), true, connection.encoding.name());","200","                        if (connection.args.isEmpty()) {","201","                            stderr.println(\"Connection closed before arguments received\");","202","                            connection.sendExit(2);","203","                            return;","204","                        }","205","                        String commandName = connection.args.get(0);","206","                        CLICommand command = CLICommand.clone(commandName);","207","                        if (command == null) {","208","                            stderr.println(\"No such command \" + commandName);","209","                            connection.sendExit(2);","210","                            return;","211","                        }","212","                        command.setTransportAuth(Jenkins.getAuthentication());","213","                        command.setClientCharset(connection.encoding);","214","                        CLICommand orig = CLICommand.setCurrent(command);","215","                        try {","216","                            runningThread.set(Thread.currentThread());","217","                            int exit = command.main(connection.args.subList(1, connection.args.size()), connection.locale, connection.stdin, stdout, stderr);","218","                            stdout.flush();","219","                            connection.sendExit(exit);","220","                            try { \/\/ seems to avoid ReadPendingException from Jetty","221","                                Thread.sleep(1000);","222","                            } catch (InterruptedException x) {","223","                                \/\/ expected; ignore","224","                            }","225","                        } finally {","226","                            CLICommand.setCurrent(orig);","227","                            runningThread.set(null);","228","                        }"]}],"test\/pom.xml":[{"add":["72","      <version>2.59<\/version>"],"delete":["72","      <version>2.58<\/version>"]}],"core\/src\/main\/java\/jenkins\/websocket\/WebSockets.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/CLICommand.java":[{"add":[],"delete":["246","            if (!(this instanceof HelpCommand || this instanceof WhoAmICommand))","247","                Jenkins.get().checkPermission(Jenkins.READ);"]}],"core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/help-webSocket.html":[{"add":[],"delete":[]}],"war\/pom.xml":[{"add":["101","      <version>5.6<\/version>"],"delete":["93","      <classifier>jar-with-dependencies<\/classifier>","95","      <scope>provided<\/scope>","103","      <version>5.4<\/version>","265","                  <groupId>${project.groupId}<\/groupId>","266","                  <artifactId>cli<\/artifactId>","267","                  <classifier>jar-with-dependencies<\/classifier>","268","                  <outputDirectory>${project.build.directory}\/${project.build.finalName}\/WEB-INF<\/outputDirectory>","269","                  <destFileName>jenkins-cli.jar<\/destFileName>","270","                <\/artifactItem>","271","                <artifactItem>"]}],"core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/main.jelly":[{"add":["27","    <j:when test=\"${!it.launcher.webSocket and app.slaveAgentPort == -1}\">"],"delete":["27","    <j:when test=\"${app.slaveAgentPort==-1}\">"]}]}},"1b6b8f10b6e9496d5606f77e4ed62e610ea17afb":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/security\/HudsonAuthenticationEntryPoint.java":"MODIFY"},"diff":{"changelog.html":[{"add":["45","  <li class=bug>","46","    Turn Off \"Show Friendly HTTP Error Messages\" Feature on the Server Side.","47","    (<a href=\"http:\/\/issues.hudson-ci.org\/browse\/HUDSON-8352\">issue 8352<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/security\/HudsonAuthenticationEntryPoint.java":[{"add":["93","            \/\/ Turn Off \"Show Friendly HTTP Error Messages\" Feature on the Server Side.","94","            \/\/ See http:\/\/support.microsoft.com\/kb\/294807","95","            for (int i=0; i < 10; i++)","96","                out.print(\"                              \");"],"delete":[]}]}},"e444f5bd8a376266c09871448b66b611e7f7070b":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/_ant\/AntTargetNote\/script.js":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/_ant\/AntTargetNote\/script.js":[{"add":["31","            if (document.all)","32","                e.innerHTML += '<a name=\"' + id + '\"\/>';  \/\/ IE8 loses \"name\" attr in appendChild","33","            else {","34","                var a = document.createElement(\"a\");","35","                a.setAttribute(\"name\",id);","36","                e.appendChild(a);","37","            }"],"delete":["31","            var a = document.createElement(\"a\");","32","            a.setAttribute(\"name\",id);","33","            e.appendChild(a);"]}]}},"22efbad9450fc95748e0bc3bee04ec49702d7ed2":{"changes":{"core\/src\/main\/java\/hudson\/util\/FileChannelWriter.java":"ADD","core\/src\/test\/java\/hudson\/util\/FileChannelWriterTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/util\/FileChannelWriter.java":[{"add":[],"delete":[]}],"core\/src\/test\/java\/hudson\/util\/FileChannelWriterTest.java":[{"add":[],"delete":[]}]}},"090c41119b719d68bb4a1eeab10e178f69e7f65f":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["200","  <li class=bug>","201","    Don't submit form on Apply after Save in new window on some browsers.","202","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-20245\">issue 20245<\/a>)"],"delete":["142","  <li class=bug>","143","    Don't submit form on Apply after Save in new window on some browsers.","144","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-20245\">issue 20245<\/a>)"]}]}},"3edae667b3955a561296a23122f86b35ec928a98":{"changes":{"core\/src\/main\/java\/hudson\/model\/queue\/FutureImpl.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/queue\/FutureImpl.java":[{"add":["86","    @Override","87","    public synchronized void setAsCancelled() {","88","        super.setAsCancelled();","89","        if (!start.isDone()) {","90","            start.setAsCancelled();","91","        }","92","    }","93",""],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["64","import java.util.concurrent.ScheduledThreadPoolExecutor;","582","","583","    public void testWaitForStartAndCancelBeforeStart() throws Exception {","584","        final OneShotEvent ev = new OneShotEvent();","585","        FreeStyleProject p = createFreeStyleProject();","586","","587","        QueueTaskFuture<FreeStyleBuild> f = p.scheduleBuild2(10);","588","        final Queue.Item item = Queue.getInstance().getItem(p);","589","        assertNotNull(item);","590","","591","        final ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(1);","592","        executor.schedule(new Runnable() {","593","            @Override","594","            public void run() {","595","                   try {","596","                       Queue.getInstance().doCancelItem(item.id);","597","                   } catch (IOException e) {","598","                       e.printStackTrace();","599","                   } catch (ServletException e) {","600","                       e.printStackTrace();","601","                   }","602","                }","603","            }, 2, TimeUnit.SECONDS);","604","","605","        try {","606","            f.waitForStart();","607","            fail(\"Expected an CancellationException to be thrown\");","608","        } catch (CancellationException e) {}","609","    }","610",""],"delete":[]}]}},"eae3e3d284cb41b4366f7fcd0d29fe104083d426":{"changes":{"changelog.html":"MODIFY","osx\/scripts\/postinstall-launchd-jenkins":"MODIFY","osx\/scripts\/postinstall-launchd":"MODIFY"},"diff":{"changelog.html":[{"add":["63","  <li class=\"bug\">","64","    Fix launching browser too early to http:\/\/localhost:8080 in OS X","65","    installer.","66","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12622\">issue 12622<\/a>)"],"delete":[]}],"osx\/scripts\/postinstall-launchd-jenkins":[{"add":["44","","45","# Wait for port 8080 to start accepting connections.","46","# But don't wait forever.","47","timeout=$(($(date +%s) + 60))","48","while [ $(date +%s) -lt $timeout ] && ! curl -s http:\/\/localhost:8080 >\/dev\/null; do","49","    sleep 1","50","done","51","","52","if [ $(date +%s) -ge $timeout ]; then","53","    echo \"Timed out waiting for Jenkins port 8080 to start listening!\"","54","    echo \"Either Jenkins did not load or this system is very slow.\"","55","fi"],"delete":[]}],"osx\/scripts\/postinstall-launchd":[{"add":["12","","13","# Wait for port 8080 to start accepting connections.","14","# But don't wait forever.","15","timeout=$(($(date +%s) + 60))","16","while [ $(date +%s) -lt $timeout ] && ! curl -s http:\/\/localhost:8080 >\/dev\/null; do","17","    sleep 1","18","done","19","","20","if [ $(date +%s) -ge $timeout ]; then","21","    echo \"Timed out waiting for Jenkins port 8080 to start listening!\"","22","    echo \"Either Jenkins did not load or this system is very slow.\"","23","fi"],"delete":[]}]}},"16d6429c58400b18350c42280ac541a6322ac8f3":{"changes":{"core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ComputerTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["4"," * Red Hat, Inc., Seiji Sogabe, Stephen Connolly, Thomas J. Black, Tom Huybrechts,","5"," * CloudBees, Inc., Christopher Simons","1387","        String proposedName = Util.fixEmptyAndTrim(req.getSubmittedForm().getString(\"name\"));","1388","        Jenkins.checkGoodName(proposedName);","1394","","1395","        if ((!proposedName.equals(nodeName))","1396","                && Jenkins.getActiveInstance().getNode(proposedName) != null) {","1397","            throw new FormException(Messages.ComputerSet_SlaveAlreadyExists(proposedName), \"name\");","1398","        }","1399",""],"delete":["4"," * Red Hat, Inc., Seiji Sogabe, Stephen Connolly, Thomas J. Black, Tom Huybrechts, CloudBees, Inc.","1386","        String name = Util.fixEmptyAndTrim(req.getSubmittedForm().getString(\"name\"));","1387","        Jenkins.checkGoodName(name);"]}],"test\/src\/test\/java\/hudson\/model\/ComputerTest.java":[{"add":["3"," * Copyright (c) 2015 Red Hat, Inc.; Christopher Simons","25","import static org.hamcrest.MatcherAssert.assertThat;","26","import static org.hamcrest.Matchers.containsString;","27","import static org.hamcrest.Matchers.equalTo;","30","import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;","31","import com.gargoylesoftware.htmlunit.html.HtmlForm;","32","import com.gargoylesoftware.htmlunit.html.HtmlPage;","33","","39","import org.junit.Before;","42","import org.jvnet.hudson.test.Issue;","44","import org.jvnet.hudson.test.JenkinsRule.WebClient;","64","","65","    \/**","66","     * Verify we can't rename a node over an existing node.","67","     *\/","68","    @Issue(\"JENKINS-31321\")","69","    @Test","70","    public void testProhibitRenameOverExistingNode() throws Exception {","71","        final String NOTE = \"Rename node to name of another node should fail.\";","72","","73","        Node nodeA = j.createSlave(\"nodeA\", null, null);","74","        Node nodeB = j.createSlave(\"nodeB\", null, null);","75","","76","        WebClient wc = j.createWebClient();","77","        HtmlForm form = wc.getPage(nodeB, \"configure\").getFormByName(\"config\");","78","        form.getInputByName(\"_.name\").setValueAttribute(\"nodeA\");","79","","80","        try {","81","            j.submit(form);","82","            fail(NOTE);","83","        } catch (FailingHttpStatusCodeException e) {","84","            assertThat(NOTE, e.getStatusCode(), equalTo(400));","85","            assertThat(NOTE, e.getResponse().getContentAsString(),","86","                    containsString(\"Slave called \u2018nodeA\u2019 already exists\"));","87","        }","88","    }"],"delete":["3"," * Copyright (c) 2015 Red Hat, Inc."]}]}},"236d2474a6951cf4987d0c24ea41c29d129a9604":{"changes":{"core\/src\/main\/resources\/hudson\/util\/IncompatibleVMDetected\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/util\/JenkinsReloadFailed\/index.groovy":"MODIFY","core\/src\/main\/resources\/hudson\/util\/IncompatibleAntVersionDetected\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/util\/NoHomeDir\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/util\/AWTProblem\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/util\/NoTempDir\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/util\/HudsonFailedToLoad\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/util\/IncompatibleServletVersionDetected\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/util\/InsufficientPermissionDetected\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/util\/IncompatibleVMDetected\/index.jelly":[{"add":["26","  <st:statusCode value=\"500\" \/>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/util\/JenkinsReloadFailed\/index.groovy":[{"add":["3","def st = namespace(\"jelly:stapler\")","4","","5","st.statusCode(value: 500)"],"delete":[]}],"core\/src\/main\/resources\/hudson\/util\/IncompatibleAntVersionDetected\/index.jelly":[{"add":["26","  <st:statusCode value=\"500\" \/>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/util\/NoHomeDir\/index.jelly":[{"add":["26","  <st:statusCode value=\"500\" \/>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/util\/AWTProblem\/index.jelly":[{"add":["26","  <st:statusCode value=\"500\" \/>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/util\/NoTempDir\/index.jelly":[{"add":["26","  <st:statusCode value=\"500\" \/>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/util\/HudsonFailedToLoad\/index.jelly":[{"add":["26","  <st:statusCode value=\"500\" \/>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/util\/IncompatibleServletVersionDetected\/index.jelly":[{"add":["26","  <st:statusCode value=\"500\" \/>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/util\/InsufficientPermissionDetected\/index.jelly":[{"add":["26","  <st:statusCode value=\"500\" \/>"],"delete":[]}]}},"448634c9772e9b69d6666736acc673d7a6d8f5a6":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["447","      <groupId>org.kohsuke<\/groupId>","449","      <version>1.5<\/version>"],"delete":["447","      <groupId>com.sun.akuma<\/groupId>","449","      <version>1.4<\/version>"]}],"changelog.html":[{"add":["58","    Jenkins self-restart causes process name to change from java to exe","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9206\">issue 9206<\/a>)","60","  <li class=bug>"],"delete":[]}],"war\/pom.xml":[{"add":["53","      <version>1.24<\/version>"],"delete":["53","      <version>1.20<\/version>"]}]}},"86319ad5393117a90d0674281d7e792148139de1":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/cli\/CliManagerImpl.java":"MODIFY","pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["68","    Closure execution after <tt>CLI.upgrade()<\/tt> should carry over the transport credential.","69","    <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10890\">issue 10890<\/a>","70","  <li class=\"bug\">"],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/CliManagerImpl.java":[{"add":["25","import hudson.remoting.CallableFilter;","28","import org.acegisecurity.Authentication;","29","import org.acegisecurity.context.SecurityContext;","30","import org.acegisecurity.context.SecurityContextHolder;","39","import java.util.concurrent.Callable;","49","    ","50","    private Authentication transportAuth;","51","","52","    \/**","53","     * Runs callable from this CLI client with the transport authentication credential.","54","     *\/","55","    private final CallableFilter authenticationFilter = new CallableFilter() {","56","        public <V> V call(Callable<V> callable) throws Exception {","57","            SecurityContext context = SecurityContextHolder.getContext();","58","            Authentication old = context.getAuthentication();","59","            if (transportAuth!=null)","60","                context.setAuthentication(transportAuth);","61","            try {","62","                return callable.call();","63","            } finally {","64","                context.setAuthentication(old);","65","            }","66","        }","67","    };","71","        channel.addLocalExecutionInterceptor(authenticationFilter);","89","                transportAuth = Channel.current().getProperty(CLICommand.TRANSPORT_AUTHENTICATION);","90","                cmd.setTransportAuth(transportAuth);"],"delete":["64","                cmd.setTransportAuth(Channel.current().getProperty(CLICommand.TRANSPORT_AUTHENTICATION));"]}],"pom.xml":[{"add":["190","        <version>2.12<\/version>"],"delete":["190","        <version>2.11<\/version>"]}]}},"b497728418c48ed550fe7de76ae9ab6060f986d5":{"changes":{"test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/OneOffExecutor.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["28","import hudson.matrix.AxisList;","29","import hudson.matrix.MatrixBuild;","30","import hudson.matrix.MatrixProject;","31","import hudson.matrix.MatrixRun;","32","import hudson.matrix.TextAxis;","34","import hudson.tasks.Shell;","40","import net.sf.json.JSONObject;","45","import org.jvnet.hudson.test.Bug;","47","import org.jvnet.hudson.test.SleepBuilder;","49","import org.kohsuke.stapler.StaplerRequest;","61","import java.util.ArrayList;","240","","241","    @Bug(8790)","242","    public void testFlyweightTasks() throws Exception {","243","        MatrixProject m = createMatrixProject();","244","        m.addProperty(new ParametersDefinitionProperty(","245","                new StringParameterDefinition(\"FOO\",\"value\")","246","        ));","247","        m.getBuildersList().add(new Shell(\"sleep 3\"));","248","        m.setAxes(new AxisList(new TextAxis(\"DoesntMatter\", \"aaa\",\"bbb\")));","249","","250","        List<Future<MatrixBuild>> r = new ArrayList<Future<MatrixBuild>>();","251","","252","        for (int i=0; i<3; i++)","253","            r.add(m.scheduleBuild2(0,new LegacyCodeCause(),new ParametersAction(new StringParameterValue(\"FOO\",\"value\"+i))));","254","","255","        for (Future<MatrixBuild> f : r)","256","            assertBuildStatusSuccess(f);","257","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["758","        if (exec instanceof OneOffExecutor) {","759","            OneOffExecutor ooe = (OneOffExecutor) exec;","760","            final WorkUnit wu = ooe.getAssignedWorkUnit();","761","            pendings.remove(wu.context.item);","762","            return wu;","763","        }","764","","968","                pendings.add(p);"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/OneOffExecutor.java":[{"add":["50","    public WorkUnit getAssignedWorkUnit() {","51","        return work;","52","    }","53","","56","        WorkUnit r = super.grabJob();","57","        assert r==work;"],"delete":["52","        WorkUnit r = work;"]}]}},"af89f5e9097cb979de5d5c39aaa9d8976d314d9b":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"changelog.html":[{"add":["72","    Improved the remote API for queue","73","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10414\">issue 10414<\/a>)","74","  <li class=rfe>"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["1183","        @Exported"],"delete":[]}]}},"ef1ad6ca29c313fa0b4bc6f5dcd8344046221049":{"changes":{"maven-plugin\/pom.xml":"MODIFY","changelog.html":"MODIFY","pom.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"maven-plugin\/pom.xml":[{"add":["330","        <exclusion><!-- jcl-over-slf4j version needs to match with slf4j-api version, which makes this fragile. let's not try to intercept jcl calls -->"],"delete":["49","    <slf4jVersion>1.6.2<\/slf4jVersion> <!-- < 1.6.x version didn't specify the license (MIT) -->","57","  <dependencyManagement>","58","    <dependencies>","59","      <!-- SLF4J is used by wagon-webdav-jackrabbit dep --> ","60","      <dependency>","61","        <groupId>org.slf4j<\/groupId>","62","        <artifactId>slf4j-api<\/artifactId>","63","        <version>${slf4jVersion}<\/version>","64","      <\/dependency>","65","      <dependency>","66","        <groupId>org.slf4j<\/groupId>","67","        <artifactId>slf4j-nop<\/artifactId>","68","        <version>${slf4jVersion}<\/version>","69","      <\/dependency>","70","      <dependency>","71","        <groupId>org.slf4j<\/groupId>","72","        <artifactId>slf4j-jdk14<\/artifactId>","73","        <version>${slf4jVersion}<\/version>","74","      <\/dependency>","75","      <dependency>","76","        <groupId>org.slf4j<\/groupId>","77","        <artifactId>jcl-over-slf4j<\/artifactId>","78","        <version>${slf4jVersion}<\/version>","79","      <\/dependency>","80","    <\/dependencies>","81","  <\/dependencyManagement>","356","        <exclusion><!-- bundling binding creates a problem with app servers that use different versions of slf4j -->"]}],"changelog.html":[{"add":["68","    Bundled slf4j binding to avoid classloader contraint violation in JBoss","69","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12334\">issue 12334<\/a>,","70","     <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12446\">issue 12446<\/a>,","71","     <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12650\">issue 12650<\/a>)","72","  <li class=\"bug\">"],"delete":[]}],"pom.xml":[{"add":["91","    <slf4jVersion>1.6.2<\/slf4jVersion> <!-- < 1.6.x version didn't specify the license (MIT) -->","208","      <!-- SLF4J used in maven-plugin and core -->","209","      <dependency>","210","        <groupId>org.slf4j<\/groupId>","211","        <artifactId>slf4j-api<\/artifactId>","212","        <version>${slf4jVersion}<\/version>","213","      <\/dependency>","214","      <dependency>","215","        <groupId>org.slf4j<\/groupId>","216","        <artifactId>slf4j-nop<\/artifactId>","217","        <version>${slf4jVersion}<\/version>","218","      <\/dependency>","219","      <dependency>","220","        <groupId>org.slf4j<\/groupId>","221","        <artifactId>slf4j-jdk14<\/artifactId>","222","        <version>${slf4jVersion}<\/version>","223","      <\/dependency>","224","      <dependency>","225","        <groupId>org.slf4j<\/groupId>","226","        <artifactId>jcl-over-slf4j<\/artifactId>","227","        <version>${slf4jVersion}<\/version>","228","      <\/dependency>"],"delete":[]}],"war\/pom.xml":[{"add":["119","    <dependency>","120","      <!--","121","        We bundle slf4j binding since we got some components (sshd for example)","122","        that uses slf4j.","123","","124","        The problem with not shipping any binding in the war is that if the","125","        servlet container does use slf4j in itself, then we got a classloader","126","        constraint violation (see JENKINS-12334) as we try to load StaticLoggerBinder","127","        which resides in the binding jar (this jar would be from container implementation,","128","        which relies on slf4j api in the container, when we have our own slf4j API jar","129","        statically depending on the binding jar.)","130","","131","        We also get tickets like JENKINS-12650 for not reporting logs at all","132","        (although this is a non-fatal problem.)","133","","134","        The downside of adding a jar is that we can potentially get \"multiple binding jar\"","135","        warning like http:\/\/www.slf4j.org\/codes.html, but that's at least non-fatal.","136","      -->","137","      <groupId>org.slf4j<\/groupId>","138","      <artifactId>slf4j-jdk14<\/artifactId>","139","    <\/dependency>","140","","143","","144","    <!--dependency"],"delete":["121","    <!--dependency>"]}]}},"ce7300cdf672c58a9b4456f5f0bdc3288e152427":{"changes":{"core\/src\/main\/java\/hudson\/model\/DownloadService.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DownloadService.java":[{"add":["28","import hudson.util.IOException2;","34","import net.sf.json.JSONException;","39","import java.util.logging.Level;","211","                try {","212","                    return JSONObject.fromObject(df.read());","213","                } catch (JSONException e) {","214","                    df.delete(); \/\/ if we keep this file, it will cause repeated failures","215","                    throw new IOException2(\"Failed to parse \"+df+\" into JSON\",e);","216","                }"],"delete":["208","                return JSONObject.fromObject(df.read());"]}],"changelog.html":[{"add":["58","    Recover from a corrupted JSON update data file automatically","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7034\">issue 7034<\/a>)","60","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["38","import net.sf.json.JSONException;","267","            } catch (JSONException e) {","268","                LOGGER.log(Level.SEVERE,\"Failed to parse \"+df,e);","269","                df.delete(); \/\/ if we keep this file, it will cause repeated failures","270","                return null;"],"delete":[]}]}},"92d08fccff5600fb3a304a8c4e5caeb7d8b29570":{"changes":{"core\/src\/main\/java\/hudson\/scm\/browsers\/ViewSVN.java":"MODIFY","core\/src\/main\/resources\/hudson\/scm\/SubversionChangeLogSet\/index.jelly":"MODIFY","core\/src\/main\/java\/hudson\/scm\/browsers\/FishEyeSVN.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/browsers\/ViewSVN.java":[{"add":["8","import hudson.scm.EditType;","40","        if(path.getEditType()!= EditType.EDIT)","41","            return null;    \/\/ no diff if this is not an edit change"],"delete":[]}],"core\/src\/main\/resources\/hudson\/scm\/SubversionChangeLogSet\/index.jelly":[{"add":["33","            <j:set var=\"diff\" value=\"${browser.getDiffLink(p)}\"\/>","34","            <j:if test=\"${diff!=null}\">","36","              <a href=\"${diff}\">(diff)<\/a>"],"delete":["33","            <j:if test=\"${browser!=null}\">","35","              <a href=\"${browser.getDiffLink(p)}\">(diff)<\/a>"]}],"core\/src\/main\/java\/hudson\/scm\/browsers\/FishEyeSVN.java":[{"add":["8","import hudson.scm.EditType;","63","        if(path.getEditType()!= EditType.EDIT)","64","            return null;    \/\/ no diff if this is not an edit change"],"delete":[]}]}},"ef40dacd6cc91a331d8edf8bcb7d9a720d3b721d":{"changes":{"maven-agent\/src\/main\/java\/hudson\/maven\/agent\/Main.java":"MODIFY","maven-agent\/src\/main\/java\/hudson\/maven\/agent\/classworlds-2.0.6.conf":"ADD"},"diff":{"maven-agent\/src\/main\/java\/hudson\/maven\/agent\/Main.java":[{"add":["37","        boolean is206OrLater = !new File(m2Home,\"core\").exists();","38","","42","        launcher.configure(Main.class.getResourceAsStream(","43","            is206OrLater?\"classworlds-2.0.6.conf\":\"classworlds.conf\"));"],"delete":["40","        launcher.configure(Main.class.getResourceAsStream(\"classworlds.conf\"));"]}],"maven-agent\/src\/main\/java\/hudson\/maven\/agent\/classworlds-2.0.6.conf":[{"add":[],"delete":[]}]}},"dce35f31d8f1f29b00b468c0c6df27bd122d214f":{"changes":{"core\/src\/main\/java\/hudson\/model\/DownloadService.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/DownloadService.java":[{"add":["405","                    LOGGER.log(Level.FINE, \"Could not load json from \" + site, e );"],"delete":["405","                    LOGGER.log(Level.WARNING, \"Could not load json from \" + site, e );"]}]}},"673ef3e6cee0984252709c2bb7b3545a9a2ff734":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY","core\/src\/main\/resources\/lib\/layout\/layout.jelly":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["896","  border: 1px solid #DDD;","897","  border-radius: 4px;","898","  box-shadow: 0 0 5px #DDD inset;","899","  outline: none;"],"delete":["896","}","897","","898","#search-box.defaulted {","899","  color: gray;"]}],"core\/src\/main\/resources\/lib\/layout\/layout.jelly":[{"add":["172","                  <input name=\"q\" placeholder=\"${%search}\" id=\"search-box\" class=\"has-default-text\" \/>"],"delete":["172","                  <input name=\"q\" value=\"${%search}\" id=\"search-box\" class=\"has-default-text defaulted\" \/>"]}]}},"253b0c8be2a85b3fe8a27728f722a4171dbbcaaa":{"changes":{"core\/src\/main\/java\/jenkins\/security\/BasicHeaderProcessor.java":"MODIFY","test\/src\/test\/java\/jenkins\/security\/BasicHeaderProcessorTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/BasicHeaderProcessor.java":[{"add":["14","import org.apache.commons.lang.StringUtils;","63","        if (StringUtils.startsWithIgnoreCase(authorization,\"Basic \")) {"],"delete":["62","        if (authorization!=null && authorization.startsWith(\"Basic \")) {"]}],"test\/src\/test\/java\/jenkins\/security\/BasicHeaderProcessorTest.java":[{"add":["74","        makeRequestWithAuthCodeAndFail(encrypt(\"Basic\", userAndPass));","75","    }","76","    ","77","    private String encrypt(String prefix, String userAndPass) {","78","        if (userAndPass==null) {","79","            return null;","80","        }","81","        return prefix+\" \"+Scrambler.scramble(userAndPass);","82","    }","83","","84","    private void makeRequestWithAuthCodeAndFail(String authCode) throws IOException, SAXException {","86","            makeRequestWithAuthCodeAndVerify(authCode, \"-\");","94","        makeRequestWithAuthCodeAndVerify(encrypt(\"Basic\", userAndPass), username);","95","    }","96","","97","    private void makeRequestWithAuthCodeAndVerify(String authCode, String expected) throws IOException, SAXException {","100","        if (authCode!=null)","101","            req.setAdditionalHeader(\"Authorization\", authCode);","103","        assertEquals(expected, p.getWebResponse().getContentAsString().trim());","104","    }","106","    @Test","107","    public void testAuthHeaderCaseInSensitive() throws Exception {","108","        j.jenkins.setSecurityRealm(j.createDummySecurityRealm());","109","        User foo = User.get(\"foo\");","110","        wc = j.createWebClient();","111","","112","        String[] basicCandidates = {\"Basic\", \"BASIC\", \"basic\", \"bASIC\"};","113","        ","114","        for (String prefix : basicCandidates) {","115","            \/\/ call with API token","116","            ApiTokenProperty t = foo.getProperty(ApiTokenProperty.class);","117","            final String token = t.getApiToken();","118","            String authCode1 = encrypt(prefix,\"foo:\"+token);","119","            makeRequestWithAuthCodeAndVerify(authCode1, \"foo\");","120","            ","121","            \/\/ call with invalid API token","122","            String authCode2 = encrypt(prefix,\"foo:abcd\"+token);","123","            makeRequestWithAuthCodeAndFail(authCode2);","124","","125","            \/\/ call with password","126","            String authCode3 = encrypt(prefix,\"foo:foo\");","127","            makeRequestWithAuthCodeAndVerify(authCode3, \"foo\");","128","","129","            \/\/ call with incorrect password","130","            String authCode4 = encrypt(prefix,\"foo:bar\");","131","            makeRequestWithAuthCodeAndFail(authCode4);","132","        }"],"delete":["75","            makeRequestWithAuthAndVerify(userAndPass, \"-\");","85","        if (userAndPass!=null)","86","            req.setAdditionalHeader(\"Authorization\",\"Basic \"+Scrambler.scramble(userAndPass));","89","        assertEquals(username, p.getWebResponse().getContentAsString().trim());"]}]}},"6858e9340fc046b0d4538d84d404b0241be64f78":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["186","        if(this.channel!=null)\r","187","            throw new IllegalStateException(\"Already connected\");\r","189","        Channel channel = new Channel(nodeName,threadPoolForRemoting, Channel.Mode.NEGOTIATE,\r","190","            in,out, launchLog);\r","191","        channel.addListener(new Channel.Listener() {\r","192","            public void onClosed(Channel c,IOException cause) {\r","193","                SlaveComputer.this.channel = null;\r","195","        });\r","196","        channel.addListener(listener);\r","198","        PrintWriter log = new PrintWriter(launchLog,true);\r","200","        {\/\/ send jars that we need for our operations\r","201","            \/\/ TODO: maybe I should generalize this kind of \"post initialization\" processing\r","202","            FilePath dst = new FilePath(channel,getNode().getRemoteFS());\r","203","            new FilePath(Which.jarFile(Main.class)).copyTo(dst.child(\"maven-agent.jar\"));\r","204","            log.println(\"Copied maven-agent.jar\");\r","205","            new FilePath(Which.jarFile(PluginManagerInterceptor.class)).copyTo(dst.child(\"maven-interceptor.jar\"));\r","206","            log.println(\"Copied maven-interceptor.jar\");\r","207","        }\r","209","        Boolean _isUnix = channel.call(new DetectOS());\r","210","        log.println(_isUnix? hudson.model.Messages.Slave_UnixSlave():hudson.model.Messages.Slave_WindowsSlave());\r","211","\r","212","        \/\/ install log handler\r","213","        channel.call(new LogInstaller());\r","214","\r","215","        \/\/ update the data structure atomically to prevent others from seeing a channel that's not properly initialized yet\r","216","        synchronized(channelLock) {\r","217","            if(this.channel!=null) {\r","218","                \/\/ check again. we used to have this entire method in a big sycnhronization block,\r","219","                \/\/ but Channel constructor blocks for an external process to do the connection\r","220","                \/\/ if CommandLauncher is used, and that cannot be interrupted because it blocks at InputStream.\r","221","                \/\/ so if the process hangs, it hangs the thread in a lock, and since Hudson will try to relaunch,\r","222","                \/\/ we'll end up queuing the lot of threads in a pseudo deadlock.\r","223","                \/\/ This implementation prevents that by avoiding a lock. HUDSON-1705 is likely a manifestation of this.\r","224","                channel.close();\r","225","                throw new IllegalStateException(\"Already connected\");\r","226","            }\r","227","            isUnix = _isUnix;\r"],"delete":["186","        synchronized(channelLock) {\r","187","            if(this.channel!=null)\r","188","                throw new IllegalStateException(\"Already connected\");\r","190","            Channel channel = new Channel(nodeName,threadPoolForRemoting, Channel.Mode.NEGOTIATE,\r","191","                in,out, launchLog);\r","192","            channel.addListener(new Channel.Listener() {\r","193","                public void onClosed(Channel c,IOException cause) {\r","194","                    SlaveComputer.this.channel = null;\r","195","                }\r","196","            });\r","197","            channel.addListener(listener);\r","198","\r","199","            PrintWriter log = new PrintWriter(launchLog,true);\r","200","\r","201","            {\/\/ send jars that we need for our operations\r","202","                \/\/ TODO: maybe I should generalize this kind of \"post initialization\" processing\r","203","                FilePath dst = new FilePath(channel,getNode().getRemoteFS());\r","204","                new FilePath(Which.jarFile(Main.class)).copyTo(dst.child(\"maven-agent.jar\"));\r","205","                log.println(\"Copied maven-agent.jar\");\r","206","                new FilePath(Which.jarFile(PluginManagerInterceptor.class)).copyTo(dst.child(\"maven-interceptor.jar\"));\r","207","                log.println(\"Copied maven-interceptor.jar\");\r","210","            isUnix = channel.call(new DetectOS());\r","211","            log.println(isUnix? hudson.model.Messages.Slave_UnixSlave():hudson.model.Messages.Slave_WindowsSlave());\r","213","            \/\/ install log handler\r","214","            channel.call(new LogInstaller());\r","217","\r","218","            \/\/ prevent others from seeing a channel that's not properly initialized yet\r"]}]}},"2820e59202975ce8ad302e4a0b0e17c07e4c40cf":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Label\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Computer\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Label\/index.jelly":[{"add":["52","          <wbr\/>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Computer\/index.jelly":[{"add":["96","              <wbr\/>"],"delete":[]}]}},"311fe0a852ba938bbf390feff3255fe1885cf002":{"changes":{"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["115","                + \"Jenkins initial setup is required. An admin user has been created and \""],"delete":["115","                + \"Jenkins initial setup is required. An admin user has been created and\""]}]}},"11458c956e64673d99a9dc2c05cfd5f9533b4e1b":{"changes":{"changelog.html":"MODIFY","pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["72","  <li class='major bug'>","73","    JNLP slaves now satisfies stricter requirements imposed by JDK7u45.","74","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-20204\">issue 20204<\/a>)","75","  <li class=bug>","76","    Fixed NPE executing <tt>Pipe.EOF<\/tt> with <tt>ProxyWriter<\/tt>","77","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-20769\">issue 20769<\/a>)"],"delete":[]}],"pom.xml":[{"add":["174","        <version>2.35<\/version>"],"delete":["174","        <version>2.33<\/version>"]}]}},"c9d69d36bdaaa149bb64887218b35e2ca260da07":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/Main.java":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=bug>","58","    Using <code>java -jar jenkins-core.jar folder\/external-monitor-job cmd \u2026<\/code> did not work.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-21525\">issue 21525<\/a>)"],"delete":["57","  <li class=>"]}],"core\/src\/main\/java\/hudson\/Main.java":[{"add":["105","        URL jobURL = new URL(home + \"job\/\" + Util.encode(projectName).replace(\"\/\", \"\/job\/\") + \"\/\");","108","            HttpURLConnection con = open(new URL(jobURL, \"acceptBuildResult\"));","112","                System.err.println(jobURL + \" is not a valid external job (\" + con.getResponseCode() + \" \" + con.getResponseMessage() + \")\");","157","            URL location = new URL(jobURL, \"postBuildResult\");","161","                    HttpURLConnection con = open(location);","183","                        location = new URL(e.getLocation());"],"delete":["39","import java.net.URLEncoder;","106","        String projectNameEnc = URLEncoder.encode(projectName,\"UTF-8\").replaceAll(\"\\\\+\",\"%20\");","109","            HttpURLConnection con = open(new URL(home+\"job\/\"+projectNameEnc+\"\/acceptBuildResult\"));","113","                System.err.println(projectName+\" is not a valid job name on \"+home+\" (\"+con.getResponseMessage()+\")\");","158","            String location = home+\"job\/\"+projectNameEnc+\"\/postBuildResult\";","162","                    HttpURLConnection con = open(new URL(location));","184","                        location = e.getLocation();"]}]}},"fa50b3d7e6e2a361884cb432fbf101171ebe6c01":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["58","    Exception in flyweight tasks when checking if an executor is interrupted.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17025\">issue 17025<\/a>)","60","  <li class='major bug'>"],"delete":[]}]}},"bfa648152f266540536e76f7b3ebcb1598ad5f6f":{"changes":{"core\/src\/main\/java\/hudson\/model\/Cause.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Cause.java":[{"add":["36","import javax.annotation.Nonnull;","103","","104","        \/**","105","         * Maximum depth of transitive upstream causes we want to record.","106","         *\/","107","        private static final int MAX_DEPTH = 10;","115","        private @Nonnull List<Cause> upstreamCauses;","129","            upstreamCauses = new ArrayList<Cause>();","130","            for (Cause c : up.getCauses()) {","131","                upstreamCauses.add(trim(c, MAX_DEPTH));","132","            }","133","        }","134","","135","        private UpstreamCause(String upstreamProject, int upstreamBuild, String upstreamUrl, @Nonnull List<Cause> upstreamCauses) {","136","            this.upstreamProject = upstreamProject;","137","            this.upstreamBuild = upstreamBuild;","138","            this.upstreamUrl = upstreamUrl;","139","            this.upstreamCauses = upstreamCauses;","140","        }","141","","142","        private @Nonnull Cause trim(@Nonnull Cause c, int depth) {","143","            if (!(c instanceof UpstreamCause)) {","144","                return c;","145","            }","146","            UpstreamCause uc = (UpstreamCause) c;","147","            List<Cause> cs = new ArrayList<Cause>();","148","            if (depth > 0) {","149","                for (Cause c2 : uc.upstreamCauses) {","150","                    cs.add(trim(c2, depth - 1));","151","                }","152","            } else {","153","                cs.add(new DeeplyNestedUpstreamCause());","154","            }","155","            return new UpstreamCause(uc.upstreamProject, uc.upstreamBuild, uc.upstreamUrl, cs);","201","        @Override public String toString() {","202","            return upstreamUrl + upstreamBuild + upstreamCauses;","203","        }","204","","216","","217","        public static class DeeplyNestedUpstreamCause extends Cause {","218","            @Override public String getShortDescription() {","219","                return \"(deeply nested causes)\";","220","            }","221","            @Override public String toString() {","222","                return \"JENKINS-14814\";","223","            }","224","        }","225",""],"delete":["109","        private List<Cause> upstreamCauses;","123","            upstreamCauses = new ArrayList<Cause>(up.getCauses());"]}]}},"86e510a92f5b3d910adcefd72b6f66da0416987a":{"changes":{"test\/src\/test\/java\/hudson\/model\/AbstractItemTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/AbstractItemTest.java":[{"add":["65","        j.createFreeStyleProject(\"foo-exists\");","70","        assertThat(checkNameAndReturnError(p, \"foo\"), equalTo(Messages.AbstractItem_NewNameUnchanged()));","71","        assertThat(checkNameAndReturnError(p, \"foo-exists\"), equalTo(Messages.AbstractItem_NewNameInUse(\"foo-exists\")));","88","        j.createFreeStyleProject(\"foo-exists\");","91","            assertThat(checkNameAndReturnError(p, \"foo-exists\"), equalTo(Messages.AbstractItem_NewNameInUse(\"foo-exists\")));","94","            assertThat(checkNameAndReturnError(p, \"foo-exists\"), equalTo(Messages.Jenkins_NotAllowedName(\"foo-exists\")));"],"delete":["69","        assertThat(checkNameAndReturnError(p, \"foo\"), equalTo(Messages.AbstractItem_NewNameInUse(\"foo\")));","88","            assertThat(checkNameAndReturnError(p, \"foo\"), equalTo(Messages.AbstractItem_NewNameInUse(\"foo\")));","91","            assertThat(checkNameAndReturnError(p, \"foo\"), equalTo(Messages.Jenkins_NotAllowedName(\"foo\")));"]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["286","            if (newName.equals(name)) {","287","                return FormValidation.warning(Messages.AbstractItem_NewNameUnchanged());","288","            }"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["38","AbstractItem.NewNameUnchanged=The new name is the same as the current name."],"delete":[]}]}},"06f690dbb9f491d592d42f5b911ae9d49f6e1290":{"changes":{"core\/src\/main\/java\/hudson\/model\/Slave.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Slave.java":[{"add":["129","    private \/*almost final*\/ DescribableList<NodeProperty<?>,NodePropertyDescriptor> nodeProperties = new DescribableList<NodeProperty<?>,NodePropertyDescriptor>(Jenkins.getInstance().getNodesObject());"],"delete":["129","    private \/*almost final*\/ DescribableList<NodeProperty<?>,NodePropertyDescriptor> nodeProperties = new DescribableList<NodeProperty<?>,NodePropertyDescriptor>(Jenkins.getInstance());"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["42","import hudson.remoting.Callable;","70","","91","","113","","1432","    private void replaceBy(final Node newNode) throws ServletException, IOException {","1435","        \/\/ use the queue lock until Nodes has a way of directly modifying a single node.","1436","        Queue.withLock(new Callable<Void, IOException>() {","1437","            public Void call() throws IOException {","1438","                List<Node> nodes = new ArrayList<Node>(app.getNodes());","1439","                Node node = getNode();","1440","                int i  = (node != null) ? nodes.indexOf(node) : -1;","1441","                if(i<0) {","1442","                    throw new IOException(\"This slave appears to be removed while you were editing the configuration\");","1443","                }","1444","                nodes.set(i, newNode);","1445","                app.setNodes(nodes);","1446","                return null;","1448","        });"],"delete":["1428","    private void replaceBy(Node newNode) throws ServletException, IOException {","1431","        \/\/ replace the old Node object by the new one","1432","        synchronized (app) {","1433","            List<Node> nodes = new ArrayList<Node>(app.getNodes());","1434","            Node node = getNode();","1435","            int i  = (node != null) ? nodes.indexOf(node) : -1;","1436","            if(i<0) {","1437","                throw new IOException(\"This slave appears to be removed while you were editing the configuration\");","1439","","1440","            nodes.set(i, newNode);","1441","            app.setNodes(nodes);","1442","        }"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["1713","     * Get the {@code Nodes}object that handles maintaining {@code Node}s.","1714","     * @return The Nodes object.","1715","     *\/","1716","    @Restricted(NoExternalUse.class)","1717","    public Nodes getNodesObject() {","1718","        \/\/ TODO replace this with something better when we properly expose Nodes.","1719","        return nodes;","1720","    }","1721","","1722","    \/**"],"delete":[]}]}},"6232491965ab654ea9a020c3088421ce2d61705c":{"changes":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/lazy\/AbstractLazyLoadRunMap.java":[{"add":["33","import java.util.ListIterator;","337","            ListIterator<Integer> iterator = numberOnDisk.listIterator(numberOnDisk.size());","338","            while(iterator.hasPrevious()) {","339","                int m = iterator.previous();"],"delete":["31","import java.util.ArrayList;","34","import java.util.List;","338","            List<Integer> reversed = new ArrayList<Integer>(numberOnDisk);","339","            Collections.reverse(reversed);","340","            for (int m : reversed) {"]}]}},"f8f5ffc7e6e10224746c25bcb8172f28797a5acf":{"changes":{"core\/src\/main\/java\/hudson\/model\/Descriptor.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/UserTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Descriptor.java":[{"add":["986","            Descriptor<T> descriptor;","987","            try {","988","                descriptor = d.getDescriptor();","989","            } catch (Throwable x) {","990","                LOGGER.log(Level.WARNING, null, x);","991","                continue;","992","            }","993","            m.put(descriptor, d);"],"delete":["986","            m.put(d.getDescriptor(),d);"]}],"test\/src\/test\/java\/hudson\/model\/UserTest.java":[{"add":["27","import com.gargoylesoftware.htmlunit.WebRequest;","28","import com.gargoylesoftware.htmlunit.WebResponse;","31","import com.gargoylesoftware.htmlunit.util.WebConnectionWrapper;","32","import hudson.ExtensionList;","47","import java.net.URL;","48","import java.util.ArrayList;","51","import java.util.List;","67","import static org.hamcrest.Matchers.*;","741","    @Issue(\"JENKINS-45977\")","742","    @Test","743","    public void missingDescriptor() throws Exception {","744","        ExtensionList.lookup(Descriptor.class).remove(j.jenkins.getDescriptor(SomeUserProperty.class));","745","        j.jenkins.setSecurityRealm(j.createDummySecurityRealm());","746","        j.jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy().grant(Jenkins.READ).everywhere().to(\"alice\"));","747","        User alice = User.get(\"alice\");","748","        alice.addProperty(new SomeUserProperty());","749","        assertThat(alice.getProperties().values(), not(empty()));","750","        JenkinsRule.WebClient wc = j.createWebClient();","751","        final List<URL> failingResources = new ArrayList<>();","752","        new WebConnectionWrapper(wc) { \/\/ https:\/\/stackoverflow.com\/a\/18853796\/12916","753","            @Override","754","            public WebResponse getResponse(WebRequest request) throws IOException {","755","                WebResponse r = super.getResponse(request);","756","                if (r.getStatusCode() >= 400) {","757","                    failingResources.add(request.getUrl());","758","                }","759","                return r;","760","            }","761","        };","762","        wc.login(\"alice\").goTo(\"me\/configure\");","763","        assertThat(failingResources, empty());","764","    }","765",""],"delete":["60","import static org.hamcrest.Matchers.not;","61","import static org.hamcrest.collection.IsEmptyCollection.empty;"]}]}},"43f570f3e2c0424d0e842490c1820946b2c5fefb":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersAction.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ParametersActionTest2.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersAction.java":[{"add":["48","import java.util.TreeSet;","77","    private Set<String> safeParameters;","206","            ParametersAction parametersAction = new ParametersAction(parameters);","207","            loadSafeParameters();","208","            parametersAction.safeParameters = this.safeParameters;","209","            return parametersAction;","226","        ParametersAction parametersAction = new ParametersAction(combinedParameters);","227","        loadSafeParameters();","228","        parametersAction.safeParameters = this.safeParameters;","229","        return parametersAction;","240","            ParametersAction parametersAction = new ParametersAction(parameters);","241","            loadSafeParameters();","242","            parametersAction.safeParameters = this.safeParameters;","243","            return parametersAction;","245","        ParametersAction parametersAction = createUpdated(overrides.parameters);","246","        Set<String> safe = new TreeSet<>();","247","        if (parametersAction.safeParameters != null) {","248","            \/\/loadSafeParameters() should have been called by createUpdated","249","            safe.addAll(this.safeParameters);","250","        }","251","        overrides.loadSafeParameters();","252","        if (overrides.safeParameters != null) {","253","            safe.addAll(overrides.safeParameters);","254","        }","255","        parametersAction.safeParameters = safe;","256","        return parametersAction;","325","        loadSafeParameters();","326","        return safeParameters.contains(name);","327","    }","328","","329","    \/**","330","     * Combines the contents of {@link #SAFE_PARAMETERS_SYSTEM_PROPERTY_NAME}","331","     * and {@link #getAdditionalSafeParameters()} into {@link #safeParameters}.","332","     * @since TODO","333","     *\/","334","    private void loadSafeParameters() {","337","            safeParameters = new TreeSet<>();","339","                safeParameters.addAll(Arrays.asList(paramNames.split(\",\")));","341","            safeParameters.addAll(getAdditionalSafeParameters());","343","    }","344","","345","    \/**","346","     * Provides a list of parameter names considered safe by the class overriding this action.","347","     * Plugins can extend this when scheduling a build with the built in parameters it has.","348","     * Whatever the user provides in {@link #SAFE_PARAMETERS_SYSTEM_PROPERTY_NAME} or","349","     * {@link #KEEP_UNDEFINED_PARAMETERS_SYSTEM_PROPERTY_NAME} still counts.","350","     *","351","     * @return an additional list of safe parameter names","352","     * @since TODO","353","     *\/","354","    protected Collection<String> getAdditionalSafeParameters() {","355","        return Collections.emptyList();"],"delete":["76","    private transient List<String> safeParameters;","205","            return new ParametersAction(parameters);","222","        return new ParametersAction(combinedParameters);","233","            return new ParametersAction(parameters);","235","        return createUpdated(overrides.parameters);","307","                safeParameters = Arrays.asList(paramNames.split(\",\"));","308","            } else {","309","                safeParameters = Collections.emptyList();","312","        return safeParameters.contains(name);"]}],"test\/src\/test\/java\/hudson\/model\/ParametersActionTest2.java":[{"add":["12","import java.util.Collection;","154","    public void whitelistedParameterByOverride() throws Exception {","155","        FreeStyleProject p = j.createFreeStyleProject();","156","        String name = p.getFullName();","157","        p.addProperty(new ParametersDefinitionProperty(Arrays.<ParameterDefinition>asList(","158","                new StringParameterDefinition(\"foo\", \"foo\"),","159","                new StringParameterDefinition(\"bar\", \"bar\"))));","160","","161","        try {","162","            ParametersAction action = new TestParametersAction(","163","                    new StringParameterValue(\"foo\", \"baz\"),","164","                    new StringParameterValue(\"bar\", \"bar\"),","165","                    new StringParameterValue(\"whitelisted1\", \"x\"),","166","                    new StringParameterValue(\"whitelisted2\", \"y\"),","167","                    new StringParameterValue(\"whitelisted3\", \"y\"));","168","            FreeStyleBuild build = j.assertBuildStatusSuccess(p.scheduleBuild2(0, new Cause.UserIdCause(), action));","169","","170","            assertTrue(\"whitelisted1 parameter is listed in getParameters\",","171","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted1\"));","172","            assertTrue(\"whitelisted2 parameter is listed in getParameters\",","173","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted2\"));","174","            assertFalse(\"whitelisted3 parameter is listed in getParameters\",","175","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted3\"));","176","            p = null;","177","            build = null;","178","            j.jenkins.reload();","179","            \/\/Test again after reload","180","            p = j.jenkins.getItemByFullName(name, FreeStyleProject.class);","181","            build = p.getLastBuild();","182","            assertTrue(\"whitelisted1 parameter is listed in getParameters\",","183","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted1\"));","184","            assertTrue(\"whitelisted2 parameter is listed in getParameters\",","185","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted2\"));","186","            assertFalse(\"whitelisted3 parameter is listed in getParameters\",","187","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted3\"));","188","        } finally {","189","            System.clearProperty(ParametersAction.SAFE_PARAMETERS_SYSTEM_PROPERTY_NAME);","190","        }","191","    }","192","","193","    @Test","194","    @Issue(\"SECURITY-170\")","195","    public void whitelistedParameterSameAfterChange() throws Exception {","196","        FreeStyleProject p = j.createFreeStyleProject();","197","        String name = p.getFullName();","198","        p.addProperty(new ParametersDefinitionProperty(Arrays.<ParameterDefinition>asList(","199","                new StringParameterDefinition(\"foo\", \"foo\"),","200","                new StringParameterDefinition(\"bar\", \"bar\"))));","201","","202","        try {","203","            System.setProperty(ParametersAction.SAFE_PARAMETERS_SYSTEM_PROPERTY_NAME, \"whitelisted1,whitelisted2\");","204","            FreeStyleBuild build = j.assertBuildStatusSuccess(p.scheduleBuild2(0, new Cause.UserIdCause(), new ParametersAction(","205","                    new StringParameterValue(\"foo\", \"baz\"),","206","                    new StringParameterValue(\"bar\", \"bar\"),","207","                    new StringParameterValue(\"whitelisted1\", \"x\"),","208","                    new StringParameterValue(\"whitelisted2\", \"y\"),","209","                    new StringParameterValue(\"whitelisted3\", \"z\"),","210","                    new StringParameterValue(\"whitelisted4\", \"w\")","211","            )));","212","            assertTrue(\"whitelisted1 parameter is listed in getParameters\",","213","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted1\"));","214","            assertTrue(\"whitelisted2 parameter is listed in getParameters\",","215","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted2\"));","216","            assertFalse(\"whitelisted3 parameter is listed in getParameters\",","217","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted3\"));","218","            assertFalse(\"whitelisted4 parameter is listed in getParameters\",","219","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted4\"));","220","","221","            System.setProperty(ParametersAction.SAFE_PARAMETERS_SYSTEM_PROPERTY_NAME, \"whitelisted3,whitelisted4\");","222","            p = null;","223","            build = null;","224","            j.jenkins.reload();","225","            p = j.jenkins.getItemByFullName(name, FreeStyleProject.class);","226","            build = p.getLastBuild();","227","            assertTrue(\"whitelisted1 parameter is listed in getParameters\",","228","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted1\"));","229","            assertTrue(\"whitelisted2 parameter is listed in getParameters\",","230","                       hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted2\"));","231","            assertFalse(\"whitelisted3 parameter is listed in getParameters\",","232","                        hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted3\"));","233","            assertFalse(\"whitelisted4 parameter is listed in getParameters\",","234","                        hasParameterWithName(build.getAction(ParametersAction.class), \"whitelisted4\"));","235","","236","        } finally {","237","            System.clearProperty(ParametersAction.SAFE_PARAMETERS_SYSTEM_PROPERTY_NAME);","238","        }","239","    }","240","","241","","242","","243","    @Test","244","    @Issue(\"SECURITY-170\")","288","    public static class TestParametersAction extends ParametersAction {","289","        public TestParametersAction(ParameterValue... parameters) {","290","            super(parameters);","291","        }","292","","293","        @Override","294","        protected Collection<String> getAdditionalSafeParameters() {","295","            return Arrays.asList(\"whitelisted1\", \"whitelisted2\");","296","        }","297","    }","298",""],"delete":[]}]}},"0b60d00f7e519761bc03cc20d618d68027cd628d":{"changes":{"war\/src\/main\/js\/widgets\/config\/tabbar.less":"MODIFY"},"diff":{"war\/src\/main\/js\/widgets\/config\/tabbar.less":[{"add":["230","        select:not(.select-ajax-pending) {"],"delete":["230","        select{"]}]}},"e2b8e30aefc781e74953e5fc2fc0dfa66a5d26d3":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/Mailer\/global.jelly":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Mailer.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/Mailer\/global.jelly":[{"add":["14","      <f:textbox name=\"mailer_admin_address\" value=\"${descriptor.adminAddress}\"","15","          checkUrl=\"'${rootURL}\/publisher\/Mailer\/addressCheck?value='+encode(this.value)\"\/>"],"delete":["14","      <input class=\"setting-input\" name=\"mailer_admin_address\"","15","        type=\"text\" value=\"${descriptor.adminAddress}\"\/>"]}],"core\/src\/main\/java\/hudson\/tasks\/Mailer.java":[{"add":["3","import hudson.util.FormFieldValidator;","12","import org.kohsuke.stapler.QueryParameter;","13","import org.kohsuke.stapler.StaplerResponse;","18","import javax.mail.internet.InternetAddress;","19","import javax.mail.internet.AddressException;","20","import javax.servlet.ServletException;","22","import java.io.IOException;","248","","249","        public void doAddressCheck(StaplerRequest req, StaplerResponse rsp,","250","                                   @QueryParameter(\"value\") final String value) throws IOException, ServletException {","251","            new FormFieldValidator(req,rsp,false) {","252","                protected void check() throws IOException, ServletException {","253","                    try {","254","                        new InternetAddress(value);","255","                        ok();","256","                    } catch (AddressException e) {","257","                        error(e.getMessage());","258","                    }","259","                }","260","            }.process();","261","        }"],"delete":[]}]}},"2fbd132bc9a7772e69dc3bfe34ae2c7256a780e3":{"changes":{"core\/src\/main\/java\/jenkins\/slaves\/DefaultJnlpSlaveReceiver.java":"MODIFY","core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/slaves\/DefaultJnlpSlaveReceiver.java":[{"add":["26","import java.nio.channels.ClosedChannelException;","184","        if (cause instanceof ClosedChannelException) {","185","            LOGGER.log(Level.INFO, \"{0} for {1} terminated: {2}\", new Object[] {Thread.currentThread().getName(), nodeName, cause});","186","        } else if (cause != null) {"],"delete":["183","        if (cause != null) {"]}],"core\/src\/main\/java\/hudson\/TcpSlaveAgentListener.java":[{"add":["51","import java.io.EOFException;","288","                if (e instanceof EOFException) {","289","                    LOGGER.log(Level.INFO, \"Connection #{0} failed: {1}\", new Object[] {id, e});","290","                } else {","291","                    LOGGER.log(Level.WARNING, \"Connection #\" + id + \" failed\", e);","292","                }"],"delete":["45","import java.io.UnsupportedEncodingException;","288","                LOGGER.log(Level.WARNING,\"Connection #\"+id+\" failed\",e);"]}]}},"b8d244b67733058ab2014c86517a0718680f01b2":{"changes":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["762","            if(Boolean.getBoolean(Jenkins.class.getName()+\".enableExceptionOnNullInstance\")) {"],"delete":["762","            if(!Boolean.getBoolean(Jenkins.class.getName()+\".disableExceptionOnNullInstance\")) {"]}]}},"f8751b20010b8f4be6a041099dbb06fb3c8341d0":{"changes":{"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/configure-entries.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/matrix\/MatrixProject\/configure-entries.jelly":[{"add":["108","    <f:optionalBlock field=\"runSequentially\" title=\"${%Run each configuration sequentially}\"\/>","109",""],"delete":["106","        <f:optionalBlock field=\"runSequentially\" title=\"${%Run each configuration sequentially}\" \/>"]}]}},"5c79beb3efc0058d38a36a302362e69625231377":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/RunTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["482","            r = new ArrayList<>(r);"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/RunTest.java":[{"add":["28","import java.util.List;","29","import static org.junit.Assert.*;","63","    @Issue(\"JENKINS-40281\")","64","    @Test public void getBadgeActions() throws Exception {","65","        FreeStyleProject p = j.createFreeStyleProject();","66","        FreeStyleBuild b = j.buildAndAssertSuccess(p);","67","        assertEquals(0, b.getBadgeActions().size());","68","        assertTrue(b.canToggleLogKeep());","69","        b.keepLog();","70","        List<BuildBadgeAction> badgeActions = b.getBadgeActions();","71","        assertEquals(1, badgeActions.size());","72","        assertEquals(Run.KeepLogBuildBadge.class, badgeActions.get(0).getClass());","73","    }","74",""],"delete":[]}]}},"6d7a9a4bb3bc64fb62b062de15b9370a854f0021":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["214","      <version>1.1.4-hudson-2<\/version>"],"delete":["214","      <version>1.1.4-hudson-1<\/version>"]}]}},"16883377dff9ad3f48e9fe6404af1e9cf2c9dbbf":{"changes":{"core\/src\/main\/java\/hudson\/util\/SecretRewriter.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/VirtualFile.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/SecretRewriter.java":[{"add":["15","import java.nio.file.LinkOption;","148","            canonical = dir.toPath().toRealPath(new LinkOption[0]).toString();"],"delete":["147","            canonical = dir.getCanonicalPath();"]}],"core\/src\/main\/java\/jenkins\/util\/VirtualFile.java":[{"add":["40","import java.nio.file.LinkOption;","300","                String myPath = f.toPath().toRealPath(new LinkOption[0]).toString();","301","                String rootPath = root.toPath().toRealPath(new LinkOption[0]).toString();"],"delete":["299","                String myPath = f.getCanonicalPath();","300","                String rootPath = root.getCanonicalPath();"]}]}},"03a26f309f763504b08a49047f24af9f166a7e6d":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["185","  <li class=\"bug\">","186","    Fixed localization of build environment variable help.","187","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-22867\">issue 22867<\/a>)"],"delete":["195","    Fixed localization of build environment variable help.","196","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-22867\">issue 22867<\/a>)","197","  <li class=\"bug\">"]}]}},"9768125371ded0c6d404c95f42007f468aea683a":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["0","<!DOCTYPE HTML PUBLIC \"-\/\/W3C\/\/DTD HTML 4.01 Transitional\/\/EN\" \"http:\/\/www.w3.org\/TR\/html4\/loose.dtd\">","18","<head>","19","  <meta http-equiv=\"Content-Type\" content=\"text\/html;charset=utf-8\">","42","and whether they had any significant issues. <br>","43","Legend: <br>","45","  alt=\"Sunny\"> = I use it on my production site without major issues. <br>","47","  alt=\"Cloudy\"> = I don't recommend it. <br>","49","  alt=\"Lightning\"> = I tried it but rolled back to a previous version. <br>","118","  <li class='major rfe'>","328","<h4><s><a name=v1.385>What's new in 1.385<\/a> (2010\/11\/15)<\/s><\/h4>","389","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-1467\">issue 1467<\/a>)","664","    &lt;input type='hidden'&gt; field shouldn't be getting the plain text password value.","1617","    (<a href=\"https:\/\/hudson.dev.java.net\/servlets\/BrowseList?list=users&amp;by=thread&amp;from=2222483\">report<\/a>)"],"delete":["17","<head id=\"head\">","40","and whether they had any significant issues. <br\/>","41","Legend: <br\/>","43","  alt=\"Sunny\"\/> = I use it on my production site without major issues. <br\/>","45","  alt=\"Cloudy\"\/> = I don't recommend it. <br\/>","47","  alt=\"Lightning\"\/> = I tried it but rolled back to a previous version. <br\/>","116","  <li class'major rfe'>","326","<s><h4><a name=v1.385>What's new in 1.385<\/a> (2010\/11\/15)<\/h4><\/s>","387","    <\/l> (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-1467\">issue 1467<\/a>)","662","    &lt;input type='hidden'> field shouldn't be getting the plain text password value.","1615","    (<a href=\"https:\/\/hudson.dev.java.net\/servlets\/BrowseList?list=users&by=thread&from=2222483\">report<\/a>)"]}]}},"2f9fff923981c7aeccca9ca88482062a7e578a24":{"changes":{"changelog.html":"MODIFY","debian\/debian\/jenkins.init":"MODIFY"},"diff":{"changelog.html":[{"add":["63","  <li class=bug>","64","    Debian init script now returns the proper exit code from the 'status' command.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11306\">issue 11306<\/a>)"],"delete":[]}],"debian\/debian\/jenkins.init":[{"add":["207","\tget_daemon_status","208","\tcase \"$?\" in ","209","\t 0) ","210","\t\techo \"$DESC is running with the pid `cat $PIDFILE`\"","211","\t\trc=0","212","\t\t;;","213","\t*) ","214","\t\tget_running","215","\t\tprocs=$?","216","\t\tif [ $procs -eq 0 ]; then ","217","\t\t\techo -n \"$DESC is not running\"","218","\t\t\tif [ -f $PIDFILE ]; then ","219","\t\t\t\techo \", but the pidfile ($PIDFILE) still exists\"","220","\t\t\t\trc=1","221","\t\t\telse ","222","\t\t\t\techo","223","\t\t\t\trc=3","224","\t\t\tfi","225","\t\t","226","\t\telse ","227","\t\t\techo \"$procs instances of jenkins are running at the moment\"","228","\t\t\techo \"but the pidfile $PIDFILE is missing\"","229","\t\t\trc=0","230","\t\tfi","231","\t\t","232","\t\texit $rc","233","\t\t;;","234","\tesac","235","\t;;"],"delete":["207","      get_daemon_status","208","      case \"$?\" in ","209","\t 0) echo \"$DESC is running with the pid `cat $PIDFILE`\";;","210","         *) ","211","\t      get_running","212","\t      procs=$?","213","\t      if [ $procs -eq 0 ]; then ","214","\t\t  echo -n \"$DESC is not running\"","215","\t\t  if [ -f $PIDFILE ]; then ","216","\t\t      echo \", but the pidfile ($PIDFILE) still exists\"","217","\t\t  else ","218","\t\t      echo","219","\t\t  fi","220","","221","\t      else ","222","\t\t  echo \"$procs instances of jenkins are running at the moment\"","223","\t\t  echo \"but the pidfile $PIDFILE is missing\"","224","\t      fi","225","\t      ;;","226","      esac","227","    ;;"]}]}},"663104dc70176adda818a6f1244f36f18b22e6ad":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/MetaTabulatedResult\/body.jelly":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/SuiteResult.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/MetaTabulatedResult\/body.jelly":[{"add":["11","            <a href=\"${f.getRelativePathFrom(it)}\"><st:out value=\"${f.fullName}\"\/><\/a>"],"delete":["11","            <a href=\"${f.getRelativePathFrom(it)}\">${f.fullName}<\/a>"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":[{"add":["28","        this(parent,testCase,testCase.attributeValue(\"name\"));","29","    }","30","","31","    CaseResult(SuiteResult parent, Element testCase, String testCaseName) {","44","        testName = safe(testCaseName);","48","    private static String getError(Element testCase) {"],"delete":["40","        testName = safe(testCase.attributeValue(\"name\"));","44","    private String getError(Element testCase) {"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/SuiteResult.java":[{"add":["49","        Element ex = root.element(\"error\");","50","        if(ex!=null) {","51","            \/\/ according to junit-noframes.xsl l.229, this happens when the test class failed to load","52","            cases.add(new CaseResult(this,root,\"<init>\"));","53","        }","54",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/index.jelly":[{"add":["6","        <st:out value=\"${st.message}\" \/>","9","        <st:out value=\"${it.fullName}\"\/>"],"delete":["6","        ${st.message}","9","        ${it.fullName}"]}]}},"3d850711bb1a31f11c4309bd798200fbc5410764":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["342","            \/\/ \"Utils.resolveSymlink(file)\" does with NTFS symlinks what \"file.getCanonicalFile()\" is unable to ","343","            \/\/ leaving original getCanonicalFile in case it is there for any additional reason","344","            if(Util.isSymlink(buildDir)) {","345","                buildDir = new File(Util.resolveSymlink(buildDir));","346","            }"],"delete":[]}]}}}