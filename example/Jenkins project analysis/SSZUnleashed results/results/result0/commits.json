{"3538931d1e2ff736adeb172f4947ee9ea20ac59c":{"changes":{"test\/src\/test\/java\/hudson\/cli\/DeleteViewCommandTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/DeleteViewCommandTest.java":[{"add":["125","        assertThat(result.stderr(), containsString(\"ERROR: Jenkins does not allow to delete '\"+AllView.DEFAULT_VIEW_NAME+\"' view\"));"],"delete":["125","        assertThat(result.stderr(), containsString(\"ERROR: Jenkins does not allow to delete 'All' view\"));"]}]}},"8d98e3929ad6d66b2e1849eb62a7191e586aaf4c":{"changes":{"test\/src\/test\/java\/hudson\/maven\/RedeployPublisherTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/maven\/RedeployPublisherTest.java":[{"add":["84","    @Bug(3814)"],"delete":[]}]}},"d741fd91d64af691ffa86b62fdb1617db0a87c89":{"changes":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_de.properties":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message.properties":[{"add":["24","UpgradeComplete=Upgrade to Jenkins {0} is complete, awaiting <a href=\"{1}\/safeRestart\">restart<\/a>."],"delete":["24","UpgradeComplete=Upgrade to Jenkins {0} is complete, awaiting <a href=\"${rootURL}\/safeRestart\">restart<\/a>."]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message.jelly":[{"add":["31","        ${%UpgradeComplete(ucData.core.version,rootURL)}"],"delete":["31","        ${%UpgradeComplete(ucData.core.version)}"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/CoreUpdateMonitor\/message_de.properties":[{"add":["22","UpgradeComplete=Aktualisierung auf Jenkins {0} abgeschlossen. <a href=\"{1}\/safeRestart\">Neustart von Jenkins<\/a> erforderlich.\t"],"delete":["22","UpgradeComplete=Aktualisierung auf Jenkins {0} abgeschlossen. <a href=\"${rootURL}\/safeRestart\">Neustart von Jenkins<\/a> erforderlich.\t"]}],"changelog.html":[{"add":["72","  <li class=bug>","73","    Fixed JellyTagException in the manage page after Jenkins upgrade","74","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10066\">issue 10066<\/a>)"],"delete":[]}]}},"e161437e5f9973b0d6e34e70fe36662da9dedf80":{"changes":{"core\/src\/main\/resources\/hudson\/model\/View\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/View\/index.jelly":[{"add":["26","    <l:layout title=\"${(it.class.name=='hudson.model.AllView' and it.ownerItemGroup == app) ? '%Dashboard' : it.displayName}${not empty it.ownerItemGroup.fullDisplayName?' ['+it.ownerItemGroup.fullDisplayName+']':''}\" norefresh=\"${!it.automaticRefreshEnabled}\">"],"delete":["26","    <l:layout title=\"${it.class.name=='hudson.model.AllView' ? '%Dashboard' : it.viewName}${not empty it.ownerItemGroup.fullDisplayName?' ['+it.ownerItemGroup.fullDisplayName+']':''}\" norefresh=\"${!it.automaticRefreshEnabled}\">"]}]}},"15a0c3947469e3d9aadf9f3c15c1a4db1ea088af":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/WorkspaceList.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/WorkspaceList.java":[{"add":["157","    private final Map<String, Entry> inUse = new HashMap<>();","183","            Entry e = inUse.get(candidate.getRemote());","197","        Entry old = inUse.put(p.getRemote(), new Entry(p, false));","207","        Entry old = inUse.get(p.getRemote());","215","            inUse.remove(p.getRemote());","255","                e = inUse.get(p.getRemote());","268","        else            inUse.put(p.getRemote(), new Entry(p,quick,context));"],"delete":["157","    private final Map<FilePath,Entry> inUse = new HashMap<>();","183","            Entry e = inUse.get(candidate);","197","        Entry old = inUse.put(p, new Entry(p, false));","207","        Entry old = inUse.get(p);","215","            inUse.remove(p);","255","                e = inUse.get(p);","268","        else            inUse.put(p,new Entry(p,quick,context));"]}]}},"815da8aa732baa699481828dda67dd5835ba4992":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["183","        <version>3.5<\/version>"],"delete":["183","        <version>3.4.1<\/version>"]}]}},"f8774f0599850a1c920c4da9e058009b77219703":{"changes":{"maven-plugin\/pom.xml":"MODIFY"},"diff":{"maven-plugin\/pom.xml":[{"add":["288","      <version>3.8<\/version>"],"delete":["288","      <version>3.6<\/version>"]}]}},"6a355ae3dfb9a0a764951670aee2546986bc7fbf":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["1942","    min-width: 100%;","1943","    padding: 2em 2em;","1944","    display: inline-block;","1945","    width: auto;","1946","}","1947","@media screen and (min-width: 1024px) {","1948","    body.main-panel-only #main-panel {","1949","        padding: 2em 10%;","1950","    }","1951","}"],"delete":["1942","    max-width: 75em !important;","1943","}"]}]}},"56697de4ab98c370c7a162cdef9a04c1e67b2818":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["82","import java.util.MissingResourceException;","399","        try {","400","            ResourceBundle rb = ResourceBundle.getBundle(\"\/hudson\/win32errors\");","401","            return rb.getString(\"error\"+n);","402","        } catch (MissingResourceException e) {","403","            LOGGER.log(Level.WARNING,\"Failed to find resource bundle\",e);","404","            return null;","405","        }"],"delete":["398","        ResourceBundle rb = ResourceBundle.getBundle(\"\/hudson\/win32errors\");","399","        return rb.getString(\"error\"+n);"]}]}},"3b2ffa3ebfe52be5c0a4574df75022b8d57e8ed3":{"changes":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":[{"add":["7","import hudson.maven.MavenBuild;","10","import org.apache.maven.artifact.installer.ArtifactInstallationException;","58","","59","            \/\/ deleted too much","60","            build.executeAsync(new MavenBuildProxy.BuildCallable<Void,IOException>() {","61","                public Void call(MavenBuild build) throws IOException, InterruptedException {","62","                    MavenArtifactRecord mar = new MavenArtifactRecord(build,pomArtifact,mainArtifact,attachedArtifacts);","63","                    build.addAction(mar);","64","","65","                    mar.recordFingerprints();","66","","67","                    return null;","68","                }","69","            });"],"delete":[]}]}},"f373cd5c5ea9e6e9c619d9913b1a9bc66001a1b8":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["44","    <stapler.version>1.207<\/stapler.version>"],"delete":["44","    <stapler.version>1.206<\/stapler.version>"]}],"changelog.html":[{"add":["67","    Improved the request handling performance (where the file lookup is expensive, such as NFS.)","68","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16606\">issue 16606<\/a>)","69","  <li class=rfe>"],"delete":[]}]}},"34e8a40434c4a9f3036b6160d9c69befdf7ec999":{"changes":{"maven-plugin\/pom.xml":"MODIFY"},"diff":{"maven-plugin\/pom.xml":[{"add":["48","","49","  <dependencyManagement>","50","    <dependencies>","51","      <!-- < 1.6.x version didn't specify the license (MIT) -->","52","      <!-- SLF4J is used by wagon-webdav-jackrabbit dep --> ","53","      <dependency>","54","        <groupId>org.slf4j<\/groupId>","55","        <artifactId>slf4j-api<\/artifactId>","56","        <version>1.6.1<\/version>","57","      <\/dependency>","58","      <dependency>","59","        <groupId>org.slf4j<\/groupId>","60","        <artifactId>slf4j-nop<\/artifactId>","61","        <version>1.6.1<\/version>","62","      <\/dependency>","63","    <\/dependencies>","64","  <\/dependencyManagement>","307","    <!-- JENKINS-10076 : This wagon is better to provide webdav support -->","309","      <groupId>org.apache.maven.wagon<\/groupId>","310","      <artifactId>wagon-webdav-jackrabbit<\/artifactId>","311","      <version>${wagonVersion}<\/version>","314","      <dependency>"],"delete":["291","      <!-- commonly used wagon provider -->","292","      <groupId>org.jvnet.hudson<\/groupId>","293","      <artifactId>wagon-webdav<\/artifactId>","294","      <version>1.0-beta-2-hudson-1<\/version>","295","      <exclusions>","296","        <exclusion>","297","          <groupId>jdom<\/groupId>","298","          <artifactId>jdom<\/artifactId>","299","        <\/exclusion>","300","      <\/exclusions>","303","    <dependency>"]}]}},"a975f7227ee58d3f274b82e3d9b615b297f30fa0":{"changes":{"test\/src\/test\/java\/hudson\/model\/AbstractBuildTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/AbstractBuildTest.java":[{"add":["26","import com.gargoylesoftware.htmlunit.WebResponse;","46","import net.sf.json.JSONArray;","47","import net.sf.json.JSONObject;","58","import org.xml.sax.SAXException;","131","    private void assertCulprits(AbstractBuild<?,?> b, String... expectedIds) throws IOException, SAXException {","137","","138","        if (expectedIds.length > 0) {","139","            JenkinsRule.WebClient wc = j.createWebClient();","140","            WebResponse response = wc.goTo(b.getUrl() + \"api\/json?tree=culprits[id]\", \"application\/json\").getWebResponse();","141","            JSONObject json = JSONObject.fromObject(response.getContentAsString());","142","","143","            Object culpritsArray = json.get(\"culprits\");","144","            assertNotNull(culpritsArray);","145","            assertTrue(culpritsArray instanceof JSONArray);","146","            Set<String> fromApi = new TreeSet<>();","147","            for (Object o : ((JSONArray)culpritsArray).toArray()) {","148","                assertTrue(o instanceof JSONObject);","149","                Object id = ((JSONObject)o).get(\"id\");","150","                if (id instanceof String) {","151","                    fromApi.add((String)id);","152","                }","153","            }","154","            assertEquals(fromApi, new TreeSet<>(Arrays.asList(expectedIds)));","155","        }"],"delete":["127","    private void assertCulprits(AbstractBuild<?,?> b, String... expectedIds) {"]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["327","    @Exported","328","    @Nonnull public Set<User> getCulprits() {","329","        return RunWithSCM.super.getCulprits();","330","    }","331","","332","    @Override"],"delete":[]}]}},"54c5872d1b27d244b250d518d6846351be13f503":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["51","      <version>1.37<\/version>"],"delete":["51","      <version>1.36<\/version>"]}]}},"cae5d74127640360315d39b86ae89c55a9ca1225":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/model\/Cause.java":"MODIFY"},"diff":{"changelog.html":[{"add":["63","  <li class=bug>","64","    Link to user profile from console output should go to the user ID, not the user name","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-12279\">issue 12279<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Cause.java":[{"add":["38"," * Cause object base class.  This class hierarchy is used to keep track of why","91","","97","","118","","154","","184","     *","219","     *","225","","235","","241","                if (user != null)","251","","255","                    HyperlinkNote.encodeTo(\"\/user\/\"+getUserId(), getUserName())));","257",""],"delete":["38"," * Cause object base class.  This class hierarchy is used to keep track of why ","91","        ","97","    ","118","        ","154","        ","184","     * ","219","     * ","225","        ","235","        ","241","                if (user != null) ","251","        ","255","                    HyperlinkNote.encodeTo(\"\/user\/\"+getUserName(), getUserName())));","257","        "]}]}},"9cdd9cc0c5640beeb6bf36a4b26fa1ddcce7fd60":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/Request.java":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/ProxyOutputStream.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/Request.java":[{"add":["74","    \/**","75","     * If this request performed some I\/O back in the caller side during the remote call execution, set to last such","76","     * operation, so that we can block until its completion.","77","     *\/","78","    \/*package*\/ volatile transient Future<?> lastIo;","135","                if (lastIo!=null)","136","                    try {","137","                        lastIo.get();","138","                    } catch (ExecutionException e) {","139","                        \/\/ ignore the I\/O error","140","                    }","141","","280","                    CURRENT.set(Request.this);","288","                    } finally {","289","                        CURRENT.set(null);","324","    \/**","325","     * Set to the {@link Request} object during {@linkplain #perform(Channel) the execution of the call}.","326","     *\/","327","    \/*package*\/ static ThreadLocal<Request> CURRENT = new ThreadLocal<Request>();","329","    \/*package*\/ static int getCurrentRequestId() {","330","        Request r = CURRENT.get();","331","        return r!=null ? r.id : 0;","332","    }"],"delete":["309","    \/\/private static final Unsafe unsafe = getUnsafe();","311","    \/\/private static Unsafe getUnsafe() {","312","    \/\/    try {","313","    \/\/        Field f = Unsafe.class.getDeclaredField(\"theUnsafe\");","314","    \/\/        f.setAccessible(true);","315","    \/\/        return (Unsafe)f.get(null);","316","    \/\/    } catch (NoSuchFieldException e) {","317","    \/\/        throw new Error(e);","318","    \/\/    } catch (IllegalAccessException e) {","319","    \/\/        throw new Error(e);","320","    \/\/    }","321","    \/\/}"]}],"remoting\/src\/main\/java\/hudson\/remoting\/ProxyOutputStream.java":[{"add":["159","     * I\/O operations in remoting gets executed by a separate pipe thread asynchronously.","160","     * So if a closure performs some I\/O (such as writing to the RemoteOutputStream) then returns,","161","     * it is possible that the calling thread unblocks before the I\/O actually completes.","162","     * <p>","163","     * This race condition creates a truncation problem like JENKINS-9189 or JENKINS-7871.","164","     * The initial fix for this was to introduce {@link Channel#syncLocalIO()}, but given the","165","     * recurrence in JENKINS-9189, I concluded that it's too error prone to expect the user of the","166","     * remoting to make such a call in the right place.","167","     * <p>","168","     * So the goal of this code is to automatically ensure the proper ordering of the return from","169","     * the {@link Request#call(Channel)} and the I\/O operations done during the call. We do this","170","     * by attributing I\/O call to a {@link Request}, then keeping track of the last I\/O operation","171","     * performed.","172","     *\/","173","    private static void markForIoSync(Channel channel, int requestId, java.util.concurrent.Future<?> ioOp) {","174","        Request<?,?> call = channel.pendingCalls.get(requestId);","175","        \/\/ call==null if:","176","        \/\/  1) the remote peer uses old version that doesn't set the requestId field","177","        \/\/  2) a bug in the code, but in that case we are being defensive","178","        if (call!=null)","179","            call.lastIo = ioOp;","180","    }","181","","182","","183","    \/**","188","        private final int requestId = Request.getCurrentRequestId();","207","            markForIoSync(channel,requestId,channel.pipeWriter.submit(new Runnable() {","236","            }));","251","        private final int requestId = Request.getCurrentRequestId();","260","            markForIoSync(channel,requestId,channel.pipeWriter.submit(new Runnable() {","268","            }));","311","        private final int requestId = Request.getCurrentRequestId();","320","            markForIoSync(channel,requestId,channel.pipeWriter.submit(new Runnable() {","329","            }));"],"delete":["181","            channel.pipeWriter.submit(new Runnable() {","210","            });","233","            channel.pipeWriter.submit(new Runnable() {","241","            });","292","            channel.pipeWriter.submit(new Runnable() {","301","            });"]}]}},"82751e44a3ee6a61c3f8476bc0116c5cd8b8087d":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Run\/console.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Run\/console.jelly":[{"add":["4","  <l:layout title=\"${it.parent.name} #${it.number} Console\" norefresh=\"true\">"],"delete":["4","  <l:layout title=\"${it.parent.name} #${it.number} Console\">"]}]}},"706b2dfd71904224399e52843233c12e219803e4":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/node_monitors\/AbstractDiskSpaceMonitor.java":"MODIFY","core\/src\/main\/resources\/hudson\/node_monitors\/Messages.properties":"MODIFY","core\/src\/main\/java\/hudson\/node_monitors\/AbstractNodeMonitorDescriptor.java":"MODIFY"},"diff":{"changelog.html":[{"add":[],"delete":["90","  <li class=bug>","91","    Slaves taken offline due to insufficient disk space should automatically come back online when disk space is cleared.","92","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-2548\">issue 2548<\/a>)"]}],"core\/src\/main\/java\/hudson\/node_monitors\/AbstractDiskSpaceMonitor.java":[{"add":[],"delete":["47","        } else if (c.isTemporarilyOffline()) {","48","            if (getDescriptor().markOnline(c)) {","49","                LOGGER.warning(Messages.DiskSpaceMonitor_MarkedOnline(c.getName()));","50","            }"]}],"core\/src\/main\/resources\/hudson\/node_monitors\/Messages.properties":[{"add":[],"delete":["25","DiskSpaceMonitor.MarkedOnline=Bringing {0} online due to disk space recovery"]}],"core\/src\/main\/java\/hudson\/node_monitors\/AbstractNodeMonitorDescriptor.java":[{"add":[],"delete":["150","","151","    \/**","152","     * Utility method to mark the computer online for derived classes.","153","     *","154","     * @return true","155","     *      if the node was actually brought back online - false if the node was already online.","156","     *\/","157","    protected boolean markOnline(Computer c) {","158","        if (!c.isTemporarilyOffline()) return false; \/\/ noop","159","","160","        c.setTemporarilyOffline(false);","161","","162","        return true;","163","    }","164",""]}]}},"5d3b23daf7e52c511fd594665ef8d648bb7bb121":{"changes":{"core\/src\/main\/java\/hudson\/model\/Descriptor.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Descriptor.java":[{"add":["640","                    final Descriptor descriptor = Jenkins.getActiveInstance().getDescriptor(actualType);","641","                    if (descriptor != null) {","642","                        return descriptor.newInstance(Stapler.getCurrentRequest(), json);","643","                    } else {","644","                        LOGGER.log(Level.WARNING, \"Descriptor not found. Falling back to default instantiation \"","645","                                + actualType.getName() + \" \" + json);","646","                    }"],"delete":["640","                    return Jenkins.getActiveInstance().getDescriptor(actualType).newInstance(Stapler.getCurrentRequest(), json);"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["1416","    @CheckForNull"],"delete":[]}]}},"4872423170a59170e253f41f4041e64c6bbcf2b0":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":"MODIFY","core\/src\/test\/java\/hudson\/tasks\/junit\/SuiteResultTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":[{"add":["150","        return stdio.subSequence(0, HALF_MAX_SIZE) + \"\\n...[truncated \" + middle + \" chars]...\\n\" + stdio.subSequence(len - HALF_MAX_SIZE, len);"],"delete":["150","        return stdio.subSequence(0, HALF_MAX_SIZE) + \"...[truncated \" + middle + \" chars]...\" + stdio.subSequence(len - HALF_MAX_SIZE, len);"]}],"core\/src\/test\/java\/hudson\/tasks\/junit\/SuiteResultTest.java":[{"add":["182","            assertEquals(sr.getStderr(), 1030, sr.getStderr().length());","219","                assertEquals(sr.getStdout(), 1030, sr.getStdout().length());"],"delete":["182","            assertEquals(sr.getStderr(), 1028, sr.getStderr().length());","219","                assertEquals(sr.getStdout(), 1028, sr.getStdout().length());"]}]}},"34f885b73f3a054c6de3e25f47b0e464d9a4df3f":{"changes":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":[{"add":["383","        assert \"view\/v1\/\" == deleteRedirectTarget(\"view\/v1\/job\/d\"); \/\/ JENKINS-23375"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["503","            } else if (a instanceof ViewGroup && a != this) {"],"delete":["503","            } else if (a instanceof ViewGroup) {"]}],"changelog.html":[{"add":["63","  <li class=bug>","64","    Incorrect redirect after deleting a folder.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-23375\">issue 23375<\/a>)"],"delete":[]}]}},"ced5c443231d6c41f89f6c5fdb99b433725ff4db":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["1073","            if (Functions.isWindows() && String.valueOf(x2).contains(\"java.nio.file.FileSystemException\")) {"],"delete":["1073","            if (Functions.isWindows() && String.valueOf(x2).contains(\"A required privilege is not held by the client.\")) {"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Harmless but noisy exception running builds on some Windows systems in non-English locale.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15316\">issue 15316<\/a>)"],"delete":["57","  <li class=>"]}]}},"b6a499b879a3e6d48436c7ec4053d7b33ed74685":{"changes":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifactArchiver.java":[{"add":["59","                            File f = (File) ret;","60","                            if(!f.isDirectory())","61","                                assemblies.add(f);"],"delete":["59","                            assemblies.add((File)ret);"]}]}},"7377dbe6d7d3fdc66897e74d96f18a03b95a4604":{"changes":{"core\/src\/main\/resources\/hudson\/model\/View\/People\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/View\/People\/index.jelly":[{"add":["49","            <td><a href=\"${rootURL}\/${p.project.url}\">${p.project.fullDisplayName}<\/a><\/td>"],"delete":["49","            <td><a href=\"${rootURL}\/${p.project.url}\">${p.project.name}<\/a><\/td>"]}]}},"f39fbdb312c3c87ef77a72446273423d906942ed":{"changes":{"test\/src\/test\/resources\/scripts\/BehaviorTest\/testDuplicateRegistrations.jelly":"ADD","test\/src\/test\/java\/scripts\/BehaviorTest.java":"MODIFY","war\/src\/main\/webapp\/scripts\/behavior.js":"MODIFY"},"diff":{"test\/src\/test\/resources\/scripts\/BehaviorTest\/testDuplicateRegistrations.jelly":[{"add":[],"delete":[]}],"test\/src\/test\/java\/scripts\/BehaviorTest.java":[{"add":["27","import org.jvnet.hudson.test.Bug;","55","","56","    @Bug(14495)","57","    public void testDuplicateRegistrations() throws Exception {","58","        HtmlPage p = createWebClient().goTo(\"self\/testDuplicateRegistrations\");","59","        ScriptResult r = p.executeJavaScript(\"document.getElementsBySelector('DIV.a')[0].innerHTML\");","60","        assertEquals(\"initial and appended yet different\", r.getJavaScriptResult().toString());","61","    }","62",""],"delete":[]}],"war\/src\/main\/webapp\/scripts\/behavior.js":[{"add":["70","                var behavior = sheet[selector];","71","                var behaviors = behaviorsBySelector[selector];","72","                if (behaviors == null) {","73","                    behaviors = [];","74","                    behaviorsBySelector[selector] = behaviors;","75","                }","76","                if (behaviors.indexOf(behavior.toString()) == -1) {","77","                    behaviors.push(behavior.toString());","78","                    function apply(n) {","83","                    if (startNode instanceof Array) {","84","                        startNode._each(apply)","85","                    } else {","86","                        apply(startNode);","87","                    }"],"delete":["70","                function apply(n) {","71","                    var behavior = sheet[selector];","72","                    var behaviors = behaviorsBySelector[selector];","73","                    if (behaviors == null) {","74","                        behaviors = [];","75","                        behaviorsBySelector[selector] = behaviors;","76","                    }","77","                    if (behaviors.indexOf(behavior.toString()) == -1) {","78","                        behaviors.push(behavior.toString());","83","                }","84","","85","                if (startNode instanceof Array) {","86","                    startNode._each(apply)","87","                } else {","88","                    apply(startNode);"]}]}},"906d164a7b88619c4f9f3682690cf6909bb05826":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/summary.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/summary.jelly":[{"add":["47","          <j:choose>","48","            <j:when test=\"${attrs.href!=null}\">","49","              <a href=\"${attrs.href}\">","50","                <img src=\"${icon.startsWith('\/') ? rootURL+icon : imagesURL+'\/48x48\/'+icon}\"","51","                     alt=\"\" width=\"48\" height=\"48\" style=\"margin-right:1em\" \/>","52","              <\/a>","53","            <\/j:when>","54","            <j:otherwise>","55","              <img src=\"${icon.startsWith('\/') ? rootURL+icon : imagesURL+'\/48x48\/'+icon}\"","56","                   alt=\"\" width=\"48\" height=\"48\" style=\"margin-right:1em\" \/>","57","            <\/j:otherwise>","58","          <\/j:choose>","61","          <j:choose>","62","            <j:when test=\"${attrs.href!=null &amp;&amp; !attrs.iconOnly}\">","63","              <a href=\"${attrs.href}\">","64","                <d:invokeBody \/>","65","              <\/a>","66","            <\/j:when>","67","            <j:otherwise>","68","              <d:invokeBody \/>","69","            <\/j:otherwise>","70","          <\/j:choose>"],"delete":["47","          <a href=\"${attrs.href}\">","48","            <img src=\"${icon.startsWith('\/') ? rootURL+icon : imagesURL+'\/48x48\/'+icon}\"","49","                 alt=\"\" width=\"48\" height=\"48\" style=\"margin-right:1em\" \/>","50","          <\/a>","53","          <a href=\"${attrs.iconOnly==null ? attrs.href : null}\">","54","            <d:invokeBody \/>","55","          <\/a>"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    \"Changes\" in Build Summary broken in IE standard mode since 1.434","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11383\">issue 11383<\/a>)"],"delete":["57","  <li class=>"]}]}},"d758818b09ecd8d3eebebc927409e0ed58b2938a":{"changes":{"core\/src\/main\/resources\/hudson\/markup\/Messages.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/markup\/Messages.properties":[{"add":["22","EscapedMarkupFormatter.DisplayName=plain text"],"delete":["22","EscapedMarkupFormatter.DisplayName=Escaped HTML"]}]}},"1eaa8a00c0db9fe3144b95e1abe356c96fa66e99":{"changes":{"remoting\/pom.xml":"MODIFY","core\/pom.xml":"MODIFY"},"diff":{"remoting\/pom.xml":[{"add":["103","                  <format property=\"now\" pattern=\"MM\/dd\/yyyy HH:mm\" unit=\"hour\" \/>","105","                <property name=\"build.type\" value=\"private\" \/> <!-- override for \"rc\" build -->","106","                <pathconvert property=\"version.rc\">","107","                  <path path=\"${version}\" \/>","108","                  <chainedmapper><flattenmapper \/><globmapper from=\"*-SNAPSHOT\" to=\"*-RC\" \/><\/chainedmapper>","109","                <\/pathconvert>","110","                <condition property=\"build.version\" value=\"${version.rc} (${now})\">","111","                  <equals arg1=\"${build.type}\" arg2=\"rc\" \/>","112","                <\/condition>","113","                <property name=\"build.version\" value=\"${version} (${build.type}-${now}-${user.name})\" \/>"],"delete":["103","                  <format property=\"now\" pattern=\"MM\/dd\/yyyy hh:mm\" unit=\"hour\" \/>","105","                <property name=\"build.version\" value=\"${version} (private-${now}-${user.name})\" \/>"]}],"core\/pom.xml":[{"add":["126","                  <format property=\"now\" pattern=\"MM\/dd\/yyyy HH:mm\" unit=\"hour\" \/>"],"delete":["126","                  <format property=\"now\" pattern=\"MM\/dd\/yyyy hh:mm\" unit=\"hour\" \/>"]}]}},"e78bd45c83354bf1d5acc69867adfd44d30137d3":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/index.jelly":[{"add":["37","        <j:if test=\"${it.suiteResult != null &amp;&amp; it.className != it.suiteResult.name}\">","38","          (from <st:out value=\"${it.suiteResult.name}\"\/>)"],"delete":["37","        <j:if test=\"${it.className != it.parent.name}\">","38","          (from <st:out value=\"${it.parent.name}\"\/>)"]}]}},"5c14b748923869831d8546bc2b05f045a2c6ac38":{"changes":{"core\/src\/test\/java\/hudson\/model\/FingerprintTest.java":"MODIFY","core\/src\/test\/resources\/hudson\/model\/fingerprintWithoutUsages.xml":"ADD"},"diff":{"core\/src\/test\/java\/hudson\/model\/FingerprintTest.java":[{"add":["224","    @Test public void loadFingerprintWithoutUsages() throws Exception {","225","        Fingerprint fp = Fingerprint.load(new File(FingerprintTest.class.getResource(\"fingerprintWithoutUsages.xml\").toURI()));","226","        assertNotNull(fp);","227","        assertEquals(\"test:jenkinsfile-example-1.0-SNAPSHOT.jar\", fp.getFileName());","228","        assertNotNull(fp.getUsages());","229","    }","230",""],"delete":[]}],"core\/src\/test\/resources\/hudson\/model\/fingerprintWithoutUsages.xml":[{"add":[],"delete":[]}]}},"e43222dde84be0ea7d05647790fedc12d70f8052":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":[],"delete":["1233","            \t\/\/This handles the situation when Parameterized build checkbox is checked but no parameters are selected. User will be redirected to an error page with proper error message.","1234","            \tJob.checkForEmptyParameters(jsonProperties);","1539","    ","1540","    \/**","1541","     * This handles the situation when Parameterized build checkbox is checked ","1542","     * but no parameters are selected. User will be redirected to an error page","1543","     * with proper error message.","1544","     * @param jsonProperties","1545","     * @throws FormException ","1546","     *\/","1547","    private static void checkForEmptyParameters(JSONObject jsonProperties) throws FormException{","1548","        JSONObject parameterDefinitionProperty = jsonProperties.getJSONObject(\"hudson-model-ParametersDefinitionProperty\");","1549","        if ((parameterDefinitionProperty.getBoolean(\"specified\") == true)&& !parameterDefinitionProperty.has(\"parameterDefinitions\")) {","1550","\t\t    throw new FormException(Messages.Hudson_NoParamsSpecified(),\"parameterDefinitions\");","1551","        }","1552","    }"]}]}},"a1e93bf5c903d9a993c554c4dc2c05f7807dde14":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/junit\/TestResultAction.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/ClassResult\/body.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/MetaTabulatedResult\/list.jelly":"ADD","core\/src\/main\/resources\/hudson\/tasks\/junit\/ClassResult\/list.jelly":"ADD","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenTestDataPublisher.java":"ADD","core\/src\/main\/java\/hudson\/tasks\/junit\/ClassResult.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/History.java":"ADD","core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/list.jelly":"ADD","core\/src\/main\/java\/hudson\/tasks\/junit\/TestObject.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/TestAction.java":"ADD","core\/src\/main\/java\/hudson\/tasks\/junit\/TestResult.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/JUnitResultArchiver.java":"MODIFY","maven-plugin\/src\/main\/resources\/hudson\/maven\/MavenTestDataPublisher\/config.jelly":"ADD","core\/src\/main\/java\/hudson\/tasks\/junit\/TabulatedResult.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/TestObject\/sidepanel.jelly":"ADD","core\/src\/main\/resources\/hudson\/tasks\/junit\/History\/index.jelly":"ADD","core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/summary.jelly":"ADD","test\/src\/test\/java\/hudson\/tasks\/junit\/JUnitResultArchiverTest.java":"ADD","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/sidepanel.jelly":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":"MODIFY","test\/src\/test\/resources\/hudson\/tasks\/junit\/JUnitResultArchiverTest.zip":"ADD","core\/src\/main\/java\/hudson\/tasks\/junit\/PackageResult.java":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/test\/MatrixTestResult\/index.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/MetaTabulatedResult\/body.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/junit\/TabulatedResult\/index.jelly":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/junit\/TestDataPublisher.java":"ADD","core\/src\/main\/java\/hudson\/tasks\/junit\/SuiteResult.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/tasks.jelly":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/junit\/TestResultAction.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, Red Hat, Inc., Tom Huybrechts","36","import java.util.ArrayList;","37","import java.util.Collections;","38","import java.util.List;","39","import java.util.Map;","40","import java.util.concurrent.ConcurrentHashMap;","44","import org.kohsuke.stapler.StaplerProxy;","45","","46","import com.thoughtworks.xstream.XStream;","47","","65","    private List<Data> testData;","66","    private Map<String,String> descriptions = new ConcurrentHashMap<String, String>();","162","    ","163","    public String getDescription(TestObject object) {","164","    \treturn descriptions.get(object.getId());","165","    }","166","    ","167","    public void setDescription(TestObject object, String description) {","168","    \tdescriptions.put(object.getId(), description);","169","    }","170","    ","171","    public List<TestAction> getActions(TestObject object) {","172","    \tList<TestAction> result = new ArrayList<TestAction>();","173","    \tfor (Data data: testData) {","174","\t\t\tresult.addAll(data.getTestAction(object));","175","    \t}","176","\t\treturn Collections.unmodifiableList(result);","177","    }","178","    ","179","\tpublic void setData(List<Data> testData) {","180","\t\tthis.testData = testData;","181","\t}","182","    ","183","    public static abstract class Data {","184","    \t\/**","185","    \t * Returns all TestActions for the testObject. Always non-null","186","    \t *\/","187","    \tpublic abstract List<TestAction> getTestAction(TestObject testObject);","188","    }","190","    public Object readResolve() {","191","    \tif (descriptions == null) {","192","    \t\tdescriptions = new ConcurrentHashMap<String, String>();","193","    \t}","194","    \tif (testData == null) {","195","    \t\ttestData = new ArrayList<Data>();","196","    \t}","197","    \t","198","    \treturn this;","199","    }","200","    ","212",""],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, Red Hat, Inc.","25","import com.thoughtworks.xstream.XStream;","33","import java.util.List;","34","import org.kohsuke.stapler.StaplerProxy;","35","import org.kohsuke.stapler.export.Exported;","60","","157","","158",""]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/ClassResult\/body.jelly":[{"add":["36","            <td class=\"pane\">","37","            \t<a href=\"${p.safeName}\"><span style='${p.previousResult==null?\"font-weight:bold\":\"\"}'>${p.name}<\/span><\/a>","38","\t          \t<st:nbsp\/>","39","\t\t        <j:forEach var=\"badge\" items=\"${p.testActions}\">","40","\t\t          <st:include it=\"${badge}\" page=\"badge.jelly\" optional=\"true\"\/>","41","\t\t        <\/j:forEach>","42","            <\/td>"],"delete":["36","            <td class=\"pane\"><a href=\"${p.safeName}\">${p.name}<\/a><\/td>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/MetaTabulatedResult\/list.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/ClassResult\/list.jelly":[{"add":[],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenTestDataPublisher.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/ClassResult.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, id:cactusman, Tom Huybrechts","40","    private final String className; \/\/ simple name","62","        return pr.getClassResult(getName());","63","    }","64","","65","    @Override","66","    public ClassResult getResultInBuild(AbstractBuild<?, ?> build) {","67","        PackageResult pr = getParent().getResultInBuild(build);","68","        if(pr==null)    return null;","69","        return pr.getClassResult(getName());","86","    ","87","    public CaseResult getCaseResult(String name) {","95","    public Object getDynamic(String name, StaplerRequest req, StaplerResponse rsp) {","96","    \tCaseResult c = getCaseResult(name);","97","    \tif (c != null) {","98","    \t\treturn c;","99","    \t} else {","100","    \t\treturn super.getDynamic(name, req, rsp);","101","    \t}","102","    }","103","","153","    public String getClassName() {","154","    \treturn className;","155","    }","164","    ","165","    public String getFullName() {","166","    \treturn getParent().getDisplayName() + \".\" + className;","167","    }","168","","169","    \/**","170","     * Gets the relative path to this test case from the given object.","171","     *\/","172","    public String getRelativePathFrom(TestObject it) {","173","        if(it==this)","174","            return \".\";","175","        ","176","        if (it instanceof TestResult) {","177","        \treturn getParent().getSafeName() + \"\/\" + getSafeName();","178","        } else if (it instanceof PackageResult) {","179","        \treturn getSafeName();","180","        } else if (it instanceof CaseResult) {","181","        \treturn \"..\";","182","        } else {","183","        \tthrow new UnsupportedOperationException();","184","        }","185","","186","    }"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, id:cactusman","40","    private final String className;","59","    public AbstractBuild<?,?> getOwner() {","60","        return parent.getOwner();","61","    }","62","","66","        return pr.getDynamic(getName(),null,null);","83","","84","    public CaseResult getDynamic(String name, StaplerRequest req, StaplerResponse rsp) {"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/History.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/list.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/TestObject.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Tom Huybrechts","26","import hudson.model.AbstractBuild;","27","import hudson.model.AbstractModelObject;","28","import hudson.model.Action;","29","import hudson.model.Api;","30","import hudson.model.Build;","31","import hudson.model.Item;","32","import hudson.model.Messages;","33","import hudson.model.Result;","34","import hudson.model.Run;","35","import hudson.util.ChartUtil;","36","import hudson.util.ColorPalette;","37","import hudson.util.DataSetBuilder;","38","import hudson.util.ShiftedCategoryAxis;","39","import hudson.util.StackedAreaRenderer2;","41","import java.awt.Color;","42","import java.awt.Paint;","43","import java.io.IOException;","46","import java.util.List;","49","","50","import javax.servlet.ServletException;","51","","52","import org.jfree.chart.ChartFactory;","53","import org.jfree.chart.JFreeChart;","54","import org.jfree.chart.axis.CategoryAxis;","55","import org.jfree.chart.axis.CategoryLabelPositions;","56","import org.jfree.chart.axis.NumberAxis;","57","import org.jfree.chart.plot.CategoryPlot;","58","import org.jfree.chart.plot.PlotOrientation;","59","import org.jfree.chart.renderer.category.StackedAreaRenderer;","60","import org.jfree.data.category.CategoryDataset;","61","import org.jfree.ui.RectangleInsets;","62","import org.kohsuke.stapler.HttpRedirect;","63","import org.kohsuke.stapler.HttpResponse;","64","import org.kohsuke.stapler.QueryParameter;","65","import org.kohsuke.stapler.StaplerRequest;","66","import org.kohsuke.stapler.StaplerResponse;","71"," * ","75","public abstract class TestObject extends AbstractModelObject implements Serializable {","76","\tpublic AbstractBuild<?, ?> getOwner() {","77","\t\treturn getParent().getOwner();","78","\t}","79","","80","\tprivate volatile transient String id;","81","","82","\tpublic abstract TestObject getParent();","83","","84","\tpublic String getId() {","85","\t\tif (id == null) {","86","\t\t\tid = getParent().getId() + \"\/\" + getSafeName();","87","\t\t}","88","\t\treturn id;","89","\t}","90","\t","91","\t\/**","92","\t * Returns url relative to TestResult","93","\t *\/","94","\tpublic String getUrl() {","95","\t\treturn getId();","96","\t}","97","","98","\tpublic TestResult getTestResult() {","99","\t\treturn getParent().getTestResult();","100","\t}","101","","102","\tpublic TestResultAction getTestResultAction() {","103","\t\treturn getOwner().getAction(TestResultAction.class);","104","\t}","105","","106","\tpublic List<TestAction> getTestActions() {","107","\t\treturn getTestResultAction().getActions(this);","108","\t}","109","","110","\tpublic <T> T getTestAction(Class<T> klazz) {","111","\t\tfor (TestAction action : getTestActions()) {","112","\t\t\tif (klazz.isAssignableFrom(action.getClass())) {","113","\t\t\t\treturn klazz.cast(action);","114","\t\t\t}","115","\t\t}","116","\t\treturn null;","117","\t}","118","","119","\t\/**","120","\t * Gets the counter part of this {@link TestObject} in the previous run.","121","\t * ","122","\t * @return null if no such counter part exists.","123","\t *\/","124","\tpublic abstract TestObject getPreviousResult();","125","\t","126","\tpublic abstract TestObject getResultInBuild(AbstractBuild<?,?> build); ","127","","128","\t\/**","129","\t * Time took to run this test. In seconds.","130","\t *\/","131","\tpublic abstract float getDuration();","132","","133","\t\/**","134","\t * Returns the string representation of the {@link #getDuration()}, in a","135","\t * human readable format.","136","\t *\/","137","\tpublic String getDurationString() {","138","\t\treturn Util.getTimeSpanString((long) (getDuration() * 1000));","139","\t}","140","\t","141","\tpublic String getDescription() {","142","\t\treturn getTestResultAction().getDescription(this);","143","\t}","144","\t","145","\tpublic void setDescription(String description) {","146","\t\tgetTestResultAction().setDescription(this, description);","147","\t}","148","","149","\t\/**","150","\t * Exposes this object through the remote API.","151","\t *\/","152","\tpublic Api getApi() {","153","\t\treturn new Api(this);","154","\t}","155","","156","\t\/**","157","\t * Gets the name of this object.","158","\t *\/","159","\tpublic\/* abstract *\/String getName() {","160","\t\treturn \"\";","161","\t}","162","","163","\t\/**","164","\t * Gets the version of {@link #getName()} that's URL-safe.","165","\t *\/","166","\tpublic String getSafeName() {","167","\t\treturn safe(getName());","168","\t}","169","\t","170","\tpublic String getSearchUrl() {","171","\t\treturn getSafeName();","172","\t}","173","","174","\t\/**","175","\t * #2988: uniquifies a {@link #getSafeName} amongst children of the parent.","176","\t *\/","177","\tprotected final synchronized String uniquifyName(","178","\t\t\tCollection<? extends TestObject> siblings, String base) {","179","\t\tString uniquified = base;","180","\t\tint sequence = 1;","181","\t\tfor (TestObject sibling : siblings) {","182","\t\t\tif (sibling != this","183","\t\t\t\t\t&& uniquified.equals(UNIQUIFIED_NAMES.get(sibling))) {","184","\t\t\t\tuniquified = base + '_' + ++sequence;","185","\t\t\t}","186","\t\t}","187","\t\tUNIQUIFIED_NAMES.put(this, uniquified);","188","\t\treturn uniquified;","189","\t}","190","","191","\tprivate static final Map<TestObject, String> UNIQUIFIED_NAMES = new WeakHashMap<TestObject, String>();","192","","193","\t\/**","194","\t * Replaces URL-unsafe characters.","195","\t *\/","196","\tprotected static String safe(String s) {","197","\t\t\/\/ 3 replace calls is still 2-3x faster than a regex replaceAll","198","\t\treturn s.replace('\/', '_').replace('\\\\', '_').replace(':', '_');","199","\t}","200","\t","201","    \/**","202","     * Gets the total number of passed tests.","203","     *\/","204","    public abstract int getPassCount();","207","     * Gets the total number of failed tests.","209","    public abstract int getFailCount();","212","     * Gets the total number of skipped tests.","214","    public abstract int getSkipCount();","217","     * Gets the total number of tests.","219","    public final int getTotalCount() {","220","        return getPassCount()+getFailCount()+getSkipCount();","222","\t","223","\tpublic History getHistory() {","224","\t\treturn new History(this);","225","\t}","226","\t","227","\tpublic Object getDynamic(String token, StaplerRequest req,","228","\t\t\tStaplerResponse rsp) {","229","\t\tfor (Action a : getTestActions()) {","230","\t\t\tif (a == null)","231","\t\t\t\tcontinue; \/\/ be defensive","232","\t\t\tString urlName = a.getUrlName();","233","\t\t\tif (urlName == null)","234","\t\t\t\tcontinue;","235","\t\t\tif (urlName.equals(token))","236","\t\t\t\treturn a;","237","\t\t}","238","\t\treturn null;","239","\t}","241","\tpublic synchronized HttpResponse doSubmitDescription(","242","\t\t\t@QueryParameter String description) throws IOException,","243","\t\t\tServletException {","244","\t\tgetOwner().checkPermission(Item.BUILD);","246","\t\tsetDescription(description);","247","\t\tgetOwner().save();","248","\t\t","249","\t\treturn new HttpRedirect(\".\");","250","\t}","252","\tprivate static final long serialVersionUID = 1L;"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","25","import hudson.model.AbstractBuild;","26","import hudson.model.ModelObject;","27","import hudson.model.Api;","31","","39"," *","43","public abstract class TestObject implements ModelObject, Serializable {","44","    public abstract AbstractBuild<?,?> getOwner();","47","     * Gets the counter part of this {@link TestObject} in the previous run.","48","     *","49","     * @return null","50","     *      if no such counter part exists.","52","    public abstract TestObject getPreviousResult();","55","     * Time took to run this test. In seconds.","57","    public abstract float getDuration();","60","     * Returns the string representation of the {@link #getDuration()},","61","     * in a human readable format.","63","    public String getDurationString() {","64","        return Util.getTimeSpanString((long)(getDuration()*1000));","67","    \/**","68","     * Exposes this object through the remote API.","69","     *\/","70","    public Api getApi() {","71","        return new Api(this);","72","    }","74","    \/**","75","     * Gets the name of this object.","76","     *\/","77","    public \/*abstract*\/ String getName() {return \"\";}","79","    \/**","80","     * Gets the version of {@link #getName()} that's URL-safe.","81","     *\/","82","    public String getSafeName() {","83","        return safe(getName());","84","    }","85","","86","    \/**","87","     * #2988: uniquifies a {@link #getSafeName} amongst children of the parent.","88","     *\/","89","    protected final synchronized String uniquifyName(Collection<? extends TestObject> siblings, String base) {","90","        String uniquified = base;","91","        int sequence = 1;","92","        for (TestObject sibling : siblings) {","93","            if (sibling != this && uniquified.equals(UNIQUIFIED_NAMES.get(sibling))) {","94","                uniquified = base + '_' + ++sequence;","95","            }","96","        }","97","        UNIQUIFIED_NAMES.put(this, uniquified);","98","        return uniquified;","99","    }","100","    private static final Map<TestObject,String> UNIQUIFIED_NAMES = new WeakHashMap<TestObject,String>();","101","","102","    \/**","103","     * Replaces URL-unsafe characters.","104","     *\/","105","    protected static String safe(String s) {","106","        \/\/ 3 replace calls is still 2-3x faster than a regex replaceAll","107","        return s.replace('\/','_').replace('\\\\', '_').replace(':','_');","108","    }","109","","110","    private static final long serialVersionUID = 1L;"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/TestAction.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/TestResult.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, id:cactusman, Tom Huybrechts","25","import hudson.AbortException;","26","import hudson.Util;","32","import java.io.PrintWriter;","33","import java.io.StringWriter;","42","import org.apache.tools.ant.DirectoryScanner;","43","import org.dom4j.DocumentException;","44","import org.kohsuke.stapler.StaplerRequest;","45","import org.kohsuke.stapler.StaplerResponse;","46","import org.kohsuke.stapler.export.Exported;","47","","86","    ","100","    ","101","    public TestObject getParent() {","102","    \treturn null;","103","    }","104","    ","105","    public String getId() {","106","    \treturn \"\";","107","    }","108","    ","109","    @Override","110","    public TestResult getTestResult() {","111","    \treturn this;","112","    }","183","            if (!reportFile.getPath().endsWith(\".xml\")) {","186","            } else {","187","                SuiteResult sr = new SuiteResult(reportFile.getName(), \"\", \"\");","188","                StringWriter writer = new StringWriter();","189","                e.printStackTrace(new PrintWriter(writer));","190","                String error = \"Failed to read test report file \"+reportFile.getAbsolutePath()+\"\\n\"+writer.toString();","191","                sr.addCase(new CaseResult(sr,\"<init>\",error));","192","                add(sr);","194","            }","215","    @Override","216","    public TestResult getResultInBuild(AbstractBuild<?, ?> build) {","217","        TestResultAction tra = build.getAction(TestResultAction.class);","218","        if (tra == null) return null;","219","        return tra.getResult();","220","    }","221","    ","273","    public Object getDynamic(String token, StaplerRequest req, StaplerResponse rsp) {","274","        PackageResult result = byPackage(token);","275","        if (result != null) {","276","        \treturn result;","277","        } else {","278","        \treturn super.getDynamic(token, req, rsp);","279","        }","289","    "],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, id:cactusman","27","import hudson.*;","28","import org.apache.tools.ant.DirectoryScanner;","29","import org.dom4j.DocumentException;","30","import org.kohsuke.stapler.StaplerRequest;","31","import org.kohsuke.stapler.StaplerResponse;","32","import org.kohsuke.stapler.export.Exported;","82","","166","            if(!reportFile.getPath().endsWith(\".xml\"))","169","            else","242","    public PackageResult getDynamic(String packageName, StaplerRequest req, StaplerResponse rsp) {","243","        return byPackage(packageName);","253",""]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/JUnitResultArchiver.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Martin Eigenbrodt, Tom Huybrechts","25","import hudson.AbortException;","30","import hudson.FilePath.FileCallable;","39","import hudson.model.Descriptor;","40","import hudson.model.Result;","41","import hudson.model.Saveable;","44","import hudson.tasks.BuildStepMonitor;","47","import hudson.tasks.junit.TestResultAction.Data;","50","import hudson.util.DescribableList;","52","","53","import java.io.File;","54","import java.io.IOException;","55","import java.io.Serializable;","56","import java.util.ArrayList;","57","import java.util.List;","58","","59","import net.sf.json.JSONObject;","60","","66","import org.kohsuke.stapler.StaplerRequest;","70"," * ","73","public class JUnitResultArchiver extends Recorder implements Serializable,","74","\t\tMatrixAggregatable {","76","\t\/**","77","\t * {@link FileSet} \"includes\" string, like \"foo\/bar\/*.xml\"","78","\t *\/","79","\tprivate final String testResults;","81","\tprivate final DescribableList<TestDataPublisher, Descriptor<TestDataPublisher>> testDataPublishers;","83","\t\/**","84","\t * left for backwards compatibility","85","\t * ","86","\t * @param testResults","87","\t *\/","88","\t@Deprecated","89","\tpublic JUnitResultArchiver(String testResults) {","90","\t\tthis(testResults, null);","91","\t}","92","\t","93","\t@DataBoundConstructor","94","\tpublic JUnitResultArchiver(","95","\t\t\tString testResults,","96","\t\t\tDescribableList<TestDataPublisher, Descriptor<TestDataPublisher>> testDataPublishers) {","97","\t\tthis.testResults = testResults;","98","\t\tthis.testDataPublishers = testDataPublishers;","99","\t}","101","\tpublic boolean perform(AbstractBuild build, Launcher launcher,","102","\t\t\tBuildListener listener) throws InterruptedException, IOException {","103","\t\tlistener.getLogger().println(Messages.JUnitResultArchiver_Recording());","104","\t\tTestResultAction action;","105","\t\t","106","\t\tfinal String testResults = build.getEnvironment(listener).expand(this.testResults);","108","\t\ttry {","109","\t\t\tfinal long buildTime = build.getTimestamp().getTimeInMillis();","110","\t\t\tfinal long nowMaster = System.currentTimeMillis();","112","\t\t\tTestResult result = build.getWorkspace().act(","113","\t\t\t\t\tnew FileCallable<TestResult>() {","114","\t\t\t\t\t\tpublic TestResult invoke(File ws, VirtualChannel channel)","115","\t\t\t\t\t\t\t\tthrows IOException {","116","\t\t\t\t\t\t\tfinal long nowSlave = System.currentTimeMillis();","118","\t\t\t\t\t\t\tFileSet fs = Util.createFileSet(ws, testResults);","119","\t\t\t\t\t\t\tDirectoryScanner ds = fs.getDirectoryScanner();","121","\t\t\t\t\t\t\tString[] files = ds.getIncludedFiles();","122","\t\t\t\t\t\t\tif (files.length == 0) {","123","\t\t\t\t\t\t\t\t\/\/ no test result. Most likely a configuration","124","\t\t\t\t\t\t\t\t\/\/ error or fatal problem","125","\t\t\t\t\t\t\t\tthrow new AbortException(","126","\t\t\t\t\t\t\t\t\t\tMessages","127","\t\t\t\t\t\t\t\t\t\t\t\t.JUnitResultArchiver_NoTestReportFound());","128","\t\t\t\t\t\t\t}","130","\t\t\t\t\t\t\treturn parseResult(ds, buildTime","131","\t\t\t\t\t\t\t\t\t+ (nowSlave - nowMaster));","132","\t\t\t\t\t\t}","133","\t\t\t\t\t});","135","\t\t\taction = new TestResultAction(build, result, listener);","136","\t\t\tif (result.getPassCount() == 0 && result.getFailCount() == 0)","137","\t\t\t\tthrow new AbortException(Messages","138","\t\t\t\t\t\t.JUnitResultArchiver_ResultIsEmpty());","140","\t\t\tList<Data> data = new ArrayList<Data>();","141","\t\t\tif (testDataPublishers != null) {","142","\t\t\t\tfor (TestDataPublisher tdp : testDataPublishers) {","143","\t\t\t\t\tData d = tdp.getTestData(build, launcher, listener, result);","144","\t\t\t\t\tif (d != null) {","145","\t\t\t\t\t\tdata.add(d);","146","\t\t\t\t\t}","147","\t\t\t\t}","148","\t\t\t}","150","\t\t\taction.setData(data);","152","\t\t\tCHECKPOINT.block();","154","\t\t} catch (AbortException e) {","155","\t\t\tif (build.getResult() == Result.FAILURE)","156","\t\t\t\t\/\/ most likely a build failed before it gets to the test phase.","157","\t\t\t\t\/\/ don't report confusing error message.","158","\t\t\t\treturn true;","160","\t\t\tlistener.getLogger().println(e.getMessage());","161","\t\t\tbuild.setResult(Result.FAILURE);","162","\t\t\treturn true;","163","\t\t} catch (IOException e) {","164","\t\t\te.printStackTrace(listener.error(\"Failed to archive test reports\"));","165","\t\t\tbuild.setResult(Result.FAILURE);","166","\t\t\treturn true;","167","\t\t}","169","\t\tbuild.getActions().add(action);","170","\t\tCHECKPOINT.report();","172","\t\tif (action.getResult().getFailCount() > 0)","173","\t\t\tbuild.setResult(Result.UNSTABLE);","175","\t\treturn true;","176","\t}","178","\tprotected TestResult parseResult(DirectoryScanner ds, long buildTime)","179","\t\t\tthrows IOException {","180","\t\treturn new TestResult(buildTime, ds);","181","\t}","183","\t\/**","184","\t * This class does explicit checkpointing.","185","\t *\/","186","\tpublic BuildStepMonitor getRequiredMonitorService() {","187","\t\treturn BuildStepMonitor.NONE;","188","\t}","190","\tpublic String getTestResults() {","191","\t\treturn testResults;","192","\t}","194","\tpublic DescribableList<TestDataPublisher, Descriptor<TestDataPublisher>> getTestDataPublishers() {","195","\t\treturn testDataPublishers;","196","\t}","198","\t@Override","199","\tpublic Action getProjectAction(AbstractProject<?, ?> project) {","200","\t\treturn new TestResultProjectAction(project);","201","\t}","202","","203","\tpublic MatrixAggregator createAggregator(MatrixBuild build,","204","\t\t\tLauncher launcher, BuildListener listener) {","205","\t\treturn new TestResultAggregator(build, launcher, listener);","206","\t}","207","","208","\t\/**","209","\t * Test result tracks the diff from the previous run, hence the checkpoint.","210","\t *\/","211","\tprivate static final CheckPoint CHECKPOINT = new CheckPoint(","212","\t\t\t\"JUnit result archiving\");","213","","214","\tprivate static final long serialVersionUID = 1L;","215","","216","\t@Extension","217","\tpublic static class DescriptorImpl extends BuildStepDescriptor<Publisher> {","218","\t\tpublic String getDisplayName() {","219","\t\t\treturn Messages.JUnitResultArchiver_DisplayName();","220","\t\t}","221","","222","\t\tpublic String getHelpFile() {","223","\t\t\treturn \"\/help\/tasks\/junit\/report.html\";","224","\t\t}","225","","226","\t\t@Override","227","\t\tpublic Publisher newInstance(StaplerRequest req, JSONObject formData)","228","\t\t\t\tthrows hudson.model.Descriptor.FormException {","229","\t\t\tString testResults = formData.getString(\"testResults\");","230","\t\t\tDescribableList<TestDataPublisher, Descriptor<TestDataPublisher>> testDataPublishers = new DescribableList<TestDataPublisher, Descriptor<TestDataPublisher>>(","231","\t\t\t\t\tnew Saveable() {","232","\t\t\t\t\t\tpublic void save() throws IOException {","233","\t\t\t\t\t\t\t\/\/ no-op","234","\t\t\t\t\t\t}","235","\t\t\t\t\t});","236","\t\t\ttestDataPublishers.rebuild(req, formData, TestDataPublisher.all());","237","","238","\t\t\treturn new JUnitResultArchiver(testResults, testDataPublishers);","239","\t\t}","240","","241","\t\t\/**","242","\t\t * Performs on-the-fly validation on the file mask wildcard.","243","\t\t *\/","244","\t\tpublic FormValidation doCheckTestResults(","245","\t\t\t\t@AncestorInPath AbstractProject project,","246","\t\t\t\t@QueryParameter String value) throws IOException {","247","\t\t\treturn FilePath.validateFileMask(project.getSomeWorkspace(), value);","248","\t\t}","249","","250","\t\tpublic boolean isApplicable(Class<? extends AbstractProject> jobType) {","251","\t\t\treturn true;","252","\t\t}","253","\t}"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Martin Eigenbrodt","27","import hudson.FilePath.FileCallable;","30","import hudson.AbortException;","38","import hudson.model.Result;","44","import hudson.tasks.BuildStepMonitor;","53","","54","import java.io.File;","55","import java.io.IOException;","56","import java.io.Serializable;","60"," *","63","public class JUnitResultArchiver extends Recorder implements Serializable, MatrixAggregatable {","65","    \/**","66","     * {@link FileSet} \"includes\" string, like \"foo\/bar\/*.xml\"","67","     *\/","68","    private final String testResults;","69","    ","70","    @DataBoundConstructor","71","    public JUnitResultArchiver(String testResults) {","72","        this.testResults = testResults;","73","    }","75","    public boolean perform(AbstractBuild build, Launcher launcher, BuildListener listener) throws InterruptedException, IOException {","76","        listener.getLogger().println(Messages.JUnitResultArchiver_Recording());","77","        TestResultAction action;","79","        try {","80","            final long buildTime = build.getTimestamp().getTimeInMillis();","81","            final long nowMaster = System.currentTimeMillis();","83","            TestResult result = build.getWorkspace().act(new FileCallable<TestResult>() {","84","                public TestResult invoke(File ws, VirtualChannel channel) throws IOException {","85","                    final long nowSlave = System.currentTimeMillis();","87","                    FileSet fs = Util.createFileSet(ws,testResults);","88","                    DirectoryScanner ds = fs.getDirectoryScanner();","90","                    String[] files = ds.getIncludedFiles();","91","                    if(files.length==0) {","92","                        \/\/ no test result. Most likely a configuration error or fatal problem","93","                        throw new AbortException(Messages.JUnitResultArchiver_NoTestReportFound());","94","                    }","96","                    return parseResult(ds, buildTime + (nowSlave - nowMaster));","97","                }","98","            });","100","            CHECKPOINT.block();","101","            action = new TestResultAction(build, result, listener);","102","            if(result.getPassCount()==0 && result.getFailCount()==0)","103","                throw new AbortException(Messages.JUnitResultArchiver_ResultIsEmpty());","104","        } catch (AbortException e) {","105","            if(build.getResult()==Result.FAILURE)","106","                \/\/ most likely a build failed before it gets to the test phase.","107","                \/\/ don't report confusing error message.","108","                return true;","110","            listener.getLogger().println(e.getMessage());","111","            build.setResult(Result.FAILURE);","112","            return true;","113","        } catch (IOException e) {","114","            e.printStackTrace(listener.error(\"Failed to archive test reports\"));","115","            build.setResult(Result.FAILURE);","116","            return true;","117","        }","119","        build.getActions().add(action);","120","        CHECKPOINT.report();","122","        if(action.getResult().getFailCount()>0)","123","            build.setResult(Result.UNSTABLE);","125","        return true;","126","    }","128","    protected TestResult parseResult(DirectoryScanner ds, long buildTime) throws IOException {","129","        return new TestResult(buildTime, ds);","130","    }","132","    \/**","133","     * This class does explicit checkpointing.","134","     *\/","135","    public BuildStepMonitor getRequiredMonitorService() {","136","        return BuildStepMonitor.NONE;","137","    }","139","    public String getTestResults() {","140","        return testResults;","141","    }","143","    @Override","144","    public Action getProjectAction(AbstractProject<?, ?> project) {","145","        return new TestResultProjectAction(project);","146","    }","149","    public MatrixAggregator createAggregator(MatrixBuild build, Launcher launcher, BuildListener listener) {","150","        return new TestResultAggregator(build,launcher,listener);","151","    }","152","    \/**","153","     * Test result tracks the diff from the previous run, hence the checkpoint.","154","     *\/","155","    private static final CheckPoint CHECKPOINT = new CheckPoint(\"JUnit result archiving\");","157","    private static final long serialVersionUID = 1L;","159","    @Extension","160","    public static class DescriptorImpl extends BuildStepDescriptor<Publisher> {","161","        public String getDisplayName() {","162","            return Messages.JUnitResultArchiver_DisplayName();","163","        }","165","        public String getHelpFile() {","166","            return \"\/help\/tasks\/junit\/report.html\";","167","        }","169","        \/**","170","         * Performs on-the-fly validation on the file mask wildcard.","171","         *\/","172","        public FormValidation doCheckTestResults(@AncestorInPath AbstractProject project, @QueryParameter String value) throws IOException {","173","            return FilePath.validateFileMask(project.getSomeWorkspace(),value);","174","        }","176","        public boolean isApplicable(Class<? extends AbstractProject> jobType) {","177","            return true;","178","        }","179","    }"]}],"maven-plugin\/src\/main\/resources\/hudson\/maven\/MavenTestDataPublisher\/config.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/TabulatedResult.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, Tom Huybrechts"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer","40","     * Gets the total number of passed tests.","41","     *\/","42","    public abstract int getPassCount();","43","","44","    \/**","45","     * Gets the total number of failed tests.","46","     *\/","47","    public abstract int getFailCount();","48","","49","    \/**","50","     * Gets the total number of skipped tests.","51","     *\/","52","    public abstract int getSkipCount();","53","","54","    \/**","55","     * Gets the total number of tests.","56","     *\/","57","    public final int getTotalCount() {","58","        return getPassCount()+getFailCount()+getSkipCount();","59","    }","60","","61","    \/**"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/index.jelly":[{"add":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, Seiji Sogabe, Tom Huybrechts","27","    <st:include page=\"sidepanel.jelly\" \/>","56","        <a href=\"history\">","58","        <\/a>","61","      <t:editableDescription permission=\"${it.owner.BUILD}\"\/>","62","","63","      <table style=\"margin-top: 1em; margin-left:0em;\">","64","\t\t  <j:forEach var=\"action\" items=\"${it.testActions}\">","65","\t          <st:include page=\"summary.jelly\" from=\"${action}\" optional=\"true\" it=\"${action}\" \/>","66","\t\t  <\/j:forEach>","67","\t  <\/table>","70","      <pre>\"${it.annotate(it.errorDetails)}<\/pre>","72","      <pre><lo:out value=\"${it.annotate(it.errorStackTrace)}\"\/><\/pre>","76","        <pre>${it.annotate(it.stdout)}<\/pre>","81","        <pre>${it.annotate(it.stderr)}<\/pre>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, Seiji Sogabe","27","    <st:include it=\"${it.owner}\" page=\"sidepanel.jelly\" \/>","59","    <d:taglib uri=\"hudson:linkout\">","60","        <d:bean name=\"out\" className=\"hudson.util.HyperlinkingOutTag\"\/>","61","    <\/d:taglib>","64","      <pre><lo:out value=\"${it.errorDetails}\"\/><\/pre>","66","      <pre><lo:out value=\"${it.errorStackTrace}\"\/><\/pre>","70","        <pre><lo:out value=\"${it.stdout}\"\/><\/pre>","75","        <pre><lo:out value=\"${it.stderr}\"\/><\/pre>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/TestObject\/sidepanel.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/History\/index.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/CaseResult\/summary.jelly":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/tasks\/junit\/JUnitResultArchiverTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/sidepanel.jelly":[{"add":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Tom Huybrechts","32","      <st:include page=\"tasks.jelly\"\/>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","32","      <l:task icon=\"images\/24x24\/up.gif\" href=\"${it.upUrl}\" title=\"${%Back to Project}\" \/>","33","      <l:task icon=\"images\/24x24\/search.gif\" href=\"${buildUrl.baseUrl}\/\" title=\"${%Status}\" \/>","34","      <l:task icon=\"images\/24x24\/notepad.gif\" href=\"${buildUrl.baseUrl}\/changes\" title=\"${%Changes}\" \/>","35","      <j:choose>","36","        <j:when test=\"${it.logFile.length() > 200000}\">","37","          <!-- Show raw link directly so user need not click through live console page. -->","38","          <div class=\"task\">","39","            <a href=\"${buildUrl.baseUrl}\/console\">","40","              <img width=\"24\" height=\"24\" style=\"margin: 2px;\" src=\"${imagesURL}\/24x24\/terminal.gif\" alt=\"\"\/>","41","            <\/a>","42","            <st:nbsp \/>","43","            <a href=\"${buildUrl.baseUrl}\/console\">${%Console Output}<\/a>","44","            <st:nbsp \/>","45","            <a href=\"${buildUrl.baseUrl}\/consoleText\">[${%raw}]<\/a>","46","          <\/div>","47","        <\/j:when>","48","        <j:otherwise>","49","          <l:task icon=\"images\/24x24\/terminal.gif\" href=\"${buildUrl.baseUrl}\/console\" title=\"${%Console Output}\" \/>","50","        <\/j:otherwise>","51","      <\/j:choose>"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/CaseResult.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, Seiji Sogabe, Tom Huybrechts","26","import hudson.model.Run;","30","import java.util.Comparator;","31","","32","import org.dom4j.Element;","33","import org.kohsuke.stapler.export.Exported;","143","    ","144","    public ClassResult getParent() {","145","    \treturn classResult;","146","    }","241","","242","\t@Override","243","\tpublic int getFailCount() {","244","\t\tif (!isPassed() && !isSkipped()) return 1; else return 0;","245","\t}","246","","247","\t@Override","248","\tpublic int getSkipCount() {","249","\t\tif (isSkipped()) return 1; else return 0;","250","\t}","251","\t","252","\t@Override","253","\tpublic int getPassCount() {","254","\t\treturn isPassed() ? 1 : 0; ","255","\t}","256","\t","265","    ","266","    public Run<?,?> getFailedSinceRun() {","267","    \treturn getOwner().getParent().getBuildByNumber(failedSince);","268","    }","298","        return getSuiteResult().getStdout();","310","        return getSuiteResult().getStderr();","319","    ","320","    @Override","321","    public CaseResult getResultInBuild(AbstractBuild<?, ?> build) {","322","        ClassResult pr = getParent().getResultInBuild(build);","323","        if(pr==null)    return null;","324","        return pr.getCaseResult(getName());","325","    }","361","    public SuiteResult getSuiteResult() {","364","    ","365","\tpublic String annotate(String text) {","366","\t\tif (text == null)","367","\t\t\treturn null;","368","\t\ttext = text.replace(\"&\", \"&amp;\").replace(\"<\", \"&lt;\").replaceAll(","369","\t\t\t\t\"\\\\b(https?:\/\/[^\\\\s)>]+)\", \"<a href=\\\"$1\\\">$1<\/a>\");","370","\t\t","371","\t\tfor (TestAction action: getTestActions()) {","372","\t\t\ttext = action.annotate(text);","373","\t\t}","374","\t\t","375","\t\treturn text;","376","\t}","379","        return getSuiteResult().getParent().getOwner();"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, Seiji Sogabe","26","import org.dom4j.Element;","27","import org.kohsuke.stapler.export.Exported;","29","import java.util.Comparator;","272","        return getParent().getStdout();","284","        return getParent().getStderr();","328","    public SuiteResult getParent() {","333","        return parent.getParent().getOwner();"]}],"test\/src\/test\/resources\/hudson\/tasks\/junit\/JUnitResultArchiverTest.zip":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/PackageResult.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, id:cactusman, Tom Huybrechts","59","    ","60","    public TestResult getParent() {","61","    \treturn parent;","62","    }","79","    @Override","80","    public PackageResult getResultInBuild(AbstractBuild<?, ?> build) {","81","        TestResult tr = parent.getResultInBuild(build);","82","        if(tr==null)    return null;","83","        return tr.byPackage(getName());","84","    }","85","","114","    public Object getDynamic(String name, StaplerRequest req, StaplerResponse rsp) {","115","        ClassResult result = getClassResult(name);","116","        if (result != null) {","117","        \treturn result;","118","        } else {","119","        \treturn super.getDynamic(name, req, rsp);","120","        }","123","\tpublic ClassResult getClassResult(String name) {","124","\t\treturn classes.get(name);","125","\t}","126","","146","        ClassResult c = getClassResult(sn);"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Daniel Dyer, id:cactusman","69","    public AbstractBuild<?,?> getOwner() {","70","        return parent.getOwner();","71","    }","72","","107","    public ClassResult getDynamic(String name, StaplerRequest req, StaplerResponse rsp) {","108","        return classes.get(name);","130","        ClassResult c = classes.get(sn);"]}],"core\/src\/main\/resources\/hudson\/tasks\/test\/MatrixTestResult\/index.jelly":[{"add":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Red Hat, Inc., Tom Huybrechts","43","              <a href=\"..\/${report.child.project.shortUrl}\/testReport\">${report.child.project.name}<\/a>","75","            <a href=\"..\/${report.child.project.shortUrl}\/testReport\">${report.child.project.name}<\/a>","89","\t\t          \t<st:nbsp\/>","90","\t\t\t        <j:forEach var=\"badge\" items=\"${f.testActions}\">","91","\t\t\t          <st:include it=\"${badge}\" page=\"badge.jelly\" optional=\"true\"\/>","92","\t\t\t        <\/j:forEach>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Red Hat, Inc.","43","              <a href=\"..\/${report.child.project.shortUrl}\">${report.child.project.name}<\/a>","75","            <a href=\"..\/${report.child.project.shortUrl}\">${report.child.project.name}<\/a>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/MetaTabulatedResult\/body.jelly":[{"add":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman, Tom Huybrechts","25","","26","\t<script type=\"text\/javascript\">","27","\t\t<!-- TODO make sure load doesn't happen every time -->","28","\t\tfunction showStackTrace(id,query) {","29","\t\t\tvar element = document.getElementById(id)","30","\t\t\telement.style.display = \"\";","31","\t\t\tdocument.getElementById(id + \"-showlink\").style.display = \"none\";","32","\t\t\tdocument.getElementById(id + \"-hidelink\").style.display = \"\";","33","\t\t\t","34","\t\t\tvar rqo = new XMLHttpRequest();","35","\t\t\trqo.open('GET', query, true);","36","\t\t\trqo.onreadystatechange = function() { element.innerHTML = rqo.responseText; }  ","37","\t\t\trqo.send(null);","38","\t\t}","39","\t\t","40","\t\tfunction hideStackTrace(id) {","41","\t\t\tdocument.getElementById(id).style.display = \"none\";","42","\t\t\tdocument.getElementById(id + \"-showlink\").style.display = \"\";","43","\t\t\tdocument.getElementById(id + \"-hidelink\").style.display = \"none\";","44","\t\t}","45","  <\/script>","46","","53","        <td class=\"pane-header\" style=\"width:3em\">${%Age}<\/td>","58","\t\t\t<a id=\"test-${f.fullName}-showlink\" href=\"#\"","59","\t\t\t\tonclick='javascript:showStackTrace(\"test-${f.fullName}\",\"${f.getRelativePathFrom(it)}\/summary\")'>&gt;&gt;&gt;<\/a>","60","\t\t\t<a id=\"test-${f.fullName}-hidelink\" href=\"#\" style=\"display:none\"","61","\t\t\t\tonclick='javascript:hideStackTrace(\"test-${f.fullName}\")'>&lt;&lt;&lt;<\/a>","62","          \t<st:nbsp\/>","64","          \t<st:nbsp\/>","65","\t        <j:forEach var=\"badge\" items=\"${f.testActions}\">","66","\t          <st:include it=\"${badge}\" page=\"badge.jelly\" optional=\"true\"\/>","67","\t        <\/j:forEach>","68","\t\t\t<div id=\"test-${f.fullName}\" class=\"hidden\" style=\"display:none\">","69","\t\t\t${%Loading...}","70","\t\t\t<\/div>","72","          ","77","            <a href=\"${rootUrl}\/${f.failedSinceRun.url}\">${f.age}<\/a>","92","        <td class=\"pane-header\" style=\"width:5em\">${%Skip}<\/td>","93","        <td class=\"pane-header\" style=\"width:1em; font-size:smaller; white-space:nowrap;\">(${%diff})<\/td>","101","            <td class=\"pane\">","102","\t            <a href=\"${p.safeName}\/\"><span style='${prev==null?\"font-weight:bold\":\"\"}'>${p.name}<\/span><\/a>","103","\t          \t<st:nbsp\/>","104","\t\t        <j:forEach var=\"badge\" items=\"${p.testActions}\">","105","\t\t          <st:include it=\"${badge}\" page=\"badge.jelly\" optional=\"true\"\/>","106","\t\t        <\/j:forEach>","107","            <\/td>","113","            <td class=\"pane\" style=\"text-align:right\">${p.skipCount}<\/td>","114","            <td class=\"pane\" style=\"text-align:right\">","115","              ${h.getDiffString2(p.skipCount-prev.skipCount)}","116","            <\/td>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, id:cactusman","31","        <td class=\"pane-header\" style=\"width:4em\">${%Age}<\/td>","42","            ${f.age}","64","            <td class=\"pane\"><a href=\"${p.safeName}\/\">${p.name}<\/a><\/td>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/JUnitResultArchiver\/config.jelly":[{"add":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Tom Huybrechts","24","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\"","25","\txmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:f=\"\/lib\/form\">","26","\t<f:entry title=\"${%Test report XMLs}\" description=\"${%description}\"","27","\t\tfield=\"testResults\">","28","\t\t<f:textbox \/>","29","\t<\/f:entry>","30","\t<j:invokeStatic var=\"testDataPublisherDescriptors\"","31","\t\tclassName=\"hudson.tasks.junit.TestDataPublisher\" method=\"all\" \/>","32","\t<j:if test=\"${testDataPublisherDescriptors.size() > 0}\">","33","\t<f:entry title=\"Additional test report features\" field=\"testDataPublishers\">","34","\t\t<j:set var=\"testDataPublisherInstances\" value=\"${instance.testDataPublishers}\"\/>","35","\t\t<table>","36","\t\t\t<j:forEach var=\"tdpd\" items=\"${testDataPublisherDescriptors}\">","37","\t\t\t\t<f:optionalBlock name=\"${tdpd.jsonSafeClassName}\" help=\"${tdpd.helpFile}\"","38","\t\t\t\t\ttitle=\"${tdpd.displayName}\" checked=\"${testDataPublisherInstances.get(tdpd)!=null}\">","39","\t\t\t\t\t<j:set var=\"descriptor\" value=\"${tdpd}\" \/>","40","\t\t\t\t\t<j:set var=\"instance\" value=\"${testDataPublisherInstances.get(tdpd)}\" \/>","41","\t\t\t\t\t<st:include from=\"${tdpd}\" page=\"${tdpd.configPage}\" optional=\"true\" \/>","42","\t\t\t\t<\/f:optionalBlock>","43","\t\t\t<\/j:forEach>","44","\t\t<\/table>","45","\t<\/f:entry>","46","\t<\/j:if>"],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","24","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:f=\"\/lib\/form\">","25","  <f:entry title=\"${%Test report XMLs}\" description=\"${%description}\" field=\"testResults\">","26","    <f:textbox \/>","27","  <\/f:entry>"]}],"core\/src\/main\/resources\/hudson\/tasks\/junit\/TabulatedResult\/index.jelly":[{"add":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Tom Huybrechts","26","    <st:include page=\"sidepanel.jelly\" \/>","34","        <div style=\"text-align:right;\">","35","        <a href=\"history\">","36","          Took ${it.durationString} ","37","        <\/a>","38","        <\/div>","39","","40","      <t:editableDescription permission=\"${it.owner.BUILD}\"\/>","41","","42","      <table style=\"margin-top: 1em; margin-left:0em;\">","43","\t  <j:forEach var=\"action\" items=\"${it.testActions}\">","44","          <st:include page=\"summary.jelly\" from=\"${action}\" optional=\"true\" it=\"${action}\" \/>","45","\t  <\/j:forEach>","46","\t  <\/table>","47",""],"delete":["3","Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","26","    <st:include it=\"${it.owner}\" page=\"sidepanel.jelly\" \/>"]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/TestDataPublisher.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/junit\/SuiteResult.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Erik Ramfelt, Xavier Le Vourch, Tom Huybrechts","25","import java.io.File;","26","import java.io.Serializable;","27","import java.util.ArrayList;","28","import java.util.HashSet;","29","import java.util.List;","30","import java.util.Set;","31","","54","\tprivate final String file;","75","        this.file = null;","108","    \tthis.file = xmlReport.getAbsolutePath();","190","    ","191","    \/**","192","     * The absolute path to the original test report. OS-dependent.","193","     *\/","194","    public String getFile() {","195","\t\treturn file;","196","\t}","198","\tpublic TestResult getParent() {","232","    ","233","\tpublic Set<String> getClassNames() {","234","\t\tSet<String> result = new HashSet<String>();","235","\t\tfor (CaseResult c : cases) {","236","\t\t\tresult.add(c.getClassName());","237","\t\t}","238","\t\treturn result;","239","\t}"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Erik Ramfelt, Xavier Le Vourch","32","import java.io.File;","33","import java.io.Serializable;","34","import java.util.ArrayList;","35","import java.util.List;","36","","186","    public TestResult getParent() {"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/tasks.jelly":[{"add":[],"delete":[]}]}},"8a3e909d266ea59d7179fef21350e9aec1f4b245":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":"MODIFY","pom.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["127","      <version>build214-jenkins-2<\/version>"],"delete":["127","      <version>build214-jenkins-1<\/version>"]}],"changelog.html":[{"add":["66","  <li class='major rfe'>","67","    Performance improvement in master\/slave communication throughput","68","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7813\">issue 7813<\/a>)"],"delete":[]}],"core\/src\/main\/java\/hudson\/tasks\/ArtifactArchiver.java":[{"add":["34","import hudson.util.TimeUnit2;","125","        final long start = System.nanoTime();","161","        \/\/ System.out.println(\"Took \"+ TimeUnit2.NANOSECONDS.toMillis(System.nanoTime()-start));","162",""],"delete":[]}],"pom.xml":[{"add":["177","        <version>2.23<\/version>"],"delete":["177","        <version>2.22<\/version>"]}],"war\/pom.xml":[{"add":["273","                  <version>0.23<\/version>","274","                  <type>hpi<\/type>","275","                <\/artifactItem>","276","                <artifactItem>","277","                  <groupId>org.jenkins-ci.plugins<\/groupId>","278","                  <artifactId>credentials<\/artifactId>","279","                  <version>1.3.1<\/version>","280","                  <type>hpi<\/type>","281","                <\/artifactItem>","282","                <artifactItem>","283","                  <groupId>org.jenkins-ci.plugins<\/groupId>","284","                  <artifactId>ssh-credentials<\/artifactId>","285","                  <version>0.2<\/version>"],"delete":["273","                  <version>0.22<\/version>"]}]}},"688420177afa64deb4adc9b4b92eede221cad884":{"changes":{"core\/src\/main\/java\/hudson\/init\/impl\/GroovyInitScript.java":"MODIFY","test\/src\/test\/resources\/hudson\/init\/impl\/GroovyInitScriptTest\/errorsHandled.zip":"ADD","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/init\/impl\/GroovyInitScriptTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/init\/impl\/GroovyInitScript.java":[{"add":["38","import java.util.logging.Level;","80","    private static void execute(GroovyCodeSource initScript) {","82","        try {","83","            shell.evaluate(initScript);","84","        } catch (RuntimeException x) {","85","            LOGGER.log(Level.WARNING, \"Failed to run script \" + initScript.getName(), x);","86","        }"],"delete":["33","import java.util.Collections;","80","    private static void execute(GroovyCodeSource initScript) throws IOException {","82","        shell.evaluate(initScript);"]}],"test\/src\/test\/resources\/hudson\/init\/impl\/GroovyInitScriptTest\/errorsHandled.zip":[{"add":[],"delete":[]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Errors in <code>init.groovy<\/code> halted startup; changed to just log a warning.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17933\">issue 17933<\/a>)"],"delete":["57","  <li class=>"]}],"test\/src\/test\/java\/hudson\/init\/impl\/GroovyInitScriptTest.java":[{"add":[],"delete":[]}]}},"7acfbec4abac193add0192dba566a10eeb3d8ea6":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Run\/logKeep.jelly":[{"add":["29","  <j:if test=\"${it.parent.buildDiscarder!=null and it.canToggleLogKeep()}\">"],"delete":["29","  <j:if test=\"${it.parent.logRotator!=null and it.canToggleLogKeep()}\">"]}]}},"0f364e3a554a1bc6cddbfe7740993b835cae010e":{"changes":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/jna\/GNUCLibrary.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/ProcessTree.java":[{"add":["27","import com.sun.jna.NativeLong;","28","import com.sun.jna.Pointer;","29","import com.sun.jna.LastErrorException;","757","     * \/proc\/PID\/psinfo contains a psinfo_t struct. We use it to determine where the","758","     *     process arguments and environment are located in PID's address space.","759","     *     Note that the psinfo_t struct is different (different sized elements) for 32-bit","760","     *     vs 64-bit processes and the kernel will provide the version of the struct that","761","     *     matches the _reader_ (this Java process) regardless of whether PID is a","762","     *     32-bit or 64-bit process.","763","     *","764","     *     Note that this means that if PID is a 64-bit process, then a 32-bit Java","765","     *     process can not get meaningful values for envp and argv out of the psinfo_t. The","766","     *     values will have been truncated to 32-bits.","767","     *","768","     * \/proc\/PID\/as contains the address space of the process we are inspecting. We can","769","     *     follow the envp and argv pointers from psinfo_t to find the environment variables","770","     *     and process arguments. When following pointers in this address space we need to","771","     *     make sure to use 32-bit or 64-bit pointers depending on what sized pointers","772","     *     PID uses, regardless of what size pointers the Java process uses.","773","     *","774","     *     Note that the size of a 64-bit address space is larger than Long.MAX_VALUE (because","775","     *     longs are signed). So normal Java utilities like RandomAccessFile and FileChannel","776","     *     (which use signed longs as offsets) are not able to read from the end of the address","777","     *     space, where envp and argv will be. Therefore we need to use LIBC.pread() directly.","778","     *     when accessing this file.","786","            private static final byte PR_MODEL_ILP32 = 1;","787","            private static final byte PR_MODEL_LP64 = 2;","788","","789","            \/*","790","             * True if target process is 64-bit (Java process may be different).","791","             *\/","792","            private final boolean b64;","793","","796","             * Address of the environment vector.","798","            private final long envp;","800","             * Similarly, address of the arguments vector.","802","            private final long argp;","854","                    \/*","855","                     * Read the remainder of psinfo_t differently depending on whether the","856","                     * Java process is 32-bit or 64-bit.","857","                     *\/","858","                    if (Pointer.SIZE == 8) {","859","                        psinfo.seek(236);  \/\/ offset of pr_argc","860","                        argc = adjust(psinfo.readInt());","861","                        argp = adjustL(psinfo.readLong());","862","                        envp = adjustL(psinfo.readLong());","863","                        b64 = (psinfo.readByte() == PR_MODEL_LP64);","864","                    } else {","865","                        psinfo.seek(188);  \/\/ offset of pr_argc","866","                        argc = adjust(psinfo.readInt());","867","                        argp = to64(adjust(psinfo.readInt()));","868","                        envp = to64(adjust(psinfo.readInt()));","869","                        b64 = (psinfo.readByte() == PR_MODEL_LP64);","870","                    }","888","\t\tif (argc == 0) {","889","\t\t    return arguments;","890","\t\t}","892","                int psize = b64 ? 8 : 4;","893","                Memory m = new Memory(psize);","897","                    int fd = LIBC.open(getFile(\"as\").getAbsolutePath(), 0);","901","                            LIBC.pread(fd, m, new NativeLong(psize), new NativeLong(argp+n*psize));","902","                            long addr = b64 ? m.getLong(0) : m.getInt(0);","904","                            arguments.add(readLine(fd, addr, \"argv[\"+ n +\"]\"));","907","                        LIBC.close(fd);","909","                } catch (IOException | LastErrorException e) {","923","\t\tif (envp == 0) {","924","\t\t    return envVars;","925","\t\t}","926","","927","                int psize = b64 ? 8 : 4;","928","                Memory m = new Memory(psize);","932","                    int fd = LIBC.open(getFile(\"as\").getAbsolutePath(), 0);","936","                            LIBC.pread(fd, m, new NativeLong(psize), new NativeLong(envp+n*psize));","937","                            long addr = b64 ? m.getLong(0) : m.getInt(0);","938","                            if (addr == 0) \/\/ completed the walk","939","                                break;","942","                            envVars.addLine(readLine(fd, addr, \"env[\"+ n +\"]\"));","945","                        LIBC.close(fd);","947","                } catch (IOException | LastErrorException e) {","954","            private String readLine(int fd, long addr, String prefix) throws IOException {","956","                    LOGGER.finest(\"Reading \"+prefix+\" at \"+addr);","958","                Memory m = new Memory(1);","959","                byte ch = 1;","961","                while(true) {","962","                    LIBC.pread(fd, m, new NativeLong(1), new NativeLong(addr));","963","                    ch = m.getByte(0);","964","                    if (ch == 0)","965","                        break;","967","                    addr++;","994","        public static long adjustL(long i) {","995","            if(IS_LITTLE_ENDIAN) {","996","                return Long.reverseBytes(i);","997","            } else {","998","                return i;","999","            }","1000","        }"],"delete":["754","     * Amazingly, this single code works for both 32bit and 64bit Solaris, despite the fact","755","     * that does a lot of pointer manipulation and what not.","765","                 * Address of the environment vector. Even on 64bit Solaris this is still 32bit pointer.","767","            private final int envp;","769","                 * Similarly, address of the arguments vector.","771","            private final int argp;","823","                    psinfo.seek(188);  \/\/ now jump to pr_argc","824","                    argc = adjust(psinfo.readInt());","825","                    argp = adjust(psinfo.readInt());","826","                    envp = adjust(psinfo.readInt());","846","                    RandomAccessFile as = new RandomAccessFile(getFile(\"as\"),\"r\");","852","                            as.seek(to64(argp+n*4));","853","                            int p = adjust(as.readInt());","855","                            arguments.add(readLine(as, p, \"argv[\"+ n +\"]\"));","858","                        as.close();","860","                } catch (IOException e) {","875","                    RandomAccessFile as = new RandomAccessFile(getFile(\"as\"),\"r\");","881","                            as.seek(to64(envp+n*4));","882","                            int p = adjust(as.readInt());","883","                            if(p==0)","884","                                break;  \/\/ completed the walk","887","                            envVars.addLine(readLine(as, p, \"env[\"+ n +\"]\"));","890","                        as.close();","892","                } catch (IOException e) {","896","","900","            private String readLine(RandomAccessFile as, int p, String prefix) throws IOException {","902","                    LOGGER.finest(\"Reading \"+prefix+\" at \"+p);","904","                as.seek(to64(p));","906","                int ch,i=0;","907","                while((ch=as.read())>0) {","908","                    if((++i)%100==0 && LOGGER.isLoggable(FINEST))","909","                        LOGGER.finest(prefix +\" is so far \"+buf.toString());","910",""]}],"core\/src\/main\/java\/hudson\/util\/jna\/GNUCLibrary.java":[{"add":["31","import com.sun.jna.LastErrorException;","77","    int open(String pathname, int flags) throws LastErrorException;","80","    long pread(int fd, Memory buffer, NativeLong size, NativeLong offset) throws LastErrorException;"],"delete":[]}]}},"100202cf03db1fc4a0a7365f4ea585ed6ebadbcc":{"changes":{"core\/pom.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["773","                  <version>2.1.2<\/version>"],"delete":["773","                  <version>2.1.0<\/version>"]}],"war\/pom.xml":[{"add":["116","      <version>1.9.1<\/version>"],"delete":["116","      <version>1.9<\/version>"]}]}},"4581e0cb6e475471355ab74e440606155ec7f0d8":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/project\/upstream-downstream.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/project\/upstream-downstream.jelly":[{"add":["38","    <d:tag name=\"list\"> <!-- @title, @items and @up -->","46","              <local:relationship lhs=\"${up ? item : it}\" rhs=\"${up ? it : item}\"\/>","55","  <local:list title=\"${%Upstream Projects}\" items=\"${it.upstreamProjects}\" up=\"true\" \/>","56","  <local:list title=\"${%Downstream Projects}\" items=\"${it.downstreamProjects}\" up=\"false\" \/>","57","<\/j:jelly>"],"delete":["38","    <d:tag name=\"list\"> <!-- @title and @items -->","46","              <local:relationship lhs=\"${item}\" rhs=\"${it}\"\/>","55","  <j:set var=\"upstream\" value=\"${it.upstreamProjects}\" \/>","56","  <local:list title=\"${%Upstream Projects}\" items=\"${it.upstreamProjects}\" \/>","57","  <local:list title=\"${%Downstream Projects}\" items=\"${it.downstreamProjects}\" \/>","58","<\/j:jelly>"]}]}},"51e2cdc4ee85c5ce83eb43c82b131bf6d0b0236b":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["78","import org.kohsuke.stapler.DataBoundSetter;","295","","296","    @DataBoundSetter","297","    public void setDescription(String description) {","298","        this.description = description;","299","    }","300",""],"delete":["294","    "]}],"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["126","    @DataBoundSetter","127","    public void setJobFilters(List<ViewJobFilter> jobFilters) throws IOException {","128","        this.jobFilters.replaceBy(jobFilters);","129","    }","130","","178","    public Set<String> getJobNames() {","179","        return Collections.unmodifiableSet(jobNames);","180","    }","330","","334","","338","    @DataBoundSetter","473","","484","    @DataBoundSetter","493","    @DataBoundSetter","494","    public synchronized void setJobNames(Set<String> jobNames) {","495","        this.jobNames = new TreeSet<>(jobNames);","496","    }","497","","498","    @DataBoundSetter","499","    public void setStatusFilter(Boolean statusFilter) {","500","        this.statusFilter = statusFilter;","501","    }","502",""],"delete":["322","    ","326","    ","464","        "]}]}},"c2267b0ef69cc12cdc4f63e6843934b5d281fc65":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["342","                  <version>1.11<\/version>"],"delete":["342","                  <version>1.10<\/version>"]}]}},"376c6a0add41e0c2049b64edfdd464bb8717ed1b":{"changes":{"core\/src\/main\/java\/jenkins\/security\/ClassFilterImpl.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/ClassFilterImpl.java":[{"add":["275","        if (r.startsWith(\"jar:file:\/\") && r.endsWith(\".jar!\/\")) {","276","            \/\/ JENKINS-49543: also an old behavior of Tomcat. Legal enough, but unexpected by isLocationWhitelisted.","277","            r = r.substring(4, r.length() - 2);","278","        }"],"delete":[]}]}},"8c53e2f39464c5f0909bc195d05b79d9c24df384":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/model\/RunTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["330","            assert !actions.contains(null) : \"null action added by \" + factory;","2213","                String urlName = action.getUrlName();","2214","                if (urlName == null) {","2215","                    continue;","2216","                }","2217","                if (urlName.equals(token)) {","2219","                }"],"delete":["2212","                if(action.getUrlName().equals(token))"]}],"changelog.html":[{"add":["58","    NPE from <code>Run.getDynamic<\/code>.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17935\">issue 17935<\/a>)","60","  <li class=bug>"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/RunTest.java":[{"add":["25","import java.net.HttpURLConnection;","26","import java.util.Collection;","27","import java.util.Collections;","33","import org.jvnet.hudson.test.Bug;","73","","74","    @Bug(17935)","75","    @Test public void getDynamicInvisibleTransientAction() throws Exception {","76","        TransientBuildActionFactory.all().add(0, new TransientBuildActionFactory() {","77","            @Override public Collection<? extends Action> createFor(Run target) {","78","                return Collections.singleton(new Action() {","79","                    @Override public String getDisplayName() {","80","                        return \"Test\";","81","                    }","82","                    @Override public String getIconFileName() {","83","                        return null;","84","                    }","85","                    @Override public String getUrlName() {","86","                        return null;","87","                    }","88","                });","89","            }","90","        });","91","        j.assertBuildStatusSuccess(j.createFreeStyleProject(\"stuff\").scheduleBuild2(0));","92","        j.createWebClient().assertFails(\"job\/stuff\/1\/nonexistent\", HttpURLConnection.HTTP_NOT_FOUND);","93","    }","94",""],"delete":[]}]}},"37183f4c868e8f4b4c0779809dbe27f2d9846351":{"changes":{"test\/src\/test\/resources\/hudson\/maven\/maven-surefire-unstable.zip":"ADD","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/Maven.java":"MODIFY","test\/src\/test\/java\/hudson\/maven\/MavenOptsTest.java":"MODIFY"},"diff":{"test\/src\/test\/resources\/hudson\/maven\/maven-surefire-unstable.zip":[{"add":[],"delete":[]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSet.java":[{"add":["624","            return mavenOpts.replaceAll(\"[\\t\\r\\n]+\",\" \");","627","            String globalOpts = DESCRIPTOR.getGlobalMavenOpts();","628","            if (globalOpts!=null) {","629","                return globalOpts.replaceAll(\"[\\t\\r\\n]+\",\" \");","630","            }","631","            else {","632","                return globalOpts;","633","            }"],"delete":["624","            return mavenOpts;","627","            return DESCRIPTOR.getGlobalMavenOpts();"]}],"core\/src\/main\/java\/hudson\/tasks\/Maven.java":[{"add":["299","            env.put(\"MAVEN_OPTS\",jvmOptions.replaceAll(\"[\\t\\r\\n]+\",\" \"));"],"delete":["299","            env.put(\"MAVEN_OPTS\",jvmOptions);"]}],"test\/src\/test\/java\/hudson\/maven\/MavenOptsTest.java":[{"add":["10","import hudson.tasks.Maven.MavenInstallation;","86","    ","87","    @Bug(5651)","88","    public void testNewlinesInOptsRemoved() throws Exception {","89","        configureDefaultMaven(\"apache-maven-2.2.1\", MavenInstallation.MAVEN_21);","90","        MavenModuleSet m = createMavenProject();","91","\tm.setScm(new ExtractResourceSCM(getClass().getResource(\"maven-surefire-unstable.zip\")));","92","        m.setMavenOpts(\"-XX:MaxPermSize=512m\\r\\n-Xms128m\\r\\n-Xmx512m\");","93","        m.setGoals(\"install\");","94","        ","95","\tassertBuildStatus(Result.UNSTABLE, m.scheduleBuild2(0).get());","96","\tMavenModuleSetBuild pBuild = m.getLastBuild();","97","","98","\tassertEquals(\"Parent build should have Result.UNSTABLE\", Result.UNSTABLE, pBuild.getResult());","99","\t","100","    }","101","","102","}","103",""],"delete":["85","}"]}]}},"f4edf91782720d2e1246ddb48554511912af1491":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/test\/java\/hudson\/RemoveWindowsDirectoryJunctionTest.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["494","        \/*","495","         *  Windows Directory Junctions are effectively the same as Linux symlinks to directories.","496","         *  Unfortunately, the Java 7 NIO2 API function isSymbolicLink does not treat them as such.","497","         *  It thinks of them as normal directories.  To use the NIO2 API & treat it like a symlink,","498","         *  you have to go through BasicFileAttributes and do the following check:","499","         *     isSymbolicLink() || isOther()","500","         *  The isOther() call will include Windows reparse points, of which a directory junction is.","501","         *","502","         *  Since we already have a function that detects Windows junctions or symlinks and treats them","503","         *  both as symlinks, let's use that function and always call it before calling down to the","504","         *  NIO2 API.","505","         *","506","         *\/","514","        Boolean r = isSymlinkJava7(file);","515","        if (r != null) {","516","            return r;","517","        }"],"delete":["494","        Boolean r = isSymlinkJava7(file);","495","        if (r != null) {","496","            return r;","497","        }"]}],"core\/src\/test\/java\/hudson\/RemoveWindowsDirectoryJunctionTest.java":[{"add":[],"delete":[]}]}},"84d1abdcd42ab64198a29a40bdec268eac384b22":{"changes":{"core\/src\/main\/java\/hudson\/logging\/LogRecorder.java":"MODIFY","core\/src\/test\/java\/hudson\/logging\/LogRecorderTest.java":"ADD","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/logging\/LogRecorder.java":[{"add":["112","            if (name.length() == 0) {","113","                return true; \/\/ like root logger, includes everything","114","            }","118","            String rest = logName.substring(name.length());"],"delete":["115","","116","            String rest = r.getLoggerName().substring(name.length());"]}],"core\/src\/test\/java\/hudson\/logging\/LogRecorderTest.java":[{"add":[],"delete":[]}],"changelog.html":[{"add":["61","    Should be able to collect all log records at a given level using a blank logger name.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17983\">issue 17983<\/a>)","63","  <li class=bug>"],"delete":[]}]}},"a2a8721cfab152378076c9dbf716cff03cac5bbd":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["700","        requirePOST();"],"delete":[]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Configuring view when not logged in wipes view configuration","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11397\">issue 11397<\/a>)"],"delete":["57","  <li class=>"]}]}},"15a24dd637392f32b98fe76e53db8c7be429ce7d":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["1838","        if(json.optBoolean(\"hasSlaveAffinity\", json.has(\"label\"))) {","1839","            assignedNode = Util.fixEmptyAndTrim(json.optString(\"label\"));","1840","        } else if(req.hasParameter(\"_.assignedLabelString\")) {","1842","            \/\/ Keep this condition second for JENKINS-25533","1845","        } else  {"],"delete":["1838","        if(req.hasParameter(\"_.assignedLabelString\")) {","1842","        } else if(json.optBoolean(\"hasSlaveAffinity\", json.has(\"label\"))) {","1843","            assignedNode = Util.fixEmptyAndTrim(json.optString(\"label\"));","1844","        } else {"]}]}},"852ecdc5f2a7802fa74f425bd17ba028f787b2c1":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["91","      <version>4.1.2<\/version>"],"delete":["91","      <version>4.1<\/version>"]}]}},"9368197d256d2265512b16b360bd047735e3ee27":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SCMDescriptor.java":"MODIFY","core\/src\/main\/java\/hudson\/scm\/AutoBrowserHolder.java":"MODIFY","core\/src\/main\/java\/hudson\/scm\/SCMS.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SCMDescriptor.java":[{"add":["25","import hudson.RestrictedSince;","30","import org.kohsuke.accmod.Restricted;","31","import org.kohsuke.accmod.restrictions.NoExternalUse;","32","","37","","38","import java.util.concurrent.atomic.AtomicInteger;","56","    private final AtomicInteger generation = new AtomicInteger(1);","74","    \/**","75","     * Incremented every time a new {@link SCM} instance is created from this descriptor.","76","     * This is used to invalidate cache of {@link SCM#getEffectiveBrowser}. Due to the lack of synchronization and serialization,","77","     * this field doesn't really count the # of instances created to date,","78","     * but it's good enough for the cache invalidation.","79","     * @deprecated No longer used by default.","80","     *\/","81","    @Deprecated","82","    @Restricted(NoExternalUse.class) @RestrictedSince(\"TODO\")","83","    public int getGeneration() {","84","        return generation.get();","85","    }","86","","87","    \/**","88","     * Increments the generation value {@link SCMDescriptor#getGeneration} by one atomically.","89","     * @deprecated No longer used by default.","90","     *\/","91","    @Deprecated","92","    @Restricted(NoExternalUse.class) @RestrictedSince(\"TODO\")","93","    public void incrementGeneration() {","94","        generation.incrementAndGet();","95","    }","96",""],"delete":["50","    \/**","51","     * Incremented every time a new {@link SCM} instance is created from this descriptor. ","52","     * This is used to invalidate cache of {@link SCM#getEffectiveBrowser}. Due to the lack of synchronization and serialization,","53","     * this field doesn't really count the # of instances created to date,","54","     * but it's good enough for the cache invalidation.","55","     * @deprecated No longer used by default.","56","     *\/","57","    @Deprecated","58","    public volatile int generation = 1;"]}],"core\/src\/main\/java\/hudson\/scm\/AutoBrowserHolder.java":[{"add":["62","        int g = d.getGeneration();"],"delete":["62","        int g = d.generation;"]}],"core\/src\/main\/java\/hudson\/scm\/SCMS.java":[{"add":["62","        scm.getDescriptor().incrementGeneration();"],"delete":["62","        scm.getDescriptor().generation++;"]}]}},"c505dec68516837a4ca90d9e5a373ecce93730ed":{"changes":{"war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/css\/style.css":[{"add":["1162","  background-color: white;","1163","  color: black;"],"delete":["1162","  color: MenuText;","1163","  background-color: Menu;"]}]}},"bb265c5e95b0fe39128720b903914236962db41b":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["114","      <version>build217-jenkins-3<\/version>"],"delete":["114","      <version>build214-jenkins-3<\/version>"]}],"changelog.html":[{"add":["60","  <li class='major bug'>","61","    Upgrade Trilead SSH client library to version that does not cause connection loss when","62","    there is a lot of logging on the build slave and the performance improvements in","63","    ssh-slaves 0.27+ are enabled (","64","    <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18836\">issue 18836<\/a>,","65","    <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18879\">issue 18879<\/a>,","66","    <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-19619\">issue 19619<\/a>)"],"delete":[]}]}},"9d2b204ca1ab90d1a1102136aba13e4cd0146947":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/propertyTable.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/propertyTable.jelly":[{"add":["41","        <td class=\"pane\" style=\"white-space: normal\"><l:breakable value=\"${e.value}\"\/><\/td>","45","<\/j:jelly>"],"delete":["41","        <td class=\"pane\"><st:out value=\"${e.value}\"\/><\/td>","45","<\/j:jelly>"]}]}},"6f8540c34735621576876c6dfd423ff82996f5b1":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginWrapper.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/ViewDescriptor.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["1047","        getOwner().checkPermission(Item.CREATE);"],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginWrapper.java":[{"add":["658","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","667","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ViewDescriptor.java":[{"add":["81","        \/\/ TODO do we need a permissions check here?"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["292","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","341","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","358","    @Restricted(NoExternalUse.class)","391","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);"],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["995","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","1061","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","1090","        Jenkins.getInstance().checkPermission(Jenkins.ADMINISTER);","1123","    @Restricted(NoExternalUse.class)"],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["4258","     *","4259","     * @since 2.0","4261","    @Restricted(NoExternalUse.class)","4268","     *","4269","     * @since 2.0","4271","    @Restricted(NoExternalUse.class)","4602","     * @since 2.0","4604","    @Restricted(NoExternalUse.class)","4626","     * @since 2.0","4628","    @Restricted(NoExternalUse.class)"],"delete":["4596","     * @since FIXME","4619","     * @since FIXME"]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["842","        @Restricted(NoExternalUse.class)"],"delete":[]}]}},"4ed803cea2944e5f83c12e681066e772cceb6107":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/java\/jenkins\/InitReactorRunner.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["467","                                    } catch (CycleDetectedException e) { \/\/ TODO this should be impossible, since we override reactOnCycle to not throw the exception"],"delete":["467","                                    } catch (CycleDetectedException e) {"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["989","                String taskName = InitReactorRunner.getDisplayName(task);","1001","                } catch (Exception | Error x) {","1002","                    if (containsLinkageError(x)) {","1003","                        LOGGER.log(Level.WARNING, taskName + \" failed perhaps due to plugin dependency issues\", x);","1004","                    } else {","1005","                        throw x;","1006","                    }","1012","            private boolean containsLinkageError(Throwable x) {","1013","                if (x instanceof LinkageError) {","1014","                    return true;","1015","                }","1016","                Throwable x2 = x.getCause();","1017","                return x2 != null && containsLinkageError(x2);","1018","            }","3037","                    LOGGER.log(level, \"Started {0}\", InitReactorRunner.getDisplayName(t));","3041","                    LOGGER.log(level, \"Completed {0}\", InitReactorRunner.getDisplayName(t));","3045","                    LOGGER.log(SEVERE, \"Failed \" + InitReactorRunner.getDisplayName(t), err);"],"delete":["989","                String taskName = task.getDisplayName();","3024","                    LOGGER.log(level, \"Started \" + t.getDisplayName());","3028","                    LOGGER.log(level, \"Completed \" + t.getDisplayName());","3032","                    LOGGER.log(SEVERE, \"Failed \" + t.getDisplayName(), err);"]}],"core\/src\/main\/java\/jenkins\/InitReactorRunner.java":[{"add":["27","import org.kohsuke.accmod.Restricted;","28","import org.kohsuke.accmod.restrictions.NoExternalUse;","65","                LOGGER.log(level, \"Started {0}\", getDisplayName(t));","69","                LOGGER.log(level, \"Completed {0}\", getDisplayName(t));","73","                LOGGER.log(SEVERE, \"Failed \" + getDisplayName(t), err);","90","    \/** Like {@link Task#getDisplayName} but more robust. *\/","91","    @Restricted(NoExternalUse.class)","92","    public static String getDisplayName(Task t) {","93","        try {","94","            return t.getDisplayName();","95","        } catch (RuntimeException | Error x) {","96","            LOGGER.log(Level.WARNING, \"failed to find displayName of \" + t, x);","97","            return t.toString();","98","        }","99","    }","100",""],"delete":["63","                LOGGER.log(level,\"Started \"+t.getDisplayName());","67","                LOGGER.log(level,\"Completed \"+t.getDisplayName());","71","                LOGGER.log(SEVERE, \"Failed \"+t.getDisplayName(),err);"]}]}},"a2341e6b4c854a0cc183b601acdba7572ad79152":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/configure-common_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/configure-common.properties":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/JDK.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/configure-common.jelly":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/configure-common_pt_BR.properties":[{"add":[],"delete":["23","# (Default)","24","default.value=Default"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/configure-common.properties":[{"add":[],"delete":["22","default.value=(Default)"]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["352","        } else if (jdk != null && !jdk.equals(JDK.DEFAULT_NAME)) {"],"delete":["352","        } else if (jdk != null) {"]}],"core\/src\/main\/java\/hudson\/model\/JDK.java":[{"add":["54","","55","    \/**","56","     * Name of the \u201Cdefault JDK\u201D, meaning no specific JDK selected.","57","     * @since 1.577","58","     *\/","59","    public static final String DEFAULT_NAME = \"(Default)\";","60",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/configure-common.jelly":[{"add":["39","        <j:getStatic var=\"DEFAULT_NAME\" className=\"hudson.model.JDK\" field=\"DEFAULT_NAME\"\/>","40","        <option>${DEFAULT_NAME}<\/option>"],"delete":["39","        <option>${%default.value}<\/option>"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["3600","        if(!value.equals(JDK.DEFAULT_NAME))"],"delete":["3600","        if(!value.equals(\"(Default)\"))"]}]}},"d570407e6a28acdd1dd8b5154ee71074899ad6a2":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["108","    <remoting.version>3.22<\/remoting.version>"],"delete":["108","    <remoting.version>3.21<\/remoting.version>"]}]}},"da7f988113c4632439db1b2f023b8593808a536b":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["56","          <execution>","57","            <phase>generate-resources<\/phase>","58","            <configuration>","59","              <tasks>","60","                <tstamp>","61","                  <format property=\"now\" pattern=\"MM\/dd\/yyyy hh:mm\" unit=\"hour\" \/>","62","                <\/tstamp>","63","                <property name=\"build.version\" value=\"${version} (private-${now}-${user.name})\" \/><!-- default to release version -->","64","                <!-- put the version file -->","65","                <echo message=\"The build id is: ${build.version}\" \/>","66","                <mkdir dir=\"target\/classes\/hudson\" \/>","67","                <echo file=\"target\/classes\/hudson\/hudson-version.properties\">version=${build.version}","68","                <\/echo>","69","                <mkdir dir=\"target\/classes14\/hudson\" \/>","70","                <echo file=\"target\/classes14\/hudson\/hudson-version.properties\">version=${build.version}","71","                <\/echo>","72","              <\/tasks>","73","            <\/configuration>","74","            <goals>","75","              <goal>run<\/goal>","76","            <\/goals>","77","          <\/execution>"],"delete":["29","      <plugin>","30","        <artifactId>maven-antrun-plugin<\/artifactId>","31","        <executions>","32","          <execution>","33","            <phase>generate-resources<\/phase>","34","            <configuration>","35","              <tasks>","36","                <tstamp>","37","                  <format property=\"now\" pattern=\"MM\/dd\/yyyy hh:mm\" unit=\"hour\" \/>","38","                <\/tstamp>","39","                <property name=\"build.version\" value=\"${version} (private-${now}-${user.name})\" \/><!-- default to release version -->","40","                <!-- put the version file -->","41","                <echo message=\"The build id is: ${build.version}\" \/>","42","                <mkdir dir=\"target\/classes\/hudson\" \/>","43","                <echo file=\"target\/classes\/hudson\/hudson-version.properties\">version=${build.version}","44","                <\/echo>","45","              <\/tasks>","46","            <\/configuration>","47","            <goals>","48","              <goal>run<\/goal>","49","            <\/goals>","50","          <\/execution>","51","        <\/executions>","52","      <\/plugin>"]}]}},"ca56a32e16b97a8dae2e76718144ea00b24f51b1":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifact.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifact.java":[{"add":["181","    public File getFile(MavenBuild build) throws IOException {","182","        File f = new File(new File(new File(new File(build.getArtifactsDir(), groupId), artifactId), version), canonicalName);","189","        return build.getArtifactsDir().child(groupId).child(artifactId).child(version).child(canonicalName);"],"delete":["103","        \/\/ TODO: on archive we need to follow the same format as Maven repository","182","    protected File getFile(MavenBuild build) throws IOException {","183","        File f = new File(new File(new File(new File(build.getArtifactsDir(), groupId), artifactId), version), fileName);","190","        return build.getArtifactsDir().child(groupId).child(artifactId).child(version).child(fileName);"]}]}},"3ddd6bfc2bbfc8e2d4e6f6e22f00b32fb623843d":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/util\/io\/ZipArchiver.java":"MODIFY"},"diff":{"changelog.html":[{"add":["65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13082\">issue 13082<\/a>)","70","  <li class=bug>","71","    Last modification date of files in a zip are not the original timestamps","72","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13122\">issue 13122<\/a>)","74","    Jenkins uses correct port in mDNS advertisement and shows up in Safari Bonjour bookmarks."],"delete":["65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13082\">issue 13082<\/a>~","71","    Jenkins uses correct port in mDNS advertisement and shows up in Safari Bonjour bookmarks.<\/li>"]}],"core\/src\/main\/java\/hudson\/util\/io\/ZipArchiver.java":[{"add":["63","            dirZipEntry.setTime(f.lastModified());","69","            fileZipEntry.setTime(f.lastModified());"],"delete":[]}]}},"5c66fcc6b0318ba151ab3a7fcfbd8ec68b5fea42":{"changes":{"core\/src\/main\/resources\/lib\/layout\/pane.jelly":"MODIFY","war\/src\/main\/webapp\/images\/16x16\/bullseye.png":"ADD","core\/src\/test\/java\/hudson\/model\/MockItem.java":"ADD","core\/src\/main\/resources\/jenkins\/widgets\/HistoryPageFilter\/queue-items.jelly":"ADD","core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/ajaxBuildHistory.jelly":"MODIFY","core\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterTest.java":"ADD","core\/src\/main\/resources\/hudson\/widgets\/BuildHistoryWidget\/entries.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/index.jelly":"MODIFY","war\/src\/main\/webapp\/css\/style.css":"MODIFY","war\/src\/main\/webapp\/images\/16x16\/find.png":"ADD","test\/src\/test\/java\/hudson\/tasks\/BuildTriggerTest.java":"MODIFY","core\/src\/main\/resources\/jenkins\/widgets\/HistoryPageFilter\/entries.jelly":"ADD","core\/src\/main\/java\/hudson\/widgets\/BuildHistoryWidget.java":"MODIFY","core\/src\/main\/java\/jenkins\/widgets\/HistoryPageFilter.java":"ADD","war\/src\/main\/webapp\/images\/16x16\/go_up.png":"ADD","core\/src\/main\/java\/jenkins\/widgets\/HistoryPageEntry.java":"ADD","core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/entries.jelly":"MODIFY","war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/resources\/jenkins\/widgets\/HistoryPageFilter\/ajaxBuildHistory.jelly":"ADD","core\/src\/main\/java\/hudson\/widgets\/HistoryWidget.java":"MODIFY","war\/src\/main\/webapp\/images\/16x16\/go_down.png":"ADD","core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/entry.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/layout\/pane.jelly":[{"add":["50","  <j:set var=\"paneIsCollapsed\" value=\"${h.isCollapsed(attrs.id)}\" \/>","51","  <div class=\"container-fluid pane-frame track-mouse ${paneIsCollapsed ? 'collapsed' : 'expanded'}\" id=\"${attrs.id}\">","55","           title=\"${paneIsCollapsed ? '%expand' : '%collapse'}\">","56","          <l:icon alt=\"${paneIsCollapsed ? '%expand' : '%collapse'}\" class=\"${paneIsCollapsed ? 'icon-expand' : 'icon-collapse'} icon-sm\"\/>","63","        <j:when test=\"${paneIsCollapsed}\">"],"delete":["50","  <div class=\"container-fluid pane-frame track-mouse\" id=\"${attrs.id}\">","54","           title=\"${h.isCollapsed(attrs.id) ? '%expand' : '%collapse'}\">","55","          <l:icon alt=\"${h.isCollapsed(attrs.id) ? '%expand' : '%collapse'}\" class=\"${h.isCollapsed(attrs.id) ? 'icon-expand' : 'icon-collapse'} icon-sm\"\/>","62","        <j:when test=\"${h.isCollapsed(attrs.id)}\">"]}],"war\/src\/main\/webapp\/images\/16x16\/bullseye.png":[{"add":[],"delete":[]}],"core\/src\/test\/java\/hudson\/model\/MockItem.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/jenkins\/widgets\/HistoryPageFilter\/queue-items.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/ajaxBuildHistory.jelly":[{"add":["27","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\">","28","  <st:include page=\"ajaxBuildHistory.jelly\" it=\"${it.historyPageFilter}\" \/>"],"delete":["27","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:f=\"\/lib\/form\" xmlns:i=\"jelly:fmt\">","28","  <l:ajax>","29","    <table class=\"pane\">","30","      <st:include page=\"entries.jelly\" \/>","31","    <\/table>","32","  <\/l:ajax>"]}],"core\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/widgets\/BuildHistoryWidget\/entries.jelly":[{"add":["29","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\">","30","  <st:include page=\"entries.jelly\" \/>"],"delete":["29","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:f=\"\/lib\/form\" xmlns:i=\"jelly:fmt\">","30","  <!-- pending build -->","31","  <j:set var=\"queuedItems\" value=\"${it.queuedItems}\" \/>","32","  <j:if test=\"${!pending.isEmpty()}\">","33","    <j:forEach var=\"item\" items=\"${queuedItems}\" indexVar=\"i\">","34","      <j:set var=\"id\" value=\"${h.generateId()}\"\/>","35","      <tr class=\"build-row build-pending transitive single-line\" id=\"${id}\">","36","        <td class=\"build-row-cell\">","37","          <div class=\"pane build-name\">","38","            <div class=\"build-icon\">","39","              <l:icon class=\"icon-grey icon-sm\"\/>","40","            <\/div>","41","            <!-- Don't use math unless needed, in case nextBuildNumber is not numeric -->","42","            <div class=\"display-name\" title=\"${%Expected build number}\">","43","            #${queuedItems.size()==1 ? it.owner.nextBuildNumber","44","               : it.owner.nextBuildNumber+queuedItems.size()-i-1}","45","            <\/div>","46","          <\/div>","47","          <div class=\"pane build-details indent-multiline\">","48","            <j:set var=\"cause\" value=\"${item.getCauseOfBlockage()}\"\/>","49","            <j:choose>","50","              <j:when test=\"${cause!=null}\">","51","                (${%pending}\u2014<st:include it=\"${cause}\" page=\"summary.jelly\"\/>)","52","              <\/j:when>","53","              <j:otherwise>","54","                (${%pending})","55","              <\/j:otherwise>","56","            <\/j:choose>","57","          <j:if test=\"${!item.params.isEmpty()}\">","58","            <div style=\"float:right;margin-right:10px;\">","59","              <a href=\"#\" tooltip=\"Build Parameters:${h.escape(item.params)}\"><l:icon class=\"icon-notepad icon-sm\" \/><\/a>","60","            <\/div>","61","          <\/j:if>","62","          <\/div>","63","          <div class=\"pane build-controls\">","64","            <div class=\"build-stop\">","65","              <j:if test=\"${item.hasCancelPermission()}\">","66","                <l:stopButton href=\"${rootURL}\/queue\/cancelItem?id=${item.id}\" alt=\"${%cancel this build}\"\/>","67","              <\/j:if>","68","            <\/div>","69","          <\/div>","70","          <div class=\"left-bar\"><\/div>","71","        <\/td>","72","      <\/tr>","73","    <\/j:forEach>","74","  <\/j:if>","75","","76","  <st:include page=\"\/hudson\/widgets\/HistoryWidget\/entries.jelly\" \/>"]}],"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/index.jelly":[{"add":["53","  <j:set var=\"page\" value=\"${it.historyPageFilter}\" \/>","54","  <div id=\"buildHistoryPage\" page-entry-newest=\"${page.newestOnPage}\" page-entry-oldest=\"${page.oldestOnPage}\" page-has-up=\"${page.hasUpPage}\" page-has-down=\"${page.hasDownPage}\">","55","    <div id=\"buildHistoryPageNav\">","56","      <div class=\"nav pageOne\" title=\"Page 1 (Newest\/Latest Builds)\"><\/div>","57","      <div class=\"nav pageUp\" title=\"Newer Builds\"><\/div>","58","      <div class=\"nav pageDown\" title=\"Older Builds \"><\/div>","59","    <\/div>","60","    <l:pane width=\"3\" title=\"${h.runScript(paneTitle)}${it.displayName}\" footer=\"${h.runScript(paneFooter)}\" id=\"buildHistory\" class=\"stripped\">","62","    <tr class=\"build-search-row\">","63","        <td>","64","            <table>","65","                <tr>","66","                    <td>","67","                        <span class=\"clear\" title=\"${%Clear}\">x<\/span>","68","                        <input placeholder=\"${%find}\"><\/input>","69","                    <\/td>","70","                <\/tr>","71","            <\/table>","72","        <\/td>","73","    <\/tr>","74","","75","        <!-- build history -->","76","    <st:include page=\"entries.jelly\" it=\"${page}\" \/>","119","  <\/div>","120","  <script defer=\"true\">","121","      updateBuildHistory(\"${it.baseUrl}\/buildHistory\/ajax\",${it.owner.nextBuildNumber});","122","  <\/script>"],"delete":["53","  <l:pane width=\"3\" title=\"${h.runScript(paneTitle)}${it.displayName}\" footer=\"${h.runScript(paneFooter)}\" id=\"buildHistory\" class=\"stripped\">","55","    <!-- build history -->","56","    <st:include page=\"entries.jelly\" \/>","95","          <div id=\"loadAllBuildHistory\">","96","            <!-- once clicked, this div will be replaced by the load icon -->","97","            <a href=\"javascript:loadAllBuildHistory()\">${%More ...}<\/a>","98","          <\/div>","103","  <j:if test=\"!empty(it.nextBuildNumberToFetch)\">","104","    <script defer=\"true\">","105","      updateBuildHistory(\"${it.baseUrl}\/buildHistory\/ajax\", ${it.nextBuildNumberToFetch});","106","    <\/script>","107","  <\/j:if>"]}],"war\/src\/main\/webapp\/css\/style.css":[{"add":["972","#buildHistoryPage {","973","  position: relative;","974","}","975","","976","#buildHistoryPage .build-search-row td {","977","    position: relative;","978","}","979","#buildHistoryPage .build-search-row .clear {","980","    position: absolute;","981","    padding: 0px 4px;","982","    cursor: pointer;","983","    top: 7px;","984","    right: 6px;","985","    opacity: 0.5;","986","}","987","#buildHistoryPage .build-search-row .clear:hover {","988","    background-color: #d3d3d3;","989","    border: 1px solid #bbb;","990","    top: 6px;","991","    padding-right: 3px;","992","    border-top-right-radius: 2px;","993","}","994","#buildHistoryPage .build-search-row input {","995","    width: 100%;","996","    padding-left: 5px;","997","    padding-right: 20px;","998","}","999","#buildHistoryPage .build-search-row table {","1000","    width: 100%;","1001","}","1002","#buildHistoryPage .build-search-row .build-search-help {","1003","    width: 20px;","1004","}","1005","#buildHistoryPage .build-search-row .icon-help {","1006","    position: absolute;","1007","    cursor: pointer;","1008","    top: 6px;","1009","}","1010","","1011","#buildHistoryPageNav {","1012","  position: absolute;","1013","  right: -21px;","1014","  top: 41px;","1015","  border: 1px solid;","1016","  border-top-right-radius: 4px;","1017","  border-bottom-right-radius: 4px;","1018","  visibility: hidden;","1019","}","1020","","1021","#buildHistoryPageNav .nav {","1022","  width: 16px;","1023","  height: 16px;","1024","  background: no-repeat;","1025","  background-position: center;","1026","  background-size: 16px 16px;","1027","  margin: 4px 2px;","1028","  cursor: pointer;","1029","}","1030","","1031","#buildHistoryPageNav.mouseOverSidePanel {","1032","  visibility: visible;","1033","  border-color: #f0f0f0 !important;","1034","}","1035","#buildHistoryPageNav.mouseOverSidePanelBuildHistory {","1036","  border-color: #bbb !important;","1037","}","1038","#buildHistoryPageNav:hover {","1039","  border-color: #bbb !important;","1040","}","1041","","1042","#buildHistoryPageNav .pageOne {","1043","  background-image: url(..\/images\/16x16\/bullseye.png);","1044","}","1045","#buildHistoryPageNav .pageUp {","1046","  background-image: url(..\/images\/16x16\/go_up.png);","1047","}","1048","#buildHistoryPageNav .pageDown {","1049","  background-image: url(..\/images\/16x16\/go_down.png);","1050","}","1051","#buildHistoryPageNav .find {","1052","  background-image: url(..\/images\/16x16\/find.png);","1053","}","1054",""],"delete":[]}],"war\/src\/main\/webapp\/images\/16x16\/find.png":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/tasks\/BuildTriggerTest.java":[{"add":["211","        HtmlPage page = wc.getHistoryPageFilter(upstream, \"configure\");"],"delete":["211","        HtmlPage page = wc.getPage(upstream, \"configure\");"]}],"core\/src\/main\/resources\/jenkins\/widgets\/HistoryPageFilter\/entries.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/widgets\/BuildHistoryWidget.java":[{"add":["28","import jenkins.widgets.HistoryPageFilter;","29","import org.apache.commons.collections.IteratorUtils;","31","import java.util.Collection;","72","","73","    @Override","74","    public HistoryPageFilter getHistoryPageFilter() {","75","        final HistoryPageFilter<T> historyPageFilter = newPageFilter();","76","","77","        List<T> items = new LinkedList<T>();","78","","79","        items.addAll((Collection<? extends T>) getQueuedItems());","80","        items.addAll(IteratorUtils.toList(baseList.iterator()));","81","        historyPageFilter.add(items);","82","        historyPageFilter.widget = this;","83","","84","        return historyPageFilter;","85","    }"],"delete":[]}],"core\/src\/main\/java\/jenkins\/widgets\/HistoryPageFilter.java":[{"add":[],"delete":[]}],"war\/src\/main\/webapp\/images\/16x16\/go_up.png":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/widgets\/HistoryPageEntry.java":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/entries.jelly":[{"add":["29","  <j:set target=\"${it}\" property=\"nextBuildNumberToFetch\" value=\"${it.nextBuildNumber}\"\/>","31","  <j:forEach var=\"pageEntry\" items=\"${it.runs}\">","32","    <st:include page=\"\/hudson\/widgets\/HistoryWidget\/entry.jelly\" \/>"],"delete":["29","  <j:set target=\"${it}\" property=\"nextBuildNumberToFetch\" value=\"${it.owner.nextBuildNumber}\"\/>","31","  <j:forEach var=\"build\" items=\"${it.renderList}\">","32","    <st:include page=\"entry.jelly\" \/>"]}],"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["1590","    ","1591","    \/\/ If the build history pane is collapsed, just return immediately and don't set up","1592","    \/\/ the build history refresh.","1593","    if (bh.hasClassName('collapsed')) {","1594","        return;","1595","    }","1596","    ","1597","    var buildHistoryPage = $('buildHistoryPage');","1602","\treturn $(buildHistoryDiv).getElementsBySelector('table.pane')[0];","1912","                    var firstBuildRow = 0;","1913","                    if (Element.hasClassName(rows[firstBuildRow], \"build-search-row\")) {","1914","                        firstBuildRow++;","1915","                    }","1916","                    while (rows.length > 0 && Element.hasClassName(rows[firstBuildRow], \"transitive\")) {","1917","                        Element.remove(rows[firstBuildRow]);","1925","                    var pivot = rows[firstBuildRow];","1926","                    var newDataTable = getDataTable(div);","1927","                    var newRows = newDataTable.rows;","1936","\t\t\t            }","1937","\t\t\t        }","1938","","1939","                    if (Element.hasClassName(newDataTable, 'hasPageData')) {","1940","                        buildHistoryPage.setAttribute('page-entry-newest', newDataTable.getAttribute('page-entry-newest'));","1946","                    createRefreshTimeout();","1948","\t        });","1949","\t} else {","1951","\t        createRefreshTimeout();","1955","    var updateBuildsRefreshInterval = 5000;","1956","    var buildRefreshTimeout;","1957","    function createRefreshTimeout() {","1958","        cancelRefreshTimeout();","1959","        buildRefreshTimeout = window.setTimeout(updateBuilds, updateBuildsRefreshInterval);","1960","    }","1961","    function cancelRefreshTimeout() {","1962","        if (buildRefreshTimeout) {","1963","            window.clearTimeout(buildRefreshTimeout);","1964","            buildRefreshTimeout = undefined;","1965","        }","1966","    }","1967","","1968","    createRefreshTimeout();","1975","","1976","    function setupHistoryNav() {","1977","        var sidePanel = $('side-panel');","1978","        var buildHistoryPageNav = $('buildHistoryPageNav');","1979","","1980","        \/\/ Show\/hide the nav as the mouse moves into the sidepanel and build history.","1981","        sidePanel.observe('mouseover', function() {","1982","            Element.addClassName($(buildHistoryPageNav), \"mouseOverSidePanel\");","1983","        });","1984","        sidePanel.observe('mouseout', function() {","1985","            Element.removeClassName($(buildHistoryPageNav), \"mouseOverSidePanel\");","1986","        });","1987","        bh.observe('mouseover', function() {","1988","            Element.addClassName($(buildHistoryPageNav), \"mouseOverSidePanelBuildHistory\");","1989","        });","1990","        bh.observe('mouseout', function() {","1991","            Element.removeClassName($(buildHistoryPageNav), \"mouseOverSidePanelBuildHistory\");","1992","        });","1993","","1994","        var pageSearchInput = Element.getElementsBySelector(bh, '.build-search-row input')[0];","1995","        var pageSearchClear = Element.getElementsBySelector(bh, '.build-search-row .clear')[0];","1996","        var pageOne = Element.getElementsBySelector(buildHistoryPageNav, '.pageOne')[0];","1997","        var pageUp = Element.getElementsBySelector(buildHistoryPageNav, '.pageUp')[0];","1998","        var pageDown = Element.getElementsBySelector(buildHistoryPageNav, '.pageDown')[0];","1999","","2000","        function hasPageUp() {","2001","            return buildHistoryPage.getAttribute('page-has-up') === 'true';","2002","        }","2003","        function hasPageDown() {","2004","            return buildHistoryPage.getAttribute('page-has-down') === 'true';","2005","        }","2006","        function getNewestEntryId() {","2007","            return parseInt(buildHistoryPage.getAttribute('page-entry-newest'));","2008","        }","2009","        function getOldestEntryId() {","2010","            return parseInt(buildHistoryPage.getAttribute('page-entry-oldest'));","2011","        }","2012","        function updatePageParams(dataTable) {","2013","            buildHistoryPage.setAttribute('page-has-up', dataTable.getAttribute('page-has-up'));","2014","            buildHistoryPage.setAttribute('page-has-down', dataTable.getAttribute('page-has-down'));","2015","            buildHistoryPage.setAttribute('page-entry-newest', dataTable.getAttribute('page-entry-newest'));","2016","            buildHistoryPage.setAttribute('page-entry-oldest', dataTable.getAttribute('page-entry-oldest'));","2017","        }","2018","        function togglePageUpDown() {","2019","            Element.removeClassName($(buildHistoryPageNav), \"hasUpPage\");","2020","            Element.removeClassName($(buildHistoryPageNav), \"hasDownPage\");","2021","            if (hasPageUp()) {","2022","                Element.addClassName($(buildHistoryPageNav), \"hasUpPage\");","2023","            }","2024","            if (hasPageDown()) {","2025","                Element.addClassName($(buildHistoryPageNav), \"hasDownPage\");","2026","            }","2027","        }","2028","        function logPageParams() {","2029","            console.log('-----');","2030","            console.log('Has up: '   + hasPageUp());","2031","            console.log('Has down: ' + hasPageDown());","2032","            console.log('Newest: '   + getNewestEntryId());","2033","            console.log('Oldest: '   + getOldestEntryId());","2034","            console.log('-----');","2035","        }","2036","","2037","        function loadPage(params, focusOnSearch) {","2038","            var searchString = pageSearchInput.value;","2039","","2040","            if (searchString !== '') {","2041","                if (params === undefined) {","2042","                    params = {};","2043","                }","2044","                params.search = searchString;","2045","            }","2046","","2047","            new Ajax.Request(ajaxUrl + toQueryString(params), {","2048","                onSuccess: function(rsp) {","2049","                    var dataTable = getDataTable(bh);","2050","                    var rows = dataTable.rows;","2051","","2052","                    \/\/ delete all rows","2053","                    var searchRow;","2054","                    if (Element.hasClassName(rows[0], \"build-search-row\")) {","2055","                        searchRow = rows[0];","2056","                    }","2057","                    while (rows.length > 0) {","2058","                        Element.remove(rows[0]);","2059","                    }","2060","                    if (searchRow) {","2061","                        dataTable.appendChild(searchRow);","2062","                    }","2063","","2064","                    \/\/ insert new rows","2065","                    var div = document.createElement('div');","2066","                    div.innerHTML = rsp.responseText;","2067","                    Behaviour.applySubtree(div);","2068","","2069","                    var newDataTable = getDataTable(div);","2070","                    var newRows = newDataTable.rows;","2071","                    while (newRows.length > 0) {","2072","                        dataTable.appendChild(newRows[0]);","2073","                    }","2074","","2075","                    checkAllRowCellOverflows();","2076","                    updatePageParams(newDataTable);","2077","                    togglePageUpDown();","2078","                    if (!hasPageUp()) {","2079","                        createRefreshTimeout();","2080","                    }","2081","","2082","                    if (focusOnSearch) {","2083","                        pageSearchInput.focus();","2084","                    }","2085","                    \/\/logPageParams();","2086","                }","2087","            });","2088","        }","2089","","2090","        pageSearchInput.observe('keypress', function(e) {","2091","            var key = e.which || e.keyCode;","2092","            \/\/ On enter","2093","            if (key === 13) {","2094","                loadPage({}, true);","2095","            }","2096","        });","2097","        pageSearchClear.observe('click', function() {","2098","            pageSearchInput.value = '';","2099","            loadPage({}, true);","2100","        });","2101","        pageOne.observe('click', function() {","2102","            loadPage();","2103","        });","2104","        pageUp.observe('click', function() {","2105","            loadPage({'newer-than': getNewestEntryId()});","2106","        });","2107","        pageDown.observe('click', function() {","2108","            cancelRefreshTimeout();","2109","            loadPage({'older-than': getOldestEntryId()});","2110","        });","2111","","2112","        togglePageUpDown();","2113","        \/\/logPageParams();","2114","    }","2115","    setupHistoryNav();","2116","}","2117","","2118","function toQueryString(params) {","2119","    var query = '';","2120","    if (params) {","2121","        for (var paramName in params) {","2122","            if (params.hasOwnProperty(paramName)) {","2123","                if (query === '') {","2124","                    query = '?';","2125","                } else {","2126","                    query += '&';","2127","                }","2128","                query += paramName + '=' + encodeURIComponent(params[paramName]);","2129","            }","2130","        }","2131","    }","2132","    return query;"],"delete":["1594","        return $(buildHistoryDiv).getElementsBySelector('table.pane')[0];","1891","    var updateBuildsRefreshInterval = 5000;","1905","                    while (rows.length > 0 && Element.hasClassName(rows[0], \"transitive\")) {","1906","                        Element.remove(rows[0]);","1914","                    var pivot = rows[0];","1915","                    var newRows = getDataTable(div).rows;","1924","                        }","1929","                    window.setTimeout(updateBuilds, updateBuildsRefreshInterval);","1930","","1933","            });","1934","        } else {","1936","            window.setTimeout(updateBuilds, updateBuildsRefreshInterval);"]}],"core\/src\/main\/resources\/jenkins\/widgets\/HistoryPageFilter\/ajaxBuildHistory.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/widgets\/HistoryWidget.java":[{"add":["29","import jenkins.widgets.HistoryPageEntry;","30","import jenkins.widgets.HistoryPageFilter;","31","import org.apache.commons.collections.IteratorUtils;","37","import javax.annotation.CheckForNull;","41","import java.util.Collections;","76","    final Long newerThan;","77","    final Long olderThan;","78","    final String searchString;","79","","90","\tStaplerRequest currentRequest = Stapler.getCurrentRequest();","93","        this.baseUrl = Functions.getNearestAncestorUrl(currentRequest,owner);","95","        this.newerThan = getPagingParam(currentRequest, \"newer-than\");","96","        this.olderThan = getPagingParam(currentRequest, \"older-than\");","97","        this.searchString = currentRequest.getParameter(\"search\");;","116","    private Iterable<HistoryPageEntry<T>> updateFirstTransientBuildKey(Iterable<HistoryPageEntry<T>> source) {","118","        for (HistoryPageEntry<T> t : source) {","119","            if(adapter.isBuilding(t.getEntry())) {","120","                key = adapter.getKey(t.getEntry());","121","            }","122","        }","130","    public Iterable<HistoryPageEntry<T>> getRenderList() {","132","            List<HistoryPageEntry<T>> pageEntries = toPageEntries(baseList);","133","            if(pageEntries.size() > THRESHOLD) {","134","                return updateFirstTransientBuildKey(pageEntries.subList(0,THRESHOLD));","136","                trimmed=false;","137","                return updateFirstTransientBuildKey(pageEntries);","140","                \/\/ to prevent baseList's concrete type from getting picked up by <j:forEach> in view","141","            return updateFirstTransientBuildKey(toPageEntries(baseList));","145","    private List<HistoryPageEntry<T>> toPageEntries(Iterable<T> historyItemList) {","146","        Iterator<T> iterator = historyItemList.iterator();","147","","148","        if (!iterator.hasNext()) {","149","            return Collections.EMPTY_LIST;","150","        }","151","","152","        List<HistoryPageEntry<T>> pageEntries = new ArrayList<HistoryPageEntry<T>>();","153","        while (iterator.hasNext()) {","154","\t        pageEntries.add(new HistoryPageEntry<T>(iterator.next()));","155","        }","156","","157","\treturn pageEntries;","158","    }","159","","160","    \/**","161","     * Get a {@link jenkins.widgets.HistoryPageFilter} for rendering a page of queue items.","162","     *\/","163","    public HistoryPageFilter getHistoryPageFilter() {","164","        HistoryPageFilter<T> historyPageFilter = newPageFilter();","165","","166","        historyPageFilter.add(IteratorUtils.toList(baseList.iterator()));","167","        historyPageFilter.widget = this;","168","        return historyPageFilter;","169","    }","170","","171","    protected HistoryPageFilter<T> newPageFilter() {","172","        HistoryPageFilter<T> historyPageFilter = new HistoryPageFilter<T>(THRESHOLD);","173","","174","        if (newerThan != null) {","175","            historyPageFilter.setNewerThan(newerThan);","176","        } else if (olderThan != null) {","177","            historyPageFilter.setOlderThan(olderThan);","178","        }","179","","180","        if (searchString != null) {","181","            historyPageFilter.setSearchString(searchString);","182","        }","183","","184","        return historyPageFilter;","185","    }","186","","203","\t\t  @Header(\"n\") String n ) throws IOException, ServletException {","210","        if (n != null) {","211","            String nn=null; \/\/ we'll compute next n here","213","            \/\/ list up all builds >=n.","214","            for (T t : baseList) {","215","                if(adapter.compare(t,n)>=0) {","216","                    items.add(t);","217","                    if(adapter.isBuilding(t))","219","                } else","220","                    break;","222","","223","            if (nn==null) {","224","                if (items.isEmpty()) {","225","                    \/\/ nothing to report back. next fetch should retry the same 'n'","226","                    nn=n;","227","                } else {","228","                    \/\/ every record fetched this time is frozen. next fetch should start from the next build","229","                    nn=adapter.getNextKey(adapter.getKey(items.get(0)));","230","                }","231","            }","232","","233","            baseList = items;","234","","235","            rsp.setHeader(\"n\",nn);","236","            firstTransientBuildKey = nn; \/\/ all builds >= nn should be marked transient","239","        HistoryPageFilter page = getHistoryPageFilter();","240","        updateFirstTransientBuildKey(page.runs);","241","        req.getView(page,\"ajaxBuildHistory.jelly\").forward(req,rsp);","244","    static final int THRESHOLD = Integer.getInteger(HistoryWidget.class.getName()+\".threshold\",30);","263","","264","    private Long getPagingParam(@CheckForNull StaplerRequest currentRequest, @CheckForNull String name) {","265","        if (currentRequest == null || name == null) {","266","            return null;","267","        }","268","","269","        String paramVal = currentRequest.getParameter(name);","270","        if (paramVal == null) {","271","            return null;","272","        }","273","        try {","274","            return new Long(paramVal);","275","        } catch (NumberFormatException nfe) {","276","            return null;","277","        }","278","    }"],"delete":["28","import hudson.util.Iterators;","31","import org.kohsuke.stapler.HttpResponses;","42","import static javax.servlet.http.HttpServletResponse.SC_BAD_REQUEST;","43","","87","        this.baseUrl = Functions.getNearestAncestorUrl(Stapler.getCurrentRequest(),owner);","107","    private Iterable<T> updateFirstTransientBuildKey(Iterable<T> source) {","109","        for (T t : source)","110","            if(adapter.isBuilding(t))","111","                key = adapter.getKey(t);","119","    public Iterable<T> getRenderList() {","121","            List<T> lst;","122","            if (baseList instanceof List) {","123","                lst = (List<T>) baseList;","124","                if(lst.size()>THRESHOLD)","125","                    return updateFirstTransientBuildKey(lst.subList(0,THRESHOLD));","126","                trimmed=false;","127","                return updateFirstTransientBuildKey(lst);","129","                lst = new ArrayList<T>(THRESHOLD);","130","                Iterator<T> itr = baseList.iterator();","131","                while(lst.size()<=THRESHOLD && itr.hasNext())","132","                    lst.add(itr.next());","133","                trimmed = itr.hasNext(); \/\/ if we don't have enough items in the base list, setting this to false will optimize the next getRenderList() invocation.","134","                return updateFirstTransientBuildKey(lst);","137","            \/\/ to prevent baseList's concrete type from getting picked up by <j:forEach> in view","138","            return updateFirstTransientBuildKey(Iterators.wrap(baseList));","158","                  @Header(\"n\") String n ) throws IOException, ServletException {","159","","160","        if (n==null)    throw HttpResponses.error(SC_BAD_REQUEST,new Exception(\"Missing the 'n' HTTP header\"));","167","        String nn=null; \/\/ we'll compute next n here","169","        \/\/ list up all builds >=n.","170","        for (T t : baseList) {","171","            if(adapter.compare(t,n)>=0) {","172","                items.add(t);","173","                if(adapter.isBuilding(t))","175","            } else","176","                break;","177","        }","178","","179","        if (nn==null) {","180","            if (items.isEmpty()) {","181","                \/\/ nothing to report back. next fetch should retry the same 'n'","182","                nn=n;","183","            } else {","184","                \/\/ every record fetched this time is frozen. next fetch should start from the next build","185","                nn=adapter.getNextKey(adapter.getKey(items.get(0)));","189","        baseList = items;","190","","191","        rsp.setHeader(\"n\",nn);","192","        firstTransientBuildKey = nn; \/\/ all builds >= nn should be marked transient","193","","194","        req.getView(this,\"ajaxBuildHistory.jelly\").forward(req,rsp);","197","    private static final int THRESHOLD = Integer.getInteger(HistoryWidget.class.getName()+\".threshold\",30);"]}],"war\/src\/main\/webapp\/images\/16x16\/go_down.png":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/entry.jelly":[{"add":["28","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:i=\"jelly:fmt\">","29","  <j:set var=\"build\" value=\"${pageEntry.entry}\" \/>","30","  <j:set var=\"firstTransientBuildKey\" value=\"${it.widget.firstTransientBuildKey}\" \/>","31","  <j:set var=\"transitive\" value=\"${(firstTransientBuildKey!=null and (it.widget.adapter.compare(build,firstTransientBuildKey) ge 0)) ? 'transitive' : null}\" \/>","32","  <j:set var=\"link\" value=\"${it.widget.baseUrl}\/${build.number}\/\" \/>","33","  <tr class=\"build-row ${transitive} single-line\" page-entry-id=\"${pageEntry.entryId}\">","46","\t  <j:set target=\"${it.widget}\" property=\"nextBuildNumberToFetch\" value=\"${build.number}\"\/>","63","\t    <j:if test=\"${empty(it.widget.owner.ABORT) ? h.hasPermission(app.ADMINISTER) : it.widget.owner.hasPermission(it.widget.owner.ABORT)}\">"],"delete":["28","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:f=\"\/lib\/form\" xmlns:i=\"jelly:fmt\">","29","  <j:set var=\"link\" value=\"${it.baseUrl}\/${build.number}\/\" \/>","30","  <j:set var=\"transitive\" value=\"${(it.firstTransientBuildKey!=null and (it.adapter.compare(build,it.firstTransientBuildKey) ge 0)) ? 'transitive' : null}\" \/>","31","  <tr class=\"build-row ${transitive} single-line\">","44","          <j:set target=\"${it}\" property=\"nextBuildNumberToFetch\" value=\"${build.number}\"\/>","61","            <j:if test=\"${empty(it.owner.ABORT) ? h.hasPermission(app.ADMINISTER) : it.owner.hasPermission(it.owner.ABORT)}\">"]}]}},"9323b3476d7a5ddb7757ee2b0858f07ec5be39ab":{"changes":{"core\/src\/main\/java\/hudson\/search\/Search.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/search\/Search.java":[{"add":["25","import static javax.servlet.http.HttpServletResponse.SC_NOT_FOUND;","26","","28","import java.io.IOException;","29","import java.util.AbstractList;","30","import java.util.ArrayList;","31","import java.util.Collections;","32","import java.util.HashSet;","33","import java.util.List;","34","import java.util.Set;","35","import javax.servlet.ServletException;","219","        private final static String[] EMPTY = new String[0];","220","","222","            tokens = tokenList!=null ? tokenList.split(\"(?<=\\\\s)(?=\\\\S)\") : EMPTY;"],"delete":["35","import javax.servlet.ServletException;","36","import static javax.servlet.http.HttpServletResponse.SC_NOT_FOUND;","37","import java.io.IOException;","38","import java.util.AbstractList;","39","import java.util.ArrayList;","40","import java.util.Collections;","41","import java.util.HashSet;","42","import java.util.List;","43","import java.util.Set;","44","","220","            tokens = tokenList.split(\"(?<=\\\\s)(?=\\\\S)\");"]}]}},"777d232053488b2dcedc122529283c6e69e99c95":{"changes":{"test\/src\/test\/java\/hudson\/util\/RingBufferLogHandlerTest.java":"ADD"},"diff":{"test\/src\/test\/java\/hudson\/util\/RingBufferLogHandlerTest.java":[{"add":[],"delete":[]}]}},"2453985ca5f4cb2c824466d132fe3658020b72fe":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","test\/src\/test\/java\/hudson\/PluginManagerTest2.java":"ADD"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["198","                                            p.isBundled = containsHpiJpi(bundledPlugins, arc.getName());","346","    \/*","347","     * contains operation that considers xxx.hpi and xxx.jpi as equal","348","     * this is necessary since the bundled plugins are still called *.hpi ","349","     *\/","350","    private boolean containsHpiJpi(Collection<String> bundledPlugins, String name) {","351","        return bundledPlugins.contains(name.replaceAll(\"\\\\.hpi\",\".jpi\"))","352","                || bundledPlugins.contains(name.replaceAll(\"\\\\.jpi\",\".hpi\"));","353","    }","354",""],"delete":["198","                                            p.isBundled = bundledPlugins.contains(arc.getName());"]}],"test\/src\/test\/java\/hudson\/PluginManagerTest2.java":[{"add":[],"delete":[]}]}},"1a27da9c7f0e566a1a9406081c0625a0ff8c2f57":{"changes":{"test\/src\/test\/resources\/lib\/form\/RepeatablePropertyTest\/ExcitingObjectContainer\/config.jelly":"ADD","test\/src\/test\/resources\/lib\/form\/RepeatablePropertyTest\/nested.jelly":"ADD","core\/src\/main\/resources\/lib\/form\/repeatable.jelly":"MODIFY","test\/src\/test\/java\/lib\/form\/RepeatablePropertyTest.java":"MODIFY","core\/src\/main\/resources\/lib\/form\/repeatableProperty.jelly":"MODIFY"},"diff":{"test\/src\/test\/resources\/lib\/form\/RepeatablePropertyTest\/ExcitingObjectContainer\/config.jelly":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/lib\/form\/RepeatablePropertyTest\/nested.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/lib\/form\/repeatable.jelly":[{"add":["109","  <j:set var=\"minimum\" value=\"${attrs.minimum ?: 0}\" \/>"],"delete":[]}],"test\/src\/test\/java\/lib\/form\/RepeatablePropertyTest.java":[{"add":["31","import hudson.model.AbstractDescribableImpl;","35","","36","import org.apache.commons.collections4.CollectionUtils;","37","import org.apache.commons.collections4.Predicate;","39","import org.jvnet.hudson.test.Issue;","44","import java.util.Collections;","54","    public List<ExcitingObjectContainer> testRepeatableContainer;","78","","79","    @Issue(\"JENKINS-37599\")","80","    public void testNestedRepeatableProperty() throws Exception {","81","        testRepeatableContainer = Collections.emptyList();","82","        \/\/ minimum=\"1\" is set for the upper one,","83","        \/\/ the form should be:","84","        \/\/ * 1 ExcitingObjectCotainer","85","        \/\/ * no ExcitingObject","86","        final HtmlForm form = getForm(\"nested\");","87","        List<HtmlTextInput> containerNameInputs = form.getElementsByAttribute(\"input\", \"type\", \"text\");","88","        CollectionUtils.filter(containerNameInputs, new Predicate<HtmlTextInput>() {","89","            @Override","90","            public boolean evaluate(HtmlTextInput input) {","91","                return input.getNameAttribute().endsWith(\".containerName\");","92","            }","93","        });","94","        List<HtmlTextInput> greatPropertyInputs = form.getElementsByAttribute(\"input\", \"type\", \"text\");","95","        CollectionUtils.filter(greatPropertyInputs, new Predicate<HtmlTextInput>() {","96","            @Override","97","            public boolean evaluate(HtmlTextInput input) {","98","                return input.getNameAttribute().endsWith(\".greatProperty\");","99","            }","100","        });","101","        assertEquals(1, containerNameInputs.size());","102","        assertEquals(0, greatPropertyInputs.size());","103","    }","182","    public static final class ExcitingObjectContainer extends AbstractDescribableImpl<ExcitingObjectContainer> {","183","        String containerName;","184","        List<ExcitingObject> excitingObjectList;","185","","186","        @DataBoundConstructor","187","        public ExcitingObjectContainer(String containerName, List<ExcitingObject> excitingObjectList) {","188","            this.containerName = containerName;","189","            this.excitingObjectList = excitingObjectList;","190","        }","191","        public String getContainerName() {","192","            return containerName;","193","        }","194","        public List<ExcitingObject> getExcitingObjectList() {","195","            return excitingObjectList;","196","        }","197","        @Extension","198","        public static final class DescriptorImpl extends Descriptor<ExcitingObjectContainer> {","199","        }","200","    }"],"delete":[]}],"core\/src\/main\/resources\/lib\/form\/repeatableProperty.jelly":[{"add":["69","  <f:repeatable field=\"${attrs.field}\" default=\"${attrs.default}\" noAddButton=\"${attrs.noAddButton}\" header=\"${attrs.header}\" add=\"${attrs.add}\" minimum=\"${attrs.minimum ?: 0}\" enableTopButton=\"${attrs.enableTopButton}\">"],"delete":["69","  <f:repeatable field=\"${attrs.field}\" default=\"${attrs.default}\" noAddButton=\"${attrs.noAddButton}\" header=\"${attrs.header}\" add=\"${attrs.add}\" enableTopButton=\"${attrs.enableTopButton}\">"]}]}},"629b42a309d04cdaea2808d2c1a56560aea062ff":{"changes":{"core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["156","        for (TopLevelItem item : getOwnerItemGroup().getItems()) {","157","            if (!names.contains(item.getName())) continue;","159","            if(statusFilter == null || !(item instanceof AbstractProject)","160","                              || ((AbstractProject)item).isDisabled() ^ statusFilter)"],"delete":["156","        for (String n : names) {","157","            TopLevelItem item = getOwnerItemGroup().getItem(n);","159","            if(item!=null && (statusFilter == null || !(item instanceof AbstractProject)","160","                              || ((AbstractProject)item).isDisabled() ^ statusFilter))"]}]}},"483181c0a1a0fdb1cb435164d8a8bbfd76084016":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["697","                        UpdateSite.Plugin plugin = updateSite.getPlugin(pluginName);","698","                        if (plugin != null) {","699","                            if (p != null) {","700","                                throw new Failure(\"Ambiguous plugin: \" + n);","701","                            }","702","                            p = plugin;"],"delete":["697","                        if (p != null) {","698","                            throw new Failure(\"Ambiguous plugin: \" + n);","700","                        p = updateSite.getPlugin(pluginName);"]}]}},"967a83eb0b1873f2ee3685f1155f876e24a44e7e":{"changes":{"core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["137","        Queue.Executable e = executable;","138","        if(e==null)     return -1;","139","        long d = e.getParent().getEstimatedDuration();","152","        Queue.Executable e = executable;","153","        if(e==null)     return \"N\/A\";","154","","155","        long d = e.getParent().getEstimatedDuration();"],"delete":["137","        long d = executable.getParent().getEstimatedDuration();","150","        long d = executable.getParent().getEstimatedDuration();"]}]}},"307095b758bcf04c392abf7c78b50556393c86a1":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersAction.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersAction.java":[{"add":["109","     * @since 1.651.2, 2.3","336","     * @since 1.651.2, 2.3"],"delete":["109","     * @since TODO","336","     * @since TODO"]}]}},"302140b2c69442e81f7b0b2af9d6e39277ac5674":{"changes":{"core\/src\/main\/java\/hudson\/model\/Cause.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Cause.java":[{"add":["36","import java.util.HashSet;","37","import java.util.Set;","136","            Set<String> traversed = new HashSet<String>();","138","                upstreamCauses.add(trim(c, MAX_DEPTH, traversed));","149","        private @Nonnull Cause trim(@Nonnull Cause c, int depth, Set<String> traversed) {","156","                if (traversed.add(uc.upstreamUrl + uc.upstreamBuild)) {","157","                    for (Cause c2 : uc.upstreamCauses) {","158","                        cs.add(trim(c2, depth - 1, traversed));","161","            } else if (traversed.size() < MAX_LEAF) {"],"delete":["36","import java.util.concurrent.atomic.AtomicInteger;","135","            AtomicInteger leaf = new AtomicInteger(MAX_LEAF);","137","                upstreamCauses.add(trim(c, MAX_DEPTH, leaf));","148","        private @Nonnull Cause trim(@Nonnull Cause c, int depth, AtomicInteger leaf) {","155","                for (Cause c2 : uc.upstreamCauses) {","156","                    if (leaf.decrementAndGet() > 0) {","157","                        cs.add(trim(c2, depth - 1, leaf));","158","                    } else {","159","                        cs.add(new DeeplyNestedUpstreamCause());","162","            } else {"]}]}},"00bc8ce5c5b2d791f4990eac940b3a5479a8d11e":{"changes":{"test\/src\/test\/java\/hudson\/model\/AbstractProjectTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/model\/AbstractProjectTest.java":[{"add":["36","import hudson.tasks.ArtifactArchiver;","229","    private static void assertSymlinkForBuild(File file, int buildNumber)","230","            throws IOException, InterruptedException {","234","        assertTrue(\"link should point to build #\" + buildNumber + \", but link was: \"","235","                   + Util.resolveSymlink(file, TaskListener.NULL) + \"\\nand log was:\\n\" + s,","238","","239","    @Bug(2543)","240","    public void testSymlinkForPostBuildFailure() throws Exception {","241","        \/\/ Links should be updated after post-build actions when final build result is known","242","        FreeStyleProject job = createFreeStyleProject();","243","        job.getBuildersList().add(new Shell(\"echo \\\"Build #$BUILD_NUMBER\\\"\\n\"));","244","        FreeStyleBuild build = job.scheduleBuild2(0, new Cause.UserCause()).get();","245","        assertEquals(Result.SUCCESS, build.getResult());","246","        File lastSuccessful = new File(job.getRootDir(), \"lastSuccessful\"),","247","             lastStable = new File(job.getRootDir(), \"lastStable\");","248","        \/\/ First build creates links","249","        assertSymlinkForBuild(lastSuccessful, 1);","250","        assertSymlinkForBuild(lastStable, 1);","251","        \/\/ Archive artifacts that don't exist to create failure in post-build action","252","        job.getPublishersList().add(new ArtifactArchiver(\"*.foo\", \"\", false));","253","        build = job.scheduleBuild2(0, new Cause.UserCause()).get();","254","        assertEquals(Result.FAILURE, build.getResult());","255","        \/\/ Links should not be updated since build failed","256","        assertSymlinkForBuild(lastSuccessful, 1);","257","        assertSymlinkForBuild(lastStable, 1);","258","    }"],"delete":["228","    private static void assertSymlinkForBuild(File file, int buildNumber) throws IOException {","232","        assertTrue(\"link should point to build #\" + buildNumber + \", but log was:\\n\" + s,"]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["528","","529","                if (result.isBetterOrEqualTo(Result.UNSTABLE))","530","                    createSymlink(listener, \"lastSuccessful\");","531","","532","                if (result.isBetterOrEqualTo(Result.SUCCESS))","533","                    createSymlink(listener, \"lastStable\");"],"delete":["427","                if (result.isBetterOrEqualTo(Result.UNSTABLE))","428","                    createSymlink(listener, \"lastSuccessful\");","429","","430","                if (result.isBetterOrEqualTo(Result.SUCCESS))","431","                    createSymlink(listener, \"lastStable\");","432",""]}]}},"e119e9598f94e45bbac3f0dffb6d79620f702283":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["335","      <version>1.124<\/version>"],"delete":["335","      <version>1.123<\/version>"]}]}},"3efe07f563d30a38cf405a20c9145c3ea88e5051":{"changes":{"core\/src\/main\/java\/hudson\/cli\/BuildCommand.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/BuildCommand.java":[{"add":["238","            User user = User.get(startedBy, false);","239","            String userName = user != null ? user.getDisplayName() : startedBy;"],"delete":["238","            String userName = User.get(startedBy).getDisplayName();"]}]}},"5bef85c4f37c62eed0cad91ef5b463c293e97a76":{"changes":{"core\/src\/main\/resources\/hudson\/logging\/LogRecorderManager\/all.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/logging\/Messages.properties":"MODIFY","core\/src\/main\/resources\/hudson\/logging\/LogRecorderManager\/sidepanel.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/logging\/LogRecorderManager\/all.jelly":[{"add":["33","    <div class=\"alert alert-info\">","34","      Log messages at a level lower than INFO are never recorded in the Jenkins log. Use <a href=\".\">log recorders<\/a> to record these log messages.","35","    <\/div>"],"delete":[]}],"core\/src\/main\/resources\/hudson\/logging\/Messages.properties":[{"add":["23","LogRecorderManager.DisplayName=System Log"],"delete":["23","LogRecorderManager.DisplayName=log"]}],"core\/src\/main\/resources\/hudson\/logging\/LogRecorderManager\/sidepanel.jelly":[{"add":["34","      <l:task href=\".\" icon=\"icon-clipboard icon-md\" title=\"${%Log Recorders}\">","35","        <l:task href=\"new\" icon=\"icon-new-package icon-md\" title=\"${%New Log Recorder}\"\/>","36","      <\/l:task>","37","      <l:task href=\"all\" icon=\"icon-notepad icon-md\" title=\"${%All Log Messages}\"\/>"],"delete":["34","      <l:task href=\".\" icon=\"icon-clipboard icon-md\" title=\"${%Logger List}\"\/>","35","      <l:task href=\"all\" icon=\"icon-notepad icon-md\" title=\"${%All Logs}\"\/>","36","      <l:task href=\"new\" icon=\"icon-new-package icon-md\" title=\"${%New Log Recorder}\"\/>"]}]}},"96dd84b5d0d37e1765c3615bcba048eb62e38ad6":{"changes":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/FakeLauncher.java":"MODIFY","core\/src\/main\/java\/hudson\/Proc.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","core\/src\/test\/java\/hudson\/LauncherTest.java":"MODIFY","changelog.html":"MODIFY","remoting\/src\/main\/java\/hudson\/remoting\/RemoteInputStream.java":"MODIFY","core\/src\/main\/java\/hudson\/os\/windows\/WindowsRemoteLauncher.java":"MODIFY","test\/src\/test\/java\/hudson\/ProcTest.java":"MODIFY"},"diff":{"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/FakeLauncher.java":[{"add":["6","import java.io.InputStream;","7","import java.io.OutputStream;","51","","52","        @Override","53","        public InputStream getStdout() {","54","            \/\/ TODO","55","            throw new UnsupportedOperationException();","56","        }","57","","58","        @Override","59","        public InputStream getStderr() {","60","            \/\/ TODO","61","            throw new UnsupportedOperationException();","62","        }","63","","64","        @Override","65","        public OutputStream getStdin() {","66","            \/\/ TODO","67","            throw new UnsupportedOperationException();","68","        }"],"delete":[]}],"core\/src\/main\/java\/hudson\/Proc.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, CloudBees, Inc.","25","import hudson.Launcher.ProcStarter;","29","import hudson.util.NullStream;","32","import org.apache.commons.io.input.NullInputStream;","76","     * Waits for the completion of the process.","77","     *","78","     * Unless the caller opts to pump the streams via {@link #getStdout()} etc.,","79","     * this method also blocks until we finish reading everything that the process has produced","93","    \/**","94","     * Returns an {@link InputStream} to read from {@code stdout} of the child process.","95","     * <p>","96","     * When this method returns null, {@link Proc} will internally pump the output from","97","     * the child process to your {@link OutputStream} of choosing.","98","     *","99","     * @return","100","     *      null unless {@link ProcStarter#readStdout()} is used to indicate","101","     *      that the caller intends to pump the stream by itself.","102","     * @since 1.399","103","     *\/","104","    public abstract InputStream getStdout();","105","","106","    \/**","107","     * Returns an {@link InputStream} to read from {@code stderr} of the child process.","108","     * <p>","109","     * When this method returns null, {@link Proc} will internally pump the output from","110","     * the child process to your {@link OutputStream} of choosing.","111","     *","112","     * @return","113","     *      null unless {@link ProcStarter#readStderr()} is used to indicate","114","     *      that the caller intends to pump the stream by itself.","115","     * @since 1.399","116","     *\/","117","    public abstract InputStream getStderr();","118","","119","    \/**","120","     * Returns an {@link OutputStream} to write to {@code stdin} of the child process.","121","     * <p>","122","     * When this method returns null, {@link Proc} will internally pump the {@link InputStream}","123","     * of your choosing to the child process.","124","     *","125","     * @return","126","     *      null unless {@link ProcStarter#writeStdin()} is used to indicate","127","     *      that the caller intends to pump the stream by itself.","128","     * @since 1.399","129","     *\/","130","    public abstract OutputStream getStdin();","131","","180","        private final InputStream stdout,stderr;","181","        private final OutputStream stdin;","182","","213","                  stderr(environment(new ProcessBuilder(cmd),env).directory(workDir), err==null || err== SELFPUMP_OUTPUT),","217","        private static ProcessBuilder stderr(ProcessBuilder pb, boolean redirectError) {","218","            if(redirectError)    pb.redirectErrorStream(true);","241","","243","            if (out==SELFPUMP_OUTPUT) {","244","                stdout = procInputStream;","245","                copier = null;","246","            } else {","247","                copier = new StreamCopyThread(name+\": stdout copier\", procInputStream, out);","248","                copier.start();","249","                stdout = null;","250","            }","251","","252","            if (in == null) {","253","                \/\/ nothing to feed to stdin","254","                stdin = null;","256","            } else","257","            if (in==SELFPUMP_INPUT) {","258","                stdin = proc.getOutputStream();","259","            } else {","260","                new StdinCopyThread(name+\": stdin copier\",in,proc.getOutputStream()).start();","261","                stdin = null;","262","            }","263","","266","                if (err==SELFPUMP_OUTPUT) {","267","                    stderr = procErrorStream;","268","                    copier2 = null;","269","                } else {","270","                    stderr = null;","271","                    copier2 = new StreamCopyThread(name+\": stderr copier\", procErrorStream, err);","272","                    copier2.start();","273","                }","284","                stderr = null;","288","        public InputStream getStdout() {","289","            return stdout;","290","        }","291","","292","        public InputStream getStderr() {","293","            return stderr;","294","        }","295","","296","        public OutputStream getStdin() {","297","            return stdin;","298","        }","299","","319","                if (copier!=null)   copier.join(10*1000);","321","                if((copier!=null && copier.isAlive()) || (copier2!=null && copier2.isAlive())) {","420","","421","        public static final InputStream SELFPUMP_INPUT = new NullInputStream(0);","422","        public static final OutputStream SELFPUMP_OUTPUT = new NullStream();","427","     *","428","     * @deprecated as of 1.399","463","","464","        @Override","465","        public InputStream getStdout() {","466","            return null;","467","        }","468","","469","        @Override","470","        public InputStream getStderr() {","471","            return null;","472","        }","473","","474","        @Override","475","        public OutputStream getStdin() {","476","            return null;","477","        }"],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi","73","     * Waits for the completion of the process and until we finish reading everything that the process has produced","165","                  stderr(environment(new ProcessBuilder(cmd),env).directory(workDir),err),","169","        private static ProcessBuilder stderr(ProcessBuilder pb, OutputStream stderr) {","170","            if(stderr==null)    pb.redirectErrorStream(true);","194","            copier = new StreamCopyThread(name+\": stdout copier\", procInputStream, out);","195","            copier.start();","196","            if(in!=null)","197","                new StdinCopyThread(name+\": stdin copier\",in,proc.getOutputStream()).start();","198","            else","202","                copier2 = new StreamCopyThread(name+\": stderr copier\", procErrorStream, err);","203","                copier2.start();","236","                copier.join(10*1000);","238","                if(copier.isAlive() || (copier2!=null && copier2.isAlive())) {"]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Stephen Connolly, CloudBees, Inc.","45","import java.io.InterruptedIOException;","47","import java.io.Serializable;","147","        protected InputStream stdin = NULL_INPUT_STREAM;","149","        \/**","150","         * True to reverse the I\/O direction.","151","         *","152","         * For example, if {@link #reverseStdout}==true, then we expose","153","         * {@link InputStream} from {@link Proc} and expect the client to read from it,","154","         * whereas normally we take {@link OutputStream} via {@link #stdout(OutputStream)}","155","         * and feed stdout into that output.","156","         *","157","         * @since 1.399","158","         *\/","159","        protected boolean reverseStdin, reverseStdout, reverseStderr;","281","         * Indicates that the caller will pump {@code stdout} from the child process","282","         * via {@link Proc#getStdout()} (whereas by default you call {@link #stdout(OutputStream)}","283","         * and let Jenkins pump stdout into your {@link OutputStream} of choosing.","284","         *","285","         * <p>","286","         * When this method is called, {@link Proc#getStdout()} will read the combined output","287","         * of {@code stdout\/stderr} from the child process, unless {@link #readStderr()} is called","288","         * separately, which lets the caller read those two streams separately.","289","         *","290","         * @since 1.399","291","         *\/","292","        public ProcStarter readStdout() {","293","            reverseStdout = true;","294","            stdout = stderr = null;","295","            return this;","296","        }","297","","298","        \/**","299","         * In addition to the effect of {@link #readStdout()}, indicate that the caller will pump {@code stderr}","300","         * from the child process separately from {@code stdout}. The stderr will be readable from","301","         * {@link Proc#getStderr()} while {@link Proc#getStdout()} reads from stdout.","302","         *","303","         * @since 1.399","304","         *\/","305","        public ProcStarter readStderr() {","306","            reverseStdout = true;","307","            reverseStderr = true;","308","            return this;","309","        }","310","","311","        \/**","312","         * Indicates that the caller will directly write to the child process {@code stin} }via","313","         * {@link Proc#getStdin()} (whereas by default you call {@link #stdin(InputStream)}","314","         * and let Jenkins pump your {@link InputStream} of choosing to stdin.","315","         * @since 1.399","316","         *\/","317","        public ProcStarter writeStdin() {","318","            reverseStdin = true;","319","            stdin = null;","320","            return this;","321","        }","322","","323","","324","        \/**","342","            ProcStarter rhs = new ProcStarter().cmds(commands).pwd(pwd).masks(masks).stdin(stdin).stdout(stdout).stderr(stderr).envs(envs);","343","            rhs.reverseStdin  = this.reverseStdin;","344","            rhs.reverseStderr = this.reverseStderr;","345","            rhs.reverseStdout = this.reverseStdout;","346","            return rhs;","697","            return new LocalProc(jobCmd, Util.mapToEnv(jobEnv),","698","                    ps.reverseStdin ?LocalProc.SELFPUMP_INPUT:ps.stdin,","699","                    ps.reverseStdout?LocalProc.SELFPUMP_OUTPUT:ps.stdout,","700","                    ps.reverseStderr?LocalProc.SELFPUMP_OUTPUT:ps.stderr,","701","                    toFile(ps.pwd));","782","            final InputStream  in  = (ps.stdin==null || ps.stdin==NULL_INPUT_STREAM) ? null : new RemoteInputStream(ps.stdin,false);","785","            try {","786","                return new ProcImpl(getChannel().call(new RemoteLaunchCallable(ps.commands, ps.masks, ps.envs, in, ps.reverseStdin, out, ps.reverseStdout, err, ps.reverseStderr, workDir, listener)));","787","            } catch (InterruptedException e) {","788","                throw (IOException)new InterruptedIOException().initCause(e);","789","            }","832","","833","        public static final class ProcImpl extends Proc {","834","            private final RemoteProcess process;","835","            private final IOTriplet io;","836","","837","            public ProcImpl(RemoteProcess process) {","838","                this.process = process;","839","                this.io = process.getIOtriplet();","840","            }","841","","842","            @Override","843","            public void kill() throws IOException, InterruptedException {","844","                process.kill();","845","            }","846","","847","            @Override","848","            public int join() throws IOException, InterruptedException {","849","                return process.join();","850","            }","851","","852","            @Override","853","            public boolean isAlive() throws IOException, InterruptedException {","854","                return process.isAlive();","855","            }","856","","857","            @Override","858","            public InputStream getStdout() {","859","                return io.stdout;","860","            }","861","","862","            @Override","863","            public InputStream getStderr() {","864","                return io.stderr;","865","            }","866","","867","            @Override","868","            public OutputStream getStdin() {","869","                return io.stdin;","870","            }","871","        }","874","    private static class IOTriplet implements Serializable {","875","        InputStream stdout,stderr;","876","        OutputStream stdin;","877","        private static final long serialVersionUID = 1L;","878","    }","879","    \/**","880","     * Remoting interface of a remote process","881","     *\/","882","    static interface RemoteProcess {","883","        int join() throws InterruptedException, IOException;","884","        void kill() throws IOException, InterruptedException;","885","        boolean isAlive() throws IOException, InterruptedException;","886","        IOTriplet getIOtriplet();","887","    }","888","","889","    private static class RemoteLaunchCallable implements Callable<RemoteProcess,IOException> {","898","        private final boolean reverseStdin, reverseStdout, reverseStderr;","900","        RemoteLaunchCallable(List<String> cmd, boolean[] masks, String[] env, InputStream in, boolean reverseStdin, OutputStream out, boolean reverseStdout, OutputStream err, boolean reverseStderr, String workDir, TaskListener listener) {","909","            this.reverseStdin = reverseStdin;","910","            this.reverseStdout = reverseStdout;","911","            this.reverseStderr = reverseStderr;","914","        public RemoteProcess call() throws IOException {","918","            if (reverseStdin)   ps.writeStdin();","919","            if (reverseStdout)  ps.readStdout();","920","            if (reverseStderr)  ps.readStderr();","922","            final Proc p = ps.start();","923","","924","            return Channel.current().export(RemoteProcess.class,new RemoteProcess() {","925","                public int join() throws InterruptedException, IOException {","926","                    try {","927","                        return p.join();","928","                    } finally {","929","                        \/\/ make sure I\/O is delivered to the remote before we return","930","                        try {","931","                            Channel.current().syncIO();","932","                        } catch (Throwable _) {","933","                            \/\/ this includes a failure to sync, slave.jar too old, etc","934","                        }","935","                    }","937","","938","                public void kill() throws IOException, InterruptedException {","939","                    p.kill();","940","                }","941","","942","                public boolean isAlive() throws IOException, InterruptedException {","943","                    return p.isAlive();","944","                }","945","","946","                public IOTriplet getIOtriplet() {","947","                    IOTriplet r = new IOTriplet();","948","                    if (reverseStdout)  r.stdout = new RemoteInputStream(p.getStdout());","949","                    if (reverseStderr)  r.stderr = new RemoteInputStream(p.getStderr());","950","                    if (reverseStdin)   r.stdin  = new RemoteOutputStream(p.getStdin());","951","                    return r;","952","                }","953","            });","1024","    private static final NullInputStream NULL_INPUT_STREAM = new NullInputStream(0);","1025",""],"delete":["3"," * Copyright (c) 2004-2009, Sun Microsystems, Inc., Kohsuke Kawaguchi, Stephen Connolly","26","import hudson.Proc.RemoteProc;","146","        protected InputStream stdin = new NullInputStream(0);","286","            return new ProcStarter().cmds(commands).pwd(pwd).masks(masks).stdin(stdin).stdout(stdout).stderr(stderr).envs(envs);","637","            return new LocalProc(jobCmd, Util.mapToEnv(jobEnv), ps.stdin, ps.stdout, ps.stderr, toFile(ps.pwd));","718","            final InputStream  in  = ps.stdin==null ? null : new RemoteInputStream(ps.stdin);","721","            return new RemoteProc(getChannel().callAsync(new RemoteLaunchCallable(ps.commands, ps.masks, ps.envs, in, out, err, workDir, listener)));","766","    private static class RemoteLaunchCallable implements Callable<Integer,IOException> {","776","        RemoteLaunchCallable(List<String> cmd, boolean[] masks, String[] env, InputStream in, OutputStream out, OutputStream err, String workDir, TaskListener listener) {","787","        public Integer call() throws IOException {","792","            Proc p = ps.start();","793","            try {","794","                return p.join();","795","            } catch (InterruptedException e) {","796","                return -1;","797","            } finally {","798","                \/\/ make sure I\/O is delivered to the remote before we return","799","                try {","800","                    Channel.current().syncIO();","801","                } catch (Throwable _) {","802","                    \/\/ this includes a failure to sync, slave.jar too old, etc","804","            }"]}],"core\/src\/test\/java\/hudson\/LauncherTest.java":[{"add":["30","import org.jvnet.hudson.test.Bug;","35","    @Bug(4611)"],"delete":["34","    \/\/@Bug(4611)"]}],"changelog.html":[{"add":["83","  <li class=rfe>","84","    Improved the process forking abstractions so that plugins can more easily read from child processes.","85","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7809\">issue 7809<\/a>)"],"delete":[]}],"remoting\/src\/main\/java\/hudson\/remoting\/RemoteInputStream.java":[{"add":["41","    private boolean autoUnexport;","43","    \/**","44","     * Short for {@code RemoteInputStream(core,true)}.","45","     *\/","47","        this(core,true);","48","    }","49","","50","    \/**","51","     * @param autoUnexport","52","     *      If true, the {@link InputStream} will be automatically unexported when","53","     *      the callable that took it with returns. If false, it'll not unexported","54","     *      until the close method is called.","55","     *\/","56","    public RemoteInputStream(InputStream core, boolean autoUnexport) {","58","        this.autoUnexport = autoUnexport;","62","        int id = Channel.current().export(core,autoUnexport);"],"delete":["47","        int id = Channel.current().export(core);"]}],"core\/src\/main\/java\/hudson\/os\/windows\/WindowsRemoteLauncher.java":[{"add":["16","import java.io.InputStream;","92","","93","            @Override","94","            public InputStream getStdout() {","95","                throw new UnsupportedOperationException();","96","            }","97","","98","            @Override","99","            public InputStream getStderr() {","100","                throw new UnsupportedOperationException();","101","            }","102","","103","            @Override","104","            public OutputStream getStdin() {","105","                throw new UnsupportedOperationException();","106","            }"],"delete":[]}],"test\/src\/test\/java\/hudson\/ProcTest.java":[{"add":["2","import hudson.Launcher.LocalLauncher;","15","import java.io.ByteArrayInputStream;","30","        VirtualChannel ch = createSlaveChannel();","61","    private VirtualChannel createSlaveChannel() throws Exception {","62","        DumbSlave s = createSlave();","63","        s.toComputer().connect(false).get();","64","        VirtualChannel ch=null;","65","        while (ch==null) {","66","            ch = s.toComputer().getChannel();","67","            Thread.sleep(100);","68","        }","69","        return ch;","70","    }","71","","86","","87","    @Bug(7809)","88","    public void testIoPumpingWithLocalLaunch() throws Exception {","89","        doIoPumpingTest(new LocalLauncher(new StreamTaskListener(System.out, Charset.defaultCharset())));","90","    }","91","","92","    @Bug(7809)","93","    public void testIoPumpingWithRemoteLaunch() throws Exception {","94","        doIoPumpingTest(new RemoteLauncher(","95","                new StreamTaskListener(System.out, Charset.defaultCharset()),","96","                createSlaveChannel(), true));","97","    }","98","","99","    private void doIoPumpingTest(Launcher l) throws IOException, InterruptedException {","100","        String[] ECHO_BACK_CMD = {\"cat\"};   \/\/ TODO: what is the echo back command for Windows? \"cmd \/C copy CON CON\"?","101","","102","        ByteArrayOutputStream out = new ByteArrayOutputStream();","103","        l.launch().cmds(ECHO_BACK_CMD).stdin(new ByteArrayInputStream(\"Hello\".getBytes())).stdout(out).join();","104","        assertEquals(\"Hello\",out.toString());","105","","106","        Proc p = l.launch().cmds(ECHO_BACK_CMD).stdin(new ByteArrayInputStream(\"Hello\".getBytes())).readStdout().start();","107","        p.join();","108","        assertEquals(\"Hello\", org.apache.commons.io.IOUtils.toString(p.getStdout()));","109","        assertNull(p.getStderr());","110","        assertNull(p.getStdin());","111","","112","","113","        p = l.launch().cmds(ECHO_BACK_CMD).writeStdin().readStdout().start();","114","        p.getStdin().write(\"Hello\".getBytes());","115","        p.getStdin().close();","116","        p.join();","117","        assertEquals(\"Hello\", org.apache.commons.io.IOUtils.toString(p.getStdout()));","118","        assertNull(p.getStderr());","119","    }"],"delete":["28","        DumbSlave s = createSlave();","29","        s.toComputer().connect(false).get();","30","        VirtualChannel ch=null;","31","        while (ch==null) {","32","            ch = s.toComputer().getChannel();","33","            Thread.sleep(100);","34","        }"]}]}},"469c6e947a3ee6477758cc99f261d082c19ac923":{"changes":{"changelog.html":"MODIFY","rpm\/SPECS\/jenkins.spec":"MODIFY"},"diff":{"changelog.html":[{"add":["65","    RPM package should honor user-modified configuration file better","66","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10037\">issue 10037<\/a>)","67","  <li class=rfe>"],"delete":[]}],"rpm\/SPECS\/jenkins.spec":[{"add":["136","%config(noreplace) \/etc\/init.d\/%{name}","137","%config(noreplace) \/etc\/sysconfig\/%{name}"],"delete":["136","%config \/etc\/init.d\/%{name}","137","%config \/etc\/sysconfig\/%{name}"]}]}},"ad0723bd555c51ebe594176d04db9ffdcc07a7b8":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["86","        <version>1.9<\/version>","353","      <version>1.9<\/version>"],"delete":["86","        <version>1.8<\/version>","353","      <version>1.8<\/version>"]}]}},"2dd70965a781f3f8477ce06d1ecf61f6c3017ace":{"changes":{"core\/src\/main\/java\/hudson\/FileSystemProvisioner.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FileSystemProvisioner.java":[{"add":["25","import hudson.FilePath.TarCompression;","33","import hudson.util.DirScanner.Glob;","34","import hudson.util.io.ArchiverFactory;","216","            File wss = new File(build.getRootDir(),\"workspace.tgz\");","219","                ws.archive(ArchiverFactory.TARGZ,os,glob);","228","                File zip = new File(owner.getRootDir(),\"workspace.zip\");","229","                if (zip.exists()) {\/\/ we used to keep it in zip","230","                    new FilePath(zip).unzip(dst);","231","                } else {\/\/ but since 1.456 we do tgz","232","                    File tgz = new File(owner.getRootDir(),\"workspace.tgz\");","233","                    new FilePath(tgz).untar(dst, TarCompression.GZIP);","234","                }"],"delete":["213","            File wss = new File(build.getRootDir(),\"workspace.zip\");","216","                ws.zip(os,glob);","225","                File wss = new File(owner.getRootDir(),\"workspace.zip\");","226","                new FilePath(wss).unzip(dst);"]}],"changelog.html":[{"add":["58","    Workspace archiving wasn't handling symlinks correctly.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9118\">issue 9118<\/a>)"],"delete":["58","    tar\/untar now correctly handles symlinks."]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["417","    public int archive(final ArchiverFactory factory, OutputStream os, final FileFilter filter) throws IOException, InterruptedException {","421","    public int archive(final ArchiverFactory factory, OutputStream os, final String glob) throws IOException, InterruptedException {"],"delete":["417","    private int archive(final ArchiverFactory factory, OutputStream os, final FileFilter filter) throws IOException, InterruptedException {","421","    private int archive(final ArchiverFactory factory, OutputStream os, final String glob) throws IOException, InterruptedException {"]}]}},"849942fc8f28faccfe7a14f64aa895796df514b6":{"changes":{"core\/src\/main\/java\/hudson\/model\/Slave.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Slave.java":[{"add":["230","                        final Process proc = Runtime.getRuntime().exec(slave.agentCommand);","244","                                proc.destroy();"],"delete":["230","                        Process proc = Runtime.getRuntime().exec(slave.agentCommand);"]}]}},"7baeec3636850536a224c427054f8bc2e14b5819":{"changes":{"core\/src\/main\/resources\/hudson\/model\/ComputerSet\/index.jelly":"MODIFY","core\/src\/main\/java\/hudson\/node_monitors\/DiskSpaceMonitor.java":"MODIFY","core\/src\/main\/java\/hudson\/node_monitors\/SwapSpaceMonitor.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/ComputerSet\/index.jelly":[{"add":["4","<l:layout title=\"Nodes\">","8","      #computers td {"],"delete":["4","<l:layout title=\"Nodes\" permission=\"${app.ADMINISTER}\">","8","      #computers TD {"]}],"core\/src\/main\/java\/hudson\/node_monitors\/DiskSpaceMonitor.java":[{"add":["6","import hudson.model.Hudson;","47","    @Override","48","    public String getColumnCaption() {","49","        \/\/ Hide this column from non-admins","50","        return Hudson.getInstance().hasPermission(Hudson.ADMINISTER) ? super.getColumnCaption() : null;","51","    }","52",""],"delete":[]}],"core\/src\/main\/java\/hudson\/node_monitors\/SwapSpaceMonitor.java":[{"add":["4","import hudson.model.Hudson;","53","    @Override","54","    public String getColumnCaption() {","55","        \/\/ Hide this column from non-admins","56","        return Hudson.getInstance().hasPermission(Hudson.ADMINISTER) ? super.getColumnCaption() : null;","57","    }","58",""],"delete":[]}]}},"d02c7563588aa534629e05b873946680953dbfdc":{"changes":{"war\/src\/main\/js\/pluginSetupWizardGui.js":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"war\/src\/main\/js\/pluginSetupWizardGui.js":[{"add":["942","                jenkins.get('\/api\/json?tree=url', function(data) {","943","                    if (data.url) {","944","                        \/\/ as in InstallState.ConfigureInstance.initializeState","945","                        showSetupCompletePanel({message: translations.installWizard_firstUserSkippedMessage});","946","                    } else {","947","                        showConfigureInstance();","948","                    }","949","                }, {","950","                    error: function() {","951","                        \/\/ give up","952","                        showConfigureInstance();","953","                    }","954","                });"],"delete":["942","\t\tshowConfigureInstance();"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["306","import org.kohsuke.accmod.restrictions.DoNotUse;","2343","    \/** Exported alias for {@link JenkinsLocationConfiguration#getUrl}. *\/","2344","    @Exported(name=\"url\")","2345","    @Restricted(DoNotUse.class)","2346","    @CheckForNull","2347","    public String getConfiguredRootUrl() {","2348","        JenkinsLocationConfiguration config = JenkinsLocationConfiguration.get();","2349","        return config != null ? config.getUrl() : null;","2350","    }","2351",""],"delete":[]}]}},"0c2a80928bb720c0ea6794f0d0bd8a6a5f1ea3f0":{"changes":{"core\/src\/main\/resources\/lib\/form\/repeatableDeleteButton.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/repeatableDeleteButton.jelly":[{"add":["33","  <st:adjunct includes=\"lib.form.repeatable.repeatable\"\/>"],"delete":[]}]}},"c1e3a64eea8889b5483343f9bc717bb803fd8357":{"changes":{"core\/src\/main\/java\/hudson\/model\/RunMap.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/RunMap.java":[{"add":["233","            } catch (Exception e) {","234","                LOGGER.log(Level.WARNING, \"could not load \" + d, e);"],"delete":[]}]}},"d3bf209f002a6e90162fb2cd40909da77b27b3f3":{"changes":{"test\/src\/test\/resources\/hudson\/maven\/maven-multimodule-site.zip":"ADD","test\/src\/test\/java\/hudson\/maven\/MavenProjectTest.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenSiteArchiver.java":"MODIFY"},"diff":{"test\/src\/test\/resources\/hudson\/maven\/maven-multimodule-site.zip":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/maven\/MavenProjectTest.java":[{"add":["50","        return createProject(\"\/simple-projects.zip\");","51","    }","52","","53","    private MavenModuleSet createProject(final String scmResource) throws IOException, Exception {","57","                scmResource)));","90","","91","    \/**","92","     * Check if the generated site is linked correctly for multi module projects.","93","     *\/","94","    public void testMultiModuleSiteBuild() throws Exception {","95","        MavenModuleSet project = createProject(\"maven-multimodule-site.zip\");","96","        project.setGoals(\"site\");","97","","98","        buildAndAssertSuccess(project);","99","","100","        \/\/ this should succeed","101","        HudsonTestCase.WebClient wc = new WebClient();","102","        wc.getPage(project, \"site\");","103","        wc.getPage(project, \"site\/core\");","104","        wc.getPage(project, \"site\/client\");","105","    }"],"delete":["53","                \"\/simple-projects.zip\")));"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenSiteArchiver.java":[{"add":["2"," *","4"," *","11"," *","14"," *","28","import hudson.maven.MavenBuild;","35","import hudson.maven.MavenBuildProxy.BuildCallable;","52"," * Simple projects with one POM will find the site directly beneath {@code site}.","53"," * For multi module projects the project whose pom is referenced in the configuration (i.e. the {@link MavenBuild#getParentBuild()} will be recorded to","54"," * the {@code site}, module projects' sites will be stored beneath {@code site\/${moduleProject.artifactId}}.","55"," *","59","","74","            \/\/ try to get the storage location if this is a multi-module project.","75","            final String moduleName = getModuleName(build, pom);","76","            \/\/ store at MavenModuleSet level and moduleName","77","            final FilePath target = build.getModuleSetRootDir().child(\"site\").child(moduleName);","79","                listener.getLogger().printf(\"[HUDSON] Archiving site from %s to %s\\n\", destDir, target);","93","    \/**","94","     * In multi module builds pomBaseDir of the parent project is the same as parent build module root.","95","     *","96","     * @param build","97","     * @param pom","98","     *","99","     * @return the relative path component to copy sites of multi module builds.","100","     * @throws IOException","101","     *\/","102","    private String getModuleName(MavenBuildProxy build, MavenProject pom) throws IOException {","103","        final FilePath moduleRoot;","104","        try {","105","            moduleRoot = build.execute(new BuildCallable<FilePath, IOException>() {","106","                \/\/@Override","107","                public FilePath call(MavenBuild mavenBuild) throws IOException, InterruptedException {","108","                    return mavenBuild.getParentBuild().getModuleRoot();","109","                }","110","            });","111","        } catch (InterruptedException e) {","112","            throw new RuntimeException(e);","113","        }","114","        final File pomBaseDir = pom.getBasedir();","115","        final File remoteWorkspaceDir = new File(moduleRoot.getRemote());","116","        if (pomBaseDir.equals(remoteWorkspaceDir)) {","117","            return \"\";","118","        } else {","119","            return pom.getArtifactId();","120","        }","121","    }","122",""],"delete":["2"," * ","4"," * ","11"," * ","14"," * ","67","            \/\/ be defensive. I suspect there's some interaction with this and multi-module builds","68","            FilePath target;","69","            \/\/ store at MavenModuleSet level.","70","            target = build.getModuleSetRootDir().child(\"site\");","71","","73","                listener.getLogger().println(\"[HUDSON] Archiving site\");"]}]}},"aaae71af4bd2952efdc3462fde086faa6a604ee2":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["91","import org.apache.commons.codec.digest.DigestUtils;","92","import org.apache.commons.io.FileUtils;","93","","186","     * Reads the entire contents of the text file at <code>logfile<\/code> into a","187","     * string using the {@link Charset#defaultCharset() default charset} for","188","     * decoding. If no such file exists, an empty string is returned.","189","     * @param logfile The text file to read in its entirety.","190","     * @return The entire text content of <code>logfile<\/code>.","191","     * @throws IOException If an error occurs while reading the file.","192","     * @deprecated call {@link #loadFile(java.io.File, java.nio.charset.Charset)}","193","     * instead to specify the charset to use for decoding (preferably","194","     * {@link java.nio.charset.StandardCharsets#UTF_8}).","197","    @Deprecated","202","    \/**","203","     * Reads the entire contents of the text file at <code>logfile<\/code> into a","204","     * string using <code>charset<\/code> for decoding. If no such file exists,","205","     * an empty string is returned.","206","     * @param logfile The text file to read in its entirety.","207","     * @param charset The charset to use for decoding the bytes in <code>logfile<\/code>.","208","     * @return The entire text content of <code>logfile<\/code>.","209","     * @throws IOException If an error occurs while reading the file.","210","     *\/","213","        \/\/ Note: Until charset handling is resolved (e.g. by implementing","214","        \/\/ https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-48923 ), this method","215","        \/\/ must be able to handle character encoding errors. As reported at","216","        \/\/ https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-49112 Run.getLog() calls","217","        \/\/ loadFile() to fully read the generated log file. This file might","218","        \/\/ contain unmappable and\/or malformed byte sequences. We need to make","219","        \/\/ sure that in such cases, no CharacterCodingException is thrown.","221","        \/\/ One approach that cannot be used is to call Files.newBufferedReader()","222","        \/\/ because there is a difference in how an InputStreamReader constructed","223","        \/\/ from a Charset and the reader returned by Files.newBufferedReader()","224","        \/\/ handle malformed and unmappable byte sequences for the specified","225","        \/\/ encoding; the latter is more picky and will throw an exception.","226","        \/\/ See: https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-49060?focusedCommentId=325989&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-325989","227","        try {","228","            return FileUtils.readFileToString(logfile, charset);","229","        } catch (FileNotFoundException e) {","230","            return \"\";","232","            throw new IOException(\"Failed to fully read \" + logfile, e);"],"delete":["183","     * Loads the contents of a file into a string.","192","        if(!logfile.exists())","193","            return \"\";","194","","195","        StringBuilder str = new StringBuilder((int)logfile.length());","196","","197","        \/\/ We're not using Files.newBufferedReader() here because there is a","198","        \/\/ difference in how an InputStreamReader constructed from a Charset and","199","        \/\/ the reader returned by Files.newBufferedReader() handle malformed and","200","        \/\/ unmappable byte sequences for the specified encoding; the latter is","201","        \/\/ more picky and will throw a CharacterCodingException. See:","202","        \/\/ https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-49060?focusedCommentId=325989&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-325989","204","        \/\/ As reported at https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-49112","205","        \/\/ Run.getLog() calls loadFile() to fully read the generated log file.","206","        \/\/ Until charset handling is resolved (e.g. by implementing","207","        \/\/ https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-48923 ), malformed","208","        \/\/ bytes will need to be tolerated.","209","        try (InputStream rawIn = Files.newInputStream(fileToPath(logfile));","210","             Reader r = new BufferedReader(new InputStreamReader(rawIn, charset))) {","211","            char[] buf = new char[1024];","212","            int len;","213","            while ((len = r.read(buf, 0, buf.length)) > 0)","214","                str.append(buf, 0, len);","216","            throw new IOException(\"Failed to fully read \" + logfile + \" using charset \" + charset.name(), e);","218","","219","        return str.toString();"]}]}},"2ec26c8ac63a707dfe99d7570321279afe11adbb":{"changes":{"core\/src\/main\/java\/jenkins\/model\/RunIdMigrator.java":"MODIFY","core\/src\/test\/java\/jenkins\/model\/RunIdMigratorTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/RunIdMigrator.java":[{"add":["352","","353","            if (job.getName().equals(\"builds\")) {","354","                \/\/ Might be maven modules, matrix builds, etc. which are direct children of job","355","                unmigrateBuildsDir(job);","356","            }","357","","369","                    \/\/ Might be jobs, modules, promotions, etc.; we assume an ItemGroup.getRootDirFor implementation","370","                    \/\/ returns grandchildren, unmigrateJobsDir(job) call above handles children."],"delete":["363","                    \/\/ Might be jobs, modules, promotions, etc.; we assume an ItemGroup.getRootDirFor implementation returns grandchildren."]}],"core\/src\/test\/java\/jenkins\/model\/RunIdMigratorTest.java":[{"add":["130","    @Test public void reverseMatrixAfterNewBuilds() throws Exception {","131","        File root = dir;","132","        dir = new File(dir, \"jobs\/someproject\/Environment=prod\/builds\");","133","        write(\"1\/build.xml\", \"<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <timestamp>1388649845000<\/timestamp>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>\");","134","        write(\"legacyIds\", \"\");","135","        assertEquals(\"{1={build.xml='<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <timestamp>1388649845000<\/timestamp>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>'}, legacyIds=''}\", summarize());","136","        RunIdMigrator.main(root.getAbsolutePath());","137","        assertEquals(\"{1=?2014-01-02_03-04-05, 2014-01-02_03-04-05={build.xml='<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <number>1<\/number>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>'}}\", summarize());","138","    }","139","","140","    @Test public void reverseMavenAfterNewBuilds() throws Exception {","141","        File root = dir;","142","        dir = new File(dir, \"jobs\/someproject\/test$test\/builds\");","143","        write(\"1\/build.xml\", \"<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <timestamp>1388649845000<\/timestamp>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>\");","144","        write(\"legacyIds\", \"\");","145","        assertEquals(\"{1={build.xml='<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <timestamp>1388649845000<\/timestamp>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>'}, legacyIds=''}\", summarize());","146","        RunIdMigrator.main(root.getAbsolutePath());","147","        assertEquals(\"{1=?2014-01-02_03-04-05, 2014-01-02_03-04-05={build.xml='<?xml version='1.0' encoding='UTF-8'?>\\n<run>\\n  <stuff>ok<\/stuff>\\n  <number>1<\/number>\\n  <otherstuff>ok<\/otherstuff>\\n<\/run>'}}\", summarize());","148","    }","149",""],"delete":[]}]}},"a92e9da978262c6a7e4d74d3b2750319cbc748fb":{"changes":{"test\/src\/test\/java\/hudson\/maven\/MavenMultiModuleTest.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","changelog.html":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/maven\/MavenMultiModuleTest.java":[{"add":["3","import hudson.Functions;","11","import hudson.Util;","16","import hudson.model.Job;","17","import hudson.model.PermalinkProjectAction;","21","import java.io.File;","24","import java.util.Set;","25","import java.util.TreeSet;","27","import org.junit.Assume;","53","    @Bug(18846)","54","    @Test public void symlinksUpdated() throws Exception {","55","        Assume.assumeFalse(Functions.isWindows());","56","        j.configureDefaultMaven();","57","        MavenModuleSet mms = j.createMavenProject();","58","        mms.setScm(new ExtractResourceSCM(MavenMultiModuleTest.class.getResource(\"maven-multimod.zip\")));","59","        j.buildAndAssertSuccess(mms);","60","        MavenModule mm = mms.getModule(\"org.jvnet.hudson.main.test.multimod:moduleA\");","61","        j.buildAndAssertSuccess(mms);","62","        assertEquals(2, mms.getLastStableBuild().number);","63","        assertEquals(mms.getLastBuild().getId(), Util.resolveSymlink(new File(mms.getRootDir(), \"builds\/2\")));","64","        assertEquals(\"2\", Util.resolveSymlink(new File(mms.getRootDir(), \"builds\/lastStableBuild\")));","65","        assertEquals(\"builds\/lastStableBuild\", Util.resolveSymlink(new File(mms.getRootDir(), \"lastStable\")));","66","        assertEquals(\"[lastBuild, lastStableBuild, lastSuccessfulBuild]\", permalinks(mms).toString());","67","        assertEquals(2, mm.getLastStableBuild().number);","68","        assertEquals(mm.getLastBuild().getId(), Util.resolveSymlink(new File(mm.getRootDir(), \"builds\/2\")));","69","        assertEquals(\"2\", Util.resolveSymlink(new File(mm.getRootDir(), \"builds\/lastStableBuild\")));","70","        assertEquals(\"builds\/lastStableBuild\", Util.resolveSymlink(new File(mm.getRootDir(), \"lastStable\")));","71","        assertEquals(\"[lastBuild, lastStableBuild, lastSuccessfulBuild]\", permalinks(mm).toString());","72","    }","73","    private static Set<String> permalinks(Job<?,?> j) {","74","        Set<String> r = new TreeSet<String>();","75","        for (PermalinkProjectAction.Permalink l : j.getPermalinks()) {","76","            if (l.resolve(j) != null) {","77","                r.add(l.getId());","78","            }","79","        }","80","        return r;","81","    }","82",""],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["123","import jenkins.model.PeepholePermalink;","1600","                    updateSymlinks(listener);","1677","     * Creates a symlink from build number to ID.","1678","     * Also makes sure that {@code lastSuccessful} and {@code lastStable} legacy links in the project\u2019s root directory exist.","1679","     * Normally you do not need to call this explicitly, since {@link #execute} does so,","1680","     * but this may be needed if you are creating synthetic {@link Run}s as part of a container project (such as Maven builds in a module set).","1681","     * You should also ensure that {@link RunListener#fireStarted} and {@link RunListener#fireCompleted} are called.","1682","     * @param listener probably unused","1683","     * @throws InterruptedException probably not thrown","1684","     * @since 1.530","1685","     *\/","1686","    public final void updateSymlinks(TaskListener listener) throws InterruptedException {","1687","        Util.createSymlink(getParent().getBuildDir(), getId(), String.valueOf(getNumber()), listener);","1688","        createSymlink(listener, \"lastSuccessful\", PermalinkProjectAction.Permalink.LAST_SUCCESSFUL_BUILD);","1689","        createSymlink(listener, \"lastStable\", PermalinkProjectAction.Permalink.LAST_STABLE_BUILD);","1690","    }","1691","    \/**","1692","     * Backward compatibility.","1693","     *","1694","     * We used to have $JENKINS_HOME\/jobs\/JOBNAME\/lastStable and lastSuccessful symlinked to the appropriate","1695","     * builds, but now those are done in {@link PeepholePermalink}. So here, we simply create symlinks that","1696","     * resolves to the symlink created by {@link PeepholePermalink}.","1697","     *\/","1698","    private void createSymlink(TaskListener listener, String name, PermalinkProjectAction.Permalink target) throws InterruptedException {","1699","        File buildDir = getParent().getBuildDir();","1700","        File rootDir = getParent().getRootDir();","1701","        String targetDir;","1702","        if (buildDir.equals(new File(rootDir, \"builds\"))) {","1703","            targetDir = \"builds\" + File.separator + target.getId();","1704","        } else {","1705","            targetDir = buildDir + File.separator + target.getId();","1706","        }","1707","        Util.createSymlink(rootDir, targetDir, name, listener);","1708","    }","1709","","1710","    \/**"],"delete":["1599","                    \/\/ create a symlink from build number to ID.","1600","                    Util.createSymlink(getParent().getBuildDir(),getId(),String.valueOf(getNumber()),listener);"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Build number symlinks and permalinks not updated for Maven module builds.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18846\">issue 18846<\/a>)"],"delete":["57","  <li class=>"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenBuild.java":[{"add":["43","import hudson.model.listeners.RunListener;","76","import java.util.logging.Level;","501","            RunListener.fireStarted(MavenBuild.this, listener);","517","            try {","518","                updateSymlinks(listener);","519","            } catch (InterruptedException x) {","520","                Logger.getLogger(MavenBuild.class.getName()).log(Level.WARNING, null, x);","521","            }","522","            RunListener.fireCompleted(MavenBuild.this, listener);"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":[],"delete":["39","import hudson.model.PermalinkProjectAction.Permalink;","61","import jenkins.model.PeepholePermalink;","480","     * Backward compatibility.","481","     *","482","     * We used to have $JENKINS_HOME\/jobs\/JOBNAME\/lastStable and lastSuccessful symlinked to the appropriate","483","     * builds, but now those are done in {@link PeepholePermalink}. So here, we simply create symlinks that","484","     * resolves to the symlink created by {@link PeepholePermalink}.","485","     *\/","486","    private void createSymlink(TaskListener listener, String name, Permalink target) throws InterruptedException {","487","        String targetDir;","488","        if (getProject().getBuildDir().equals(new File(getProject().getRootDir(), \"builds\"))) {","489","            targetDir = \"builds\" + File.separator + target.getId();","490","        } else {","491","            targetDir = getProject().getBuildDir() + File.separator + target.getId();","492","        }","493","        Util.createSymlink(getProject().getRootDir(), targetDir, name, listener);","494","    }","495","","496","    \/**","726","","727","                createSymlink(listener, \"lastSuccessful\", Permalink.LAST_SUCCESSFUL_BUILD);","728","                createSymlink(listener, \"lastStable\", Permalink.LAST_STABLE_BUILD);"]}]}},"815c42c458b47f8360f13743b60ffb8348f225b6":{"changes":{"war\/src\/main\/webapp\/scripts\/sortable.js":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/sortable.js":[{"add":["160","        if (! Element.hasClassName(newRows[i], 'sortbottom'))","165","        if (Element.hasClassName(newRows[i], 'sortbottom'))"],"delete":["160","        if (Element.hasClassName(newRows[i], 'sortbottom'))","165","        if (! Element.hasClassName(newRows[i], 'sortbottom'))"]}]}},"620add3762e35f95c033101053654c27b6b33a74":{"changes":{"war\/pom.xml":"MODIFY"},"diff":{"war\/pom.xml":[{"add":["150","                  <version>0.9.10-hudson-2<\/version>"],"delete":["150","                  <version>0.9.10-hudson-1<\/version>"]}]}},"1f055074b7001a5beed76e5ff7244ef4a0b59923":{"changes":{"core\/src\/main\/java\/hudson\/node_monitors\/TemporarySpaceMonitor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/node_monitors\/TemporarySpaceMonitor.java":[{"add":[],"delete":["95","            } finally {","96","                f.delete();"]}]}},"32913046e2e0ab1fa4d93b619401d1594d2500b5":{"changes":{"core\/src\/main\/java\/hudson\/model\/FingerprintMap.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/FingerprintMap.java":[{"add":["76","    \/**","77","     * Null if the build isn't claiming to be the owner.","78","     *\/"],"delete":["83","        assert build!=null;"]}]}},"0da5be71c2160edf80f83efee487e8b070f7d88d":{"changes":{"core\/src\/main\/resources\/hudson\/PluginManager\/installed.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/PluginManager\/installed.jelly":[{"add":["137","          <j:if test=\"${it.isPluginUploaded()}\">","138","            e = true;","139","          <\/j:if>"],"delete":["106","      <j:if test=\"${it.isPluginUploaded()}\">","107","        <div style=\"margin: 1em; height: 1em\">","108","          <div class=\"error\">","109","            ${%New plugins will take effect once you restart Jenkins}","110","            <j:if test=\"${app.lifecycle.canRestart()}\">","111","              <s:submit value=\"${%Restart Once No Jobs Are Running}\" \/>","112","            <\/j:if>","113","          <\/div>","114","        <\/div>","115","      <\/j:if>"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Restart button does not restart jenkins after plugin upload","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10044\">issue 10044<\/a>)"],"delete":[]}]}},"90eac31bda6b7267c9b26905ab592f4a215e83fa":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["537","      <version>4.5.2<\/version>"],"delete":["537","      <version>4.2.1<\/version>"]}]}},"f9ce6558c93d7f7ff0f8df12fb80f9ecc868ff99":{"changes":{"test\/src\/test\/java\/hudson\/maven\/MavenMultiModuleLogRotatorCleanArtifactsTest.java":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/maven\/MavenMultiModuleLogRotatorCleanArtifactsTest.java":[{"add":["27"," * ","28"," * Test that looks in jobs archive with 2 builds. When LogRotator set as build","31"," * and expecting jars in build 2.","53","\t\t\tAssert.assertNotNull(build.getProject().getSomeWorkspace());","73","\t\tFilePath workspace = m.getSomeWorkspace();","80","\t@For({MavenModuleSetBuild.class, LogRotator.class})","99","\t@For({MavenModuleSetBuild.class, LogRotator.class})"],"delete":["27"," * Testing https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17508 <br \/>","28"," * test that looks in jobs archive with 2 builds when LogRotator set as build","31"," * and expecting jars in build 2","53","\t\t\tAssert.assertNotNull(build.getProject().getWorkspace());","73","\t\tFilePath workspace = m.getWorkspace();","80","\t@For(MavenModuleSetBuild.class)"]}]}},"fdc090a3ae3830196b64535862425c6cd844d46b":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["235","      <version>1.4.4-jenkins-3<\/version>"],"delete":["235","      <version>1.4.4-jenkins-2<\/version>"]}],"changelog.html":[{"add":["57","  <li class='major bug'>","58","    Heavy thread congestion saving fingerprints.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13154\">issue 13154<\/a>)"],"delete":[]}]}},"42de07bba60bdde51ee7123ed6c65a11cddb78ae":{"changes":{"core\/src\/main\/java\/hudson\/init\/impl\/GroovyInitScript.java":"MODIFY","core\/src\/main\/java\/jenkins\/util\/groovy\/GroovyHookScript.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/BootFailure.java":"MODIFY","test\/src\/test\/java\/hudson\/util\/BootFailureTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/init\/impl\/GroovyInitScript.java":[{"add":["40","        new GroovyHookScript(\"init\", j.servletContext, j.getRootDir(), j.getPluginManager().uberClassLoader).run();"],"delete":["40","        new GroovyHookScript(\"init\").run();"]}],"core\/src\/main\/java\/jenkins\/util\/groovy\/GroovyHookScript.java":[{"add":["13","import java.util.logging.Logger;","14","import javax.annotation.Nonnull;","15","import javax.servlet.ServletContext;","41","    private final ServletContext servletContext;","42","    private final File home;","43","    private final ClassLoader loader;","45","    public GroovyHookScript(String hook, @Nonnull ServletContext servletContext, @Nonnull File home, @Nonnull ClassLoader loader) {","47","        this.servletContext = servletContext;","48","        this.home = home;","49","        this.loader = loader;","66","            URL bundled = servletContext.getResource(\"\/WEB-INF\/\"+ hookGroovy);","72","        Set<String> resources = servletContext.getResourcePaths(\"\/WEB-INF\/\"+ hookGroovyD +\"\/\");","77","                    URL bundled = servletContext.getResource(res);","85","        File script = new File(home, hookGroovy);","88","        File scriptD = new File(home, hookGroovyD);","135","        return new GroovyShell(loader, bindings);"],"delete":["5","import jenkins.model.Jenkins;","6","","14","import java.util.logging.Logger;","15","","43","    public GroovyHookScript(String hook) {","57","        Jenkins j = Jenkins.getInstance();","62","            URL bundled = j.servletContext.getResource(\"\/WEB-INF\/\"+ hookGroovy);","68","        Set<String> resources = j.servletContext.getResourcePaths(\"\/WEB-INF\/\"+ hookGroovyD +\"\/\");","73","                    URL bundled = j.servletContext.getResource(res);","81","        File script = new File(j.getRootDir(), hookGroovy);","84","        File scriptD = new File(j.getRootDir(), hookGroovyD);","131","        return new GroovyShell(Jenkins.getInstance().getPluginManager().uberClassLoader, bindings);"]}],"core\/src\/main\/java\/hudson\/util\/BootFailure.java":[{"add":["42","        if (home == null) {","43","            return;","44","        }","45","        new GroovyHookScript(\"boot-failure\", context, home, BootFailure.class.getClassLoader())"],"delete":["42","        new GroovyHookScript(\"boot-failure\")"]}],"test\/src\/test\/java\/hudson\/util\/BootFailureTest.java":[{"add":["10","import java.util.Collections;","22","import org.jvnet.hudson.test.Issue;","38","    static WebAppMain wa;","51","            wa = new WebAppMain() {","135","    @Issue(\"JENKINS-24696\")","136","    @Test","137","    public void interruptedStartup() throws Exception {","138","        final File home = tmpDir.newFolder();","139","        j.with(new HudsonHomeLoader() {","140","            @Override","141","            public File allocate() throws Exception {","142","                return home;","143","            }","144","        });","145","        File d = new File(home, \"boot-failure.groovy.d\");","146","        d.mkdirs();","147","        FileUtils.write(new File(d, \"1.groovy\"), \"hudson.util.BootFailureTest.runRecord << '1'\");","148","        j.newHudson();","149","        assertEquals(Collections.singletonList(\"1\"), runRecord);","150","    }","151","    @TestExtension(\"interruptedStartup\")","152","    public static class PauseBoot extends ItemListener {","153","        @Override","154","        public void onLoaded() {","155","            wa.contextDestroyed(null);","156","        }","157","    }","158",""],"delete":["48","            WebAppMain wa = new WebAppMain() {"]}]}},"7f34cbf5c7484975e7c00a5c74f3ca9f8f7c49a2":{"changes":{"core\/pom.xml":"MODIFY","cli\/pom.xml":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":[],"delete":["119","      <groupId>org.kohsuke<\/groupId>","120","      <artifactId>trilead-putty-extension<\/artifactId>","121","      <version>1.2<\/version>","122","    <\/dependency>","123","    <dependency>"]}],"cli\/pom.xml":[{"add":[],"delete":["79","    <dependency> <!-- TODO remove and replace PrivateKeyProvider with SecurityUtils.createFileKeyPairProvider() as in SshClient -->","80","      <groupId>org.jenkins-ci<\/groupId>","81","      <artifactId>trilead-ssh2<\/artifactId>","82","      <version>build214-jenkins-1<\/version>","83","    <\/dependency>"]}],"war\/pom.xml":[{"add":["102","      <version>1.7<\/version>"],"delete":["102","      <version>1.5<\/version>"]}]}},"36bce39ff4fe7fe3f606d7d9599c30e4c7392785":{"changes":{"core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["1583","                \/\/ TODO first check for Java 7+ and use PosixFileAttributeView","1595","        \/\/ TODO WindowsPosix actually does something here (WindowsLibC._wchmod); should we let it?","1596","        \/\/ Anyway the existing calls already skip this method if on Windows.","1597","        if (File.pathSeparatorChar==';')  return; \/\/ noop"],"delete":["1594","        if (Functions.isWindows())  return; \/\/ noop"]}]}},"5ecbbefb6d83fbc4c8919b94b33f491fa0e0055f":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["91","import org.kohsuke.accmod.Restricted;","92","import org.kohsuke.accmod.restrictions.NoExternalUse;","123","","124","    @Restricted(NoExternalUse.class)","125","    public static final String ID_UPLOAD = \"_upload\";","1019","            if (ID_UPLOAD.equals(site.getId())) {","1020","                return;","1021","            }"],"delete":[]}],"changelog.html":[{"add":["61","    Reworked Upload Plugin gesture to work more like installation from an update center, and in particular to support dynamic load.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16652\">issue 16652<\/a>)","63","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["734","            File t = File.createTempFile(\"uploaded\", \".jpi\");","735","            t.deleteOnExit();","736","            fileItem.write(t);","743","            \/\/ Now create a dummy plugin that we can dynamically load (the InstallationJob will force a restart if one is needed):","744","            JSONObject cfg = new JSONObject().","745","                    element(\"name\", baseName).","746","                    element(\"version\", \"0\"). \/\/ unused but mandatory","747","                    element(\"url\", t.toURI().toString()).","748","                    element(\"dependencies\", new JSONArray());","749","            new UpdateSite(UpdateCenter.ID_UPLOAD, null).new Plugin(UpdateCenter.ID_UPLOAD, cfg).deploy(true);","750","            return new HttpRedirect(\"..\/updateCenter\");"],"delete":["734","            File t = File.createTempFile(\"uploaded\", \"jp_\",rootDir);","735","            fileItem.write(t); \/\/ rename all new plugins to *.jpi","740","            \/\/ and move the temp file into a proper name","741","            new File(rootDir, baseName + \".hpi\").delete(); \/\/ don't keep confusing legacy *.hpi","742","            new File(rootDir, baseName + \".jpi\").delete(); \/\/ rename can fail if the file already exists","743","            t.renameTo(new File(rootDir, baseName + \".jpi\"));","744","","745","            PluginWrapper existing = getPlugin(baseName);","746","            if (existing!=null && existing.isBundled){","747","                existing.doPin();","748","            }","749","","752","            return new HttpRedirect(\".\");"]}]}},"44a97d5a1f3323b807e12551bff4c9b73528d4dc":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/Pipe.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/Pipe.java":[{"add":["155","            PipedInputStream pis = new PipedInputStream(pos);","162","            in = pis;"],"delete":["161","            in = new PipedInputStream(pos);"]}]}},"4335bd435f9e5258831c5631bfab2fd837fd7719":{"changes":{"rpm\/SPECS\/jenkins.spec":"MODIFY"},"diff":{"rpm\/SPECS\/jenkins.spec":[{"add":["112","# Ensure the right ownership on files","113",". \/etc\/sysconfig\/jenkins","114","chown -R ${JENKINS_USER:-jenkins} \/var\/log\/jenkins","115","chown -R ${JENKINS_USER:-jenkins} ${JENKINS_HOME:-%{workdir}}"],"delete":[]}]}},"aa5e0790b900daad58192124ae771cf302a40878":{"changes":{"core\/src\/main\/java\/hudson\/search\/SearchItem.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","test\/src\/test\/java\/hudson\/search\/SearchTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/search\/SearchItem.java":[{"add":["55","     * Returns the {@link SearchIndex} to further search sub items inside this item."],"delete":["55","     * Returns the {@link SearchIndex} to further search into this item."]}],"changelog.html":[{"add":["57","  <li class=rfe>","58","    Search index includes all top-level jobs, not just jobs in the current view.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13148\">issue 13148<\/a>)"],"delete":["57","  <li class=>"]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["135","import hudson.search.SearchItem;","1764","            .add(new CollectionSearchIndex<TopLevelItem>() {","1765","                protected SearchItem get(String key) { return getItem(key); }","1766","                protected Collection<TopLevelItem> all() { return getItems(); }","1767","            })"],"delete":[]}],"test\/src\/test\/java\/hudson\/search\/SearchTest.java":[{"add":["25","import hudson.model.ListView;","40","import java.util.ArrayList;","41","import java.util.List;","42","","207","","208","    \/**","209","     * Disable\/enable status shouldn't affect the search","210","     *\/","211","    @Bug(13148)","212","    public void testDisabledJobShouldBeSearchable() throws Exception {","213","        FreeStyleProject j = createFreeStyleProject(\"foo-bar\");","214","        assertTrue(suggest(jenkins.getSearchIndex(), \"foo\").contains(j));","215","","216","        j.disable();","217","        assertTrue(suggest(jenkins.getSearchIndex(), \"foo\").contains(j));","218","    }","219","","220","    \/**","221","     * All top-level jobs should be searchable, not just jobs in the current view.","222","     *\/","223","    @Bug(13148)","224","    public void testCompletionOutsideView() throws Exception {","225","        FreeStyleProject j = createFreeStyleProject(\"foo-bar\");","226","        ListView v = new ListView(\"empty1\",jenkins);","227","        ListView w = new ListView(\"empty2\",jenkins);","228","        jenkins.addView(v);","229","        jenkins.addView(w);","230","        jenkins.setPrimaryView(w);","231","","232","        \/\/ new view should be empty","233","        assertFalse(v.contains(j));","234","        assertFalse(w.contains(j));","235","        assertFalse(jenkins.getPrimaryView().contains(j));","236","","237","        assertTrue(suggest(jenkins.getSearchIndex(),\"foo\").contains(j));","238","    }","239","","240","    private List<SearchItem> suggest(SearchIndex index, String term) {","241","        List<SearchItem> result = new ArrayList<SearchItem>();","242","        index.suggest(term, result);","243","        return result;","244","    }"],"delete":["25","import jenkins.model.Jenkins;","35","import net.sf.json.util.JSONBuilder;"]}]}},"9e81b8e4feebceef94d117b757952c965bf91c61":{"changes":{"core\/src\/main\/java\/jenkins\/security\/BasicHeaderRealPasswordAuthenticator.java":"MODIFY","core\/src\/main\/java\/jenkins\/security\/BasicHeaderProcessor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/BasicHeaderRealPasswordAuthenticator.java":[{"add":[],"delete":["21","import org.acegisecurity.context.SecurityContextHolder;","23","import org.acegisecurity.providers.anonymous.AnonymousAuthenticationToken;","51","        if (!authenticationIsRequired(username))","52","            return SecurityContextHolder.getContext().getAuthentication();","53","","70","    \/\/ taken from BasicProcessingFilter.java","71","    protected boolean authenticationIsRequired(String username) {","72","        \/\/ Only reauthenticate if username doesn't match SecurityContextHolder and user isn't authenticated","73","        \/\/ (see SEC-53)","74","        Authentication existingAuth = SecurityContextHolder.getContext().getAuthentication();","75","","76","        if(existingAuth == null || !existingAuth.isAuthenticated()) {","77","            return true;","78","        }","79","","80","        \/\/ Limit username comparison to providers which use usernames (ie UsernamePasswordAuthenticationToken)","81","        \/\/ (see SEC-348)","82","","83","        if (existingAuth instanceof UsernamePasswordAuthenticationToken && !existingAuth.getName().equals(username)) {","84","            return true;","85","        }","86","","87","        \/\/ Handle unusual condition where an AnonymousAuthenticationToken is already present","88","        \/\/ This shouldn't happen very often, as BasicProcessingFitler is meant to be earlier in the filter","89","        \/\/ chain than AnonymousProcessingFilter. Nevertheless, presence of both an AnonymousAuthenticationToken","90","        \/\/ together with a BASIC authentication request header should indicate reauthentication using the","91","        \/\/ BASIC protocol is desirable. This behaviour is also consistent with that provided by form and digest,","92","        \/\/ both of which force re-authentication if the respective header is detected (and in doing so replace","93","        \/\/ any existing AnonymousAuthenticationToken). See SEC-610.","94","        if (existingAuth instanceof AnonymousAuthenticationToken) {","95","            return true;","96","        }","97","","98","        return false;","99","    }","100",""]}],"core\/src\/main\/java\/jenkins\/security\/BasicHeaderProcessor.java":[{"add":["3","import hudson.security.SecurityRealm;","9","import org.acegisecurity.providers.UsernamePasswordAuthenticationToken;","10","import org.acegisecurity.providers.anonymous.AnonymousAuthenticationToken;","71","                if (!authenticationIsRequired(username)) {","72","                    chain.doFilter(request, response);","73","                    return;","74","                }","75","","96","    \/**","97","     * If the request is already authenticated to the same user that the Authorization header claims,","98","     * for example through the HTTP session, then there's no need to re-authenticate the Authorization header,","99","     * so we skip that. This avoids stressing {@link SecurityRealm}.","100","     *","101","     * This method returns false if we can take this short-cut.","102","     *\/","103","    \/\/ taken from BasicProcessingFilter.java","104","    protected boolean authenticationIsRequired(String username) {","105","        \/\/ Only reauthenticate if username doesn't match SecurityContextHolder and user isn't authenticated","106","        \/\/ (see SEC-53)","107","        Authentication existingAuth = SecurityContextHolder.getContext().getAuthentication();","108","","109","        if(existingAuth == null || !existingAuth.isAuthenticated()) {","110","            return true;","111","        }","112","","113","        \/\/ Limit username comparison to providers which use usernames (ie UsernamePasswordAuthenticationToken)","114","        \/\/ (see SEC-348)","115","","116","        if (existingAuth instanceof UsernamePasswordAuthenticationToken && !existingAuth.getName().equals(username)) {","117","            return true;","118","        }","119","","120","        \/\/ Handle unusual condition where an AnonymousAuthenticationToken is already present","121","        \/\/ This shouldn't happen very often, as BasicProcessingFitler is meant to be earlier in the filter","122","        \/\/ chain than AnonymousProcessingFilter. Nevertheless, presence of both an AnonymousAuthenticationToken","123","        \/\/ together with a BASIC authentication request header should indicate reauthentication using the","124","        \/\/ BASIC protocol is desirable. This behaviour is also consistent with that provided by form and digest,","125","        \/\/ both of which force re-authentication if the respective header is detected (and in doing so replace","126","        \/\/ any existing AnonymousAuthenticationToken). See SEC-610.","127","        if (existingAuth instanceof AnonymousAuthenticationToken) {","128","            return true;","129","        }","130","","131","        return false;","132","    }","133",""],"delete":["5","import org.acegisecurity.AuthenticationManager;"]}]}},"e99c18356627d379602447c9ada6e6d26694f8f5":{"changes":{"core\/src\/main\/java\/hudson\/PluginManager.java":"MODIFY","test\/src\/test\/java\/hudson\/PluginManagerTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginManager.java":[{"add":["950","      try (ACLContext context = ACL.as(ACL.SYSTEM)) {","995","      }"],"delete":[]}],"test\/src\/test\/java\/hudson\/PluginManagerTest.java":[{"add":["459","        try (ACLContext context = ACL.as(User.getById(\"underprivileged\", true).impersonate())) {","464","","465","    @Test","466","    @Issue(\"JENKINS-59775\")","467","    public void requireSystemDuringStart() throws Exception {","468","        r.jenkins.setSecurityRealm(r.createDummySecurityRealm());","469","        r.jenkins.setAuthorizationStrategy(new MockAuthorizationStrategy());","470","        String pluginShortName = \"require-system-during-load\";","471","        dynamicLoad(pluginShortName + \".hpi\");","472","        try (ACLContext context = ACL.as(User.getById(\"underprivileged\", true).impersonate())) {","473","            r.jenkins.pluginManager.start(Collections.singletonList(r.jenkins.pluginManager.getPlugin(pluginShortName)));","474","        }","475","    }","476",""],"delete":["459","        try (ACLContext context = ACL.as(User.get(\"underprivileged\").impersonate())) {"]}]}},"55e23a3d936762fc9abae876139d4fa6150a2c82":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/scriptConsole.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/scriptConsole.jelly":[{"add":["28","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:t=\"\/lib\/hudson\" xmlns:f=\"\/lib\/form\">","33","      <h1><img src=\"${imagesURL}\/48x48\/${it.icon}\" width=\"48\" height=\"48\" alt=\"\"\/> ${%Script Console}<\/h1>"],"delete":["28","<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"\/lib\/layout\" xmlns:f=\"\/lib\/form\">","33","      <h1><img src=\"${imagesURL}\/48x48\/notepad.png\" width=\"48\" height=\"48\" alt=\"\"\/> ${%Script Console}<\/h1>"]}]}},"7a4ae612ba0a4f57604e97247d08d8f349953900":{"changes":{"core\/src\/main\/java\/jenkins\/management\/SystemLogLink.java":"MODIFY","core\/src\/main\/java\/jenkins\/management\/SystemInfoLink.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/management\/SystemLogLink.java":[{"add":["41","        return Messages.SystemLogLink_DisplayName();","46","        return Messages.SystemLogLink_Description();"],"delete":["41","        return Messages.CliLink_DisplayName();","46","        return Messages.CliLink_Description();"]}],"core\/src\/main\/java\/jenkins\/management\/SystemInfoLink.java":[{"add":["41","        return Messages.SystemInfoLink_DisplayName();","46","        return Messages.SystemInfoLink_Description();"],"delete":["41","        return Messages.CliLink_DisplayName();","46","        return Messages.CliLink_Description();"]}]}},"2eda7816e8007851ced3d618cd0fe42c78a486e2":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/MasterBuildConfiguration.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Messages.properties":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["696","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^\\-?(\\d+)$\/,\"Not an integer\"); },","697","    \"INPUT.non-negative-number\" : function(e) {","698","        registerRegexpValidator(e,\/^\\d+$\/,\"Not a non-negative number\");","699","    },","701","        registerRegexpValidator(e,\/^[1-9]\\d*$\/,\"Not a positive integer\");"],"delete":["696","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^(\\d+|)$\/,\"Not an integer\"); },","698","        registerRegexpValidator(e,\/^(\\d*[1-9]\\d*|)$\/,\"Not a positive integer\");"]}],"core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":[{"add":["5","    f.number(clazz:\"non-negative-number\", min:0, step:1)"],"delete":["5","    f.number(clazz:\"number\", min:0, step:1)"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":[{"add":["44","          <f:number clazz=\"non-negative-number\" min=\"0\" step=\"1\"\/>"],"delete":["44","          <f:number clazz=\"positive-number\" min=\"0\" step=\"1\"\/>"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["1474","        String nExecutors = req.getSubmittedForm().getString(\"numExecutors\");","1475","        if (Integer.parseInt(nExecutors)<=0) {","1476","            throw new FormException(Messages.Slave_InvalidConfig_Executors(nodeName), \"numExecutors\");","1477","        }","1478",""],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/MasterBuildConfiguration.java":[{"add":["53","            String num = json.getString(\"numExecutors\");","54","            if (!num.matches(\"\\\\d+\")) {","55","                throw new FormException(Messages.Hudson_Computer_IncorrectNumberOfExecutors(),\"numExecutors\");","56","            }","57","            "],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["292","import javax.annotation.Nonnegative;","2716","    \/**","2717","     * Sets a number of executors.","2718","     * @param n Number of executors","2719","     * @throws IOException Failed to save the configuration","2720","     * @throws IllegalArgumentException Negative value has been passed","2721","     *\/","2722","    public void setNumExecutors(@Nonnegative int n) throws IOException, IllegalArgumentException {","2723","        if (n < 0) {","2724","            throw new IllegalArgumentException(\"Incorrect field \\\"# of executors\\\": \" + n +\". It should be a non-negative number.\");","2725","        }"],"delete":["2715","    public void setNumExecutors(int n) throws IOException {"]}],"core\/src\/main\/resources\/jenkins\/model\/Messages.properties":[{"add":["28","Hudson.Computer.IncorrectNumberOfExecutors=Incorrect field \"# of executors\". It should be a non-negative number."],"delete":[]}]}},"eeeda9eea834966fb0e3ce81b161afd8a53d68e3":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/test\/java\/hudson\/UtilTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["809","            if(ch=='\"')","810","                buf.append(\"&quot;\");","811","            else","812","            if(ch=='\\'')","813","                buf.append(\"&#039;\");","814","            else"],"delete":[]}],"core\/src\/test\/java\/hudson\/UtilTest.java":[{"add":["172","","173","    public void TestEscape() {","174","        assertEquals(\"<br>\", Util.escape(\"\\n\"));","175","        assertEquals(\"&lt;a>\", Util.escape(\"<a>\"));","176","        assertEquals(\"&quot;&#039;\", Util.escape(\"'\\\"\"));","177","        assertEquals(\"&nbsp; \", Util.escape(\"  \"));","178","    }"],"delete":[]}]}},"e229f37dd921812e213e34913c94b632c6e54299":{"changes":{"core\/src\/main\/java\/hudson\/model\/ItemGroupMixIn.java":"MODIFY","core\/src\/test\/java\/hudson\/FilePathTest.java":"MODIFY","core\/src\/main\/java\/hudson\/FilePath.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ItemGroupMixIn.java":[{"add":["47","import java.nio.file.Files;","48","import java.nio.file.StandardCopyOption;","243","        Files.copy(Util.fileToPath(srcConfigFile.getFile()), Util.fileToPath(Items.getConfigFile(result).getFile()),","244","                StandardCopyOption.COPY_ATTRIBUTES, StandardCopyOption.REPLACE_EXISTING);"],"delete":["241","        Util.copyFile(srcConfigFile.getFile(), Items.getConfigFile(result).getFile());"]}],"core\/src\/test\/java\/hudson\/FilePathTest.java":[{"add":["45","import java.nio.file.attribute.FileTime;","46","import java.nio.file.attribute.PosixFilePermission;","49","import java.util.EnumSet;","57","import java.util.concurrent.TimeUnit;","851","","852","    @Issue(\"JENKINS-13128\")","853","    @Test public void copyRecursivePreservesPosixFilePermissions() throws Exception {","854","        assumeFalse(\"windows doesn't support posix file permissions\", Functions.isWindows());","855","        File src = temp.newFolder(\"src\");","856","        File dst = temp.newFolder(\"dst\");","857","        Path sourceFile = Files.createFile(src.toPath().resolve(\"test-file\"));","858","        Set<PosixFilePermission> allRWX = EnumSet.allOf(PosixFilePermission.class);","859","        Files.setPosixFilePermissions(sourceFile, allRWX);","860","        FilePath f = new FilePath(src);","861","        f.copyRecursiveTo(new FilePath(dst));","862","        Path destinationFile = dst.toPath().resolve(\"test-file\");","863","        assertTrue(\"file was not copied\", Files.exists(destinationFile));","864","        Set<PosixFilePermission> destinationPermissions = Files.getPosixFilePermissions(destinationFile);","865","        assertEquals(\"file permissions not copied\", allRWX, destinationPermissions);","866","    }","867","","868","    @Issue(\"JENKINS-13128\")","869","    @Test public void copyRecursivePreservesLastModifiedTime() throws Exception {","870","        File src = temp.newFolder(\"src\");","871","        File dst = temp.newFolder(\"dst\");","872","        Path sourceFile = Files.createFile(src.toPath().resolve(\"test-file\"));","873","        FileTime mtime = FileTime.from(42L, TimeUnit.SECONDS);","874","        Files.setLastModifiedTime(sourceFile, mtime);","875","        FilePath f = new FilePath(src);","876","        f.copyRecursiveTo(new FilePath(dst));","877","        Path destinationFile = dst.toPath().resolve(\"test-file\");","878","        assertTrue(\"file was not copied\", Files.exists(destinationFile));","879","        assertEquals(\"file mtime was not preserved\", mtime, Files.getLastModifiedTime(destinationFile));","880","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/FilePath.java":[{"add":["2285","                                Files.copy(fileToPath(f), fileToPath(writing(target)),","2286","                                        StandardCopyOption.COPY_ATTRIBUTES, StandardCopyOption.REPLACE_EXISTING);"],"delete":["2285","                                Util.copyFile(f, writing(target));"]}]}},"b831acd9854b525d680ca72fd218c848121b9d3f":{"changes":{"core\/src\/test\/java\/hudson\/model\/ViewTest.java":"MODIFY","\/dev\/null":"DELETE","core\/src\/main\/java\/hudson\/search\/UserSearchProperty.java":"MODIFY","test\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterCaseSensitiveSearchTest.java":"ADD","core\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterTest.java":"MODIFY","core\/src\/main\/java\/hudson\/search\/FixedSet.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/model\/ViewTest.java":[{"add":["15","import java.util.Collections;","101","        Mockito.when(rightView.getItems()).thenReturn(Collections.singletonList(rightJob));"],"delete":["100","        Mockito.when(rightView.getItems()).thenReturn(Arrays.asList(rightJob));"]}],"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/search\/UserSearchProperty.java":[{"add":["13","","14","    private static final boolean DEFAULT_SEARCH_CASE_INSENSITIVE_MODE = true;","15","","29","","30","        if (user == null) {","31","            return DEFAULT_SEARCH_CASE_INSENSITIVE_MODE;","33","","34","        return user.getProperty(UserSearchProperty.class).getInsensitiveSearch();","45","            return new UserSearchProperty(DEFAULT_SEARCH_CASE_INSENSITIVE_MODE);"],"delete":["13","    ","27","        boolean caseInsensitive = false;","28","        if(user!=null && user.getProperty(UserSearchProperty.class).getInsensitiveSearch()){\/\/Searching for anonymous user is case-sensitive","29","          caseInsensitive=true;","31","        return caseInsensitive;","42","            return new UserSearchProperty(false); \/\/default setting is case-sensitive searching"]}],"test\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterCaseSensitiveSearchTest.java":[{"add":[],"delete":[]}],"core\/src\/test\/java\/jenkins\/widgets\/HistoryPageFilterTest.java":[{"add":["40","import org.jvnet.hudson.test.Issue;","328","    @Issue(\"JENKINS-42645\")","329","    public void should_be_case_insensitive_by_default() throws IOException {","331","        assertOneMatchingBuildForGivenSearchStringAndRunItems(\"failure\", runs);","335","    public void should_lower_case_search_string_in_case_insensitive_search() throws IOException {","336","        List<ModelObject> runs = Lists.<ModelObject>newArrayList(new MockRun(2, Result.FAILURE), new MockRun(1, Result.SUCCESS));","337","        assertOneMatchingBuildForGivenSearchStringAndRunItems(\"FAILure\", runs);","338","    }","339","","340","    @Test","341","    @Issue(\"JENKINS-40718\")","342","    public void should_search_builds_by_build_variables() throws IOException {","350","    @Issue(\"JENKINS-40718\")","351","    public void should_search_builds_by_build_params() throws IOException {","359","    @Issue(\"JENKINS-40718\")","360","    public void should_ignore_sensitive_parameters_in_search_builds_by_build_params() throws IOException {"],"delete":["39","import org.junit.Ignore;","328","    public void test_search_should_be_case_sensitive_for_anonymous_user() throws IOException {","329","        \/\/given","330","        HistoryPageFilter<ModelObject> historyPageFilter = newPage(5, null, null);","331","        \/\/and","332","        historyPageFilter.setSearchString(\"failure\");","333","        \/\/and","335","        List<Queue.Item> queueItems = newQueueItems(3, 4);","336","","337","        \/\/when","338","        historyPageFilter.add(runs, queueItems);","339","","340","        \/\/then","341","        Assert.assertEquals(0, historyPageFilter.runs.size());","345","    public void test_search_builds_by_build_variables() throws IOException {","353","    public void test_search_builds_by_build_params() throws IOException {","361","    public void test_ignore_sensitive_parameters_in_search_builds_by_build_params() throws IOException {"]}],"core\/src\/main\/java\/hudson\/search\/FixedSet.java":[{"add":["29","import org.apache.commons.lang.StringUtils;","30","","37","","50","        for (SearchItem i : items) {","52","            if (name.equals(token) || (caseInsensitive && name.equalsIgnoreCase(token))) {","54","            }","60","        for (SearchItem i : items) {","62","            if (name.contains(token) || (caseInsensitive && StringUtils.containsIgnoreCase(name, token))) {","64","            }"],"delete":["47","        for (SearchItem i : items){","49","            if(caseInsensitive){","50","                token=token.toLowerCase();","51","                name=name.toLowerCase();","52","            }","53","            if(token.equals(i.getSearchName()))","60","        for (SearchItem i : items){","62","            if(caseInsensitive){","63","                token=token.toLowerCase();","64","                name=name.toLowerCase();","65","            }","66","            if(name.contains(token))"]}]}},"d4cb259440a3c0c59c5f31825741f3396f713739":{"changes":{"core\/src\/main\/resources\/hudson\/security\/GlobalMatrixAuthorizationStrategy\/help-user-group_de.html":"ADD"},"diff":{"core\/src\/main\/resources\/hudson\/security\/GlobalMatrixAuthorizationStrategy\/help-user-group_de.html":[{"add":[],"delete":[]}]}},"b4be12d314649880356077dc6f733997d999b4cd":{"changes":{"test\/src\/test\/java\/hudson\/model\/queue\/BuildKeepsRunningWhenFaultySubTasksTest.java":"ADD"},"diff":{"test\/src\/test\/java\/hudson\/model\/queue\/BuildKeepsRunningWhenFaultySubTasksTest.java":[{"add":[],"delete":[]}]}},"4e61aebe78461d594f5e832d3519168a837dc92d":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index.jelly":[{"add":["81","            <j:when test=\"${it.building}\">","83","            <\/j:when>","84","            <j:otherwise>","85","              Failed to determine (<a href=\"console\">log<\/a>)"],"delete":["81","            <j:otherwise>"]}]}},"b3c5c402e6be810d1de0d766246703c1667902ff":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["30","    <version>1.42<\/version>"],"delete":["30","    <version>1.41<\/version>","514","          <dependencies>","515","            <dependency>","516","              <groupId>org.kohsuke<\/groupId>","517","              <artifactId>doxia-module-markdown<\/artifactId>","518","              <version>1.0<\/version>","519","            <\/dependency>","520","          <\/dependencies>"]}]}},"bc9db0fd0a71f03484a9612149b5a4de2ff28cce":{"changes":{"core\/src\/main\/java\/hudson\/Functions.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["1004","            return Stapler.getCurrentRequest().getContextPath()+urlName;","1007","            return Stapler.getCurrentRequest().getContextPath()+'\/'+itUrl+urlName;","1076","        if (href.length() <= 1) return href.equals(\".\") && url.endsWith(\"\/\");","1079","        if (url.endsWith(\"\/\")) url = url.substring(0, url.length() - 1);","1080","        if (href.endsWith(\"\/\")) href = href.substring(0, href.length() - 1);","1082","        return url.endsWith(href));"],"delete":["1004","            return Stapler.getCurrentRequest().getContextPath()+urlName+'\/';","1007","            return Stapler.getCurrentRequest().getContextPath()+'\/'+itUrl+urlName+'\/';","1079","        return (href.length()>1 && url.endsWith(href))","1080","            || (href.equals(\".\") && url.endsWith(\".\"));"]}]}},"842c19baa26199c277cc5e53af8788149ade3e79":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["70","    Just like SSH connector, managed Windows connector now allows the machine name to be specified.","71","    (<a href=\"https:\/\/github.com\/jenkinsci\/jenkins\/pull\/172\">pull request #172<\/a>)","72","  <li class=rfe>","87","  <li class=rfe>","88","    Managed Windows slave launcher now lets you define a host name separately from the slave name.","89","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10099\">issue 10099<\/a>)"],"delete":[]}]}},"b531378d4616e26b5c22d74ac21eaed4fe45f506":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["58","    Maven3 with multiple threads does not work in Jenkins.","59","    Fix support of -Tx maven 3 option.","60","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-9183\">issue 9183<\/a>)","61","  <li class=bug>"],"delete":[]}]}},"6a3e60ef71900704e552a295a802c2caf29a871c":{"changes":{"core\/src\/main\/java\/hudson\/scm\/SCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/scm\/SCM.java":[{"add":["56","import java.util.logging.Level;","57","import java.util.logging.Logger;","90","    private static final Logger LOGGER = Logger.getLogger(SCM.class.getName());","91","","149","            try {","150","                return guessBrowser();","151","            } catch (RuntimeException x) {","152","                LOGGER.log(Level.WARNING, null, x);","153","                return null;","154","            }"],"delete":["145","            return guessBrowser();"]}]}},"ceee7976749f65a0b3308805de5a2b3c55b8853d":{"changes":{"core\/src\/main\/java\/hudson\/lifecycle\/UnixEmbeddedContainerLifecycle.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/lifecycle\/UnixEmbeddedContainerLifecycle.java":[{"add":["52","        } catch (LinkageError e) {","53","            \/\/ see HUDSON-3875"],"delete":[]}]}},"6c4e65f576ea6fa43b06e6d677f40410a87fefc1":{"changes":{"changelog.html":"MODIFY","core\/src\/main\/resources\/hudson\/model\/View\/ajaxBuildQueue.jelly":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=\"major bug\">","58","    Build queue displayed as empty even when it is not. (Regression in 1.483.)","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15335\">issue 15335<\/a>)"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/View\/ajaxBuildQueue.jelly":[{"add":["30","    <t:queue items=\"${it.approximateQueueItemsQuickly}\" \/>"],"delete":["30","    <t:queue items=\"${it.approximateItemsQuickly}\" \/>"]}]}},"62a5dddb3c2b00c4602a504ffefd65320cf81915":{"changes":{"pom.xml":"MODIFY"},"diff":{"pom.xml":[{"add":["182","        <version>2.62.2<\/version>"],"delete":["182","        <version>2.62<\/version>"]}]}},"1d7bd482637df88539afbcd3bc4d14e07d60a3e6":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AllView\/noJob.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AllView\/noJob.jelly":[{"add":["30","    <j:whitespace> <\/j:whitespace>"],"delete":[]}]}},"d8b29df3558724090efaf18326937075c25ba7f3":{"changes":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages_ja.properties":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ViewTest.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/Messages.properties":[{"add":["346","","347","Jenkins.NotAllowedName=\"{0}\" is not allowed name"],"delete":[]}],"changelog.html":[{"add":["78","  <li class=bug>","79","    View name should not allow \"..\".    ","80","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16608\">issue 16608<\/a>)"],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Messages_ja.properties":[{"add":["335","Jenkins.NotAllowedName=\"{0}\" \\u306f\\u8a31\\u53ef\\u3055\\u308c\\u306a\\u3044\\u540d\\u524d\\u3067\\u3059\\u3002"],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["2924","        if(\"..\".equals(name.trim())) ","2925","            throw new Failure(Messages.Jenkins_NotAllowedName(\"..\"));"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/ViewTest.java":[{"add":["37","import static junit.framework.TestCase.assertEquals;","38","import static junit.framework.TestCase.assertNotNull;","39","import static junit.framework.TestCase.fail;","51","    \/**","69","            assertEquals(400, e.getStatusCode());","106","    public void testDeleteView() throws Exception {","107","        WebClient wc = new WebClient();","108","","109","        ListView v = new ListView(\"list\", jenkins);","110","        jenkins.addView(v);","111","        HtmlPage delete = wc.getPage(v, \"delete\");","112","        submit(delete.getFormByName(\"delete\"));","113","        assertNull(jenkins.getView(\"list\"));","114","","115","        User user = User.get(\"user\", true);","116","        MyViewsProperty p = user.getProperty(MyViewsProperty.class);","117","        v = new ListView(\"list\", p);","118","        p.addView(v);","119","        delete = wc.getPage(v, \"delete\");","120","        submit(delete.getFormByName(\"delete\"));","121","        assertNull(p.getView(\"list\"));","122","","142","","143","    @Bug(16608)","144","    public void testNotAlloedName() throws Exception {","145","        HtmlForm form = new WebClient().goTo(\"newView\").getFormByName(\"createItem\");","146","        form.getInputByName(\"name\").setValueAttribute(\"..\");","147","        form.getRadioButtonsByName(\"mode\").get(0).setChecked(true);","148","","149","        try {","150","            submit(form);","151","            fail(\"\\\"..\\\" should not be allowed.\");","152","        } catch (FailingHttpStatusCodeException e) {","153","            assertEquals(400, e.getStatusCode());","154","        }","155","    }"],"delete":["48","\t\/**","66","            assertEquals(400,e.getStatusCode());","102","    ","103","    public void testDeleteView() throws Exception {","104","    \tWebClient wc = new WebClient();","106","    \tListView v = new ListView(\"list\", jenkins);","107","\t\tjenkins.addView(v);","108","    \tHtmlPage delete = wc.getPage(v, \"delete\");","109","    \tsubmit(delete.getFormByName(\"delete\"));","110","    \tassertNull(jenkins.getView(\"list\"));","111","    \t","112","    \tUser user = User.get(\"user\", true);","113","    \tMyViewsProperty p = user.getProperty(MyViewsProperty.class);","114","    \tv = new ListView(\"list\", p);","115","\t\tp.addView(v);","116","    \tdelete = wc.getPage(v, \"delete\");","117","    \tsubmit(delete.getFormByName(\"delete\"));","118","    \tassertNull(p.getView(\"list\"));","119","    \t"]}]}},"de0cd39fa6ee5be82d7e0fd3eac1eb78a2c4914d":{"changes":{"core\/src\/main\/java\/hudson\/PluginWrapper.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/PluginWrapper.java":[{"add":["176","    public PluginWrapper(PluginManager parent, File archive, Manifest manifest, URL baseResourceURL, ","189","    }","203","        \/\/ In case plugin has dependencies but is missing its own index.jelly,","204","        \/\/ check that result has this plugin's artifactId in it:","205","        return idx != null && idx.toString().contains(shortName) ? idx : null;"],"delete":["176","\tpublic PluginWrapper(PluginManager parent, File archive, Manifest manifest, URL baseResourceURL, ","189","\t}","203","        return idx;"]}]}},"a78f9461efde4c0ed0c12fbf88b54bf5188fc9f8":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/ComputerListener.java":"MODIFY","test\/src\/test\/java\/hudson\/slaves\/SlaveComputerTest.java":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","test\/src\/test\/java\/jenkins\/model\/JenkinsTest.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/ComputerListener.java":[{"add":["141","     * Any thrown {@link Exception}s will be recorded to the listener.","142","     * No {@link Exception} will put the computer offline, however","143","     * any {@link Error} will put the computer offline","144","     * since they indicate unrecoverable conditions.","145","     *"],"delete":[]}],"test\/src\/test\/java\/hudson\/slaves\/SlaveComputerTest.java":[{"add":["29","import java.io.IOError;","30","import java.io.IOException;","31","import java.util.logging.Level;","38","import org.jvnet.hudson.test.Issue;","41","import org.jvnet.hudson.test.TestExtension;","83","    @Test","84","    @Issue(\"JENKINS-57111\")","85","    public void startupShouldNotFailOnExceptionOnlineListener() throws Exception {","86","        DumbSlave nodeA = j.createOnlineSlave();","87","        Assert.assertTrue(nodeA.getComputer() instanceof SlaveComputer);","88","","89","        int retries = 10;","90","        while (IOExceptionOnOnlineListener.onOnlineCount == 0 && retries > 0) {","91","            retries--;","92","            Thread.sleep(500);","93","        }","94","        Assert.assertTrue(retries > 0);","95","        Thread.sleep(500);","96","","97","        Assert.assertFalse(nodeA.getComputer().isOffline());","98","        Assert.assertTrue(nodeA.getComputer().isOnline());","99","","100","        \/\/ Both listeners should fire and not cause the other not to fire.","101","        Assert.assertEquals(1, IOExceptionOnOnlineListener.onOnlineCount);","102","        Assert.assertEquals(1, RuntimeExceptionOnOnlineListener.onOnlineCount);","103","    }","104","","105","    @TestExtension(value = \"startupShouldNotFailOnExceptionOnlineListener\")","106","    public static final class IOExceptionOnOnlineListener extends ComputerListener {","107","","108","        static int onOnlineCount = 0;","109","","110","        @Override","111","        public void onOnline(Computer c, TaskListener listener) throws IOException, InterruptedException {","112","            if (c instanceof SlaveComputer) {","113","                onOnlineCount++;","114","                throw new IOException(\"Something happened (the listener always throws this exception)\");","115","            }","116","        }","117","    }","118","","119","    @TestExtension(value = \"startupShouldNotFailOnExceptionOnlineListener\")","120","    public static final class RuntimeExceptionOnOnlineListener extends ComputerListener {","121","","122","        static int onOnlineCount = 0;","123","","124","        @Override","125","        public void onOnline(Computer c, TaskListener listener) throws IOException, InterruptedException {","126","            if (c instanceof SlaveComputer) {","127","                onOnlineCount++;","128","                throw new RuntimeException(\"Something happened (the listener always throws this exception)\");","129","            }","130","        }","131","    }","132","","133","    @Test","134","    @Issue(\"JENKINS-57111\")","135","","136","    public void startupShouldFailOnErrorOnlineListener() throws Exception {","137","        DumbSlave nodeA = j.createSlave();","138","        Assert.assertTrue(nodeA.getComputer() instanceof SlaveComputer);","139","        int retries = 10;","140","        while (ErrorOnOnlineListener.onOnlineCount == 0 && retries > 0) {","141","            retries--;","142","            Thread.sleep(500);","143","        }","144","        Assert.assertTrue(retries > 0);","145","        Thread.sleep(500);","146","","147","        Assert.assertEquals(1, ErrorOnOnlineListener.onOnlineCount);","148","","149","        Assert.assertTrue(nodeA.getComputer().isOffline());","150","        Assert.assertFalse(nodeA.getComputer().isOnline());","151","    }","152","","153","    @TestExtension(value = \"startupShouldFailOnErrorOnlineListener\")","154","    public static final class ErrorOnOnlineListener extends ComputerListener {","155","","156","        static int onOnlineCount = 0;","157","","158","        @Override","159","        public void onOnline(Computer c, TaskListener listener) throws IOException, InterruptedException {","160","            if (c instanceof SlaveComputer) {","161","                onOnlineCount++;","162","                throw new IOError(new Exception(\"Something happened (the listener always throws this exception)\"));","163","            }","164","        }","165","    }","166","","167",""],"delete":["39","import java.io.IOException;"]}],"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["696","                try {","697","                    cl.onOnline(this,taskListener);","698","                } catch (Exception e) {","699","                    \/\/ Per Javadoc log exceptions but still go online.","700","                    \/\/ NOTE: this does not include Errors, which indicate a fatal problem","701","                    taskListener.getLogger().format(","702","                        \"onOnline: %s reported an exception: %s%n\",","703","                        cl.getClass(),","704","                        e.toString());","705","                } catch (Throwable e) {","706","                    closeChannel();","707","                    throw e;","708","                }"],"delete":["696","                cl.onOnline(this,taskListener);"]}],"test\/src\/test\/java\/jenkins\/model\/JenkinsTest.java":[{"add":["83","import java.io.IOError;","475","    public void startupShouldNotFailOnIOExceptionOnlineListener() {","476","        \/\/ We do nothing, IOExceptionOnOnlineListener & JenkinsRule should cause the","478","","479","        assertEquals(1, IOExceptionOnOnlineListener.onOnlineCount);","482","    @TestExtension(value = \"startupShouldNotFailOnIOExceptionOnlineListener\")","483","    public static final class IOExceptionOnOnlineListener extends ComputerListener {","484","","485","        static int onOnlineCount = 0;","486","","489","            onOnlineCount++;","493","","494","    @Test","495","    @Issue(\"JENKINS-57111\")","496","    public void startupShouldNotFailOnRuntimeExceptionOnlineListener() {","497","        \/\/ We do nothing, RuntimeExceptionOnOnlineListener & JenkinsRule should cause the","498","        \/\/ boot failure if the issue is not fixed.","499","        assertEquals(1, RuntimeExceptionOnOnlineListener.onOnlineCount);","500","    }","501","","502","    @TestExtension(value = \"startupShouldNotFailOnRuntimeExceptionOnlineListener\")","503","    public static final class RuntimeExceptionOnOnlineListener extends ComputerListener {","504","","505","        static int onOnlineCount = 0;","506","","507","        @Override","508","        public void onOnline(Computer c, TaskListener listener) throws IOException, InterruptedException {","509","            onOnlineCount++;","510","            throw new RuntimeException(\"Something happened (the listener always throws this exception)\");","511","        }","512","    }","513",""],"delete":["474","    public void startupShouldNotFailOnFailingOnlineListener() {","475","        \/\/ We do nothing, FailingOnOnlineListener & JenkinsRule should cause the ","479","    @TestExtension(value = \"startupShouldNotFailOnFailingOnlineListener\")","480","    public static final class FailingOnOnlineListener extends ComputerListener {","481","        ","487","    "]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["981","                        } catch (Exception e) {","982","                            \/\/ Per Javadoc log exceptions but still go online.","983","                            \/\/ NOTE: this does not include Errors, which indicate a fatal problem","984","                            LOGGER.log(WARNING, String.format(\"Exception in onOnline() for the computer listener %s on the Jenkins master node\",","985","                                    cl.getClass()), e);"],"delete":["981","                        } catch (Throwable t) {","982","                            if (t instanceof Error) {","983","                                \/\/ We propagate Runtime errors, because they are fatal.","984","                                throw t;","985","                            }","986","","987","                            \/\/ Other exceptions should be logged instead of failing the Jenkins startup (See listener's Javadoc)","988","                            \/\/ We also throw it for InterruptedException since it's what is expected according to the javadoc","989","                            LOGGER.log(SEVERE, String.format(\"Invocation of the computer listener %s failed for the Jenkins master node\",","990","                                    cl.getClass()), t);"]}]}},"e3d84a386d8f2188f7b396d61d8a84a6c2b0d0bd":{"changes":{"war\/src\/main\/webapp\/scripts\/prototype.js":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/prototype.js":[{"add":["0","\/*  Prototype JavaScript framework, version 1.7","10","  Version: '1.7',","51","  ScriptFragment: '<script[^>]*>([\\\\S\\\\s]*?)<\\\/script>',","61","","62","","63","var Abstract = { };","64","","65","","66","var Try = {","67","  these: function() {","68","    var returnValue;","69","","70","    for (var i = 0, length = arguments.length; i < length; i++) {","71","      var lambda = arguments[i];","72","      try {","73","        returnValue = lambda();","74","        break;","75","      } catch (e) { }","76","    }","77","","78","    return returnValue;","79","  }","80","};","81","","143","        value.valueOf = method.valueOf.bind(method);","144","        value.toString = method.toString.bind(method);","215","    var value = holder[key],","216","        type = typeof value;","217","","237","    type = typeof value;","246","          if (stack[i] === value) { throw new TypeError(); }","288","      if (object.hasOwnProperty(property)) {","409","    if (arguments.length < 2 && Object.isUndefined(arguments[0])) return this;","411","    return function() {","413","      return __method.apply(context, a);","414","    }","464","  return {","466","    bind:                bind,","473","  }","574","    if (!(pattern.length || pattern.source)) {","580","      if (match = source.match(pattern)) {","618","    return this.replace(\/<\\w+(\\s+(\"[^\"]*\"|'[^']*'|[^>])+)?>|<\\\/\\w+>\/gi, '');","634","    return this.extractScripts().map(function(script) { return eval(script) });","655","        if (value != undefined) value = decodeURIComponent(value);","732","        cx = \/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]\/g;","753","  function startsWith(pattern) {","754","    return this.lastIndexOf(pattern, 0) === 0;","757","  function endsWith(pattern) {","758","    var d = this.length - pattern.length;","801","    startsWith:     startsWith,","802","    endsWith:       endsWith,","849","    var index = 0;","851","      this._each(function(value) {","852","        iterator.call(context, value, index++);","853","      });","872","      result = result && !!iterator.call(context, value, index);","874","    });","882","      if (result = !!iterator.call(context, value, index))","884","    });","892","      results.push(iterator.call(context, value, index));","893","    });","900","      if (iterator.call(context, value, index)) {","904","    });","911","      if (iterator.call(context, value, index))","913","    });","926","        results.push(iterator.call(context, value, index));","927","    });","932","    if (Object.isFunction(this.indexOf))","933","      if (this.indexOf(object) != -1) return true;","955","      memo = iterator.call(context, memo, value, index);","956","    });","971","      value = iterator.call(context, value, index);","974","    });","982","      value = iterator.call(context, value, index);","985","    });","993","      (iterator.call(context, value, index) ?","995","    });","1010","      if (!iterator.call(context, value, index))","1012","    });","1020","        criteria: iterator.call(context, value, index)","1022","    }).sort(function(left, right) {","1172","      return array.detect(function(value) { return item === value });","1199","    i || (i = 0);","1200","    var length = this.length;","1201","    if (i < 0) i = length + i;","1202","    for (; i < length; i++)","1203","      if (this[i] === item) return i;","1208","    i = isNaN(i) ? this.length : (i < 0 ? this.length + i : i) + 1;","1209","    var n = this.slice(0, i).reverse().indexOf(item);","1210","    return (n < 0) ? n : i - n - 1;","1213","  function concat() {","1214","    var array = slice.call(this, 0), item;","1215","    for (var i = 0, length = arguments.length; i < length; i++) {","1216","      item = arguments[i];","1218","        for (var j = 0, arrayLength = item.length; j < arrayLength; j++)","1219","          array.push(item[j]);","1221","        array.push(item);","1252","  })(1,2)","1269","  function _each(iterator) {","1274","      iterator(pair);","1327","    return key + '=' + encodeURIComponent(String.interpret(value));","1446","  function _each(iterator) {","1447","    var value = this.start;","1448","    while (this.include(value)) {","1449","      iterator(value);","1486","  _each: function(iterator) {","1487","    this.responders._each(iterator);","1633","      this.transport.setRequestHeader(name, headers[name]);","1770","    json = decodeURIComponent(escape(json));","1872","function $(element) {","1873","  if (arguments.length > 1) {","1874","    for (var i = 0, elements = [], length = arguments.length; i < length; i++)","1875","      elements.push($(arguments[i]));","1876","    return elements;","1878","  if (Object.isString(element))","1879","    element = document.getElementById(element);","1880","  return Element.extend(element);","1881","}","1883","if (Prototype.BrowserFeatures.XPath) {","1884","  document._getElementsByXPath = function(expression, parentElement) {","1885","    var results = [];","1886","    var query = document.evaluate(expression, $(parentElement) || document,","1887","      null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);","1888","    for (var i = 0, length = query.snapshotLength; i < length; i++)","1889","      results.push(Element.extend(query.snapshotItem(i)));","1890","    return results;","1891","  };","1892","}","1893","","1894","\/*--------------------------------------------------------------------------*\/","1895","","1896","if (!Node) var Node = { };","1897","","1898","if (!Node.ELEMENT_NODE) {","1899","  Object.extend(Node, {","1900","    ELEMENT_NODE: 1,","1901","    ATTRIBUTE_NODE: 2,","1902","    TEXT_NODE: 3,","1903","    CDATA_SECTION_NODE: 4,","1904","    ENTITY_REFERENCE_NODE: 5,","1905","    ENTITY_NODE: 6,","1906","    PROCESSING_INSTRUCTION_NODE: 7,","1907","    COMMENT_NODE: 8,","1908","    DOCUMENT_NODE: 9,","1909","    DOCUMENT_TYPE_NODE: 10,","1910","    DOCUMENT_FRAGMENT_NODE: 11,","1911","    NOTATION_NODE: 12","1912","  });","1913","}","1917","(function(global) {","1918","  function shouldUseCache(tagName, attributes) {","1928","  var element = global.Element;","1930","  global.Element = function(tagName, attributes) {","1931","    attributes = attributes || { };","1933","    var cache = Element.cache;","1941","    if (!cache[tagName]) cache[tagName] = Element.extend(document.createElement(tagName));","1943","    var node = shouldUseCache(tagName, attributes) ?","1944","     cache[tagName].cloneNode(false) : document.createElement(tagName);","1947","  };","1948","","1949","  Object.extend(global.Element, element || { });","1950","  if (element) global.Element.prototype = element.prototype;","1951","","1952","})(this);","1953","","1954","Element.idCounter = 1;","1955","Element.cache = { };","1956","","1957","Element._purgeElement = function(element) {","1958","  var uid = element._prototypeUID;","1959","  if (uid) {","1960","    Element.stopObserving(element);","1961","    element._prototypeUID = void 0;","1962","    delete Element.Storage[uid];","1964","}","1966","Element.Methods = {","1967","  visible: function(element) {","1968","    return $(element).style.display != 'none';","1969","  },","1971","  toggle: function(element) {","1973","    Element[Element.visible(element) ? 'hide' : 'show'](element);","1975","  },","1977","  hide: function(element) {","1981","  },","1983","  show: function(element) {","1987","  },","1989","  remove: function(element) {","1993","  },","1995","  update: (function(){","1997","    var SELECT_ELEMENT_INNERHTML_BUGGY = (function(){","1998","      var el = document.createElement(\"select\"),","1999","          isBuggy = true;","2000","      el.innerHTML = \"<option value=\\\"test\\\">test<\/option>\";","2001","      if (el.options && el.options[0]) {","2002","        isBuggy = el.options[0].nodeName.toUpperCase() !== \"OPTION\";","2006","    })();","2008","    var TABLE_ELEMENT_INNERHTML_BUGGY = (function(){","2009","      try {","2010","        var el = document.createElement(\"table\");","2011","        if (el && el.tBodies) {","2012","          el.innerHTML = \"<tbody><tr><td>test<\/td><\/tr><\/tbody>\";","2013","          var isBuggy = typeof el.tBodies[0] == \"undefined\";","2014","          el = null;","2015","          return isBuggy;","2016","        }","2017","      } catch (e) {","2018","        return true;","2019","      }","2020","    })();","2022","    var LINK_ELEMENT_INNERHTML_BUGGY = (function() {","2023","      try {","2024","        var el = document.createElement('div');","2025","        el.innerHTML = \"<link>\";","2026","        var isBuggy = (el.childNodes.length === 0);","2027","        el = null;","2028","        return isBuggy;","2029","      } catch(e) {","2030","        return true;","2031","      }","2032","    })();","2034","    var ANY_INNERHTML_BUGGY = SELECT_ELEMENT_INNERHTML_BUGGY ||","2035","     TABLE_ELEMENT_INNERHTML_BUGGY || LINK_ELEMENT_INNERHTML_BUGGY;","2037","    var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING = (function () {","2038","      var s = document.createElement(\"script\"),","2039","          isBuggy = false;","2040","      try {","2041","        s.appendChild(document.createTextNode(\"\"));","2042","        isBuggy = !s.firstChild ||","2043","          s.firstChild && s.firstChild.nodeType !== 3;","2044","      } catch (e) {","2045","        isBuggy = true;","2046","      }","2047","      s = null;","2048","      return isBuggy;","2049","    })();","2052","    function update(element, content) {","2053","      element = $(element);","2054","      var purgeElement = Element._purgeElement;","2056","      var descendants = element.getElementsByTagName('*'),","2057","       i = descendants.length;","2058","      while (i--) purgeElement(descendants[i]);","2059","","2060","      if (content && content.toElement)","2061","        content = content.toElement();","2062","","2063","      if (Object.isElement(content))","2064","        return element.update().insert(content);","2065","","2066","      content = Object.toHTML(content);","2067","","2068","      var tagName = element.tagName.toUpperCase();","2069","","2070","      if (tagName === 'SCRIPT' && SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING) {","2071","        element.text = content;","2072","        return element;","2073","      }","2074","","2075","      if (ANY_INNERHTML_BUGGY) {","2076","        if (tagName in Element._insertionTranslations.tags) {","2077","          while (element.firstChild) {","2078","            element.removeChild(element.firstChild);","2079","          }","2080","          Element._getContentFromAnonymousElement(tagName, content.stripScripts())","2081","            .each(function(node) {","2082","              element.appendChild(node)","2083","            });","2084","        } else if (LINK_ELEMENT_INNERHTML_BUGGY && Object.isString(content) && content.indexOf('<link') > -1) {","2085","          while (element.firstChild) {","2086","            element.removeChild(element.firstChild);","2087","          }","2088","          var nodes = Element._getContentFromAnonymousElement(tagName, content.stripScripts(), true);","2089","          nodes.each(function(node) { element.appendChild(node) });","2090","        }","2091","        else {","2092","          element.innerHTML = content.stripScripts();","2093","        }","2094","      }","2095","      else {","2096","        element.innerHTML = content.stripScripts();","2097","      }","2098","","2099","      content.evalScripts.bind(content).defer();","2103","    return update;","2104","  })(),","2106","  replace: function(element, content) {","2108","    if (content && content.toElement) content = content.toElement();","2109","    else if (!Object.isElement(content)) {","2118","  },","2120","  insert: function(element, insertions) {","2123","    if (Object.isString(insertions) || Object.isNumber(insertions) ||","2124","        Object.isElement(insertions) || (insertions && (insertions.toElement || insertions.toHTML)))","2125","          insertions = {bottom:insertions};","2127","    var content, insert, tagName, childNodes;","2128","","2129","    for (var position in insertions) {","2130","      content  = insertions[position];","2131","      position = position.toLowerCase();","2132","      insert = Element._insertionTranslations[position];","2133","","2134","      if (content && content.toElement) content = content.toElement();","2135","      if (Object.isElement(content)) {","2136","        insert(element, content);","2137","        continue;","2138","      }","2139","","2140","      content = Object.toHTML(content);","2141","","2142","      tagName = ((position == 'before' || position == 'after')","2143","        ? element.parentNode : element).tagName.toUpperCase();","2144","","2145","      childNodes = Element._getContentFromAnonymousElement(tagName, content.stripScripts());","2146","","2147","      if (position == 'top' || position == 'after') childNodes.reverse();","2148","      childNodes.each(insert.curry(element));","2149","","2150","      content.evalScripts.bind(content).defer();","2151","    }","2154","  },","2156","  wrap: function(element, wrapper, attributes) {","2158","    if (Object.isElement(wrapper))","2159","      $(wrapper).writeAttribute(attributes || { });","2160","    else if (Object.isString(wrapper)) wrapper = new Element(wrapper, attributes);","2161","    else wrapper = new Element('div', wrapper);","2166","  },","2168","  inspect: function(element) {","2170","    var result = '<' + element.tagName.toLowerCase();","2171","    $H({'id': 'id', 'className': 'class'}).each(function(pair) {","2172","      var property = pair.first(),","2173","          attribute = pair.last(),","2174","          value = (element[property] || '').toString();","2175","      if (value) result += ' ' + attribute + '=' + value.inspect(true);","2176","    });","2177","    return result + '>';","2178","  },","2180","  recursivelyCollect: function(element, property, maximumLength) {","2186","      if (element.nodeType == 1)","2188","      if (elements.length == maximumLength)","2189","        break;","2193","  },","2195","  ancestors: function(element) {","2196","    return Element.recursivelyCollect(element, 'parentNode');","2197","  },","2199","  descendants: function(element) {","2200","    return Element.select(element, \"*\");","2201","  },","2203","  firstDescendant: function(element) {","2205","    while (element && element.nodeType != 1) element = element.nextSibling;","2207","  },","2209","  immediateDescendants: function(element) {","2212","      if (child.nodeType === 1) {","2214","      }","2218","  },","2220","  previousSiblings: function(element, maximumLength) {","2221","    return Element.recursivelyCollect(element, 'previousSibling');","2222","  },","2224","  nextSiblings: function(element) {","2225","    return Element.recursivelyCollect(element, 'nextSibling');","2226","  },","2228","  siblings: function(element) {","2230","    return Element.previousSiblings(element).reverse()","2231","      .concat(Element.nextSiblings(element));","2232","  },","2234","  match: function(element, selector) {","2239","  },","2241","  up: function(element, expression, index) {","2243","    if (arguments.length == 1) return $(element.parentNode);","2244","    var ancestors = Element.ancestors(element);","2245","    return Object.isNumber(expression) ? ancestors[expression] :","2246","      Prototype.Selector.find(ancestors, expression, index);","2247","  },","2249","  down: function(element, expression, index) {","2251","    if (arguments.length == 1) return Element.firstDescendant(element);","2252","    return Object.isNumber(expression) ? Element.descendants(element)[expression] :","2253","      Element.select(element, expression)[index || 0];","2254","  },","2255","","2256","  previous: function(element, expression, index) {","2257","    element = $(element);","2258","    if (Object.isNumber(expression)) index = expression, expression = false;","2259","    if (!Object.isNumber(index)) index = 0;","2260","","2261","    if (expression) {","2262","      return Prototype.Selector.find(element.previousSiblings(), expression, index);","2263","    } else {","2264","      return element.recursivelyCollect(\"previousSibling\", index + 1)[index];","2265","    }","2266","  },","2267","","2268","  next: function(element, expression, index) {","2269","    element = $(element);","2270","    if (Object.isNumber(expression)) index = expression, expression = false;","2271","    if (!Object.isNumber(index)) index = 0;","2272","","2273","    if (expression) {","2274","      return Prototype.Selector.find(element.nextSiblings(), expression, index);","2275","    } else {","2276","      var maximumLength = Object.isNumber(index) ? index + 1 : 1;","2277","      return element.recursivelyCollect(\"nextSibling\", index + 1)[index];","2278","    }","2279","  },","2280","","2281","","2282","  select: function(element) {","2283","    element = $(element);","2284","    var expressions = Array.prototype.slice.call(arguments, 1).join(', ');","2286","  },","2288","  adjacent: function(element) {","2290","    var expressions = Array.prototype.slice.call(arguments, 1).join(', ');","2291","    return Prototype.Selector.select(expressions, element.parentNode).without(element);","2292","  },","2294","  identify: function(element) {","2298","    do { id = 'anonymous_element_' + Element.idCounter++ } while ($(id));","2301","  },","2303","  readAttribute: function(element, name) {","2305","    if (Prototype.Browser.IE) {","2306","      var t = Element._attributeTranslations.read;","2307","      if (t.values[name]) return t.values[name](element, name);","2308","      if (t.names[name]) name = t.names[name];","2309","      if (name.include(':')) {","2310","        return (!element.attributes || !element.attributes[name]) ? null :","2311","         element.attributes[name].value;","2312","      }","2315","  },","2317","  writeAttribute: function(element, name, value) {","2319","    var attributes = { }, t = Element._attributeTranslations.write;","2321","    if (typeof name == 'object') attributes = name;","2322","    else attributes[name] = Object.isUndefined(value) ? true : value;","2325","      name = t.names[attr] || attr;","2327","      if (t.values[attr]) name = t.values[attr](element, value);","2335","  },","2337","  getHeight: function(element) {","2338","    return Element.getDimensions(element).height;","2339","  },","2341","  getWidth: function(element) {","2342","    return Element.getDimensions(element).width;","2343","  },","2345","  classNames: function(element) {","2347","  },","2349","  hasClassName: function(element, className) {","2352","    return (elementClassName && elementClassName.length > 0 && (elementClassName == className ||","2353","      new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(elementClassName)));","2354","  },","2356","  addClassName: function(element, className) {","2358","    if (!Element.hasClassName(element, className))","2361","  },","2363","  removeClassName: function(element, className) {","2366","      new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), ' ').strip();","2367","    return element;","2368","  },","2369","","2370","  toggleClassName: function(element, className) {","2371","    if (!(element = $(element))) return;","2372","    return Element[Element.hasClassName(element, className) ?","2373","      'removeClassName' : 'addClassName'](element, className);","2374","  },","2375","","2376","  cleanWhitespace: function(element) {","2377","    element = $(element);","2378","    var node = element.firstChild;","2379","    while (node) {","2380","      var nextNode = node.nextSibling;","2381","      if (node.nodeType == 3 && !\/\\S\/.test(node.nodeValue))","2382","        element.removeChild(node);","2383","      node = nextNode;","2384","    }","2385","    return element;","2386","  },","2387","","2388","  empty: function(element) {","2389","    return $(element).innerHTML.blank();","2390","  },","2391","","2392","  descendantOf: function(element, ancestor) {","2393","    element = $(element), ancestor = $(ancestor);","2394","","2395","    if (element.compareDocumentPosition)","2396","      return (element.compareDocumentPosition(ancestor) & 8) === 8;","2397","","2398","    if (ancestor.contains)","2399","      return ancestor.contains(element) && ancestor !== element;","2400","","2401","    while (element = element.parentNode)","2402","      if (element == ancestor) return true;","2403","","2404","    return false;","2405","  },","2406","","2407","  scrollTo: function(element) {","2408","    element = $(element);","2409","    var pos = Element.cumulativeOffset(element);","2410","    window.scrollTo(pos[0], pos[1]);","2411","    return element;","2412","  },","2413","","2414","  getStyle: function(element, style) {","2415","    element = $(element);","2416","    style = style == 'float' ? 'cssFloat' : style.camelize();","2417","    var value = element.style[style];","2418","    if (!value || value == 'auto') {","2419","      var css = document.defaultView.getComputedStyle(element, null);","2420","      value = css ? css[style] : null;","2421","    }","2422","    if (style == 'opacity') return value ? parseFloat(value) : 1.0;","2423","    return value == 'auto' ? null : value;","2424","  },","2425","","2426","  getOpacity: function(element) {","2427","    return $(element).getStyle('opacity');","2428","  },","2429","","2430","  setStyle: function(element, styles) {","2431","    element = $(element);","2432","    var elementStyle = element.style, match;","2433","    if (Object.isString(styles)) {","2434","      element.style.cssText += ';' + styles;","2435","      return styles.include('opacity') ?","2436","        element.setOpacity(styles.match(\/opacity:\\s*(\\d?\\.?\\d*)\/)[1]) : element;","2437","    }","2438","    for (var property in styles)","2439","      if (property == 'opacity') element.setOpacity(styles[property]);","2440","      else","2441","        elementStyle[(property == 'float' || property == 'cssFloat') ?","2442","          (Object.isUndefined(elementStyle.styleFloat) ? 'cssFloat' : 'styleFloat') :","2443","            property] = styles[property];","2446","  },","2448","  setOpacity: function(element, value) {","2449","    element = $(element);","2450","    element.style.opacity = (value == 1 || value === '') ? '' :","2451","      (value < 0.00001) ? 0 : value;","2452","    return element;","2453","  },","2455","  makePositioned: function(element) {","2456","    element = $(element);","2457","    var pos = Element.getStyle(element, 'position');","2458","    if (pos == 'static' || !pos) {","2459","      element._madePositioned = true;","2460","      element.style.position = 'relative';","2461","      if (Prototype.Browser.Opera) {","2462","        element.style.top = 0;","2463","        element.style.left = 0;","2466","    return element;","2467","  },","2468","","2469","  undoPositioned: function(element) {","2470","    element = $(element);","2471","    if (element._madePositioned) {","2472","      element._madePositioned = undefined;","2473","      element.style.position =","2474","        element.style.top =","2475","        element.style.left =","2476","        element.style.bottom =","2477","        element.style.right = '';","2478","    }","2479","    return element;","2480","  },","2481","","2482","  makeClipping: function(element) {","2483","    element = $(element);","2484","    if (element._overflow) return element;","2485","    element._overflow = Element.getStyle(element, 'overflow') || 'auto';","2486","    if (element._overflow !== 'hidden')","2487","      element.style.overflow = 'hidden';","2488","    return element;","2489","  },","2490","","2491","  undoClipping: function(element) {","2492","    element = $(element);","2493","    if (!element._overflow) return element;","2494","    element.style.overflow = element._overflow == 'auto' ? '' : element._overflow;","2495","    element._overflow = null;","2496","    return element;","2497","  },","2498","","2499","  clonePosition: function(element, source) {","2500","    var options = Object.extend({","2501","      setLeft:    true,","2502","      setTop:     true,","2503","      setWidth:   true,","2504","      setHeight:  true,","2505","      offsetTop:  0,","2506","      offsetLeft: 0","2507","    }, arguments[2] || { });","2508","","2509","    source = $(source);","2510","    var p = Element.viewportOffset(source), delta = [0, 0], parent = null;","2511","","2512","    element = $(element);","2513","","2514","    if (Element.getStyle(element, 'position') == 'absolute') {","2515","      parent = Element.getOffsetParent(element);","2516","      delta = Element.viewportOffset(parent);","2517","    }","2518","","2519","    if (parent == document.body) {","2520","      delta[0] -= document.body.offsetLeft;","2521","      delta[1] -= document.body.offsetTop;","2522","    }","2523","","2524","    if (options.setLeft)   element.style.left  = (p[0] - delta[0] + options.offsetLeft) + 'px';","2525","    if (options.setTop)    element.style.top   = (p[1] - delta[1] + options.offsetTop) + 'px';","2526","    if (options.setWidth)  element.style.width = source.offsetWidth + 'px';","2527","    if (options.setHeight) element.style.height = source.offsetHeight + 'px';","2528","    return element;","2529","  }","2530","};","2531","","2532","Object.extend(Element.Methods, {","2533","  getElementsBySelector: Element.Methods.select,","2534","","2535","  childElements: Element.Methods.immediateDescendants","2536","});","2537","","2538","Element._attributeTranslations = {","2539","  write: {","2540","    names: {","2541","      className: 'class',","2542","      htmlFor:   'for'","2543","    },","2544","    values: { }","2545","  }","2546","};","2547","","2548","if (Prototype.Browser.Opera) {","2549","  Element.Methods.getStyle = Element.Methods.getStyle.wrap(","2550","    function(proceed, element, style) {","2551","      switch (style) {","2552","        case 'height': case 'width':","2553","          if (!Element.visible(element)) return null;","2554","","2555","          var dim = parseInt(proceed(element, style), 10);","2556","","2557","          if (dim !== element['offset' + style.capitalize()])","2558","            return dim + 'px';","2559","","2560","          var properties;","2561","          if (style === 'height') {","2562","            properties = ['border-top-width', 'padding-top',","2563","             'padding-bottom', 'border-bottom-width'];","2564","          }","2565","          else {","2566","            properties = ['border-left-width', 'padding-left',","2567","             'padding-right', 'border-right-width'];","2568","          }","2569","          return properties.inject(dim, function(memo, property) {","2570","            var val = proceed(element, property);","2571","            return val === null ? memo : memo - parseInt(val, 10);","2572","          }) + 'px';","2573","        default: return proceed(element, style);","2574","      }","2575","    }","2576","  );","2577","","2578","  Element.Methods.readAttribute = Element.Methods.readAttribute.wrap(","2579","    function(proceed, element, attribute) {","2580","      if (attribute === 'title') return element.title;","2581","      return proceed(element, attribute);","2582","    }","2583","  );","2584","}","2585","","2586","else if (Prototype.Browser.IE) {","2587","  Element.Methods.getStyle = function(element, style) {","2588","    element = $(element);","2589","    style = (style == 'float' || style == 'cssFloat') ? 'styleFloat' : style.camelize();","2590","    var value = element.style[style];","2591","    if (!value && element.currentStyle) value = element.currentStyle[style];","2592","","2593","    if (style == 'opacity') {","2594","      if (value = (element.getStyle('filter') || '').match(\/alpha\\(opacity=(.*)\\)\/))","2595","        if (value[1]) return parseFloat(value[1]) \/ 100;","2596","      return 1.0;","2597","    }","2598","","2599","    if (value == 'auto') {","2600","      if ((style == 'width' || style == 'height') && (element.getStyle('display') != 'none'))","2601","        return element['offset' + style.capitalize()] + 'px';","2602","      return null;","2603","    }","2604","    return value;","2607","  Element.Methods.setOpacity = function(element, value) {","2608","    function stripAlpha(filter){","2609","      return filter.replace(\/alpha\\([^\\)]*\\)\/gi,'');","2610","    }","2611","    element = $(element);","2612","    var currentStyle = element.currentStyle;","2613","    if ((currentStyle && !currentStyle.hasLayout) ||","2614","      (!currentStyle && element.style.zoom == 'normal'))","2615","        element.style.zoom = 1;","2616","","2617","    var filter = element.getStyle('filter'), style = element.style;","2618","    if (value == 1 || value === '') {","2619","      (filter = stripAlpha(filter)) ?","2620","        style.filter = filter : style.removeAttribute('filter');","2621","      return element;","2622","    } else if (value < 0.00001) value = 0;","2623","    style.filter = stripAlpha(filter) +","2624","      'alpha(opacity=' + (value * 100) + ')';","2625","    return element;","2626","  };","2627","","2628","  Element._attributeTranslations = (function(){","2629","","2630","    var classProp = 'className',","2631","        forProp = 'for',","2632","        el = document.createElement('div');","2633","","2634","    el.setAttribute(classProp, 'x');","2635","","2636","    if (el.className !== 'x') {","2637","      el.setAttribute('class', 'x');","2638","      if (el.className === 'x') {","2639","        classProp = 'class';","2640","      }","2641","    }","2642","    el = null;","2643","","2644","    el = document.createElement('label');","2645","    el.setAttribute(forProp, 'x');","2646","    if (el.htmlFor !== 'x') {","2647","      el.setAttribute('htmlFor', 'x');","2648","      if (el.htmlFor === 'x') {","2649","        forProp = 'htmlFor';","2650","      }","2651","    }","2652","    el = null;","2653","","2654","    return {","2655","      read: {","2656","        names: {","2657","          'class':      classProp,","2658","          'className':  classProp,","2659","          'for':        forProp,","2660","          'htmlFor':    forProp","2661","        },","2662","        values: {","2663","          _getAttr: function(element, attribute) {","2664","            return element.getAttribute(attribute);","2665","          },","2666","          _getAttr2: function(element, attribute) {","2667","            return element.getAttribute(attribute, 2);","2668","          },","2669","          _getAttrNode: function(element, attribute) {","2670","            var node = element.getAttributeNode(attribute);","2671","            return node ? node.value : \"\";","2672","          },","2673","          _getEv: (function(){","2674","","2675","            var el = document.createElement('div'), f;","2676","            el.onclick = Prototype.emptyFunction;","2677","            var value = el.getAttribute('onclick');","2678","","2679","            if (String(value).indexOf('{') > -1) {","2680","              f = function(element, attribute) {","2681","                attribute = element.getAttribute(attribute);","2682","                if (!attribute) return null;","2683","                attribute = attribute.toString();","2684","                attribute = attribute.split('{')[1];","2685","                attribute = attribute.split('}')[0];","2686","                return attribute.strip();","2687","              };","2688","            }","2689","            else if (value === '') {","2690","              f = function(element, attribute) {","2691","                attribute = element.getAttribute(attribute);","2692","                if (!attribute) return null;","2693","                return attribute.strip();","2694","              };","2695","            }","2696","            el = null;","2697","            return f;","2698","          })(),","2699","          _flag: function(element, attribute) {","2700","            return $(element).hasAttribute(attribute) ? attribute : null;","2701","          },","2702","          style: function(element) {","2703","            return element.style.cssText.toLowerCase();","2704","          },","2705","          title: function(element) {","2706","            return element.title;","2707","          }","2708","        }","2709","      }","2710","    }","2711","  })();","2712","","2713","  Element._attributeTranslations.write = {","2714","    names: Object.extend({","2717","    }, Element._attributeTranslations.read.names),","2720","        element.checked = !!value;","2729","  Element._attributeTranslations.has = {};","2731","  $w('colSpan rowSpan vAlign dateTime accessKey tabIndex ' +","2732","      'encType maxLength readOnly longDesc frameBorder').each(function(attr) {","2733","    Element._attributeTranslations.write.names[attr.toLowerCase()] = attr;","2734","    Element._attributeTranslations.has[attr.toLowerCase()] = attr;","2737","  (function(v) {","2738","    Object.extend(v, {","2739","      href:        v._getAttr2,","2740","      src:         v._getAttr2,","2741","      type:        v._getAttr,","2742","      action:      v._getAttrNode,","2743","      disabled:    v._flag,","2744","      checked:     v._flag,","2745","      readonly:    v._flag,","2746","      multiple:    v._flag,","2747","      onload:      v._getEv,","2748","      onunload:    v._getEv,","2749","      onclick:     v._getEv,","2750","      ondblclick:  v._getEv,","2751","      onmousedown: v._getEv,","2752","      onmouseup:   v._getEv,","2753","      onmouseover: v._getEv,","2754","      onmousemove: v._getEv,","2755","      onmouseout:  v._getEv,","2756","      onfocus:     v._getEv,","2757","      onblur:      v._getEv,","2758","      onkeypress:  v._getEv,","2759","      onkeydown:   v._getEv,","2760","      onkeyup:     v._getEv,","2761","      onsubmit:    v._getEv,","2762","      onreset:     v._getEv,","2763","      onselect:    v._getEv,","2764","      onchange:    v._getEv","2765","    });","2766","  })(Element._attributeTranslations.read.values);","2768","  if (Prototype.BrowserFeatures.ElementExtensions) {","2769","    (function() {","2770","      function _descendants(element) {","2771","        var nodes = element.getElementsByTagName('*'), results = [];","2772","        for (var i = 0, node; node = nodes[i]; i++)","2773","          if (node.tagName !== \"!\") \/\/ Filter out comment nodes.","2774","            results.push(node);","2775","        return results;","2777","","2778","      Element.Methods.down = function(element, expression, index) {","2779","        element = $(element);","2780","        if (arguments.length == 1) return element.firstDescendant();","2781","        return Object.isNumber(expression) ? _descendants(element)[expression] :","2782","          Element.select(element, expression)[index || 0];","2783","      }","2784","    })();","2785","  }","2786","","2787","}","2788","","2789","else if (Prototype.Browser.Gecko && \/rv:1\\.8\\.0\/.test(navigator.userAgent)) {","2790","  Element.Methods.setOpacity = function(element, value) {","2791","    element = $(element);","2792","    element.style.opacity = (value == 1) ? 0.999999 :","2793","      (value === '') ? '' : (value < 0.00001) ? 0 : value;","2794","    return element;","2795","  };","2796","}","2797","","2798","else if (Prototype.Browser.WebKit) {","2799","  Element.Methods.setOpacity = function(element, value) {","2800","    element = $(element);","2801","    element.style.opacity = (value == 1 || value === '') ? '' :","2802","      (value < 0.00001) ? 0 : value;","2803","","2804","    if (value == 1)","2805","      if (element.tagName.toUpperCase() == 'IMG' && element.width) {","2806","        element.width++; element.width--;","2807","      } else try {","2808","        var n = document.createTextNode(' ');","2809","        element.appendChild(n);","2810","        element.removeChild(n);","2811","      } catch (e) { }","2812","","2813","    return element;","2814","  };","2815","}","2816","","2817","if ('outerHTML' in document.documentElement) {","2818","  Element.Methods.replace = function(element, content) {","2819","    element = $(element);","2820","","2821","    if (content && content.toElement) content = content.toElement();","2822","    if (Object.isElement(content)) {","2823","      element.parentNode.replaceChild(content, element);","2827","    content = Object.toHTML(content);","2828","    var parent = element.parentNode, tagName = parent.tagName.toUpperCase();","2829","","2830","    if (Element._insertionTranslations.tags[tagName]) {","2831","      var nextSibling = element.next(),","2832","          fragments = Element._getContentFromAnonymousElement(tagName, content.stripScripts());","2833","      parent.removeChild(element);","2834","      if (nextSibling)","2835","        fragments.each(function(node) { parent.insertBefore(node, nextSibling) });","2836","      else","2837","        fragments.each(function(node) { parent.appendChild(node) });","2838","    }","2839","    else element.outerHTML = content.stripScripts();","2840","","2841","    content.evalScripts.bind(content).defer();","2842","    return element;","2843","  };","2844","}","2845","","2846","Element._returnOffset = function(l, t) {","2847","  var result = [l, t];","2848","  result.left = l;","2849","  result.top = t;","2850","  return result;","2851","};","2852","","2853","Element._getContentFromAnonymousElement = function(tagName, html, force) {","2854","  var div = new Element('div'),","2855","      t = Element._insertionTranslations.tags[tagName];","2856","","2857","  var workaround = false;","2858","  if (t) workaround = true;","2859","  else if (force) {","2860","    workaround = true;","2861","    t = ['', '', 0];","2862","  }","2863","","2864","  if (workaround) {","2865","    div.innerHTML = '&nbsp;' + t[0] + html + t[1];","2866","    div.removeChild(div.firstChild);","2867","    for (var i = t[2]; i--; ) {","2868","      div = div.firstChild;","2869","    }","2870","  }","2871","  else {","2872","    div.innerHTML = html;","2873","  }","2874","  return $A(div.childNodes);","2875","};","2876","","2877","Element._insertionTranslations = {","2878","  before: function(element, node) {","2879","    element.parentNode.insertBefore(node, element);","2880","  },","2881","  top: function(element, node) {","2882","    element.insertBefore(node, element.firstChild);","2883","  },","2884","  bottom: function(element, node) {","2885","    element.appendChild(node);","2886","  },","2887","  after: function(element, node) {","2888","    element.parentNode.insertBefore(node, element.nextSibling);","2889","  },","2890","  tags: {","2891","    TABLE:  ['<table>',                '<\/table>',                   1],","2892","    TBODY:  ['<table><tbody>',         '<\/tbody><\/table>',           2],","2893","    TR:     ['<table><tbody><tr>',     '<\/tr><\/tbody><\/table>',      3],","2894","    TD:     ['<table><tbody><tr><td>', '<\/td><\/tr><\/tbody><\/table>', 4],","2895","    SELECT: ['<select>',               '<\/select>',                  1]","2896","  }","2897","};","2898","","2899","(function() {","2900","  var tags = Element._insertionTranslations.tags;","2901","  Object.extend(tags, {","2902","    THEAD: tags.TBODY,","2903","    TFOOT: tags.TBODY,","2904","    TH:    tags.TD","2905","  });","2906","})();","2907","","2908","Element.Methods.Simulated = {","2909","  hasAttribute: function(element, attribute) {","2910","    attribute = Element._attributeTranslations.has[attribute] || attribute;","2911","    var node = $(element).getAttributeNode(attribute);","2912","    return !!(node && node.specified);","2913","  }","2914","};","2915","","2916","Element.Methods.ByTag = { };","2917","","2918","Object.extend(Element, Element.Methods);","2919","","2920","(function(div) {","2921","","2922","  if (!Prototype.BrowserFeatures.ElementExtensions && div['__proto__']) {","2923","    window.HTMLElement = { };","2924","    window.HTMLElement.prototype = div['__proto__'];","2925","    Prototype.BrowserFeatures.ElementExtensions = true;","2926","  }","2927","","2928","  div = null;","2929","","2930","})(document.createElement('div'));","2931","","2932","Element.extend = (function() {","2933","","2934","  function checkDeficiency(tagName) {","2935","    if (typeof window.Element != 'undefined') {","2936","      var proto = window.Element.prototype;","2937","      if (proto) {","2938","        var id = '_' + (Math.random()+'').slice(2),","2939","            el = document.createElement(tagName);","2940","        proto[id] = 'x';","2941","        var isBuggy = (el[id] !== 'x');","2942","        delete proto[id];","2943","        el = null;","2944","        return isBuggy;","2958","  var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY = checkDeficiency('object');","2959","","2960","  if (Prototype.BrowserFeatures.SpecificElementExtensions) {","2961","    if (HTMLOBJECTELEMENT_PROTOTYPE_BUGGY) {","2962","      return function(element) {","2963","        if (element && typeof element._extendedByPrototype == 'undefined') {","2964","          var t = element.tagName;","2965","          if (t && (\/^(?:object|applet|embed)$\/i.test(t))) {","2966","            extendElementWith(element, Element.Methods);","2967","            extendElementWith(element, Element.Methods.Simulated);","2968","            extendElementWith(element, Element.Methods.ByTag[t.toUpperCase()]);","2969","          }","2970","        }","2971","        return element;","2972","      }","2973","    }","2974","    return Prototype.K;","2977","  var Methods = { }, ByTag = Element.Methods.ByTag;","2978","","2979","  var extend = Object.extend(function(element) {","2980","    if (!element || typeof element._extendedByPrototype != 'undefined' ||","2981","        element.nodeType != 1 || element == window) return element;","2984","        tagName = element.tagName.toUpperCase();","2989","","2990","    element._extendedByPrototype = Prototype.emptyFunction;","2993","  }, {","2994","    refresh: function() {","2995","      if (!Prototype.BrowserFeatures.ElementExtensions) {","2996","        Object.extend(Methods, Element.Methods);","2997","        Object.extend(Methods, Element.Methods.Simulated);","2998","      }","3000","  });","3002","  extend.refresh();","3003","  return extend;","3004","})();","3005","","3006","if (document.documentElement.hasAttribute) {","3007","  Element.hasAttribute = function(element, attribute) {","3008","    return element.hasAttribute(attribute);","3009","  };","3010","}","3011","else {","3012","  Element.hasAttribute = Element.Methods.Simulated.hasAttribute;","3013","}","3014","","3015","Element.addMethods = function(methods) {","3016","  var F = Prototype.BrowserFeatures, T = Element.Methods.ByTag;","3017","","3018","  if (!methods) {","3019","    Object.extend(Form, Form.Methods);","3020","    Object.extend(Form.Element, Form.Element.Methods);","3021","    Object.extend(Element.Methods.ByTag, {","3022","      \"FORM\":     Object.clone(Form.Methods),","3023","      \"INPUT\":    Object.clone(Form.Element.Methods),","3024","      \"SELECT\":   Object.clone(Form.Element.Methods),","3025","      \"TEXTAREA\": Object.clone(Form.Element.Methods),","3026","      \"BUTTON\":   Object.clone(Form.Element.Methods)","3027","    });","3030","  if (arguments.length == 2) {","3031","    var tagName = methods;","3032","    methods = arguments[1];","3035","  if (!tagName) Object.extend(Element.Methods, methods || { });","3036","  else {","3037","    if (Object.isArray(tagName)) tagName.each(extend);","3038","    else extend(tagName);","3039","  }","3040","","3041","  function extend(tagName) {","3043","    if (!Element.Methods.ByTag[tagName])","3044","      Element.Methods.ByTag[tagName] = { };","3045","    Object.extend(Element.Methods.ByTag[tagName], methods);","3048","  function copy(methods, destination, onlyIfAbsent) {","3049","    onlyIfAbsent = onlyIfAbsent || false;","3079","        proto = element['__proto__'] || element.constructor.prototype;","3085","  var elementPrototype = window.HTMLElement ? HTMLElement.prototype :","3086","   Element.prototype;","3087","","3088","  if (F.ElementExtensions) {","3089","    copy(Element.Methods, elementPrototype);","3090","    copy(Element.Methods.Simulated, elementPrototype, true);","3091","  }","3092","","3093","  if (F.SpecificElementExtensions) {","3094","    for (var tag in Element.Methods.ByTag) {","3095","      var klass = findDOMClass(tag);","3096","      if (Object.isUndefined(klass)) continue;","3097","      copy(T[tag], klass.prototype);","3098","    }","3099","  }","3100","","3101","  Object.extend(Element, Element.Methods);","3102","  delete Element.ByTag;","3103","","3104","  if (Element.extend.refresh) Element.extend.refresh();","3105","  Element.cache = { };","3106","};","3107","","3108","","3109","document.viewport = {","3110","","3111","  getDimensions: function() {","3112","    return { width: this.getWidth(), height: this.getHeight() };","3113","  },","3114","","3115","  getScrollOffsets: function() {","3116","    return Element._returnOffset(","3117","      window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,","3118","      window.pageYOffset || document.documentElement.scrollTop  || document.body.scrollTop);","3119","  }","3120","};","3121","","3122","(function(viewport) {","3123","  var B = Prototype.Browser, doc = document, element, property = {};","3124","","3125","  function getRootElement() {","3126","    if (B.WebKit && !doc.evaluate)","3127","      return document;","3128","","3129","    if (B.Opera && window.parseFloat(window.opera.version()) < 9.5)","3130","      return document.body;","3131","","3132","    return document.documentElement;","3133","  }","3134","","3135","  function define(D) {","3136","    if (!element) element = getRootElement();","3137","","3138","    property[D] = 'client' + D;","3139","","3140","    viewport['get' + D] = function() { return element[property[D]] };","3141","    return viewport['get' + D]();","3142","  }","3143","","3144","  viewport.getWidth  = define.curry('Width');","3145","","3146","  viewport.getHeight = define.curry('Height');","3147","})(document.viewport);","3148","","3149","","3150","Element.Storage = {","3151","  UID: 1","3152","};","3153","","3154","Element.addMethods({","3155","  getStorage: function(element) {","3156","    if (!(element = $(element))) return;","3157","","3158","    var uid;","3159","    if (element === window) {","3160","      uid = 0;","3161","    } else {","3162","      if (typeof element._prototypeUID === \"undefined\")","3163","        element._prototypeUID = Element.Storage.UID++;","3164","      uid = element._prototypeUID;","3165","    }","3166","","3167","    if (!Element.Storage[uid])","3168","      Element.Storage[uid] = $H();","3169","","3170","    return Element.Storage[uid];","3171","  },","3172","","3173","  store: function(element, key, value) {","3174","    if (!(element = $(element))) return;","3177","      Element.getStorage(element).update(key);","3179","      Element.getStorage(element).set(key, value);","3180","    }","3181","","3182","    return element;","3183","  },","3184","","3185","  retrieve: function(element, key, defaultValue) {","3186","    if (!(element = $(element))) return;","3187","    var hash = Element.getStorage(element), value = hash.get(key);","3188","","3189","    if (Object.isUndefined(value)) {","3190","      hash.set(key, defaultValue);","3191","      value = defaultValue;","3192","    }","3193","","3194","    return value;","3195","  },","3196","","3197","  clone: function(element, deep) {","3198","    if (!(element = $(element))) return;","3199","    var clone = element.cloneNode(deep);","3200","    clone._prototypeUID = void 0;","3201","    if (deep) {","3202","      var descendants = Element.select(clone, '*'),","3203","          i = descendants.length;","3204","      while (i--) {","3205","        descendants[i]._prototypeUID = void 0;","3208","    return Element.extend(clone);","3209","  },","3211","  purge: function(element) {","3212","    if (!(element = $(element))) return;","3213","    var purgeElement = Element._purgeElement;","3215","    purgeElement(element);","3217","    var descendants = element.getElementsByTagName('*'),","3218","     i = descendants.length;","3220","    while (i--) purgeElement(descendants[i]);","3222","    return null;","3224","});","3238","      value = element.getStyle(property);","3241","    if (value === null) {","3264","      var decimal = toDecimal(value);","3265","      var whole = null;","3266","      var position = element.getStyle('position');","3271","      var isVertical =  property.include('top') || property.include('bottom') ||","3295","    if (Object.isString(number) && number.endsWith('px')) {","3297","    }","3302","    var originalElement = element;","3360","      if (this._prepared) return;","3364","        this._prepared = true;","3377","      var position = element.getStyle('position'),","3378","       width = element.getStyle('width');","3380","      if (width === \"0px\" || width === null) {","3382","        width = element.getStyle('width');","3388","      element.setStyle({","3389","        position:   'absolute',","3392","      });","3394","      var positionedWidth = element.getStyle('width');","3396","      var newWidth;","3398","        newWidth = getPixelValue(element, 'width', context);","3400","        newWidth = getPixelValue(element, 'width', context);","3415","      this._prepared = true;","3423","      this._prepared = false;","3516","","3749","    if (!isInline && element.offsetParent) return $(element.offsetParent);","3753","        return isHtml(element) ? $(document.body) : $(element);","3791","    valueL -= layout.get('margin-top');","3792","    valueT -= layout.get('margin-left');","3800","      valueT += element.scrollTop  || 0;","3801","      valueL += element.scrollLeft || 0;","3802","      element = element.parentNode;","3808","    element = $(element);","3844","      left:   element.getStyle('left'),","3845","      top:    element.getStyle('top'),","3846","      width:  element.getStyle('width'),","3847","      height: element.getStyle('height')","3914","        if (element.offsetParent == document.body)","3935","    relativize:             relativize","4015"," * Sizzle CSS Selector Engine - v1.0","4016"," *  Copyright 2009, The Dojo Foundation","4017"," *  Released under the MIT, BSD, and GPL Licenses.","4018"," *  More information: http:\/\/sizzlejs.com\/","4020","(function(){","4022","var chunker = \/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^[\\]]*\\]|['\"][^'\"]*['\"]|[^[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)\/g,","4024","\ttoString = Object.prototype.toString,","4025","\thasDuplicate = false,","4026","\tbaseHasDuplicate = true;","4028","[0, 0].sort(function(){","4029","\tbaseHasDuplicate = false;","4030","\treturn 0;","4031","});","4033","var Sizzle = function(selector, context, results, seed) {","4035","\tvar origContext = context = context || document;","4036","","4037","\tif ( context.nodeType !== 1 && context.nodeType !== 9 ) {","4038","\t\treturn [];","4039","\t}","4045","\tvar parts = [], m, set, checkSet, check, mode, extra, prune = true, contextXML = isXML(context),","4046","\t\tsoFar = selector;","4048","\twhile ( (chunker.exec(\"\"), m = chunker.exec(soFar)) !== null ) {","4049","\t\tsoFar = m[3];","4051","\t\tparts.push( m[1] );","4053","\t\tif ( m[2] ) {","4054","\t\t\textra = m[3];","4059","\tif ( parts.length > 1 && origPOS.exec( selector ) ) {","4060","\t\tif ( parts.length === 2 && Expr.relative[ parts[0] ] ) {","4061","\t\t\tset = posProcess( parts[0] + parts[1], context );","4062","\t\t} else {","4063","\t\t\tset = Expr.relative[ parts[0] ] ?","4064","\t\t\t\t[ context ] :","4065","\t\t\t\tSizzle( parts.shift(), context );","4067","\t\t\twhile ( parts.length ) {","4068","\t\t\t\tselector = parts.shift();","4070","\t\t\t\tif ( Expr.relative[ selector ] )","4071","\t\t\t\t\tselector += parts.shift();","4073","\t\t\t\tset = posProcess( selector, set );","4075","\t\t}","4076","\t} else {","4077","\t\tif ( !seed && parts.length > 1 && context.nodeType === 9 && !contextXML &&","4078","\t\t\t\tExpr.match.ID.test(parts[0]) && !Expr.match.ID.test(parts[parts.length - 1]) ) {","4079","\t\t\tvar ret = Sizzle.find( parts.shift(), context, contextXML );","4080","\t\t\tcontext = ret.expr ? Sizzle.filter( ret.expr, ret.set )[0] : ret.set[0];","4081","\t\t}","4083","\t\tif ( context ) {","4084","\t\t\tvar ret = seed ?","4085","\t\t\t\t{ expr: parts.pop(), set: makeArray(seed) } :","4086","\t\t\t\tSizzle.find( parts.pop(), parts.length === 1 && (parts[0] === \"~\" || parts[0] === \"+\") && context.parentNode ? context.parentNode : context, contextXML );","4087","\t\t\tset = ret.expr ? Sizzle.filter( ret.expr, ret.set ) : ret.set;","4089","\t\t\tif ( parts.length > 0 ) {","4090","\t\t\t\tcheckSet = makeArray(set);","4092","\t\t\t\tprune = false;","4095","\t\t\twhile ( parts.length ) {","4096","\t\t\t\tvar cur = parts.pop(), pop = cur;","4097","","4098","\t\t\t\tif ( !Expr.relative[ cur ] ) {","4099","\t\t\t\t\tcur = \"\";","4100","\t\t\t\t} else {","4101","\t\t\t\t\tpop = parts.pop();","4104","\t\t\t\tif ( pop == null ) {","4105","\t\t\t\t\tpop = context;","4106","\t\t\t\t}","4107","","4108","\t\t\t\tExpr.relative[ cur ]( checkSet, pop, contextXML );","4109","\t\t\t}","4110","\t\t} else {","4111","\t\t\tcheckSet = parts = [];","4112","\t\t}","4114","","4115","\tif ( !checkSet ) {","4116","\t\tcheckSet = set;","4117","\t}","4118","","4119","\tif ( !checkSet ) {","4120","\t\tthrow \"Syntax error, unrecognized expression: \" + (cur || selector);","4121","\t}","4122","","4123","\tif ( toString.call(checkSet) === \"[object Array]\" ) {","4124","\t\tif ( !prune ) {","4125","\t\t\tresults.push.apply( results, checkSet );","4126","\t\t} else if ( context && context.nodeType === 1 ) {","4127","\t\t\tfor ( var i = 0; checkSet[i] != null; i++ ) {","4128","\t\t\t\tif ( checkSet[i] && (checkSet[i] === true || checkSet[i].nodeType === 1 && contains(context, checkSet[i])) ) {","4129","\t\t\t\t\tresults.push( set[i] );","4130","\t\t\t\t}","4131","\t\t\t}","4132","\t\t} else {","4133","\t\t\tfor ( var i = 0; checkSet[i] != null; i++ ) {","4134","\t\t\t\tif ( checkSet[i] && checkSet[i].nodeType === 1 ) {","4135","\t\t\t\t\tresults.push( set[i] );","4136","\t\t\t\t}","4137","\t\t\t}","4138","\t\t}","4139","\t} else {","4140","\t\tmakeArray( checkSet, results );","4141","\t}","4142","","4143","\tif ( extra ) {","4144","\t\tSizzle( extra, origContext, results, seed );","4145","\t\tSizzle.uniqueSort( results );","4146","\t}","4147","","4151","Sizzle.uniqueSort = function(results){","4152","\tif ( sortOrder ) {","4153","\t\thasDuplicate = baseHasDuplicate;","4154","\t\tresults.sort(sortOrder);","4156","\t\tif ( hasDuplicate ) {","4157","\t\t\tfor ( var i = 1; i < results.length; i++ ) {","4158","\t\t\t\tif ( results[i] === results[i-1] ) {","4159","\t\t\t\t\tresults.splice(i--, 1);","4160","\t\t\t\t}","4163","\t}","4165","\treturn results;","4166","};","4168","Sizzle.matches = function(expr, set){","4169","\treturn Sizzle(expr, null, null, set);","4170","};","4172","Sizzle.find = function(expr, context, isXML){","4173","\tvar set, match;","4175","\tif ( !expr ) {","4176","\t\treturn [];","4177","\t}","4178","","4179","\tfor ( var i = 0, l = Expr.order.length; i < l; i++ ) {","4180","\t\tvar type = Expr.order[i], match;","4181","","4182","\t\tif ( (match = Expr.leftMatch[ type ].exec( expr )) ) {","4183","\t\t\tvar left = match[1];","4184","\t\t\tmatch.splice(1,1);","4185","","4186","\t\t\tif ( left.substr( left.length - 1 ) !== \"\\\\\" ) {","4187","\t\t\t\tmatch[1] = (match[1] || \"\").replace(\/\\\\\/g, \"\");","4188","\t\t\t\tset = Expr.find[ type ]( match, context, isXML );","4189","\t\t\t\tif ( set != null ) {","4190","\t\t\t\t\texpr = expr.replace( Expr.match[ type ], \"\" );","4197","\tif ( !set ) {","4198","\t\tset = context.getElementsByTagName(\"*\");","4199","\t}","4200","","4201","\treturn {set: set, expr: expr};","4202","};","4203","","4204","Sizzle.filter = function(expr, set, inplace, not){","4205","\tvar old = expr, result = [], curLoop = set, match, anyFound,","4206","\t\tisXMLFilter = set && set[0] && isXML(set[0]);","4207","","4208","\twhile ( expr && set.length ) {","4209","\t\tfor ( var type in Expr.filter ) {","4210","\t\t\tif ( (match = Expr.match[ type ].exec( expr )) != null ) {","4211","\t\t\t\tvar filter = Expr.filter[ type ], found, item;","4212","\t\t\t\tanyFound = false;","4213","","4214","\t\t\t\tif ( curLoop == result ) {","4215","\t\t\t\t\tresult = [];","4216","\t\t\t\t}","4217","","4218","\t\t\t\tif ( Expr.preFilter[ type ] ) {","4219","\t\t\t\t\tmatch = Expr.preFilter[ type ]( match, curLoop, inplace, result, not, isXMLFilter );","4220","","4221","\t\t\t\t\tif ( !match ) {","4222","\t\t\t\t\t\tanyFound = found = true;","4223","\t\t\t\t\t} else if ( match === true ) {","4224","\t\t\t\t\t\tcontinue;","4225","\t\t\t\t\t}","4226","\t\t\t\t}","4227","","4228","\t\t\t\tif ( match ) {","4229","\t\t\t\t\tfor ( var i = 0; (item = curLoop[i]) != null; i++ ) {","4230","\t\t\t\t\t\tif ( item ) {","4231","\t\t\t\t\t\t\tfound = filter( item, match, i, curLoop );","4232","\t\t\t\t\t\t\tvar pass = not ^ !!found;","4233","","4234","\t\t\t\t\t\t\tif ( inplace && found != null ) {","4235","\t\t\t\t\t\t\t\tif ( pass ) {","4236","\t\t\t\t\t\t\t\t\tanyFound = true;","4237","\t\t\t\t\t\t\t\t} else {","4238","\t\t\t\t\t\t\t\t\tcurLoop[i] = false;","4239","\t\t\t\t\t\t\t\t}","4240","\t\t\t\t\t\t\t} else if ( pass ) {","4241","\t\t\t\t\t\t\t\tresult.push( item );","4242","\t\t\t\t\t\t\t\tanyFound = true;","4243","\t\t\t\t\t\t\t}","4244","\t\t\t\t\t\t}","4245","\t\t\t\t\t}","4246","\t\t\t\t}","4247","","4248","\t\t\t\tif ( found !== undefined ) {","4249","\t\t\t\t\tif ( !inplace ) {","4250","\t\t\t\t\t\tcurLoop = result;","4251","\t\t\t\t\t}","4252","","4253","\t\t\t\t\texpr = expr.replace( Expr.match[ type ], \"\" );","4254","","4255","\t\t\t\t\tif ( !anyFound ) {","4256","\t\t\t\t\t\treturn [];","4257","\t\t\t\t\t}","4258","","4259","\t\t\t\t\tbreak;","4260","\t\t\t\t}","4261","\t\t\t}","4262","\t\t}","4263","","4264","\t\tif ( expr == old ) {","4265","\t\t\tif ( anyFound == null ) {","4266","\t\t\t\tthrow \"Syntax error, unrecognized expression: \" + expr;","4267","\t\t\t} else {","4268","\t\t\t\tbreak;","4269","\t\t\t}","4270","\t\t}","4271","","4272","\t\told = expr;","4273","\t}","4274","","4275","\treturn curLoop;","4276","};","4277","","4278","var Expr = Sizzle.selectors = {","4279","\torder: [ \"ID\", \"NAME\", \"TAG\" ],","4280","\tmatch: {","4281","\t\tID: \/#((?:[\\w\\u00c0-\\uFFFF-]|\\\\.)+)\/,","4282","\t\tCLASS: \/\\.((?:[\\w\\u00c0-\\uFFFF-]|\\\\.)+)\/,","4283","\t\tNAME: \/\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF-]|\\\\.)+)['\"]*\\]\/,","4284","\t\tATTR: \/\\[\\s*((?:[\\w\\u00c0-\\uFFFF-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(['\"]*)(.*?)\\3|)\\s*\\]\/,","4285","\t\tTAG: \/^((?:[\\w\\u00c0-\\uFFFF\\*-]|\\\\.)+)\/,","4286","\t\tCHILD: \/:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+-]*)\\))?\/,","4287","\t\tPOS: \/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^-]|$)\/,","4288","\t\tPSEUDO: \/:((?:[\\w\\u00c0-\\uFFFF-]|\\\\.)+)(?:\\((['\"]*)((?:\\([^\\)]+\\)|[^\\2\\(\\)]*)+)\\2\\))?\/","4289","\t},","4290","\tleftMatch: {},","4291","\tattrMap: {","4292","\t\t\"class\": \"className\",","4293","\t\t\"for\": \"htmlFor\"","4294","\t},","4295","\tattrHandle: {","4296","\t\thref: function(elem){","4297","\t\t\treturn elem.getAttribute(\"href\");","4298","\t\t}","4299","\t},","4300","\trelative: {","4301","\t\t\"+\": function(checkSet, part, isXML){","4302","\t\t\tvar isPartStr = typeof part === \"string\",","4303","\t\t\t\tisTag = isPartStr && !\/\\W\/.test(part),","4304","\t\t\t\tisPartStrNotTag = isPartStr && !isTag;","4305","","4306","\t\t\tif ( isTag && !isXML ) {","4307","\t\t\t\tpart = part.toUpperCase();","4308","\t\t\t}","4309","","4310","\t\t\tfor ( var i = 0, l = checkSet.length, elem; i < l; i++ ) {","4311","\t\t\t\tif ( (elem = checkSet[i]) ) {","4312","\t\t\t\t\twhile ( (elem = elem.previousSibling) && elem.nodeType !== 1 ) {}","4313","","4314","\t\t\t\t\tcheckSet[i] = isPartStrNotTag || elem && elem.nodeName === part ?","4315","\t\t\t\t\t\telem || false :","4316","\t\t\t\t\t\telem === part;","4317","\t\t\t\t}","4318","\t\t\t}","4319","","4320","\t\t\tif ( isPartStrNotTag ) {","4321","\t\t\t\tSizzle.filter( part, checkSet, true );","4322","\t\t\t}","4323","\t\t},","4324","\t\t\">\": function(checkSet, part, isXML){","4325","\t\t\tvar isPartStr = typeof part === \"string\";","4326","","4327","\t\t\tif ( isPartStr && !\/\\W\/.test(part) ) {","4328","\t\t\t\tpart = isXML ? part : part.toUpperCase();","4329","","4330","\t\t\t\tfor ( var i = 0, l = checkSet.length; i < l; i++ ) {","4331","\t\t\t\t\tvar elem = checkSet[i];","4332","\t\t\t\t\tif ( elem ) {","4333","\t\t\t\t\t\tvar parent = elem.parentNode;","4334","\t\t\t\t\t\tcheckSet[i] = parent.nodeName === part ? parent : false;","4335","\t\t\t\t\t}","4336","\t\t\t\t}","4337","\t\t\t} else {","4338","\t\t\t\tfor ( var i = 0, l = checkSet.length; i < l; i++ ) {","4339","\t\t\t\t\tvar elem = checkSet[i];","4340","\t\t\t\t\tif ( elem ) {","4341","\t\t\t\t\t\tcheckSet[i] = isPartStr ?","4342","\t\t\t\t\t\t\telem.parentNode :","4343","\t\t\t\t\t\t\telem.parentNode === part;","4344","\t\t\t\t\t}","4345","\t\t\t\t}","4346","","4347","\t\t\t\tif ( isPartStr ) {","4348","\t\t\t\t\tSizzle.filter( part, checkSet, true );","4349","\t\t\t\t}","4350","\t\t\t}","4351","\t\t},","4352","\t\t\"\": function(checkSet, part, isXML){","4353","\t\t\tvar doneName = done++, checkFn = dirCheck;","4354","","4355","\t\t\tif ( !\/\\W\/.test(part) ) {","4356","\t\t\t\tvar nodeCheck = part = isXML ? part : part.toUpperCase();","4357","\t\t\t\tcheckFn = dirNodeCheck;","4358","\t\t\t}","4359","","4360","\t\t\tcheckFn(\"parentNode\", part, doneName, checkSet, nodeCheck, isXML);","4361","\t\t},","4362","\t\t\"~\": function(checkSet, part, isXML){","4363","\t\t\tvar doneName = done++, checkFn = dirCheck;","4364","","4365","\t\t\tif ( typeof part === \"string\" && !\/\\W\/.test(part) ) {","4366","\t\t\t\tvar nodeCheck = part = isXML ? part : part.toUpperCase();","4367","\t\t\t\tcheckFn = dirNodeCheck;","4368","\t\t\t}","4369","","4370","\t\t\tcheckFn(\"previousSibling\", part, doneName, checkSet, nodeCheck, isXML);","4371","\t\t}","4372","\t},","4373","\tfind: {","4374","\t\tID: function(match, context, isXML){","4375","\t\t\tif ( typeof context.getElementById !== \"undefined\" && !isXML ) {","4376","\t\t\t\tvar m = context.getElementById(match[1]);","4377","\t\t\t\treturn m ? [m] : [];","4378","\t\t\t}","4379","\t\t},","4380","\t\tNAME: function(match, context, isXML){","4381","\t\t\tif ( typeof context.getElementsByName !== \"undefined\" ) {","4382","\t\t\t\tvar ret = [], results = context.getElementsByName(match[1]);","4383","","4384","\t\t\t\tfor ( var i = 0, l = results.length; i < l; i++ ) {","4385","\t\t\t\t\tif ( results[i].getAttribute(\"name\") === match[1] ) {","4386","\t\t\t\t\t\tret.push( results[i] );","4387","\t\t\t\t\t}","4388","\t\t\t\t}","4389","","4390","\t\t\t\treturn ret.length === 0 ? null : ret;","4391","\t\t\t}","4392","\t\t},","4393","\t\tTAG: function(match, context){","4394","\t\t\treturn context.getElementsByTagName(match[1]);","4395","\t\t}","4396","\t},","4397","\tpreFilter: {","4398","\t\tCLASS: function(match, curLoop, inplace, result, not, isXML){","4399","\t\t\tmatch = \" \" + match[1].replace(\/\\\\\/g, \"\") + \" \";","4400","","4401","\t\t\tif ( isXML ) {","4402","\t\t\t\treturn match;","4403","\t\t\t}","4404","","4405","\t\t\tfor ( var i = 0, elem; (elem = curLoop[i]) != null; i++ ) {","4406","\t\t\t\tif ( elem ) {","4407","\t\t\t\t\tif ( not ^ (elem.className && (\" \" + elem.className + \" \").indexOf(match) >= 0) ) {","4408","\t\t\t\t\t\tif ( !inplace )","4409","\t\t\t\t\t\t\tresult.push( elem );","4410","\t\t\t\t\t} else if ( inplace ) {","4411","\t\t\t\t\t\tcurLoop[i] = false;","4412","\t\t\t\t\t}","4413","\t\t\t\t}","4414","\t\t\t}","4415","","4416","\t\t\treturn false;","4417","\t\t},","4418","\t\tID: function(match){","4419","\t\t\treturn match[1].replace(\/\\\\\/g, \"\");","4420","\t\t},","4421","\t\tTAG: function(match, curLoop){","4422","\t\t\tfor ( var i = 0; curLoop[i] === false; i++ ){}","4423","\t\t\treturn curLoop[i] && isXML(curLoop[i]) ? match[1] : match[1].toUpperCase();","4424","\t\t},","4425","\t\tCHILD: function(match){","4426","\t\t\tif ( match[1] == \"nth\" ) {","4427","\t\t\t\tvar test = \/(-?)(\\d*)n((?:\\+|-)?\\d*)\/.exec(","4428","\t\t\t\t\tmatch[2] == \"even\" && \"2n\" || match[2] == \"odd\" && \"2n+1\" ||","4429","\t\t\t\t\t!\/\\D\/.test( match[2] ) && \"0n+\" + match[2] || match[2]);","4430","","4431","\t\t\t\tmatch[2] = (test[1] + (test[2] || 1)) - 0;","4432","\t\t\t\tmatch[3] = test[3] - 0;","4433","\t\t\t}","4434","","4435","\t\t\tmatch[0] = done++;","4436","","4437","\t\t\treturn match;","4438","\t\t},","4439","\t\tATTR: function(match, curLoop, inplace, result, not, isXML){","4440","\t\t\tvar name = match[1].replace(\/\\\\\/g, \"\");","4441","","4442","\t\t\tif ( !isXML && Expr.attrMap[name] ) {","4443","\t\t\t\tmatch[1] = Expr.attrMap[name];","4444","\t\t\t}","4445","","4446","\t\t\tif ( match[2] === \"~=\" ) {","4447","\t\t\t\tmatch[4] = \" \" + match[4] + \" \";","4448","\t\t\t}","4449","","4450","\t\t\treturn match;","4451","\t\t},","4452","\t\tPSEUDO: function(match, curLoop, inplace, result, not){","4453","\t\t\tif ( match[1] === \"not\" ) {","4454","\t\t\t\tif ( ( chunker.exec(match[3]) || \"\" ).length > 1 || \/^\\w\/.test(match[3]) ) {","4455","\t\t\t\t\tmatch[3] = Sizzle(match[3], null, null, curLoop);","4456","\t\t\t\t} else {","4457","\t\t\t\t\tvar ret = Sizzle.filter(match[3], curLoop, inplace, true ^ not);","4458","\t\t\t\t\tif ( !inplace ) {","4459","\t\t\t\t\t\tresult.push.apply( result, ret );","4460","\t\t\t\t\t}","4461","\t\t\t\t\treturn false;","4462","\t\t\t\t}","4463","\t\t\t} else if ( Expr.match.POS.test( match[0] ) || Expr.match.CHILD.test( match[0] ) ) {","4464","\t\t\t\treturn true;","4465","\t\t\t}","4466","","4467","\t\t\treturn match;","4468","\t\t},","4469","\t\tPOS: function(match){","4470","\t\t\tmatch.unshift( true );","4471","\t\t\treturn match;","4472","\t\t}","4473","\t},","4474","\tfilters: {","4475","\t\tenabled: function(elem){","4476","\t\t\treturn elem.disabled === false && elem.type !== \"hidden\";","4477","\t\t},","4478","\t\tdisabled: function(elem){","4479","\t\t\treturn elem.disabled === true;","4480","\t\t},","4481","\t\tchecked: function(elem){","4482","\t\t\treturn elem.checked === true;","4483","\t\t},","4484","\t\tselected: function(elem){","4485","\t\t\telem.parentNode.selectedIndex;","4486","\t\t\treturn elem.selected === true;","4487","\t\t},","4488","\t\tparent: function(elem){","4489","\t\t\treturn !!elem.firstChild;","4490","\t\t},","4491","\t\tempty: function(elem){","4492","\t\t\treturn !elem.firstChild;","4493","\t\t},","4494","\t\thas: function(elem, i, match){","4495","\t\t\treturn !!Sizzle( match[3], elem ).length;","4496","\t\t},","4497","\t\theader: function(elem){","4498","\t\t\treturn \/h\\d\/i.test( elem.nodeName );","4499","\t\t},","4500","\t\ttext: function(elem){","4501","\t\t\treturn \"text\" === elem.type;","4502","\t\t},","4503","\t\tradio: function(elem){","4504","\t\t\treturn \"radio\" === elem.type;","4505","\t\t},","4506","\t\tcheckbox: function(elem){","4507","\t\t\treturn \"checkbox\" === elem.type;","4508","\t\t},","4509","\t\tfile: function(elem){","4510","\t\t\treturn \"file\" === elem.type;","4511","\t\t},","4512","\t\tpassword: function(elem){","4513","\t\t\treturn \"password\" === elem.type;","4514","\t\t},","4515","\t\tsubmit: function(elem){","4516","\t\t\treturn \"submit\" === elem.type;","4517","\t\t},","4518","\t\timage: function(elem){","4519","\t\t\treturn \"image\" === elem.type;","4520","\t\t},","4521","\t\treset: function(elem){","4522","\t\t\treturn \"reset\" === elem.type;","4523","\t\t},","4524","\t\tbutton: function(elem){","4525","\t\t\treturn \"button\" === elem.type || elem.nodeName.toUpperCase() === \"BUTTON\";","4526","\t\t},","4527","\t\tinput: function(elem){","4528","\t\t\treturn \/input|select|textarea|button\/i.test(elem.nodeName);","4529","\t\t}","4530","\t},","4531","\tsetFilters: {","4532","\t\tfirst: function(elem, i){","4533","\t\t\treturn i === 0;","4534","\t\t},","4535","\t\tlast: function(elem, i, match, array){","4536","\t\t\treturn i === array.length - 1;","4537","\t\t},","4538","\t\teven: function(elem, i){","4539","\t\t\treturn i % 2 === 0;","4540","\t\t},","4541","\t\todd: function(elem, i){","4542","\t\t\treturn i % 2 === 1;","4543","\t\t},","4544","\t\tlt: function(elem, i, match){","4545","\t\t\treturn i < match[3] - 0;","4546","\t\t},","4547","\t\tgt: function(elem, i, match){","4548","\t\t\treturn i > match[3] - 0;","4549","\t\t},","4550","\t\tnth: function(elem, i, match){","4551","\t\t\treturn match[3] - 0 == i;","4552","\t\t},","4553","\t\teq: function(elem, i, match){","4554","\t\t\treturn match[3] - 0 == i;","4555","\t\t}","4556","\t},","4557","\tfilter: {","4558","\t\tPSEUDO: function(elem, match, i, array){","4559","\t\t\tvar name = match[1], filter = Expr.filters[ name ];","4560","","4561","\t\t\tif ( filter ) {","4562","\t\t\t\treturn filter( elem, i, match, array );","4563","\t\t\t} else if ( name === \"contains\" ) {","4564","\t\t\t\treturn (elem.textContent || elem.innerText || \"\").indexOf(match[3]) >= 0;","4565","\t\t\t} else if ( name === \"not\" ) {","4566","\t\t\t\tvar not = match[3];","4567","","4568","\t\t\t\tfor ( var i = 0, l = not.length; i < l; i++ ) {","4569","\t\t\t\t\tif ( not[i] === elem ) {","4570","\t\t\t\t\t\treturn false;","4571","\t\t\t\t\t}","4572","\t\t\t\t}","4573","","4574","\t\t\t\treturn true;","4575","\t\t\t}","4576","\t\t},","4577","\t\tCHILD: function(elem, match){","4578","\t\t\tvar type = match[1], node = elem;","4579","\t\t\tswitch (type) {","4580","\t\t\t\tcase 'only':","4581","\t\t\t\tcase 'first':","4582","\t\t\t\t\twhile ( (node = node.previousSibling) )  {","4583","\t\t\t\t\t\tif ( node.nodeType === 1 ) return false;","4584","\t\t\t\t\t}","4585","\t\t\t\t\tif ( type == 'first') return true;","4586","\t\t\t\t\tnode = elem;","4587","\t\t\t\tcase 'last':","4588","\t\t\t\t\twhile ( (node = node.nextSibling) )  {","4589","\t\t\t\t\t\tif ( node.nodeType === 1 ) return false;","4590","\t\t\t\t\t}","4591","\t\t\t\t\treturn true;","4592","\t\t\t\tcase 'nth':","4593","\t\t\t\t\tvar first = match[2], last = match[3];","4594","","4595","\t\t\t\t\tif ( first == 1 && last == 0 ) {","4596","\t\t\t\t\t\treturn true;","4597","\t\t\t\t\t}","4598","","4599","\t\t\t\t\tvar doneName = match[0],","4600","\t\t\t\t\t\tparent = elem.parentNode;","4601","","4602","\t\t\t\t\tif ( parent && (parent.sizcache !== doneName || !elem.nodeIndex) ) {","4603","\t\t\t\t\t\tvar count = 0;","4604","\t\t\t\t\t\tfor ( node = parent.firstChild; node; node = node.nextSibling ) {","4605","\t\t\t\t\t\t\tif ( node.nodeType === 1 ) {","4606","\t\t\t\t\t\t\t\tnode.nodeIndex = ++count;","4607","\t\t\t\t\t\t\t}","4608","\t\t\t\t\t\t}","4609","\t\t\t\t\t\tparent.sizcache = doneName;","4610","\t\t\t\t\t}","4611","","4612","\t\t\t\t\tvar diff = elem.nodeIndex - last;","4613","\t\t\t\t\tif ( first == 0 ) {","4614","\t\t\t\t\t\treturn diff == 0;","4615","\t\t\t\t\t} else {","4616","\t\t\t\t\t\treturn ( diff % first == 0 && diff \/ first >= 0 );","4617","\t\t\t\t\t}","4618","\t\t\t}","4619","\t\t},","4620","\t\tID: function(elem, match){","4621","\t\t\treturn elem.nodeType === 1 && elem.getAttribute(\"id\") === match;","4622","\t\t},","4623","\t\tTAG: function(elem, match){","4624","\t\t\treturn (match === \"*\" && elem.nodeType === 1) || elem.nodeName === match;","4625","\t\t},","4626","\t\tCLASS: function(elem, match){","4627","\t\t\treturn (\" \" + (elem.className || elem.getAttribute(\"class\")) + \" \")","4628","\t\t\t\t.indexOf( match ) > -1;","4629","\t\t},","4630","\t\tATTR: function(elem, match){","4631","\t\t\tvar name = match[1],","4632","\t\t\t\tresult = Expr.attrHandle[ name ] ?","4633","\t\t\t\t\tExpr.attrHandle[ name ]( elem ) :","4634","\t\t\t\t\telem[ name ] != null ?","4635","\t\t\t\t\t\telem[ name ] :","4636","\t\t\t\t\t\telem.getAttribute( name ),","4637","\t\t\t\tvalue = result + \"\",","4638","\t\t\t\ttype = match[2],","4639","\t\t\t\tcheck = match[4];","4640","","4641","\t\t\treturn result == null ?","4642","\t\t\t\ttype === \"!=\" :","4643","\t\t\t\ttype === \"=\" ?","4644","\t\t\t\tvalue === check :","4645","\t\t\t\ttype === \"*=\" ?","4646","\t\t\t\tvalue.indexOf(check) >= 0 :","4647","\t\t\t\ttype === \"~=\" ?","4648","\t\t\t\t(\" \" + value + \" \").indexOf(check) >= 0 :","4649","\t\t\t\t!check ?","4650","\t\t\t\tvalue && result !== false :","4651","\t\t\t\ttype === \"!=\" ?","4652","\t\t\t\tvalue != check :","4653","\t\t\t\ttype === \"^=\" ?","4654","\t\t\t\tvalue.indexOf(check) === 0 :","4655","\t\t\t\ttype === \"$=\" ?","4656","\t\t\t\tvalue.substr(value.length - check.length) === check :","4657","\t\t\t\ttype === \"|=\" ?","4658","\t\t\t\tvalue === check || value.substr(0, check.length + 1) === check + \"-\" :","4659","\t\t\t\tfalse;","4660","\t\t},","4661","\t\tPOS: function(elem, match, i, array){","4662","\t\t\tvar name = match[2], filter = Expr.setFilters[ name ];","4663","","4664","\t\t\tif ( filter ) {","4665","\t\t\t\treturn filter( elem, i, match, array );","4666","\t\t\t}","4667","\t\t}","4668","\t}","4669","};","4670","","4671","var origPOS = Expr.match.POS;","4672","","4673","for ( var type in Expr.match ) {","4674","\tExpr.match[ type ] = new RegExp( Expr.match[ type ].source + \/(?![^\\[]*\\])(?![^\\(]*\\))\/.source );","4675","\tExpr.leftMatch[ type ] = new RegExp( \/(^(?:.|\\r|\\n)*?)\/.source + Expr.match[ type ].source );","4676","}","4677","","4678","var makeArray = function(array, results) {","4679","\tarray = Array.prototype.slice.call( array, 0 );","4680","","4681","\tif ( results ) {","4682","\t\tresults.push.apply( results, array );","4683","\t\treturn results;","4684","\t}","4685","","4686","\treturn array;","4687","};","4688","","4689","try {","4690","\tArray.prototype.slice.call( document.documentElement.childNodes, 0 );","4691","","4692","} catch(e){","4693","\tmakeArray = function(array, results) {","4694","\t\tvar ret = results || [];","4695","","4696","\t\tif ( toString.call(array) === \"[object Array]\" ) {","4697","\t\t\tArray.prototype.push.apply( ret, array );","4698","\t\t} else {","4699","\t\t\tif ( typeof array.length === \"number\" ) {","4700","\t\t\t\tfor ( var i = 0, l = array.length; i < l; i++ ) {","4701","\t\t\t\t\tret.push( array[i] );","4702","\t\t\t\t}","4703","\t\t\t} else {","4704","\t\t\t\tfor ( var i = 0; array[i]; i++ ) {","4705","\t\t\t\t\tret.push( array[i] );","4706","\t\t\t\t}","4707","\t\t\t}","4708","\t\t}","4709","","4710","\t\treturn ret;","4711","\t};","4712","}","4713","","4714","var sortOrder;","4715","","4716","if ( document.documentElement.compareDocumentPosition ) {","4717","\tsortOrder = function( a, b ) {","4718","\t\tif ( !a.compareDocumentPosition || !b.compareDocumentPosition ) {","4719","\t\t\tif ( a == b ) {","4720","\t\t\t\thasDuplicate = true;","4721","\t\t\t}","4722","\t\t\treturn 0;","4723","\t\t}","4724","","4725","\t\tvar ret = a.compareDocumentPosition(b) & 4 ? -1 : a === b ? 0 : 1;","4726","\t\tif ( ret === 0 ) {","4727","\t\t\thasDuplicate = true;","4728","\t\t}","4729","\t\treturn ret;","4730","\t};","4731","} else if ( \"sourceIndex\" in document.documentElement ) {","4732","\tsortOrder = function( a, b ) {","4733","\t\tif ( !a.sourceIndex || !b.sourceIndex ) {","4734","\t\t\tif ( a == b ) {","4735","\t\t\t\thasDuplicate = true;","4736","\t\t\t}","4737","\t\t\treturn 0;","4738","\t\t}","4739","","4740","\t\tvar ret = a.sourceIndex - b.sourceIndex;","4741","\t\tif ( ret === 0 ) {","4742","\t\t\thasDuplicate = true;","4743","\t\t}","4744","\t\treturn ret;","4745","\t};","4746","} else if ( document.createRange ) {","4747","\tsortOrder = function( a, b ) {","4748","\t\tif ( !a.ownerDocument || !b.ownerDocument ) {","4749","\t\t\tif ( a == b ) {","4750","\t\t\t\thasDuplicate = true;","4751","\t\t\t}","4752","\t\t\treturn 0;","4753","\t\t}","4754","","4755","\t\tvar aRange = a.ownerDocument.createRange(), bRange = b.ownerDocument.createRange();","4756","\t\taRange.setStart(a, 0);","4757","\t\taRange.setEnd(a, 0);","4758","\t\tbRange.setStart(b, 0);","4759","\t\tbRange.setEnd(b, 0);","4760","\t\tvar ret = aRange.compareBoundaryPoints(Range.START_TO_END, bRange);","4761","\t\tif ( ret === 0 ) {","4762","\t\t\thasDuplicate = true;","4763","\t\t}","4764","\t\treturn ret;","4765","\t};","4766","}","4767","","4768","(function(){","4769","\tvar form = document.createElement(\"div\"),","4770","\t\tid = \"script\" + (new Date).getTime();","4771","\tform.innerHTML = \"<a name='\" + id + \"'\/>\";","4772","","4773","\tvar root = document.documentElement;","4774","\troot.insertBefore( form, root.firstChild );","4775","","4776","\tif ( !!document.getElementById( id ) ) {","4777","\t\tExpr.find.ID = function(match, context, isXML){","4778","\t\t\tif ( typeof context.getElementById !== \"undefined\" && !isXML ) {","4779","\t\t\t\tvar m = context.getElementById(match[1]);","4780","\t\t\t\treturn m ? m.id === match[1] || typeof m.getAttributeNode !== \"undefined\" && m.getAttributeNode(\"id\").nodeValue === match[1] ? [m] : undefined : [];","4781","\t\t\t}","4782","\t\t};","4783","","4784","\t\tExpr.filter.ID = function(elem, match){","4785","\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" && elem.getAttributeNode(\"id\");","4786","\t\t\treturn elem.nodeType === 1 && node && node.nodeValue === match;","4787","\t\t};","4788","\t}","4789","","4790","\troot.removeChild( form );","4791","\troot = form = null; \/\/ release memory in IE","4792","})();","4793","","4794","(function(){","4795","","4796","\tvar div = document.createElement(\"div\");","4797","\tdiv.appendChild( document.createComment(\"\") );","4798","","4799","\tif ( div.getElementsByTagName(\"*\").length > 0 ) {","4800","\t\tExpr.find.TAG = function(match, context){","4801","\t\t\tvar results = context.getElementsByTagName(match[1]);","4802","","4803","\t\t\tif ( match[1] === \"*\" ) {","4804","\t\t\t\tvar tmp = [];","4805","","4806","\t\t\t\tfor ( var i = 0; results[i]; i++ ) {","4807","\t\t\t\t\tif ( results[i].nodeType === 1 ) {","4808","\t\t\t\t\t\ttmp.push( results[i] );","4809","\t\t\t\t\t}","4810","\t\t\t\t}","4811","","4812","\t\t\t\tresults = tmp;","4813","\t\t\t}","4814","","4815","\t\t\treturn results;","4816","\t\t};","4817","\t}","4818","","4819","\tdiv.innerHTML = \"<a href='#'><\/a>\";","4820","\tif ( div.firstChild && typeof div.firstChild.getAttribute !== \"undefined\" &&","4821","\t\t\tdiv.firstChild.getAttribute(\"href\") !== \"#\" ) {","4822","\t\tExpr.attrHandle.href = function(elem){","4823","\t\t\treturn elem.getAttribute(\"href\", 2);","4824","\t\t};","4825","\t}","4826","","4827","\tdiv = null; \/\/ release memory in IE","4828","})();","4829","","4830","if ( document.querySelectorAll ) (function(){","4831","\tvar oldSizzle = Sizzle, div = document.createElement(\"div\");","4832","\tdiv.innerHTML = \"<p class='TEST'><\/p>\";","4833","","4834","\tif ( div.querySelectorAll && div.querySelectorAll(\".TEST\").length === 0 ) {","4835","\t\treturn;","4836","\t}","4837","","4838","\tSizzle = function(query, context, extra, seed){","4839","\t\tcontext = context || document;","4840","","4841","\t\tif ( !seed && context.nodeType === 9 && !isXML(context) ) {","4842","\t\t\ttry {","4843","\t\t\t\treturn makeArray( context.querySelectorAll(query), extra );","4844","\t\t\t} catch(e){}","4845","\t\t}","4846","","4847","\t\treturn oldSizzle(query, context, extra, seed);","4848","\t};","4849","","4850","\tfor ( var prop in oldSizzle ) {","4851","\t\tSizzle[ prop ] = oldSizzle[ prop ];","4852","\t}","4853","","4854","\tdiv = null; \/\/ release memory in IE","4855","})();","4856","","4857","if ( document.getElementsByClassName && document.documentElement.getElementsByClassName ) (function(){","4858","\tvar div = document.createElement(\"div\");","4859","\tdiv.innerHTML = \"<div class='test e'><\/div><div class='test'><\/div>\";","4860","","4861","\tif ( div.getElementsByClassName(\"e\").length === 0 )","4862","\t\treturn;","4863","","4864","\tdiv.lastChild.className = \"e\";","4865","","4866","\tif ( div.getElementsByClassName(\"e\").length === 1 )","4867","\t\treturn;","4868","","4869","\tExpr.order.splice(1, 0, \"CLASS\");","4870","\tExpr.find.CLASS = function(match, context, isXML) {","4871","\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && !isXML ) {","4872","\t\t\treturn context.getElementsByClassName(match[1]);","4873","\t\t}","4874","\t};","4875","","4876","\tdiv = null; \/\/ release memory in IE","4877","})();","4878","","4879","function dirNodeCheck( dir, cur, doneName, checkSet, nodeCheck, isXML ) {","4880","\tvar sibDir = dir == \"previousSibling\" && !isXML;","4881","\tfor ( var i = 0, l = checkSet.length; i < l; i++ ) {","4882","\t\tvar elem = checkSet[i];","4883","\t\tif ( elem ) {","4884","\t\t\tif ( sibDir && elem.nodeType === 1 ){","4885","\t\t\t\telem.sizcache = doneName;","4886","\t\t\t\telem.sizset = i;","4887","\t\t\t}","4888","\t\t\telem = elem[dir];","4889","\t\t\tvar match = false;","4890","","4891","\t\t\twhile ( elem ) {","4892","\t\t\t\tif ( elem.sizcache === doneName ) {","4893","\t\t\t\t\tmatch = checkSet[elem.sizset];","4894","\t\t\t\t\tbreak;","4895","\t\t\t\t}","4896","","4897","\t\t\t\tif ( elem.nodeType === 1 && !isXML ){","4898","\t\t\t\t\telem.sizcache = doneName;","4899","\t\t\t\t\telem.sizset = i;","4900","\t\t\t\t}","4901","","4902","\t\t\t\tif ( elem.nodeName === cur ) {","4903","\t\t\t\t\tmatch = elem;","4904","\t\t\t\t\tbreak;","4905","\t\t\t\t}","4906","","4907","\t\t\t\telem = elem[dir];","4908","\t\t\t}","4909","","4910","\t\t\tcheckSet[i] = match;","4911","\t\t}","4912","\t}","4913","}","4914","","4915","function dirCheck( dir, cur, doneName, checkSet, nodeCheck, isXML ) {","4916","\tvar sibDir = dir == \"previousSibling\" && !isXML;","4917","\tfor ( var i = 0, l = checkSet.length; i < l; i++ ) {","4918","\t\tvar elem = checkSet[i];","4919","\t\tif ( elem ) {","4920","\t\t\tif ( sibDir && elem.nodeType === 1 ) {","4921","\t\t\t\telem.sizcache = doneName;","4922","\t\t\t\telem.sizset = i;","4923","\t\t\t}","4924","\t\t\telem = elem[dir];","4925","\t\t\tvar match = false;","4926","","4927","\t\t\twhile ( elem ) {","4928","\t\t\t\tif ( elem.sizcache === doneName ) {","4929","\t\t\t\t\tmatch = checkSet[elem.sizset];","4930","\t\t\t\t\tbreak;","4931","\t\t\t\t}","4932","","4933","\t\t\t\tif ( elem.nodeType === 1 ) {","4934","\t\t\t\t\tif ( !isXML ) {","4935","\t\t\t\t\t\telem.sizcache = doneName;","4936","\t\t\t\t\t\telem.sizset = i;","4937","\t\t\t\t\t}","4938","\t\t\t\t\tif ( typeof cur !== \"string\" ) {","4939","\t\t\t\t\t\tif ( elem === cur ) {","4940","\t\t\t\t\t\t\tmatch = true;","4941","\t\t\t\t\t\t\tbreak;","4942","\t\t\t\t\t\t}","4943","","4944","\t\t\t\t\t} else if ( Sizzle.filter( cur, [elem] ).length > 0 ) {","4945","\t\t\t\t\t\tmatch = elem;","4946","\t\t\t\t\t\tbreak;","4947","\t\t\t\t\t}","4948","\t\t\t\t}","4949","","4950","\t\t\t\telem = elem[dir];","4951","\t\t\t}","4952","","4953","\t\t\tcheckSet[i] = match;","4954","\t\t}","4955","\t}","4956","}","4957","","4958","var contains = document.compareDocumentPosition ?  function(a, b){","4959","\treturn a.compareDocumentPosition(b) & 16;","4960","} : function(a, b){","4961","\treturn a !== b && (a.contains ? a.contains(b) : true);","4962","};","4963","","4964","var isXML = function(elem){","4965","\treturn elem.nodeType === 9 && elem.documentElement.nodeName !== \"HTML\" ||","4966","\t\t!!elem.ownerDocument && elem.ownerDocument.documentElement.nodeName !== \"HTML\";","4967","};","4968","","4969","var posProcess = function(selector, context){","4970","\tvar tmpSet = [], later = \"\", match,","4971","\t\troot = context.nodeType ? [context] : context;","4972","","4973","\twhile ( (match = Expr.match.PSEUDO.exec( selector )) ) {","4974","\t\tlater += match[0];","4975","\t\tselector = selector.replace( Expr.match.PSEUDO, \"\" );","4976","\t}","4977","","4978","\tselector = Expr.relative[selector] ? selector + \"*\" : selector;","4979","","4980","\tfor ( var i = 0, l = root.length; i < l; i++ ) {","4981","\t\tSizzle( selector, root[i], tmpSet );","4982","\t}","4983","","4984","\treturn Sizzle.filter( later, tmpSet );","4988","window.Sizzle = Sizzle;","5028","          result[key].push(value);","5034","      accumulator = function(result, key, value) {","5035","        return result + (result ? '&' : '') + encodeURIComponent(key) + '=' + encodeURIComponent(value);","5036","      }","5058","    var elements = $(form).getElementsByTagName('*'),","5059","        element,","5060","        arr = [ ],","5061","        serializers = Form.Element.Serializers;","5063","      arr.push(element);","5065","    return arr.inject([], function(elements, child) {","5066","      if (serializers[child.tagName.toLowerCase()])","5067","        elements.push(Element.extend(child));","5068","      return elements;","5069","    })","5388","(function() {","5404","    KEY_INSERT:   45,","5405","","5406","    cache: {}","5409","  var docEl = document.documentElement;","5410","  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl","5411","    && 'onmouseleave' in docEl;","5412","","5413","","5481","    if (node.nodeType == Node.TEXT_NODE)","5482","      node = node.parentNode;","5483","","5484","    return Element.extend(node);","5488","    var element = Event.element(event);","5489","","5490","    if (!expression) return element;","5492","      if (Object.isElement(element) && Prototype.Selector.match(element, expression)) {","5494","      }","5606","  function _createResponder(element, eventName, handler) {","5607","    var registry = Element.retrieve(element, 'prototype_event_registry');","5609","    if (Object.isUndefined(registry)) {","5610","      CACHE.push(element);","5611","      registry = Element.retrieve(element, 'prototype_event_registry', $H());","5612","    }","5614","    var respondersForEvent = registry.get(eventName);","5615","    if (Object.isUndefined(respondersForEvent)) {","5616","      respondersForEvent = [];","5617","      registry.set(eventName, respondersForEvent);","5618","    }","5620","    if (respondersForEvent.pluck('handler').include(handler)) return false;","5622","    var responder;","5623","    if (eventName.include(\":\")) {","5624","      responder = function(event) {","5625","        if (Object.isUndefined(event.eventName))","5626","          return false;","5628","        if (event.eventName !== eventName)","5629","          return false;","5631","        Event.extend(event, element);","5632","        handler.call(element, event);","5633","      };","5634","    } else {","5635","      if (!MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED &&","5636","       (eventName === \"mouseenter\" || eventName === \"mouseleave\")) {","5637","        if (eventName === \"mouseenter\" || eventName === \"mouseleave\") {","5638","          responder = function(event) {","5639","            Event.extend(event, element);","5641","            var parent = event.relatedTarget;","5642","            while (parent && parent !== element) {","5643","              try { parent = parent.parentNode; }","5644","              catch(e) { parent = element; }","5645","            }","5647","            if (parent === element) return;","5649","            handler.call(element, event);","5650","          };","5651","        }","5652","      } else {","5653","        responder = function(event) {","5654","          Event.extend(event, element);","5655","          handler.call(element, event);","5656","        };","5660","    responder.handler = handler;","5661","    respondersForEvent.push(responder);","5662","    return responder;","5665","  function _destroyCache() {","5666","    for (var i = 0, length = CACHE.length; i < length; i++) {","5667","      Event.stopObserving(CACHE[i]);","5668","      CACHE[i] = null;","5669","    }","5670","  }","5671","","5672","  var CACHE = [];","5673","","5674","  if (Prototype.Browser.IE)","5675","    window.attachEvent('onunload', _destroyCache);","5676","","5677","  if (Prototype.Browser.WebKit)","5678","    window.addEventListener('unload', Prototype.emptyFunction, false);","5679","","5680","","5681","  var _getDOMEventName = Prototype.K,","5682","      translations = { mouseenter: \"mouseover\", mouseleave: \"mouseout\" };","5683","","5684","  if (!MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED) {","5685","    _getDOMEventName = function(eventName) {","5686","      return (translations[eventName] || eventName);","5687","    };","5688","  }","5693","    var responder = _createResponder(element, eventName, handler);","5695","    if (!responder) return element;","5696","","5697","    if (eventName.include(':')) {","5698","      if (element.addEventListener)","5699","        element.addEventListener(\"dataavailable\", responder, false);","5700","      else {","5701","        element.attachEvent(\"ondataavailable\", responder);","5702","        element.attachEvent(\"onlosecapture\", responder);","5703","      }","5704","    } else {","5705","      var actualEventName = _getDOMEventName(eventName);","5706","","5707","      if (element.addEventListener)","5708","        element.addEventListener(actualEventName, responder, false);","5709","      else","5710","        element.attachEvent(\"on\" + actualEventName, responder);","5711","    }","5719","    var registry = Element.retrieve(element, 'prototype_event_registry');","5720","    if (!registry) return element;","5721","","5722","    if (!eventName) {","5723","      registry.each( function(pair) {","5724","        var eventName = pair.key;","5725","        stopObserving(element, eventName);","5726","      });","5730","    var responders = registry.get(eventName);","5731","    if (!responders) return element;","5732","","5733","    if (!handler) {","5734","      responders.each(function(r) {","5735","        stopObserving(element, eventName, r.handler);","5736","      });","5740","    var i = responders.length, responder;","5741","    while (i--) {","5742","      if (responders[i].handler === handler) {","5743","        responder = responders[i];","5744","        break;","5745","      }","5746","    }","5747","    if (!responder) return element;","5749","    if (eventName.include(':')) {","5750","      if (element.removeEventListener)","5751","        element.removeEventListener(\"dataavailable\", responder, false);","5752","      else {","5753","        element.detachEvent(\"ondataavailable\", responder);","5754","        element.detachEvent(\"onlosecapture\", responder);","5755","      }","5757","      var actualEventName = _getDOMEventName(eventName);","5758","      if (element.removeEventListener)","5759","        element.removeEventListener(actualEventName, responder, false);","5760","      else","5761","        element.detachEvent('on' + actualEventName, responder);","5764","    registry.set(eventName, responders.without(responder));","5770","    element = $(element);","5772","    if (Object.isUndefined(bubble))","5773","      bubble = true;","5774","","5775","    if (element == document && document.createEvent && !element.dispatchEvent)","5776","      element = document.documentElement;","5777","","5778","    var event;","5779","    if (document.createEvent) {","5780","      event = document.createEvent('HTMLEvents');","5781","      event.initEvent('dataavailable', bubble, true);","5782","    } else {","5783","      event = document.createEventObject();","5784","      event.eventType = bubble ? 'ondataavailable' : 'onlosecapture';","5785","    }","5786","","5787","    event.eventName = eventName;","5788","    event.memo = memo || { };","5789","","5790","    if (document.createEvent)","5791","      element.dispatchEvent(event);","5792","    else","5793","      element.fireEvent(event.eventType, event);","5794","","5863","  if (window.Event) Object.extend(window.Event, Event);","5864","  else window.Event = Event;","5865","})();","5867","(function() {","5871","  var timer;","5875","    if (timer) window.clearTimeout(timer);","5882","      document.stopObserving('readystatechange', checkReadyState);","5888","    try { document.documentElement.doScroll('left'); }","5889","    catch(e) {","5890","      timer = pollDoScroll.defer();","5899","    document.observe('readystatechange', checkReadyState);","5900","    if (window == top)","5901","      timer = pollDoScroll.defer();","5905","})();","5908","","5915","Element.Methods.childOf = Element.Methods.descendantOf;","6057","  _each: function(iterator) {","6060","    })._each(iterator);"],"delete":["0","\/*  Prototype JavaScript framework, version 1.7.3","10","  Version: '1.7.3',","51","  ScriptFragment: '<script[^>]*>([\\\\S\\\\s]*?)<\\\/script\\\\s*>',","122","        value.valueOf = (function(method) {","123","          return function() { return method.valueOf.call(method); };","124","        })(method);","125","","126","        value.toString = (function(method) {","127","          return function() { return method.toString.call(method); };","128","        })(method);","146","      _hasOwnProperty = Object.prototype.hasOwnProperty,","164","","165","","166","  var DONT_ENUMS = ['toString', 'toLocaleString', 'valueOf',","167","   'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'];","168","","169","  var IS_DONTENUM_BUGGY = (function(){","170","    for (var p in { toString: 1 }) {","171","      if (p === 'toString') return false;","172","    }","173","    return true;","174","  })();","175","","212","    var value = holder[key];","232","    var type = typeof value;","241","          if (stack[i] === value) {","242","            throw new TypeError(\"Cyclic reference to '\" + value + \"' in object\");","243","          }","285","      if (_hasOwnProperty.call(object, property))","287","    }","288","","289","    if (IS_DONTENUM_BUGGY) {","290","      for (var i = 0; property = DONT_ENUMS[i]; i++) {","291","        if (_hasOwnProperty.call(object, property))","292","          results.push(property);","295","","412","","414","    if (arguments.length < 2 && Object.isUndefined(arguments[0]))","415","      return this;","416","","417","    if (!Object.isFunction(this))","418","      throw new TypeError(\"The object is not callable.\");","419","","420","    var nop = function() {};","422","","423","    var bound = function() {","425","      var c = this instanceof bound ? this : context;","426","      return __method.apply(c, a);","427","    };","428","","429","    nop.prototype   = this.prototype;","430","    bound.prototype = new nop();","431","","432","    return bound;","482","  var extensions = {","490","  };","491","","492","  if (!Function.prototype.bind)","493","    extensions.bind = bind;","494","","495","  return extensions;","589","  function isNonEmptyRegExp(regexp) {","590","    return regexp.source && regexp.source !== '(?:)';","591","  }","592","","593","","601","    if (!(pattern.length || isNonEmptyRegExp(pattern))) {","607","      match = source.match(pattern)","608","      if (match && match[0].length > 0) {","646","    return this.replace(\/<\\w+(\\s+(\"[^\"]*\"|'[^']*'|[^>])+)?(\\\/)?>|<\\\/\\w+>\/gi, '');","662","    return this.extractScripts().map(function(script) { return eval(script); });","683","        if (value != undefined) {","684","          value = value.gsub('+', ' ');","685","          value = decodeURIComponent(value);","686","        }","763","        cx = \/[\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff\\u0000]\/g;","784","  function startsWith(pattern, position) {","785","    position = Object.isNumber(position) ? position : 0;","786","    return this.lastIndexOf(pattern, position) === position;","789","  function endsWith(pattern, position) {","790","    pattern = String(pattern);","791","    position = Object.isNumber(position) ? position : this.length;","792","    if (position < 0) position = 0;","793","    if (position > this.length) position = this.length;","794","    var d = position - pattern.length;","837","    startsWith:     String.prototype.startsWith || startsWith,","838","    endsWith:       String.prototype.endsWith || endsWith,","886","      this._each(iterator, context);","905","      result = result && !!iterator.call(context, value, index, this);","907","    }, this);","915","      if (result = !!iterator.call(context, value, index, this))","917","    }, this);","925","      results.push(iterator.call(context, value, index, this));","926","    }, this);","933","      if (iterator.call(context, value, index, this)) {","937","    }, this);","944","      if (iterator.call(context, value, index, this))","946","    }, this);","959","        results.push(iterator.call(context, value, index, this));","960","    }, this);","965","    if (Object.isFunction(this.indexOf) && this.indexOf(object) != -1)","966","      return true;","988","      memo = iterator.call(context, memo, value, index, this);","989","    }, this);","1004","      value = iterator.call(context, value, index, this);","1007","    }, this);","1015","      value = iterator.call(context, value, index, this);","1018","    }, this);","1026","      (iterator.call(context, value, index, this) ?","1028","    }, this);","1043","      if (!iterator.call(context, value, index, this))","1045","    }, this);","1053","        criteria: iterator.call(context, value, index, this)","1055","    }, this).sort(function(left, right) {","1205","      return array.indexOf(item) !== -1;","1232","    if (this == null) throw new TypeError();","1233","","1234","    var array = Object(this), length = array.length >>> 0;","1235","    if (length === 0) return -1;","1236","","1237","    i = Number(i);","1238","    if (isNaN(i)) {","1239","      i = 0;","1240","    } else if (i !== 0 && isFinite(i)) {","1241","      i = (i > 0 ? 1 : -1) * Math.floor(Math.abs(i));","1242","    }","1243","","1244","    if (i > length) return -1;","1245","","1246","    var k = i >= 0 ? i : Math.max(length - Math.abs(i), 0);","1247","    for (; k < length; k++)","1248","      if (k in array && array[k] === item) return k;","1252","","1254","    if (this == null) throw new TypeError();","1255","","1256","    var array = Object(this), length = array.length >>> 0;","1257","    if (length === 0) return -1;","1258","","1259","    if (!Object.isUndefined(i)) {","1260","      i = Number(i);","1261","      if (isNaN(i)) {","1262","        i = 0;","1263","      } else if (i !== 0 && isFinite(i)) {","1264","        i = (i > 0 ? 1 : -1) * Math.floor(Math.abs(i));","1265","      }","1266","    } else {","1267","      i = length;","1268","    }","1269","","1270","    var k = i >= 0 ? Math.min(i, length - 1) :","1271","     length - Math.abs(i);","1272","","1273","    for (; k >= 0; k--)","1274","      if (k in array && array[k] === item) return k;","1275","    return -1;","1278","  function concat(_) {","1279","    var array = [], items = slice.call(arguments, 0), item, n = 0;","1280","    items.unshift(this);","1281","    for (var i = 0, length = items.length; i < length; i++) {","1282","      item = items[i];","1284","        for (var j = 0, arrayLength = item.length; j < arrayLength; j++) {","1285","          if (j in item) array[n] = item[j];","1286","          n++;","1287","        }","1289","        array[n++] = item;","1292","    array.length = n;","1296","","1297","  function wrapNative(method) {","1298","    return function() {","1299","      if (arguments.length === 0) {","1300","        return method.call(this, Prototype.K);","1301","      } else if (arguments[0] === undefined) {","1302","        var args = slice.call(arguments, 1);","1303","        args.unshift(Prototype.K);","1304","        return method.apply(this, args);","1305","      } else {","1306","        return method.apply(this, arguments);","1307","      }","1308","    };","1309","  }","1310","","1311","","1312","  function map(iterator) {","1313","    if (this == null) throw new TypeError();","1314","    iterator = iterator || Prototype.K;","1315","","1316","    var object = Object(this);","1317","    var results = [], context = arguments[1], n = 0;","1318","","1319","    for (var i = 0, length = object.length >>> 0; i < length; i++) {","1320","      if (i in object) {","1321","        results[n] = iterator.call(context, object[i], i, object);","1322","      }","1323","      n++;","1324","    }","1325","    results.length = n;","1326","    return results;","1327","  }","1328","","1329","  if (arrayProto.map) {","1330","    map = wrapNative(Array.prototype.map);","1331","  }","1332","","1333","  function filter(iterator) {","1334","    if (this == null || !Object.isFunction(iterator))","1335","      throw new TypeError();","1336","","1337","    var object = Object(this);","1338","    var results = [], context = arguments[1], value;","1339","","1340","    for (var i = 0, length = object.length >>> 0; i < length; i++) {","1341","      if (i in object) {","1342","        value = object[i];","1343","        if (iterator.call(context, value, i, object)) {","1344","          results.push(value);","1345","        }","1346","      }","1347","    }","1348","    return results;","1349","  }","1350","","1351","  if (arrayProto.filter) {","1352","    filter = Array.prototype.filter;","1353","  }","1354","","1355","  function some(iterator) {","1356","    if (this == null) throw new TypeError();","1357","    iterator = iterator || Prototype.K;","1358","    var context = arguments[1];","1359","","1360","    var object = Object(this);","1361","    for (var i = 0, length = object.length >>> 0; i < length; i++) {","1362","      if (i in object && iterator.call(context, object[i], i, object)) {","1363","        return true;","1364","      }","1365","    }","1366","","1367","    return false;","1368","  }","1369","","1370","  if (arrayProto.some) {","1371","    some = wrapNative(Array.prototype.some);","1372","  }","1373","","1374","  function every(iterator) {","1375","    if (this == null) throw new TypeError();","1376","    iterator = iterator || Prototype.K;","1377","    var context = arguments[1];","1378","","1379","    var object = Object(this);","1380","    for (var i = 0, length = object.length >>> 0; i < length; i++) {","1381","      if (i in object && !iterator.call(context, object[i], i, object)) {","1382","        return false;","1383","      }","1384","    }","1385","","1386","    return true;","1387","  }","1388","","1389","  if (arrayProto.every) {","1390","    every = wrapNative(Array.prototype.every);","1391","  }","1392","","1393","","1396","  if (arrayProto.entries === Enumerable.entries) {","1397","    delete arrayProto.entries;","1398","  }","1399","","1405","","1406","    map:       map,","1407","    collect:   map,","1408","    select:    filter,","1409","    filter:    filter,","1410","    findAll:   filter,","1411","    some:      some,","1412","    any:       some,","1413","    every:     every,","1414","    all:       every,","1415","","1434","  })(1,2);","1451","  function _each(iterator, context) {","1452","    var i = 0;","1457","      iterator.call(context, pair, i);","1458","      i++;","1511","","1512","    value = String.interpret(value);","1513","","1514","    value = value.gsub(\/(\\r)?\\n\/, '\\r\\n');","1515","    value = encodeURIComponent(value);","1516","    value = value.gsub(\/%20\/, '+');","1517","    return key + '=' + value;","1636","  function _each(iterator, context) {","1637","    var value = this.start, i;","1638","    for (i = 0; this.include(value); i++) {","1639","      iterator.call(context, value, i);","1661","var Abstract = { };","1662","","1663","","1664","var Try = {","1665","  these: function() {","1666","    var returnValue;","1667","","1668","    for (var i = 0, length = arguments.length; i < length; i++) {","1669","      var lambda = arguments[i];","1670","      try {","1671","        returnValue = lambda();","1672","        break;","1673","      } catch (e) { }","1674","    }","1675","","1676","    return returnValue;","1677","  }","1678","};","1679","","1695","  _each: function(iterator, context) {","1696","    this.responders._each(iterator, context);","1842","      if (headers[name] != null)","1843","        this.transport.setRequestHeader(name, headers[name]);","1980","","1981","    try {","1982","      json = decodeURIComponent(escape(json));","1983","    } catch(e) {","1984","    }","1985","","2086","(function(GLOBAL) {","2088","  var UNDEFINED;","2089","  var SLICE = Array.prototype.slice;","2090","","2091","  var DIV = document.createElement('div');","2092","","2093","","2094","  function $(element) {","2095","    if (arguments.length > 1) {","2096","      for (var i = 0, elements = [], length = arguments.length; i < length; i++)","2097","        elements.push($(arguments[i]));","2098","      return elements;","2099","    }","2100","","2101","    if (Object.isString(element))","2102","      element = document.getElementById(element);","2103","    return Element.extend(element);","2106","  GLOBAL.$ = $;","2109","  if (!GLOBAL.Node) GLOBAL.Node = {};","2111","  if (!GLOBAL.Node.ELEMENT_NODE) {","2112","    Object.extend(GLOBAL.Node, {","2113","      ELEMENT_NODE:                1,","2114","      ATTRIBUTE_NODE:              2,","2115","      TEXT_NODE:                   3,","2116","      CDATA_SECTION_NODE:          4,","2117","      ENTITY_REFERENCE_NODE:       5,","2118","      ENTITY_NODE:                 6,","2119","      PROCESSING_INSTRUCTION_NODE: 7,","2120","      COMMENT_NODE:                8,","2121","      DOCUMENT_NODE:               9,","2122","      DOCUMENT_TYPE_NODE:         10,","2123","      DOCUMENT_FRAGMENT_NODE:     11,","2124","      NOTATION_NODE:              12","2125","    });","2126","  }","2127","","2128","  var ELEMENT_CACHE = {};","2129","","2130","  function shouldUseCreationCache(tagName, attributes) {","2141","  var oldElement = GLOBAL.Element;","2142","  function Element(tagName, attributes) {","2143","    attributes = attributes || {};","2152","    if (!ELEMENT_CACHE[tagName])","2153","      ELEMENT_CACHE[tagName] = Element.extend(document.createElement(tagName));","2155","    var node = shouldUseCreationCache(tagName, attributes) ?","2156","     ELEMENT_CACHE[tagName].cloneNode(false) : document.createElement(tagName);","2161","  GLOBAL.Element = Element;","2163","  Object.extend(GLOBAL.Element, oldElement || {});","2164","  if (oldElement) GLOBAL.Element.prototype = oldElement.prototype;","2165","","2166","  Element.Methods = { ByTag: {}, Simulated: {} };","2167","","2168","  var methods = {};","2169","","2170","  var INSPECT_ATTRIBUTES = { id: 'id', className: 'class' };","2171","  function inspect(element) {","2173","    var result = '<' + element.tagName.toLowerCase();","2174","","2175","    var attribute, value;","2176","    for (var property in INSPECT_ATTRIBUTES) {","2177","      attribute = INSPECT_ATTRIBUTES[property];","2178","      value = (element[property] || '').toString();","2179","      if (value) result += ' ' + attribute + '=' + value.inspect(true);","2180","    }","2181","","2182","    return result + '>';","2183","  }","2184","","2185","  methods.inspect = inspect;","2186","","2187","","2188","  function visible(element) {","2189","    return $(element).getStyle('display') !== 'none';","2190","  }","2191","","2192","  function toggle(element, bool) {","2193","    element = $(element);","2194","    if (typeof bool !== 'boolean')","2195","      bool = !Element.visible(element);","2196","    Element[bool ? 'show' : 'hide'](element);","2197","","2199","  }","2201","  function hide(element) {","2205","  }","2207","  function show(element) {","2211","  }","2213","","2214","  Object.extend(methods, {","2215","    visible: visible,","2216","    toggle:  toggle,","2217","    hide:    hide,","2218","    show:    show","2219","  });","2220","","2221","","2222","  function remove(element) {","2226","  }","2228","  var SELECT_ELEMENT_INNERHTML_BUGGY = (function(){","2229","    var el = document.createElement(\"select\"),","2230","        isBuggy = true;","2231","    el.innerHTML = \"<option value=\\\"test\\\">test<\/option>\";","2232","    if (el.options && el.options[0]) {","2233","      isBuggy = el.options[0].nodeName.toUpperCase() !== \"OPTION\";","2234","    }","2235","    el = null;","2236","    return isBuggy;","2237","  })();","2239","  var TABLE_ELEMENT_INNERHTML_BUGGY = (function(){","2240","    try {","2241","      var el = document.createElement(\"table\");","2242","      if (el && el.tBodies) {","2243","        el.innerHTML = \"<tbody><tr><td>test<\/td><\/tr><\/tbody>\";","2244","        var isBuggy = typeof el.tBodies[0] == \"undefined\";","2245","        el = null;","2246","        return isBuggy;","2248","    } catch (e) {","2249","      return true;","2250","    }","2251","  })();","2252","","2253","  var LINK_ELEMENT_INNERHTML_BUGGY = (function() {","2254","    try {","2255","      var el = document.createElement('div');","2256","      el.innerHTML = \"<link \/>\";","2257","      var isBuggy = (el.childNodes.length === 0);","2260","    } catch(e) {","2261","      return true;","2262","    }","2263","  })();","2265","  var ANY_INNERHTML_BUGGY = SELECT_ELEMENT_INNERHTML_BUGGY ||","2266","   TABLE_ELEMENT_INNERHTML_BUGGY || LINK_ELEMENT_INNERHTML_BUGGY;","2268","  var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING = (function () {","2269","    var s = document.createElement(\"script\"),","2270","        isBuggy = false;","2271","    try {","2272","      s.appendChild(document.createTextNode(\"\"));","2273","      isBuggy = !s.firstChild ||","2274","        s.firstChild && s.firstChild.nodeType !== 3;","2275","    } catch (e) {","2276","      isBuggy = true;","2277","    }","2278","    s = null;","2279","    return isBuggy;","2280","  })();","2282","  function update(element, content) {","2283","    element = $(element);","2285","    var descendants = element.getElementsByTagName('*'),","2286","     i = descendants.length;","2287","    while (i--) purgeElement(descendants[i]);","2288","","2289","    if (content && content.toElement)","2290","      content = content.toElement();","2291","","2292","    if (Object.isElement(content))","2293","      return element.update().insert(content);","2296","    content = Object.toHTML(content);","2297","    var tagName = element.tagName.toUpperCase();","2299","    if (tagName === 'SCRIPT' && SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING) {","2300","      element.text = content;","2304","    if (ANY_INNERHTML_BUGGY) {","2305","      if (tagName in INSERTION_TRANSLATIONS.tags) {","2306","        while (element.firstChild)","2307","          element.removeChild(element.firstChild);","2309","        var nodes = getContentFromAnonymousElement(tagName, content.stripScripts());","2310","        for (var i = 0, node; node = nodes[i]; i++)","2311","          element.appendChild(node);","2312","","2313","      } else if (LINK_ELEMENT_INNERHTML_BUGGY && Object.isString(content) && content.indexOf('<link') > -1) {","2314","        while (element.firstChild)","2315","          element.removeChild(element.firstChild);","2316","","2317","        var nodes = getContentFromAnonymousElement(tagName,","2318","         content.stripScripts(), true);","2319","","2320","        for (var i = 0, node; node = nodes[i]; i++)","2321","          element.appendChild(node);","2322","      } else {","2323","        element.innerHTML = content.stripScripts();","2324","      }","2325","    } else {","2326","      element.innerHTML = content.stripScripts();","2327","    }","2328","","2329","    content.evalScripts.bind(content).defer();","2330","    return element;","2331","  }","2332","","2333","  function replace(element, content) {","2335","","2336","    if (content && content.toElement) {","2337","      content = content.toElement();","2338","    } else if (!Object.isElement(content)) {","2345","","2348","  }","2350","  var INSERTION_TRANSLATIONS = {","2351","    before: function(element, node) {","2352","      element.parentNode.insertBefore(node, element);","2353","    },","2354","    top: function(element, node) {","2355","      element.insertBefore(node, element.firstChild);","2356","    },","2357","    bottom: function(element, node) {","2358","      element.appendChild(node);","2359","    },","2360","    after: function(element, node) {","2361","      element.parentNode.insertBefore(node, element.nextSibling);","2362","    },","2363","","2364","    tags: {","2365","      TABLE:  ['<table>',                '<\/table>',                   1],","2366","      TBODY:  ['<table><tbody>',         '<\/tbody><\/table>',           2],","2367","      TR:     ['<table><tbody><tr>',     '<\/tr><\/tbody><\/table>',      3],","2368","      TD:     ['<table><tbody><tr><td>', '<\/td><\/tr><\/tbody><\/table>', 4],","2369","      SELECT: ['<select>',               '<\/select>',                  1]","2370","    }","2371","  };","2372","","2373","  var tags = INSERTION_TRANSLATIONS.tags;","2374","","2375","  Object.extend(tags, {","2376","    THEAD: tags.TBODY,","2377","    TFOOT: tags.TBODY,","2378","    TH:    tags.TD","2379","  });","2380","","2381","  function replace_IE(element, content) {","2382","    element = $(element);","2383","    if (content && content.toElement)","2384","      content = content.toElement();","2385","    if (Object.isElement(content)) {","2386","      element.parentNode.replaceChild(content, element);","2387","      return element;","2388","    }","2389","","2390","    content = Object.toHTML(content);","2391","    var parent = element.parentNode, tagName = parent.tagName.toUpperCase();","2392","","2393","    if (tagName in INSERTION_TRANSLATIONS.tags) {","2394","      var nextSibling = Element.next(element);","2395","      var fragments = getContentFromAnonymousElement(","2396","       tagName, content.stripScripts());","2397","","2398","      parent.removeChild(element);","2399","","2400","      var iterator;","2401","      if (nextSibling)","2402","        iterator = function(node) { parent.insertBefore(node, nextSibling) };","2403","      else","2404","        iterator = function(node) { parent.appendChild(node); }","2405","","2406","      fragments.each(iterator);","2407","    } else {","2408","      element.outerHTML = content.stripScripts();","2409","    }","2410","","2411","    content.evalScripts.bind(content).defer();","2412","    return element;","2413","  }","2414","","2415","  if ('outerHTML' in document.documentElement)","2416","    replace = replace_IE;","2417","","2418","  function isContent(content) {","2419","    if (Object.isUndefined(content) || content === null) return false;","2420","","2421","    if (Object.isString(content) || Object.isNumber(content)) return true;","2422","    if (Object.isElement(content)) return true;","2423","    if (content.toElement || content.toHTML) return true;","2424","","2425","    return false;","2426","  }","2427","","2428","  function insertContentAt(element, content, position) {","2429","    position   = position.toLowerCase();","2430","    var method = INSERTION_TRANSLATIONS[position];","2431","","2432","    if (content && content.toElement) content = content.toElement();","2433","    if (Object.isElement(content)) {","2434","      method(element, content);","2435","      return element;","2436","    }","2437","","2438","    content = Object.toHTML(content);","2439","    var tagName = ((position === 'before' || position === 'after') ?","2440","     element.parentNode : element).tagName.toUpperCase();","2441","","2442","    var childNodes = getContentFromAnonymousElement(tagName, content.stripScripts());","2443","","2444","    if (position === 'top' || position === 'after') childNodes.reverse();","2445","","2446","    for (var i = 0, node; node = childNodes[i]; i++)","2447","      method(element, node);","2448","","2449","    content.evalScripts.bind(content).defer();","2450","  }","2451","","2452","  function insert(element, insertions) {","2455","    if (isContent(insertions))","2456","      insertions = { bottom: insertions };","2458","    for (var position in insertions)","2459","      insertContentAt(element, insertions[position], position);","2462","  }","2464","  function wrap(element, wrapper, attributes) {","2466","","2467","    if (Object.isElement(wrapper)) {","2468","      $(wrapper).writeAttribute(attributes || {});","2469","    } else if (Object.isString(wrapper)) {","2470","      wrapper = new Element(wrapper, attributes);","2471","    } else {","2472","      wrapper = new Element('div', wrapper);","2473","    }","2474","","2477","","2479","","2481","  }","2483","  function cleanWhitespace(element) {","2485","    var node = element.firstChild;","2487","    while (node) {","2488","      var nextNode = node.nextSibling;","2489","      if (node.nodeType === Node.TEXT_NODE && !\/\\S\/.test(node.nodeValue))","2490","        element.removeChild(node);","2491","      node = nextNode;","2492","    }","2493","    return element;","2494","  }","2495","","2496","  function empty(element) {","2497","    return $(element).innerHTML.blank();","2498","  }","2499","","2500","  function getContentFromAnonymousElement(tagName, html, force) {","2501","    var t = INSERTION_TRANSLATIONS.tags[tagName], div = DIV;","2502","","2503","    var workaround = !!t;","2504","    if (!workaround && force) {","2505","      workaround = true;","2506","      t = ['', '', 0];","2507","    }","2508","","2509","    if (workaround) {","2510","      div.innerHTML = '&#160;' + t[0] + html + t[1];","2511","      div.removeChild(div.firstChild);","2512","      for (var i = t[2]; i--; )","2513","        div = div.firstChild;","2514","    } else {","2515","      div.innerHTML = html;","2516","    }","2517","","2518","    return $A(div.childNodes);","2519","  }","2520","","2521","  function clone(element, deep) {","2522","    if (!(element = $(element))) return;","2523","    var clone = element.cloneNode(deep);","2524","    if (!HAS_UNIQUE_ID_PROPERTY) {","2525","      clone._prototypeUID = UNDEFINED;","2526","      if (deep) {","2527","        var descendants = Element.select(clone, '*'),","2528","         i = descendants.length;","2529","        while (i--)","2530","          descendants[i]._prototypeUID = UNDEFINED;","2531","      }","2532","    }","2533","    return Element.extend(clone);","2534","  }","2535","","2536","  function purgeElement(element) {","2537","    var uid = getUniqueElementID(element);","2538","    if (uid) {","2539","      Element.stopObserving(element);","2540","      if (!HAS_UNIQUE_ID_PROPERTY)","2541","        element._prototypeUID = UNDEFINED;","2542","      delete Element.Storage[uid];","2543","    }","2544","  }","2545","","2546","  function purgeCollection(elements) {","2547","    var i = elements.length;","2548","    while (i--)","2549","      purgeElement(elements[i]);","2550","  }","2551","","2552","  function purgeCollection_IE(elements) {","2553","    var i = elements.length, element, uid;","2554","    while (i--) {","2555","      element = elements[i];","2556","      uid = getUniqueElementID(element);","2557","      delete Element.Storage[uid];","2558","      delete Event.cache[uid];","2559","    }","2560","  }","2561","","2562","  if (HAS_UNIQUE_ID_PROPERTY) {","2563","    purgeCollection = purgeCollection_IE;","2564","  }","2565","","2566","","2567","  function purge(element) {","2568","    if (!(element = $(element))) return;","2569","    purgeElement(element);","2570","","2571","    var descendants = element.getElementsByTagName('*'),","2572","     i = descendants.length;","2573","","2574","    while (i--) purgeElement(descendants[i]);","2575","","2576","    return null;","2577","  }","2578","","2579","  Object.extend(methods, {","2580","    remove:  remove,","2581","    update:  update,","2582","    replace: replace,","2583","    insert:  insert,","2584","    wrap:    wrap,","2585","    cleanWhitespace: cleanWhitespace,","2586","    empty:   empty,","2587","    clone:   clone,","2588","    purge:   purge","2589","  });","2590","","2591","","2592","","2593","  function recursivelyCollect(element, property, maximumLength) {","2599","      if (element.nodeType === Node.ELEMENT_NODE)","2601","","2602","      if (elements.length === maximumLength) break;","2606","  }","2609","  function ancestors(element) {","2610","    return recursivelyCollect(element, 'parentNode');","2611","  }","2613","  function descendants(element) {","2614","    return Element.select(element, '*');","2615","  }","2616","","2617","  function firstDescendant(element) {","2619","    while (element && element.nodeType !== Node.ELEMENT_NODE)","2620","      element = element.nextSibling;","2621","","2623","  }","2625","  function immediateDescendants(element) {","2627","","2629","      if (child.nodeType === Node.ELEMENT_NODE)","2631","","2634","","2636","  }","2638","  function previousSiblings(element) {","2639","    return recursivelyCollect(element, 'previousSibling');","2640","  }","2642","  function nextSiblings(element) {","2643","    return recursivelyCollect(element, 'nextSibling');","2644","  }","2646","  function siblings(element) {","2648","    var previous = previousSiblings(element),","2649","     next = nextSiblings(element);","2650","    return previous.reverse().concat(next);","2651","  }","2653","  function match(element, selector) {","2655","","2658","","2660","  }","2662","","2663","  function _recursivelyFind(element, property, expression, index) {","2664","    element = $(element), expression = expression || 0, index = index || 0;","2665","    if (Object.isNumber(expression)) {","2666","      index = expression, expression = null;","2667","    }","2668","","2669","    while (element = element[property]) {","2670","      if (element.nodeType !== 1) continue;","2671","      if (expression && !Prototype.Selector.match(element, expression))","2672","        continue;","2673","      if (--index >= 0) continue;","2674","","2675","      return Element.extend(element);","2676","    }","2677","  }","2678","","2679","","2680","  function up(element, expression, index) {","2683","    if (arguments.length === 1) return $(element.parentNode);","2684","    return _recursivelyFind(element, 'parentNode', expression, index);","2685","  }","2686","","2687","  function down(element, expression, index) {","2688","    if (arguments.length === 1) return firstDescendant(element);","2689","    element = $(element), expression = expression || 0, index = index || 0;","2690","","2691","    if (Object.isNumber(expression))","2692","      index = expression, expression = '*';","2693","","2694","    var node = Prototype.Selector.select(expression, element)[index];","2695","    return Element.extend(node);","2696","  }","2697","","2698","  function previous(element, expression, index) {","2699","    return _recursivelyFind(element, 'previousSibling', expression, index);","2700","  }","2701","","2702","  function next(element, expression, index) {","2703","    return _recursivelyFind(element, 'nextSibling', expression, index);","2704","  }","2705","","2706","  function select(element) {","2708","    var expressions = SLICE.call(arguments, 1).join(', ');","2710","  }","2712","  function adjacent(element) {","2714","    var expressions = SLICE.call(arguments, 1).join(', ');","2715","    var siblings = Element.siblings(element), results = [];","2716","    for (var i = 0, sibling; sibling = siblings[i]; i++) {","2717","      if (Prototype.Selector.match(sibling, expressions))","2718","        results.push(sibling);","2719","    }","2721","    return results;","2722","  }","2723","","2724","  function descendantOf_DOM(element, ancestor) {","2725","    element = $(element), ancestor = $(ancestor);","2726","    if (!element || !ancestor) return false;","2727","    while (element = element.parentNode)","2728","      if (element === ancestor) return true;","2729","    return false;","2730","  }","2731","","2732","  function descendantOf_contains(element, ancestor) {","2733","    element = $(element), ancestor = $(ancestor);","2734","    if (!element || !ancestor) return false;","2735","    if (!ancestor.contains) return descendantOf_DOM(element, ancestor);","2736","    return ancestor.contains(element) && ancestor !== element;","2737","  }","2738","","2739","  function descendantOf_compareDocumentPosition(element, ancestor) {","2740","    element = $(element), ancestor = $(ancestor);","2741","    if (!element || !ancestor) return false;","2742","    return (element.compareDocumentPosition(ancestor) & 8) === 8;","2743","  }","2744","","2745","  var descendantOf;","2746","  if (DIV.compareDocumentPosition) {","2747","    descendantOf = descendantOf_compareDocumentPosition;","2748","  } else if (DIV.contains) {","2749","    descendantOf = descendantOf_contains;","2750","  } else {","2751","    descendantOf = descendantOf_DOM;","2752","  }","2753","","2754","","2755","  Object.extend(methods, {","2756","    recursivelyCollect:   recursivelyCollect,","2757","    ancestors:            ancestors,","2758","    descendants:          descendants,","2759","    firstDescendant:      firstDescendant,","2760","    immediateDescendants: immediateDescendants,","2761","    previousSiblings:     previousSiblings,","2762","    nextSiblings:         nextSiblings,","2763","    siblings:             siblings,","2764","    match:                match,","2765","    up:                   up,","2766","    down:                 down,","2767","    previous:             previous,","2768","    next:                 next,","2769","    select:               select,","2770","    adjacent:             adjacent,","2771","    descendantOf:         descendantOf,","2772","","2773","    getElementsBySelector: select,","2774","","2775","    childElements:         immediateDescendants","2776","  });","2777","","2778","","2779","  var idCounter = 1;","2780","  function identify(element) {","2784","","2785","    do { id = 'anonymous_element_' + idCounter++ } while ($(id));","2786","","2789","  }","2791","","2792","  function readAttribute(element, name) {","2793","    return $(element).getAttribute(name);","2794","  }","2795","","2796","  function readAttribute_IE(element, name) {","2798","","2799","    var table = ATTRIBUTE_TRANSLATIONS.read;","2800","    if (table.values[name])","2801","      return table.values[name](element, name);","2802","","2803","    if (table.names[name]) name = table.names[name];","2804","","2805","    if (name.include(':')) {","2806","      if (!element.attributes || !element.attributes[name]) return null;","2807","      return element.attributes[name].value;","2809","","2811","  }","2813","  function readAttribute_Opera(element, name) {","2814","    if (name === 'title') return element.title;","2815","    return element.getAttribute(name);","2816","  }","2817","","2818","  var PROBLEMATIC_ATTRIBUTE_READING = (function() {","2819","    DIV.setAttribute('onclick', []);","2820","    var value = DIV.getAttribute('onclick');","2821","    var isFunction = Object.isArray(value);","2822","    DIV.removeAttribute('onclick');","2823","    return isFunction;","2824","  })();","2825","","2826","  if (PROBLEMATIC_ATTRIBUTE_READING) {","2827","    readAttribute = readAttribute_IE;","2828","  } else if (Prototype.Browser.Opera) {","2829","    readAttribute = readAttribute_Opera;","2830","  }","2831","","2832","","2833","  function writeAttribute(element, name, value) {","2835","    var attributes = {}, table = ATTRIBUTE_TRANSLATIONS.write;","2837","    if (typeof name === 'object') {","2838","      attributes = name;","2839","    } else {","2840","      attributes[name] = Object.isUndefined(value) ? true : value;","2841","    }","2844","      name = table.names[attr] || attr;","2846","      if (table.values[attr]) {","2847","        value = table.values[attr](element, value);","2848","        if (Object.isUndefined(value)) continue;","2849","      }","2856","","2858","  }","2860","  var PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES = (function () {","2861","    if (!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX) {","2862","      return false;","2863","    }","2864","    var checkbox = document.createElement('<input type=\"checkbox\">');","2865","    checkbox.checked = true;","2866","    var node = checkbox.getAttributeNode('checked');","2867","    return !node || !node.specified;","2868","  })();","2870","  function hasAttribute(element, attribute) {","2871","    attribute = ATTRIBUTE_TRANSLATIONS.has[attribute] || attribute;","2872","    var node = $(element).getAttributeNode(attribute);","2873","    return !!(node && node.specified);","2874","  }","2876","  function hasAttribute_IE(element, attribute) {","2877","    if (attribute === 'checked') {","2878","      return element.checked;","2879","    }","2880","    return hasAttribute(element, attribute);","2881","  }","2882","","2883","  GLOBAL.Element.Methods.Simulated.hasAttribute =","2884","   PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES ?","2885","   hasAttribute_IE : hasAttribute;","2886","","2887","  function classNames(element) {","2889","  }","2891","  var regExpCache = {};","2892","  function getRegExpForClassName(className) {","2893","    if (regExpCache[className]) return regExpCache[className];","2894","","2895","    var re = new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\");","2896","    regExpCache[className] = re;","2897","    return re;","2898","  }","2899","","2900","  function hasClassName(element, className) {","2902","","2905","    if (elementClassName.length === 0) return false;","2906","    if (elementClassName === className) return true;","2907","","2908","    return getRegExpForClassName(className).test(elementClassName);","2909","  }","2910","","2911","  function addClassName(element, className) {","2913","","2914","    if (!hasClassName(element, className))","2916","","2918","  }","2920","  function removeClassName(element, className) {","2922","","2924","     getRegExpForClassName(className), ' ').strip();","2927","  }","2929","  function toggleClassName(element, className, bool) {","2930","    if (!(element = $(element))) return;","2932","    if (Object.isUndefined(bool))","2933","      bool = !hasClassName(element, className);","2934","","2935","    var method = Element[bool ? 'addClassName' : 'removeClassName'];","2936","    return method(element, className);","2937","  }","2938","","2939","  var ATTRIBUTE_TRANSLATIONS = {};","2940","","2941","  var classProp = 'className', forProp = 'for';","2942","","2943","  DIV.setAttribute(classProp, 'x');","2944","  if (DIV.className !== 'x') {","2945","    DIV.setAttribute('class', 'x');","2946","    if (DIV.className === 'x')","2947","      classProp = 'class';","2948","  }","2949","","2950","  var LABEL = document.createElement('label');","2951","  LABEL.setAttribute(forProp, 'x');","2952","  if (LABEL.htmlFor !== 'x') {","2953","    LABEL.setAttribute('htmlFor', 'x');","2954","    if (LABEL.htmlFor === 'x')","2955","      forProp = 'htmlFor';","2956","  }","2957","  LABEL = null;","2958","","2959","  function _getAttr(element, attribute) {","2960","    return element.getAttribute(attribute);","2961","  }","2962","","2963","  function _getAttr2(element, attribute) {","2964","    return element.getAttribute(attribute, 2);","2965","  }","2966","","2967","  function _getAttrNode(element, attribute) {","2968","    var node = element.getAttributeNode(attribute);","2969","    return node ? node.value : '';","2970","  }","2971","","2972","  function _getFlag(element, attribute) {","2973","    return $(element).hasAttribute(attribute) ? attribute : null;","2974","  }","2975","","2976","  DIV.onclick = Prototype.emptyFunction;","2977","  var onclickValue = DIV.getAttribute('onclick');","2978","","2979","  var _getEv;","2980","","2981","  if (String(onclickValue).indexOf('{') > -1) {","2982","    _getEv = function(element, attribute) {","2983","      var value = element.getAttribute(attribute);","2984","      if (!value) return null;","2985","      value = value.toString();","2986","      value = value.split('{')[1];","2987","      value = value.split('}')[0];","2988","      return value.strip();","2989","    };","2990","  }","2991","  else if (onclickValue === '') {","2992","    _getEv = function(element, attribute) {","2993","      var value = element.getAttribute(attribute);","2994","      if (!value) return null;","2995","      return value.strip();","2996","    };","2997","  }","2998","","2999","  ATTRIBUTE_TRANSLATIONS.read = {","3000","    names: {","3001","      'class':     classProp,","3002","      'className': classProp,","3003","      'for':       forProp,","3004","      'htmlFor':   forProp","3005","    },","3006","","3007","    values: {","3008","      style: function(element) {","3009","        return element.style.cssText.toLowerCase();","3010","      },","3011","      title: function(element) {","3012","        return element.title;","3017","  ATTRIBUTE_TRANSLATIONS.write = {","3018","    names: {","3019","      className:   'class',","3020","      htmlFor:     'for',","3023","    },","3024","","3027","        value = !!value;","3028","        element.checked = value;","3029","        return value ? 'checked' : null;","3038","  ATTRIBUTE_TRANSLATIONS.has = { names: {} };","3040","  Object.extend(ATTRIBUTE_TRANSLATIONS.write.names,","3041","   ATTRIBUTE_TRANSLATIONS.read.names);","3042","","3043","  var CAMEL_CASED_ATTRIBUTE_NAMES = $w('colSpan rowSpan vAlign dateTime ' +","3044","   'accessKey tabIndex encType maxLength readOnly longDesc frameBorder');","3045","","3046","  for (var i = 0, attr; attr = CAMEL_CASED_ATTRIBUTE_NAMES[i]; i++) {","3047","    ATTRIBUTE_TRANSLATIONS.write.names[attr.toLowerCase()] = attr;","3048","    ATTRIBUTE_TRANSLATIONS.has.names[attr.toLowerCase()]   = attr;","3049","  }","3050","","3051","  Object.extend(ATTRIBUTE_TRANSLATIONS.read.values, {","3052","    href:        _getAttr2,","3053","    src:         _getAttr2,","3054","    type:        _getAttr,","3055","    action:      _getAttrNode,","3056","    disabled:    _getFlag,","3057","    checked:     _getFlag,","3058","    readonly:    _getFlag,","3059","    multiple:    _getFlag,","3060","    onload:      _getEv,","3061","    onunload:    _getEv,","3062","    onclick:     _getEv,","3063","    ondblclick:  _getEv,","3064","    onmousedown: _getEv,","3065","    onmouseup:   _getEv,","3066","    onmouseover: _getEv,","3067","    onmousemove: _getEv,","3068","    onmouseout:  _getEv,","3069","    onfocus:     _getEv,","3070","    onblur:      _getEv,","3071","    onkeypress:  _getEv,","3072","    onkeydown:   _getEv,","3073","    onkeyup:     _getEv,","3074","    onsubmit:    _getEv,","3075","    onreset:     _getEv,","3076","    onselect:    _getEv,","3077","    onchange:    _getEv","3081","  Object.extend(methods, {","3082","    identify:        identify,","3083","    readAttribute:   readAttribute,","3084","    writeAttribute:  writeAttribute,","3085","    classNames:      classNames,","3086","    hasClassName:    hasClassName,","3087","    addClassName:    addClassName,","3088","    removeClassName: removeClassName,","3089","    toggleClassName: toggleClassName","3090","  });","3091","","3092","","3093","  function normalizeStyleName(style) {","3094","    if (style === 'float' || style === 'styleFloat')","3095","      return 'cssFloat';","3096","    return style.camelize();","3097","  }","3098","","3099","  function normalizeStyleName_IE(style) {","3100","    if (style === 'float' || style === 'cssFloat')","3101","      return 'styleFloat';","3102","    return style.camelize();","3103","  }","3104","","3105","  function setStyle(element, styles) {","3106","    element = $(element);","3107","    var elementStyle = element.style, match;","3108","","3109","    if (Object.isString(styles)) {","3110","      elementStyle.cssText += ';' + styles;","3111","      if (styles.include('opacity')) {","3112","        var opacity = styles.match(\/opacity:\\s*(\\d?\\.?\\d*)\/)[1];","3113","        Element.setOpacity(element, opacity);","3118","    for (var property in styles) {","3119","      if (property === 'opacity') {","3120","        Element.setOpacity(element, styles[property]);","3121","      } else {","3122","        var value = styles[property];","3123","        if (property === 'float' || property === 'cssFloat') {","3124","          property = Object.isUndefined(elementStyle.styleFloat) ?","3125","           'cssFloat' : 'styleFloat';","3126","        }","3127","        elementStyle[property] = value;","3130","","3131","    return element;","3132","  }","3133","","3134","","3135","  function getStyle(element, style) {","3136","    element = $(element);","3137","    style = normalizeStyleName(style);","3138","","3139","    var value = element.style[style];","3140","    if (!value || value === 'auto') {","3141","      var css = document.defaultView.getComputedStyle(element, null);","3142","      value = css ? css[style] : null;","3143","    }","3144","","3145","    if (style === 'opacity') return value ? parseFloat(value) : 1.0;","3146","    return value === 'auto' ? null : value;","3147","  }","3148","","3149","  function getStyle_Opera(element, style) {","3150","    switch (style) {","3151","      case 'height': case 'width':","3152","        if (!Element.visible(element)) return null;","3153","","3154","        var dim = parseInt(getStyle(element, style), 10);","3155","","3156","        if (dim !== element['offset' + style.capitalize()])","3157","          return dim + 'px';","3158","","3159","        return Element.measure(element, style);","3160","","3161","      default: return getStyle(element, style);","3162","    }","3163","  }","3164","","3165","  function getStyle_IE(element, style) {","3166","    element = $(element);","3167","    style = normalizeStyleName_IE(style);","3168","","3169","    var value = element.style[style];","3170","    if (!value && element.currentStyle) {","3171","      value = element.currentStyle[style];","3172","    }","3173","","3174","    if (style === 'opacity') {","3175","      if (!STANDARD_CSS_OPACITY_SUPPORTED)","3176","        return getOpacity_IE(element);","3177","      else return value ? parseFloat(value) : 1.0;","3178","    }","3179","","3180","    if (value === 'auto') {","3181","      if ((style === 'width' || style === 'height') && Element.visible(element))","3182","        return Element.measure(element, style) + 'px';","3183","      return null;","3184","    }","3185","","3186","    return value;","3187","  }","3188","","3189","  function stripAlphaFromFilter_IE(filter) {","3190","    return (filter || '').replace(\/alpha\\([^\\)]*\\)\/gi, '');","3191","  }","3192","","3193","  function hasLayout_IE(element) {","3194","    if (!element.currentStyle || !element.currentStyle.hasLayout)","3195","      element.style.zoom = 1;","3196","    return element;","3197","  }","3198","","3199","  var STANDARD_CSS_OPACITY_SUPPORTED = (function() {","3200","    DIV.style.cssText = \"opacity:.55\";","3201","    return \/^0.55\/.test(DIV.style.opacity);","3202","  })();","3203","","3204","  function setOpacity(element, value) {","3205","    element = $(element);","3206","    if (value == 1 || value === '') value = '';","3207","    else if (value < 0.00001) value = 0;","3208","    element.style.opacity = value;","3209","    return element;","3210","  }","3211","","3212","  function setOpacity_IE(element, value) {","3213","    if (STANDARD_CSS_OPACITY_SUPPORTED)","3214","      return setOpacity(element, value);","3215","","3216","    element = hasLayout_IE($(element));","3217","    var filter = Element.getStyle(element, 'filter'),","3218","     style = element.style;","3219","","3220","    if (value == 1 || value === '') {","3221","      filter = stripAlphaFromFilter_IE(filter);","3222","      if (filter) style.filter = filter;","3223","      else style.removeAttribute('filter');","3224","      return element;","3225","    }","3226","","3227","    if (value < 0.00001) value = 0;","3228","","3229","    style.filter = stripAlphaFromFilter_IE(filter) +","3230","     ' alpha(opacity=' + (value * 100) + ')';","3231","","3232","    return element;","3233","  }","3234","","3235","","3236","  function getOpacity(element) {","3237","    return Element.getStyle(element, 'opacity');","3238","  }","3239","","3240","  function getOpacity_IE(element) {","3241","    if (STANDARD_CSS_OPACITY_SUPPORTED)","3242","      return getOpacity(element);","3243","","3244","    var filter = Element.getStyle(element, 'filter');","3245","    if (filter.length === 0) return 1.0;","3246","    var match = (filter || '').match(\/alpha\\(opacity=(.*)\\)\/i);","3247","    if (match && match[1]) return parseFloat(match[1]) \/ 100;","3248","    return 1.0;","3249","  }","3250","","3251","","3252","  Object.extend(methods, {","3253","    setStyle:   setStyle,","3254","    getStyle:   getStyle,","3255","    setOpacity: setOpacity,","3256","    getOpacity: getOpacity","3257","  });","3258","","3259","  if ('styleFloat' in DIV.style) {","3260","    methods.getStyle = getStyle_IE;","3261","    methods.setOpacity = setOpacity_IE;","3262","    methods.getOpacity = getOpacity_IE;","3263","  }","3264","","3265","  var UID = 0;","3266","","3267","  GLOBAL.Element.Storage = { UID: 1 };","3268","","3269","  function getUniqueElementID(element) {","3270","    if (element === window) return 0;","3271","","3272","    if (typeof element._prototypeUID === 'undefined')","3273","      element._prototypeUID = Element.Storage.UID++;","3274","    return element._prototypeUID;","3275","  }","3276","","3277","  function getUniqueElementID_IE(element) {","3278","    if (element === window) return 0;","3279","    if (element == document) return 1;","3280","    return element.uniqueID;","3281","  }","3282","","3283","  var HAS_UNIQUE_ID_PROPERTY = ('uniqueID' in DIV);","3284","  if (HAS_UNIQUE_ID_PROPERTY)","3285","    getUniqueElementID = getUniqueElementID_IE;","3286","","3287","  function getStorage(element) {","3288","    if (!(element = $(element))) return;","3289","","3290","    var uid = getUniqueElementID(element);","3291","","3292","    if (!Element.Storage[uid])","3293","      Element.Storage[uid] = $H();","3294","","3295","    return Element.Storage[uid];","3296","  }","3297","","3298","  function store(element, key, value) {","3299","    if (!(element = $(element))) return;","3300","    var storage = getStorage(element);","3301","    if (arguments.length === 2) {","3302","      storage.update(key);","3303","    } else {","3304","      storage.set(key, value);","3305","    }","3306","    return element;","3307","  }","3308","","3309","  function retrieve(element, key, defaultValue) {","3310","    if (!(element = $(element))) return;","3311","    var storage = getStorage(element), value = storage.get(key);","3312","","3313","    if (Object.isUndefined(value)) {","3314","      storage.set(key, defaultValue);","3315","      value = defaultValue;","3316","    }","3317","","3318","    return value;","3319","  }","3320","","3321","","3322","  Object.extend(methods, {","3323","    getStorage: getStorage,","3324","    store:      store,","3325","    retrieve:   retrieve","3326","  });","3327","","3328","","3329","  var Methods = {}, ByTag = Element.Methods.ByTag,","3330","   F = Prototype.BrowserFeatures;","3331","","3332","  if (!F.ElementExtensions && ('__proto__' in DIV)) {","3333","    GLOBAL.HTMLElement = {};","3334","    GLOBAL.HTMLElement.prototype = DIV['__proto__'];","3335","    F.ElementExtensions = true;","3336","  }","3337","","3338","  function checkElementPrototypeDeficiency(tagName) {","3339","    if (typeof window.Element === 'undefined') return false;","3340","    if (!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX) return false;","3341","    var proto = window.Element.prototype;","3342","    if (proto) {","3343","      var id = '_' + (Math.random() + '').slice(2),","3344","       el = document.createElement(tagName);","3345","      proto[id] = 'x';","3346","      var isBuggy = (el[id] !== 'x');","3347","      delete proto[id];","3348","      el = null;","3349","      return isBuggy;","3350","    }","3351","","3355","  var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY =","3356","   checkElementPrototypeDeficiency('object');","3357","","3366","  var EXTENDED = {};","3367","  function elementIsExtended(element) {","3368","    var uid = getUniqueElementID(element);","3369","    return (uid in EXTENDED);","3372","  function extend(element) {","3373","    if (!element || elementIsExtended(element)) return element;","3374","    if (element.nodeType !== Node.ELEMENT_NODE || element == window)","3375","      return element;","3378","     tagName = element.tagName.toUpperCase();","3383","    EXTENDED[getUniqueElementID(element)] = true;","3385","  }","3387","  function extend_IE8(element) {","3388","    if (!element || elementIsExtended(element)) return element;","3389","","3390","    var t = element.tagName;","3391","    if (t && (\/^(?:object|applet|embed)$\/i.test(t))) {","3392","      extendElementWith(element, Element.Methods);","3393","      extendElementWith(element, Element.Methods.Simulated);","3394","      extendElementWith(element, Element.Methods.ByTag[t.toUpperCase()]);","3397","    return element;","3400","  if (F.SpecificElementExtensions) {","3401","    extend = HTMLOBJECTELEMENT_PROTOTYPE_BUGGY ? extend_IE8 : Prototype.K;","3404","  function addMethodsToTagName(tagName, methods) {","3406","    if (!ByTag[tagName]) ByTag[tagName] = {};","3407","    Object.extend(ByTag[tagName], methods);","3410","  function mergeMethods(destination, methods, onlyIfAbsent) {","3411","    if (Object.isUndefined(onlyIfAbsent)) onlyIfAbsent = false;","3441","     proto = element['__proto__'] || element.constructor.prototype;","3447","  function addMethods(methods) {","3448","    if (arguments.length === 0) addFormMethods();","3451","      var tagName = methods;","3452","      methods = arguments[1];","3453","    }","3454","","3455","    if (!tagName) {","3456","      Object.extend(Element.Methods, methods || {});","3458","      if (Object.isArray(tagName)) {","3459","        for (var i = 0, tag; tag = tagName[i]; i++)","3460","          addMethodsToTagName(tag, methods);","3461","      } else {","3462","        addMethodsToTagName(tagName, methods);","3466","    var ELEMENT_PROTOTYPE = window.HTMLElement ? HTMLElement.prototype :","3467","     Element.prototype;","3469","    if (F.ElementExtensions) {","3470","      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods);","3471","      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods.Simulated, true);","3472","    }","3474","    if (F.SpecificElementExtensions) {","3475","      for (var tag in Element.Methods.ByTag) {","3476","        var klass = findDOMClass(tag);","3477","        if (Object.isUndefined(klass)) continue;","3478","        mergeMethods(klass.prototype, ByTag[tag]);","3479","      }","3480","    }","3482","    Object.extend(Element, Element.Methods);","3483","    Object.extend(Element, Element.Methods.Simulated);","3484","    delete Element.ByTag;","3485","    delete Element.Simulated;","3487","    Element.extend.refresh();","3488","","3489","    ELEMENT_CACHE = {};","3492","  Object.extend(GLOBAL.Element, {","3493","    extend:     extend,","3494","    addMethods: addMethods","3495","  });","3496","","3497","  if (extend === Prototype.K) {","3498","    GLOBAL.Element.extend.refresh = Prototype.emptyFunction;","3499","  } else {","3500","    GLOBAL.Element.extend.refresh = function() {","3501","      if (Prototype.BrowserFeatures.ElementExtensions) return;","3502","      Object.extend(Methods, Element.Methods);","3503","      Object.extend(Methods, Element.Methods.Simulated);","3504","","3505","      EXTENDED = {};","3506","    };","3507","  }","3508","","3509","  function addFormMethods() {","3510","    Object.extend(Form, Form.Methods);","3511","    Object.extend(Form.Element, Form.Element.Methods);","3512","    Object.extend(Element.Methods.ByTag, {","3513","      \"FORM\":     Object.clone(Form.Methods),","3514","      \"INPUT\":    Object.clone(Form.Element.Methods),","3515","      \"SELECT\":   Object.clone(Form.Element.Methods),","3516","      \"TEXTAREA\": Object.clone(Form.Element.Methods),","3517","      \"BUTTON\":   Object.clone(Form.Element.Methods)","3518","    });","3519","  }","3520","","3521","  Element.addMethods(methods);","3522","","3523","  function destroyCache_IE() {","3524","    DIV = null;","3525","    ELEMENT_CACHE = null;","3526","  }","3527","","3528","  if (window.attachEvent)","3529","    window.attachEvent('onunload', destroyCache_IE);","3530","","3531","})(this);","3540","  function getRawStyle(element, style) {","3541","    element = $(element);","3542","","3543","    var value = element.style[style];","3544","    if (!value || value === 'auto') {","3545","      var css = document.defaultView.getComputedStyle(element, null);","3546","      value = css ? css[style] : null;","3547","    }","3548","","3549","    if (style === 'opacity') return value ? parseFloat(value) : 1.0;","3550","    return value === 'auto' ? null : value;","3551","  }","3552","","3553","  function getRawStyle_IE(element, style) {","3554","    var value = element.style[style];","3555","    if (!value && element.currentStyle) {","3556","      value = element.currentStyle[style];","3557","    }","3558","    return value;","3559","  }","3560","","3561","  function getContentWidth(element, context) {","3562","    var boxWidth = element.offsetWidth;","3563","","3564","    var bl = getPixelValue(element, 'borderLeftWidth',  context) || 0;","3565","    var br = getPixelValue(element, 'borderRightWidth', context) || 0;","3566","    var pl = getPixelValue(element, 'paddingLeft',      context) || 0;","3567","    var pr = getPixelValue(element, 'paddingRight',     context) || 0;","3568","","3569","    return boxWidth - bl - br - pl - pr;","3570","  }","3571","","3572","  if (!Object.isUndefined(document.documentElement.currentStyle) && !Prototype.Browser.Opera) {","3573","    getRawStyle = getRawStyle_IE;","3574","  }","3575","","3576","","3581","      value = getRawStyle(element, property);","3584","    if (value === null || Object.isUndefined(value)) {","3607","      var decimal = toDecimal(value), whole = null;","3612","      var isVertical   = property.include('top') || property.include('bottom') ||","3636","    if (Object.isString(number) && number.endsWith('px'))","3699","      if (this._isPrepared()) return;","3703","        this._setPrepared(true);","3707","","3717","      var position = getRawStyle(element, 'position'), width = element.offsetWidth;","3719","      if (width === 0 || width === null) {","3721","        width = element.offsetWidth;","3727","      var tempStyles = {","3730","      };","3732","      if (position !== 'fixed') tempStyles.position = 'absolute';","3734","      element.setStyle(tempStyles);","3735","","3736","      var positionedWidth = element.offsetWidth, newWidth;","3738","        newWidth = getContentWidth(element, context);","3740","        newWidth = getContentWidth(element, context);","3755","      this._setPrepared(true);","3763","      this._setPrepared(false);","3775","    _isPrepared: function() {","3776","      return this.element.retrieve('prototype_element_layout_prepared', false);","3777","    },","3778","","3779","    _setPrepared: function(bool) {","3780","      return this.element.store('prototype_element_layout_prepared', bool);","3781","    },","3782","","4054","  function getHeight(element) {","4055","    return Element.getDimensions(element).height;","4056","  }","4057","","4058","  function getWidth(element) {","4059","    return Element.getDimensions(element).width;","4060","  }","4061","","4100","    function selfOrBody(element) {","4101","      return isHtml(element) ? $(document.body) : $(element);","4102","    }","4103","","4108","    if (!isInline && element.offsetParent) return selfOrBody(element.offsetParent);","4112","        return selfOrBody(element);","4150","    valueL -= layout.get('margin-left');","4151","    valueT -= layout.get('margin-top');","4159","      if (element === document.body) {","4160","        var bodyScrollNode = document.documentElement || document.body.parentNode || document.body;","4161","        valueT += !Object.isUndefined(window.pageYOffset) ? window.pageYOffset : bodyScrollNode.scrollTop || 0;","4162","        valueL += !Object.isUndefined(window.pageXOffset) ? window.pageXOffset : bodyScrollNode.scrollLeft || 0;","4163","        break;","4164","      } else {","4165","        valueT += element.scrollTop  || 0;","4166","        valueL += element.scrollLeft || 0;","4167","        element = element.parentNode;","4168","      }","4176","    forElement = $(forElement);","4210","      position: element.getStyle('position'),","4211","      left:     element.getStyle('left'),","4212","      top:      element.getStyle('top'),","4213","      width:    element.getStyle('width'),","4214","      height:   element.getStyle('height')","4241","","4242","  function scrollTo(element) {","4243","    element = $(element);","4244","    var pos = Element.cumulativeOffset(element);","4245","    window.scrollTo(pos.left, pos.top);","4246","    return element;","4247","  }","4248","","4249","","4250","  function makePositioned(element) {","4251","    element = $(element);","4252","    var position = Element.getStyle(element, 'position'), styles = {};","4253","    if (position === 'static' || !position) {","4254","      styles.position = 'relative';","4255","      if (Prototype.Browser.Opera) {","4256","        styles.top  = 0;","4257","        styles.left = 0;","4258","      }","4259","      Element.setStyle(element, styles);","4260","      Element.store(element, 'prototype_made_positioned', true);","4261","    }","4262","    return element;","4263","  }","4264","","4265","  function undoPositioned(element) {","4266","    element = $(element);","4267","    var storage = Element.getStorage(element),","4268","     madePositioned = storage.get('prototype_made_positioned');","4269","","4270","    if (madePositioned) {","4271","      storage.unset('prototype_made_positioned');","4272","      Element.setStyle(element, {","4273","        position: '',","4274","        top:      '',","4275","        bottom:   '',","4276","        left:     '',","4277","        right:    ''","4278","      });","4279","    }","4280","    return element;","4281","  }","4282","","4283","  function makeClipping(element) {","4284","    element = $(element);","4285","","4286","    var storage = Element.getStorage(element),","4287","     madeClipping = storage.get('prototype_made_clipping');","4288","","4289","    if (Object.isUndefined(madeClipping)) {","4290","      var overflow = Element.getStyle(element, 'overflow');","4291","      storage.set('prototype_made_clipping', overflow);","4292","      if (overflow !== 'hidden')","4293","        element.style.overflow = 'hidden';","4294","    }","4295","","4296","    return element;","4297","  }","4298","","4299","  function undoClipping(element) {","4300","    element = $(element);","4301","    var storage = Element.getStorage(element),","4302","     overflow = storage.get('prototype_made_clipping');","4303","","4304","    if (!Object.isUndefined(overflow)) {","4305","      storage.unset('prototype_made_clipping');","4306","      element.style.overflow = overflow || '';","4307","    }","4308","","4309","    return element;","4310","  }","4311","","4312","  function clonePosition(element, source, options) {","4313","    options = Object.extend({","4314","      setLeft:    true,","4315","      setTop:     true,","4316","      setWidth:   true,","4317","      setHeight:  true,","4318","      offsetTop:  0,","4319","      offsetLeft: 0","4320","    }, options || {});","4321","","4322","    var docEl = document.documentElement;","4323","","4324","    source  = $(source);","4325","    element = $(element);","4326","    var p, delta, layout, styles = {};","4327","","4328","    if (options.setLeft || options.setTop) {","4329","      p = Element.viewportOffset(source);","4330","      delta = [0, 0];","4331","      if (Element.getStyle(element, 'position') === 'absolute') {","4332","        var parent = Element.getOffsetParent(element);","4333","        if (parent !== document.body) delta = Element.viewportOffset(parent);","4334","      }","4335","    }","4336","","4337","    function pageScrollXY() {","4338","      var x = 0, y = 0;","4339","      if (Object.isNumber(window.pageXOffset)) {","4340","        x = window.pageXOffset;","4341","        y = window.pageYOffset;","4342","      } else if (document.body && (document.body.scrollLeft || document.body.scrollTop)) {","4343","        x = document.body.scrollLeft;","4344","        y = document.body.scrollTop;","4345","      } else if (docEl && (docEl.scrollLeft || docEl.scrollTop)) {","4346","        x = docEl.scrollLeft;","4347","        y = docEl.scrollTop;","4348","      }","4349","      return { x: x, y: y };","4350","    }","4351","","4352","    var pageXY = pageScrollXY();","4353","","4354","","4355","    if (options.setWidth || options.setHeight) {","4356","      layout = Element.getLayout(source);","4357","    }","4358","","4359","    if (options.setLeft)","4360","      styles.left = (p[0] + pageXY.x - delta[0] + options.offsetLeft) + 'px';","4361","    if (options.setTop)","4362","      styles.top  = (p[1] + pageXY.y - delta[1] + options.offsetTop)  + 'px';","4363","","4364","    var currentLayout = element.getLayout();","4365","","4366","    if (options.setWidth) {","4367","      styles.width = layout.get('width')  + 'px';","4368","    }","4369","    if (options.setHeight) {","4370","      styles.height = layout.get('height') + 'px';","4371","    }","4372","","4373","    return Element.setStyle(element, styles);","4374","  }","4375","","4376","","4417","        if (element.offsetParent == document.body) {","4419","        }","4432","    getWidth:               getWidth,","4433","    getHeight:              getHeight,","4441","    relativize:             relativize,","4442","    scrollTo:               scrollTo,","4443","    makePositioned:         makePositioned,","4444","    undoPositioned:         undoPositioned,","4445","    makeClipping:           makeClipping,","4446","    undoClipping:           undoClipping,","4447","    clonePosition:          clonePosition","4480","","4481","","4482","})();","4483","","4484","(function() {","4485","","4486","  var IS_OLD_OPERA = Prototype.Browser.Opera &&","4487","   (window.parseFloat(window.opera.version()) < 9.5);","4488","  var ROOT = null;","4489","  function getRootElement() {","4490","    if (ROOT) return ROOT;","4491","    ROOT = IS_OLD_OPERA ? document.body : document.documentElement;","4492","    return ROOT;","4493","  }","4494","","4495","  function getDimensions() {","4496","    return { width: this.getWidth(), height: this.getHeight() };","4497","  }","4498","","4499","  function getWidth() {","4500","    return getRootElement().clientWidth;","4501","  }","4502","","4503","  function getHeight() {","4504","    return getRootElement().clientHeight;","4505","  }","4506","","4507","  function getScrollOffsets() {","4508","    var x = window.pageXOffset || document.documentElement.scrollLeft ||","4509","     document.body.scrollLeft;","4510","    var y = window.pageYOffset || document.documentElement.scrollTop ||","4511","     document.body.scrollTop;","4512","","4513","    return new Element.Offset(x, y);","4514","  }","4515","","4516","  document.viewport = {","4517","    getDimensions:    getDimensions,","4518","    getWidth:         getWidth,","4519","    getHeight:        getHeight,","4520","    getScrollOffsets: getScrollOffsets","4521","  };","4522","","4569","","4570",";(function () {","4571","  function fakeDefine(fn) {","4572","    Prototype._actual_sizzle = fn();","4573","  }","4574","  fakeDefine.amd = true;","4575","","4576","  if (typeof define !== 'undefined' && define.amd) {","4577","    Prototype._original_define = define;","4578","    Prototype._actual_sizzle = null;","4579","    window.define = fakeDefine;","4580","  }","4581","})();","4582","","4584"," * Sizzle CSS Selector Engine v1.10.18","4585"," * http:\/\/sizzlejs.com\/","4586"," *","4587"," * Copyright 2013 jQuery Foundation, Inc. and other contributors","4588"," * Released under the MIT license","4589"," * http:\/\/jquery.org\/license","4590"," *","4591"," * Date: 2014-02-05","4593","(function( window ) {","4595","var i,","4596","\tsupport,","4597","\tExpr,","4598","\tgetText,","4599","\tisXML,","4600","\tcompile,","4601","\tselect,","4602","\toutermostContext,","4603","\tsortInput,","4604","\thasDuplicate,","4605","","4606","\tsetDocument,","4607","\tdocument,","4608","\tdocElem,","4609","\tdocumentIsHTML,","4610","\trbuggyQSA,","4611","\trbuggyMatches,","4612","\tmatches,","4613","\tcontains,","4614","","4615","\texpando = \"sizzle\" + -(new Date()),","4616","\tpreferredDoc = window.document,","4617","\tdirruns = 0,","4619","\tclassCache = createCache(),","4620","\ttokenCache = createCache(),","4621","\tcompilerCache = createCache(),","4622","\tsortOrder = function( a, b ) {","4623","\t\tif ( a === b ) {","4624","\t\t\thasDuplicate = true;","4625","\t\t}","4626","\t\treturn 0;","4627","\t},","4629","\tstrundefined = typeof undefined,","4630","\tMAX_NEGATIVE = 1 << 31,","4632","\thasOwn = ({}).hasOwnProperty,","4633","\tarr = [],","4634","\tpop = arr.pop,","4635","\tpush_native = arr.push,","4636","\tpush = arr.push,","4637","\tslice = arr.slice,","4638","\tindexOf = arr.indexOf || function( elem ) {","4639","\t\tvar i = 0,","4640","\t\t\tlen = this.length;","4641","\t\tfor ( ; i < len; i++ ) {","4642","\t\t\tif ( this[i] === elem ) {","4643","\t\t\t\treturn i;","4644","\t\t\t}","4645","\t\t}","4646","\t\treturn -1;","4647","\t},","4648","","4649","\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",","4650","","4651","","4652","\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",","4653","\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",","4654","","4655","\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),","4656","","4657","\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")\" + whitespace +","4658","\t\t\"*(?:([*^$|!~]?=)\" + whitespace + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + identifier + \")|)|)\" + whitespace + \"*\\\\]\",","4659","","4660","\tpseudos = \":(\" + characterEncoding + \")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes.replace( 3, 8 ) + \")*)|.*)\\\\)|)\",","4661","","4662","\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),","4663","","4664","\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),","4665","\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),","4666","","4667","\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),","4668","","4669","\trpseudo = new RegExp( pseudos ),","4670","\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),","4671","","4672","\tmatchExpr = {","4673","\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),","4674","\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),","4675","\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),","4676","\t\t\"ATTR\": new RegExp( \"^\" + attributes ),","4677","\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),","4678","\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +","4679","\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +","4680","\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),","4681","\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),","4682","\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +","4683","\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )","4684","\t},","4685","","4686","\trinputs = \/^(?:input|select|textarea|button)$\/i,","4687","\trheader = \/^h\\d$\/i,","4688","","4689","\trnative = \/^[^{]+\\{\\s*\\[native \\w\/,","4690","","4691","\trquickExpr = \/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$\/,","4692","","4693","\trsibling = \/[+~]\/,","4694","\trescape = \/'|\\\\\/g,","4695","","4696","\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),","4697","\tfunescape = function( _, escaped, escapedWhitespace ) {","4698","\t\tvar high = \"0x\" + escaped - 0x10000;","4699","\t\treturn high !== high || escapedWhitespace ?","4700","\t\t\tescaped :","4701","\t\t\thigh < 0 ?","4702","\t\t\t\tString.fromCharCode( high + 0x10000 ) :","4703","\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );","4704","\t};","4705","","4706","try {","4707","\tpush.apply(","4708","\t\t(arr = slice.call( preferredDoc.childNodes )),","4709","\t\tpreferredDoc.childNodes","4710","\t);","4711","\tarr[ preferredDoc.childNodes.length ].nodeType;","4712","} catch ( e ) {","4713","\tpush = { apply: arr.length ?","4714","","4715","\t\tfunction( target, els ) {","4716","\t\t\tpush_native.apply( target, slice.call(els) );","4717","\t\t} :","4718","","4719","\t\tfunction( target, els ) {","4720","\t\t\tvar j = target.length,","4721","\t\t\t\ti = 0;","4722","\t\t\twhile ( (target[j++] = els[i++]) ) {}","4723","\t\t\ttarget.length = j - 1;","4724","\t\t}","4725","\t};","4726","}","4727","","4728","function Sizzle( selector, context, results, seed ) {","4729","\tvar match, elem, m, nodeType,","4730","\t\ti, groups, old, nid, newContext, newSelector;","4731","","4732","\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {","4733","\t\tsetDocument( context );","4734","\t}","4735","","4736","\tcontext = context || document;","4743","\tif ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {","4744","\t\treturn [];","4745","\t}","4747","\tif ( documentIsHTML && !seed ) {","4749","\t\tif ( (match = rquickExpr.exec( selector )) ) {","4750","\t\t\tif ( (m = match[1]) ) {","4751","\t\t\t\tif ( nodeType === 9 ) {","4752","\t\t\t\t\telem = context.getElementById( m );","4753","\t\t\t\t\tif ( elem && elem.parentNode ) {","4754","\t\t\t\t\t\tif ( elem.id === m ) {","4755","\t\t\t\t\t\t\tresults.push( elem );","4756","\t\t\t\t\t\t\treturn results;","4757","\t\t\t\t\t\t}","4758","\t\t\t\t\t} else {","4759","\t\t\t\t\t\treturn results;","4760","\t\t\t\t\t}","4761","\t\t\t\t} else {","4762","\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&","4763","\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {","4764","\t\t\t\t\t\tresults.push( elem );","4765","\t\t\t\t\t\treturn results;","4766","\t\t\t\t\t}","4767","\t\t\t\t}","4769","\t\t\t} else if ( match[2] ) {","4770","\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );","4771","\t\t\t\treturn results;","4772","","4773","\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {","4774","\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );","4775","\t\t\t\treturn results;","4776","\t\t\t}","4777","\t\t}","4778","","4779","\t\tif ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {","4780","\t\t\tnid = old = expando;","4781","\t\t\tnewContext = context;","4782","\t\t\tnewSelector = nodeType === 9 && selector;","4783","","4784","\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {","4785","\t\t\t\tgroups = tokenize( selector );","4786","","4787","\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {","4788","\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );","4789","\t\t\t\t} else {","4790","\t\t\t\t\tcontext.setAttribute( \"id\", nid );","4791","\t\t\t\t}","4792","\t\t\t\tnid = \"[id='\" + nid + \"'] \";","4793","","4794","\t\t\t\ti = groups.length;","4795","\t\t\t\twhile ( i-- ) {","4796","\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );","4797","\t\t\t\t}","4798","\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;","4799","\t\t\t\tnewSelector = groups.join(\",\");","4800","\t\t\t}","4801","","4802","\t\t\tif ( newSelector ) {","4803","\t\t\t\ttry {","4804","\t\t\t\t\tpush.apply( results,","4805","\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )","4806","\t\t\t\t\t);","4807","\t\t\t\t\treturn results;","4808","\t\t\t\t} catch(qsaError) {","4809","\t\t\t\t} finally {","4810","\t\t\t\t\tif ( !old ) {","4811","\t\t\t\t\t\tcontext.removeAttribute(\"id\");","4812","\t\t\t\t\t}","4813","\t\t\t\t}","4814","\t\t\t}","4815","\t\t}","4816","\t}","4817","","4818","\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );","4819","}","4820","","4821","\/**","4822"," * Create key-value caches of limited size","4823"," * @returns {Function(string, Object)} Returns the Object data after storing it on itself with","4824"," *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)","4825"," *\tdeleting the oldest entry","4826"," *\/","4827","function createCache() {","4828","\tvar keys = [];","4829","","4830","\tfunction cache( key, value ) {","4831","\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {","4832","\t\t\tdelete cache[ keys.shift() ];","4833","\t\t}","4834","\t\treturn (cache[ key + \" \" ] = value);","4835","\t}","4836","\treturn cache;","4837","}","4838","","4839","\/**","4840"," * Mark a function for special use by Sizzle","4841"," * @param {Function} fn The function to mark","4842"," *\/","4843","function markFunction( fn ) {","4844","\tfn[ expando ] = true;","4845","\treturn fn;","4846","}","4847","","4848","\/**","4849"," * Support testing using an element","4850"," * @param {Function} fn Passed the created div and expects a boolean result","4851"," *\/","4852","function assert( fn ) {","4853","\tvar div = document.createElement(\"div\");","4854","","4855","\ttry {","4856","\t\treturn !!fn( div );","4857","\t} catch (e) {","4858","\t\treturn false;","4859","\t} finally {","4860","\t\tif ( div.parentNode ) {","4861","\t\t\tdiv.parentNode.removeChild( div );","4862","\t\t}","4863","\t\tdiv = null;","4864","\t}","4865","}","4866","","4867","\/**","4868"," * Adds the same handler for all of the specified attrs","4869"," * @param {String} attrs Pipe-separated list of attributes","4870"," * @param {Function} handler The method that will be applied","4871"," *\/","4872","function addHandle( attrs, handler ) {","4873","\tvar arr = attrs.split(\"|\"),","4874","\t\ti = attrs.length;","4875","","4876","\twhile ( i-- ) {","4877","\t\tExpr.attrHandle[ arr[i] ] = handler;","4878","\t}","4879","}","4880","","4881","\/**","4882"," * Checks document order of two siblings","4883"," * @param {Element} a","4884"," * @param {Element} b","4885"," * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b","4886"," *\/","4887","function siblingCheck( a, b ) {","4888","\tvar cur = b && a,","4889","\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&","4890","\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -","4891","\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );","4892","","4893","\tif ( diff ) {","4894","\t\treturn diff;","4895","\t}","4896","","4897","\tif ( cur ) {","4898","\t\twhile ( (cur = cur.nextSibling) ) {","4899","\t\t\tif ( cur === b ) {","4900","\t\t\t\treturn -1;","4901","\t\t\t}","4902","\t\t}","4903","\t}","4904","","4905","\treturn a ? 1 : -1;","4906","}","4907","","4908","\/**","4909"," * Returns a function to use in pseudos for input types","4910"," * @param {String} type","4911"," *\/","4912","function createInputPseudo( type ) {","4913","\treturn function( elem ) {","4914","\t\tvar name = elem.nodeName.toLowerCase();","4915","\t\treturn name === \"input\" && elem.type === type;","4916","\t};","4917","}","4918","","4919","\/**","4920"," * Returns a function to use in pseudos for buttons","4921"," * @param {String} type","4922"," *\/","4923","function createButtonPseudo( type ) {","4924","\treturn function( elem ) {","4925","\t\tvar name = elem.nodeName.toLowerCase();","4926","\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;","4927","\t};","4928","}","4929","","4930","\/**","4931"," * Returns a function to use in pseudos for positionals","4932"," * @param {Function} fn","4933"," *\/","4934","function createPositionalPseudo( fn ) {","4935","\treturn markFunction(function( argument ) {","4936","\t\targument = +argument;","4937","\t\treturn markFunction(function( seed, matches ) {","4938","\t\t\tvar j,","4939","\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),","4940","\t\t\t\ti = matchIndexes.length;","4941","","4942","\t\t\twhile ( i-- ) {","4943","\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {","4944","\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);","4945","\t\t\t\t}","4946","\t\t\t}","4947","\t\t});","4948","\t});","4949","}","4950","","4951","\/**","4952"," * Checks a node for validity as a Sizzle context","4953"," * @param {Element|Object=} context","4954"," * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value","4955"," *\/","4956","function testContext( context ) {","4957","\treturn context && typeof context.getElementsByTagName !== strundefined && context;","4958","}","4959","","4960","support = Sizzle.support = {};","4961","","4962","\/**","4963"," * Detects XML nodes","4964"," * @param {Element|Object} elem An element or a document","4965"," * @returns {Boolean} True iff elem is a non-HTML XML node","4966"," *\/","4967","isXML = Sizzle.isXML = function( elem ) {","4968","\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;","4969","\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;","4970","};","4971","","4972","\/**","4973"," * Sets document-related variables once based on the current document","4974"," * @param {Element|Object} [doc] An element or document object to use to set the document","4975"," * @returns {Object} Returns the current document","4976"," *\/","4977","setDocument = Sizzle.setDocument = function( node ) {","4978","\tvar hasCompare,","4979","\t\tdoc = node ? node.ownerDocument || node : preferredDoc,","4980","\t\tparent = doc.defaultView;","4981","","4982","\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {","4983","\t\treturn document;","4984","\t}","4985","","4986","\tdocument = doc;","4987","\tdocElem = doc.documentElement;","4988","","4989","\tdocumentIsHTML = !isXML( doc );","4990","","4991","\tif ( parent && parent !== parent.top ) {","4992","\t\tif ( parent.addEventListener ) {","4993","\t\t\tparent.addEventListener( \"unload\", function() {","4994","\t\t\t\tsetDocument();","4995","\t\t\t}, false );","4996","\t\t} else if ( parent.attachEvent ) {","4997","\t\t\tparent.attachEvent( \"onunload\", function() {","4998","\t\t\t\tsetDocument();","4999","\t\t\t});","5000","\t\t}","5001","\t}","5002","","5003","\t\/* Attributes","5004","\t---------------------------------------------------------------------- *\/","5005","","5006","\tsupport.attributes = assert(function( div ) {","5007","\t\tdiv.className = \"i\";","5008","\t\treturn !div.getAttribute(\"className\");","5009","\t});","5010","","5011","\t\/* getElement(s)By*","5012","\t---------------------------------------------------------------------- *\/","5013","","5014","\tsupport.getElementsByTagName = assert(function( div ) {","5015","\t\tdiv.appendChild( doc.createComment(\"\") );","5016","\t\treturn !div.getElementsByTagName(\"*\").length;","5017","\t});","5018","","5019","\tsupport.getElementsByClassName = rnative.test( doc.getElementsByClassName ) && assert(function( div ) {","5020","\t\tdiv.innerHTML = \"<div class='a'><\/div><div class='a i'><\/div>\";","5021","","5022","\t\tdiv.firstChild.className = \"i\";","5023","\t\treturn div.getElementsByClassName(\"i\").length === 2;","5024","\t});","5025","","5026","\tsupport.getById = assert(function( div ) {","5027","\t\tdocElem.appendChild( div ).id = expando;","5028","\t\treturn !doc.getElementsByName || !doc.getElementsByName( expando ).length;","5029","\t});","5030","","5031","\tif ( support.getById ) {","5032","\t\tExpr.find[\"ID\"] = function( id, context ) {","5033","\t\t\tif ( typeof context.getElementById !== strundefined && documentIsHTML ) {","5034","\t\t\t\tvar m = context.getElementById( id );","5035","\t\t\t\treturn m && m.parentNode ? [m] : [];","5036","\t\t\t}","5037","\t\t};","5038","\t\tExpr.filter[\"ID\"] = function( id ) {","5039","\t\t\tvar attrId = id.replace( runescape, funescape );","5040","\t\t\treturn function( elem ) {","5041","\t\t\t\treturn elem.getAttribute(\"id\") === attrId;","5042","\t\t\t};","5043","\t\t};","5044","\t} else {","5045","\t\tdelete Expr.find[\"ID\"];","5046","","5047","\t\tExpr.filter[\"ID\"] =  function( id ) {","5048","\t\t\tvar attrId = id.replace( runescape, funescape );","5049","\t\t\treturn function( elem ) {","5050","\t\t\t\tvar node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode(\"id\");","5051","\t\t\t\treturn node && node.value === attrId;","5052","\t\t\t};","5053","\t\t};","5054","\t}","5055","","5056","\tExpr.find[\"TAG\"] = support.getElementsByTagName ?","5057","\t\tfunction( tag, context ) {","5058","\t\t\tif ( typeof context.getElementsByTagName !== strundefined ) {","5059","\t\t\t\treturn context.getElementsByTagName( tag );","5060","\t\t\t}","5061","\t\t} :","5062","\t\tfunction( tag, context ) {","5063","\t\t\tvar elem,","5064","\t\t\t\ttmp = [],","5065","\t\t\t\ti = 0,","5066","\t\t\t\tresults = context.getElementsByTagName( tag );","5067","","5068","\t\t\tif ( tag === \"*\" ) {","5069","\t\t\t\twhile ( (elem = results[i++]) ) {","5070","\t\t\t\t\tif ( elem.nodeType === 1 ) {","5071","\t\t\t\t\t\ttmp.push( elem );","5072","\t\t\t\t\t}","5073","\t\t\t\t}","5074","","5075","\t\t\t\treturn tmp;","5076","\t\t\t}","5077","\t\t\treturn results;","5078","\t\t};","5079","","5080","\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {","5081","\t\tif ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {","5082","\t\t\treturn context.getElementsByClassName( className );","5083","\t\t}","5084","\t};","5085","","5086","\t\/* QSA\/matchesSelector","5087","\t---------------------------------------------------------------------- *\/","5088","","5089","","5090","\trbuggyMatches = [];","5091","","5092","\trbuggyQSA = [];","5093","","5094","\tif ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {","5095","\t\tassert(function( div ) {","5096","\t\t\tdiv.innerHTML = \"<select t=''><option selected=''><\/option><\/select>\";","5097","","5098","\t\t\tif ( div.querySelectorAll(\"[t^='']\").length ) {","5099","\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );","5100","\t\t\t}","5101","","5102","\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {","5103","\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );","5104","\t\t\t}","5105","","5106","\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {","5107","\t\t\t\trbuggyQSA.push(\":checked\");","5108","\t\t\t}","5109","\t\t});","5110","","5111","\t\tassert(function( div ) {","5112","\t\t\tvar input = doc.createElement(\"input\");","5113","\t\t\tinput.setAttribute( \"type\", \"hidden\" );","5114","\t\t\tdiv.appendChild( input ).setAttribute( \"name\", \"D\" );","5115","","5116","\t\t\tif ( div.querySelectorAll(\"[name=d]\").length ) {","5117","\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );","5118","\t\t\t}","5119","","5120","\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {","5121","\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );","5122","\t\t\t}","5123","","5124","\t\t\tdiv.querySelectorAll(\"*,:x\");","5125","\t\t\trbuggyQSA.push(\",.*:\");","5126","\t\t});","5127","\t}","5128","","5129","\tif ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||","5130","\t\tdocElem.mozMatchesSelector ||","5131","\t\tdocElem.oMatchesSelector ||","5132","\t\tdocElem.msMatchesSelector) )) ) {","5133","","5134","\t\tassert(function( div ) {","5135","\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );","5136","","5137","\t\t\tmatches.call( div, \"[s!='']:x\" );","5138","\t\t\trbuggyMatches.push( \"!=\", pseudos );","5139","\t\t});","5140","\t}","5141","","5142","\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );","5143","\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );","5144","","5145","\t\/* Contains","5146","\t---------------------------------------------------------------------- *\/","5147","\thasCompare = rnative.test( docElem.compareDocumentPosition );","5148","","5149","\tcontains = hasCompare || rnative.test( docElem.contains ) ?","5150","\t\tfunction( a, b ) {","5151","\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,","5152","\t\t\t\tbup = b && b.parentNode;","5153","\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (","5154","\t\t\t\tadown.contains ?","5155","\t\t\t\t\tadown.contains( bup ) :","5156","\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16","5157","\t\t\t));","5158","\t\t} :","5159","\t\tfunction( a, b ) {","5160","\t\t\tif ( b ) {","5161","\t\t\t\twhile ( (b = b.parentNode) ) {","5162","\t\t\t\t\tif ( b === a ) {","5163","\t\t\t\t\t\treturn true;","5164","\t\t\t\t\t}","5165","\t\t\t\t}","5166","\t\t\t}","5167","\t\t\treturn false;","5168","\t\t};","5169","","5170","\t\/* Sorting","5171","\t---------------------------------------------------------------------- *\/","5172","","5173","\tsortOrder = hasCompare ?","5174","\tfunction( a, b ) {","5175","","5176","\t\tif ( a === b ) {","5177","\t\t\thasDuplicate = true;","5178","\t\t\treturn 0;","5179","\t\t}","5180","","5181","\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;","5182","\t\tif ( compare ) {","5183","\t\t\treturn compare;","5184","\t\t}","5185","","5186","\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?","5187","\t\t\ta.compareDocumentPosition( b ) :","5188","","5189","\t\t\t1;","5190","","5191","\t\tif ( compare & 1 ||","5192","\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {","5193","","5194","\t\t\tif ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {","5195","\t\t\t\treturn -1;","5196","\t\t\t}","5197","\t\t\tif ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {","5198","\t\t\t\treturn 1;","5199","\t\t\t}","5200","","5201","\t\t\treturn sortInput ?","5202","\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :","5203","\t\t\t\t0;","5204","\t\t}","5205","","5206","\t\treturn compare & 4 ? -1 : 1;","5207","\t} :","5208","\tfunction( a, b ) {","5209","\t\tif ( a === b ) {","5210","\t\t\thasDuplicate = true;","5211","\t\t\treturn 0;","5212","\t\t}","5213","","5214","\t\tvar cur,","5215","\t\t\ti = 0,","5216","\t\t\taup = a.parentNode,","5217","\t\t\tbup = b.parentNode,","5218","\t\t\tap = [ a ],","5219","\t\t\tbp = [ b ];","5220","","5221","\t\tif ( !aup || !bup ) {","5222","\t\t\treturn a === doc ? -1 :","5223","\t\t\t\tb === doc ? 1 :","5224","\t\t\t\taup ? -1 :","5225","\t\t\t\tbup ? 1 :","5226","\t\t\t\tsortInput ?","5227","\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :","5228","\t\t\t\t0;","5229","","5230","\t\t} else if ( aup === bup ) {","5231","\t\t\treturn siblingCheck( a, b );","5232","\t\t}","5233","","5234","\t\tcur = a;","5235","\t\twhile ( (cur = cur.parentNode) ) {","5236","\t\t\tap.unshift( cur );","5237","\t\t}","5238","\t\tcur = b;","5239","\t\twhile ( (cur = cur.parentNode) ) {","5240","\t\t\tbp.unshift( cur );","5241","\t\t}","5242","","5243","\t\twhile ( ap[i] === bp[i] ) {","5244","\t\t\ti++;","5245","\t\t}","5246","","5247","\t\treturn i ?","5248","\t\t\tsiblingCheck( ap[i], bp[i] ) :","5249","","5250","\t\t\tap[i] === preferredDoc ? -1 :","5251","\t\t\tbp[i] === preferredDoc ? 1 :","5252","\t\t\t0;","5253","\t};","5254","","5255","\treturn doc;","5256","};","5257","","5258","Sizzle.matches = function( expr, elements ) {","5259","\treturn Sizzle( expr, null, null, elements );","5260","};","5261","","5262","Sizzle.matchesSelector = function( elem, expr ) {","5263","\tif ( ( elem.ownerDocument || elem ) !== document ) {","5264","\t\tsetDocument( elem );","5265","\t}","5266","","5267","\texpr = expr.replace( rattributeQuotes, \"='$1']\" );","5268","","5269","\tif ( support.matchesSelector && documentIsHTML &&","5270","\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&","5271","\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {","5272","","5273","\t\ttry {","5274","\t\t\tvar ret = matches.call( elem, expr );","5275","","5276","\t\t\tif ( ret || support.disconnectedMatch ||","5277","\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {","5278","\t\t\t\treturn ret;","5279","\t\t\t}","5280","\t\t} catch(e) {}","5281","\t}","5282","","5283","\treturn Sizzle( expr, document, null, [elem] ).length > 0;","5284","};","5285","","5286","Sizzle.contains = function( context, elem ) {","5287","\tif ( ( context.ownerDocument || context ) !== document ) {","5288","\t\tsetDocument( context );","5289","\t}","5290","\treturn contains( context, elem );","5291","};","5292","","5293","Sizzle.attr = function( elem, name ) {","5294","\tif ( ( elem.ownerDocument || elem ) !== document ) {","5295","\t\tsetDocument( elem );","5296","\t}","5297","","5298","\tvar fn = Expr.attrHandle[ name.toLowerCase() ],","5299","\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?","5300","\t\t\tfn( elem, name, !documentIsHTML ) :","5301","\t\t\tundefined;","5302","","5303","\treturn val !== undefined ?","5304","\t\tval :","5305","\t\tsupport.attributes || !documentIsHTML ?","5306","\t\t\telem.getAttribute( name ) :","5307","\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?","5308","\t\t\t\tval.value :","5309","\t\t\t\tnull;","5310","};","5311","","5312","Sizzle.error = function( msg ) {","5313","\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );","5314","};","5315","","5316","\/**","5317"," * Document sorting and removing duplicates","5318"," * @param {ArrayLike} results","5319"," *\/","5320","Sizzle.uniqueSort = function( results ) {","5321","\tvar elem,","5322","\t\tduplicates = [],","5323","\t\tj = 0,","5324","\t\ti = 0;","5325","","5326","\thasDuplicate = !support.detectDuplicates;","5327","\tsortInput = !support.sortStable && results.slice( 0 );","5328","\tresults.sort( sortOrder );","5329","","5330","\tif ( hasDuplicate ) {","5331","\t\twhile ( (elem = results[i++]) ) {","5332","\t\t\tif ( elem === results[ i ] ) {","5333","\t\t\t\tj = duplicates.push( i );","5334","\t\t\t}","5335","\t\t}","5336","\t\twhile ( j-- ) {","5337","\t\t\tresults.splice( duplicates[ j ], 1 );","5338","\t\t}","5339","\t}","5340","","5341","\tsortInput = null;","5342","","5343","\treturn results;","5344","};","5345","","5346","\/**","5347"," * Utility function for retrieving the text value of an array of DOM nodes","5348"," * @param {Array|Element} elem","5349"," *\/","5350","getText = Sizzle.getText = function( elem ) {","5351","\tvar node,","5352","\t\tret = \"\",","5353","\t\ti = 0,","5354","\t\tnodeType = elem.nodeType;","5355","","5356","\tif ( !nodeType ) {","5357","\t\twhile ( (node = elem[i++]) ) {","5358","\t\t\tret += getText( node );","5359","\t\t}","5360","\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {","5361","\t\tif ( typeof elem.textContent === \"string\" ) {","5362","\t\t\treturn elem.textContent;","5363","\t\t} else {","5364","\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {","5365","\t\t\t\tret += getText( elem );","5366","\t\t\t}","5367","\t\t}","5368","\t} else if ( nodeType === 3 || nodeType === 4 ) {","5369","\t\treturn elem.nodeValue;","5370","\t}","5371","","5372","\treturn ret;","5373","};","5374","","5375","Expr = Sizzle.selectors = {","5376","","5377","\tcacheLength: 50,","5378","","5379","\tcreatePseudo: markFunction,","5380","","5381","\tmatch: matchExpr,","5382","","5383","\tattrHandle: {},","5384","","5385","\tfind: {},","5386","","5387","\trelative: {","5388","\t\t\">\": { dir: \"parentNode\", first: true },","5389","\t\t\" \": { dir: \"parentNode\" },","5390","\t\t\"+\": { dir: \"previousSibling\", first: true },","5391","\t\t\"~\": { dir: \"previousSibling\" }","5392","\t},","5393","","5394","\tpreFilter: {","5395","\t\t\"ATTR\": function( match ) {","5396","\t\t\tmatch[1] = match[1].replace( runescape, funescape );","5397","","5398","\t\t\tmatch[3] = ( match[4] || match[5] || \"\" ).replace( runescape, funescape );","5399","","5400","\t\t\tif ( match[2] === \"~=\" ) {","5401","\t\t\t\tmatch[3] = \" \" + match[3] + \" \";","5402","\t\t\t}","5403","","5404","\t\t\treturn match.slice( 0, 4 );","5405","\t\t},","5406","","5407","\t\t\"CHILD\": function( match ) {","5408","\t\t\t\/* matches from matchExpr[\"CHILD\"]","5409","\t\t\t\t1 type (only|nth|...)","5410","\t\t\t\t2 what (child|of-type)","5411","\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)","5412","\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)","5413","\t\t\t\t5 sign of xn-component","5414","\t\t\t\t6 x of xn-component","5415","\t\t\t\t7 sign of y-component","5416","\t\t\t\t8 y of y-component","5417","\t\t\t*\/","5418","\t\t\tmatch[1] = match[1].toLowerCase();","5419","","5420","\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {","5421","\t\t\t\tif ( !match[3] ) {","5422","\t\t\t\t\tSizzle.error( match[0] );","5423","\t\t\t\t}","5424","","5425","\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );","5426","\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );","5427","","5428","\t\t\t} else if ( match[3] ) {","5429","\t\t\t\tSizzle.error( match[0] );","5430","\t\t\t}","5431","","5432","\t\t\treturn match;","5433","\t\t},","5434","","5435","\t\t\"PSEUDO\": function( match ) {","5436","\t\t\tvar excess,","5437","\t\t\t\tunquoted = !match[5] && match[2];","5438","","5439","\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {","5440","\t\t\t\treturn null;","5441","\t\t\t}","5442","","5443","\t\t\tif ( match[3] && match[4] !== undefined ) {","5444","\t\t\t\tmatch[2] = match[4];","5445","","5446","\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&","5447","\t\t\t\t(excess = tokenize( unquoted, true )) &&","5448","\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {","5449","","5450","\t\t\t\tmatch[0] = match[0].slice( 0, excess );","5451","\t\t\t\tmatch[2] = unquoted.slice( 0, excess );","5452","\t\t\t}","5453","","5454","\t\t\treturn match.slice( 0, 3 );","5455","\t\t}","5456","\t},","5457","","5458","\tfilter: {","5459","","5460","\t\t\"TAG\": function( nodeNameSelector ) {","5461","\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();","5462","\t\t\treturn nodeNameSelector === \"*\" ?","5463","\t\t\t\tfunction() { return true; } :","5464","\t\t\t\tfunction( elem ) {","5465","\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;","5466","\t\t\t\t};","5467","\t\t},","5468","","5469","\t\t\"CLASS\": function( className ) {","5470","\t\t\tvar pattern = classCache[ className + \" \" ];","5471","","5472","\t\t\treturn pattern ||","5473","\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&","5474","\t\t\t\tclassCache( className, function( elem ) {","5475","\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute(\"class\") || \"\" );","5476","\t\t\t\t});","5477","\t\t},","5478","","5479","\t\t\"ATTR\": function( name, operator, check ) {","5480","\t\t\treturn function( elem ) {","5481","\t\t\t\tvar result = Sizzle.attr( elem, name );","5482","","5483","\t\t\t\tif ( result == null ) {","5484","\t\t\t\t\treturn operator === \"!=\";","5485","\t\t\t\t}","5486","\t\t\t\tif ( !operator ) {","5487","\t\t\t\t\treturn true;","5488","\t\t\t\t}","5489","","5490","\t\t\t\tresult += \"\";","5491","","5492","\t\t\t\treturn operator === \"=\" ? result === check :","5493","\t\t\t\t\toperator === \"!=\" ? result !== check :","5494","\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :","5495","\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :","5496","\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :","5497","\t\t\t\t\toperator === \"~=\" ? ( \" \" + result + \" \" ).indexOf( check ) > -1 :","5498","\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :","5499","\t\t\t\t\tfalse;","5500","\t\t\t};","5501","\t\t},","5502","","5503","\t\t\"CHILD\": function( type, what, argument, first, last ) {","5504","\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",","5505","\t\t\t\tforward = type.slice( -4 ) !== \"last\",","5506","\t\t\t\tofType = what === \"of-type\";","5507","","5508","\t\t\treturn first === 1 && last === 0 ?","5509","","5510","\t\t\t\tfunction( elem ) {","5511","\t\t\t\t\treturn !!elem.parentNode;","5512","\t\t\t\t} :","5513","","5514","\t\t\t\tfunction( elem, context, xml ) {","5515","\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,","5516","\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",","5517","\t\t\t\t\t\tparent = elem.parentNode,","5518","\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),","5519","\t\t\t\t\t\tuseCache = !xml && !ofType;","5520","","5521","\t\t\t\t\tif ( parent ) {","5522","","5523","\t\t\t\t\t\tif ( simple ) {","5524","\t\t\t\t\t\t\twhile ( dir ) {","5525","\t\t\t\t\t\t\t\tnode = elem;","5526","\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {","5527","\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {","5528","\t\t\t\t\t\t\t\t\t\treturn false;","5529","\t\t\t\t\t\t\t\t\t}","5530","\t\t\t\t\t\t\t\t}","5531","\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";","5532","\t\t\t\t\t\t\t}","5533","\t\t\t\t\t\t\treturn true;","5534","\t\t\t\t\t\t}","5535","","5536","\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];","5537","","5538","\t\t\t\t\t\tif ( forward && useCache ) {","5539","\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});","5540","\t\t\t\t\t\t\tcache = outerCache[ type ] || [];","5541","\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];","5542","\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];","5543","\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];","5544","","5545","\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||","5546","","5547","\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {","5548","","5549","\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {","5550","\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];","5551","\t\t\t\t\t\t\t\t\tbreak;","5552","\t\t\t\t\t\t\t\t}","5553","\t\t\t\t\t\t\t}","5554","","5555","\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {","5556","\t\t\t\t\t\t\tdiff = cache[1];","5557","","5558","\t\t\t\t\t\t} else {","5559","\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||","5560","\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {","5561","","5562","\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {","5563","\t\t\t\t\t\t\t\t\tif ( useCache ) {","5564","\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];","5565","\t\t\t\t\t\t\t\t\t}","5566","","5567","\t\t\t\t\t\t\t\t\tif ( node === elem ) {","5568","\t\t\t\t\t\t\t\t\t\tbreak;","5569","\t\t\t\t\t\t\t\t\t}","5570","\t\t\t\t\t\t\t\t}","5571","\t\t\t\t\t\t\t}","5572","\t\t\t\t\t\t}","5573","","5574","\t\t\t\t\t\tdiff -= last;","5575","\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff \/ first >= 0 );","5576","\t\t\t\t\t}","5577","\t\t\t\t};","5578","\t\t},","5579","","5580","\t\t\"PSEUDO\": function( pseudo, argument ) {","5581","\t\t\tvar args,","5582","\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||","5583","\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );","5584","","5585","\t\t\tif ( fn[ expando ] ) {","5586","\t\t\t\treturn fn( argument );","5587","\t\t\t}","5588","","5589","\t\t\tif ( fn.length > 1 ) {","5590","\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];","5591","\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?","5592","\t\t\t\t\tmarkFunction(function( seed, matches ) {","5593","\t\t\t\t\t\tvar idx,","5594","\t\t\t\t\t\t\tmatched = fn( seed, argument ),","5595","\t\t\t\t\t\t\ti = matched.length;","5596","\t\t\t\t\t\twhile ( i-- ) {","5597","\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[i] );","5598","\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );","5599","\t\t\t\t\t\t}","5600","\t\t\t\t\t}) :","5601","\t\t\t\t\tfunction( elem ) {","5602","\t\t\t\t\t\treturn fn( elem, 0, args );","5603","\t\t\t\t\t};","5604","\t\t\t}","5605","","5606","\t\t\treturn fn;","5607","\t\t}","5608","\t},","5609","","5610","\tpseudos: {","5611","\t\t\"not\": markFunction(function( selector ) {","5612","\t\t\tvar input = [],","5613","\t\t\t\tresults = [],","5614","\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );","5615","","5616","\t\t\treturn matcher[ expando ] ?","5617","\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {","5618","\t\t\t\t\tvar elem,","5619","\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),","5620","\t\t\t\t\t\ti = seed.length;","5621","","5622","\t\t\t\t\twhile ( i-- ) {","5623","\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {","5624","\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);","5625","\t\t\t\t\t\t}","5626","\t\t\t\t\t}","5627","\t\t\t\t}) :","5628","\t\t\t\tfunction( elem, context, xml ) {","5629","\t\t\t\t\tinput[0] = elem;","5630","\t\t\t\t\tmatcher( input, null, xml, results );","5631","\t\t\t\t\treturn !results.pop();","5632","\t\t\t\t};","5633","\t\t}),","5634","","5635","\t\t\"has\": markFunction(function( selector ) {","5636","\t\t\treturn function( elem ) {","5637","\t\t\t\treturn Sizzle( selector, elem ).length > 0;","5638","\t\t\t};","5639","\t\t}),","5640","","5641","\t\t\"contains\": markFunction(function( text ) {","5642","\t\t\treturn function( elem ) {","5643","\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;","5644","\t\t\t};","5645","\t\t}),","5646","","5647","\t\t\"lang\": markFunction( function( lang ) {","5648","\t\t\tif ( !ridentifier.test(lang || \"\") ) {","5649","\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );","5650","\t\t\t}","5651","\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();","5652","\t\t\treturn function( elem ) {","5653","\t\t\t\tvar elemLang;","5654","\t\t\t\tdo {","5655","\t\t\t\t\tif ( (elemLang = documentIsHTML ?","5656","\t\t\t\t\t\telem.lang :","5657","\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {","5658","","5659","\t\t\t\t\t\telemLang = elemLang.toLowerCase();","5660","\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;","5661","\t\t\t\t\t}","5662","\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );","5663","\t\t\t\treturn false;","5664","\t\t\t};","5665","\t\t}),","5666","","5667","\t\t\"target\": function( elem ) {","5668","\t\t\tvar hash = window.location && window.location.hash;","5669","\t\t\treturn hash && hash.slice( 1 ) === elem.id;","5670","\t\t},","5671","","5672","\t\t\"root\": function( elem ) {","5673","\t\t\treturn elem === docElem;","5674","\t\t},","5675","","5676","\t\t\"focus\": function( elem ) {","5677","\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);","5678","\t\t},","5679","","5680","\t\t\"enabled\": function( elem ) {","5681","\t\t\treturn elem.disabled === false;","5682","\t\t},","5683","","5684","\t\t\"disabled\": function( elem ) {","5685","\t\t\treturn elem.disabled === true;","5686","\t\t},","5687","","5688","\t\t\"checked\": function( elem ) {","5689","\t\t\tvar nodeName = elem.nodeName.toLowerCase();","5690","\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);","5691","\t\t},","5692","","5693","\t\t\"selected\": function( elem ) {","5694","\t\t\tif ( elem.parentNode ) {","5695","\t\t\t\telem.parentNode.selectedIndex;","5696","\t\t\t}","5697","","5698","\t\t\treturn elem.selected === true;","5699","\t\t},","5700","","5701","\t\t\"empty\": function( elem ) {","5702","\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {","5703","\t\t\t\tif ( elem.nodeType < 6 ) {","5704","\t\t\t\t\treturn false;","5705","\t\t\t\t}","5706","\t\t\t}","5707","\t\t\treturn true;","5708","\t\t},","5709","","5710","\t\t\"parent\": function( elem ) {","5711","\t\t\treturn !Expr.pseudos[\"empty\"]( elem );","5712","\t\t},","5713","","5714","\t\t\"header\": function( elem ) {","5715","\t\t\treturn rheader.test( elem.nodeName );","5716","\t\t},","5717","","5718","\t\t\"input\": function( elem ) {","5719","\t\t\treturn rinputs.test( elem.nodeName );","5720","\t\t},","5721","","5722","\t\t\"button\": function( elem ) {","5723","\t\t\tvar name = elem.nodeName.toLowerCase();","5724","\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";","5725","\t\t},","5726","","5727","\t\t\"text\": function( elem ) {","5728","\t\t\tvar attr;","5729","\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&","5730","\t\t\t\telem.type === \"text\" &&","5731","","5732","\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );","5733","\t\t},","5734","","5735","\t\t\"first\": createPositionalPseudo(function() {","5736","\t\t\treturn [ 0 ];","5737","\t\t}),","5738","","5739","\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {","5740","\t\t\treturn [ length - 1 ];","5741","\t\t}),","5742","","5743","\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {","5744","\t\t\treturn [ argument < 0 ? argument + length : argument ];","5745","\t\t}),","5746","","5747","\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {","5748","\t\t\tvar i = 0;","5749","\t\t\tfor ( ; i < length; i += 2 ) {","5750","\t\t\t\tmatchIndexes.push( i );","5751","\t\t\t}","5752","\t\t\treturn matchIndexes;","5753","\t\t}),","5754","","5755","\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {","5756","\t\t\tvar i = 1;","5757","\t\t\tfor ( ; i < length; i += 2 ) {","5758","\t\t\t\tmatchIndexes.push( i );","5759","\t\t\t}","5760","\t\t\treturn matchIndexes;","5761","\t\t}),","5762","","5763","\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {","5764","\t\t\tvar i = argument < 0 ? argument + length : argument;","5765","\t\t\tfor ( ; --i >= 0; ) {","5766","\t\t\t\tmatchIndexes.push( i );","5767","\t\t\t}","5768","\t\t\treturn matchIndexes;","5769","\t\t}),","5770","","5771","\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {","5772","\t\t\tvar i = argument < 0 ? argument + length : argument;","5773","\t\t\tfor ( ; ++i < length; ) {","5774","\t\t\t\tmatchIndexes.push( i );","5775","\t\t\t}","5776","\t\t\treturn matchIndexes;","5777","\t\t})","5778","\t}","5779","};","5780","","5781","Expr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];","5782","","5783","for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {","5784","\tExpr.pseudos[ i ] = createInputPseudo( i );","5785","}","5786","for ( i in { submit: true, reset: true } ) {","5787","\tExpr.pseudos[ i ] = createButtonPseudo( i );","5788","}","5789","","5790","function setFilters() {}","5791","setFilters.prototype = Expr.filters = Expr.pseudos;","5792","Expr.setFilters = new setFilters();","5793","","5794","function tokenize( selector, parseOnly ) {","5795","\tvar matched, match, tokens, type,","5796","\t\tsoFar, groups, preFilters,","5797","\t\tcached = tokenCache[ selector + \" \" ];","5798","","5799","\tif ( cached ) {","5800","\t\treturn parseOnly ? 0 : cached.slice( 0 );","5801","\t}","5802","","5803","\tsoFar = selector;","5804","\tgroups = [];","5805","\tpreFilters = Expr.preFilter;","5806","","5807","\twhile ( soFar ) {","5808","","5809","\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {","5810","\t\t\tif ( match ) {","5811","\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;","5812","\t\t\t}","5813","\t\t\tgroups.push( (tokens = []) );","5814","\t\t}","5815","","5816","\t\tmatched = false;","5817","","5818","\t\tif ( (match = rcombinators.exec( soFar )) ) {","5819","\t\t\tmatched = match.shift();","5820","\t\t\ttokens.push({","5821","\t\t\t\tvalue: matched,","5822","\t\t\t\ttype: match[0].replace( rtrim, \" \" )","5823","\t\t\t});","5824","\t\t\tsoFar = soFar.slice( matched.length );","5825","\t\t}","5826","","5827","\t\tfor ( type in Expr.filter ) {","5828","\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||","5829","\t\t\t\t(match = preFilters[ type ]( match ))) ) {","5830","\t\t\t\tmatched = match.shift();","5831","\t\t\t\ttokens.push({","5832","\t\t\t\t\tvalue: matched,","5833","\t\t\t\t\ttype: type,","5834","\t\t\t\t\tmatches: match","5835","\t\t\t\t});","5836","\t\t\t\tsoFar = soFar.slice( matched.length );","5837","\t\t\t}","5838","\t\t}","5839","","5840","\t\tif ( !matched ) {","5845","\treturn parseOnly ?","5846","\t\tsoFar.length :","5847","\t\tsoFar ?","5848","\t\t\tSizzle.error( selector ) :","5849","\t\t\ttokenCache( selector, groups ).slice( 0 );","5850","}","5852","function toSelector( tokens ) {","5853","\tvar i = 0,","5854","\t\tlen = tokens.length,","5855","\t\tselector = \"\";","5856","\tfor ( ; i < len; i++ ) {","5857","\t\tselector += tokens[i].value;","5858","\t}","5859","\treturn selector;","5860","}","5862","function addCombinator( matcher, combinator, base ) {","5863","\tvar dir = combinator.dir,","5864","\t\tcheckNonElements = base && dir === \"parentNode\",","5865","\t\tdoneName = done++;","5867","\treturn combinator.first ?","5868","\t\tfunction( elem, context, xml ) {","5869","\t\t\twhile ( (elem = elem[ dir ]) ) {","5870","\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {","5871","\t\t\t\t\treturn matcher( elem, context, xml );","5872","\t\t\t\t}","5874","\t\t} :","5876","\t\tfunction( elem, context, xml ) {","5877","\t\t\tvar oldCache, outerCache,","5878","\t\t\t\tnewCache = [ dirruns, doneName ];","5880","\t\t\tif ( xml ) {","5881","\t\t\t\twhile ( (elem = elem[ dir ]) ) {","5882","\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {","5883","\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {","5884","\t\t\t\t\t\t\treturn true;","5885","\t\t\t\t\t\t}","5886","\t\t\t\t\t}","5887","\t\t\t\t}","5889","\t\t\t\twhile ( (elem = elem[ dir ]) ) {","5890","\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {","5891","\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});","5892","\t\t\t\t\t\tif ( (oldCache = outerCache[ dir ]) &&","5893","\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {","5894","","5895","\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);","5896","\t\t\t\t\t\t} else {","5897","\t\t\t\t\t\t\touterCache[ dir ] = newCache;","5898","","5899","\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {","5900","\t\t\t\t\t\t\t\treturn true;","5901","\t\t\t\t\t\t\t}","5902","\t\t\t\t\t\t}","5903","\t\t\t\t\t}","5904","\t\t\t\t}","5906","\t\t};","5907","}","5909","function elementMatcher( matchers ) {","5910","\treturn matchers.length > 1 ?","5911","\t\tfunction( elem, context, xml ) {","5912","\t\t\tvar i = matchers.length;","5913","\t\t\twhile ( i-- ) {","5914","\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {","5915","\t\t\t\t\treturn false;","5917","\t\t\t}","5918","\t\t\treturn true;","5919","\t\t} :","5920","\t\tmatchers[0];","5921","}","5923","function multipleContexts( selector, contexts, results ) {","5924","\tvar i = 0,","5925","\t\tlen = contexts.length;","5926","\tfor ( ; i < len; i++ ) {","5927","\t\tSizzle( selector, contexts[i], results );","5930","}","5931","","5932","function condense( unmatched, map, filter, context, xml ) {","5933","\tvar elem,","5934","\t\tnewUnmatched = [],","5935","\t\ti = 0,","5936","\t\tlen = unmatched.length,","5937","\t\tmapped = map != null;","5938","","5939","\tfor ( ; i < len; i++ ) {","5940","\t\tif ( (elem = unmatched[i]) ) {","5941","\t\t\tif ( !filter || filter( elem, context, xml ) ) {","5942","\t\t\t\tnewUnmatched.push( elem );","5943","\t\t\t\tif ( mapped ) {","5944","\t\t\t\t\tmap.push( i );","5945","\t\t\t\t}","5946","\t\t\t}","5947","\t\t}","5948","\t}","5949","","5950","\treturn newUnmatched;","5951","}","5952","","5953","function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {","5954","\tif ( postFilter && !postFilter[ expando ] ) {","5955","\t\tpostFilter = setMatcher( postFilter );","5956","\t}","5957","\tif ( postFinder && !postFinder[ expando ] ) {","5958","\t\tpostFinder = setMatcher( postFinder, postSelector );","5959","\t}","5960","\treturn markFunction(function( seed, results, context, xml ) {","5961","\t\tvar temp, i, elem,","5962","\t\t\tpreMap = [],","5963","\t\t\tpostMap = [],","5964","\t\t\tpreexisting = results.length,","5965","","5966","\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),","5967","","5968","\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?","5969","\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :","5970","\t\t\t\telems,","5971","","5972","\t\t\tmatcherOut = matcher ?","5973","\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?","5974","","5975","\t\t\t\t\t[] :","5976","","5977","\t\t\t\t\tresults :","5978","\t\t\t\tmatcherIn;","5979","","5980","\t\tif ( matcher ) {","5981","\t\t\tmatcher( matcherIn, matcherOut, context, xml );","5982","\t\t}","5983","","5984","\t\tif ( postFilter ) {","5985","\t\t\ttemp = condense( matcherOut, postMap );","5986","\t\t\tpostFilter( temp, [], context, xml );","5987","","5988","\t\t\ti = temp.length;","5989","\t\t\twhile ( i-- ) {","5990","\t\t\t\tif ( (elem = temp[i]) ) {","5991","\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);","5992","\t\t\t\t}","5993","\t\t\t}","5994","\t\t}","5995","","5996","\t\tif ( seed ) {","5997","\t\t\tif ( postFinder || preFilter ) {","5998","\t\t\t\tif ( postFinder ) {","5999","\t\t\t\t\ttemp = [];","6000","\t\t\t\t\ti = matcherOut.length;","6001","\t\t\t\t\twhile ( i-- ) {","6002","\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {","6003","\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );","6004","\t\t\t\t\t\t}","6005","\t\t\t\t\t}","6006","\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );","6007","\t\t\t\t}","6008","","6009","\t\t\t\ti = matcherOut.length;","6010","\t\t\t\twhile ( i-- ) {","6011","\t\t\t\t\tif ( (elem = matcherOut[i]) &&","6012","\t\t\t\t\t\t(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {","6013","","6014","\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);","6015","\t\t\t\t\t}","6016","\t\t\t\t}","6017","\t\t\t}","6018","","6019","\t\t} else {","6020","\t\t\tmatcherOut = condense(","6021","\t\t\t\tmatcherOut === results ?","6022","\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :","6023","\t\t\t\t\tmatcherOut","6024","\t\t\t);","6025","\t\t\tif ( postFinder ) {","6026","\t\t\t\tpostFinder( null, results, matcherOut, xml );","6027","\t\t\t} else {","6028","\t\t\t\tpush.apply( results, matcherOut );","6029","\t\t\t}","6030","\t\t}","6031","\t});","6032","}","6033","","6034","function matcherFromTokens( tokens ) {","6035","\tvar checkContext, matcher, j,","6036","\t\tlen = tokens.length,","6037","\t\tleadingRelative = Expr.relative[ tokens[0].type ],","6038","\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],","6039","\t\ti = leadingRelative ? 1 : 0,","6040","","6041","\t\tmatchContext = addCombinator( function( elem ) {","6042","\t\t\treturn elem === checkContext;","6043","\t\t}, implicitRelative, true ),","6044","\t\tmatchAnyContext = addCombinator( function( elem ) {","6045","\t\t\treturn indexOf.call( checkContext, elem ) > -1;","6046","\t\t}, implicitRelative, true ),","6047","\t\tmatchers = [ function( elem, context, xml ) {","6048","\t\t\treturn ( !leadingRelative && ( xml || context !== outermostContext ) ) || (","6049","\t\t\t\t(checkContext = context).nodeType ?","6050","\t\t\t\t\tmatchContext( elem, context, xml ) :","6051","\t\t\t\t\tmatchAnyContext( elem, context, xml ) );","6052","\t\t} ];","6053","","6054","\tfor ( ; i < len; i++ ) {","6055","\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {","6056","\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];","6057","\t\t} else {","6058","\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );","6059","","6060","\t\t\tif ( matcher[ expando ] ) {","6061","\t\t\t\tj = ++i;","6062","\t\t\t\tfor ( ; j < len; j++ ) {","6063","\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {","6064","\t\t\t\t\t\tbreak;","6065","\t\t\t\t\t}","6066","\t\t\t\t}","6067","\t\t\t\treturn setMatcher(","6068","\t\t\t\t\ti > 1 && elementMatcher( matchers ),","6069","\t\t\t\t\ti > 1 && toSelector(","6070","\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })","6071","\t\t\t\t\t).replace( rtrim, \"$1\" ),","6072","\t\t\t\t\tmatcher,","6073","\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),","6074","\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),","6075","\t\t\t\t\tj < len && toSelector( tokens )","6076","\t\t\t\t);","6077","\t\t\t}","6078","\t\t\tmatchers.push( matcher );","6079","\t\t}","6080","\t}","6081","","6082","\treturn elementMatcher( matchers );","6083","}","6084","","6085","function matcherFromGroupMatchers( elementMatchers, setMatchers ) {","6086","\tvar bySet = setMatchers.length > 0,","6087","\t\tbyElement = elementMatchers.length > 0,","6088","\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {","6089","\t\t\tvar elem, j, matcher,","6090","\t\t\t\tmatchedCount = 0,","6091","\t\t\t\ti = \"0\",","6092","\t\t\t\tunmatched = seed && [],","6093","\t\t\t\tsetMatched = [],","6094","\t\t\t\tcontextBackup = outermostContext,","6095","\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),","6096","\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),","6097","\t\t\t\tlen = elems.length;","6098","","6099","\t\t\tif ( outermost ) {","6100","\t\t\t\toutermostContext = context !== document && context;","6101","\t\t\t}","6102","","6103","\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {","6104","\t\t\t\tif ( byElement && elem ) {","6105","\t\t\t\t\tj = 0;","6106","\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {","6107","\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {","6108","\t\t\t\t\t\t\tresults.push( elem );","6109","\t\t\t\t\t\t\tbreak;","6110","\t\t\t\t\t\t}","6111","\t\t\t\t\t}","6112","\t\t\t\t\tif ( outermost ) {","6113","\t\t\t\t\t\tdirruns = dirrunsUnique;","6114","\t\t\t\t\t}","6115","\t\t\t\t}","6116","","6117","\t\t\t\tif ( bySet ) {","6118","\t\t\t\t\tif ( (elem = !matcher && elem) ) {","6119","\t\t\t\t\t\tmatchedCount--;","6120","\t\t\t\t\t}","6121","","6122","\t\t\t\t\tif ( seed ) {","6123","\t\t\t\t\t\tunmatched.push( elem );","6124","\t\t\t\t\t}","6125","\t\t\t\t}","6126","\t\t\t}","6127","","6128","\t\t\tmatchedCount += i;","6129","\t\t\tif ( bySet && i !== matchedCount ) {","6130","\t\t\t\tj = 0;","6131","\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {","6132","\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );","6133","\t\t\t\t}","6134","","6135","\t\t\t\tif ( seed ) {","6136","\t\t\t\t\tif ( matchedCount > 0 ) {","6137","\t\t\t\t\t\twhile ( i-- ) {","6138","\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {","6139","\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );","6140","\t\t\t\t\t\t\t}","6141","\t\t\t\t\t\t}","6142","\t\t\t\t\t}","6143","","6144","\t\t\t\t\tsetMatched = condense( setMatched );","6145","\t\t\t\t}","6146","","6147","\t\t\t\tpush.apply( results, setMatched );","6148","","6149","\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&","6150","\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {","6151","","6152","\t\t\t\t\tSizzle.uniqueSort( results );","6153","\t\t\t\t}","6154","\t\t\t}","6155","","6156","\t\t\tif ( outermost ) {","6157","\t\t\t\tdirruns = dirrunsUnique;","6158","\t\t\t\toutermostContext = contextBackup;","6159","\t\t\t}","6160","","6161","\t\t\treturn unmatched;","6162","\t\t};","6163","","6164","\treturn bySet ?","6165","\t\tmarkFunction( superMatcher ) :","6166","\t\tsuperMatcher;","6167","}","6168","","6169","compile = Sizzle.compile = function( selector, match \/* Internal Use Only *\/ ) {","6170","\tvar i,","6171","\t\tsetMatchers = [],","6172","\t\telementMatchers = [],","6173","\t\tcached = compilerCache[ selector + \" \" ];","6174","","6175","\tif ( !cached ) {","6176","\t\tif ( !match ) {","6177","\t\t\tmatch = tokenize( selector );","6178","\t\t}","6179","\t\ti = match.length;","6180","\t\twhile ( i-- ) {","6181","\t\t\tcached = matcherFromTokens( match[i] );","6182","\t\t\tif ( cached[ expando ] ) {","6183","\t\t\t\tsetMatchers.push( cached );","6184","\t\t\t} else {","6185","\t\t\t\telementMatchers.push( cached );","6186","\t\t\t}","6187","\t\t}","6188","","6189","\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );","6190","","6191","\t\tcached.selector = selector;","6192","\t}","6193","\treturn cached;","6196","\/**","6197"," * A low-level selection function that works with Sizzle's compiled","6198"," *  selector functions","6199"," * @param {String|Function} selector A selector or a pre-compiled","6200"," *  selector function built with Sizzle.compile","6201"," * @param {Element} context","6202"," * @param {Array} [results]","6203"," * @param {Array} [seed] A set of elements to match against","6204"," *\/","6205","select = Sizzle.select = function( selector, context, results, seed ) {","6206","\tvar i, tokens, token, type, find,","6207","\t\tcompiled = typeof selector === \"function\" && selector,","6208","\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );","6210","\tresults = results || [];","6211","","6212","\tif ( match.length === 1 ) {","6213","","6214","\t\ttokens = match[0] = match[0].slice( 0 );","6215","\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&","6216","\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&","6217","\t\t\t\tExpr.relative[ tokens[1].type ] ) {","6218","","6219","\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];","6220","\t\t\tif ( !context ) {","6221","\t\t\t\treturn results;","6222","","6223","\t\t\t} else if ( compiled ) {","6224","\t\t\t\tcontext = context.parentNode;","6226","","6227","\t\t\tselector = selector.slice( tokens.shift().value.length );","6230","\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;","6231","\t\twhile ( i-- ) {","6232","\t\t\ttoken = tokens[i];","6234","\t\t\tif ( Expr.relative[ (type = token.type) ] ) {","6235","\t\t\t\tbreak;","6236","\t\t\t}","6237","\t\t\tif ( (find = Expr.find[ type ]) ) {","6238","\t\t\t\tif ( (seed = find(","6239","\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),","6240","\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context","6241","\t\t\t\t)) ) {","6243","\t\t\t\t\ttokens.splice( i, 1 );","6244","\t\t\t\t\tselector = seed.length && toSelector( tokens );","6245","\t\t\t\t\tif ( !selector ) {","6246","\t\t\t\t\t\tpush.apply( results, seed );","6247","\t\t\t\t\t\treturn results;","6248","\t\t\t\t\t}","6256","\t( compiled || compile( selector, match ) )(","6257","\t\tseed,","6258","\t\tcontext,","6259","\t\t!documentIsHTML,","6260","\t\tresults,","6261","\t\trsibling.test( selector ) && testContext( context.parentNode ) || context","6262","\t);","6263","\treturn results;","6267","support.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;","6269","support.detectDuplicates = !!hasDuplicate;","6270","","6271","setDocument();","6272","","6273","support.sortDetached = assert(function( div1 ) {","6274","\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;","6275","});","6276","","6277","if ( !assert(function( div ) {","6278","\tdiv.innerHTML = \"<a href='#'><\/a>\";","6279","\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;","6280","}) ) {","6281","\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {","6282","\t\tif ( !isXML ) {","6283","\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );","6284","\t\t}","6285","\t});","6286","}","6287","","6288","if ( !support.attributes || !assert(function( div ) {","6289","\tdiv.innerHTML = \"<input\/>\";","6290","\tdiv.firstChild.setAttribute( \"value\", \"\" );","6291","\treturn div.firstChild.getAttribute( \"value\" ) === \"\";","6292","}) ) {","6293","\taddHandle( \"value\", function( elem, name, isXML ) {","6294","\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {","6295","\t\t\treturn elem.defaultValue;","6296","\t\t}","6297","\t});","6298","}","6299","","6300","if ( !assert(function( div ) {","6301","\treturn div.getAttribute(\"disabled\") == null;","6302","}) ) {","6303","\taddHandle( booleans, function( elem, name, isXML ) {","6304","\t\tvar val;","6305","\t\tif ( !isXML ) {","6306","\t\t\treturn elem[ name ] === true ? name.toLowerCase() :","6307","\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?","6308","\t\t\t\t\tval.value :","6309","\t\t\t\tnull;","6310","\t\t}","6311","\t});","6312","}","6313","","6314","if ( typeof define === \"function\" && define.amd ) {","6315","\tdefine(function() { return Sizzle; });","6316","} else if ( typeof module !== \"undefined\" && module.exports ) {","6317","\tmodule.exports = Sizzle;","6318","} else {","6319","\twindow.Sizzle = Sizzle;","6320","}","6321","","6322","})( window );","6323","","6324",";(function() {","6325","  if (typeof Sizzle !== 'undefined') {","6326","    return;","6327","  }","6328","","6329","  if (typeof define !== 'undefined' && define.amd) {","6330","    window.Sizzle = Prototype._actual_sizzle;","6331","    window.define = Prototype._original_define;","6332","    delete Prototype._actual_sizzle;","6333","    delete Prototype._original_define;","6334","  } else if (typeof module !== 'undefined' && module.exports) {","6335","    window.Sizzle = module.exports;","6336","    module.exports = {};","6337","  }","6376","          result[key] = result[key].concat(value);","6382","      accumulator = function(result, key, values) {","6383","        if (!Object.isArray(values)) {values = [values];}","6384","        if (!values.length) {return result;}","6385","        var encodedKey = encodeURIComponent(key).gsub(\/%20\/, '+');","6386","        return result + (result ? \"&\" : \"\") + values.map(function (value) {","6387","          value = value.gsub(\/(\\r)?\\n\/, '\\r\\n');","6388","          value = encodeURIComponent(value);","6389","          value = value.gsub(\/%20\/, '+');","6390","          return encodedKey + \"=\" + value;","6391","        }).join(\"&\");","6392","      };","6413","","6415","    var elements = $(form).getElementsByTagName('*');","6416","    var element, results = [], serializers = Form.Element.Serializers;","6417","","6419","      if (serializers[element.tagName.toLowerCase()])","6420","        results.push(Element.extend(element));","6422","    return results;","6741","(function(GLOBAL) {","6742","  var DIV = document.createElement('div');","6743","  var docEl = document.documentElement;","6744","  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl","6745","   && 'onmouseleave' in docEl;","6761","    KEY_INSERT:   45","6819","    return Element.extend(_element(event));","6820","  }","6821","","6822","  function _element(event) {","6835","    return node.nodeType == Node.TEXT_NODE ? node.parentNode : node;","6839","    var element = _element(event), selector = Prototype.Selector;","6840","    if (!expression) return Element.extend(element);","6842","      if (Object.isElement(element) && selector.match(element, expression))","6955","  var EVENT_TRANSLATIONS = {","6956","    mouseenter: 'mouseover',","6957","    mouseleave: 'mouseout'","6958","  };","6960","  function getDOMEventName(eventName) {","6961","    return EVENT_TRANSLATIONS[eventName] || eventName;","6962","  }","6964","  if (MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED)","6965","    getDOMEventName = Prototype.K;","6967","  function getUniqueElementID(element) {","6968","    if (element === window) return 0;","6970","    if (typeof element._prototypeUID === 'undefined')","6971","      element._prototypeUID = Element.Storage.UID++;","6972","    return element._prototypeUID;","6973","  }","6975","  function getUniqueElementID_IE(element) {","6976","    if (element === window) return 0;","6977","    if (element == document) return 1;","6978","    return element.uniqueID;","6979","  }","6981","  if ('uniqueID' in DIV)","6982","    getUniqueElementID = getUniqueElementID_IE;","6984","  function isCustomEvent(eventName) {","6985","    return eventName.include(':');","6986","  }","6988","  Event._isCustomEvent = isCustomEvent;","6990","  function getOrCreateRegistryFor(element, uid) {","6991","    var CACHE = GLOBAL.Event.cache;","6992","    if (Object.isUndefined(uid))","6993","      uid = getUniqueElementID(element);","6994","    if (!CACHE[uid]) CACHE[uid] = { element: element };","6995","    return CACHE[uid];","6996","  }","6997","","6998","  function destroyRegistryForElement(element, uid) {","6999","    if (Object.isUndefined(uid))","7000","      uid = getUniqueElementID(element);","7001","    delete GLOBAL.Event.cache[uid];","7002","  }","7003","","7004","","7005","  function register(element, eventName, handler) {","7006","    var registry = getOrCreateRegistryFor(element);","7007","    if (!registry[eventName]) registry[eventName] = [];","7008","    var entries = registry[eventName];","7009","","7010","    var i = entries.length;","7011","    while (i--)","7012","      if (entries[i].handler === handler) return null;","7013","","7014","    var uid = getUniqueElementID(element);","7015","    var responder = GLOBAL.Event._createResponder(uid, eventName, handler);","7016","    var entry = {","7017","      responder: responder,","7018","      handler:   handler","7019","    };","7020","","7021","    entries.push(entry);","7022","    return entry;","7023","  }","7024","","7025","  function unregister(element, eventName, handler) {","7026","    var registry = getOrCreateRegistryFor(element);","7027","    var entries = registry[eventName] || [];","7028","","7029","    var i = entries.length, entry;","7030","    while (i--) {","7031","      if (entries[i].handler === handler) {","7032","        entry = entries[i];","7033","        break;","7037","    if (entry) {","7038","      var index = entries.indexOf(entry);","7039","      entries.splice(index, 1);","7040","    }","7041","","7042","    if (entries.length === 0) {","7043","      delete registry[eventName];","7044","      if (Object.keys(registry).length === 1 && ('element' in registry))","7045","        destroyRegistryForElement(element);","7046","    }","7047","","7048","    return entry;","7054","    var entry = register(element, eventName, handler);","7056","    if (entry === null) return element;","7058","    var responder = entry.responder;","7059","    if (isCustomEvent(eventName))","7060","      observeCustomEvent(element, eventName, responder);","7061","    else","7062","      observeStandardEvent(element, eventName, responder);","7067","  function observeStandardEvent(element, eventName, responder) {","7068","    var actualEventName = getDOMEventName(eventName);","7069","    if (element.addEventListener) {","7070","      element.addEventListener(actualEventName, responder, false);","7071","    } else {","7072","      element.attachEvent('on' + actualEventName, responder);","7073","    }","7074","  }","7075","","7076","  function observeCustomEvent(element, eventName, responder) {","7077","    if (element.addEventListener) {","7078","      element.addEventListener('dataavailable', responder, false);","7079","    } else {","7080","      element.attachEvent('ondataavailable', responder);","7081","      element.attachEvent('onlosecapture',   responder);","7082","    }","7083","  }","7084","","7087","    var handlerGiven = !Object.isUndefined(handler),","7088","     eventNameGiven = !Object.isUndefined(eventName);","7090","    if (!eventNameGiven && !handlerGiven) {","7091","      stopObservingElement(element);","7095","    if (!handlerGiven) {","7096","      stopObservingEventName(element, eventName);","7100","    var entry = unregister(element, eventName, handler);","7102","    if (!entry) return element;","7103","    removeEvent(element, eventName, entry.responder);","7104","    return element;","7105","  }","7106","","7107","  function stopObservingStandardEvent(element, eventName, responder) {","7108","    var actualEventName = getDOMEventName(eventName);","7109","    if (element.removeEventListener) {","7110","      element.removeEventListener(actualEventName, responder, false);","7112","      element.detachEvent('on' + actualEventName, responder);","7113","    }","7114","  }","7115","","7116","  function stopObservingCustomEvent(element, eventName, responder) {","7117","    if (element.removeEventListener) {","7118","      element.removeEventListener('dataavailable', responder, false);","7119","    } else {","7120","      element.detachEvent('ondataavailable', responder);","7121","      element.detachEvent('onlosecapture',   responder);","7122","    }","7123","  }","7124","","7125","","7126","","7127","  function stopObservingElement(element) {","7128","    var uid = getUniqueElementID(element), registry = GLOBAL.Event.cache[uid];","7129","    if (!registry) return;","7130","","7131","    destroyRegistryForElement(element, uid);","7132","","7133","    var entries, i;","7134","    for (var eventName in registry) {","7135","      if (eventName === 'element') continue;","7136","","7137","      entries = registry[eventName];","7138","      i = entries.length;","7139","      while (i--)","7140","        removeEvent(element, eventName, entries[i].responder);","7141","    }","7142","  }","7143","","7144","  function stopObservingEventName(element, eventName) {","7145","    var registry = getOrCreateRegistryFor(element);","7146","    var entries = registry[eventName];","7147","    if (entries) {","7148","      delete registry[eventName];","7151","    entries = entries || [];","7153","    var i = entries.length;","7154","    while (i--)","7155","      removeEvent(element, eventName, entries[i].responder);","7156","","7157","    for (var name in registry) {","7158","      if (name === 'element') continue;","7159","      return; \/\/ There is another registered event","7160","    }","7161","","7162","    destroyRegistryForElement(element);","7163","  }","7164","","7165","","7166","  function removeEvent(element, eventName, handler) {","7167","    if (isCustomEvent(eventName))","7168","      stopObservingCustomEvent(element, eventName, handler);","7169","    else","7170","      stopObservingStandardEvent(element, eventName, handler);","7171","  }","7172","","7173","","7174","","7175","  function getFireTarget(element) {","7176","    if (element !== document) return element;","7177","    if (document.createEvent && !element.dispatchEvent)","7178","      return document.documentElement;","7183","    element = getFireTarget($(element));","7184","    if (Object.isUndefined(bubble)) bubble = true;","7185","    memo = memo || {};","7187","    var event = fireEvent(element, eventName, memo, bubble);","7191","  function fireEvent_DOM(element, eventName, memo, bubble) {","7192","    var event = document.createEvent('HTMLEvents');","7193","    event.initEvent('dataavailable', bubble, true);","7194","","7195","    event.eventName = eventName;","7196","    event.memo = memo;","7197","","7198","    element.dispatchEvent(event);","7199","    return event;","7200","  }","7201","","7202","  function fireEvent_IE(element, eventName, memo, bubble) {","7203","    var event = document.createEventObject();","7204","    event.eventType = bubble ? 'ondataavailable' : 'onlosecapture';","7205","","7206","    event.eventName = eventName;","7207","    event.memo = memo;","7208","","7209","    element.fireEvent(event.eventType, event);","7210","    return event;","7211","  }","7212","","7213","  var fireEvent = document.createEvent ? fireEvent_DOM : fireEvent_IE;","7214","","7215","","7216","","7226","","7283","  if (GLOBAL.Event) Object.extend(window.Event, Event);","7284","  else GLOBAL.Event = Event;","7286","  GLOBAL.Event.cache = {};","7287","","7288","  function destroyCache_IE() {","7289","    GLOBAL.Event.cache = null;","7290","  }","7291","","7292","  if (window.attachEvent)","7293","    window.attachEvent('onunload', destroyCache_IE);","7294","","7295","  DIV = null;","7296","  docEl = null;","7297","})(this);","7298","","7299","(function(GLOBAL) {","7300","  \/* Code for creating leak-free event responders is based on work by","7301","   John-David Dalton. *\/","7302","","7303","  var docEl = document.documentElement;","7304","  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl","7305","    && 'onmouseleave' in docEl;","7306","","7307","  function isSimulatedMouseEnterLeaveEvent(eventName) {","7308","    return !MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED &&","7309","     (eventName === 'mouseenter' || eventName === 'mouseleave');","7310","  }","7311","","7312","  function createResponder(uid, eventName, handler) {","7313","    if (Event._isCustomEvent(eventName))","7314","      return createResponderForCustomEvent(uid, eventName, handler);","7315","    if (isSimulatedMouseEnterLeaveEvent(eventName))","7316","      return createMouseEnterLeaveResponder(uid, eventName, handler);","7317","","7318","    return function(event) {","7319","      if (!Event.cache) return;","7320","","7321","      var element = Event.cache[uid].element;","7322","      Event.extend(event, element);","7323","      handler.call(element, event);","7324","    };","7325","  }","7326","","7327","  function createResponderForCustomEvent(uid, eventName, handler) {","7328","    return function(event) {","7329","      var cache = Event.cache[uid];","7330","      var element =  cache && cache.element;","7331","","7332","      if (Object.isUndefined(event.eventName))","7333","        return false;","7334","","7335","      if (event.eventName !== eventName)","7336","        return false;","7337","","7338","      Event.extend(event, element);","7339","      handler.call(element, event);","7340","    };","7341","  }","7342","","7343","  function createMouseEnterLeaveResponder(uid, eventName, handler) {","7344","    return function(event) {","7345","      var element = Event.cache[uid].element;","7346","","7347","      Event.extend(event, element);","7348","      var parent = event.relatedTarget;","7349","","7350","      while (parent && parent !== element) {","7351","        try { parent = parent.parentNode; }","7352","        catch(e) { parent = element; }","7353","      }","7354","","7355","      if (parent === element) return;","7356","      handler.call(element, event);","7357","    }","7358","  }","7359","","7360","  GLOBAL.Event._createResponder = createResponder;","7361","  docEl = null;","7362","})(this);","7363","","7364","(function(GLOBAL) {","7368","  var TIMER;","7372","    if (TIMER) window.clearTimeout(TIMER);","7379","      document.detachEvent('onreadystatechange', checkReadyState);","7385","    try {","7386","      document.documentElement.doScroll('left');","7387","    } catch (e) {","7388","      TIMER = pollDoScroll.defer();","7391","","7395","","7396","  if (document.readyState === 'complete') {","7397","    fireContentLoadedEvent();","7398","    return;","7399","  }","7400","","7404","    document.attachEvent('onreadystatechange', checkReadyState);","7405","    if (window == top) TIMER = pollDoScroll.defer();","7409","})(this);","7410","","7419","Element.addMethods({","7420","  childOf: Element.Methods.descendantOf","7421","});","7563","  _each: function(iterator, context) {","7566","    })._each(iterator, context);"]}]}},"7457318b2c52a0c478e376cbb02f34b603c2173f":{"changes":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_zh_CN.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_bg.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_lt.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_sv_SE.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_it.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_fr.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_zh_TW.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_pt_PT.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_ro.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_nl.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_pl.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_fr.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_sr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_ja.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_sr.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_it.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_ja.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_hu.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_zh_CN.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_bg.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_ko.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_ko.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_es.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_es.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_el.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_lv.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_sk.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed.jelly":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_de.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_fi.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_cs.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_uk.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_ru.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_zh_TW.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_da.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_pt_BR.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_pl.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_uk.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_de.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_lv.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_pt_BR.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_zh_CN.properties":[{"add":[],"delete":["25","Pinned=\\u56FA\\u5B9A"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_bg.properties":[{"add":[],"delete":["42","Pinned=\\"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_lt.properties":[{"add":[],"delete":["2","Pinned=Prisegtas"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_sv_SE.properties":[{"add":[],"delete":["25","Pinned=Pinnad"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed.properties":[{"add":["22","requires.restart=This Jenkins instance requires a restart. Changing the state of plugins at this time is strongly discouraged. Restart Jenkins before proceeding."],"delete":["21","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins","23","requires.restart=This Jenkins instance requires a restart. Changing the state of plugins at this time is strongly discouraged. Restart Jenkins before proceeding."]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_it.properties":[{"add":[],"delete":["25","Pinned=Bloccato","30","Unpin=Sblocca","33","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_fr.properties":[{"add":[],"delete":["23","Pinned=Rep\\u00E9r\\u00E9"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_zh_TW.properties":[{"add":[],"delete":["31","Pinned=\\u5df2\\u639b\\u8f09"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_pt_PT.properties":[{"add":[],"delete":["5","Pinned=Fixo","12","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_ro.properties":[{"add":[],"delete":["5","Pinned=Fixat","9","Unpin=Defixeaz\\u0103","12","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_nl.properties":[{"add":[],"delete":["29","Unpin=Losmaken","31","Pinned=Vastgezet","35","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_pl.properties":[{"add":[],"delete":["25","Pinned=Przypi\\u0119ta","30","Unpin=Odepnij"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_fr.properties":[{"add":[],"delete":["30","Unpin=Annuler \\u00E9pingler","32","Pinned=\\u00C9pingl\\u00E9","35","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_sr.properties":[{"add":[],"delete":["10","Pinned=\\u0424\\u0438\\u043A\\u0441\\u0438\\u0440\\u0430\\u043D\\u0435"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_ja.properties":[{"add":[],"delete":["29","Pinned=\\u30d4\\u30f3","30","Unpin=\\u89e3\\u9664","31","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JA\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_sr.properties":[{"add":[],"delete":["18","Pinned=\\u0424\\u0438\\u043A\\u0441\\u0438\\u0440\\u0430\\u043D\\u0430 \\u0432\\u0435\\u0440\\u0437\\u0438\\u0458\\u0430","22","Unpin=\\u041E\\u0434\\u043C\\u0440\\u0437\\u043D\\u0438","23","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_it.properties":[{"add":[],"delete":["25","Pinned=Fisso"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_ja.properties":[{"add":[],"delete":["30","Pinned=\\u30d4\\u30f3"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_hu.properties":[{"add":[],"delete":["30","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_zh_CN.properties":[{"add":[],"delete":["25","Pinned=\\u7ED1\\u5B9A","30","Unpin=\\u89E3\\u9664\\u7ED1\\u5B9A","33","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_bg.properties":[{"add":[],"delete":["28","Pinned=\\","38","Unpin=\\","64","wiki.url=\\"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_ko.properties":[{"add":[],"delete":["25","Pinned=\\uACE0\\uC815"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_ko.properties":[{"add":[],"delete":["25","Pinned=\\uACE0\\uC815\\uB428","31","Unpin=\\uACE0\\uC815 \\uD574\\uC81C","34","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_ru.properties":[{"add":[],"delete":["25","Pinned=\\u041f\\u0440\\u0438\\u043a\\u0440\\u0435\\u043f\\u043b\\u0451\\u043d\\u043d\\u044b\\u0435","31","Unpin=\\u041e\\u0442\\u043a\\u0440\\u0435\\u043f\\u0438\\u0442\\u044c","34","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_es.properties":[{"add":[],"delete":["29","wiki.url=\"http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins\"","32","Pinned=marcado","34","Unpin=desmarcar"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_es.properties":[{"add":[],"delete":["27","Pinned=Fijado"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_el.properties":[{"add":[],"delete":["5","Pinned=\\u039A\\u03B1\\u03C1\\u03C6\\u03B9\\u03C4\\u03C3\\u03C9\\u03BC\\u03AD\\u03BD\\u03BF"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_lv.properties":[{"add":[],"delete":["5","Pinned=Piesaist\\u012Bts"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_sk.properties":[{"add":[],"delete":["11","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed.jelly":[{"add":[],"delete":["66","                <th width=\"1\">${%Pinned}<\/th>","115","                  <td class=\"center pane\" id='unpin-${p.shortName}'>","116","                    <j:if test=\"${p.isPinned()}\">","117","                      <input type=\"button\" onclick=\"unpin(this,'${p.shortName}')\" value=\"${%Unpin}\" class=\"yui-button\" \/>","118","                      <a href=\"${%wiki.url}\" target=\"_blank\"><l:icon class=\"icon-help icon-sm\" style=\"vertical-align:top\"\/><\/a>","119","                    <\/j:if>","120","                  <\/td>","206","","207","        function unpin(button,shortName) {","208","          new Ajax.Request(\".\/plugin\/\"+shortName+\"\/unpin\", {","209","            method: \"POST\",","210","            onFailure : function(t) {","211","              alert('Failed to unpin:'+t.responseText);","212","            },","213","            onSuccess : function(t) {","214","              $('unpin-'+shortName).innerHTML = \"\";","215","            }","216","          });","217","        }"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_de.properties":[{"add":[],"delete":["26","Pinned=Gesperrt"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_fi.properties":[{"add":[],"delete":["25","Pinned=Lukittu","29","Unpin=Vapauta lukitus"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_cs.properties":[{"add":[],"delete":["5","Pinned=Preferovat","12","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_uk.properties":[{"add":[],"delete":["5","Pinned=\\uD540 \\uACE0\\uC815","10","Unpin=\\uD540 \\uD574\\uCCB4","13","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_ru.properties":[{"add":[],"delete":["23","Pinned=\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u043B\\u0435\\u043D"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_zh_TW.properties":[{"add":[],"delete":["32","Pinned=\\u5df2\\u639b\\u8f09","35","Unpin=\\u5378\\u9664","36","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_da.properties":[{"add":[],"delete":["23","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins","30","Pinned=L\\u00e5st","34","Unpin=L\\u00e5s op"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_pt_BR.properties":[{"add":[],"delete":["26","Pinned=Fixado","30","Unpin=Desprender","34","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_pl.properties":[{"add":[],"delete":["5","Pinned=Przypi\\u0119ty"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_uk.properties":[{"add":[],"delete":["5","Pinned=\\u0417\\u0430\\u043A\\u0440\\u0456\\u043F\\u043B\\u0435\\u043D\\u0438\\u0439"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_de.properties":[{"add":[],"delete":["31","Pinned=Gesperrt","32","Unpin=Entsperren","33","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo.jelly":[{"add":[],"delete":["49","                <th class=\"pane-header\">${%Pinned}<\/th>","57","                  <td class=\"pane\"><st:out value=\"${p.pinned}\"\/><\/td>"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_lv.properties":[{"add":[],"delete":["5","Pinned=Piesaist\\u012Bts","10","Unpin=Atsiet","12","wiki.url=http:\/\/wiki.jenkins-ci.org\/display\/JENKINS\/Pinned+Plugins"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/systemInfo_pt_BR.properties":[{"add":[],"delete":["23","Pinned=Fixado"]}]}},"48c95f5aee999a7fbf6d30f3a1e92eabf3723a02":{"changes":{"core\/src\/main\/java\/jenkins\/security\/ClassFilterImpl.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/security\/ClassFilterImpl.java":[{"add":["159","                    LOGGER.warning(\"JENKINS-49795: attempt to (de-)serialize anonymous \" + c + \" in \" + location);","161","                    LOGGER.warning(\"JENKINS-49795: attempt to (de-)serialize local \" + c + \" in \" + location);","163","                    LOGGER.warning(\"JENKINS-49795: attempt to (de-)serialize synthetic \" + c + \" in \" + location);"],"delete":["159","                    LOGGER.warning(\"JENKINS-49573: attempt to (de-)serialize anonymous \" + c + \" in \" + location);","161","                    LOGGER.warning(\"JENKINS-49573: attempt to (de-)serialize local \" + c + \" in \" + location);","163","                    LOGGER.warning(\"JENKINS-49573: attempt to (de-)serialize synthetic \" + c + \" in \" + location);"]}]}},"247abf734d46c5cf7a5a5fba333d9824dc7d8c3e":{"changes":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/NoOpJob\/row.jelly":"ADD","core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/EnableJob\/row.jelly":"ADD","core\/src\/main\/java\/hudson\/model\/UpdateSite.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/NoOpJob\/row.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["1406","    ","1407","    \/**","1408","     * Enables a required plugin, provides feedback in the update center","1409","     *\/","1410","    public class EnableJob extends UpdateCenterJob {","1411","        private final Plugin plugin;","1412","        ","1413","        public EnableJob(UpdateSite site, @Nonnull Plugin plugin) {","1414","            super(site);","1415","            this.plugin = plugin;","1416","        }","1417","        ","1418","        public Plugin getPlugin() {","1419","            return plugin;","1420","        }","1421","        ","1422","        @Override","1423","        public void run() {","1424","            try {","1425","                plugin.getInstalled().enable();","1426","            } catch (IOException e) {","1427","                LOGGER.log(Level.SEVERE, \"Failed to enable \" + plugin.getDisplayName(), e);","1428","                error = e;","1429","            }","1430","        }","1431","    }","1432","    ","1433","    \/**","1434","     * A no-op, e.g. this plugin is already installed","1435","     *\/","1436","    public class NoOpJob extends EnableJob {","1437","        public NoOpJob(UpdateSite site, @Nonnull Plugin plugin) {","1438","            super(site, plugin);","1439","        }","1440","    }","1441","    "],"delete":["1406",""]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/EnableJob\/row.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/UpdateSite.java":[{"add":["733","                \/\/ JENKINS-34494 - or if the plugin is disabled, this will allow us to enable it","734","                else if (!current.isEnabled()) {","735","                    deps.add(depPlugin);","736","                }","859","            PluginWrapper pw = getInstalled();","860","            if(pw != null) { \/\/ JENKINS-34494 - check for this plugin being disabled","861","                Future<UpdateCenterJob> enableJob = null;","862","                if(!pw.isEnabled()) {","863","                    UpdateCenter.EnableJob job = uc.new EnableJob(UpdateSite.this, this);","864","                    job.setCorrelationId(correlationId);","865","                    enableJob = uc.addJob(job);","866","                }","867","                if(pw.getVersionNumber().equals(new VersionNumber(version))) {","868","                    return enableJob != null ? enableJob : uc.addJob(uc.new NoOpJob(UpdateSite.this, this));","869","                }","870","            }"],"delete":[]}]}},"edf932be37ffdad965c3fcaf6c7d7a6f1efc54f8":{"changes":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"test\/src\/test\/groovy\/hudson\/model\/AbstractProjectTest.groovy":[{"add":["40","import hudson.triggers.TimerTrigger","41","import hudson.triggers.TriggerDescriptor;","451","","452","    @Bug(18813)","453","    public void testRemoveTrigger() {","454","        AbstractProject j = jenkins.createProjectFromXML(\"foo\", getClass().getResourceAsStream(\"AbstractProjectTest\/vectorTriggers.xml\"))","455","","456","        TriggerDescriptor SCM_TRIGGER_DESCRIPTOR = Hudson.instance.getDescriptorOrDie(SCMTrigger.class)","457","        j.removeTrigger(SCM_TRIGGER_DESCRIPTOR);","458","        assert j.triggers().size()==0","459","    }","460","","461","    @Bug(18813)","462","    public void testAddTriggerSameType() {","463","        AbstractProject j = jenkins.createProjectFromXML(\"foo\", getClass().getResourceAsStream(\"AbstractProjectTest\/vectorTriggers.xml\"))","464","","465","        def newTrigger = new SCMTrigger(\"H\/5 * * * *\")","466","        j.addTrigger(newTrigger);","467","","468","        assert j.triggers().size()==1","469","        def t = j.triggers()[0]","470","        assert t.class==SCMTrigger.class;","471","        assert t.spec==\"H\/5 * * * *\"","472","    }","473","","474","    @Bug(18813)","475","    public void testAddTriggerDifferentType() {","476","        AbstractProject j = jenkins.createProjectFromXML(\"foo\", getClass().getResourceAsStream(\"AbstractProjectTest\/vectorTriggers.xml\"))","477","","478","        def newTrigger = new TimerTrigger(\"20 * * * *\")","479","        j.addTrigger(newTrigger);","480","","481","        assert j.triggers().size()==2","482","        def t = j.triggers()[1]","483","        assert t == newTrigger","484","    }"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["124","import java.util.Iterator;","1647","        \/\/No support to replace item in position, remove then add","1648","        removeFromList(item.getDescriptor(), collection);","1656","        final Iterator<T> iCollection = collection.iterator();","1657","        while(iCollection.hasNext()) {","1658","            final T next = iCollection.next();","1659","            if(next.getDescriptor()==item) {","1661","                iCollection.remove();"],"delete":["1646","        for( int i=0; i<collection.size(); i++ ) {","1647","            if(collection.get(i).getDescriptor()==item.getDescriptor()) {","1648","                \/\/ replace","1649","                collection.set(i,item);","1650","                save();","1651","                return;","1652","            }","1653","        }","1654","        \/\/ add","1662","        for( int i=0; i< collection.size(); i++ ) {","1663","            if(collection.get(i).getDescriptor()==item) {","1665","                collection.remove(i);"]}]}},"c98ca86b7d08f75244de0b1f209f13abd80a2002":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class=bug>","58","   Fixed: Human readable file size method returns \",00\" for files with byte length 0","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16630\">issue 16630<\/a>)","60",""],"delete":["57","  <li class=>"]}]}},"d47993cfc63a5cd7f9dfa9098a80f3dfd521b52a":{"changes":{"core\/src\/main\/java\/hudson\/model\/PasswordParameterDefinition.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/PasswordParameterDefinition.java":[{"add":["39","    public PasswordParameterDefinition(String name, String defaultValue, String description) {","40","        super(name, defaultValue, description);"],"delete":["39","    public PasswordParameterDefinition(String name, String defaultvalue, String description) {","40","        super(name, defaultvalue, description);"]}]}},"6d29dd4554345aed2905e8ab32da678e301736a7":{"changes":{"core\/src\/main\/java\/jenkins\/triggers\/SCMTriggerItem.java":"MODIFY","core\/src\/test\/java\/jenkins\/triggers\/SCMTriggerItemTest.java":"ADD"},"diff":{"core\/src\/main\/java\/jenkins\/triggers\/SCMTriggerItem.java":[{"add":["123","                if (veto != null && !veto.shouldPoll(asItem())) {"],"delete":["123","                if (!veto.shouldPoll(asItem())) {"]}],"core\/src\/test\/java\/jenkins\/triggers\/SCMTriggerItemTest.java":[{"add":[],"delete":[]}]}},"5df61d42d01c2857264748cc6c871491ac3ae79c":{"changes":{"war\/src\/main\/js\/util\/jenkins.js":"MODIFY"},"diff":{"war\/src\/main\/js\/util\/jenkins.js":[{"add":["246","\t\t}, { error: function(xhr, textStatus, errorThrown) {","247","                 if (xhr.status === 403) {","248","                     exports.goTo('\/login');","249","                 } else {","250","                     handler.call({ isError: true, errorMessage: errorThrown });","251","                 }","252","               }","253","             });"],"delete":["246","\t\t});"]}]}},"ad93581104dfe58cf0373322166893a614c530df":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["44","    <stapler.version>1.222<\/stapler.version>"],"delete":["44","    <stapler.version>1.221<\/stapler.version>"]}]}},"10a072c7d496e5a11ed94ce071938a5506ec2064":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["95","  <li class='major bug'>","96","    Some actions confirmed by dialog were not working when CSRF crumbs were enabled.","97","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17977\">issue 17977<\/a>)","98","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-18032\">issue 18032<\/a>)"],"delete":[]}]}},"3295aec18e5139e8d67c1e6a3d8fb383c2f2ef0b":{"changes":{"core\/src\/main\/java\/hudson\/tools\/DownloadFromUrlInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tools\/DownloadFromUrlInstaller.java":[{"add":["159","                if (entryList != null) {","160","                    ToolInstallerEntry sampleEntry = entryList[0];","161","                    if (sampleEntry != null) {","162","                        if (sampleEntry.id != null && sampleEntry.name != null && sampleEntry.url != null) {","163","                            return true;","164","                        }"],"delete":["159","                ToolInstallerEntry sampleEntry = entryList[0];","160","                if (sampleEntry != null) {","161","                    if (sampleEntry.id != null && sampleEntry.name != null && sampleEntry.url != null) {","162","                        return true;"]}]}},"dfb7633453104cf376378528c31e4769fcec66d5":{"changes":{"core\/src\/test\/java\/hudson\/util\/ArgumentListBuilderTest.java":"MODIFY","core\/src\/main\/java\/hudson\/util\/ArgumentListBuilder.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/util\/ArgumentListBuilderTest.java":[{"add":["112","                                                 \"-Dfoo10=bar,baz\",","119","                + \" \\\"-Dfoo3=\/u*r\\\" \\\"-Dfoo4=\/us?\\\" \\\"-Dfoo10=bar,baz\\\" \\\"-Dfoo5=foo;bar^^baz\\\"\""],"delete":["118","                + \" \\\"-Dfoo3=\/u*r\\\" \\\"-Dfoo4=\/us?\\\" \\\"-Dfoo5=foo;bar^^baz\\\"\""]}],"core\/src\/main\/java\/hudson\/util\/ArgumentListBuilder.java":[{"add":["207","     *   space *?,;^&<>|\" or % followed by a letter.","225","                if (!quoted && (c == ' ' || c == '*' || c == '?' || c == ',' || c == ';')) {"],"delete":["207","     *   space *?;^&<>|\" or % followed by a letter.","225","                if (!quoted && (c == ' ' || c == '*' || c == '?' || c == ';')) {"]}]}},"649c24b9d905c56276f9fbeb944d88aa0326f7f5":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenUtil.java":"MODIFY","maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifact.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenUtil.java":[{"add":["146","            File moduleFile = new File(basedir, modulePath);","147","            if (moduleFile.exists() && moduleFile.isDirectory()) {","148","                moduleFile = new File(basedir, modulePath + \"\/pom.xml\");","149","            }"],"delete":["146","            File moduleFile = new File(new File(basedir, modulePath),\"pom.xml\");"]}],"maven-plugin\/src\/main\/java\/hudson\/maven\/reporters\/MavenArtifact.java":[{"add":["138","        \/\/ Fix for HUDSON-3814 - changed from comparing against canonical extension to canonicalName.endsWith.","139","        if(!canonicalName.endsWith(ah.getExtension())) {"],"delete":["138","        if(!ah.getExtension().equals(canonicalExtension)) {"]}]}},"8011acf02828a3aaa666af1b1db873af1031a11a":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["221","      <version>1.4.4-jenkins-5<\/version>"],"delete":["221","      <version>1.4.4-jenkins-4<\/version>"]}],"changelog.html":[{"add":["63","  <li class=\"major bug\">","64","    Exception from XStream running Maven builds on strange Java versions.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-21183\">issue 21183<\/a>)"],"delete":[]}]}},"8f29260b177957a4082bffb271c9835adfa79bff":{"changes":{"core\/src\/main\/java\/hudson\/Functions.java":"MODIFY","test\/src\/main\/java\/org\/jvnet\/hudson\/test\/JenkinsRule.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Functions.java":[{"add":["77","import hudson.util.jna.GNUCLibrary;","462","    ","463","    public static boolean isGlibcSupported() {","464","        try {","465","            GNUCLibrary.LIBC.getpid();","466","            return true;","467","        } catch(Throwable t) {","468","            return false;","469","        }","470","    }"],"delete":[]}],"test\/src\/main\/java\/org\/jvnet\/hudson\/test\/JenkinsRule.java":[{"add":["698","        if(Functions.isGlibcSupported())","722","            if(Functions.isGlibcSupported())","2320","        if (Functions.isGlibcSupported()) {"],"delete":["698","        if(!Functions.isWindows())","722","            if(!Functions.isWindows())","2320","        if (!Functions.isWindows()) {"]}]}},"3f15ad20985066661158ee1bb0b3255e000b3081":{"changes":{"war\/src\/main\/less\/pluginSetupWizard.less":"MODIFY"},"diff":{"war\/src\/main\/less\/pluginSetupWizard.less":[{"add":["92","    .error {","93","        margin-bottom: 1em;","94","    }","95",""],"delete":[]}]}},"9b2083972ffa2acd9bf0cda40da0ac5cf1fcd5b0":{"changes":{"war\/resources\/WEB-INF\/security\/LDAPBindSecurityRealm.groovy":"MODIFY","core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":"MODIFY"},"diff":{"war\/resources\/WEB-INF\/security\/LDAPBindSecurityRealm.groovy":[{"add":["30","    userSearch = ldapUserSearch;","32","","33","ldapUserSearch(FilterBasedLdapUserSearch, instance.userSearchBase, instance.userSearch, initialDirContextFactory) {","34","    searchSubtree=true","35","}","36","","37",""],"delete":["30","    userSearch = bean(FilterBasedLdapUserSearch, instance.userSearchBase, instance.userSearch, initialDirContextFactory) {","31","        searchSubtree=true","32","    }"]}],"core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":[{"add":["12","import org.acegisecurity.userdetails.UserDetails;","13","import org.acegisecurity.userdetails.UsernameNotFoundException;","15","import org.acegisecurity.ldap.LdapUserSearch;","21","import org.springframework.dao.DataAccessException;","133","        final WebApplicationContext appContext = builder.createApplicationContext();","134","","137","            new UserDetailsService() {","138","                final LdapUserSearch ldapSerach = findBean(LdapUserSearch.class, appContext);","139","                public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {","140","                    return ldapSerach.searchForUser(username);","141","                }","142","            });"],"delete":["129","        WebApplicationContext appContext = builder.createApplicationContext();","132","            findBean(UserDetailsService.class, appContext));"]}]}},"bb3be8314cc04c54838331da088d35e46b68a224":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["592","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-13541\">issue 13541<\/a>)"],"delete":[]}]}},"8a077a801960aa74da455441cfb12d300c6d6e3a":{"changes":{"core\/src\/main\/java\/hudson\/diagnosis\/OldDataMonitor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/diagnosis\/OldDataMonitor.java":[{"add":["27","","39","import hudson.security.ACL;","42","","53","","55","","57","","58","import org.acegisecurity.context.SecurityContext;","59","import org.acegisecurity.context.SecurityContextHolder;","112","        Jenkins j = Jenkins.getInstance();","113","        if (j != null) {","114","            OldDataMonitor odm = get(j);","115","            SecurityContext oldContext = ACL.impersonate(ACL.SYSTEM);","116","            try {","117","                synchronized (odm) {","118","                    odm.data.remove(referTo(obj));","119","                    if (isDelete && obj instanceof Job<?,?>)","120","                        for (Run r : ((Job<?,?>)obj).getBuilds())","121","                            odm.data.remove(referTo(r));","122","                }","123","            } ","124","            finally {","125","                SecurityContextHolder.setContext(oldContext);","126","            }"],"delete":["104","        OldDataMonitor odm = get(Jenkins.getInstance());","105","        synchronized (odm) {","106","            odm.data.remove(referTo(obj));","107","            if (isDelete && obj instanceof Job<?,?>)","108","                for (Run r : ((Job<?,?>)obj).getBuilds())","109","                    odm.data.remove(referTo(r));"]}]}},"9b19ec692dffa738eee6edef2bbfd68675fd9085":{"changes":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":[{"add":["14","import org.kohsuke.stapler.Stapler;","273","            return String.format(\"<img src='%s%s\/images\/16x16\/%s' style='margin-right:0.2em'>\", Stapler.getCurrentRequest().getContextPath(), Hudson.RESOURCE_PATH, gif);"],"delete":["272","            return String.format(\"<img src='%s%s\/images\/16x16\/%s' style='margin-right:0.2em'>\", Hudson.getInstance().getRootUrlFromRequest(), Hudson.RESOURCE_PATH, gif);"]}]}},"0c3449d950243defb3ca3733ed3ca2cebac2719e":{"changes":{"war\/resources\/images\/16x16\/folder-error.gif":"ADD","war\/resources\/images\/16x16\/text-error.gif":"ADD"},"diff":{"war\/resources\/images\/16x16\/folder-error.gif":[{"add":[],"delete":[]}],"war\/resources\/images\/16x16\/text-error.gif":[{"add":[],"delete":[]}]}},"fd31a5d85c0a1fd4a310ced04bb3b714469b2d43":{"changes":{"test\/src\/test\/resources\/hudson\/model\/ListViewTest\/nullJobNames\/config.xml":"ADD","core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY","changelog.html":"MODIFY","test\/src\/test\/java\/hudson\/model\/ListViewTest.java":"ADD"},"diff":{"test\/src\/test\/resources\/hudson\/model\/ListViewTest\/nullJobNames\/config.xml":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["68","    \/*package*\/ \/*almost-final*\/ SortedSet<String> jobNames = new TreeSet<String>(CaseInsensitiveComparator.INSTANCE);","110","        if (jobNames == null) {","111","            jobNames = new TreeSet<String>(CaseInsensitiveComparator.INSTANCE);","112","        }"],"delete":["68","    \/*package*\/ final SortedSet<String> jobNames = new TreeSet<String>(CaseInsensitiveComparator.INSTANCE);"]}],"changelog.html":[{"add":["60","  <li class=bug>","61","    List views missing a required field were unloadable.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15309\">issue 15309<\/a>)"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/ListViewTest.java":[{"add":[],"delete":[]}]}},"79c0bbf76680c8491e601be76d062299b7170971":{"changes":{"core\/src\/main\/java\/hudson\/triggers\/Trigger.java":"MODIFY","core\/src\/test\/java\/hudson\/triggers\/TimerTriggerTest.java":"ADD","core\/src\/main\/java\/hudson\/triggers\/TimerTrigger.java":"MODIFY","core\/src\/test\/java\/hudson\/triggers\/SCMTriggerTest.java":"ADD","core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/triggers\/Trigger.java":[{"add":["4"," *               2015 Kanstantsin Shautsou","5"," *","152","    @CheckForNull"],"delete":["4"," * "]}],"core\/src\/test\/java\/hudson\/triggers\/TimerTriggerTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/triggers\/TimerTrigger.java":[{"add":["4"," *               2015 Kanstantsin Shautsou","55","        if (job == null) {","56","            return;","57","        }","58",""],"delete":[]}],"core\/src\/test\/java\/hudson\/triggers\/SCMTriggerTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":[{"add":["4"," *               2015 Kanstantsin Shautsou","27","import com.google.common.base.Preconditions;","121","        if (job == null) {","122","            return;","123","        }","124","","136","        if (job == null) {","137","            return;","138","        }","139","","164","        if (job == null) {","165","            return Collections.emptyList();","166","        }","167","","473","            this(null);","477","            Preconditions.checkNotNull(job, \"Runner can't be instantiated when job is null\");","478","","550","            if (job == null) {","551","                return;","552","            }","553",""],"delete":["459","            additionalActions = new Action[0];"]}]}},"d531f75f4e5d60e0690a90b0a862c285032c22df":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/test\/MetaTabulatedResult\/body.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/test\/MetaTabulatedResult\/body.jelly":[{"add":["100","        <j:set var=\"prevAll\" value=\"${it.previousResult}\" \/>","102","          <j:set var=\"prev\" value=\"${prevAll.findCorrespondingResult(p.id)}\" \/>"],"delete":["101","          <j:set var=\"prev\" value=\"${p.previousResult}\" \/>"]}]}},"c405ae701c4bca18f7b4edc6e5cd3bc053b7ee60":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","pom.xml":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["25","import com.google.common.io.NullOutputStream;","42","import hudson.remoting.CommandTransport;","65","import org.kohsuke.accmod.restrictions.Beta;","77","import javax.annotation.Nonnull;","426","     * Creates a {@link Channel} from the given Channel Builder and Command Transport.","427","     * This method can be used to allow {@link ComputerLauncher}s to create channels not based on I\/O streams.","428","     *","429","     * @param cb","430","     *      Channel Builder.","431","     *      To print launch logs this channel builder should have a Header Stream defined","432","     *      (see {@link ChannelBuilder#getHeaderStream()}) in this argument or by one of {@link ChannelConfigurator}s.","433","     * @param commandTransport","434","     *      Command Transport","435","     * @param listener","436","     *      Gets a notification when the channel closes, to perform clean up. Can be {@code null}.","437","     *      By the time this method is called, the cause of the termination is reported to the user,","438","     *      so the implementation of the listener doesn't need to do that again.","439","     * @since TODO","440","     *\/","441","    @Restricted(Beta.class)","442","    public void setChannel(@Nonnull ChannelBuilder cb,","443","                           @Nonnull CommandTransport commandTransport,","444","                           @CheckForNull Channel.Listener listener) throws IOException, InterruptedException {","445","        for (ChannelConfigurator cc : ChannelConfigurator.all()) {","446","            cc.onChannelBuilding(cb,this);","447","        }","448","","449","        OutputStream headerStream = cb.getHeaderStream();","450","        if (headerStream == null) {","451","            LOGGER.log(Level.WARNING, \"No header stream defined when setting channel for computer {0}. \" +","452","                    \"Launch log won't be printed\", this);","453","            headerStream = new NullOutputStream();","454","        }","455","        Channel channel = cb.build(commandTransport);","456","        setChannel(channel, headerStream, listener);","457","    }","458","","459","    \/**"],"delete":[]}],"pom.xml":[{"add":["108","    <remoting.version>3.21<\/remoting.version>"],"delete":["108","    <remoting.version>3.20<\/remoting.version>"]}]}},"d6948ecd5300f905756624cbe8e68e44c5ddfc6b":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Fingerprinter.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Fingerprinter.java":[{"add":["26","import hudson.EnvVars;","105","            ","106","            EnvVars environment = build.getEnvironment(listener);","107","            if(targets.length()!=0) {","108","                String expandedTargets = environment.expand(targets);","109","                record(build, listener, record, expandedTargets);","110","            }","120","                String expandedArtifacts = environment.expand(aa.getArtifacts());","121","                record(build, listener, record, expandedArtifacts);"],"delete":["104","","105","","106","            if(targets.length()!=0)","107","                record(build, listener, record, targets);","117","                record(build, listener, record, aa.getArtifacts() );"]}]}},"f36917c210d52ce7fc1f4bca71c9f1baf11c4647":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["117","      <version>build217-jenkins-10<\/version>"],"delete":["117","      <version>build217-jenkins-9<\/version>"]}]}},"6b5ef4bd4aa8703f26ca7bda421171b56f9d7db9":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["57","  <li class='major bug'>","58","    Builds failing while archiving test result if build is running in different VM (e.g. IBM J9) than Jenkins is","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10030\">issue 10030<\/a>)"],"delete":[]}]}},"dc8000cc1e36399595883858c3aae8f135177d49":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY","pom.xml":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/SlaveComputer.java":[{"add":["456","            if (c == null) {","457","                return -1;","458","            }","476","            if (c == null) {","477","                return Long.valueOf(-1);","478","            }"],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["904","            try {","905","                ClassFilter.appendDefaultFilter(Pattern.compile(\"java[.]security[.]SignedObject\")); \/\/ TODO move to standard blacklist","906","            } catch (ClassFilter.ClassFilterException ex) {","907","                throw new IOException(\"Remoting library rejected the java[.]security[.]SignedObject blacklist pattern\", ex);"],"delete":["253","import java.lang.reflect.Field;","905","            \/\/ TODO pending move to standard blacklist, or API to append filter","906","            if (System.getProperty(ClassFilter.FILE_OVERRIDE_LOCATION_PROPERTY) == null) { \/\/ not using SystemProperties since ClassFilter does not either","907","                try {","908","                    Field blacklistPatternsF = ClassFilter.DEFAULT.getClass().getDeclaredField(\"blacklistPatterns\");","909","                    blacklistPatternsF.setAccessible(true);","910","                    Object[] blacklistPatternsA = (Object[]) blacklistPatternsF.get(ClassFilter.DEFAULT);","911","                    boolean found = false;","912","                    for (int i = 0; i < blacklistPatternsA.length; i++) {","913","                        if (blacklistPatternsA[i] instanceof Pattern) {","914","                            blacklistPatternsA[i] = Pattern.compile(\"(\" + blacklistPatternsA[i] + \")|(java[.]security[.]SignedObject)\");","915","                            found = true;","916","                            break;","917","                        }","918","                    }","919","                    if (!found) {","920","                        throw new Error(\"no Pattern found among \" + Arrays.toString(blacklistPatternsA));","921","                    }","922","                } catch (NoSuchFieldException | IllegalAccessException x) {","923","                    throw new Error(\"Unexpected ClassFilter implementation in bundled remoting.jar: \" + x, x);","924","                }"]}],"pom.xml":[{"add":["169","        <version>3.11<\/version>"],"delete":["169","        <version>3.10<\/version>"]}]}},"d1e5182170d97fb2063922c37e96599cbd0cd7a4":{"changes":{"core\/src\/main\/java\/hudson\/org\/apache\/tools\/ant\/taskdefs\/cvslib\/ChangeLogTask.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/org\/apache\/tools\/ant\/taskdefs\/cvslib\/ChangeLogTask.java":[{"add":["334","            int startpos;","335","            \/\/ find the first digit char","336","            for (startpos = 0; startpos < s.length(); startpos++)","337","                if (Character.isDigit(s.charAt(startpos)))","338","                    break;","339","            \/\/ ... and up to the end of this digit set","340","            int i;","341","            for (i = startpos; i < s.length(); i++) {","346","            String s2 = s.substring(startpos, i);"],"delete":["334","            int i = 0;","335","            for (i = 0; i < s.length(); i++) {","340","            String s2 = s.substring(0, i);"]}]}},"cd6a71af005ba6b2bb553c56519a4e6eb32d5c2d":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["889","                File symlinkFile = new File(baseDir, symlinkPath);","890","                if (symlinkFile.exists())","897","                    r = PosixAPI.get().symlink(targetPath,symlinkFile.getAbsolutePath());"],"delete":["889","                if (new File(symlinkPath).exists())","896","                    r = PosixAPI.get().symlink(targetPath,symlinkPath);"]}]}},"78e012abca5fde500f071a918da3e54b38b53b28":{"changes":{"core\/src\/main\/java\/hudson\/slaves\/EnvironmentVariablesNodeProperty.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/EnvironmentVariablesNodeProperty\/config.jelly":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/slaves\/EnvironmentVariablesNodeProperty.java":[{"add":["41","import java.util.Map;","42","import java.util.Set;","43","import java.util.stream.Collectors;","70","    \/**","71","     * @return environment variables using same data type as constructor parameter.","72","     * @since TODO","73","     *\/","74","    public List<Entry> getEnv() {","75","        return envVars.entrySet().stream().map(Entry::new).collect(Collectors.toList());","76","    }","77","","113","\t\tprivate Entry(Map.Entry<String,String> e) {","114","\t\t    this(e.getKey(), e.getValue());","115","        }","116",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/slaves\/EnvironmentVariablesNodeProperty\/config.jelly":[{"add":["27","    <f:repeatable var=\"env\" items=\"${instance.env}\">"],"delete":["27","    <f:repeatable var=\"env\" items=\"${instance.envVars.entrySet()}\">"]}]}},"8cd8d3e76974a9dec4d9004e5b9d610ef9a10714":{"changes":{"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/hudson\/executors.jelly":[{"add":["45","\t          <th class=\"pane\" align=\"right\">#<\/th>","46","\t          <th class=\"pane\" width=\"80%\">","56","            <th class=\"pane\" width=\"24\"><st:nbsp\/><\/th>","70","\t        <td class=\"pane\" align=\"right\" style=\"vertical-align: top\">","75","              <td class=\"pane\">","83","\t            <td class=\"pane\">","96","\t            <td class=\"pane\">","100","\t            <td class=\"pane\" align=\"center\" valign=\"middle\">","117","<\/j:jelly>"],"delete":["45","\t          <th class=\"pane\">No.<\/th>","46","\t          <th class=\"pane\">","56","            <th class=\"pane\"><st:nbsp\/><\/th>","70","\t        <td class=\"pane\">","75","              <td class=\"pane\" width=\"70%\">","83","\t            <td class=\"pane\" width=\"70%\">","96","\t            <td class=\"pane\" width=\"70%\">","100","\t            <td class=\"pane\" width=\"16\" align=\"center\" valign=\"middle\">","117","<\/j:jelly>"]}]}},"9714917685e2b50f59b4feda9bc4e561870a944f":{"changes":{"debian\/debian\/jenkins.postinst":"MODIFY","debian\/debian\/jenkins.default":"MODIFY","debian\/debian\/jenkins.postrm":"MODIFY","debian\/debian\/dirs":"MODIFY","changelog.html":"MODIFY"},"diff":{"debian\/debian\/jenkins.postinst":[{"add":["49","        # make sure jenkins can delete everything in \/var\/cache\/jenkins to","50","        # re-explode war. older installations may use \/var\/run\/jenkins","51","        # so make sure that they can delete too.","52","        chown -R jenkins:adm \/var\/cache\/jenkins \/var\/run\/jenkins","53","        chmod -R 750         \/var\/cache\/jenkins \/var\/run\/jenkins"],"delete":["49","        # make sure jenkins can delete everything in \/var\/run\/jenkins to re-explode war","50","        chown -R jenkins:adm \/var\/run\/jenkins","51","        chmod -R 750         \/var\/run\/jenkins"]}],"debian\/debian\/jenkins.default":[{"add":["53","JENKINS_ARGS=\"--webroot=\/var\/cache\/jenkins\/war --httpPort=$HTTP_PORT --ajp13Port=$AJP_PORT\""],"delete":["53","JENKINS_ARGS=\"--webroot=\/var\/run\/jenkins\/war --httpPort=$HTTP_PORT --ajp13Port=$AJP_PORT\""]}],"debian\/debian\/jenkins.postrm":[{"add":["7","        rm -rf \/var\/lib\/jenkins \/var\/log\/jenkins \\","8","               \/var\/run\/jenkins \/var\/cache\/jenkins"],"delete":["7","        rm -rf \/var\/lib\/jenkins \/var\/log\/jenkins \/var\/run\/jenkins"]}],"debian\/debian\/dirs":[{"add":["13","","14","# Cache directory for the unpacked jenkins.war file.","15","var\/cache\/jenkins"],"delete":[]}],"changelog.html":[{"add":["81","  <li class=bug>","82","    Jenkins takes up too much space in \/var\/run","83","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11366\">issue 11366<\/a>)"],"delete":[]}]}},"f982d84a076afce73d31dab56c3f084b6f521e83":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/test\/java\/hudson\/UtilTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["868","            int codePoint = Character.codePointAt(s, i);","869","            if((codePoint&0xffffff80)==0) { \/\/ 1 byte","870","                c = s.charAt(i);","871","                if (c > 122 || uriMap[c]) {","872","                    if (!escaped) {","873","                        out = new StringBuilder(i + (m - i) * 3);","874","                        out.append(s, 0, i);","875","                        enc = StandardCharsets.UTF_8.newEncoder();","876","                        buf = CharBuffer.allocate(1);","877","                        escaped = true;","878","                    }","879","                    \/\/ 1 char -> UTF8","880","                    buf.put(0, c);","881","                    buf.rewind();","882","                    try {","883","                        ByteBuffer bytes = enc.encode(buf);","884","                        while (bytes.hasRemaining()) {","885","                            byte b = bytes.get();","886","                            out.append('%');","887","                            out.append(toDigit((b >> 4) & 0xF));","888","                            out.append(toDigit(b & 0xF));","889","                        }","890","                    } catch (CharacterCodingException ex) {","891","                    }","892","                } else if (escaped) {","893","                    out.append(c);","894","                }","895","            } else {","901","","902","                byte[] bytes = new String(new int[] { codePoint }, 0, 1).getBytes(StandardCharsets.UTF_8);","903","                for(int j=0;j<bytes.length;j++) {","904","                    out.append('%');","905","                    out.append(toDigit((bytes[j] >> 4) & 0xF));","906","                    out.append(toDigit(bytes[j] & 0xF));","907","                }","908","","909","                if(Character.charCount(codePoint) > 1) {","910","                    i++; \/\/ we processed two characters","911","                }"],"delete":["868","            c = s.charAt(i);","869","            if (c > 122 || uriMap[c]) {","873","                    enc = StandardCharsets.UTF_8.newEncoder();","874","                    buf = CharBuffer.allocate(1);","877","                \/\/ 1 char -> UTF8","878","                buf.put(0,c);","879","                buf.rewind();","880","                try {","881","                    ByteBuffer bytes = enc.encode(buf);","882","                    while (bytes.hasRemaining()) {","883","                        byte b = bytes.get();","884","                        out.append('%');","885","                        out.append(toDigit((b >> 4) & 0xF));","886","                        out.append(toDigit(b & 0xF));","887","                    }","888","                } catch (CharacterCodingException ex) { }","889","            } else if (escaped) {","890","                out.append(c);"]}],"core\/src\/test\/java\/hudson\/UtilTest.java":[{"add":["160","            \"Foo \\uD800\\uDF98 Foo\", \"Foo%20%F0%90%8E%98%20Foo\""],"delete":[]}]}},"c83d2cf486de3481c85bc7fc66072e836b531d63":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/Ant\/config.groovy":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/Ant\/config.groovy":[{"add":["26","if (descriptor.installations.length != 0) {"],"delete":["26","if (!descriptor.installations) {"]}]}},"d2fb6d918c97b7b568eeff5b43e7095cbcb5d107":{"changes":{"core\/src\/main\/java\/hudson\/model\/FileParameterValue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/FileParameterValue.java":[{"add":["259","                FileInputStream inputStream = new FileInputStream(file);","260","                try {","261","                    return IOUtils.toByteArray(inputStream);","262","                } finally {","263","                    inputStream.close();","264","                }","300","        @Deprecated"],"delete":["259","                return IOUtils.toByteArray(new FileInputStream(file));"]}]}},"db86c21cb6c14e7a697b63159d18976409c493ba":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractBuild\/index.jelly":[{"add":["5","        <j:if test=\"${h.hasPermission(it.UPDATE)}\">","7","        <\/j:if>","8","        <j:if test=\"${h.hasPermission(it.DELETE)}\">","10","        <\/j:if>"],"delete":["5","        <l:isAdmin>","8","        <\/l:isAdmin>"]}]}},"23fc934cdd80ad1b0876365062001c62224c2b30":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["943","        requirePOST();"],"delete":[]}],"changelog.html":[{"add":["58","    GET request to configSubmit wipes some configuration","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11397\">issue 11397<\/a>, <a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7847\">issue 7847<\/a>)"],"delete":["58","    Configuring view when not logged in wipes view configuration","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-11397\">issue 11397<\/a>)"]}]}},"82c9e03d5ca9d3ad237c11842fb83d9467bae6d3":{"changes":{"core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":"MODIFY","core\/src\/main\/java\/jenkins\/install\/UpgradeWizard.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/install\/InstallUtil.java":[{"add":["84","        ","85","        \/\/ Support a 3-state flag for running or disabling the setup wizard","86","        String shouldRunFlag = System.getProperty(\"jenkins.install.runSetupWizard\");","87","        boolean shouldRun = \"true\".equalsIgnoreCase(shouldRunFlag);","88","        boolean shouldNotRun = \"false\".equalsIgnoreCase(shouldRunFlag);","89","        ","91","        if (!shouldRun) {","106","            Jenkins j = Jenkins.getInstance();","107","            ","108","            \/\/ Allow for skipping","109","            if(shouldNotRun) {","110","                try {","111","                    SetupWizard.completeSetup(j);","112","                    UpgradeWizard.completeUpgrade(j);","113","                    return j.getInstallState();","114","                } catch (RuntimeException e) {","115","                    throw e;","116","                } catch (Exception e) {","117","                    throw new RuntimeException(e);","118","                }","119","            }","120",""],"delete":["84","","86","        if (!Boolean.getBoolean(\"jenkins.install.runSetupWizard\")) {","104","            Jenkins j = Jenkins.getInstance();"]}],"core\/src\/main\/java\/jenkins\/install\/SetupWizard.java":[{"add":["60","        UpgradeWizard.completeUpgrade(j);","205","        completeSetup(jenkins);","206","        PluginServletFilter.removeFilter(FORCE_SETUP_WIZARD_FILTER);","207","        return HttpResponses.okJSON();","208","    }","209","    ","210","    static void completeSetup(Jenkins jenkins) {"],"delete":["60","        \/\/ this was determined to be a new install, don't run the update wizard here","61","        UpgradeWizard uw = jenkins.getInjector().getInstance(UpgradeWizard.class);","62","        if (uw!=null)","63","            uw.setCurrentLevel(new VersionNumber(\"2.0\"));","210","        PluginServletFilter.removeFilter(FORCE_SETUP_WIZARD_FILTER);","213","","214","        return HttpResponses.okJSON();"]}],"core\/src\/main\/java\/jenkins\/install\/UpgradeWizard.java":[{"add":["73","    void setCurrentLevel(VersionNumber v) throws IOException {","77","    ","78","    static void completeUpgrade(Jenkins jenkins) throws IOException {","79","        \/\/ this was determined to be a new install, don't run the update wizard here","80","        UpgradeWizard uw = jenkins.getInjector().getInstance(UpgradeWizard.class);","81","        if (uw!=null)","82","            uw.setCurrentLevel(new VersionNumber(\"2.0\"));","83","    }"],"delete":["73","    public void setCurrentLevel(VersionNumber v) throws IOException {"]}]}},"9a95d23344243f0424734a605291002276364d89":{"changes":{"core\/src\/main\/resources\/hudson\/PluginManager\/_table.js":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/PluginManager\/_table.js":[{"add":["26","            var encountered = {};","31","                if (visible && name != null) {","32","                    if (encountered[name]) {","33","                        visible = false;","34","                    }","35","                    encountered[name] = true;"],"delete":["25","          var visibles = {};","31","                if (name==null || !visibles[name]) {","32","                    visible = false;","33","                    visibles[name] = true;"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Plugin Manager\u2019s Filter field did not work. Regression in 1.500.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-16651\">issue 16651<\/a>)"],"delete":["57","  <li class=>"]}]}},"2fcca36d5bfa8e07a47eb81fc7c420916f0363a8":{"changes":{"core\/pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["255","      <exclusions>","256","        <exclusion><!-- we'll add our own patched version. see http:\/\/www.nabble.com\/Issue-1680-td18383889.html -->","257","          <groupId>jtidy<\/groupId>","258","          <artifactId>jtidy<\/artifactId>","259","        <\/exclusion>","260","      <\/exclusions>","261","    <\/dependency>","262","    <dependency>","263","      <groupId>org.jvnet.hudson<\/groupId>","264","      <artifactId>jtidy<\/artifactId>","265","      <version>4aug2000r7-dev-hudson-1<\/version>"],"delete":[]}]}},"afe17a4bda72dc722e505967efc88ef449c0fd75":{"changes":{"\/dev\/null":"DELETE","core\/src\/test\/java\/hudson\/util\/io\/RewindableRotatingFileOutputStreamTest.java":"ADD","core\/pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/util\/io\/RewindableFileOutputStream.java":"MODIFY"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"core\/src\/test\/java\/hudson\/util\/io\/RewindableRotatingFileOutputStreamTest.java":[{"add":[],"delete":[]}],"core\/pom.xml":[{"add":["774","          <trimStackTrace>false<\/trimStackTrace> <!-- SUREFIRE-1226 workaround -->"],"delete":[]}],"core\/src\/main\/java\/hudson\/util\/io\/RewindableFileOutputStream.java":[{"add":["30","import org.apache.commons.io.FileUtils;","51","                FileUtils.forceMkdir(out.getParentFile());"],"delete":[]}]}},"e798f64854be85141ab7ba610c3a8ee0b093f36b":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["195","        \/\/ We're not using Files.newBufferedReader() here because there is a","196","        \/\/ difference in how an InputStreamReader constructed from a Charset and","197","        \/\/ the reader returned by Files.newBufferedReader() handle malformed and","198","        \/\/ unmappable byte sequences for the specified encoding; the latter is","199","        \/\/ more picky and will throw a CharacterCodingException. See:","200","        \/\/ https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-49060?focusedCommentId=325989&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-325989","201","        \/\/","202","        \/\/ As reported at https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-49112","203","        \/\/ Run.getLog() calls loadFile() to fully read the generated log file.","204","        \/\/ Until charset handling is resolved (e.g. by implementing","205","        \/\/ https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-48923 ), malformed","206","        \/\/ bytes will need to be tolerated.","207","        try (InputStream rawIn = Files.newInputStream(fileToPath(logfile));","208","             Reader r = new BufferedReader(new InputStreamReader(rawIn, charset))) {","213","        } catch (Exception e) {","214","            throw new IOException(\"Failed to fully read \" + logfile + \" using charset \" + charset.name(), e);"],"delete":["195","        try (BufferedReader r = Files.newBufferedReader(fileToPath(logfile), charset)) {"]}]}},"f43ecdd93edbe35f48d2e6a71103aae4aead19ff":{"changes":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY"},"diff":{"maven-plugin\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["799","        \/\/ We're called against the module root, not the workspace, which can cause a lot of confusion.","800","        private final String workspaceProper;","801","        ","810","            this.workspaceProper = project.getLastBuild().getWorkspace().getRemote();","852","                : new File(workspaceProper, alternateSettings);"],"delete":["799","\t","849","                : new File(ws, alternateSettings);"]}]}},"fd7d1e383c5b157316e648f1b50bceb7d8130267":{"changes":{"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/setupWizardConfigureInstance.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/jenkins\/install\/SetupWizard\/setupWizardConfigureInstance.jelly":[{"add":["105","            var rootUrlField = $('root-url');","106","            ","107","            rootUrlField.focus();","108","            rootUrlField.onkeydown = function(event) {","109","                if (event.keyCode == 13){","110","                    event.preventDefault();","111","                }","112","            };","113",""],"delete":["105","            $('root-url').focus();","112","              var rootUrlField = $('root-url');"]}]}},"5c8cc45900bf8d78058cecd471840bdbc88215d3":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/DumbSlave\/configure-entries.jelly":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":"MODIFY","core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["696","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^(\\d+|)$\/,\"Not an integer\"); },","697","    \"INPUT.number-required\" : function(e) { registerRegexpValidator(e,\/^\\-?(\\d+)$\/,\"Not an integer\"); },","698","","699","    \"INPUT.non-negative-number-required\" : function(e) {","702","","704","        registerRegexpValidator(e,\/^(\\d*[1-9]\\d*|)$\/,\"Not a positive integer\");","705","    },","706","    \"INPUT.positive-number-required\" : function(e) {"],"delete":["696","    \"INPUT.number\" : function(e) { registerRegexpValidator(e,\/^\\-?(\\d+)$\/,\"Not an integer\"); },","697","    \"INPUT.non-negative-number\" : function(e) {"]}],"core\/src\/main\/resources\/jenkins\/model\/MasterBuildConfiguration\/config.groovy":[{"add":["5","    f.number(clazz:\"non-negative-number-required\", min:0, step:1)"],"delete":["5","    f.number(clazz:\"non-negative-number\", min:0, step:1)"]}],"core\/src\/main\/resources\/hudson\/slaves\/DumbSlave\/configure-entries.jelly":[{"add":["35","    <f:number clazz=\"positive-number-required\" min=\"1\" step=\"1\" default=\"1\"\/>"],"delete":["35","    <f:number clazz=\"positive-number\" min=\"1\" step=\"1\" default=\"1\"\/>"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/MasterComputer\/configure.jelly":[{"add":["44","          <f:number clazz=\"non-negative-number-required\" min=\"0\" step=\"1\"\/>"],"delete":["44","          <f:number clazz=\"non-negative-number\" min=\"0\" step=\"1\"\/>"]}],"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["69","import org.apache.commons.lang.StringUtils;","1476","        if (StringUtils.isBlank(nExecutors) || Integer.parseInt(nExecutors)<=0) {"],"delete":["1475","        if (Integer.parseInt(nExecutors)<=0) {"]}]}},"5b5040298f5fbf9d5ff7ea7fbfd34f7169e94d75":{"changes":{"test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":"MODIFY","test\/src\/test\/java\/hudson\/cli\/CLITest.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/config.jelly":"MODIFY","cli\/src\/main\/java\/hudson\/cli\/PlainCLIProtocol.java":"MODIFY","pom.xml":"MODIFY","core\/src\/main\/java\/hudson\/slaves\/JNLPLauncher.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/slave-agent.jnlp.jelly":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/DefaultJnlpSlaveReceiver.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Slave.java":"MODIFY","core\/src\/main\/resources\/hudson\/cli\/CLIAction\/example.jelly":"MODIFY","cli\/pom.xml":"MODIFY","core\/src\/main\/java\/jenkins\/slaves\/JnlpAgentReceiver.java":"MODIFY","cli\/src\/main\/java\/hudson\/cli\/CLI.java":"MODIFY","core\/src\/main\/java\/hudson\/triggers\/SafeTimerTask.java":"MODIFY","test\/src\/test\/java\/hudson\/slaves\/JNLPLauncherTest.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/systemInfo.jelly":"MODIFY","cli\/src\/main\/resources\/hudson\/cli\/client\/Messages.properties":"MODIFY","core\/src\/main\/java\/jenkins\/websocket\/WebSocketEcho.java":"ADD","test\/src\/test\/java\/jenkins\/agents\/WebSocketAgentsTest.java":"ADD","cli\/src\/test\/java\/hudson\/cli\/PlainCLIProtocolTest.java":"MODIFY","core\/src\/main\/resources\/hudson\/TcpSlaveAgentListener\/index.jelly":"MODIFY","core\/src\/main\/java\/jenkins\/websocket\/WebSocketSession.java":"ADD","core\/src\/main\/java\/jenkins\/agents\/WebSocketAgents.java":"ADD","core\/src\/main\/java\/hudson\/cli\/CLIAction.java":"MODIFY","test\/pom.xml":"MODIFY","core\/src\/main\/java\/jenkins\/websocket\/WebSockets.java":"ADD","core\/src\/main\/java\/hudson\/cli\/CLICommand.java":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/help-webSocket.html":"ADD","war\/pom.xml":"MODIFY","core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/main.jelly":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/CLIActionTest.java":[{"add":["96","        List<String> commands = Lists.newArrayList(\"java\", \"-jar\", jar.getAbsolutePath(), \"-s\", j.getURL().toString(), \/* TODO until it is the default *\/ \"-webSocket\");","135","                \"-webSocket\", \/\/ TODO as above","136","                \"-s\", j.getURL().toString().\/* just checking *\/replaceFirst(\"\/$\", \"\"), \"test-diagnostic\").","154","            \"java\", \"-jar\", jar.getAbsolutePath(), \"-s\", j.getURL().toString(),","155","                \"-webSocket\", \/\/ TODO as above","156","                \"groovysh\")."],"delete":["22","import java.util.concurrent.ExecutorService;","55","    private ExecutorService pool;","56","","89","        \/\/ If we have anonymous read access, then the situation is simpler.","100","        List<String> commands = Lists.newArrayList(\"java\", \"-jar\", jar.getAbsolutePath(), \"-s\", j.getURL().toString(), \/* not covering SSH keys in this test *\/ \"-noKeyAuth\");","139","                \"-s\", j.getURL().toString().\/* just checking *\/replaceFirst(\"\/$\", \"\"), \"-noKeyAuth\", \"test-diagnostic\").","157","            \"java\", \"-jar\", jar.getAbsolutePath(), \"-s\", j.getURL().toString(), \"-noKeyAuth\", \"groovysh\").","166","        Thread.sleep(31_000); \/\/ aggravate org.eclipse.jetty.io.IdleTimeout (cf. AbstractConnector._idleTimeout)"]}],"test\/src\/test\/java\/hudson\/cli\/CLITest.java":[{"add":["159","        doInterrupt(p, \"-webSocket\", \"-auth\", \"admin:admin\");","194","        \/\/ TODO -webSocket currently produces a stack trace","248","        for (String transport: Arrays.asList(\"-http\", \"-ssh\", \"-webSocket\")) {"],"delete":["246","        for (String transport: Arrays.asList(\"-http\", \"-ssh\")) {"]}],"core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/config.jelly":[{"add":["30","  <f:entry field=\"webSocket\">","31","    <f:checkbox title=\"${%Use WebSocket}\"\/>","32","  <\/f:entry>"],"delete":[]}],"cli\/src\/main\/java\/hudson\/cli\/PlainCLIProtocol.java":[{"add":["39","import org.apache.commons.io.input.BoundedInputStream;","79","    interface Output extends Closeable {","80","        void send(byte[] data) throws IOException;","81","    }","83","    static final class FramedOutput implements Output {","85","        private final DataOutputStream dos;","86","","87","        FramedOutput(OutputStream os) {","91","        @Override","92","        public void send(byte[] data) throws IOException {","93","            dos.writeInt(data.length - 1); \/\/ not counting the opcode","94","            dos.write(data);","95","            dos.flush();","98","        @Override","99","        public void close() throws IOException {","100","            dos.close();","101","        }","103","    }","105","    static final class FramedReader extends Thread {","106","","107","        private final EitherSide side;","108","        private final CountingInputStream cis;","109","        private final FlightRecorderInputStream flightRecorder;","110","        private final DataInputStream dis;","111","","112","        FramedReader(EitherSide side, InputStream is) {","113","            super(\"PlainCLIProtocol\"); \/\/ TODO set distinctive Thread.name","114","            this.side = side;","115","            cis = new CountingInputStream(is);","116","            flightRecorder = new FlightRecorderInputStream(cis);","117","            dis = new DataInputStream(flightRecorder);","118","        }","119","","120","        @Override","121","        public void run() {","122","            try {","123","                while (true) {","124","                    LOGGER.finest(\"reading frame\");","125","                    int framelen;","126","                    try {","127","                        framelen = dis.readInt();","128","                    } catch (EOFException x) {","129","                        side.handleClose();","130","                        break; \/\/ TODO verify that we hit EOF immediately, not partway into framelen","131","                    }","132","                    if (framelen < 0) {","133","                        throw new IOException(\"corrupt stream: negative frame length\");","134","                    }","135","                    LOGGER.finest(\"read frame length \" + framelen);","136","                    long start = cis.getByteCount();","137","                    try {","138","                        side.handle(new DataInputStream(new BoundedInputStream(dis, \/* op byte not counted *\/framelen + 1)));","139","                    } catch (ProtocolException x) {","140","                        LOGGER.log(Level.WARNING, null, x);","141","                        \/\/ but read another frame","142","                    } finally {","143","                        long actuallyRead = cis.getByteCount() - start;","144","                        long unread = framelen + 1 - actuallyRead;","145","                        if (unread > 0) {","146","                            LOGGER.warning(() -> \"Did not read \" + unread + \" bytes\");","147","                            IOUtils.skipFully(dis, unread);","151","            } catch (ClosedChannelException x) {","152","                LOGGER.log(Level.FINE, null, x);","153","                side.handleClose();","154","            } catch (IOException x) {","155","                LOGGER.log(Level.WARNING, null, flightRecorder.analyzeCrash(x, \"broken stream\"));","156","            } catch (ReadPendingException x) {","157","                \/\/ in case trick in CLIAction does not work","158","                LOGGER.log(Level.FINE, null, x);","159","                side.handleClose();","160","            } catch (RuntimeException x) {","161","                LOGGER.log(Level.WARNING, null, x);","162","                side.handleClose();","164","        }","166","    }","167","","168","    private static final class ProtocolException extends IOException {","169","        ProtocolException(String message) {","170","            super(message);","171","        }","172","    }","173","","174","    static abstract class EitherSide implements Closeable {","175","","176","        private final Output out;","177","","178","        protected EitherSide(Output out) {","179","            this.out = out;","184","        final void handle(DataInputStream dis) throws IOException {","185","            byte b = dis.readByte();","186","            if (b < 0) { \/\/ i.e., >127","187","                throw new IOException(\"corrupt stream: negative operation code\");","188","            }","189","            if (b >= Op.values().length) {","190","                throw new ProtocolException(\"unknown operation #\" + b);","191","            }","192","            Op op = Op.values()[b];","193","            LOGGER.finest(() -> \"handling frame with \" + op);","194","            if (!handle(op, dis)) {","195","                throw new ProtocolException(\"unhandled: \" + op);","196","            }","199","        protected abstract boolean handle(Op op, DataInputStream dis) throws IOException;","200","","202","            send(op, new byte[0], 0, 0);","205","        protected final synchronized void send(Op op, int v) throws IOException {","206","            ByteArrayOutputStream baos = new ByteArrayOutputStream(4);","207","            new DataOutputStream(baos).writeInt(v);","208","            send(op, baos.toByteArray());","212","            byte[] data = new byte[len + 1];","213","            data[0] = (byte) op.ordinal();","214","            System.arraycopy(chunk, off, data, 1, len);","215","            out.send(data);","247","            out.close();","254","        ServerSide(Output out) {","255","            super(out);","259","        protected final boolean handle(Op op, DataInputStream dis) throws IOException {","275","                onStdin(IOUtils.toByteArray(dis));","313","        ClientSide(Output out) {","314","            super(out);","318","        protected boolean handle(Op op, DataInputStream dis) throws IOException {","325","                onStdout(IOUtils.toByteArray(dis));","328","                onStderr(IOUtils.toByteArray(dis));","337","        \/\/ TODO more efficient to change signature to InputStream, then use IOUtils.copy"],"delete":["78","    static abstract class EitherSide implements Closeable {","80","        private final CountingInputStream cis;","81","        private final FlightRecorderInputStream flightRecorder;","82","        final DataInputStream dis;","83","        final DataOutputStream dos;","85","        protected EitherSide(InputStream is, OutputStream os) {","86","            cis = new CountingInputStream(is);","87","            flightRecorder = new FlightRecorderInputStream(cis);","88","            dis = new DataInputStream(flightRecorder);","92","        final void begin() {","93","            new Reader().start();","96","        private class Reader extends Thread {","98","            Reader() {","99","                super(\"PlainCLIProtocol\"); \/\/ TODO set distinctive Thread.name","100","            }","102","            @Override","103","            public void run() {","104","                try {","105","                    while (true) {","106","                        LOGGER.finest(\"reading frame\");","107","                        int framelen;","108","                        try {","109","                            framelen = dis.readInt();","110","                        } catch (EOFException x) {","111","                            handleClose();","112","                            break; \/\/ TODO verify that we hit EOF immediately, not partway into framelen","113","                        }","114","                        if (framelen < 0) {","115","                            throw new IOException(\"corrupt stream: negative frame length\");","116","                        }","117","                        byte b = dis.readByte();","118","                        if (b < 0) { \/\/ i.e., >127","119","                            throw new IOException(\"corrupt stream: negative operation code\");","120","                        }","121","                        if (b >= Op.values().length) {","122","                            LOGGER.log(Level.WARNING, \"unknown operation #{0}: {1}\", new Object[] {b, HexDump.toHex(flightRecorder.getRecord())});","123","                            IOUtils.skipFully(dis, framelen);","124","                            continue;","125","                        }","126","                        Op op = Op.values()[b];","127","                        long start = cis.getByteCount();","128","                        LOGGER.log(Level.FINEST, \"handling frame with {0} of length {1}\", new Object[] {op, framelen});","129","                        boolean handled = handle(op, framelen);","130","                        if (handled) {","131","                            long actuallyRead = cis.getByteCount() - start;","132","                            if (actuallyRead != framelen) {","133","                                throw new IOException(\"corrupt stream: expected to read \" + framelen + \" bytes from \" + op + \" but read \" + actuallyRead);","134","                            }","135","                        } else {","136","                            LOGGER.log(Level.WARNING, \"unexpected {0}: {1}\", new Object[] {op, HexDump.toHex(flightRecorder.getRecord())});","137","                            IOUtils.skipFully(dis, framelen);","140","                } catch (ClosedChannelException x) {","141","                    LOGGER.log(Level.FINE, null, x);","142","                    handleClose();","143","                } catch (IOException x) {","144","                    LOGGER.log(Level.WARNING, null, flightRecorder.analyzeCrash(x, \"broken stream\"));","145","                } catch (ReadPendingException x) {","146","                    \/\/ in case trick in CLIAction does not work","147","                    LOGGER.log(Level.FINE, null, x);","148","                    handleClose();","149","                } catch (RuntimeException x) {","150","                    LOGGER.log(Level.WARNING, null, x);","151","                    handleClose();","159","        protected abstract boolean handle(Op op, int framelen) throws IOException;","160","","161","        private void writeOp(Op op) throws IOException {","162","            dos.writeByte((byte) op.ordinal());","166","            dos.writeInt(0);","167","            writeOp(op);","168","            dos.flush();","171","        protected final synchronized void send(Op op, int number) throws IOException {","172","            dos.writeInt(4);","173","            writeOp(op);","174","            dos.writeInt(number);","175","            dos.flush();","179","            dos.writeInt(len);","180","            writeOp(op);","181","            dos.write(chunk, off, len);","182","            dos.flush();","195","        protected final byte[] readChunk(int framelen) throws IOException {","196","            assert Thread.currentThread() instanceof EitherSide.Reader;","197","            byte[] buf = new byte[framelen];","198","            dis.readFully(buf);","199","            return buf;","200","        }","201","","221","            dos.close();","228","        ServerSide(InputStream is, OutputStream os) {","229","            super(is, os);","233","        protected final boolean handle(Op op, int framelen) throws IOException {","234","            assert Thread.currentThread() instanceof EitherSide.Reader;","250","                onStdin(readChunk(framelen));","288","        ClientSide(InputStream is, OutputStream os) {","289","            super(is, os);","293","        protected boolean handle(Op op, int framelen) throws IOException {","294","            assert Thread.currentThread() instanceof EitherSide.Reader;","301","                onStdout(readChunk(framelen));","304","                onStderr(readChunk(framelen));"]}],"pom.xml":[{"add":["103","    <remoting.version>4.0<\/remoting.version>"],"delete":["103","    <remoting.version>3.40<\/remoting.version>"]}],"core\/src\/main\/java\/hudson\/slaves\/JNLPLauncher.java":[{"add":["30","import hudson.util.FormValidation;","37","import jenkins.websocket.WebSockets;","43","import org.kohsuke.stapler.QueryParameter;","76","    private boolean webSocket;","77","","149","    \/**","150","     * @since TODO","151","     *\/","152","    public boolean isWebSocket() {","153","        return webSocket;","154","    }","155","","156","    \/**","157","     * @since TODO","158","     *\/","159","    @DataBoundSetter","160","    public void setWebSocket(boolean webSocket) {","161","        this.webSocket = webSocket;","162","    }","163","","218","        public FormValidation doCheckWebSocket(@QueryParameter boolean webSocket, @QueryParameter String tunnel) {","219","            if (webSocket) {","220","                if (!WebSockets.isSupported()) {","221","                    return FormValidation.error(\"WebSocket support is not enabled in this Jenkins installation\");","222","                }","223","                if (Util.fixEmptyAndTrim(tunnel) != null) {","224","                    return FormValidation.error(\"Tunneling is not supported in WebSocket mode\");","225","                }","226","            } else {","227","                if (Jenkins.get().getTcpSlaveAgentListener() == null) {","228","                    return FormValidation.error(\"Either WebSocket mode is selected, or the TCP port for inbound agents must be enabled\");","229","                }","230","            }","231","            return FormValidation.ok();"],"delete":["29","import hudson.model.DescriptorVisibilityFilter;","198","    }","200","    \/**","201","     * Hides the JNLP launcher when the JNLP agent port is not enabled.","202","     *","203","     * @since 2.16","204","     *\/","205","    @Extension","206","    public static class DescriptorVisibilityFilterImpl extends DescriptorVisibilityFilter {","207","","208","        @Override","209","        public boolean filter(@CheckForNull Object context, @Nonnull Descriptor descriptor) {","210","            return descriptor.clazz != JNLPLauncher.class || Jenkins.get().getTcpSlaveAgentListener() != null;","213","        @Override","214","        public boolean filterType(@Nonnull Class<?> contextClass, @Nonnull Descriptor descriptor) {","215","            return descriptor.clazz != JNLPLauncher.class || Jenkins.get().getTcpSlaveAgentListener() != null;","216","        }"]}],"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/slave-agent.jnlp.jelly":[{"add":["65","        <j:if test=\"${launcher.webSocket}\">","66","          <argument>-webSocket<\/argument>","67","        <\/j:if>"],"delete":[]}],"core\/src\/main\/java\/jenkins\/slaves\/DefaultJnlpSlaveReceiver.java":[{"add":["115","                            new Object[]{clientName, event.getRemoteEndpointDescription(), computer.getLauncher().getClass()});","151","        logw.println(\"Inbound agent connected from \" + event.getRemoteEndpointDescription());"],"delete":["115","                            new Object[]{clientName, event.getSocket().getRemoteSocketAddress(), computer.getLauncher().getClass()});","151","        logw.println(\"Inbound agent connected from \" + event.getSocket().getInetAddress());"]}],"core\/src\/main\/java\/hudson\/model\/Slave.java":[{"add":["409","","410","            Class<?> owner = null;","412","                owner = CLI.class;","414","                owner = hudson.remoting.Launcher.class;","415","            }","416","            if (owner != null) {","417","                File jar = Which.jarFile(owner);","418","                if (jar.isFile()) {","419","                    name = \"lib\/\" + jar.getName();","421","                    URL res = findExecutableJar(jar, owner);"],"delete":["409","            ","411","                File cliJar = Which.jarFile(CLI.class);","412","                if (cliJar.isFile()) {","413","                    name = \"jenkins-cli.jar\";","414","                } else {","415","                    URL res = findExecutableJar(cliJar, CLI.class);","416","                    if (res != null) {","417","                        return res;","418","                    }","419","                }","421","                File remotingJar = Which.jarFile(hudson.remoting.Launcher.class);","422","                if (remotingJar.isFile()) {","423","                    name = \"lib\/\" + remotingJar.getName();","425","                    URL res = findExecutableJar(remotingJar, hudson.remoting.Launcher.class);"]}],"core\/src\/main\/resources\/hudson\/cli\/CLIAction\/example.jelly":[{"add":["36","  <pre id=\"example\">java -jar <a href=\"${rootURL}\/jnlpJars\/jenkins-cli.jar\" style=\"color: white\">jenkins-cli.jar<\/a> -s ${h.inferHudsonURL(request)} <j:if test=\"${it.webSocketSupported}\">-webSocket<\/j:if> ${commandArgs}<\/pre>"],"delete":["36","  <pre id=\"example\">java -jar <a href=\"${rootURL}\/jnlpJars\/jenkins-cli.jar\" style=\"color: white\">jenkins-cli.jar<\/a> -s ${h.inferHudsonURL(request)} ${commandArgs}<\/pre>"]}],"cli\/pom.xml":[{"add":["55","        <scope>provided<\/scope>","60","      <optional>true<\/optional>","65","      <optional>true<\/optional>","76","      <optional>true<\/optional>","82","      <optional>true<\/optional>","84","    <!-- ed25519 algorithm, see JENKINS-45318 -->","85","    <dependency>","86","      <groupId>net.i2p.crypto<\/groupId>","87","      <artifactId>eddsa<\/artifactId>","88","      <version>0.3.0<\/version>","89","      <optional>true<\/optional>","90","    <\/dependency>","94","      <optional>true<\/optional>","95","    <\/dependency>","96","    <dependency>","97","      <groupId>org.glassfish.tyrus.bundles<\/groupId>","98","      <artifactId>tyrus-standalone-client-jdk<\/artifactId>","99","      <version>1.12<\/version>","100","      <optional>true<\/optional>","105","      <scope>provided<\/scope>","110","      <optional>true<\/optional>","121","          <groupId>org.apache.maven.plugins<\/groupId>","122","          <artifactId>maven-shade-plugin<\/artifactId>","123","          <version>3.2.1<\/version>","124","          <executions>","125","              <execution>","126","                  <phase>package<\/phase>","127","                  <goals>","128","                      <goal>shade<\/goal>","129","                  <\/goals>","130","                  <configuration>","131","                      <createDependencyReducedPom>false<\/createDependencyReducedPom>","132","                      <relocations>","133","                          <relocation>","134","                              <pattern>javax.websocket<\/pattern>","135","                              <shadedPattern>io.jenkins.cli.shaded.javax.websocket<\/shadedPattern>","136","                          <\/relocation>","137","                          <relocation>","138","                              <pattern>org<\/pattern>","139","                              <shadedPattern>io.jenkins.cli.shaded.org<\/shadedPattern>","140","                          <\/relocation>","141","                          <relocation>","142","                              <pattern>net<\/pattern>","143","                              <shadedPattern>io.jenkins.cli.shaded.net<\/shadedPattern>","144","                          <\/relocation>","145","                      <\/relocations>","146","                      <transformers>","147","                          <transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\">","148","                              <mainClass>hudson.cli.CLI<\/mainClass>","149","                              <manifestEntries>","150","                                  <Jenkins-CLI-Version>${project.version}<\/Jenkins-CLI-Version>","151","                              <\/manifestEntries>","152","                          <\/transformer>","153","                          <transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"\/>","154","                      <\/transformers>","155","                  <\/configuration>","156","              <\/execution>","157","          <\/executions>"],"delete":["78","      <optional>true<\/optional> <!-- do not expose to core -->","80","\t<!-- ed25519 algorithm, see JENKINS-45318 -->","81","\t<dependency>","82","  \t  <groupId>net.i2p.crypto<\/groupId>","83","\t  <artifactId>eddsa<\/artifactId>","84","\t  <version>0.3.0<\/version>","85","\t<\/dependency>","89","      <optional>true<\/optional> <!-- ditto -->","94","      <optional>true<\/optional>","109","        <artifactId>maven-assembly-plugin<\/artifactId>","110","        <!-- version specified in grandparent pom -->","111","        <executions>","112","          <execution>","113","            <goals>","114","              <goal>single<\/goal>","115","            <\/goals>","116","            <phase>package<\/phase>","117","            <configuration>","118","              <descriptorRefs>","119","                <descriptorRef>jar-with-dependencies<\/descriptorRef>","120","              <\/descriptorRefs>","121","              <archive>","122","                <manifest>","123","                  <mainClass>hudson.cli.CLI<\/mainClass>","124","                <\/manifest>","125","                <manifestEntries>","126","                  <Jenkins-CLI-Version>${project.version}<\/Jenkins-CLI-Version>","127","                <\/manifestEntries>","128","              <\/archive>","129","            <\/configuration>","130","          <\/execution>","131","        <\/executions>"]}],"core\/src\/main\/java\/jenkins\/slaves\/JnlpAgentReceiver.java":[{"add":["9","import jenkins.agents.WebSocketAgents;","15"," * Receives incoming agents connecting through the likes of {@link JnlpSlaveAgentProtocol4} or {@link WebSocketAgents}."],"delete":["14"," * Receives incoming agents connecting through {@link JnlpSlaveAgentProtocol4}."]}],"cli\/src\/main\/java\/hudson\/cli\/CLI.java":[{"add":["26","import java.io.DataInputStream;","36","import java.net.URI;","39","import java.nio.ByteBuffer;","45","import java.util.Collections;","48","import java.util.Map;","54","import javax.websocket.ClientEndpointConfig;","55","import javax.websocket.Endpoint;","56","import javax.websocket.EndpointConfig;","57","import javax.websocket.Session;","60","import org.glassfish.tyrus.client.ClientManager;","61","import org.glassfish.tyrus.client.ClientProperties;","62","import org.glassfish.tyrus.container.jdk.client.JdkClientContainer;","105","    private enum Mode {HTTP, SSH, WEB_SOCKET}","115","        boolean noKeyAuth = false;","117","        \/\/ TODO perhaps allow mode to be defined by environment variable too (assuming $JENKINS_USER_ID can be used for -user)","152","            if (head.equals(\"-webSocket\")) {","153","                if (mode != null) {","154","                    printUsage(\"-webSocket clashes with previously defined mode \" + mode);","155","                    return -1;","156","                }","157","                mode = Mode.WEB_SOCKET;","158","                args = args.subList(1, args.size());","159","                continue;","160","            }","185","            \tnoKeyAuth = true;","269","            if (!noKeyAuth && !provider.hasKeys()) {","270","                provider.readFromDefaultLocations();","271","            }","279","        if (noKeyAuth) {","280","            LOGGER.warning(\"-noKeyAuth meaningful only with -ssh\");","281","        }","282","","299","        if (mode == Mode.WEB_SOCKET) {","300","            return webSocketConnection(url, args, factory);","301","        }","302","","306","    private static int webSocketConnection(String url, List<String> args, CLIConnectionFactory factory) throws Exception {","307","        LOGGER.fine(() -> \"Trying to connect to \" + url + \" via plain protocol over WebSocket\");","308","        class CLIEndpoint extends Endpoint {","309","            @Override","310","            public void onOpen(Session session, EndpointConfig config) {}","311","        }","312","        class Authenticator extends ClientEndpointConfig.Configurator {","313","            @Override","314","            public void beforeRequest(Map<String, List<String>> headers) {","315","                if (factory.authorization != null) {","316","                    headers.put(\"Authorization\", Collections.singletonList(factory.authorization));","317","                }","318","            }","319","        }","320","        ClientManager client = ClientManager.createClient(JdkClientContainer.class.getName()); \/\/ ~ ContainerProvider.getWebSocketContainer()","321","        client.getProperties().put(ClientProperties.REDIRECT_ENABLED, true); \/\/ https:\/\/tyrus-project.github.io\/documentation\/1.13.1\/index\/tyrus-proprietary-config.html#d0e1775","322","        Session session = client.connectToServer(new CLIEndpoint(), ClientEndpointConfig.Builder.create().configurator(new Authenticator()).build(), URI.create(url.replaceFirst(\"^http\", \"ws\") + \"cli\/ws\"));","323","        PlainCLIProtocol.Output out = new PlainCLIProtocol.Output() {","324","            @Override","325","            public void send(byte[] data) throws IOException {","326","                session.getBasicRemote().sendBinary(ByteBuffer.wrap(data));","327","            }","328","            @Override","329","            public void close() throws IOException {","330","                session.close();","331","            }","332","        };","333","        try (ClientSideImpl connection = new ClientSideImpl(out)) {","334","            session.addMessageHandler(InputStream.class, is -> {","335","                try {","336","                    connection.handle(new DataInputStream(is));","337","                } catch (IOException x) {","338","                    LOGGER.log(Level.WARNING, null, x);","339","                }","340","            });","341","            connection.start(args);","342","            return connection.exit();","343","        }","344","    }","345","","349","        try (final ClientSideImpl connection = new ClientSideImpl(new PlainCLIProtocol.FramedOutput(streams.getOutputStream()))) {","350","            connection.start(args);","351","            InputStream is = streams.getInputStream();","352","            if (is.read() != 0) { \/\/ cf. FullDuplexHttpService","353","                throw new IOException(\"expected to see initial zero byte; perhaps you are connecting to an old server which does not support -http?\");","355","            new PlainCLIProtocol.FramedReader(connection, is).start();","372","            return connection.exit();","376","    private static final class ClientSideImpl extends PlainCLIProtocol.ClientSide {","377","","378","        volatile boolean complete;","379","        private int exit = -1;","380","","381","        ClientSideImpl(PlainCLIProtocol.Output out) {","382","            super(out);","383","        }","384","","385","        void start(List<String> args) throws IOException {","386","            for (String arg : args) {","387","                sendArg(arg);","388","            }","389","            sendEncoding(Charset.defaultCharset().name());","390","            sendLocale(Locale.getDefault().toString());","391","            sendStart();","392","            new Thread(\"input reader\") {","393","                @Override","394","                public void run() {","395","                    try {","396","                        final OutputStream stdin = streamStdin();","397","                        int c;","398","                        \/\/ TODO check available to avoid sending lots of one-byte frames","399","                        while (!complete && (c = System.in.read()) != -1) {","400","                           stdin.write(c);","401","                        }","402","                        sendEndStdin();","403","                    } catch (IOException x) {","404","                        LOGGER.log(Level.WARNING, null, x);","405","                    }","406","                }","407","            }.start();","408","        }","409","","410","        @Override","411","        protected synchronized void onExit(int code) {","412","            this.exit = code;","413","            finished();","414","        }","415","","416","        @Override","417","        protected void onStdout(byte[] chunk) throws IOException {","418","            System.out.write(chunk);","419","        }","420","","421","        @Override","422","        protected void onStderr(byte[] chunk) throws IOException {","423","            System.err.write(chunk);","424","        }","425","","426","        @Override","427","        protected void handleClose() {","428","            finished();","429","        }","430","","431","        private synchronized void finished() {","432","            complete = true;","433","            notifyAll();","434","        }","435","","436","        synchronized int exit() throws InterruptedException {","437","            while (!complete) {","438","                wait();","439","            }","440","            return exit;","441","        }","442","","443","    }","444",""],"delete":["93","    private enum Mode {HTTP, SSH}","103","        boolean tryLoadPKey = true;","163","            \ttryLoadPKey = false;","231","        if (tryLoadPKey && !provider.hasKeys())","232","            provider.readFromDefaultLocations();","233","","279","        class ClientSideImpl extends PlainCLIProtocol.ClientSide {","280","            boolean complete;","281","            int exit = -1;","282","            ClientSideImpl(InputStream is, OutputStream os) throws IOException {","283","                super(is, os);","284","                if (is.read() != 0) { \/\/ cf. FullDuplexHttpService","285","                    throw new IOException(\"expected to see initial zero byte; perhaps you are connecting to an old server which does not support -http?\");","286","                }","288","            @Override","289","            protected void onExit(int code) {","290","                this.exit = code;","291","                finished();","292","            }","293","            @Override","294","            protected void onStdout(byte[] chunk) throws IOException {","295","                System.out.write(chunk);","296","            }","297","            @Override","298","            protected void onStderr(byte[] chunk) throws IOException {","299","                System.err.write(chunk);","300","            }","301","            @Override","302","            protected void handleClose() {","303","                finished();","304","            }","305","            private synchronized void finished() {","306","                complete = true;","307","                notifyAll();","308","            }","309","        }","310","        try (final ClientSideImpl connection = new ClientSideImpl(streams.getInputStream(), streams.getOutputStream())) {","311","            for (String arg : args) {","312","                connection.sendArg(arg);","313","            }","314","            connection.sendEncoding(Charset.defaultCharset().name());","315","            connection.sendLocale(Locale.getDefault().toString());","316","            connection.sendStart();","317","            connection.begin();","318","            new Thread(\"input reader\") {","319","                @Override","320","                public void run() {","321","                    try {","322","                        final OutputStream stdin = connection.streamStdin();","323","                        int c;","324","                        while (!connection.complete && (c = System.in.read()) != -1) {","325","                           stdin.write(c);","326","                        }","327","                        connection.sendEndStdin();","328","                    } catch (IOException x) {","329","                        LOGGER.log(Level.WARNING, null, x);","330","                    }","331","                }","332","            }.start();","349","            synchronized (connection) {","350","                while (!connection.complete) {","351","                    connection.wait();","352","                }","353","            }","354","            return connection.exit;"]}],"core\/src\/main\/java\/hudson\/triggers\/SafeTimerTask.java":[{"add":["53","     * Lambda-friendly means of creating a task.","54","     * @since TODO","55","     *\/","56","    public static SafeTimerTask of(ExceptionRunnable r) {","57","        return new SafeTimerTask() {","58","            @Override","59","            protected void doRun() throws Exception {","60","                r.run();","61","            }","62","        };","63","    }","64","    \/**","65","     * @see #of","66","     * @since TODO","67","     *\/","68","    @FunctionalInterface","69","    public interface ExceptionRunnable {","70","        void run() throws Exception;","71","    }","72","","73","    \/**"],"delete":[]}],"test\/src\/test\/java\/hudson\/slaves\/JNLPLauncherTest.java":[{"add":["58","import java.util.logging.Level;","62","import org.jvnet.hudson.test.LoggerRule;","73","    @Rule public TemporaryFolder tmpDir = new TemporaryFolder();","74","","75","    @Rule public LoggerRule logging = new LoggerRule().record(Slave.class, Level.FINE);"],"delete":["71","    @Rule public TemporaryFolder tmpDir = new TemporaryFolder(); "]}],"core\/src\/main\/resources\/hudson\/slaves\/SlaveComputer\/systemInfo.jelly":[{"add":["47","            <h2>${it.oSDescription} agent, version ${it.slaveVersion}<\/h2>"],"delete":["47","            <h2>${it.oSDescription} slave, version ${it.slaveVersion}<\/h2>"]}],"cli\/src\/main\/resources\/hudson\/cli\/client\/Messages.properties":[{"add":["5","  \\ -webSocket          : like -http but using WebSocket (works better with most reverse proxies)\\n\\"],"delete":[]}],"core\/src\/main\/java\/jenkins\/websocket\/WebSocketEcho.java":[{"add":[],"delete":[]}],"test\/src\/test\/java\/jenkins\/agents\/WebSocketAgentsTest.java":[{"add":[],"delete":[]}],"cli\/src\/test\/java\/hudson\/cli\/PlainCLIProtocolTest.java":[{"add":["29","import java.io.DataOutputStream;","47","                super(new PlainCLIProtocol.FramedOutput(upload));","68","                DataOutputStream dos = new DataOutputStream(upload);","79","                super(new PlainCLIProtocol.FramedOutput(download));","114","                DataOutputStream dos = new DataOutputStream(download);","122","        new PlainCLIProtocol.FramedReader(client, new PipedInputStream(download)).start();","123","        new PlainCLIProtocol.FramedReader(server, new PipedInputStream(upload)).start();"],"delete":["46","                super(new PipedInputStream(download), upload);","77","                super(new PipedInputStream(upload), download);","119","        client.begin();","120","        server.begin();"]}],"core\/src\/main\/resources\/hudson\/TcpSlaveAgentListener\/index.jelly":[{"add":["42","  <j:getStatic var=\"rmvh\" className=\"hudson.remoting.Engine\" field=\"REMOTING_MINIMUM_VERSION_HEADER\"\/>","43","  <st:header name=\"${rmvh}\" value=\"${app.tcpSlaveAgentListener.remotingMinimumVersion}\"\/>"],"delete":["42","  <st:header name=\"X-Remoting-Minimum-Version\" value=\"${app.tcpSlaveAgentListener.remotingMinimumVersion}\"\/>"]}],"core\/src\/main\/java\/jenkins\/websocket\/WebSocketSession.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/agents\/WebSocketAgents.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/CLIAction.java":[{"add":["45","import java.io.ByteArrayInputStream;","46","import java.io.DataInputStream;","52","import java.nio.ByteBuffer;","61","import jenkins.websocket.WebSocketSession;","62","import jenkins.websocket.WebSockets;","63","import org.acegisecurity.Authentication;","64","import org.kohsuke.stapler.HttpResponse;","108","    \/** for Jelly *\/","109","    public boolean isWebSocketSupported() {","110","        return WebSockets.isSupported();","111","    }","112","","113","    \/**","114","     * WebSocket endpoint.","115","     *\/","116","    public HttpResponse doWs() {","117","        if (!WebSockets.isSupported()) {","118","            return HttpResponses.notFound();","119","        }","120","        Authentication authentication = Jenkins.getAuthentication();","121","        return WebSockets.upgrade(new WebSocketSession() {","122","            ServerSideImpl connection;","123","            class OutputImpl implements PlainCLIProtocol.Output {","124","                @Override","125","                public void send(byte[] data) throws IOException {","126","                    sendBinary(ByteBuffer.wrap(data));","127","                }","128","                @Override","129","                public void close() throws IOException {","130","                    doClose();","131","                }","132","            }","133","            private void doClose() {","134","                close();","135","            }","136","            @Override","137","            protected void opened() {","138","                try {","139","                    connection = new ServerSideImpl(new OutputImpl(), authentication);","140","                } catch (IOException x) {","141","                    error(x);","142","                    return;","143","                }","144","                new Thread(() -> {","145","                    try {","146","                        try {","147","                            connection.run();","148","                        } finally {","149","                            connection.close();","150","                        }","151","                    } catch (Exception x) {","152","                        error(x);","153","                    }","154","                }, \"CLI handler for \" + authentication.getName()).start();","155","            }","156","            @Override","157","            protected void binary(byte[] payload, int offset, int len) {","158","                try {","159","                    connection.handle(new DataInputStream(new ByteArrayInputStream(payload, offset, len)));","160","                } catch (IOException x) {","161","                    error(x);","162","                }","163","            }","164","            @Override","165","            protected void error(Throwable cause) {","166","                LOGGER.log(Level.WARNING, null, cause);","167","            }","168","            @Override","169","            protected void closed(int statusCode, String reason) {","170","                LOGGER.fine(() -> \"closed: \" + statusCode + \": \" + reason);","171","                connection.handleClose();","172","            }","173","        });","174","    }","175","","192","    class ServerSideImpl extends PlainCLIProtocol.ServerSide {","193","        private Thread runningThread;","194","        private boolean ready;","195","        private final List<String> args = new ArrayList<>();","196","        private Locale locale = Locale.getDefault();","197","        private Charset encoding = Charset.defaultCharset();","198","        private final PipedInputStream stdin = new PipedInputStream();","199","        private final PipedOutputStream stdinMatch = new PipedOutputStream();","200","        private final Authentication authentication;","201","        ServerSideImpl(PlainCLIProtocol.Output out, Authentication authentication) throws IOException {","202","            super(out);","203","            stdinMatch.connect(stdin);","204","            this.authentication = authentication;","205","        }","206","        @Override","207","        protected void onArg(String text) {","208","            args.add(text);","209","        }","210","        @Override","211","        protected void onLocale(String text) {","212","            for (Locale _locale : Locale.getAvailableLocales()) {","213","                if (_locale.toString().equals(text)) {","214","                    locale = _locale;","215","                    return;","216","                }","217","            }","218","            LOGGER.log(Level.WARNING, \"unknown client locale {0}\", text);","219","        }","220","        @Override","221","        protected void onEncoding(String text) {","222","            try {","223","                encoding = Charset.forName(text);","224","            } catch (UnsupportedCharsetException x) {","225","                LOGGER.log(Level.WARNING, \"unknown client charset {0}\", text);","226","            }","227","        }","228","        @Override","229","        protected void onStart() {","230","            ready();","231","        }","232","        @Override","233","        protected void onStdin(byte[] chunk) throws IOException {","234","            stdinMatch.write(chunk);","235","        }","236","        @Override","237","        protected void onEndStdin() throws IOException {","238","            stdinMatch.close();","239","        }","240","        @Override","241","        protected void handleClose() {","242","            ready();","243","            if (runningThread != null) {","244","                runningThread.interrupt();","245","            }","246","        }","247","        private synchronized void ready() {","248","            ready = true;","249","            notifyAll();","250","        }","251","        void run() throws IOException, InterruptedException {","252","            synchronized (this) {","253","                while (!ready) {","254","                    wait();","255","                }","256","            }","257","            PrintStream stdout = new PrintStream(streamStdout(), false, encoding.name());","258","            PrintStream stderr = new PrintStream(streamStderr(), true, encoding.name());","259","            if (args.isEmpty()) {","260","                stderr.println(\"Connection closed before arguments received\");","261","                sendExit(2);","262","                return;","263","            }","264","            String commandName = args.get(0);","265","            CLICommand command = CLICommand.clone(commandName);","266","            if (command == null) {","267","                stderr.println(\"No such command \" + commandName);","268","                sendExit(2);","269","                return;","270","            }","271","            command.setTransportAuth(authentication);","272","            command.setClientCharset(encoding);","273","            CLICommand orig = CLICommand.setCurrent(command);","274","            try {","275","                runningThread = Thread.currentThread();","276","                int exit = command.main(args.subList(1, args.size()), locale, stdin, stdout, stderr);","277","                stdout.flush();","278","                sendExit(exit);","279","                try { \/\/ seems to avoid ReadPendingException from Jetty","280","                    Thread.sleep(1000);","281","                } catch (InterruptedException x) {","282","                    \/\/ expected; ignore","283","                }","284","            } finally {","285","                CLICommand.setCurrent(orig);","286","                runningThread = null;","287","            }","288","        }","289","    }","290","","305","                    try (ServerSideImpl connection = new ServerSideImpl(new PlainCLIProtocol.FramedOutput(download), Jenkins.getAuthentication())) {","306","                        new PlainCLIProtocol.FramedReader(connection, upload).start();","307","                        connection.run();"],"delete":["55","import java.util.concurrent.atomic.AtomicReference;","132","                    final AtomicReference<Thread> runningThread = new AtomicReference<>();","133","                    class ServerSideImpl extends PlainCLIProtocol.ServerSide {","134","                        boolean ready;","135","                        List<String> args = new ArrayList<>();","136","                        Locale locale = Locale.getDefault();","137","                        Charset encoding = Charset.defaultCharset();","138","                        final PipedInputStream stdin = new PipedInputStream();","139","                        final PipedOutputStream stdinMatch = new PipedOutputStream();","140","                        ServerSideImpl(InputStream is, OutputStream os) throws IOException {","141","                            super(is, os);","142","                            stdinMatch.connect(stdin);","143","                        }","144","                        @Override","145","                        protected void onArg(String text) {","146","                            args.add(text);","147","                        }","148","                        @Override","149","                        protected void onLocale(String text) {","150","                            for (Locale _locale : Locale.getAvailableLocales()) {","151","                                if (_locale.toString().equals(text)) {","152","                                    locale = _locale;","153","                                    return;","154","                                }","155","                            }","156","                            LOGGER.log(Level.WARNING, \"unknown client locale {0}\", text);","157","                        }","158","                        @Override","159","                        protected void onEncoding(String text) {","160","                            try {","161","                                encoding = Charset.forName(text);","162","                            } catch (UnsupportedCharsetException x) {","163","                                LOGGER.log(Level.WARNING, \"unknown client charset {0}\", text);","164","                            }","165","                        }","166","                        @Override","167","                        protected void onStart() {","168","                            ready();","169","                        }","170","                        @Override","171","                        protected void onStdin(byte[] chunk) throws IOException {","172","                            stdinMatch.write(chunk);","173","                        }","174","                        @Override","175","                        protected void onEndStdin() throws IOException {","176","                            stdinMatch.close();","177","                        }","178","                        @Override","179","                        protected void handleClose() {","180","                            ready();","181","                            Thread t = runningThread.get();","182","                            if (t != null) {","183","                                t.interrupt();","184","                            }","185","                        }","186","                        private synchronized void ready() {","187","                            ready = true;","188","                            notifyAll();","189","                        }","190","                    }","191","                    try (ServerSideImpl connection = new ServerSideImpl(upload, download)) {","192","                        connection.begin();","193","                        synchronized (connection) {","194","                            while (!connection.ready) {","195","                                connection.wait();","196","                            }","197","                        }","198","                        PrintStream stdout = new PrintStream(connection.streamStdout(), false, connection.encoding.name());","199","                        PrintStream stderr = new PrintStream(connection.streamStderr(), true, connection.encoding.name());","200","                        if (connection.args.isEmpty()) {","201","                            stderr.println(\"Connection closed before arguments received\");","202","                            connection.sendExit(2);","203","                            return;","204","                        }","205","                        String commandName = connection.args.get(0);","206","                        CLICommand command = CLICommand.clone(commandName);","207","                        if (command == null) {","208","                            stderr.println(\"No such command \" + commandName);","209","                            connection.sendExit(2);","210","                            return;","211","                        }","212","                        command.setTransportAuth(Jenkins.getAuthentication());","213","                        command.setClientCharset(connection.encoding);","214","                        CLICommand orig = CLICommand.setCurrent(command);","215","                        try {","216","                            runningThread.set(Thread.currentThread());","217","                            int exit = command.main(connection.args.subList(1, connection.args.size()), connection.locale, connection.stdin, stdout, stderr);","218","                            stdout.flush();","219","                            connection.sendExit(exit);","220","                            try { \/\/ seems to avoid ReadPendingException from Jetty","221","                                Thread.sleep(1000);","222","                            } catch (InterruptedException x) {","223","                                \/\/ expected; ignore","224","                            }","225","                        } finally {","226","                            CLICommand.setCurrent(orig);","227","                            runningThread.set(null);","228","                        }"]}],"test\/pom.xml":[{"add":["72","      <version>2.59<\/version>"],"delete":["72","      <version>2.58<\/version>"]}],"core\/src\/main\/java\/jenkins\/websocket\/WebSockets.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/CLICommand.java":[{"add":[],"delete":["246","            if (!(this instanceof HelpCommand || this instanceof WhoAmICommand))","247","                Jenkins.get().checkPermission(Jenkins.READ);"]}],"core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/help-webSocket.html":[{"add":[],"delete":[]}],"war\/pom.xml":[{"add":["101","      <version>5.6<\/version>"],"delete":["93","      <classifier>jar-with-dependencies<\/classifier>","95","      <scope>provided<\/scope>","103","      <version>5.4<\/version>","265","                  <groupId>${project.groupId}<\/groupId>","266","                  <artifactId>cli<\/artifactId>","267","                  <classifier>jar-with-dependencies<\/classifier>","268","                  <outputDirectory>${project.build.directory}\/${project.build.finalName}\/WEB-INF<\/outputDirectory>","269","                  <destFileName>jenkins-cli.jar<\/destFileName>","270","                <\/artifactItem>","271","                <artifactItem>"]}],"core\/src\/main\/resources\/hudson\/slaves\/JNLPLauncher\/main.jelly":[{"add":["27","    <j:when test=\"${!it.launcher.webSocket and app.slaveAgentPort == -1}\">"],"delete":["27","    <j:when test=\"${app.slaveAgentPort==-1}\">"]}]}},"97bb8af88a66f7ea9ab363d3e61dd55ced2f317a":{"changes":{"core\/src\/test\/java\/hudson\/UtilTest.java":"MODIFY"},"diff":{"core\/src\/test\/java\/hudson\/UtilTest.java":[{"add":[],"delete":["356","    @Ignore(\"Frequently flaky test\")"]}]}},"a77c21dd2c7cee6953a67fe7fae0552d0912c61c":{"changes":{"core\/src\/main\/java\/hudson\/cli\/handlers\/AbstractProjectOptionHandler.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/handlers\/AbstractProjectOptionHandler.java":[{"add":["52","        if (s==null) {","53","            AbstractProject nearest = AbstractProject.findNearest(src);","54","            if (nearest!=null)","55","                throw new CmdLineException(owner, \"No such job '\"+src+\"' perhaps you meant \"+ nearest +\"?\");","56","            else","57","                throw new CmdLineException(owner, \"No such job '\"+src+\"'\");","58","        }"],"delete":["52","        if (s==null)","53","            throw new CmdLineException(owner, \"No such job '\"+src+\"' perhaps you meant \"+ AbstractProject.findNearest(src)+\"?\");"]}],"changelog.html":[{"add":["64","    Fixed NPE in trying to diagnose undefined job error.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-7826\">issue 7826<\/a>)","66","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["2054","        if (relativeName==null) return null;"],"delete":[]}]}},"dcf22ca809671f19cfc2d1d10537b7bb5cf56e8d":{"changes":{"core\/src\/main\/java\/hudson\/util\/AbstractTaskListener.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/util\/AbstractTaskListener.java":[{"add":["15","","16","    private static final long serialVersionUID = 7217626701881006422L;","17",""],"delete":[]}]}},"1396fd5541597bc031736ce671257b7efa5eafee":{"changes":{"core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":[{"add":["244","    private transient LdapTemplate ldapTemplate;"],"delete":["244","    private LdapTemplate ldapTemplate;"]}]}},"d51466bc715d92b8b4f7228144ce7ba4534ecfe8":{"changes":{"core\/src\/main\/java\/hudson\/security\/csrf\/CrumbFilter.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Hudson.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/csrf\/CrumbFilter.java":[{"add":["7","import hudson.model.Hudson;","8","","31","    \/**","32","     * Because servlet containers generally don't specify the ordering of the initialization","33","     * (and different implementations indeed do this differently --- See HUDSON-3878),","34","     * we cannot use Hudson to the CrumbIssuer into CrumbFilter eagerly.","35","     *\/","37","        return Hudson.getInstance().getCrumbIssuer();","44","        CrumbIssuer crumbIssuer = getCrumbIssuer();","45","        if (crumbIssuer == null || !(request instanceof HttpServletRequest)) {"],"delete":["29","","30","    private volatile CrumbIssuer crumbIssuer;","31","","33","        return crumbIssuer;","36","    public void setCrumbIssuer(CrumbIssuer issuer) {","37","        crumbIssuer = issuer;","38","    }","39","","40","    \/**","41","     * Gets the {@link CrumbFilter} created for the given {@link ServletContext}.","42","     *\/","43","    public static CrumbFilter get(ServletContext context) {","44","        return (CrumbFilter) context.getAttribute(CrumbFilter.class.getName());","45","    }","46","","47","    \/**","48","     * {@inheritDoc}","49","     *\/","51","        \/\/ this is how we make us available to the rest of Hudson.","52","        filterConfig.getServletContext().setAttribute(CrumbFilter.class.getName(), this);","56","        if (crumbIssuer == null) {","57","            chain.doFilter(request, response);","58","            return;","59","        }","60","        if (!(request instanceof HttpServletRequest)) {"]}],"core\/src\/main\/java\/hudson\/model\/Hudson.java":[{"add":[],"delete":["2283","        CrumbFilter.get(servletContext).setCrumbIssuer(issuer);"]}]}},"9557da32a3550bd98acc9d04728547fcd98b8a15":{"changes":{"test\/src\/test\/java\/jenkins\/model\/NodesTest.java":"ADD","core\/src\/main\/java\/jenkins\/model\/Nodes.java":"MODIFY"},"diff":{"test\/src\/test\/java\/jenkins\/model\/NodesTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/jenkins\/model\/Nodes.java":[{"add":["129","        Node oldNode = nodes.get(node.getNodeName());","130","        if (node != oldNode) {","142","            try {","143","                persistNode(node);","144","            } catch (IOException | RuntimeException e) {","145","                \/\/ JENKINS-50599: If persisting the node throws an exception, we need to remove the node from","146","                \/\/ memory before propagating the exception.","147","                Queue.withLock(new Runnable() {","148","                    @Override","149","                    public void run() {","150","                        nodes.compute(node.getNodeName(), (ignoredNodeName, ignoredNode) -> oldNode);","151","                        jenkins.updateComputerList();","152","                        jenkins.trimLabels();","153","                    }","154","                });","155","                throw e;","156","            }"],"delete":["129","        if (node != nodes.get(node.getNodeName())) {","141","            persistNode(node);"]}]}},"740fef2978d491ac6e3ab752bc70871fdd56546f":{"changes":{"war\/src\/main\/js\/add-item.js":"MODIFY"},"diff":{"war\/src\/main\/js\/add-item.js":[{"add":[],"delete":["178","          activateValidationMessage('#itemname-required', '.add-item-name');"]}]}},"9657629d2e286f63cb3adf6b0083cb1491e11974":{"changes":{"core\/src\/main\/java\/jenkins\/util\/ResourceBundleUtil.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/util\/ResourceBundleUtil.java":[{"add":["41","@Restricted(NoExternalUse.class)"],"delete":["54","    @Restricted(NoExternalUse.class)","66","    @Restricted(NoExternalUse.class)"]}]}},"d5d6eb037b51a69f86cbf105fd3b78178ad83611":{"changes":{"core\/src\/main\/java\/hudson\/model\/Executor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Executor.java":[{"add":["357","                    if (executable == null) {","358","                        String displayName = task instanceof Queue.Task ? ((Queue.Task) task).getFullDisplayName() : task.getDisplayName();","359","                        LOGGER.log(WARNING, \"{0} cannot be run (for example because it is disabled)\", displayName);","360","                    }","393","                    return;"],"delete":["389","                    throw new Error(\"The null Executable has been created for \"+workUnit+\". The task cannot be executed\");"]}]}},"8a8c4c20eb41204cd0535cc365a59ec6bad824ae":{"changes":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ParametersDefinitionProperty.java":[{"add":["224","        public ParametersDefinitionProperty newInstance(StaplerRequest req, JSONObject formData) throws FormException {","225","            ParametersDefinitionProperty prop = (ParametersDefinitionProperty)super.newInstance(req, formData);","226","            if (prop != null && prop.parameterDefinitions.isEmpty()) {","227","                return null;","228","            }","229","            return prop;","230","        }","231","","232","        @Override"],"delete":[]}]}},"910b3dae95e0746ae8518eea07a7ae1fb6e7a819":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/test\/AbstractTestResultAction\/summary.jelly":"MODIFY","core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractItem.java":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/test\/AbstractTestResultAction\/summary.jelly":[{"add":["40","            <a href=\"${build.absoluteUrl}${build.testResultAction.urlName}\/${testObject.getRelativePathFrom(null)}\">"],"delete":["40","            <a href=\"${build.absoluteUrl}\/${build.testResultAction.urlName}\/${testObject.getRelativePathFrom(null)}\">"]}],"core\/src\/main\/java\/hudson\/Util.java":[{"add":["735","     * @deprecated This method is broken (see ISSUE#1666). It should probably","736","     * be removed but I'm not sure if it is considered part of the public API","737","     * that needs to be maintained for backwards compatibility.","738","     * Use {@link #encode(String)} instead. ","740","    @Deprecated"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractItem.java":[{"add":["152","        return Util.encode(request.getRootPath()+'\/'+getUrl());"],"delete":["152","        return Util.encodeRFC2396(request.getRootPath()+'\/'+getUrl());"]}]}},"b31bb1cc1c5a61a3e984e45e33cafa6130517938":{"changes":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":"MODIFY","war\/src\/main\/webapp\/css\/style.css":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/hudson-behavior.js":[{"add":["1683","        insertZeroWidthSpacesInElementText(displayName, 2);","1685","            insertZeroWidthSpacesInElementText(desc, 30);","1703","            insertZeroWidthSpacesInElementText(displayName, 20);","1873","            insertZeroWidthSpacesInElementText(displayNames[i], 2);","1877","            insertZeroWidthSpacesInElementText(descriptions[i], 30);","1970","var ELEMENT_NODE = 1;","1971","var TEXT_NODE = 3;","1972","function insertZeroWidthSpacesInText(textNode, maxWordSize) {","1973","    if (textNode.textContent.length < maxWordSize) {","1977","    \/\/ capture the original text","1978","    textNode.preZWSText = textNode.textContent;","1979","","1980","    var words = textNode.textContent.split(\/\\s+\/);","2001","    textNode.textContent = newTextContent;","2002","}","2003","function insertZeroWidthSpacesInElementText(element, maxWordSize) {","2004","    if (Element.hasClassName(element, 'zws-inserted')) {","2005","        \/\/ already done.","2006","        return;","2007","    }","2008","    if (!element.hasChildNodes()) {","2009","        return;","2010","    }","2011","","2012","    var children = element.childNodes;","2013","    for (var i = 0; i < children.length; i++) {","2014","        var child = children[i];","2015","        if (child.nodeType === TEXT_NODE) {","2016","            insertZeroWidthSpacesInText(child, maxWordSize);","2017","        } else if (child.nodeType === ELEMENT_NODE) {","2018","            insertZeroWidthSpacesInElementText(child, maxWordSize);","2019","        }","2020","    }","2021","","2026","        if (!Element.hasClassName(element, 'zws-inserted')) {","2027","            \/\/ Doesn't have ZWSed text.","2028","            return;","2029","        }","2030","        if (!element.hasChildNodes()) {","2031","            return;","2032","        }","2033","","2034","        var children = element.childNodes;","2035","        for (var i = 0; i < children.length; i++) {","2036","            var child = children[i];","2037","            if (child.nodeType === TEXT_NODE && child.preZWSText) {","2038","                child.textContent = child.preZWSText;","2039","            } else if (child.nodeType === ELEMENT_NODE) {","2040","                removeZeroWidthSpaces(child);","2041","            }","2042","        }","2043",""],"delete":["1683","        insertZeroWidthSpaces(displayName, 2);","1685","            insertZeroWidthSpaces(desc, 30);","1703","            insertZeroWidthSpaces(displayName, 20);","1873","            insertZeroWidthSpaces(displayNames[i], 2);","1877","            insertZeroWidthSpaces(descriptions[i], 30);","1970","function insertZeroWidthSpaces(element, maxWordSize) {","1971","    if (Element.hasClassName(element, 'zws-inserted')) {","1972","        \/\/ already done.","1976","    var words = element.textContent.split(\/\\s+\/);","1997","    element.textContent = newTextContent;","2002","        element.textContent = element.textContent.replace(zeroWidthSpace, '');"]}],"war\/src\/main\/webapp\/css\/style.css":[{"add":[],"delete":["958","  font-style: italic;"]}]}},"72a7529a119b2be6b3ff93d63688ee6973404236":{"changes":{"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/f\/config.xml":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/d\/config.xml":"ADD","test\/src\/test\/java\/hudson\/model\/QueueRestartTest.java":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/a\/config.xml":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/h\/config.xml":"ADD","test\/src\/test\/java\/hudson\/model\/QueueTest.java":"MODIFY","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/queue.xml":"ADD","core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/j\/config.xml":"ADD","test\/pom.xml":"MODIFY","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/e\/config.xml":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/g\/config.xml":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/b\/config.xml":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/config.xml":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/i\/config.xml":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/c\/config.xml":"ADD","test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/k\/config.xml":"ADD"},"diff":{"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/f\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/d\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/QueueRestartTest.java":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/a\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/h\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/QueueTest.java":[{"add":["48","import hudson.model.listeners.SaveableListener;","1021","","1022","    @Test @LocalData","1023","    public void load_queue_xml() {","1024","        Queue q = r.getInstance().getQueue();","1025","        Queue.Item[] items = q.getItems();","1026","        assertEquals(Arrays.asList(items).toString(), 11, items.length);","1027","        assertEquals(\"Loading the queue should not generate saves\", 0, QueueSaveSniffer.count);","1028","    }","1029","","1030","    @TestExtension(\"load_queue_xml\")","1031","    public static final class QueueSaveSniffer extends SaveableListener {","1032","        private static int count = 0;","1033","        @Override public void onChange(Saveable o, XmlFile file) {","1034","            if (o instanceof Queue) {","1035","                count++;","1036","            }","1037","        }","1038","    }"],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/queue.xml":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["26","import com.google.common.annotations.VisibleForTesting;","31","import hudson.Extension;","68","","69","import hudson.util.Futures;","71","import jenkins.util.SystemProperties;","108","import javax.annotation.concurrent.GuardedBy;","3016","","3017","    \/**","3018","     * Schedule <tt>Queue.save()<\/tt> call for near future once items change. Ignore all changes until the time the save","3019","     * takes place.","3020","     *","3021","     * Once queue is restored after a crash, items stages might not be accurate until the next #maintain() - this is not","3022","     * a problem as the items will be reshuffled first and then scheduled during the next maintainance cycle.","3023","     *","3024","     * Implementation note: Queue.load() calls QueueListener hooks for every item deserialized that can hammer the persistance","3025","     * on load. The problem is avoided by delaying the actual save for the time long enough for queue to load so the save","3026","     * operations will collapse into one. Also, items are persisted as buildable or blocked in vast majority of cases and","3027","     * those stages does not trigger the save here.","3028","     *\/","3029","    @Extension","3030","    @Restricted(NoExternalUse.class)","3031","    public static final class Saver extends QueueListener implements Runnable {","3032","","3033","        \/**","3034","         * All negative values will disable periodic saving.","3035","         *\/","3036","        @VisibleForTesting","3037","        \/*package*\/ static \/*final*\/ int DELAY_SECONDS = SystemProperties.getInteger(\"hudson.model.Queue.Saver.DELAY_SECONDS\", 60);","3038","","3039","        private final Object lock = new Object();","3040","        @GuardedBy(\"lock\")","3041","        private Future<?> nextSave;","3042","","3043","        @Override","3044","        public void onEnterWaiting(WaitingItem wi) {","3045","            push();","3046","        }","3047","","3048","        @Override","3049","        public void onLeft(Queue.LeftItem li) {","3050","            push();","3051","        }","3052","","3053","        private void push() {","3054","            if (DELAY_SECONDS < 0) return;","3055","","3056","            synchronized (lock) {","3057","                \/\/ Can be done or canceled in case of a bug or external intervention - do not allow it to hang there forever","3058","                if (nextSave != null && !(nextSave.isDone() || nextSave.isCancelled())) return;","3059","                nextSave = Timer.get().schedule(this, DELAY_SECONDS, TimeUnit.SECONDS);","3060","            }","3061","        }","3062","","3063","        @Override","3064","        public void run() {","3065","            try {","3066","                Jenkins j = Jenkins.getInstanceOrNull();","3067","                if (j != null) {","3068","                    j.getQueue().save();","3069","                }","3070","            } finally {","3071","                synchronized (lock) {","3072","                    nextSave = null;","3073","                }","3074","            }","3075","        }","3076","","3077","        @VisibleForTesting @Restricted(NoExternalUse.class)","3078","        \/*package*\/ @Nonnull Future<?> getNextSave() {","3079","            synchronized (lock) {","3080","                return nextSave == null","3081","                        ? Futures.precomputed(null)","3082","                        : nextSave","3083","                ;","3084","            }","3085","        }","3086","    }"],"delete":["95","import java.util.concurrent.TimeUnit;"]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/j\/config.xml":[{"add":[],"delete":[]}],"test\/pom.xml":[{"add":["55","      <version>2.33<\/version>"],"delete":["55","      <version>2.32<\/version>"]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/e\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/g\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/b\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/i\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/c\/config.xml":[{"add":[],"delete":[]}],"test\/src\/test\/resources\/hudson\/model\/QueueTest\/load_queue_xml\/jobs\/k\/config.xml":[{"add":[],"delete":[]}]}},"6475ff6c4f820824df21ebc121b3324e550abb93":{"changes":{"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/AdministrativeMonitorImpl\/message.properties":"ADD","core\/src\/main\/resources\/hudson\/model\/Hudson\/manage.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/AdministrativeMonitorImpl\/message.jelly":"ADD","core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":"MODIFY","core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/DescriptorImpl\/index.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/AdministrativeMonitorImpl\/message.properties":[{"add":[],"delete":[]}],"core\/src\/main\/resources\/hudson\/model\/Hudson\/manage.jelly":[{"add":["34","","35","    <!-- TODO: reimplement this as AdministrativeMonitor -->","47","","48","    <j:forEach var=\"am\" items=\"${app.administrativeMonitors}\">","49","      <j:if test=\"${am.isActivated()}\">","50","        <st:include page=\"message.jelly\" it=\"${am}\" \/>","51","      <\/j:if>","52","    <\/j:forEach>","53",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/AdministrativeMonitorImpl\/message.jelly":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/triggers\/SCMTrigger.java":[{"add":["10","import hudson.model.AdministrativeMonitor;","88","            DESCRIPTOR.clogCheck();","132","        \/*package*\/ final AdministrativeMonitorImpl monitor = new AdministrativeMonitorImpl();","133","","144","        @Override","145","        public void load() {","146","            super.load();","147","","148","            \/\/ install the monitor","149","            List<AdministrativeMonitor> monitorList = Hudson.getInstance().administrativeMonitors;","150","            if(!monitorList.contains(monitor))","151","                monitorList.add(monitor);","152","        }","153","","178","         * Checks if the queue is clogged, and if so,","179","         * activate {@link #monitor}.","180","         *\/","181","        public void clogCheck() {","182","            monitor.on = isClogged();","183","        }","184","","185","        \/**","265","    public static final class AdministrativeMonitorImpl extends AdministrativeMonitor {","266","        private boolean on;","267","","268","        AdministrativeMonitorImpl() {","269","            super(SCMTrigger.class.getName());","270","        }","271","","272","        public boolean isActivated() {","273","            return on;","274","        }","275","    }","276",""],"delete":[]}],"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/DescriptorImpl\/index.properties":[{"add":["0","clogged=There are more SCM polling activities scheduled than handled, so \\"],"delete":["0","clogged=There are more polling activities scheduled than handled, so \\"]}]}},"3896aabc0bee39fd94366f5b2dd6bc191c040e40":{"changes":{"test\/src\/test\/java\/hudson\/cli\/GroovyshCommandTest.java":"ADD","core\/src\/main\/java\/hudson\/cli\/GroovyshCommand.java":"MODIFY","core\/src\/main\/java\/hudson\/cli\/CLICommand.java":"MODIFY","test\/src\/main\/java\/hudson\/cli\/CLICommandInvoker.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"test\/src\/test\/java\/hudson\/cli\/GroovyshCommandTest.java":[{"add":[],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/GroovyshCommand.java":[{"add":["40","import java.util.ArrayList;","44","import org.kohsuke.args4j.Argument;","58","    @Argument(metaVar=\"ARGS\") public List<String> args = new ArrayList<String>();","59","","61","    protected int run() {"],"delete":["36","import java.util.Locale;","58","    public int main(List<String> args, Locale locale, InputStream stdin, PrintStream stdout, PrintStream stderr) {","61","        \/\/ TODO JENKINS-17929 this does not work","124","    protected int run() {","125","        throw new UnsupportedOperationException();","126","    }"]}],"core\/src\/main\/java\/hudson\/cli\/CLICommand.java":[{"add":["191","     * You would however then have to consider {@link CliAuthenticator} and {@link #getTransportAuthentication},","192","     * so this is not really recommended."],"delete":[]}],"test\/src\/main\/java\/hudson\/cli\/CLICommandInvoker.java":[{"add":["28","import hudson.security.ACL;","131","        \/\/ Otherwise it is SYSTEM, which would be relevant for a command overriding main:","132","        ACL.impersonate(Jenkins.ANONYMOUS);"],"delete":["34","import java.util.ArrayList;"]}],"changelog.html":[{"add":["64","      <code>groovysh<\/code> command did not work in authenticated Jenkins instances.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-17929\">issue 17929<\/a>)","66","  <li class=bug>"],"delete":[]}]}},"ee47034c9646d4c0dff31dd34727823165c22343":{"changes":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/model\/Jenkins.java":[{"add":["848","                workspaceDir = \"${JENKINS_HOME}\/workspace\/${ITEM_FULL_NAME}\";"],"delete":["848","                workspaceDir = \"${JENKINS_HOME}\/workspace\/${ITEM_FULLNAME}\";"]}]}},"9b0a0e71b8a6b92227e6af80ec7202aa0bf44b5b":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/RunTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["1556","        if (artifactManager != null) {","1557","            deleteArtifacts();","1558","        } \/\/ for StandardArtifactManager, deleting the whole build dir suffices","1559",""],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/RunTest.java":[{"add":["25","import hudson.FilePath;","26","import hudson.Launcher;","27","import hudson.tasks.ArtifactArchiver;","28","import java.io.IOException;","33","import java.util.Map;","34","import java.util.concurrent.atomic.AtomicBoolean;","35","import jenkins.model.ArtifactManager;","36","import jenkins.model.ArtifactManagerConfiguration;","37","import jenkins.model.ArtifactManagerFactory;","38","import jenkins.model.ArtifactManagerFactoryDescriptor;","39","import jenkins.model.Jenkins;","40","import jenkins.util.VirtualFile;","46","import org.jvnet.hudson.test.TestExtension;","47","import org.kohsuke.stapler.DataBoundConstructor;","86","    @Issue(\"JENKINS-51819\")","87","    @Test public void deleteArtifactsCustom() throws Exception {","88","        ArtifactManagerConfiguration.get().getArtifactManagerFactories().add(new Mgr.Factory());","89","        FreeStyleProject p = j.createFreeStyleProject();","90","        j.jenkins.getWorkspaceFor(p).child(\"f\").write(\"\", null);","91","        p.getPublishersList().add(new ArtifactArchiver(\"f\"));","92","        FreeStyleBuild b = j.buildAndAssertSuccess(p);","93","        b.delete();","94","        assertTrue(Mgr.deleted.get());","95","    }","96","    private static final class Mgr extends ArtifactManager {","97","        static final AtomicBoolean deleted = new AtomicBoolean();","98","        @Override public boolean delete() throws IOException, InterruptedException {","99","            return !deleted.getAndSet(true);","100","        }","101","        @Override public void onLoad(Run<?, ?> build) {}","102","        @Override public void archive(FilePath workspace, Launcher launcher, BuildListener listener, Map<String, String> artifacts) throws IOException, InterruptedException {}","103","        @Override public VirtualFile root() {","104","            return VirtualFile.forFile(Jenkins.get().getRootDir()); \/\/ irrelevant","105","        }","106","        public static final class Factory extends ArtifactManagerFactory {","107","            @DataBoundConstructor public Factory() {}","108","            @Override public ArtifactManager managerFor(Run<?, ?> build) {","109","                return new Mgr();","110","            }","111","            @TestExtension(\"deleteArtifactsCustom\") public static final class DescriptorImpl extends ArtifactManagerFactoryDescriptor {}","112","        }","113","    }","114",""],"delete":["35","\/**","36"," * @author Kohsuke Kawaguchi","37"," *\/"]}]}},"7209e99438e15b7844192c84821f915c98c08f58":{"changes":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/maven\/MavenModuleSetBuild.java":[{"add":["283","                    \/\/ figure out the root POM location.","284","                    \/\/ choice of module root ('ws' in this method) is somewhat arbitrary","285","                    \/\/ when multiple CVS\/SVN modules are checked out, so also check","286","                    \/\/ the path against the workspace root if that seems like what the user meant (see issue #1293)","287","                    FilePath pom = project.getModuleRoot().child(project.getRootPOM());","288","                    FilePath parentLoc = project.getWorkspace().child(project.getRootPOM());","289","                    if(!pom.exists() && parentLoc.exists())","290","                        pom = parentLoc;","291","","292","                    Map<String,String> envVars = getEnvVars();","614","            \/\/ choice of module root ('ws' in this method) is somewhat arbitrary","615","            \/\/ when multiple CVS\/SVN modules are checked out, so also check","616","            \/\/ the path against the workspace root if that seems like what the user meant (see issue #1293)","617","            File parentLoc = new File(ws.getParentFile(),rootPOM);","618","            if(!pom.exists() && parentLoc.exists())","619","                pom = parentLoc;","620",""],"delete":["282","                    FilePath pom = project.getModuleRoot().child(project.getRootPOM());","283","                    Map<String,String> envVars = getEnvVars();"]}]}},"d5651d171b83567d0d6dda899b789ca1de069385":{"changes":{"war\/src\/main\/webapp\/scripts\/sortable.js":"MODIFY"},"diff":{"war\/src\/main\/webapp\/scripts\/sortable.js":[{"add":["180","            if(dir === arrowTable.up) {\/\/ ascending"],"delete":["180","            if(dir === arrowTable.down) {\/\/ only need to reverse when it's descending"]}]}},"6ee24ace94753e117e0a2f6933e009c9d057ac8e":{"changes":{"core\/src\/main\/java\/hudson\/model\/Job.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/JobProperty.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Job.java":[{"add":["365","     * List of all {@link JobProperty} exposed primarily for the remoting API.","366","     * @since 1.282","367","     *\/","368","    @Exported(name=\"property\",inline=true)","369","    public List<JobProperty<? super JobT>> getAllProperties() {","370","        return properties.getView();","371","    }","372","","373","    \/**"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/JobProperty.java":[{"add":["34","import org.kohsuke.stapler.export.ExportedBean;","35","","66","@ExportedBean"],"delete":[]}]}},"3376cf01580ecd9cd099b5513874c8bed2490839":{"changes":{"core\/src\/main\/java\/hudson\/Util.java":"MODIFY","core\/src\/test\/java\/hudson\/UtilTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Util.java":[{"add":["114","     * Pattern for capturing variables. Either $xyz, ${xyz} or ${a.b} but not $a.b, while ignoring \"$$\"","116","    private static final Pattern VARIABLE = Pattern.compile(\"\\\\$([A-Za-z0-9_]+|\\\\{[A-Za-z0-9_.]+\\\\}|\\\\$)\");"],"delete":["114","     * Pattern for capturing variables. Either $xyz or ${xyz}, while ignoring \"$$\"","116","    private static final Pattern VARIABLE = Pattern.compile(\"\\\\$([A-Za-z0-9_]+|\\\\{[A-Za-z0-9_]+\\\\}|\\\\$)\");"]}],"core\/src\/test\/java\/hudson\/UtilTest.java":[{"add":["52","        m.put(\"A.B\",\"a-b\");","71","        ","72","        \/\/ dots","73","        assertEquals(\"a.B\", Util.replaceMacro(\"$A.B\", m));","74","        assertEquals(\"a-b\", Util.replaceMacro(\"${A.B}\", m));"],"delete":[]}]}},"ed0a5f101c9fc41c511d07222d1912fc00e40963":{"changes":{"core\/src\/main\/resources\/lib\/form\/radioBlock.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/lib\/form\/radioBlock.jelly":[{"add":["26","  <st:documentation>"],"delete":["26","  <st:documentation>on"]}]}},"67347c3c5f097da968bf8e6fe9fb57b03e358677":{"changes":{"core\/src\/main\/java\/jenkins\/util\/AntClassLoader.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/util\/AntClassLoader.java":[{"add":["1355","        Enumeration e = pathComponents.elements();","1356","        while (e.hasMoreElements()) {","1357","            File pathComponent = (File) e.nextElement();","1358","            try (final InputStream stream = getResourceStream(pathComponent, classFilename)) {","1359","                if (stream != null) {","1360","                    log(\"Loaded from \" + pathComponent + \" \"","1361","                        + classFilename, Project.MSG_DEBUG);","1362","                    return getClassFromStream(stream, name, pathComponent);","1364","            } catch (SecurityException se) {","1365","                throw se;","1366","            } catch (IOException ioe) {","1367","                \/\/ ioe.printStackTrace();","1368","                log(\"Exception reading component \" + pathComponent + \" (reason: \"","1369","                        + ioe.getMessage() + \")\", Project.MSG_VERBOSE);","1372","        throw new ClassNotFoundException(name);"],"delete":["1354","        InputStream stream = null;","1356","        try {","1357","            Enumeration e = pathComponents.elements();","1358","            while (e.hasMoreElements()) {","1359","                File pathComponent = (File) e.nextElement();","1360","                try {","1361","                    stream = getResourceStream(pathComponent, classFilename);","1362","                    if (stream != null) {","1363","                        log(\"Loaded from \" + pathComponent + \" \"","1364","                            + classFilename, Project.MSG_DEBUG);","1365","                        return getClassFromStream(stream, name, pathComponent);","1366","                    }","1367","                } catch (SecurityException se) {","1368","                    throw se;","1369","                } catch (IOException ioe) {","1370","                    \/\/ ioe.printStackTrace();","1371","                    log(\"Exception reading component \" + pathComponent + \" (reason: \"","1372","                            + ioe.getMessage() + \")\", Project.MSG_VERBOSE);","1375","            throw new ClassNotFoundException(name);","1376","        } finally {","1377","            FileUtils.close(stream);"]}]}},"c563b0c8e0c5446bdb5a2965abe230dffb7da48d":{"changes":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/ConnectionCheckJob\/row.jelly":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/ConnectionCheckJob\/row.jelly":[{"add":["32","          <li><j:out value=\"${s}\"\/><\/li>"],"delete":["32","          <li>${s}<\/li>"]}],"changelog.html":[{"add":["69","  <li class=bug>","70","    Fixed the double escaping problem in the update center error message","71","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10081\">issue 10081<\/a>)"],"delete":[]}]}},"58484bb80ca0d6bca745d9962c79b06c536f3266":{"changes":{"core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","core\/src\/test\/java\/hudson\/LauncherTest.java":"MODIFY","changelog.html":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["280","            this.envs = Util.mapToEnv(overrides);","281","            return this;","289","            if (overrides != null) {","290","                for (String override : overrides) {","291","                    if (override.indexOf('=') == -1) {","292","                        throw new IllegalArgumentException(override);","293","                    }","294","                }","295","            }","301","            return envs.clone();","717","                    for (String env : starter.envs) {","718","                        e.addLine(env);","719","                    }","721","                starter.envs = Util.mapToEnv(e);"],"delete":["53","import java.util.Map.Entry;","281","            return envs(Util.mapToEnv(overrides));","294","            return envs;","710","                    for (int i=0; i<starter.envs.length; i+=2)","711","                        e.put(starter.envs[i],starter.envs[i+1]);","713","","714","                String[] r = new String[e.size()*2];","715","                int idx=0;","716","                for (Entry<String, String> i : e.entrySet()) {","717","                    r[idx++] = i.getKey();","718","                    r[idx++] = i.getValue();","719","                }","720","","721","                starter.envs = r;"]}],"core\/src\/test\/java\/hudson\/LauncherTest.java":[{"add":["26","import hudson.model.StreamBuildListener;","27","import hudson.model.TaskListener;","31","import java.io.ByteArrayOutputStream;","80","","81","    @Bug(15733)","82","    public void testDecorateByEnv() throws Exception {","83","        ByteArrayOutputStream baos = new ByteArrayOutputStream();","84","        TaskListener l = new StreamBuildListener(baos);","85","        Launcher base = new Launcher.LocalLauncher(l);","86","        EnvVars env = new EnvVars(\"key1\", \"val1\");","87","        Launcher decorated = base.decorateByEnv(env);","88","        int res = decorated.launch().envs(\"key2=val2\").cmds(Functions.isWindows() ? new String[] {\"cmd\", \"\/q\", \"\/c\", \"echo %key1% %key2%\"} : new String[] {\"sh\", \"-c\", \"echo $key1 $key2\"}).stdout(l).join();","89","        String log = baos.toString();","90","        assertEquals(log, 0, res);","91","        assertTrue(log, log.contains(\"val1 val2\"));","92","    }","93",""],"delete":[]}],"changelog.html":[{"add":["57","  <li class=\"major bug\">","58","    <code>ArrayIndexOutOfBoundsException<\/code> or <code>StringIndexOutOfBoundsException<\/code> launching processes such as Mercurial polling. (Regression in 1.489.)","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-15733\">issue 15733<\/a>)"],"delete":[]}]}},"ee447af7e8e283ff50032532a571766f810ea061":{"changes":{"core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/editDescription.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/model\/AbstractModelObject\/editDescription.jelly":[{"add":["35","            <!-- JENKINS-37360: Since Jenkins has a description (system message), prevent that from showing here.","36","             Instead, use primary view's, as Jenkins's cannot be edited anyway (see Jenkins#submitDescription) -->","37","            <f:textarea name=\"description\" value=\"${it == app ? it.primaryView.description : it.description}\""],"delete":["35","            <f:textarea name=\"description\" value=\"${it.description}\""]}]}},"a41c87192d3262d02f8caf296ac66cf5f64cf28b":{"changes":{"remoting\/src\/main\/java\/hudson\/remoting\/ProxyInputStream.java":"MODIFY"},"diff":{"remoting\/src\/main\/java\/hudson\/remoting\/ProxyInputStream.java":[{"add":["57","            Buffer buf = _read(1);","72","    private synchronized Buffer _read(int len) throws IOException, InterruptedException {","73","        return new Chunk(oid, len).call(channel);","74","    }","75","","79","            Buffer buf = _read(len);"],"delete":["57","            Buffer buf = new Chunk(oid, 1).call(channel);","75","            Buffer buf = new Chunk(oid,len).call(channel);"]}]}},"34bf393255bb603bb3b0fb921a41fc3916d16f42":{"changes":{"core\/src\/main\/java\/hudson\/model\/View.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ViewTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/View.java":[{"add":["1055","","1056","        rsp.addHeader(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");","1057","        rsp.addHeader(\"Pragma\", \"no-cache\");","1058","        rsp.addHeader(\"Expires\", \"0\");"],"delete":[]}],"test\/src\/test\/java\/hudson\/model\/ViewTest.java":[{"add":["27","import com.gargoylesoftware.htmlunit.util.NameValuePair;","56","import java.util.HashMap;","58","import java.util.Map;","63","","64","import static org.hamcrest.CoreMatchers.is;","92","    @Issue(\"JENKINS-43848\")","93","    @Test public void testNoCacheHeadersAreSet() throws Exception {","94","        List<NameValuePair> responseHeaders = j.createWebClient()","95","                .goTo(\"view\/all\/itemCategories\", \"application\/json\")","96","                .getWebResponse()","97","                .getResponseHeaders();","98","","99","","100","        final Map<String, String> values = new HashMap<>();","101","","102","        for(NameValuePair p : responseHeaders) {","103","            values.put(p.getName(), p.getValue());","104","        }","105","","106","        String resp = values.get(\"Cache-Control\");","107","        assertThat(resp, is(\"no-cache, no-store, must-revalidate\"));","108","        assertThat(values.get(\"Expires\"), is(\"0\"));","109","        assertThat(values.get(\"Pragma\"), is(\"no-cache\"));","110","    }","111",""],"delete":[]}]}},"2ae37219fe635d1a93d1bb9a6ad5d79cc4072489":{"changes":{"core\/src\/main\/java\/jenkins\/triggers\/ReverseBuildTrigger.java":"MODIFY","test\/src\/test\/java\/jenkins\/triggers\/ReverseBuildTriggerTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/triggers\/ReverseBuildTrigger.java":[{"add":["78","import javax.annotation.CheckForNull;","94","    @CheckForNull","113","    \/**","114","     * Gets the upstream projects.","115","     * ","116","     * @return Upstream projects or empty(\"\") if upstream projects is null.","117","     *\/","119","        return Util.fixNull(upstreamProjects);","179","        for (AbstractProject upstream : Items.fromNameList(downstream.getParent(), getUpstreamProjects(), AbstractProject.class)) {","262","                            Items.fromNameList(downstream.getParent(), trigger.getUpstreamProjects(), Job.class);","320","                                        t.getUpstreamProjects(), p.getParent());"],"delete":["112","        return upstreamProjects;","172","        for (AbstractProject upstream : Items.fromNameList(downstream.getParent(), Util.fixNull(upstreamProjects), AbstractProject.class)) {","255","                            Items.fromNameList(downstream.getParent(), Util.fixNull(trigger.upstreamProjects), Job.class);","313","                                        Util.fixNull(t.upstreamProjects), p.getParent());"]}],"test\/src\/test\/java\/jenkins\/triggers\/ReverseBuildTriggerTest.java":[{"add":["226","","227","    @Issue(\"JENKINS-46161\")","228","    @Test","229","    public void testGetUpstreamProjectsShouldNullSafe() throws Exception {","230","        ReverseBuildTrigger trigger1 = new ReverseBuildTrigger(null);","231","        String upstream1 = trigger1.getUpstreamProjects();","232","        assertEquals(\"\", upstream1);","233","","234","        ReverseBuildTrigger trigger2 = new ReverseBuildTrigger(\"upstream\");","235","        String upstream2 = trigger2.getUpstreamProjects();","236","        assertEquals(\"upstream\", upstream2);","237","","238","        ReverseBuildTrigger trigger3 = new ReverseBuildTrigger(\"\");","239","        String upstream3 = trigger3.getUpstreamProjects();","240","        assertEquals(\"\", upstream3);","241","    }"],"delete":[]}]}},"0efdf8fb4f8c56f1f32fb390c472cb2e98e67f56":{"changes":{"core\/src\/main\/java\/hudson\/lifecycle\/WindowsServiceLifecycle.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/lifecycle\/WindowsServiceLifecycle.java":[{"add":["62","            File baseDir = getBaseDir();","69","                    File currentCopy = new File(baseDir,name);","75","                    File stage = new File(baseDir,name+\".new\");","109","        File baseDir = getBaseDir();","110","        File copyFiles = new File(baseDir,baseName+\".copies\");","146","    ","147","    private static final File getBaseDir() {","148","        File baseDir;","149","        ","150","        String baseEnv = System.getenv(\"BASE\");","151","        if (baseEnv != null) {","152","            baseDir = new File(baseEnv);","153","        } else {","154","            LOGGER.log(Level.WARNING, \"Could not find environment variable 'BASE' for Jenkins base directory. Falling back to JENKINS_HOME\");","155","            baseDir = Jenkins.getInstance().getRootDir();","156","        }","157","        return baseDir;","158","    }"],"delete":["62","            File rootDir = Jenkins.getInstance().getRootDir();","69","                    File currentCopy = new File(rootDir,name);","75","                    File stage = new File(rootDir,name+\".new\");","109","        File rootDir = Jenkins.getInstance().getRootDir();","110","        File copyFiles = new File(rootDir,baseName+\".copies\");"]}]}},"48e19c58f9e2caa998d0942417d58679f5ce47f0":{"changes":{"core\/src\/main\/java\/jenkins\/slaves\/restarter\/JnlpSlaveRestarterInstaller.java":"MODIFY"},"diff":{"core\/src\/main\/java\/jenkins\/slaves\/restarter\/JnlpSlaveRestarterInstaller.java":[{"add":["71","                        public void onReconnect() {"],"delete":["71","                        public void onDisconnect() {"]}]}},"9461a882d53ea13402d8059c00e9d7f7e1e1e3c8":{"changes":{"core\/src\/main\/java\/hudson\/model\/UserPropertyDescriptor.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UserPropertyDescriptor.java":[{"add":["20","","21","    \/**","22","     * Whether or not the described property is enabled in the current context.","23","     * Defaults to true.  Over-ride in sub-classes as required.","24","     *\/","25","    public boolean isEnabled() {","26","        return true;","27","    }"],"delete":[]}]}},"7c9ba7011cb905adc6d39321dc68b3a202daa3de":{"changes":{"core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["1440","                            LOGGER.log(Level.FINEST,","1441","                                    \"Interrupt thread for executor {0} is set and we do not know what work unit was on the executor.\",","1442","                                    e.getDisplayName());","1446","                            LOGGER.log(Level.FINEST, \"{0} is parking and is waiting for a job to execute.\", e.getDisplayName());","1478","                    String taskDisplayName = p.task.getFullDisplayName();","1479","                    LOGGER.log(Level.FINEST, \"Current blocked item: {0}\", taskDisplayName);","1481","                        LOGGER.log(Level.FINEST,","1482","                                \"BlockedItem {0}: blocked -> buildable as the build is not blocked and new tasks are allowed\",","1483","                                taskDisplayName);","1484","","1503","                if (top.timestamp.compareTo(new GregorianCalendar()) > 0) {","1504","                    LOGGER.log(Level.FINEST, \"Finished moving all ready items from queue.\");","1506","                }","1513","                    String topTaskDisplayName = top.task.getFullDisplayName();","1515","                        LOGGER.log(Level.FINEST, \"Executing runnable {0}\", topTaskDisplayName);","1518","                        LOGGER.log(Level.FINEST, \"Item {0} was unable to be made a buildable and is now a blocked item.\", topTaskDisplayName);","1548","                String taskDisplayName = p.task.getFullDisplayName();","1549","","1554","                        LOGGER.log(Level.FINEST, \"Executing flyweight task {0}\", taskDisplayName);","1561","                    for (JobOffer j : parked.values()) {","1562","                        if (j.canTake(p)) {","1563","                            LOGGER.log(Level.FINEST,","1564","                                    \"{0} is a potential candidate for task {1}\",","1565","                                    new Object[]{j.executor.getDisplayName(), taskDisplayName});","1567","                        }","1568","                    }","1583","                    LOGGER.log(Level.FINEST, \"Found a matching executor for {0}. Using it.\", taskDisplayName);","1588","                        LOGGER.log(Level.FINEST, \"BuildableItem {0} marked as pending.\", taskDisplayName);","1592","                        LOGGER.log(Level.FINEST, \"BuildableItem {0} with empty work units!?\", p);","1619","            String taskDisplayName = p.task.getFullDisplayName();","1623","                LOGGER.log(Level.FINEST, \"Converting flyweight task: {0} into a BuildableRunnable\", taskDisplayName);","1632","                LOGGER.log(Level.FINEST, \"Flyweight task {0} is entering as buildable to provision a node.\", taskDisplayName);","1636","            LOGGER.log(Level.FINEST, \"Task {0} is blocked by shutdown.\", taskDisplayName);","1678","","1679","                LOGGER.log(Level.FINEST, \"Creating flyweight task {0} for computer {1}\", new Object[]{p.task.getFullDisplayName(), c.getName()});"],"delete":["1493","                if (top.timestamp.compareTo(new GregorianCalendar()) > 0)","1543","                    for (JobOffer j : parked.values())","1544","                        if (j.canTake(p))","1567","                        LOGGER.log(Level.FINE, \"BuildableItem {0} with empty work units!?\", p);","1597",""]}]}},"f79f53ffbdff78c8bb4fefb51c6acbb3f266001b":{"changes":{"changelog.html":"MODIFY","war\/pom.xml":"MODIFY"},"diff":{"changelog.html":[{"add":["58","    Fixed the redirect handling in IPv6 literal address.","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-14452\">issue 14452<\/a>)","60","  <li class=bug>"],"delete":[]}],"war\/pom.xml":[{"add":["106","      <version>0.9.10-jenkins-39<\/version>"],"delete":["106","      <version>0.9.10-jenkins-38<\/version>"]}]}},"bec9eb784db1871992adec8da66e140f23c5e02f":{"changes":{"changelog.html":"MODIFY"},"diff":{"changelog.html":[{"add":["65","  <li class='major bug'>","66","    Permissions from LDAP groups weren't working properly since 1.416","67","    (<a href=\"http:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10075\">issue 10075<\/a>)"],"delete":[]}]}},"3485779ec28e7c5c51b9cda6307481b94758d5e0":{"changes":{"core\/src\/main\/java\/hudson\/cli\/CLICommand.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/cli\/CLICommand.java":[{"add":["270","            if (!(this instanceof LoginCommand || this instanceof LogoutCommand || this instanceof HelpCommand || this instanceof WhoAmICommand))"],"delete":["270","            if (!(this instanceof LoginCommand || this instanceof LogoutCommand || this instanceof HelpCommand))"]}]}},"72e0b9c53a15306e0a7b7117100f4d1b7ec250b8":{"changes":{"core\/pom.xml":"MODIFY","changelog.html":"MODIFY","pom.xml":"MODIFY"},"diff":{"core\/pom.xml":[{"add":["192","      <version>2.0.31<\/version>"],"delete":["192","      <version>2.0.23<\/version>"]}],"changelog.html":[{"add":["57","  <li class=bug>","58","    Jenkins CLI doesn't handle arguments with equal signs","59","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-21160\">issue 21160<\/a>)","60","  <li class=bug>","61","    master\/slave communication ping reacts badly if a clock jumps.","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-21251\">issue 21251<\/a>)","63","  <li class=rfe>","64","    JNLP slaves can now connect to master through HTTP proxy.","65","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-6167\">issue 21251<\/a>)"],"delete":["57","  <li class=>"]}],"pom.xml":[{"add":["178","        <version>2.50<\/version>"],"delete":["178","        <version>2.49<\/version>"]}]}},"b37588920dcb790863587342bc598c5dea096b02":{"changes":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":"MODIFY","changelog.html":"MODIFY","core\/src\/main\/java\/hudson\/cli\/InstallPluginCommand.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/UpdateCenter.java":[{"add":["731","        \/**","732","         * If this job fails, set to the error.","733","         *\/","734","        protected Throwable error;","735","","758","","759","        public Throwable getError() {","760","            return error;","761","        }","800","            } catch (RestartNotSupportedException exception) {","803","                error = exception;","864","                error = e;","867","                error = e;","939","                error = e;","1127","                error = e;","1223","                error = e;"],"delete":["791","            }","792","            catch (RestartNotSupportedException exception) {"]}],"changelog.html":[{"add":["61","    Failing to install a plugin from CLI should result in non-zero exit code","62","    (<a href=\"https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-10057\">issue 10057<\/a>)","63","  <li class=bug>"],"delete":[]}],"core\/src\/main\/java\/hudson\/cli\/InstallPluginCommand.java":[{"add":["27","import hudson.util.IOException2;","103","                Throwable e = p.deploy().get().getError();","104","                if (e!=null)","105","                    throw new IOException2(\"Failed to install plugin \"+source,e);"],"delete":["102","                p.deploy().get();"]}]}},"f258aff7a736a81306ecb7d3c56cacc9b3a09a68":{"changes":{"core\/src\/main\/java\/hudson\/model\/WorkspaceCleanupThread.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/WorkspaceCleanupThread.java":[{"add":["141","        \/\/ TODO this may only check the last build in fact:","142","        if (item instanceof Job<?,?>) {","143","            Job<?,?> j = (Job<?,?>) item;","144","            if (j.isBuilding()) {","145","                LOGGER.log(Level.FINE, \"Job {0} is building, so not deleting\", item.getFullDisplayName());","146","                return false;","147","            }","148","        }","149",""],"delete":[]}]}},"5880ed830201f9349ae9def6653c19a186e1eb18":{"changes":{"core\/src\/main\/java\/hudson\/model\/Queue.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Queue.java":[{"add":["1337","            ","1338","            \/\/ Ensure that identification of blocked tasks is using the live state: JENKINS-27708 & JENKINS-27871","1339","            updateSnapshot();","1340","            ","1377","                                ","1378","                \/\/ Ensure that identification of blocked tasks is using the live state: JENKINS-27708 & JENKINS-27871","1379","                \/\/ The creation of a snapshot itself should be relatively cheap given the expected rate of","1380","                \/\/ job execution. You probably would need 100's of jobs starting execution every iteration","1381","                \/\/ of maintain() before this could even start to become an issue and likely the calculation","1382","                \/\/ of isBuildBlocked(p) will become a bottleneck before updateSnapshot() will. Additionally","1383","                \/\/ since the snapshot itself only ever has at most one reference originating outside of the stack","1384","                \/\/ it should remain in the eden space and thus be cheap to GC.","1385","                \/\/ See https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-27708?focusedCommentId=225819&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-225819","1386","                \/\/ or https:\/\/issues.jenkins-ci.org\/browse\/JENKINS-27708?focusedCommentId=225906&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-225906","1387","                \/\/ for alternative fixes of this issue.","1388","                updateSnapshot();"],"delete":["1337",""]}]}},"fddffb4fbceb50e0c8801044319e84dc6f9b7e90":{"changes":{"core\/src\/main\/java\/hudson\/model\/ListView.java":"MODIFY","test\/src\/test\/java\/hudson\/model\/ListViewTest.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/ListView.java":[{"add":["47","import javax.annotation.CheckForNull;","381","        if (item==null)","382","            throw new Failure(\"Query parameter 'name' does not correspond to a known and readable item\");","383","","390","    private @CheckForNull TopLevelItem resolveName(String name) {"],"delete":["386","    private TopLevelItem resolveName(String name) {"]}],"test\/src\/test\/java\/hudson\/model\/ListViewTest.java":[{"add":["261","    @Issue(\"JENKINS-23411\")","262","    @Test public void doRemoveJobFromViewNullItem() throws Exception {","263","        MockFolder folder = j.createFolder(\"folder\");","264","        ListView view = new ListView(\"view\", folder);","265","        folder.addView(view);","266","        FreeStyleProject job = folder.createProject(FreeStyleProject.class, \"job1\");","267","        view.add(job);","268","        ","269","        List<TopLevelItem> items = view.getItems();","270","        assertEquals(1, items.size());","271","        assertEquals(\"job1\", items.get(0).getName());","272","","273","        \/\/ remove a contained job","274","        view.doRemoveJobFromView(\"job1\");","275","        List<TopLevelItem> itemsNow = view.getItems();","276","        assertEquals(0, itemsNow.size());","277","        ","278","        \/\/ remove a not contained job","279","        try {","280","            view.doRemoveJobFromView(\"job2\");","281","            fail(\"Remove job2\");","282","        } catch(Failure e) {","283","            assertEquals(e.getMessage(), \"Query parameter 'name' does not correspond to a known item\");","284","        }","285","    }","286",""],"delete":[]}]}},"ccb3e4cd501b14f617979117ea31fc21f07b972b":{"changes":{"core\/src\/main\/java\/hudson\/ProxyConfiguration.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/ProxyConfiguration.java":[{"add":["398","                return new NTCredentials(user, Secret.fromString(password).getPlainText(), \"\", domain);"],"delete":["398","                return new NTCredentials(user, Secret.fromString(password).getPlainText(), domain, \"\");"]}]}},"1d49816d1d6d385c12c56a1bbc57481954bffb13":{"changes":{"debian\/hudson.init":"MODIFY"},"diff":{"debian\/hudson.init":[{"add":["67","    $SU $HUDSON_USER --shell=\/bin\/bash -c \"$DAEMON $DAEMON_ARGS -- $JAVA $JAVA_ARGS -jar $HUDSON_WAR $HUDSON_ARGS\" || return 2"],"delete":["67","    $SU $HUDSON_USER -c \"$DAEMON $DAEMON_ARGS -- $JAVA $JAVA_ARGS -jar $HUDSON_WAR $HUDSON_ARGS\" || return 2"]}]}},"a7ec87c007817c15528a58ac3b35de979adef895":{"changes":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/AbstractProject.java":[{"add":["268","        final Jenkins j = Jenkins.getInstance();","269","        final List<Node> nodes = j != null ? j.getNodes() : null;","270","        if(nodes!=null && !nodes.isEmpty()) {"],"delete":["268","        if(Jenkins.getInstance()!=null && !Jenkins.getInstance().getNodes().isEmpty()) {"]}]}},"20bd4e304976dc64fa6abc165823425ba524ccb2":{"changes":{"core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["41","import hudson.console.*;","2088","        PlainTextConsoleOutputStream out = new PlainTextConsoleOutputStream(rsp.getCompressedOutputStream(req));","2089","        InputStream input = getLogInputStream();","2090","        try {","2091","            IOUtils.copy(input, out);","2092","            out.flush();","2093","        } finally {","2094","            IOUtils.closeQuietly(input);"],"delete":["41","import hudson.console.AnnotatedLargeText;","42","import hudson.console.ConsoleLogFilter;","43","import hudson.console.ConsoleNote;","44","import hudson.console.ModelHyperlinkNote;","2091","        \/\/ Prevent jelly from flushing stream so Content-Length header can be added afterwards","2092","        FlushProofOutputStream out = new FlushProofOutputStream(rsp.getCompressedOutputStream(req));","2093","        try{","2094","        \tgetLogText().writeLogTo(0,out);","2095","        } catch (IOException e) {","2096","\t\t\t\/\/ see comment in writeLogTo() method","2097","\t\t\tInputStream input = getLogInputStream();","2098","\t\t\ttry {","2099","\t\t\t\tIOUtils.copy(input, out);","2100","\t\t\t} finally {","2101","\t\t\t\tIOUtils.closeQuietly(input);","2102","\t\t\t}","2103","\t\t} finally {"]}]}},"6c2c917d91e33ffa63429848c5f6a75ea4bd773c":{"changes":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":"MODIFY","war\/resources\/WEB-INF\/security\/LDAPBindSecurityRealm.groovy":"MODIFY","war\/resources\/help\/security\/global-matrix.html":"MODIFY","core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":"MODIFY","core\/src\/main\/java\/hudson\/security\/SecurityRealm.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/security\/GlobalMatrixAuthorizationStrategy.java":[{"add":["287","                \/\/ system reserved group","314","            \/\/ couldn't find it. it doesn't exist"],"delete":["287","                \/\/ systerm reserved group","314","            \/\/ couldn't find it. it doesn't exit"]}],"war\/resources\/WEB-INF\/security\/LDAPBindSecurityRealm.groovy":[{"add":["67","    \/\/ rolePrefix = \"ROLE_\"; \/\/ Default is \"ROLE_\"","68","    \/\/ convertToUpperCase = false; \/\/ Default is true"],"delete":[]}],"war\/resources\/help\/security\/global-matrix.html":[{"add":["18","","19","  <p>","20","  Note that adding permissions for LDAP groups requires a specific syntax.  In the","21","  default configuration all LDAP groups must be entered here in all capital letters","22","  and with \"ROLE_\" added on the front.  For example, a group called \"devs\" would be","23","  entered here as \"ROLE_DEVS\".  The prefix and case settings may be adjusted by","24","  editing the <tt>WEB-INF\/security\/LDAPBindSecurityRealm.groovy<\/tt> file in your","25","  Hudson deployment and restarting Hudson.","26","<\/div>"],"delete":["18","<\/div>"]}],"core\/src\/main\/java\/hudson\/security\/LDAPSecurityRealm.java":[{"add":["342","            new LDAPUserDetailsService(appContext));","345","    \/**","346","     * Lookup a group; given input must match the configured syntax for group names","347","     * in WEB-INF\/security\/LDAPBindSecurityRealm.groovy's authoritiesPopulator entry.","348","     * The defaults are a prefix of \"ROLE_\" and using all uppercase.  This method will","349","     * not return any data if the given name lacks the proper prefix and\/or case. ","350","     *\/","353","        \/\/ Check proper syntax based on acegi configuration","354","        String prefix = \"\";","355","        boolean onlyUpperCase = false;","356","        try {","357","            AuthoritiesPopulatorImpl api = (AuthoritiesPopulatorImpl)","358","              ((LDAPUserDetailsService)getSecurityComponents().userDetails).authoritiesPopulator;","359","            prefix = api.rolePrefix;","360","            onlyUpperCase = api.convertToUpperCase;","361","        } catch (Exception ignore) { }","362","        if (onlyUpperCase && !groupname.equals(groupname.toUpperCase()))","363","            throw new UsernameNotFoundException(groupname + \" should be all uppercase\");","364","        if (!groupname.startsWith(prefix))","365","            throw new UsernameNotFoundException(groupname + \" is missing prefix: \" + prefix);","366","        groupname = groupname.substring(prefix.length());","367","","383","    public static class LDAPUserDetailsService implements UserDetailsService {","384","        public final LdapUserSearch ldapSearch;","385","        public final LdapAuthoritiesPopulator authoritiesPopulator;","386","        LDAPUserDetailsService(WebApplicationContext appContext) {","387","            ldapSearch = findBean(LdapUserSearch.class, appContext);","388","            authoritiesPopulator = findBean(LdapAuthoritiesPopulator.class, appContext);","389","        }","390","        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {","391","            try {","392","                LdapUserDetails ldapUser = ldapSearch.searchForUser(username);","393","                \/\/ LdapUserSearch does not populate granted authorities (group search).","394","                \/\/ Add those, as done in LdapAuthenticationProvider.createUserDetails().","395","                if (ldapUser != null) {","396","                    LdapUserDetailsImpl.Essence user = new LdapUserDetailsImpl.Essence(ldapUser);","397","                    GrantedAuthority[] extraAuthorities = authoritiesPopulator.getGrantedAuthorities(ldapUser);","398","                    for (int i = 0; i < extraAuthorities.length; i++) {","399","                        user.addAuthority(extraAuthorities[i]);","400","                    }","401","                    ldapUser = user.createUserDetails();","402","                }","403","                return ldapUser;","404","            } catch (LdapDataAccessException e) {","405","                LOGGER.log(Level.WARNING, \"Failed to search LDAP for username=\"+username,e);","406","                throw new UserMayOrMayNotExistException(e.getMessage(),e);","407","            }","408","        }","409","    }","410","","443","        \/\/ Make these available (private in parent class and no get methods!)","444","        String rolePrefix;","445","        boolean convertToUpperCase;","448","            \/\/ These match the defaults in acegi 1.0.5; set again to store in non-private fields:","449","            setRolePrefix(\"ROLE_\");","450","            setConvertToUpperCase(true);","457","","458","        @Override","459","        public void setRolePrefix(String rolePrefix) {","460","            super.setRolePrefix(rolePrefix);","461","            this.rolePrefix = rolePrefix;","462","        }","463","","464","        @Override","465","        public void setConvertToUpperCase(boolean convertToUpperCase) {","466","            super.setConvertToUpperCase(convertToUpperCase);","467","            this.convertToUpperCase = convertToUpperCase;","468","        }"],"delete":["342","            new UserDetailsService() {","343","                final LdapUserSearch ldapSearch = findBean(LdapUserSearch.class, appContext);","344","                final LdapAuthoritiesPopulator authoritiesPopulator = findBean(LdapAuthoritiesPopulator.class, appContext);","345","                public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {","346","                    try {","347","                        LdapUserDetails ldapUser = ldapSearch.searchForUser(username);","348","                        \/\/ LdapUserSearch does not populate granted authorities (group search).","349","                        \/\/ Add those, as done in LdapAuthenticationProvider.createUserDetails().","350","                        if (ldapUser != null) {","351","                            LdapUserDetailsImpl.Essence user = new LdapUserDetailsImpl.Essence(ldapUser);","352","                            GrantedAuthority[] extraAuthorities = authoritiesPopulator.getGrantedAuthorities(ldapUser);","353","                            for (int i = 0; i < extraAuthorities.length; i++) {","354","                                user.addAuthority(extraAuthorities[i]);","355","                            }","356","                            ldapUser = user.createUserDetails();","357","                        }","358","                        return ldapUser;","359","                    } catch (LdapDataAccessException e) {","360","                        LOGGER.log(Level.WARNING, \"Failed to search LDAP for username=\"+username,e);","361","                        throw new UserMayOrMayNotExistException(e.getMessage(),e);","362","                    }","363","                }","364","            });"]}],"core\/src\/main\/java\/hudson\/security\/SecurityRealm.java":[{"add":["488","     * anyone non-anonymous."],"delete":["488","     * anyone non-anomyous."]}]}},"a5ac77ebb6c935f589d297df5aeb090d8fdcee72":{"changes":{"core\/src\/main\/java\/hudson\/tasks\/Ant.java":"MODIFY","core\/src\/main\/java\/hudson\/tasks\/BuildWrapper.java":"MODIFY","core\/src\/main\/java\/hudson\/Proc.java":"MODIFY","core\/src\/main\/java\/hudson\/Launcher.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/Run.java":"MODIFY","core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":"MODIFY","core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/tasks\/Ant.java":[{"add":["70","    public boolean perform(Build build, Launcher launcher, BuildListener listener) throws InterruptedException {"],"delete":["70","    public boolean perform(Build build, Launcher launcher, BuildListener listener) {"]}],"core\/src\/main\/java\/hudson\/tasks\/BuildWrapper.java":[{"add":["81","        public abstract boolean tearDown( Build build, BuildListener listener ) throws IOException, InterruptedException;","103","    public abstract Environment setUp( Build build, Launcher launcher, BuildListener listener ) throws IOException, InterruptedException;"],"delete":["81","        public abstract boolean tearDown( Build build, BuildListener listener ) throws IOException;","103","    public abstract Environment setUp( Build build, Launcher launcher, BuildListener listener ) throws IOException;"]}],"core\/src\/main\/java\/hudson\/Proc.java":[{"add":["34","    public abstract void kill() throws IOException, InterruptedException;","48","    public abstract int join() throws IOException, InterruptedException;","98","        public int join() throws InterruptedException {","106","                throw e;","111","        public void kill() throws InterruptedException {","162","        public void kill() throws IOException, InterruptedException {","168","        public int join() throws IOException, InterruptedException {","174","                throw e;"],"delete":["34","    public abstract void kill() throws IOException;","48","    public abstract int join() throws IOException;","98","        public int join() {","106","                return -1;","111","        public void kill() {","162","        public void kill() throws IOException {","168","        public int join() throws IOException {","174","                return -1;"]}],"core\/src\/main\/java\/hudson\/Launcher.java":[{"add":["252","            try {","253","                return p.join();","254","            } catch (InterruptedException e) {","255","                return -1;","256","            }"],"delete":["252","            return p.join();"]}],"core\/src\/main\/java\/hudson\/model\/Run.java":[{"add":["38","import java.util.logging.Level;","566","                } catch( InterruptedException e) {","567","                    \/\/ aborted","568","                    result = Result.ABORTED;","569","                    listener.getLogger().println(\"Build was aborted\");","570","                    LOGGER.log(Level.INFO,toString()+\" aborted\",e);"],"delete":[]}],"core\/src\/main\/java\/hudson\/model\/AbstractBuild.java":[{"add":["136","        private void createLastSuccessfulLink(BuildListener listener) throws InterruptedException {"],"delete":["136","        private void createLastSuccessfulLink(BuildListener listener) {"]}],"core\/src\/main\/java\/hudson\/scm\/CVSSCM.java":[{"add":["744","    protected final boolean run(Launcher launcher, ArgumentListBuilder cmd, TaskListener listener, FilePath dir, OutputStream out) throws IOException, InterruptedException {","754","    protected final boolean run(Launcher launcher, ArgumentListBuilder cmd, TaskListener listener, FilePath dir) throws IOException, InterruptedException {","914","        public void doVersion(StaplerRequest req, StaplerResponse rsp) throws IOException, ServletException, InterruptedException {","1039","        public void doPostPassword(StaplerRequest req, StaplerResponse rsp) throws IOException, InterruptedException {"],"delete":["744","    protected final boolean run(Launcher launcher, ArgumentListBuilder cmd, TaskListener listener, FilePath dir, OutputStream out) throws IOException {","754","    protected final boolean run(Launcher launcher, ArgumentListBuilder cmd, TaskListener listener, FilePath dir) throws IOException {","914","        public void doVersion(StaplerRequest req, StaplerResponse rsp) throws IOException, ServletException {","1039","        public void doPostPassword(StaplerRequest req, StaplerResponse rsp) throws IOException {"]}]}},"0268b988d5c88cd29be12ed25e95d5bc448c2840":{"changes":{"core\/src\/main\/java\/hudson\/widgets\/HistoryWidget.java":"MODIFY","core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/index.jelly":"MODIFY","core\/src\/main\/java\/hudson\/widgets\/BuildHistoryWidget.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/widgets\/HistoryWidget.java":[{"add":["116","    \/**","117","     * Calculates the first transient build record. Everything >= this will be discarded when AJAX call is made.","118","     *","119","     * @param historyPageFilter","120","     *      The history page filter containing the list of builds.","121","     * @return","122","     *      The history page filter that was passed in.","123","     *\/","124","    @SuppressWarnings(\"unchecked\")","125","    protected HistoryPageFilter updateFirstTransientBuildKey(HistoryPageFilter historyPageFilter) {","126","        updateFirstTransientBuildKey(historyPageFilter.runs);","127","        return historyPageFilter;","128","    }","129","","182","        return updateFirstTransientBuildKey(historyPageFilter);"],"delete":["168","        return historyPageFilter;","240","        updateFirstTransientBuildKey(page.runs);"]}],"core\/src\/main\/resources\/hudson\/widgets\/HistoryWidget\/index.jelly":[{"add":["121","    updateBuildHistory(\"${it.baseUrl}\/buildHistory\/ajax\", ${it.nextBuildNumberToFetch ?: it.owner.nextBuildNumber});"],"delete":["121","      updateBuildHistory(\"${it.baseUrl}\/buildHistory\/ajax\",${it.owner.nextBuildNumber});"]}],"core\/src\/main\/java\/hudson\/widgets\/BuildHistoryWidget.java":[{"add":["79","        return updateFirstTransientBuildKey(historyPageFilter);"],"delete":["79","        return historyPageFilter;"]}]}},"e52cd313b576721398e9c231c8d06c0ececc3d2e":{"changes":{"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/index_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/security\/LegacyAuthorizationStrategy\/help_tr.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/usage_tr.html":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/clock_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/security\/GlobalSecurityConfiguration\/config_tr.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/projectRelationship-help_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/security\/LegacySecurityRealm\/help_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/triggers\/TimerTrigger\/help_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/util\/DoubleLaunchChecker\/index_tr.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/management\/Messages_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/security\/FullControlOnceLoggedInAuthorizationStrategy\/help_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/util\/IncompatibleAntVersionDetected\/index_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Fingerprint\/index_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/ComputerSet\/sidepanel_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/installed_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/PluginManager\/sidepanel_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/security\/GlobalSecurityConfiguration\/help-useSecurity_tr.html":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/GlobalQuietPeriodConfiguration\/help-quietPeriod_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/help_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/FingerprintAction\/index_tr.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/Jenkins\/manage_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AllView\/noJob_tr.properties":"MODIFY","core\/src\/main\/resources\/jenkins\/model\/BuildDiscarderProperty\/help_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/body_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractItem\/noWorkspace_tr.properties":"MODIFY","war\/src\/main\/webapp\/help\/system-config\/master-slave\/numExecutors_tr.html":"MODIFY","core\/src\/main\/resources\/hudson\/model\/Messages_tr.properties":"MODIFY","core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/sidepanel_tr.properties":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/security\/HudsonPrivateSecurityRealm\/index_tr.properties":[{"add":["23","Bu kullan\\u0131c\\u0131vlar Jenkins''de oturum a\\u00e7abilir. Bu liste, <a href=\"..\/asynchPeople\">buradakinin<\/a> bir \\u00fcst k\\u00fcmesidir,"],"delete":["23","Bu kullan\\u0131c\\u0131vlar Jenkins'da oturum a\\u00e7abilir. Bu liste, <a href=\"..\/asynchPeople\">buradakinin<\/a> bir \\u00fcst k\\u00fcmesidir,"]}],"core\/src\/main\/resources\/hudson\/security\/LegacyAuthorizationStrategy\/help_tr.html":[{"add":["1","  Jenkins'in 1.164 s&#252;r&#252;m&#252;nden &#246;nceki g&#252;venlik davran&#305;&#351;&#305;d&#305;r. Yani, kullan&#305;c&#305; \"admin\""],"delete":["1","  Jenkins'&#305;n 1.164 s&#252;r&#252;m&#252;nden &#246;nceki g&#252;venlik davran&#305;&#351;&#305;d&#305;r. Yani, kullan&#305;c&#305; \"admin\""]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/usage_tr.html":[{"add":["1","  Bu makine &#252;zerinde, Jenkins'in yap&#305;land&#305;rmalar&#305; nas&#305;l planlayaca&#287;&#305;n&#305; kontrol eder."],"delete":["1","  Bu makine &#252;zerinde, Jenkins'&#305;n yap&#305;land&#305;rmalar&#305; nas&#305;l planlayaca&#287;&#305;n&#305; kontrol eder."]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/clock_tr.html":[{"add":["2","   Bu nedenle, e&#287;er Jenkins'in &#231;al&#305;&#351;t&#305;&#287;&#305; ana sunucunun saati ile slave'in"],"delete":["2","   Bu nedenle, e&#287;er Jenkins'&#305;n &#231;al&#305;&#351;t&#305;&#287;&#305; ana sunucunun saati ile slave'in"]}],"core\/src\/main\/resources\/hudson\/security\/GlobalSecurityConfiguration\/config_tr.properties":[{"add":["23","  Bu master Jenkins'e kaydolmu\\u015f slave nodlar\\u0131n listesidir. B\\u00fcy\\u00fck i\\u015flerin idare edilebilmesi i\\u00e7in i\\u015fler\\"],"delete":["23","  Bu master Jenkins'a kaydolmu\\u015f slave nodlar\\u0131n listesidir. B\\u00fcy\\u00fck i\\u015flerin idare edilebilmesi i\\u00e7in i\\u015fler\\"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/projectRelationship-help_tr.properties":[{"add":["30","This\\ allows\\ Jenkins\\ to\\ correlate\\ two\\ projects.=Bu, Jenkins\\'e iki projeyi kar\\u015f\\u0131l\\u0131kl\\u0131 ili\\u015fkilendirme yetene\\u011fini verir."],"delete":["30","This\\ allows\\ Jenkins\\ to\\ correlate\\ two\\ projects.=Bu, Jenkins\\'a iki projeyi kar\\u015f\\u0131l\\u0131kl\\u0131 ili\\u015fkilendirme yetene\\u011fini verir."]}],"core\/src\/main\/resources\/hudson\/security\/LegacySecurityRealm\/help_tr.html":[{"add":["6","      Jenkins'i 1.164'ten &#246;nceki bir versiyonundan beri kullan&#305;yor ve davran&#305;&#351; &#351;eklini de&#287;i&#351;tirmek istemiyorsan&#305;z.","9","      Container'&#305;n&#305;z&#305; do&#287;ru g&#252;venlik ayarlar&#305; ile konfig&#252;re ettiyseniz ve Jenkins'in de buna uymas&#305;n&#305; istiyorsan&#305;z."],"delete":["6","      Jenkins'&#305; 1.164'ten &#246;nceki bir versiyonundan beri kullan&#305;yor ve davran&#305;&#351; &#351;eklini de&#287;i&#351;tirmek istemiyorsan&#305;z.","9","      Container'&#305;n&#305;z&#305; do&#287;ru g&#252;venlik ayarlar&#305; ile konfig&#252;re ettiyseniz ve Jenkins'&#305;n&#305;n da buna uymas&#305;n&#305; istiyorsan&#305;z."]}],"core\/src\/main\/resources\/hudson\/triggers\/TimerTrigger\/help_tr.html":[{"add":["5","  Jenkins'i cron'un alternatifi olarak kullanmak i&#231;in tasarlanm&#305;&#351;t&#305;r ve kesinlikle","12","  Bunun i&#231;in <a href=\"https:\/\/jenkins.io\/redirect\/scm-change-trigger\">SCM de&#287;i&#351;ikliklerini Jenkins'e bildirecek mekanizman&#305;n<\/a>"],"delete":["5","  Jenkins'&#305; cron'un alternatifi olarak kullanmak i&#231;in tasarlanm&#305;&#351;t&#305;r ve kesinlikle","12","  Bunun i&#231;in <a href=\"https:\/\/jenkins.io\/redirect\/scm-change-trigger\">SCM de&#287;i&#351;ikliklerini Jenkins'a bildirecek mekanizman&#305;n<\/a>"]}],"core\/src\/main\/resources\/hudson\/util\/DoubleLaunchChecker\/index_tr.properties":[{"add":["24","  Bu Jenkins''in garip davran\\u0131\\u015flar sergilemesine sebep olabilir, durumu en k\\u0131sa zamanda d\\u00fczeltin"],"delete":["24","  Bu Jenkins''\\u0131n garip davran\\u0131\\u015flar sergilemesine sebep olabilir, durumu en k\\u0131sa zamanda d\\u00fczeltin"]}],"core\/src\/main\/resources\/jenkins\/management\/Messages_tr.properties":[{"add":["24","SystemLogLink.Description=Sistem logu Jenkins''le ilgili olan <tt>java.util.logging<\/tt> \\u00E7\\u0131kt\\u0131lar\\u0131n\\u0131 yakalar."],"delete":["24","SystemLogLink.Description=Sistem logu Jenkins''la ilgili olan <tt>java.util.logging<\/tt> \\u00E7\\u0131kt\\u0131lar\\u0131n\\u0131 yakalar."]}],"core\/src\/main\/resources\/hudson\/security\/FullControlOnceLoggedInAuthorizationStrategy\/help_tr.html":[{"add":["7","  Jenkins'i public olarak kullan&#305;ma a&#231;m&#305;&#351; olmakt&#305;r. Bu &#351;ekilde, sadece g&#252;venilir "],"delete":["7","  Jenkins'&#305; public olarak kullan&#305;ma a&#231;m&#305;&#351; olmakt&#305;r. Bu &#351;ekilde, sadece g&#252;venilir "]}],"core\/src\/main\/resources\/hudson\/util\/IncompatibleAntVersionDetected\/index_tr.properties":[{"add":["23","  Jenkins''in \\u00fczerinde y\\u00fcr\\u00fct\\u00fcld\\u00fc\\u011f\\u00fc servlet container''\\u0131n eski bir Ant versiyonu y\\u00fckledi\\u011fi tespit edildi,\\","24","  bu da Jenkins''in kendi, daha yeni kopyas\\u0131n\\u0131 y\\u00fcklemesini engelliyor.\\","26","  Container i\\u00e7erisindeki kopyay\\u0131 Jenkins''in <tt>WEB-INF\/lib<\/tt> dizinindeki ile ezmeniz gerekebilir,\\","27","  veya classloader''\\u0131 delegasyonunu Jenkins''e vererek, Jenkins''in kendi kopyas\\u0131n\\u0131 y\\u00fcklemesini sa\\u011flayabilirsiniz."],"delete":["23","  Jenkins''\\u0131n \\u00fczerinde y\\u00fcr\\u00fct\\u00fcld\\u00fc\\u011f\\u00fc servlet container''\\u0131n eski bir Ant versiyonu y\\u00fckledi\\u011fi tespit edildi,\\","24","  bu da Jenkins''\\u0131n kendi, daha yeni kopyas\\u0131n\\u0131 y\\u00fcklemesini engelliyor.\\","26","  Container i\\u00e7erisindeki kopyay\\u0131 Jenkins''\\u0131n <tt>WEB-INF\/lib<\/tt> dizinindeki ile ezmeniz gerekebilir,\\","27","  veya classloader''\\u0131 delegasyonunu Jenkins''a vererek, Jenkins''\\u0131n kendi kopyas\\u0131n\\u0131 y\\u00fcklemesini sa\\u011flayabilirsiniz."]}],"core\/src\/main\/resources\/hudson\/model\/Fingerprint\/index_tr.properties":[{"add":["23","outside\\ Jenkins=Jenkins''in d\\u0131\\u015f\\u0131nda"],"delete":["23","outside\\ Jenkins=Jenkins''\\u0131n d\\u0131\\u015f\\u0131nda"]}],"core\/src\/main\/resources\/hudson\/model\/ComputerSet\/sidepanel_tr.properties":[{"add":["23","Manage\\ Jenkins=Jenkins''i Y\\u00f6net"],"delete":["23","Manage\\ Jenkins=Jenkins''\\u0131 Y\\u00f6net"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/installed_tr.properties":[{"add":["29","New\\ plugins\\ will\\ take\\ effect\\ once\\ you\\ restart\\ Jenkins=Yeni eklentiler Jenkins'i bir kere yeniden ba\\u015flatt\\u0131ktan sonra devreye girecektir","30","Changes\\ will\\ take\\ effect\\ when\\ you\\ restart\\ Jenkins=De\\u011fi\\u015fiklikler Jenkins'i yeniden ba\\u015flatt\\u0131ktan sonra devreye girecektir"],"delete":["29","New\\ plugins\\ will\\ take\\ effect\\ once\\ you\\ restart\\ Jenkins=Yeni eklentiler Jenkins'\\u0131 bir kere yeniden ba\\u015flatt\\u0131ktan sonra devreye girecektir","30","Changes\\ will\\ take\\ effect\\ when\\ you\\ restart\\ Jenkins=De\\u011fi\\u015fiklikler Jenkins'\\u0131 yeniden ba\\u015flatt\\u0131ktan sonra devreye girecektir"]}],"core\/src\/main\/resources\/hudson\/PluginManager\/sidepanel_tr.properties":[{"add":["23","Manage\\ Jenkins=Jenkins''i Y\\u00f6net"],"delete":["23","Manage\\ Jenkins=Jenkins''\\u0131 Y\\u00f6net"]}],"core\/src\/main\/resources\/hudson\/security\/GlobalSecurityConfiguration\/help-useSecurity_tr.html":[{"add":["8","  Jenkins'i intranet (veya ba&#351;ka \"g&#252;venilir\" bir ortamda) i&#231;erisinde kullan&#305;yorsan&#305;z, bu kutucu&#287;u","13","  Jenkins'i internete a&#231;acaksan&#305;z, g&#252;venli&#287;i mutlaka devreye al&#305;n. Jenkins'in &#231;al&#305;&#351;t&#305;rd&#305;&#287;&#305; i&#351;lemleri"],"delete":["8","  Jenkins'&#305; intranet (veya ba&#351;ka \"g&#252;venilir\" bir ortamda) i&#231;erisinde kullan&#305;yorsan&#305;z, bu kutucu&#287;u","13","  Jenkins'&#305; internete a&#231;acaksan&#305;z, g&#252;venli&#287;i mutlaka devreye al&#305;n. Jenkins'&#305;n &#231;al&#305;&#351;t&#305;rd&#305;&#287;&#305; i&#351;lemleri"]}],"core\/src\/main\/resources\/jenkins\/model\/GlobalQuietPeriodConfiguration\/help-quietPeriod_tr.html":[{"add":["16","      Jenkins'i y&#252;k&#252;n&#252;  ve yap&#305;land&#305;rma say&#305;s&#305;n&#305; azaltacakt&#305;r."],"delete":["16","      Jenkins'&#305; y&#252;k&#252;n&#252;  ve yap&#305;land&#305;rma say&#305;s&#305;n&#305; azaltacakt&#305;r."]}],"core\/src\/main\/resources\/hudson\/triggers\/SCMTrigger\/help_tr.html":[{"add":["1","  Jenkins'in konfig&#252;rasyonunu SCM'deki de&#287;i&#351;iklikleri kontrol edecek &#351;ekilde ayarla."],"delete":["1","  Jenkins'&#305;n konfig&#252;rasyonunu SCM'deki de&#287;i&#351;iklikleri kontrol edecek &#351;ekilde ayarla."]}],"core\/src\/main\/resources\/hudson\/tasks\/Fingerprinter\/FingerprintAction\/index_tr.properties":[{"add":["27","outside\\ Jenkins=Jenkins'in d\\u0131\\u015f\\u0131nda"],"delete":["27","outside\\ Jenkins=Jenkins'\\u0131n d\\u0131\\u015f\\u0131nda"]}],"core\/src\/main\/resources\/jenkins\/model\/Jenkins\/manage_tr.properties":[{"add":["22","Manage\\ Jenkins=Jenkins''i Y\\u00F6net"],"delete":["22","Manage\\ Jenkins=Jenkins''\\u0131 Y\\u00F6net"]}],"core\/src\/main\/resources\/hudson\/model\/AllView\/noJob_tr.properties":[{"add":["25","Welcome\\ to\\ Jenkins\\!=Jenkins''e Ho\\u015fgeldiniz\\!"],"delete":["25","Welcome\\ to\\ Jenkins\\!=Jenkins'a Ho\\u015fgeldiniz\\!"]}],"core\/src\/main\/resources\/jenkins\/model\/BuildDiscarderProperty\/help_tr.html":[{"add":["1","  Bu k&#305;s&#305;m, yap&#305;land&#305;rmalar&#305;n kay&#305;tlar&#305;n&#305; tutma s&#252;relerinizi y&#246;neterek Jenkins'in disk","8","      Tarih ile y&#246;netme. Jenkins'in belli bir tarihe ula&#351;m&#305;&#351; dosyalar&#305; silmesini sa&#287;layabilirsiniz.","11","      Say&#305; ile y&#246;netme. Jenkins'in N yap&#305;land&#305;rmay&#305; y&#246;netmesini sa&#287;layabilirsiniz. N say&#305;s&#305;na ula&#351;&#305;ld&#305;&#287;&#305;nda, yeni bir yap&#305;land&#305;rma,"],"delete":["1","  Bu k&#305;s&#305;m, yap&#305;land&#305;rmalar&#305;n kay&#305;tlar&#305;n&#305; tutma s&#252;relerinizi y&#246;neterek Jenkins'&#305;n disk","8","      Tarih ile y&#246;netme. Jenkins'&#305;n belli bir tarihe ula&#351;m&#305;&#351; dosyalar&#305; silmesini sa&#287;layabilirsiniz.","11","      Say&#305; ile y&#246;netme. Jenkins'&#305;n N yap&#305;land&#305;rmay&#305; y&#246;netmesini sa&#287;layabilirsiniz. N say&#305;s&#305;na ula&#351;&#305;ld&#305;&#287;&#305;nda, yeni bir yap&#305;land&#305;rma,"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/body_tr.properties":[{"add":["3","warning=Y\\u00FCkleme tamamland\\u0131\\u011F\\u0131nda ve bekleyen bir i\\u015F yoksa Jenkins''i yeniden ba\\u015Flat."],"delete":["3","warning=Y\\u00FCkleme tamamland\\u0131\\u011F\\u0131nda ve bekleyen bir i\\u015F yoksa Jenkins''\\u0131 yeniden ba\\u015Flat."]}],"core\/src\/main\/resources\/hudson\/model\/AbstractItem\/noWorkspace_tr.properties":[{"add":["22","li3=\\u00c7al\\u0131\\u015fma alan\\u0131 dizini ({0}), Jenkins''in kontrol\\u00fc d\\u0131\\u015f\\u0131nda silindi.","23","text=Jenkins''in bir \\u00e7al\\u0131\\u015fma alan\\u0131 yaratmas\\u0131 i\\u00e7in bir yap\\u0131land\\u0131rma \\u00e7al\\u0131\\u015ft\\u0131r\\u0131n."],"delete":["22","li3=\\u00c7al\\u0131\\u015fma alan\\u0131 dizini ({0}), Jenkins''\\u0131n kontrol\\u00fc d\\u0131\\u015f\\u0131nda silindi.","23","text=Jenkins''\\u0131n bir \\u00e7al\\u0131\\u015fma alan\\u0131 yaratmas\\u0131 i\\u00e7in bir yap\\u0131land\\u0131rma \\u00e7al\\u0131\\u015ft\\u0131r\\u0131n."]}],"war\/src\/main\/webapp\/help\/system-config\/master-slave\/numExecutors_tr.html":[{"add":["1","  Jenkins'in bu slave &#252;zerinde e&#351; zamanl&#305; ka&#231; tane yap&#305;land&#305;rma y&#252;r&#252;tebilece&#287;ini kontrol eder.","2","  Yani, buraya girilecek de&#287;er, Jenkins'in ne kadar y&#252;ke maruz kalaca&#287;&#305;n&#305; belirler.","11","  Bu de&#287;eri 0 yapmak, Jenkins'in, konfig&#252;rasyonunu kaybetmeden, devre d&#305;&#351;&#305; b&#305;rak&#305;lm&#305;&#351; bir slave'i"],"delete":["1","  Jenkins'&#305;n bu slave &#252;zerinde e&#351; zamanl&#305; ka&#231; tane yap&#305;land&#305;rma y&#252;r&#252;tebilece&#287;ini kontrol eder.","2","  Yani, buraya girilecek de&#287;er, Jenkins'&#305;n ne kadar y&#252;ke maruz kalaca&#287;&#305;n&#305; belirler.","11","  Bu de&#287;eri 0 yapmak, Jenkins'&#305;n, konfig&#252;rasyonunu kaybetmeden, devre d&#305;&#351;&#305; b&#305;rak&#305;lm&#305;&#351; bir slave'i"]}],"core\/src\/main\/resources\/hudson\/model\/Messages_tr.properties":[{"add":["53","  Jenkins''in merkezi \\u00f6zelli\\u011fi, projelerinizi yap\\u0131land\\u0131rman\\u0131za yard\\u0131m etmesidir. Bu proje t\\u00fcr\\u00fcn\\u00fc kullanarak, \\","99","ManageJenkinsAction.DisplayName=Jenkins''i Y\\u00f6net"],"delete":["53","  Jenkins''\\u0131n merkezi \\u00f6zelli\\u011fi, projelerinizi yap\\u0131land\\u0131rman\\u0131za yard\\u0131m etmesidir. Bu proje t\\u00fcr\\u00fcn\\u00fc kullanarak, \\","99","ManageJenkinsAction.DisplayName=Jenkins''\\u0131 Y\\u00f6net"]}],"core\/src\/main\/resources\/hudson\/model\/UpdateCenter\/sidepanel_tr.properties":[{"add":["23","Manage\\ Jenkins=Jenkins''i Y\\u00F6net"],"delete":["23","Manage\\ Jenkins=Jenkins''\\u0131 Y\\u00F6net"]}]}},"c3a19670d5400d805a7096a5b69df0ec14c532cd":{"changes":{"core\/src\/main\/java\/hudson\/model\/Computer.java":"MODIFY"},"diff":{"core\/src\/main\/java\/hudson\/model\/Computer.java":[{"add":["694","        int diff = executors.size()-n;","696","        if (diff>0) {","697","            \/\/ we have too many executors","702","        }","703","","704","        if (diff<0) {"],"delete":["693","        if(numExecutors==n) return; \/\/ no-op","694","","695","        int diff = n-numExecutors;","698","        if(diff<0) {","703","        } else {"]}]}},"e06367e9d62e1bb269fa3613eb7d830392e0ad4f":{"changes":{"core\/src\/main\/resources\/hudson\/tasks\/test\/AbstractTestResultAction\/summary.jelly":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AllView\/noJob.jelly":"MODIFY","core\/pom.xml":"MODIFY","core\/src\/main\/resources\/hudson\/model\/AbstractProject\/main.jelly":"MODIFY"},"diff":{"core\/src\/main\/resources\/hudson\/tasks\/test\/AbstractTestResultAction\/summary.jelly":[{"add":[],"delete":["41","    <j:whitespace> <\/j:whitespace>"]}],"core\/src\/main\/resources\/hudson\/model\/AllView\/noJob.jelly":[{"add":[],"delete":["30","    <j:whitespace> <\/j:whitespace>"]}],"core\/pom.xml":[{"add":["557","      <version>1.1-hudson-20100215<\/version>"],"delete":["557","      <version>1.1-hudson-20100211<\/version>"]}],"core\/src\/main\/resources\/hudson\/model\/AbstractProject\/main.jelly":[{"add":[],"delete":["49","        <j:whitespace> <\/j:whitespace>"]}]}}}